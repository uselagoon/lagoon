{"config":{"lang":["en","ja"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Lagoon","text":""},{"location":"#lagoon-the-open-source-application-delivery-platform-for-kubernetes","title":"Lagoon - the Open Source Application Delivery Platform for Kubernetes","text":"<p>Lagoon gives developers what they dream about. It's a system that allows developers to run the exact same code in their local and production environment. The same Docker images, the same service configurations, and the same code.</p>"},{"location":"#where-do-i-start","title":"Where do I start?","text":"<p>If you want to use Lagoon to host your website or application, visit Using Lagoon - The Basics</p> <p>To get more in depth with Lagoon functionality, visit Using Lagoon - Advanced</p> <p>To understand how Lagoon works, check out Lagoon Concepts - The Basics</p> <p>and for a deeper understanding, Lagoon Concepts - Advanced</p> <p>If you want to develop Lagoon (add features, fix bugs), Developing Lagoon</p>"},{"location":"#tldr-how-lagoon-works","title":"TL;DR: How Lagoon Works","text":"<ol> <li>Developers define and configure needed services within YAML files.</li> <li>When they are happy, they push the code to Git.</li> <li>Lagoon parses the YAML files and adds in any additional needed configuration.</li> <li>Lagoon builds the needed Docker images.</li> <li>Lagoon pushes them to a Docker registry.</li> <li>Lagoon creates the needed resources in Kubernetes.</li> <li>Lagoon monitors the deployment of the containers.</li> <li>When all is done, Lagoon informs the developers in different ways (Slack, email, website, etc).</li> </ol>"},{"location":"#help","title":"Help?","text":"<p>Questions? Ideas? Meet the maintainers and contributors.</p> <p>Chat with us on the Lagoon Discord: https://discord.gg/te5hHe95JE</p>"},{"location":"#a-couple-of-things-about-lagoon","title":"A couple of things about Lagoon","text":"<ol> <li>Lagoon is based on microservices. The deployment and build workflow is very complex. We have multiple version control sources, multiple clusters, and multiple notification systems. Each deployment is unique and can take from seconds to hours. It's built with flexibility and robustness in mind. Microservices communicate through a messaging system, which allows us to scale individual services up and down. It allows us to survive downtimes of individual services. It also allows us to try out new parts of Lagoon in production without affecting others.</li> <li>Lagoon uses many programming languages. Each programming language has specific strengths. We try to decide which language makes the most sense for each service. Currently, a lot of Lagoon is built in Node.js. This is partly because we started with Node.js, but also because Node.js allows asynchronous processing of webhooks, tasks and more. We are likely going to change the programming language of some services. This is what is great about microservices! We can replace a single service with another language without worrying about other parts of the platform.</li> <li>Lagoon is not Drupal-specific. Everything has been built so that it can run any Docker image. There are existing Docker images for Drupal, and support for Drupal-specific tools like Drush. But that's it!</li> <li>Lagoon is DevOps. It allows developers to define the services they need and customize them as they need. You might think this is not the right way to do it, and gives too much power to developers. We believe that as system engineers, we need to empower developers. If we allow developers to define services locally, and test them locally, they will find bugs and mistakes themselves.</li> <li>Lagoon runs on Docker and Kubernetes. (That one should be obvious, right?)</li> <li>Lagoon can be completely locally developed and tested.</li> <li>Lagoon is completely integration tested. This means we can test the whole process. From receiving Git webhooks to deploying into a Docker container, the same Git hash is deployed in the cluster.</li> <li>Most important: It's a work in progress. It's not done yet. At amazee.io, we believe that as a hosting community, we need to work together and share code where we can.</li> </ol> <p>We want you to understand the Lagoon infrastructure and how the services work together. Here is a schema (it's a little out of date - it doesn't include some of the more recent services we've added, or cover Kubernetes, so we're working on an update!): Lucid Chart \u200c</p>"},{"location":"#history-of-lagoon","title":"History of Lagoon","text":"<p>As described, Lagoon is a dream come true. At amazee.io, we've been hosting Drupal for more than 8 years. This is the fourth major iteration of our hosting platform. The third iteration was built around Puppet and Ansible. Every single piece of the platform was done with configuration management. This allowed very fast setup of new servers, but at the same time was also lacking customizability for developers. We implemented some customizability, with some already with Docker in production. However, we were never completely happy with it. We realized that our existing platform wasn't enough. With the rise of decoupled Drupal, the need to run Node.js on the server side, the requests for Elasticsearch, and different Solr versions, we had to do more. \u200c</p> <p>At the same time, we've been using Docker for many years for local development. It was always an idea to use Docker for everything in production. The only problem was the connection between local development and production environments. There are other systems that allow you to run Drupal in Docker in production. But, nothing allowed you to test the exact same images and services locally and in production.</p> <p>Lagoon was born in 2017. It has since been developed into a system that runs Docker in production. Lagoon has replaced our third generation hosting platform with a cutting edge all Docker-based system.</p>"},{"location":"#open-source","title":"Open Source","text":"<p>At amazee.io, we believe in open source. It was always troubling for us that open source code like Drupal was hosted on proprietary hosting platforms. The strength and success of a hosting company is not just their deployment systems or service configurations. It's the the people and knowledge that run the platform. The processes, skills, ability to react to unforeseen situations, and last but not least, the support they provide their clients.</p>"},{"location":"#license","title":"License","text":"<p>Lagoon is available under <code>an Apache 2.0 License</code>.</p>"},{"location":"code-of-conduct/","title":"Code of Conduct","text":""},{"location":"code-of-conduct/#our-pledge","title":"Our Pledge","text":"<p>In the interest of fostering an open and welcoming environment, we as contributors and maintainers pledge to making participation in our project and our community a harassment-free experience for everyone, regardless of age, body size, disability, ethnicity, gender identity and expression, level of experience, nationality, personal appearance, race, religion, or sexual identity and orientation.</p>"},{"location":"code-of-conduct/#our-standards","title":"Our Standards","text":"<p>Examples of behavior that contributes to creating a positive environment include:</p> <ul> <li>Using welcoming and inclusive language.</li> <li>Being respectful of differing viewpoints and experiences.</li> <li>Gracefully accepting constructive criticism.</li> <li>Focusing on what is best for the community.</li> <li>Showing empathy towards other community members.</li> </ul> <p>Examples of unacceptable behavior by participants include:</p> <ul> <li>The use of sexualized language or imagery and unwelcome sexual attention or advances.</li> <li>Trolling, insulting/derogatory comments, and personal or political attacks.</li> <li>Public or private harassment.</li> <li>Publishing others' private information, such as a physical or electronic address, without explicit permission.</li> <li>Other conduct which could reasonably be considered inappropriate in a professional setting.</li> </ul>"},{"location":"code-of-conduct/#our-responsibilities","title":"Our Responsibilities","text":"<p>Project maintainers are responsible for clarifying the standards of acceptable behavior and are expected to take appropriate and fair corrective action in response to any instances of unacceptable behavior.</p> <p>Project maintainers have the right and responsibility to remove, edit, or reject comments, commits, code, wiki edits, issues, and other contributions that are not aligned to this Code of Conduct, or to ban temporarily or permanently any contributor for other behaviors that they deem inappropriate, threatening, offensive, or harmful.</p>"},{"location":"code-of-conduct/#scope","title":"Scope","text":"<p>This Code of Conduct applies both within project spaces and in public spaces when an individual is representing the project or its community. Examples of representing a project or community include using an official project email address, posting via an official social media account, or acting as an appointed representative at an online or offline event. Representation of a project may be further defined and clarified by project maintainers.</p>"},{"location":"code-of-conduct/#enforcement","title":"Enforcement","text":"<p>Instances of abusive, harassing, or otherwise unacceptable behavior may be reported by contacting the project team at uselagoon@amazee.io. You may also reach out directly to Brandon, a Lagoon team member who has completed CoC training. The project team will review and investigate all complaints, and will respond in a way that it deems appropriate to the circumstances. The project team is obligated to maintain confidentiality with regard to the reporter of an incident. Further details of specific enforcement policies may be posted separately.</p> <p>Project maintainers who do not follow or enforce the Code of Conduct in good faith may face temporary or permanent repercussions as determined by other members of the project's leadership.</p>"},{"location":"code-of-conduct/#attribution","title":"Attribution","text":"<p>This Code of Conduct is adapted from the Contributor Covenant, version 1.4, available at http://contributor-covenant.org/version/1/4.</p>"},{"location":"contributing/","title":"Contributing","text":"<p>We gladly welcome any and all contributions to Lagoon!</p>"},{"location":"contributing/#what-kind-of-contributions-do-we-need","title":"What kind of contributions do we need?","text":"<p>Lagoon benefits from any kind of contribution - whether it's a bugfix, new feature, documentation update, or simply some queue maintenance - we're happy that you want to help</p>"},{"location":"contributing/#developing-for-lagoon","title":"Developing for Lagoon","text":"<p>There's a whole section on how to get Lagoon running on your local machine using KinD over at Developing Lagoon.  This documentation is still very WIP - but there are a lot of Makefile routines to help you out.</p>"},{"location":"contributing/#installing-lagoon","title":"Installing Lagoon","text":"<p>We've got another section that outlines how to install Lagoon from Helm charts at Installing Lagoon Into Existing Kubernetes Cluster - we'd love to get this process as slick as possible!</p>"},{"location":"contributing/#help-us-with-our-examples","title":"Help us with our examples","text":"<p>Right now one of our biggest needs is putting together examples of Lagoon working with various content management systems, etc, other than Drupal.</p> <p>If you can spin up an open source CMS or framework that we don\u2019t currently have as a Docker Compose stack, send us a PR. Look at the existing examples at https://github.com/uselagoon/lagoon-examples for tips, pointers and starter issues.</p> <p>One small catch \u2013 wherever possible, we\u2019d like them to be built using our base Docker Hub images https://hub.docker.com/u/uselagoon \u2013 if we don\u2019t have a suitable image, or our images need modifying \u2013 throw us a PR (if you can) or create an issue (so someone else can) at https://github.com/uselagoon/lagoon-images.</p> <p>Help us improve our existing examples, if you can - are we following best practices, is there something we\u2019re doing that doesn\u2019t make sense?</p> <p>Bonus points for anyone that helps contribute to tests for any of these examples \u2013 we\u2019ve got some example tests in a couple of the projects you can use for guidance \u2013 https://github.com/amazeeio/drupal-example-simple/blob/8.x/TESTING_dockercompose.md. The testing framework we\u2019re using is Leia, from the excellent team behind Lando.</p> <p>Help us to document our other examples better \u2013 we\u2019re not expecting a full manuscript, but tidy-ups, links to helpful resources and clarifying statements are all super-awesome.</p> <p>If you have any questions, reach out to us on Discord!</p>"},{"location":"contributing/#i-found-a-security-issue","title":"I found a security issue \ud83d\udd13","text":"<p>We take security very seriously. If you discover a security issue or think you found one, please bring it to the maintainers' attention.</p> <p>Danger</p> <p>Please send your findings to security@amazee.io. Please DO NOT file a GitHub issue for them.</p> <p>Security reports are greatly appreciated and will receive public karma and swag! We're also working on a Bug Bounty system.</p>"},{"location":"contributing/#i-found-an-issue","title":"I found an issue","text":"<p>We're always interested in fixing issues, therefore issue reports are very welcome. Please make sure to check that your issue does not already exist in the issue queue.</p>"},{"location":"contributing/#i-have-a-feature-request-or-idea","title":"I have a feature request or idea","text":"<p>Cool! Create an issue and we're happy to look over it. We can't guarantee that it will be implemented. But we are always interested in hearing ideas of what we could bring to Lagoon.</p> <p>Another good way is also to talk to us via Discord about your idea. Join today!</p>"},{"location":"contributing/#i-wrote-some-code","title":"I wrote some code","text":"<p>Epic! Please send us a pull request for it, we will do our best to review it and merge it if possible.</p>"},{"location":"applications/","title":"A wide range of Applications, Frameworks and Languages are supported by Lagoon","text":"<p>Lagoon broadly classifies three levels in the application stack:</p>"},{"location":"applications/#languages","title":"Languages","text":"<p>The core building blocks of any Lagoon project, these are usually provided by Lagoon-specific images.</p>"},{"location":"applications/#frameworks","title":"Frameworks","text":"<p>These take those base images, and add in the necessary logic, tools and packages needed to serve a website, or drive an application.</p>"},{"location":"applications/#applications","title":"Applications","text":"<p>Usually built on top of Frameworks, this is the layer that content editors or developers will interact with to shape the finished product.</p> <p>When we reference any repositories for use on Lagoon, we usually refer to them in three ways:</p>"},{"location":"applications/#templates","title":"Templates","text":"<p>These are fully-functional, cloneable starter repositories, maintained and updated regularly, ready to be extended and used with little customization.</p>"},{"location":"applications/#examples","title":"Examples","text":"<p>These are fully functional repositories, maintained and updated regularly, but may require some effort to make work for your individual project.</p>"},{"location":"applications/#demos","title":"Demos","text":"<p>These are repositories that have been built as a demonstration, and are usable for some of the concepts within, but aren't routinely maintained or updated.</p> <p>For a more complete list, check out out our GitHub repository: https://www.github.com/lagoon-examples and our website https://lagoon.sh/application/</p>"},{"location":"applications/laravel/","title":"Laravel on Lagoon","text":"<p>There are multiple ways of running Laravel on Lagoon.</p> <ul> <li>You may choose to \"lagoonize\" your existing application yourself (see the Lagoonizing documentation).</li> <li>We have a Laravel example repo of a simple Lagoonized Laravel installation for you to have a look at.</li> <li>(Recommended) We provide a tool called \"Sail:onLagoon\" that will take a standard Laravel Sail application and generate the appropriate Lagoon configuration files for you.</li> </ul>"},{"location":"applications/laravel/#app-environment-key","title":"App environment key","text":"<p>In order to set your app key, set the <code>APP_KEY</code> environment variable, either via the cli or the UI.</p> <p>This eliminates the need to store the key in code (in, for instance, a <code>.env</code> file).</p> <p>You can generate an app key by running the <code>php artisan key:generate --show</code>, which will output a valid key, rather than adjusting the project files.</p>"},{"location":"applications/node/","title":"Node.js","text":""},{"location":"applications/node/#introduction","title":"Introduction","text":"<p>Lagoon provides Node.js images that are based on the official Node Alpine images.</p> <p>More information on how to adapt your project to run on Lagoon can be found in our Node.js Docker Images section.</p>"},{"location":"applications/options/","title":"Configuring Applications for use on Lagoon","text":""},{"location":"applications/options/#lagoonyml","title":"<code>lagoon.yml</code>","text":"<p>Project- and environment-level configuration for Lagoon is provided in the <code>.lagoon.yml</code> file in your repository.</p> <p>See <code>lagoon-yml.md</code>.</p>"},{"location":"applications/options/#docker-composeyml","title":"<code>docker-compose.yml</code>","text":"<p>Service-level configuration for Lagoon in provided in the <code>docker-compose.yml</code> file in your repository. In particular, the <code>lagoon.type</code> and associated service labels are documented in the individual services.</p> <p>See <code>docker-compose-yml.md</code></p>"},{"location":"applications/options/#storage","title":"Storage","text":"<p>Lagoon has the ability to provision storage for most services - the built-in Lagoon service types have a <code>-persistent</code> variant that can add in the necessary PVCs, volumes, etc. We have updated our examples to reflect this configuration locally.</p>"},{"location":"applications/options/#databases","title":"Databases","text":"<p>Lagoon has configurations available for:</p> <ul> <li>Mariadb - all supported versions</li> <li>PostgreSQL - all supported versions</li> </ul>"},{"location":"applications/options/#database-as-a-service","title":"Database-as-a-service","text":"<p>Lagoon also has the capability to utilize the dbaas-operator to automatically provision these databases using an underlying managed database service (i.e. RDS, Google Cloud Databases, Azure Database). This will happen automatically when these services are provisioned and configured for your cluster. If these are not available, a pod will be provisioned as a fallback.</p>"},{"location":"applications/options/#cache","title":"Cache","text":"<p>Lagoon supports Redis as a cache backend. In production, some users provision a managed Redis service for their production environments to help them scale.</p>"},{"location":"applications/options/#search","title":"Search","text":"<p>Lagoon supports Elasticsearch, Solr and OpenSearch as search providers. External search providers can also be configured if required.</p>"},{"location":"applications/options/#ingressroutes","title":"Ingress/Routes","text":"<p>Lagoon auto-generates routes for services that have ingress requirements. Custom routes can be provided in the <code>.lagoon.yml</code> on a per-service basis.</p>"},{"location":"applications/options/#environment-variables","title":"Environment Variables","text":"<p>Lagoon makes heavy use of environment variables, at build and runtime. Where these are used to provide critical configuration for your application (e.g. database config/credentials) - it is important that the local and Lagoon versions are named similarly.</p> <p>See environment-variables.md.</p>"},{"location":"applications/other/","title":"Running other applications on Lagoon","text":"<p>Even if Lagoon doesn't have a base image for your particular application, framework or language, Lagoon can still build it!</p> <p>Extending on, or inheriting from the commons image, Lagoon can run almost any workload.</p>"},{"location":"applications/other/#hugo","title":"Hugo","text":"<p>This brief example shows how to build a Hugo website and serve it as static files in an NGINX image. The commons image is used to add Hugo, copy the site in, and build it. The NGINX image is then used to serve the site, with the addition of a customized NGINX config.</p> nginx.dockerfile<pre><code>FROM uselagoon/commons AS builder\n\nRUN apk add hugo git\nWORKDIR /app\nCOPY . /app\nRUN hugo\n\nFROM uselagoon/nginx\n\nCOPY --from=builder /app/public/ /app\nCOPY lagoon/static-files.conf /etc/nginx/conf.d/app.conf\n\nRUN fix-permissions /usr/local/openresty/nginx\n</code></pre> docker-compose.yml<pre><code>services:\nnginx:\nbuild:\ncontext: .\ndockerfile: lagoon/nginx.Dockerfile\nlabels:\nlagoon.type: nginx\n</code></pre>"},{"location":"applications/php/","title":"PHP","text":""},{"location":"applications/php/#introduction","title":"Introduction","text":"<p>Lagoon supports a wide range of PHP-based applications, such as Drupal, Laravel, Wordpress, Magento and Symfony.</p> <p>More information on how to adapt your PHP project to run on Lagoon can be found in our PHP-cli Docker Images and PHP-FPM Docker Images sections.</p>"},{"location":"applications/python/","title":"Python","text":""},{"location":"applications/python/#introduction","title":"Introduction","text":"<p>Lagoon provides images for Python 3.7 and above that can be used to build web apps in a wide range of Python-based frameworks and applications.</p> <p>More information on how to adapt your Python project to run on Lagoon can be found in our Python Docker Images section.</p>"},{"location":"applications/ruby/","title":"Ruby and Ruby on Rails","text":""},{"location":"applications/ruby/#introduction","title":"Introduction","text":"<p>We provide images for Ruby 3.0 and above, built on the official Ruby alpine Docker images.</p> <p>Below we assume that you're attempting to get a Rails app deployed on Lagoon, although most of the details described are really framework-neutral.</p>"},{"location":"applications/ruby/#getting-rails-running-on-lagoon","title":"Getting Rails running on Lagoon","text":""},{"location":"applications/ruby/#responding-to-requests","title":"Responding to requests","text":"<p>The Ruby on Rails example in the Lagoon examples repository is instructive here.</p> <p>In the <code>docker-compose.yml</code> we set up a service named <code>ruby</code>, which is the primary service that will be processing any dynamic requests.</p> <p>If you look at the dockerfile specified for the <code>ruby</code> service, you'll see that we're exposing port 3000. The <code>nginx</code> service will direct any requests for non-static assets to the <code>ruby</code> service on this port (see the nginx configuration file for more details).</p>"},{"location":"applications/ruby/#logging","title":"Logging","text":"<p>The Lagoon logging infrastructure is described in the docs here. Essentially, in order to make use of the infrastructure, logs need to be sent via a UDP message to <code>udp://application-logs.lagoon.svc:5140</code>.</p> <p>In our Rails example, we're importing the <code>logstash-logger</code> gem, and then in our <code>config/application.rb</code> we're initializing it with the following:</p> config/application.rb<pre><code>    if ENV.has_key?('LAGOON_PROJECT') &amp;&amp; ENV.has_key?('LAGOON_ENVIRONMENT') then\nlagoon_namespace = ENV['LAGOON_PROJECT'] + \"-\" + ENV['LAGOON_ENVIRONMENT']\nLogStashLogger.configure do |config|\nconfig.customize_event do |event|\nevent[\"type\"] = lagoon_namespace\nend\nend\nconfig.logstash.host = 'application-logs.lagoon.svc'\nconfig.logstash.type = :udp\nconfig.logstash.port = 5140\nend\n</code></pre>"},{"location":"applications/ruby/#database-configuration","title":"Database configuration","text":"<p>The example uses our PostgreSQL image (see the <code>docker-compose.yml</code> file). Configuring database access in Rails for Lagoon is very straightforward. Since Lagoon injects the database host, name, and credentials as environment variables, we can change our <code>config/database.yml</code> to be aware of these env vars, and consume them if they exist.</p> config/database.yml<pre><code>default: &amp;default\nadapter: postgresql\nencoding: unicode\npool: &lt;%= ENV.fetch(\"RAILS_MAX_THREADS\") { 5 } %&gt;\nusername: &lt;%= ENV.fetch(\"POSTGRES_USERNAME\") { \"drupal\" } %&gt;\npassword: &lt;%= ENV.fetch(\"POSTGRES_PASSWORD\") { \"drupal\" } %&gt;\nhost: &lt;%= ENV.fetch(\"POSTGRES_HOST\") { \"postgres\" } %&gt;\ndatabase: &lt;%= ENV.fetch(\"('POSTGRES_DATABASE'\") { \"drupal\" } %&gt;\n</code></pre>"},{"location":"applications/wordpress/","title":"WordPress on Lagoon","text":"<p>The WordPress template is configured to use Composer to install WordPress, its dependencies, and themes.</p> <p>The WordPress template is based on the https://github.com/roots/bedrock boilerplate, but extended to match a standardized Lagoon deployment pattern.</p>"},{"location":"applications/wordpress/#composer-install","title":"Composer Install","text":"<p>The template uses Composer to install WordPress and its themes.</p>"},{"location":"applications/wordpress/#database","title":"Database","text":"<p>Lagoon can support MariaDB and PostgreSQL databases, but as support for PostgreSQL is limited in WordPress, it isn't recommended for use.</p>"},{"location":"applications/wordpress/#nginx-configuration","title":"NGINX configuration","text":"<p>Lagoon doesn't have a built-in configuration for WordPress - instead, the template comes with a starting nginx.conf - please contribute any improvements you may find!</p>"},{"location":"applications/wordpress/#wp-cli","title":"WP-CLI","text":"<p>The Lagoon template installs <code>wp-cli</code> into the cli image to manage your WordPress install.</p>"},{"location":"applications/drupal/","title":"Drupal on Lagoon","text":"<p>Lagoon was built to host Drupal sites (no, seriously, it was - at least initially!)</p> <p>In this section you'll find more information on the various services that have been customised for use with Drupal.</p>"},{"location":"applications/drupal/#drupal_integrations-drupal-scaffolding-package","title":"<code>drupal_integrations</code> Drupal scaffolding package","text":"<p>The <code>drupal_integrations</code> package, available on packagist extends Drupal's core-composer-scaffold for use on Lagoon. It also provides additional Drush command <code>drush la</code> to retreive the Drush aliases for your Lagoon project.</p>"},{"location":"applications/drupal/#lagoon-logs-drupal-module","title":"<code>lagoon-logs</code> Drupal module","text":"<p>The <code>lagoon_logs</code> module, availalble on drupal.org provides zero-configuration logging for Drupal on Lagoon.</p>"},{"location":"applications/drupal/automatic-updates/","title":"Automatic Updates","text":"<p>Lagoon deploys applications in a way that is not compatible with some methods of updating Drupal core and contrib. Lagoon expects to build immutable images and run immutable containers. When the code of the application is changed at runtime, it can cause any of the following problems:</p> <ol> <li>Containers are managed automatically by Kubernetes and may be moved,    restarted, or scaled at any time. When this happens, the original built    container image will be ran and any changes that happened at runtime are    lost.</li> <li>Tasks and cronjobs may run with the orignal built container image and won't    have access to any updated code.</li> <li>Updating requires write permissions to the filesystem, but it is possible to    configure an environment that forces a read-only filesystem.</li> <li>Best practices is to deploy small containers that each do one thing. For a    typical Drupal project this means there is a <code>cli</code>, <code>php</code>, and <code>nginx</code>    container which each contain a copy of the code. Updating only one of these    containers will cause issues with code mismatches.</li> </ol> <p>The following update methods been disabled by Lagoon.</p>"},{"location":"applications/drupal/automatic-updates/#drupal-automatic-updates","title":"Drupal Automatic Updates","text":"<p>The Automatic Updates contrib module is disabled by and it will also be disabled when it moves into Drupal core.</p>"},{"location":"applications/drupal/automatic-updates/#drush","title":"Drush","text":"<p>Using <code>drush pm-install</code> or <code>drush pm-update</code> is disabled by default as part of the amazeeio/drupal-integrations package.</p>"},{"location":"applications/drupal/drush-9/","title":"Drush 9","text":""},{"location":"applications/drupal/drush-9/#aliases","title":"Aliases","text":"<p>Unfortunately, Drush 9 does not provide the ability to inject dynamic site aliases like Drush 8 did. We are working with the Drush team to implement this again. In the meantime, we have a workaround that allows you to use Drush 9 with Lagoon.</p>"},{"location":"applications/drupal/drush-9/#basic-idea","title":"Basic Idea","text":"<p>Drush 9 provides a new command, <code>drush site:alias-convert</code> , which can convert Drush 8-style site aliases over to the Drush 9 YAML site alias style. This will create a on- time export of the site aliases currently existing in Lagoon, and save them in <code>/app/drush/sites</code> . These are then used when running a command like <code>drush sa</code>.</p>"},{"location":"applications/drupal/drush-9/#preparation","title":"Preparation","text":"<p>In order to be able to use <code>drush site:alias-convert</code> , you need to do the following:</p> <ul> <li>Rename the <code>aliases.drushrc.php</code> inside the <code>drush</code> folder to <code>lagoon.aliases.drushrc.php</code>.</li> </ul>"},{"location":"applications/drupal/drush-9/#generate-site-aliases","title":"Generate Site Aliases","text":"<p>You can now convert your Drush aliases by running the following command in your project using the <code>cli</code> container:</p> Generate Site Aliases<pre><code>docker compose exec cli drush site:alias-convert /app/drush/sites --yes\n</code></pre> <p>It's good practice to commit the resulting YAML files into your Git repository, so that they are in place for your fellow developers.</p>"},{"location":"applications/drupal/drush-9/#use-site-aliases","title":"Use Site Aliases","text":"<p>In Drush 9, all site aliases are prefixed with a group. In our case, this is <code>lagoon</code>. You can show all site aliases with their prefix via:</p> Show all site aliases<pre><code>drush sa --format=list\n</code></pre> <p>and to use them:</p> Using Drush site alias<pre><code>drush @lagoon.main ssh\n</code></pre>"},{"location":"applications/drupal/drush-9/#update-site-aliases","title":"Update Site Aliases","text":"<p>If a new environment in Lagoon has been created, you can run <code>drush site:alias-convert</code> to update the site aliases file. If running this command does not update <code>lagoon.site.yml</code>, try deleting <code>lagoon.site.yml</code> first, and then re-run <code>drush site:alias-convert</code>.</p>"},{"location":"applications/drupal/drush-9/#drush-rsync-from-local-to-remote-environments","title":"Drush <code>rsync</code> from local to remote environments","text":"<p>If you would like to sync files from a local environment to a remote environment, you need to pass additional parameters:</p> Drush rsync<pre><code>drush rsync @self:%files @lagoon.main:%files -- --omit-dir-times --no-perms --no-group --no-owner --chmod=ugo=rwX\n</code></pre> <p>This also applies to syncing one remote environment to another, if you're not using the Lagoon tasks UI to copy files between environments.</p> <p>For example, if you wanted to sync the files from <code>@lagoon.main</code> to <code>@lagoon.dev</code> , and ran <code>drush rsync @lagoon.main @lagoon.dev</code> locally, without the extra parameters, you would probably run into a \"Cannot specify two remote aliases\" error.</p> <p>To resolve this, you would first need to SSH into your destination environment <code>drush @lagoon.dev ssh</code>, and then execute the <code>rsync</code> command with parameters similar to the above:</p> Drush rsync<pre><code>drush rsync @lagoon.main:%files  @self:%files -- --omit-dir-times --no-perms --no-group --no-owner --chmod=ugo=rwX\n</code></pre> <p>This is not necessary if you <code>rsync</code> from a remote to a local environment.</p> <p>Also, we're working with the Drush maintainers to find a way to inject this automatically.</p>"},{"location":"applications/drupal/first-deployment-of-drupal/","title":"First Deployment of Drupal","text":""},{"location":"applications/drupal/first-deployment-of-drupal/#1-make-sure-you-are-all-set","title":"1. Make sure you are all set","text":"<p>In order to make your first deployment a successful one, please make sure that your Drupal Project is Lagoonized and you have set up the project in Lagoon. If not, don't worry! Follow the Step-by-Step Guide which show you how this works.</p>"},{"location":"applications/drupal/first-deployment-of-drupal/#2-push","title":"2. Push","text":"<p>With Lagoon, you create a new deployment by pushing into a branch that is configured to be deployed.</p> <p>If you don't have any new code to push, don't worry, you can run</p> Git push<pre><code>git commit --allow-empty -m \"go, go! Power Rangers!\"\ngit push\n</code></pre> <p>This will trigger a push, and the Git hosting will inform Lagoon about this push via the configured webhook.</p> <p>If all is correct, you will see a notification in your configured chat system. (Contact your Lagoon administrator to configure this):</p> <p></p> <p>This tells you that Lagoon has just started to deploy your code. Depending on the size of the codebase and amount of containers, this will take a couple of seconds. Just relax. If you'd like to know what's happening now, check out the Build and Deploy Process of Lagoon.</p> <p>You can also check your Lagoon UI to see the progress of any deployment. (Contact your Lagoon administrator for the URL if you don't have it).</p>"},{"location":"applications/drupal/first-deployment-of-drupal/#3-a-fail","title":"3. A fail","text":"<p>Depending on the post-rollout tasks defined in <code>.lagoon.yml</code>, you might have run some tasks like <code>drush updb</code> or <code>drush cr</code>. These Drush tasks depend on a database existing within the environment, which obviously does not exist yet. Let's fix that! Keep reading.</p>"},{"location":"applications/drupal/first-deployment-of-drupal/#4-synchronize-local-database-to-the-remote-lagoon-environment","title":"4. Synchronize local database to the remote Lagoon environment","text":"<p>With full Drush site alias support in Lagoon, you can synchronize a local database with the remote Lagoon environment.</p> <p>Warning</p> <p>You may have to tell pygmy about your public keys before the next step.</p> <p>If you get an error like <code>Permission denied (publickey)</code>, check out the documentation here: pygmy - adding ssh keys.</p> <p>First let's make sure that you can see the Drush site aliases:</p> Get site aliases<pre><code>drush sa\n</code></pre> <p>This should return your just deployed environment (let's assume you just pushed into <code>develop</code>):</p> Returned site aliases<pre><code>[drupal-example]cli-drupal:/app$ drush sa\n@develop\n@self\ndefault\n</code></pre> <p>With this we can now synchronize the local database (which is represented in Drush via the site alias <code>@self</code>) with the remote one (<code>@develop</code>):</p> Drush sql-sync<pre><code>drush sql-sync @self @develop\n</code></pre> <p>You should see something like:</p> Drush sql-sync results<pre><code>[drupal-example]cli-drupal:/app$ drush sql-sync @self @develop\nYou will destroy data in ssh.example.com/drupal and replace with data from drupal.\nDo you really want to continue? (y/n): y\nStarting to dump database on Source.                                                                              [ok]\nDatabase dump saved to /home/drush-backups/drupal/20180227075813/drupal_20180227_075815.sql.gz               [success]\nStarting to discover temporary files directory on Destination.                                                    [ok]\nYou will delete files in drupal-example-develop@ssh.example.com:/tmp/drupal_20180227_075815.sql.gz and replace with data from /home/drush-backups/drupal/20180227075813/drupal_20180227_075815.sql.gz\nDo you really want to continue? (y/n): y\nCopying dump file from Source to Destination.                                                                     [ok]\nStarting to import dump file onto Destination database.\n</code></pre> <p>Now let's try another deployment, again an empty push:</p> Git push<pre><code>git commit --allow-empty -m \"go, go! Power Rangers!\"\ngit push\n</code></pre> <p>This time all should be green:</p> <p></p> <p>Click on the links in the notification, and you should see your Drupal site loaded in all its beauty! It will probably not have images yet, which we will handle in Step 6.</p> <p>If it is still failing, check the logs link for more information.</p>"},{"location":"applications/drupal/first-deployment-of-drupal/#5-synchronize-local-files-to-the-remote-lagoon-environment","title":"5. Synchronize local files to the remote Lagoon environment","text":"<p>You probably guessed it: we can do it with Drush:</p> Drush rsync<pre><code>drush rsync @self:%files @develop:%files\n</code></pre> <p>It should show you something like:</p> Drush rsync results<pre><code>[drupal-example]cli-drupal:/app$ drush rsync @self:%files @develop:%files\nYou will delete files in drupal-example-develop@ssh.example.com:/app/web/sites/default/files and replace with data from /app/web/sites/default/files/\nDo you really want to continue? (y/n): y\n</code></pre> <p>In some cases, though, it might not look correct, like here:</p> Drush rsync results<pre><code>[drupal-example]cli-drupal:/app$ drush rsync @self:%files @develop:%files\nYou will delete files in drupal-example-develop@ssh.example.com:'/app/web/%files' and replace with data from '/app/web/%files'/\nDo you really want to continue? (y/n):\n</code></pre> <p>The reason for that is that the Drupal cannot resolve the path of the files directory. This most probably has to do with Drupal not being fully configured or having a missing database. For a workaround you can use <code>drush rsync @self:sites/default/files @develop:sites/default/files</code>, but we suggest that you actually check your local and remote Drupal (you can test with <code>drush status</code> to see if the files directory is correctly configured).</p>"},{"location":"applications/drupal/first-deployment-of-drupal/#6-its-done","title":"6. It's done","text":"<p>As soon as Lagoon is done building and deploying it will send a second notification to the chat system, like so:</p> <p></p> <p>This tells you:</p> <ul> <li>Which project has been deployed.</li> <li>Which branch and Git SHA has been deployed.</li> <li>A link to the full logs of the build and deployment.</li> <li>Links to all routes (URLs) where the environment can be reached.</li> </ul> <p>That's it! We hope that wasn't too hard - making devOps accessible is what we are striving for.</p>"},{"location":"applications/drupal/first-deployment-of-drupal/#but-wait-how-about-other-branches-or-the-production-environment","title":"But wait, how about other branches or the production environment?","text":"<p>That's the beauty of Lagoon: it's exactly the same: Push the branch name you defined to be your production branch and that one will be deployed.</p>"},{"location":"applications/drupal/first-deployment-of-drupal/#failure-dont-worry","title":"Failure? Don't worry","text":"<p>Did the deployment fail? Oh no! But we're here to help:</p> <ol> <li>Click on the <code>logs</code> link in the error notification. It will tell you where in the deployment process the failure happened.</li> <li>If you can't figure it out, contact your Lagoon administrator, they are here to help!</li> </ol>"},{"location":"applications/drupal/integrate-drupal-and-fastly/","title":"Integrate Drupal &amp; Fastly","text":""},{"location":"applications/drupal/integrate-drupal-and-fastly/#prerequisites","title":"Prerequisites","text":"<ul> <li>Drupal 7+</li> <li>A Fastly service ID</li> <li>A Fastly API token with the permission to purge</li> </ul>"},{"location":"applications/drupal/integrate-drupal-and-fastly/#drupal-7-with-url-based-purging","title":"Drupal 7 with URL based purging","text":"<ol> <li>Download and install the Fastly Drupal module.</li> <li>Configure the Fastly service ID and API token.</li> <li>Optionally configure the webhooks (so you can ping Slack for instance when a cache purge is sent)</li> <li>Only URL based purging can be done in Drupal 7 (simple purging).</li> <li>Alter Drupal's client IP in <code>settings.php</code>:</li> </ol> settings.php changes for Drupal 7<pre><code>$conf['reverse_proxy_header'] = 'HTTP_TRUE_CLIENT_IP';\n</code></pre>"},{"location":"applications/drupal/integrate-drupal-and-fastly/#drupal-10-with-cache-tag-purging","title":"Drupal 10+ with cache tag purging","text":"<p>Use Composer to get the latest version of the module:</p> Download the Fastly Drupal module and dependencies<pre><code>composer require drupal/fastly drupal/http_cache_control drupal/purge\n</code></pre> <p>You will need to enable the following modules:</p> <ul> <li><code>fastly</code></li> <li><code>fastlypurger</code></li> <li><code>http_cache_control</code> (2.x)</li> <li><code>purge</code></li> <li><code>purge_ui</code> (technically optional, but this is really handy to have enabled on production)</li> <li><code>purge_processor_lateruntime</code></li> <li><code>purge_processor_cron</code></li> <li><code>purge_queuer_coretags</code></li> <li><code>purge_drush</code> (useful for purge via Drush, here is a list of commands)</li> </ul>"},{"location":"applications/drupal/integrate-drupal-and-fastly/#configure-the-fastly-module-in-drupal","title":"Configure the Fastly module in Drupal","text":"<p>Configure the Fastly service ID and API token. A Site ID is generated for you automatically. You can use runtime environment variables, or you can edit the settings form found at <code>/admin/config/services/fastly</code>:</p> <ul> <li><code>FASTLY_API_TOKEN</code></li> <li><code>FASTLY_API_SERVICE</code></li> </ul>"},{"location":"applications/drupal/integrate-drupal-and-fastly/#set-the-purge-options","title":"Set the purge options","text":"<ul> <li>Cache tag hash length: 4</li> <li>Purge method: Use soft purge</li> </ul> <p>A <code>4</code> character cache tag is plenty for most sites, a <code>5</code> character cache tag is likely better for sites with millions of entities (to reduce cache tag collisions).</p> <p>Note</p> <p>Soft purging should be used, this means the object in Fastly is marked as stale, rather than being evicted entirely so that it can be used in the event the origin is down (with the feature serve while stale).</p> <p></p>"},{"location":"applications/drupal/integrate-drupal-and-fastly/#set-the-stale-content-options","title":"Set the Stale Content Options","text":"<p>Set the options to what makes sense for your site. Minimum 1 hour (<code>3600</code>), maximum 1 week (<code>604800</code>). Generally something like the following will be fine:</p> <ol> <li>Stale while revalidate - on, <code>14440</code> seconds</li> <li>Stale if error - on, <code>604800</code> seconds</li> </ol> <p></p> <p>Optionally configure the webhooks (so you can ping Slack for instance when a cache purge is sent).</p> <p></p>"},{"location":"applications/drupal/integrate-drupal-and-fastly/#configure-the-purge-module","title":"Configure the Purge module","text":"<p>Visit the purge page <code>/admin/config/development/performance/purge</code></p> <p>Set up the following options:</p>"},{"location":"applications/drupal/integrate-drupal-and-fastly/#cache-invalidation","title":"Cache Invalidation","text":"<ul> <li>Drupal Origin: Tag</li> <li>Fastly: E, Tag, URL</li> </ul>"},{"location":"applications/drupal/integrate-drupal-and-fastly/#queue","title":"Queue","text":"<ul> <li>Queuers: Core tags queuer, Purge block(s)</li> <li>Queue: Database</li> <li>Processors: Core processor, Late runtime processor, Purge block(s)</li> </ul> <p>What this means is that we will be using Drupal's built-in core tag queuer (add tags to the queue), the queue will be stored in the database (default), and the queue will be processed by</p> <ul> <li>Cron processor</li> <li>Late runtime processor</li> </ul> <p>In order for the cron processor to run, you need to ensure that cron is running on your site. Ideally every minute. You can manually run it in your <code>cli</code> pod, to ensure that <code>purge_processor_cron_cron()</code> is being executed without errors.</p> start cron<pre><code>[drupal8]production@cli-drupal:/app$ drush cron -v\n...\n[notice] Starting execution of purge_processor_cron_cron(), execution of node_cron() took 21.16ms.\n</code></pre> <p>The <code>Late runtime processor</code> will run in <code>hook_exit()</code> for every page load, this can be useful to process the purges nearly as quickly as they come into the queue.</p> <p>By having both, you guarantee that purges happen as soon as possible.</p>"},{"location":"applications/drupal/integrate-drupal-and-fastly/#optimal-cache-header-setup","title":"Optimal Cache Header Setup","text":"<p>Out of the box, Drupal does not have the power to set different cache lifetimes in the browser vs in Fastly. So if you do set long cache lifetimes in Drupal, often end users will not see them if their browser has cached the page. If you install the <code>2.x</code> version of the HTTP Cache Control module, this will give you a lot more flexibility on what caches and for how long.</p> <p>For most sites, a sensible default could be</p> <ul> <li>Shared cache maximum age : 1 month</li> <li>Browser cache maximum age : 10 minutes</li> <li>404 cache maximum age: 15 minutes</li> <li>302 cache maximum age: 1 hour</li> <li>301 cache maximum age: 1 hour</li> <li>5xx cache maximum age: no cache</li> </ul> <p>Note</p> <p>This relies on your site having accurate cache tags represented for all the content that exists on the page.</p>"},{"location":"applications/drupal/integrate-drupal-and-fastly/#true-client-ips","title":"True client IPs","text":"<p>We configure Fastly to send the actual client IP back on the HTTP header <code>True-Client-IP</code>, you can make Drupal respect this header with the following changes in <code>settings.php</code>:</p> settings.php changes for Drupal &lt; 8.7.0<pre><code>$settings['reverse_proxy'] = TRUE;\n$settings['reverse_proxy_header'] = 'HTTP_TRUE_CLIENT_IP';\n</code></pre> <p>However, with Drupal 8.7.0, there was a change to remove this functionality. You can achieve the same goal with the following snippet</p> settings.php changes for Drupal &gt;= 8.7.0<pre><code>/**\n * Tell Drupal to use the True-Client-IP HTTP header.\n */\nif (isset($_SERVER['HTTP_TRUE_CLIENT_IP'])) {\n  $_SERVER['REMOTE_ADDR'] = $_SERVER['HTTP_TRUE_CLIENT_IP'];\n}\n</code></pre>"},{"location":"applications/drupal/integrate-drupal-and-fastly/#drush-integration","title":"Drush integration","text":"settings.php<pre><code> fastly:\n   fastly:purge:all (fpall)                                                    Purge whole service.\n   fastly:purge:key (fpkey)                                                    Purge cache by key.\n   fastly:purge:url (fpurl)                                                    Purge cache by Url.\n</code></pre>"},{"location":"applications/drupal/integrate-drupal-and-fastly/#viewing-fastly-caching-headers-using-curl","title":"Viewing Fastly caching headers using cURL","text":"<p>Use this function: (works in Linux and Mac OSX)</p> cURL function<pre><code>function curlf() { curl -sLIXGET -H 'Fastly-Debug:1' \"$@\" | grep -iE 'X-Cache|Cache-Control|Set-Cookie|X-Varnish|X-Hits|Vary|Fastly-Debug|X-Served|surrogate-control|surrogate-key' }\n</code></pre> Using cURL<pre><code>$ curlf https://www.example-site-fastly.com\ncache-control: max-age=601, public, s-maxage=2764800\nsurrogate-control: max-age=2764800, public, stale-while-revalidate=3600, stale-if-error=3600\nfastly-debug-path: (D cache-wlg10427-WLG 1612906144) (F cache-wlg10426-WLG 1612906141) (D cache-fra19179-FRA 1612906141) (F cache-fra19122-FRA 1612906141)\nfastly-debug-ttl: (H cache-wlg10427-WLG - - 3) (M cache-fra19179-FRA - - 0)\nfastly-debug-digest: 1118d9fefc8a514ca49d49cb6ece04649e1acf1663398212650bb462ba84c381\nx-served-by: cache-fra19179-FRA, cache-wlg10427-WLG\nx-cache: MISS, HIT\nx-cache-hits: 0, 1\nvary: Cookie, Accept-Encoding\n</code></pre> <p>From the above headers we can see that:</p> <ul> <li>The HTML page is cacheable</li> <li>Browsers will cache the page for 601 seconds</li> <li>Fastly will cache the page for 32 days (<code>2764800</code> seconds)</li> <li>Tiered caching is in effect (edge PoP in Wellington, and shield PoP in France)</li> <li>The HTML page was a cache hit at the edge PoP</li> </ul>"},{"location":"applications/drupal/integrate-drupal-and-fastly/#sending-manual-purge-requests-to-fastly","title":"Sending manual purge requests to Fastly","text":"<p>If you ever want to remove a specific page from cache manually, there are ways to do this.</p> Purge Fastly by single URL<pre><code>curl -Ssi -XPURGE -H 'Fastly-Soft-Purge:1' -H \"Fastly-Key:$FASTLY_API_TOKEN\" https://www.example.com/subpage\n</code></pre> <p>You can also purge by cache tag:</p> Purge Fastly by cache tag<pre><code>curl -XPOST -H 'Fastly-Soft-Purge:1' -H \"Fastly-Key:$FASTLY_API_TOKEN\" https://api.fastly.com/service/$FASTLY_API_SERVICE/purge/&lt;surrogatekey&gt;\n</code></pre> <p>You can also use the Fastly CLI which helps to make this a little nicer.</p>"},{"location":"applications/drupal/phpunit-and-phpstorm/","title":"PHPUnit and PhpStorm","text":"<p>Note</p> <p>This document assumes the following:</p> <p>- You are using Docker.</p> <p>- You are using a standard Amazee/Lagoon project with a <code>docker-compose.yml</code> file.</p> <p>- You are on a Mac - it should work for other operating systems but folder structure and some configuration settings may be different.</p>"},{"location":"applications/drupal/phpunit-and-phpstorm/#configuring-the-project","title":"Configuring the project","text":"<ol> <li>Duplicate* the <code>/core/phpunit.xml.dist</code> file to <code>/core/phpunit.xml</code></li> <li> <p>Edit* <code>/core/phpunit.xml</code> and fill in the following variables:</p> <ul> <li>SIMPLETEST_DB: <code>mysql://drupal:drupal@mariadb:3306/drupal#db</code></li> <li>SIMPLETEST_BASE_URL: <code>&lt;PROJECT_URL&gt;</code></li> </ul> </li> </ol>"},{"location":"applications/drupal/phpunit-and-phpstorm/#configuring-phpstorm","title":"Configuring PhpStorm","text":""},{"location":"applications/drupal/phpunit-and-phpstorm/#set-up-docker","title":"Set Up Docker","text":"<ol> <li>In PhpStorm, go to File &gt; Settings &gt; Build, Execution, Deployment &gt; Docker</li> <li>Click: <code>+</code></li> <li>Select: <code>Docker for Mac</code></li> </ol>"},{"location":"applications/drupal/phpunit-and-phpstorm/#set-up-cli-interpreter","title":"Set Up CLI interpreter","text":"<p>Add a new CLI interpreter:</p> <ol> <li>In PhpStorm, go to File &gt; Settings &gt; Languages &amp; Frameworks &gt; PHP</li> <li>Click <code>...</code> and then <code>+</code></li> <li>Next select: Add a new CLI interpreter from Docker, vagrant...</li> <li>Use the following configurations:<ul> <li>Server: <code>&lt;DOCKER&gt;</code></li> <li>Configuration file(s): <code>./docker-compose.yml</code></li> <li>Service: <code>cli</code></li> <li>Lifecycle: <code>Connect to existing container ('docker compose exec')</code></li> </ul> </li> <li>Path mappings:<ul> <li>Local path: <code>&lt;ROOT_PATH&gt;</code></li> <li>Remote path*: <code>/app</code></li> </ul> </li> </ol> <p></p>"},{"location":"applications/drupal/phpunit-and-phpstorm/#set-up-remote-interpreter","title":"Set Up Remote Interpreter","text":"<p>Add Remote Interpreter:</p> <ol> <li>In PhpStorm, go to File &gt; Settings &gt; Languages &amp; Frameworks &gt; PHP &gt; Test Frameworks</li> <li>Click <code>+</code> and select <code>PHPUnit by Remote Interpreter</code></li> <li>Use the following configurations:<ul> <li>CLI Interpreter: <code>&lt;CLI_INTERPRETER&gt;</code></li> <li>Path mappings*: <code>&lt;PROJECT_ROOT&gt; -&gt; /app</code></li> <li>PHPUnit: <code>Use Composer autoloader</code></li> <li>Path to script*: <code>/app/vendor/autoload.php</code></li> <li>Default configuration file*: <code>/app/web/core/phpunit.xml</code></li> </ul> </li> </ol> <p></p>"},{"location":"applications/drupal/phpunit-and-phpstorm/#setupconfigure-runner-template","title":"Setup/Configure Runner Template","text":"<ol> <li>Configure runner:<ol> <li>In PhpStorm, go to Run &gt; Edit Configurations... &gt; Templates &gt; PHPUnit</li> <li>Use the following configurations:<p>1. Test scope: <code>Defined in the configuration file</code></p> <p>2. Interpreter: <code>&lt;CLI_INTERPRETER&gt;</code></p> </li> </ol> </li> </ol> <p></p> <p>Note</p> <p>If you are not on a Mac, this may vary.</p>"},{"location":"applications/drupal/phpunit-and-phpstorm/#final-checks","title":"Final checks","text":""},{"location":"applications/drupal/phpunit-and-phpstorm/#some-final-checks-to-run-before-you-run-a-test","title":"Some final checks to run before you run a test","text":"<ol> <li>You have the project up and running:  <code>$ docker compose up -d</code></li> <li>The project is working without any errors, visit the site just to make sure it all works as expected - this is not 100% necessary, but nice to know it is working normally.</li> <li>We should be ready to run some tests!</li> </ol>"},{"location":"applications/drupal/phpunit-and-phpstorm/#ready-to-run","title":"Ready to Run","text":"<p>Now you have the above configuration set up it should be as straightforward as going to the test you want to run and pressing the green arrow!</p> <p>Once you press this PhpStorm will use Docker to enter the CLI container, then start running PHPUnit based upon the config.</p> <p></p>"},{"location":"applications/drupal/step-by-step-getting-drupal-ready-to-run-on-lagoon/","title":"Step by Step: Getting Drupal ready to run on Lagoon","text":""},{"location":"applications/drupal/step-by-step-getting-drupal-ready-to-run-on-lagoon/#1-lagoon-drupal-setting-files","title":"1. Lagoon Drupal Setting Files","text":"<p>In order for Drupal to work with Lagoon, we need to teach Drupal about Lagoon and Lagoon about Drupal. This happens by copying specific YAML and PHP files into your Git repository.</p> <p>If you're working on a Drupal project, you can check out one of the various Drupal example projects in our examples repository. We have Drupal 8 and 9 and some variants of each depending on your needs, such as database types. Clone the repository that best suits your needs to get started!</p> <p>Here is a summary of the Lagoon- and Drupal-specific files you will find:</p> <ul> <li><code>.lagoon.yml</code> - The main file that will be used by Lagoon to understand what should be deployed and many more things. This file has some sensible Drupal defaults. If you would like to edit or modify, please check the documentation for <code>.lagoon.yml</code>.</li> <li><code>docker-compose.yml</code>, <code>.dockerignore</code>, and <code>*.dockerfile</code> (or <code>Dockerfile</code>) - These files are used to run your local Drupal development environment, they tell Docker which services to start and how to build them. They contain sensible defaults and many commented lines. We hope that it's well-commented enough to be self-describing. If you would like to find out more, see documentation for <code>docker-compose.yml</code>.</li> <li><code>sites/default/*</code> - These <code>.php</code> and <code>.yml</code> files tell Drupal how to communicate with Lagoon containers both locally and in production. They also provide a straightforward system for specific overrides in development and production environments. Unlike other Drupal hosting systems, Lagoon never ever injects Drupal settings files into your Drupal. Therefore, you can edit them however you like. Like all other files, they contain sensible defaults and some commented parts.</li> <li><code>drush/aliases.drushrc.php</code> - These files are specific to Drush and tell Drush how to talk to the Lagoon GraphQL API in order to learn about all site aliases there are.</li> <li><code>drush/drushrc.php</code> - Some sensible defaults for Drush commands.</li> </ul>"},{"location":"applications/drupal/step-by-step-getting-drupal-ready-to-run-on-lagoon/#update-your-gitignore-settings","title":"Update your <code>.gitignore</code> Settings","text":"<p>Don't forget to make sure your <code>.gitignore</code> will allow you to commit the settings files.</p> <p>Drupal is shipped with <code>sites/*/settings*.php</code> and <code>sites/*/services*.yml</code> in <code>.gitignore</code>. Remove that, as with Lagoon we don't ever have sensitive information in the Git repository.</p>"},{"location":"applications/drupal/step-by-step-getting-drupal-ready-to-run-on-lagoon/#note-about-webroot-in-drupal-8","title":"Note about <code>WEBROOT</code> in Drupal 8","text":"<p>Unfortunately the Drupal community has not decided on a standardized <code>WEBROOT</code> folder name. Some projects put Drupal within <code>web</code>, and others within <code>docroot</code> or somewhere else. The Lagoon Drupal settings files assume that your Drupal is within <code>web</code>, but if this is different for your Drupal, please adapt the files accordingly.</p>"},{"location":"applications/drupal/step-by-step-getting-drupal-ready-to-run-on-lagoon/#note-about-composerjson","title":"Note about <code>composer.json</code>","text":"<p>If you installed Drupal via composer, please check your <code>composer.json</code> and make sure that the <code>name</code> is NOT <code>drupal/drupal</code>, as this could confuse Drush and other tools of the Drupal universe, just rename it to something like <code>myproject/drupal</code></p>"},{"location":"applications/drupal/step-by-step-getting-drupal-ready-to-run-on-lagoon/#2-customize-docker-composeyml","title":"2. Customize <code>docker-compose.yml</code>","text":"<p>Don't forget to customize the values in <code>lagoon-project</code> &amp; <code>LAGOON_ROUTE</code> with your site-specific name &amp; the URL you'd like to access the site with. Here's an example:</p> docker-compose.yml<pre><code>x-environment:\n&amp;default-environment\nLAGOON_PROJECT: *lagoon-project\n# Route that should be used locally. If you are using pygmy, this route *must* end with .docker.amazee.io.\nLAGOON_ROUTE: http://drupal-example.docker.amazee.io\n</code></pre>"},{"location":"applications/drupal/step-by-step-getting-drupal-ready-to-run-on-lagoon/#3-build-images","title":"3. Build Images","text":"<p>First, we need to build the defined images:</p> Build images<pre><code>docker compose build\n</code></pre> <p>This will tell <code>docker-compose</code> to build the Docker images for all containers that have a <code>build:</code> definition in the <code>docker-compose.yml</code>. Usually for Drupal this is the case for the <code>cli</code>, <code>nginx</code> and <code>php</code> images. We do this because we want to run specific build commands (like <code>composer install</code>) or inject specific environment variables (like <code>WEBROOT</code>) into the images.</p> <p>Usually, building is not necessary every time you edit your Drupal code (as the code is mounted into the containers from your host), but rebuilding does not hurt. Plus, Lagoon will build the exact same Docker images during a deploy, so you can check that your build will also work during a deployment by just running <code>docker compose build</code> again.</p>"},{"location":"applications/drupal/step-by-step-getting-drupal-ready-to-run-on-lagoon/#4-start-containers","title":"4. Start Containers","text":"<p>Now that the images are built, we can start the containers:</p> Start containers<pre><code>docker compose up -d\n</code></pre> <p>This will bring up all containers. After the command is done, you can check with <code>docker compose ps</code> to ensure that they are all fully up and have not crashed. If there is a problem, check the logs with <code>docker compose logs -f [servicename]</code>.</p>"},{"location":"applications/drupal/step-by-step-getting-drupal-ready-to-run-on-lagoon/#5-rerun-composer-install-for-composer-projects-only","title":"5. Rerun <code>composer install</code> (for Composer projects only)","text":"<p>In a local development environment, you probably want all dependencies downloaded and installed, so connect to the <code>cli</code> container and run <code>composer install</code>:</p> Run composer install in CLI<pre><code>docker compose exec cli bash\ncomposer install\n</code></pre> <p>This might sound weird, as there was already a <code>composer install</code> executed during the build step, so let us explain:</p> <ul> <li>In order to be able to edit files on the host and have them immediately available in the container, the default <code>docker-composer.yml</code> mounts the whole folder into the the containers (this happens with <code>.:/app:delegated</code> in the volumes section). This also means that all dependencies installed during the Docker build are overwritten with the files on the host.</li> <li>Locally, you probably want dependencies defined as <code>require-dev</code> in <code>composer.json</code> to exist as well, while on a production deployment they would just use unnecessary space. So we run <code>composer install --no-dev</code> in the Dockerfile and <code>composer install</code> manually.</li> </ul> <p>If everything went well, open the <code>LAGOON_ROUTE</code> defined in <code>docker-compose.yml</code> (for example <code>http://drupal.docker.amazee.io</code>) and you should be greeted by a nice Drupal error. Don't worry - that's ok right now, most important is that it tries to load a Drupal site.</p> <p>If you get a 500 or similar error, make sure everything loaded properly with Composer.</p>"},{"location":"applications/drupal/step-by-step-getting-drupal-ready-to-run-on-lagoon/#6-check-status-and-install-drupal","title":"6. Check Status and Install Drupal","text":"<p>Finally it's time to install Drupal, but just before that we want to make sure everything works. We suggest using Drush for that:</p> Drush status<pre><code>docker compose exec cli bash\ndrush status\n</code></pre> <p>This should return something like:</p> Drush status result<pre><code>[drupal-example]cli-drupal:/app$ drush status\n[notice] Missing database table: key_value\nDrupal version       :  8.6.1\nSite URI             :  http://drupal.docker.amazee.io\nDatabase driver      :  mysql\nDatabase hostname    :  mariadb\nDatabase port        :  3306\nDatabase username    :  drupal\nDatabase name        :  drupal\nPHP binary           :  /usr/local/bin/php\nPHP config           :  /usr/local/etc/php/php.ini\nPHP OS               :  Linux\nDrush script         :  /app/vendor/drush/drush/drush\nDrush version        :  9.4.0\nDrush temp           :  /tmp\nDrush configs        :  /home/.drush/drush.yml\n                        /app/vendor/drush/drush/drush.yml\nDrupal root          :  /app/web\nSite path            :  sites/default\n</code></pre> <p>Warning</p> <p>You may have to tell pygmy about your public key before the next step.</p> <p>If you get an error like <code>Permission denied (publickey)</code>, check out the documentation here: pygmy - adding ssh keys</p> <p>Now it is time to install Drupal (if instead you would like to import an existing SQL file, please skip to step 7, but we suggest you start with a clean Drupal installation in the beginning to be sure everything works).</p> Install Drupal<pre><code>drush site-install\n</code></pre> <p>This should output something like:</p> drush site-install<pre><code>[drupal-example]cli-drupal:/app$ drush site-install\nYou are about to DROP all tables in your 'drupal' database. Do you want to continue? (y/n): y\nStarting Drupal installation. This takes a while. Consider using the --notify global option.\nInstallation complete.  User name: admin  User password: a7kZJekcqh\nCongratulations, you installed Drupal!\n</code></pre> <p>Now you can visit the URL defined in <code>LAGOON_ROUTE</code> and you should see a fresh and clean installed Drupal site - Congrats!</p> <p></p>"},{"location":"applications/drupal/step-by-step-getting-drupal-ready-to-run-on-lagoon/#7-import-existing-database-dump","title":"7. Import existing Database Dump","text":"<p>If you already have an existing Drupal site, you probably want to import its database over to your local site.</p> <p>There are many different ways to create a database dump. If your current hosting provider has Drush installed, you can use the following:</p> Drush sql-dump<pre><code>drush sql-dump --result-file=dump.sql\n\nDatabase dump saved to dump.sql\n</code></pre> <p>Now you have a <code>dump.sql</code> file that contains your whole database.</p> <p>Copy this file into your Git repository and connect to the <code>cli</code>, and you should see the file in there:</p> Viewing dump.sql<pre><code>[drupal-example]cli-drupal:/app$ ls -l dump.sql\n-rw-r--r--    1 root     root          5281 Dec 19 12:46 dump.sql\n</code></pre> <p>Now you can drop the current database, and then import the dump.</p> Import dump.sql<pre><code>drush sql-drop\n\ndrush sql-cli &lt; dump.sql\n</code></pre> <p>Verify that everything works with visiting the URL of your project. You should have a functional copy of your Drupal site!</p>"},{"location":"applications/drupal/step-by-step-getting-drupal-ready-to-run-on-lagoon/#8-drupal-files-directory","title":"8. Drupal files directory","text":"<p>A Drupal site also needs the files directory. As the whole folder is mounted into the Docker containers, add the files into the correct folder (probably <code>web/sites/default/files</code>, <code>sites/default/files</code> or something similar). Remember what you've set as your <code>WEBROOT</code> - it may not be the same for all projects.</p>"},{"location":"applications/drupal/step-by-step-getting-drupal-ready-to-run-on-lagoon/#9-done","title":"9. Done","text":"<p>You are done with your local setup. The Lagoon team wishes happy Drupaling!</p>"},{"location":"applications/drupal/subfolders/","title":"Subfolders","text":"<p>An example could be: <code>www.example.com</code> points to one Drupal site, while <code>www.example.com/blog</code> loads a blog built in another Drupal.</p> <p>It would be possible to run both Drupals in a single Git repository and deploy it as a whole, but this workflow might not fit every team, and having separate Git repositories fits some situations better.</p>"},{"location":"applications/drupal/subfolders/#modifications-of-root-application","title":"Modifications of root application","text":"<p>The root application (in this example, the Drupal site for <code>www.example.com</code>), needs a couple of NGINX configs that will configure NGINX to be a reverse proxy to the subfolder applications:</p>"},{"location":"applications/drupal/subfolders/#location_prependconf","title":"<code>location_prepend.conf</code>","text":"<p>Create a file called <code>location_prepend.conf</code> in the root of your Drupal installation:</p> location_prepend.conf<pre><code>resolver 8.8.8.8 valid=30s;\n\nlocation ~ ^/subfolder {\n  # If $http_x_forwarded_proto is empty (If it is not set from an upstream reverseproxy).\n  # Aet it to the current scheme.\n  set_if_empty $http_x_forwarded_proto $scheme;\n\n  proxy_set_header      X-Forwarded-For $proxy_add_x_forwarded_for;\n  proxy_set_header      X-Forwarded-Proto $scheme;\n  proxy_set_header      X-Forwarded-Proto $http_x_forwarded_proto;\n  proxy_set_header      X-Lagoon-Forwarded-Host $host;\n  # Will be used by downstream to know the original host.\n  proxy_set_header      X-REVERSEPROXY $hostname;\n  proxy_set_header      FORWARDED \"\";\n  # Unset FORWARDED because drupal8 gives errors if it is set.\n  proxy_set_header      Proxy \"\";\n  # Unset Proxy because drupal8 gives errors if it is set.\n  proxy_ssl_server_name on;\n\n  # NGINX needs a variable set in order for the DNS resolution to work correctly.\n  set                   $subfolder_drupal_host \"https://nginx-lagoonproject-${LAGOON_GIT_SAFE_BRANCH}.clustername.com:443\";\n  # LAGOON_GIT_SAFE_BRANCH variable will be replaced during docker entrypoint.\n  proxy_pass            $subfolder_drupal_host;\n  proxy_set_header      Host $proxy_host;\n  # $proxy_host will be automatically generated by NGINX based on proxy_pass (it needs to be without scheme and port).\n\n  expires off; # make sure we honor cache headers from the proxy and not overwrite them\n</code></pre> <p>Replace the following strings:</p> <ul> <li><code>/subfolder</code> with the name of the subfolder you want to use. For example, <code>/blog</code>.</li> <li><code>nginx</code> with the service that you want to point too in the subfolder project.</li> <li><code>lagoonproject</code> with the Lagoon projectname of the subfolder project.</li> </ul>"},{"location":"applications/drupal/subfolders/#nginx-dockerfile","title":"NGINX Dockerfile","text":"<p>Add the following to your NGINX Dockerfile (<code>nginx.dockerfile</code> or <code>Dockerfile.nginx</code>):</p> nginx.dockerfile<pre><code>COPY location_prepend.conf /etc/nginx/conf.d/drupal/location_prepend.conf\nRUN fix-permissions /etc/nginx/conf.d/drupal/*\n</code></pre>"},{"location":"applications/drupal/subfolders/#modifications-of-subfolder-application","title":"Modifications of subfolder application","text":"<p>Like the root application, we also need to teach the subfolder application (in this example, the Drupal installation for <code>www.example.com/blog</code>), that it is running under a subfolder. To do this, we create two files:</p>"},{"location":"applications/drupal/subfolders/#location_drupal_append_subfolderconf","title":"<code>location_drupal_append_subfolder.conf</code>","text":"<p>Create a file called <code>location_drupal_append_subfolder.conf</code> in the root of your subfolder Drupal installation:</p> location_drupal_append_subfolder.conf<pre><code># When injecting a script name that is prefixed with `subfolder`, Drupal will\n# render all URLs with `subfolder` prefixed\nfastcgi_param  SCRIPT_NAME        /subfolder/index.php;\n\n# If we are running via a reverse proxy, we inject the original HOST URL\n# into PHP. With this Drupal will render all URLs with the original HOST URL,\n# and not the current used HOST.\n\n# We first set the HOST to the regular host variable.\nfastcgi_param  HTTP_HOST          $http_host;\n# Then we overwrite it with `X-Lagoon-Forwarded-Host` if it exists.\nfastcgi_param  HTTP_HOST          $http_x_lagoon_forwarded_host if_not_empty;\n</code></pre> <p>Replace <code>/subfolder</code> with the name of the subfolder you want to use. For example, <code>/blog</code>.</p>"},{"location":"applications/drupal/subfolders/#server_prepend_subfolderconf","title":"<code>server_prepend_subfolder.conf</code>","text":"<p>Create a file called <code>server_prepend_subfolder.conf</code> in the root of your subfolder Drupal installation:</p> server_prepend_subfolder.conf<pre><code># Check for redirects before we do the internal NGINX rewrites.\n# This is done because the internal NGINX rewrites uses `last`,\n# which instructs NGINX to not check for rewrites anymore (and\n# `if` is part of the redirect module).\ninclude /etc/nginx/helpers/010_redirects.conf;\n\n# This is an internal NGINX rewrite, it removes `/subfolder/`\n# from the requests so that NGINX handles the request as it would\n# have been `/` from the beginning.\n# The `last` flag is also important. It will cause NGINX not to\n# execute any more rewrites, because it would redirect forever\n# with the rewrites below.\nrewrite ^/subfolder/(.*)          /$1             last;\n\n# Make sure redirects are NOT absolute, to ensure NGINX does not\n# overwrite the host of the URL - which could be something other than\n# what NGINX currently thinks it is serving.\nabsolute_redirect off;\n\n# If a request just has `/subfolder` we 301 redirect to `/subfolder/`\n# (Drupal really likes a trailing slash)\nrewrite ^/subfolder               /subfolder/     permanent;\n\n# Any other request we prefix 301 redirect with `/subfolder/`\nrewrite ^\\/(.*)                   /subfolder/$1   permanent;\n</code></pre> <p>Replace <code>/subfolder</code> with the name of the subfolder you want to use. For example, <code>/blog</code>.</p>"},{"location":"applications/drupal/subfolders/#nginx-dockerfile_1","title":"NGINX Dockerfile","text":"<p>We also need to modify the NGINX Dockerfile.</p> <p>Add the following to your NGINX Dockerfile (<code>nginx.dockerfile</code> or <code>Dockerfile.nginx</code>):</p> nginx.dockerfile<pre><code>COPY location_drupal_append_subfolder.conf /etc/nginx/conf.d/drupal/location_drupal_append_subfolder.conf\nCOPY server_prepend_subfolder.conf /etc/nginx/conf.d/drupal/server_prepend_subfolder.conf\nRUN fix-permissions /etc/nginx/conf.d/drupal/*\n</code></pre>"},{"location":"applications/drupal/services/","title":"Services","text":""},{"location":"applications/drupal/services/#mariadb-is-the-open-source-successor-to-mysql","title":"MariaDB is the open-source successor to MySQL","text":"<p>Learn about MariaDB with Drupal</p> <p>Documentation on the plain MariaDB image (the MariaDB-Drupal image is built on this).</p>"},{"location":"applications/drupal/services/#redis-is-a-fast-open-source-in-memory-key-value-data-store-for-use-as-a-database-cache-message-broker-and-queue","title":"Redis is a fast, open-source, in-memory key-value data store for use as a database, cache, message broker, and queue","text":"<p>Learn about Redis with Drupal.</p> <p>Documentation on the Redis-persistent image.</p>"},{"location":"applications/drupal/services/#solr-is-an-open-source-search-platform","title":"Solr is an open-source search platform","text":"<p>Learn about Solr with Drupal.</p> <p>Documentation on the plain Solr image (the Solr-Drupal image is built on this).</p>"},{"location":"applications/drupal/services/#varnish-is-a-powerful-open-source-http-engine-and-reverse-http-proxy-that-helps-to-speed-up-your-website","title":"Varnish is a powerful, open-source HTTP engine and reverse HTTP proxy that helps to speed up your website","text":"<p>Learn about Varnish with Drupal</p> <p>Documentation on the plain Varnish image (the Varnish-Drupal image is built on this).</p>"},{"location":"applications/drupal/services/mariadb/","title":"MariaDB-Drupal","text":"<p>The Lagoon <code>mariadb-drupal</code> Docker image Dockerfile is a customized <code>mariadb</code> image to use within Drupal projects in Lagoon. It differs from the <code>mariadb</code> image only for initial database setup, made by some environment variables:</p> Environment Variable Default Description <code>MARIADB_DATABASE</code> drupal Drupal database created at startup. <code>MARIADB_USER</code> drupal Default user created at startup. <code>MARIADB_PASSWORD</code> drupal Password of default user created at startup. <p>If the <code>LAGOON_ENVIRONMENT_TYPE</code> variable is set to <code>production</code>, performances are set accordingly by using <code>MARIADB_INNODB_BUFFER_POOL_SIZE=1024</code> and <code>MARIADB_INNODB_LOG_FILE_SIZE=256</code>.</p>"},{"location":"applications/drupal/services/mariadb/#additional-mariadb-logging","title":"Additional MariaDB Logging","text":"<p>During the course of development, it may be necessary to enable either query logging or slow query logging. To do so, set the environment variables <code>MARIADB_LOG_SLOW</code> or <code>MARIADB_LOG_QUERIES</code>. This can be done in <code>docker-compose.yml</code>.</p>"},{"location":"applications/drupal/services/mariadb/#connecting-to-mysql-container-from-the-host","title":"Connecting to MySQL container from the host","text":"<p>If you would like to connect to your MySQL database inside the Docker container with an external tool like Sequel Pro, MySQL Workbench, HeidiSQL, DBeaver, plain old <code>mysql-cli</code> or anything else, here's how to get the IP and port info.</p>"},{"location":"applications/drupal/services/mariadb/#get-published-mysql-port-from-the-container","title":"Get published MySQL port from the container","text":"<p>By default, Docker assigns a randomly published port for MySQL during each container start. This is done to prevent port collisions.</p> <p>To get the published port via <code>docker</code>:</p> <p>Run: <code>docker port [container_name]</code>.</p> Get port<pre><code>$ docker port drupal_example_mariadb_1\n3306/tcp -&gt; 0.0.0.0:32797\n</code></pre> <p>Or via <code>docker-compose</code> inside a Drupal repository:</p> <p>Run: <code>docker compose port [service_name] [interal_port]</code>.</p> Set ports<pre><code>docker compose port mariab 3306\n0.0.0.0:32797\n</code></pre>"},{"location":"applications/drupal/services/mariadb/#setting-a-static-port-not-recommended","title":"Setting a static port (not recommended)","text":"<p>During development, if you are using an external database tool, it may become cumbersome to continually check and set the MySQL connection port.</p> <p>To set a static port, edit your service definition in your <code>docker-compose.yml</code>.</p> docker-compose.yml<pre><code>  mariadb:\n...\nports:\n- \"33772:3306\" # Exposes port 3306 with a 33772 on the host port. Note by doing this you are responsible for managing port collisions`.\n</code></pre> <p>Warning</p> <p>By setting a static port you become responsible for managing port collisions.</p>"},{"location":"applications/drupal/services/mariadb/#connect-to-mysql","title":"Connect to MySQL","text":"<p>Now you can use these details to connect to whatever database management tool you'd like.</p> Linux OS X IP/Host IP from container <code>docker.amazee.io</code> Port Published port from container Published port from container Username <code>drupal</code> <code>drupal</code> Password <code>drupal</code> <code>drupal</code> Database <code>drupal</code> <code>drupal</code>"},{"location":"applications/drupal/services/nginx/","title":"NGINX-Drupal","text":"<p>The Lagoon <code>nginx-drupal</code> Docker image. Optimized to work with Drupal. Based on Lagoon <code>nginx</code> image.</p>"},{"location":"applications/drupal/services/nginx/#lagoon-adaptions","title":"Lagoon adaptions","text":"<p>This image is prepared to be used on Lagoon. There are therefore some things already done:</p> <ul> <li>Folder permissions are automatically adapted with <code>fix-permissions</code>, so this image will work with a random user.</li> <li>To keep <code>drupal.conf</code> 's configuration file as clean and customizable as possible, we added <code>include</code> directives in the main sections of the file:<code>server</code>, <code>location /</code>, <code>location @drupal</code> and <code>location @php</code>.</li> <li>Further information in the section <code>Drupal.conf</code> customization.</li> </ul>"},{"location":"applications/drupal/services/nginx/#included-drupal-configuration-drupalconf","title":"Included Drupal configuration (<code>drupal.conf</code>)","text":"<p>The image includes a full NGINX working configuration for Drupal 7, 8 and 9. It includes some extra functionalities like:</p> <ul> <li>Support for <code>humanstxt</code> Drupal module.</li> <li>Support for <code>robotstxt</code> Drupal module.</li> <li>Disallow access to <code>vagrant</code> directory for local development.</li> </ul>"},{"location":"applications/drupal/services/nginx/#drupalconf-customization","title":"<code>Drupal.conf</code> customization","text":"<p>The <code>drupal.conf</code> file is a customized version of the <code>nginx</code> configuration file, optimized for Drupal. Customers have different ways of customizing it:</p> <ul> <li>Modifying it (hard to support in case of errors).</li> <li>Using built-in customization through <code>*.conf</code> files.</li> </ul> <p>The <code>drupal.conf</code> file is divided into several sections. The sections we've included in our customizations are:</p> <ul> <li><code>server</code></li> <li><code>location /</code></li> <li><code>location @drupal</code></li> <li><code>location @php</code>.</li> </ul> <p>For each of this section, there are two includes:</p> <ul> <li><code>*_prepend.conf</code></li> <li><code>*_append.conf</code></li> </ul> <p>Here what the <code>location @drupal</code> section looks like:</p> drupal.conf<pre><code>location @drupal {\ninclude /etc/nginx/conf.d/drupal/location_drupal_prepend*.conf;\ninclude        /etc/nginx/fastcgi.conf;\nfastcgi_param  SCRIPT_NAME        /index.php;\nfastcgi_param  SCRIPT_FILENAME    $realpath_root/index.php;\nfastcgi_pass   ${NGINX_FASTCGI_PASS:-php}:9000;\ninclude /etc/nginx/conf.d/drupal/location_drupal_append*.conf;\n}\n</code></pre> <p>This configuration allows customers to create files called <code>location_drupal_prepend.conf</code> and <code>location_drupal_append.conf</code>, where they can put all the configuration they want to insert before and after the other statements.</p> <p>Those files, once created, MUST exist in the <code>nginx</code> container, so add them to <code>Dockerfile.nginx</code> like so:</p> dockerfile.nginx<pre><code>COPY location_drupal_prepend.conf /etc/nginx/conf.d/drupal/location_drupal_prepend.conf\nRUN fix-permissions /etc/nginx/conf.d/drupal/location_drupal_prepend.conf\n</code></pre>"},{"location":"applications/drupal/services/nginx/#drupal-core-statistics-module-configuration","title":"Drupal Core Statistics Module Configuration","text":"<p>If you're using the core Statistics module, you may run into an issue that needs a quick configuration change.</p> <p>With the default NGINX configuration, the request to the tracking endpoint <code>/core/modules/statistics/statistics.php</code> is denied (404).</p> <p>This is related to the default NGINX configuration:</p> drupal.conf<pre><code>location ~* ^.+\\.php$ {\n    try_files /dev/null @drupal;\n}\n</code></pre> <p>To fix the issue, we instead define a specific location rule and inject this as a location prepend configuration:</p> drupal.conf<pre><code>## Allow access to to the statistics endpoint.\nlocation ~* ^(/core/modules/statistics/statistics.php) {\n      try_files /dev/null @php;\n}\n</code></pre> <p>And copy this during the NGINX container build:</p> dockerfile.nginx<pre><code># Add specific Drupal statistics module NGINX configuration.\nCOPY .lagoon/nginx/location_prepend_allow_statistics.conf /etc/nginx/conf.d/drupal/location_prepend_allow_statistics.conf\n</code></pre>"},{"location":"applications/drupal/services/php-cli/","title":"PHP-CLI-Drupal","text":"<p>The Lagoon <code>php-cli-drupal</code> Docker image is optimized to work with Drupal. It is based on the Lagoon <code>php-cli</code> image, and has all the command line tools needed for the daily maintenance of a Drupal website:</p> <ul> <li><code>drush</code></li> <li><code>drupal console</code></li> <li><code>drush launcher</code> (which will fallback to Drush 8 if there is no site installed Drush found)</li> </ul>"},{"location":"applications/drupal/services/php-cli/#supported-versions","title":"Supported versions","text":"<ul> <li>7.3 (available for compatibility only, no longer officially supported)</li> <li>7.4 (available for compatibility only, no longer officially supported) - <code>uselagoon/php-7.4-cli-drupal</code></li> <li>8.0 (available for compatibility only, no longer officially supported) - <code>uselagoon/php-8.0-cli-drupal</code></li> <li>8.1 Dockerfile - <code>uselagoon/php-8.1-cli-drupal</code></li> <li>8.2 Dockerfile - <code>uselagoon/php-8.2-cli-drupal</code></li> <li>8.3 Dockerfile - <code>uselagoon/php-8.3-cli-drupal</code></li> </ul> <p>All PHP versions use their own Dockerfiles.</p>"},{"location":"applications/drupal/services/php-cli/#lagoon-adaptions","title":"Lagoon adaptions","text":"<p>This image is prepared to be used on Lagoon. There are therefore some things already done:</p> <ul> <li>Folder permissions are automatically adapted with <code>fix-permissions</code>, so this image will work with a random user.</li> </ul>"},{"location":"applications/drupal/services/redis/","title":"Redis","text":"<p>We recommend using Redis for internal caching. Add the Redis service to <code>docker-compose.yaml</code>.</p> docker-compose.yml<pre><code>  redis:\nimage: uselagoon/redis-5\nlabels:\nlagoon.type: redis\n&lt;&lt; : *default-user # Uses the defined user from top.\nenvironment:\n&lt;&lt; : *default-environment\n</code></pre> <p>Also, to configure Redis, add the following to your <code>settings.php</code>.</p>"},{"location":"applications/drupal/services/redis/#drupal-7","title":"Drupal 7","text":"settings.php<pre><code>  if(getenv('LAGOON')){\n    $conf['redis_client_interface'] = 'PhpRedis';\n    $conf['redis_client_host'] = 'redis';\n    $conf['lock_inc'] = 'sites/all/modules/contrib/redis/redis.lock.inc';\n    $conf['path_inc'] = 'sites/all/modules/contrib/redis/redis.path.inc';\n    $conf['cache_backends'][] = 'sites/all/modules/contrib/redis/redis.autoload.inc';\n    $conf['cache_default_class'] = 'Redis_Cache';\n    $conf['cache_class_cache_form'] = 'DrupalDatabaseCache';\n    $conf['cache_class_cache_field'] = 'DrupalDatabaseCache';\n  }\n</code></pre> <p>Depending on file system structure, the module paths may need to be updated.</p>"},{"location":"applications/drupal/services/redis/#drupal-8","title":"Drupal 8","text":"<p>The Drupal 8 config is largely stock. Notably, Redis is disabled while Drupal is being installed.</p> settings.php<pre><code>if (getenv('LAGOON')){\n  $settings['redis.connection']['interface'] = 'PhpRedis';\n  $settings['redis.connection']['host'] = getenv('REDIS_HOST') ?: 'redis';\n  $settings['redis.connection']['port'] = getenv('REDIS_SERVICE_PORT') ?: '6379';\n  $settings['cache_prefix']['default'] = getenv('LAGOON_PROJECT') . '_' . getenv('LAGOON_GIT_SAFE_BRANCH');\n  // Do not set the cache during installations of Drupal.\n  if (!drupal_installation_attempted() &amp;&amp; extension_loaded('redis')) {\n    $settings['cache']['default'] = 'cache.backend.redis';\n    // And allows to use it without the Redis module being enabled.\n    $class_loader-&gt;addPsr4('Drupal\\\\redis\\\\', 'modules/contrib/redis/src');\n    $settings['bootstrap_container_definition'] = [\n      'parameters' =&gt; [],\n      'services' =&gt; [\n        'redis.factory' =&gt; [\n          'class' =&gt; 'Drupal\\redis\\ClientFactory',\n        ],\n        'cache.backend.redis' =&gt; [\n          'class' =&gt; 'Drupal\\redis\\Cache\\CacheBackendFactory',\n          'arguments' =&gt; ['@redis.factory', '@cache_tags_provider.container', '@serialization.phpserialize'],\n        ],\n        'cache.container' =&gt; [\n          'class' =&gt; '\\Drupal\\redis\\Cache\\PhpRedis',\n          'factory' =&gt; ['@cache.backend.redis', 'get'],\n          'arguments' =&gt; ['container'],\n        ],\n        'cache_tags_provider.container' =&gt; [\n          'class' =&gt; 'Drupal\\redis\\Cache\\RedisCacheTagsChecksum',\n          'arguments' =&gt; ['@redis.factory'],\n        ],\n        'serialization.phpserialize' =&gt; [\n          'class' =&gt; 'Drupal\\Component\\Serialization\\PhpSerialize',\n        ],\n      ],\n    ];\n  }\n}\n</code></pre>"},{"location":"applications/drupal/services/redis/#persistent","title":"Persistent","text":"<p>Redis can also be configured as a persistent backend.</p> docker-compose.yml<pre><code>redis:\nimage: uselagoon/redis-5-persistent\nlabels:\nlagoon.type: redis-persistent\nenvironment:\n&lt;&lt; : *default-environment\n</code></pre>"},{"location":"applications/drupal/services/redis/#environment-variables","title":"Environment Variables","text":"<p>Environment variables are meant to store some common information about Redis.</p> Environment Variable Default Description <code>LOGLEVEL</code> <code>notice</code> Redis loglevel <code>DATABASES</code> <code>1</code> Number of databases <code>MAXMEMORY</code> <code>100mb</code> Maximum memory usage of Redis"},{"location":"applications/drupal/services/redis/#redis-failover","title":"Redis Failover","text":"<p>Here is a snippet to implement a Redis failover in case of the Redis container not being available (for example, during maintenance)</p> <p>The following is inserted into Drupal's active <code>settings.php</code> file.</p> settings.php<pre><code>if (getenv('LAGOON')) {\n  $contrib_path = is_dir('sites/all/modules/contrib') ? 'sites/all/modules/contrib' : 'sites/all/modules';\n  $redis = DRUPAL_ROOT . '/sites/all/modules/contrib/redis';\n  if (file_exists(\"$redis/redis.module\")) {\n    require_once \"$redis/redis.module\";\n    $conf['redis_client_host'] = getenv('REDIS_HOST') ?: 'redis';\n    $conf['redis_client_port'] = getenv('REDIS_SERVICE_PORT') ?: 6379;\n    $conf['cache_prefix'] = getenv('REDIS_CACHE_PREFIX') ?: getenv('LAGOON_PROJECT') . '_' . getenv('LAGOON_GIT_SAFE_BRANCH');\n    try {\n      // Ensure that there is a connection to redis.\n      $client = Redis_Client::getClient();\n      $response = $client-&gt;ping();\n      if (!$response) {\n      throw new \\Exception('Redis could be reached but is not responding correctly.');\n      }\n      $conf['redis_client_interface'] = 'PhpRedis';\n      $conf['lock_inc'] = $contrib_path . '/redis/redis.lock.inc';\n      $conf['path_inc'] = $contrib_path . '/redis/redis.path.inc';\n      $conf['cache_backends'][] = $contrib_path . '/redis/redis.autoload.inc';\n      $conf['cache_default_class'] = 'Redis_Cache';\n    } catch (\\Exception $e) {\n      // Redis is not available for this request we should not configure the\n      // redis backend and ensure no cache is used. This will retry next\n      // request.\n      if (!class_exists('DrupalFakeCache')) {\n        $conf['cache_backends'][] = 'includes/cache-install.inc';\n      }\n      $conf['cache_default_class'] = 'DrupalFakeCache';\n    }\n  }\n}\n</code></pre>"},{"location":"applications/drupal/services/solr/","title":"Solr-Drupal","text":""},{"location":"applications/drupal/services/solr/#standard-use","title":"Standard use","text":"<p>For Solr 8 and 9, we ship the default schema files provided by the search_api_solr Drupal module. Add the Solr version you would like to use in your <code>docker-compose.yml</code> file, following our example.</p>"},{"location":"applications/drupal/services/solr/#custom-schema","title":"Custom schema","text":"<p>To implement schema customizations for Solr in your project, look to how Lagoon creates our standard images.</p> <ul> <li>In the <code>solr</code> section of your <code>docker-compose.yml</code> file, replace <code>image: uselagoon/solr:8</code> with:</li> </ul> docker-compose.yml<pre><code>  build:\ncontext: .\ndockerfile: solr.dockerfile\n</code></pre> <ul> <li>Place your schema files in your code repository. We typically like to use <code>.lagoon/solr</code>.</li> <li>Create a <code>solr.dockerfile</code>.</li> </ul> solr.dockerfile<pre><code>FROM uselagoon/solr:8\n\nCOPY .lagoon/solr /solr-conf/conf\n\nCMD solr-recreate drupal /solr-conf &amp;&amp; solr-foreground\n</code></pre> <p>The goal is to have your Solr configuration files exist at <code>/solr-conf/conf</code> in the image you are building.</p>"},{"location":"applications/drupal/services/solr/#multiple-cores","title":"Multiple cores","text":"<p>To implement multiple cores, you will also need to ship your own Solr schema as above. The only change needed is to the <code>CMD</code> of the Dockerfile - repeat the pattern of <code>precreate-core corename /solr-conf/ ;</code> for each core you require.</p> solr.dockerfile<pre><code>FROM uselagoon/solr:8-drupal\n\nCMD solr-recreate drupal /solr-conf &amp;&amp; solr-recreate more-drupal /solr-conf &amp;&amp; solr-foreground\n</code></pre>"},{"location":"applications/drupal/services/varnish/","title":"Varnish","text":"<p>We suggest using Drupal with a Varnish reverse proxy. Lagoon provides a <code>varnish-drupal</code> Docker image that has Varnish already configured with a Drupal Varnish config.</p> <p>This Varnish config does the following:</p> <ul> <li>It understands Drupal session cookies and automatically disables the Varnish caching for any authenticated request.</li> <li>It automatically caches any assets (images, css, js, etc.) for one month, and also sends this header to the browser, so browser cache the assets as well. This happens for authenticated and non-authenticated requests.</li> <li>It has support for <code>BAN</code> and <code>URIBAN</code> which is used by the Drupal 8 purge module.</li> <li>It removes <code>utm_</code> and <code>gclid</code> from the URL parameter to prevent Google Analytics links from creating multiple cache objects.</li> <li>Many other good things - just check out the drupal.vcl.</li> </ul>"},{"location":"applications/drupal/services/varnish/#usage-with-drupal-8","title":"Usage with Drupal 8","text":"<p>TL;DR: Check out the drupal8-advanced example in our examples repo, it ships with the needed modules and needed Drupal configuration.</p> <p>Note: many of these examples are on the same <code>drupal-example-simple</code> repo, but different branches/hashes. Be sure to get the exact branch from the examples list!</p>"},{"location":"applications/drupal/services/varnish/#install-purge-and-varnish-purge-modules","title":"Install Purge and Varnish Purge modules","text":"<p>In order to fully use Varnish with Drupal 8 cache tags, you need to install the Purge and Varnish Purge modules. They ship with many submodules. We suggest installing at least the following:</p> <ul> <li><code>purge</code></li> <li><code>purge_drush</code></li> <li><code>purge_tokens</code></li> <li><code>purge_ui</code></li> <li><code>purge_processor_cron</code></li> <li><code>purge_processor_lateruntime</code></li> <li><code>purge_queuer_coretags</code></li> <li><code>varnish_purger</code></li> <li><code>varnish_purge_tags</code></li> </ul> <p>Grab them all at once:</p> Install Purge and Varnish Purge<pre><code>composer require drupal/purge drupal/varnish_purge\n\ndrush en purge purge_drush purge_tokens purge_ui purge_processor_cron purge_processor_lateruntime purge_queuer_coretags varnish_purger varnish_purge_tags\n</code></pre>"},{"location":"applications/drupal/services/varnish/#configure-varnish-purge","title":"Configure Varnish Purge","text":"<ol> <li>Visit <code>Configuration &gt; Development &gt; Performance &gt; Purge</code>.</li> <li>Add a purger via <code>Add purger</code>.</li> <li>Select <code>Varnish Bundled Purger</code> (not the <code>Varnish Purger</code>, see the #Behind the Scenes section, for more information.).</li> <li>Click the dropdown beside the just added purger and click <code>Configure</code>.</li> <li>Give it a nice name, <code>Lagoon Varnish</code> sounds good.</li> <li> <p>Configure it with:</p> Configure Varnish Purge<pre><code> TYPE: Tag\n\n REQUEST:\n Hostname: varnish\n (or whatever your Varnish is called in docker-compose.yml)\n Port: 8080\n Path: /\n Request Method: BAN\n Scheme: http\n\n HEADERS:\n Header: Cache-Tags\n Value: [invalidations:separated_pipe]\n</code></pre> </li> <li> <p><code>Save configuration</code>.</p> </li> </ol> <p>That's it! If you'd like to test this locally, make sure you read the next section.</p>"},{"location":"applications/drupal/services/varnish/#configure-drupal-for-varnish","title":"Configure Drupal for Varnish","text":"<p>There are a few other configurations that can be done:</p> <ol> <li>Uninstall the <code>Internal Page Cache</code> Drupal module with <code>drush pmu page_cache</code>. It can cause some weird double caching situations where only the Varnish cache is cleared, but not the internal cache, and changes appear very slowly to the users. Also, it uses a lot of cache storage on big sites.</li> <li>Change <code>$config['system.performance']['cache']['page']['max_age']</code> in <code>production.settings.php</code> to <code>2628000</code>. This tells Varnish to cache sites for up 1 month, which sounds like a lot, but the Drupal 8 cache tag system is so awesome that it will basically make sure that the Varnish cache is purged whenever something changes.</li> </ol>"},{"location":"applications/drupal/services/varnish/#test-varnish-locally","title":"Test Varnish Locally","text":"<p>Drupal setups on Lagoon locally have Varnish and the Drupal caches disabled as it can be rather hard to develop with all them set. This is done via the following:</p> <ul> <li>The <code>VARNISH_BYPASS=true</code> environment variable in <code>docker-compose.yml</code> which tells Varnish to basically disable itself.</li> <li>Drupal is configured to not send any cache headers (via setting the Drupal config <code>$config['system.performance']['cache']['page']['max_age'] = 0</code> in <code>development.settings.php</code>).</li> </ul> <p>To test Varnish locally, change the following in <code>docker-compose.yml</code>:</p> <ul> <li>Set <code>VARNISH_BYPASS</code> to <code>false</code> in the Varnish service section.</li> <li>Set <code>LAGOON_ENVIRONMENT_TYPE</code> to <code>production</code> in the <code>x-environment</code> section.</li> <li>Run <code>docker compose up -d</code> , which restarts all services with the new environment variables.</li> </ul> <p>Now you should be able to test Varnish!</p> <p>Here is a short example assuming there is a node with the ID <code>1</code> and has the URL <code>drupal-example.docker.amazee.io/node/1</code></p> <ol> <li>Run <code>curl -I drupal-example.docker.amazee.io/node/1</code> and look for these headers:<ul> <li><code>X-LAGOON</code> should include <code>varnish</code> which tells you that the request actually went through Varnish.</li> <li><code>Age:</code> will be still <code>0</code> as Varnish has probably never seen this site before,  and the first request will warm the varnish cache.</li> <li><code>X-Varnish-Cache</code> will be <code>MISS</code> , also telling you that Varnish didn't find a previously cached version of this request.</li> </ul> </li> <li>Now run <code>curl -I drupal-example.docker.amazee.io/node/1</code> again, and the headers should be:<ul> <li><code>Age:</code> will show you how many seconds ago the request has been cached. In our example it will probably something between 1-30, depending on how fast you are executing the command.</li> <li><code>X-Varnish-Cache</code> will be <code>HIT</code>, telling you that Varnish successfully found a cached version of the request and returned that one to you.</li> </ul> </li> <li>Change some content at <code>node/1</code> in Drupal.</li> <li>Run <code>curl -I drupal-example.docker.amazee.io/node/1</code> , and the headers should the same as very first request:<ul> <li><code>Age:0</code></li> <li><code>X-Varnish-Cache: MISS</code></li> </ul> </li> </ol>"},{"location":"applications/drupal/services/varnish/#varnish-on-drupal-behind-the-scenes","title":"Varnish on Drupal behind the scenes","text":"<p>If you come from other Drupal hosts or have done a Drupal 8 &amp; Varnish tutorial before, you might have realized that there are a couple of changes in the Lagoon Drupal Varnish tutorial. Let's address them:</p>"},{"location":"applications/drupal/services/varnish/#usage-of-varnish-bundled-purger-instead-of-varnish-purger","title":"Usage of <code>Varnish Bundled Purger</code> instead of <code>Varnish Purger</code>","text":"<p>The <code>Varnish Purger</code> purger sends a <code>BAN</code> request for each cache-tag that should be invalidated. Drupal has a lot of cache-tags, and this could lead to quite a large amount of requests sent to Varnish. <code>Varnish Bundled Purger</code> instead sends just one <code>BAN</code> request for multiple invalidations, separated nicely by pipe (<code>|</code>), which fits perfectly with the Varnish regular expression system of bans. This causes less requests and a smaller ban list table inside Varnish.</p>"},{"location":"applications/drupal/services/varnish/#usage-of-purge-late-runtime-processor","title":"Usage of <code>Purge Late runtime processor</code>","text":"<p>Contradictory to the Varnish module in Drupal 7, the Drupal 8 Purge module has a slightly different approach to purging caches: It adds them to a queue which is then processed by different processors. Purge suggests using the <code>Cron processor</code> , which means that the Varnish cache is only purged during a cron run. This can lead to old data being cached by Varnish, as your cron is probably not configured to run every minute or so, and can result in confused editors and clients.</p> <p>Instead, we suggest using the <code>Purge Late runtime processor</code>, which processes the queue at the end of each Drupal request. This has the advantage that if a cache-tag is added to the purge queue (because an editor edited a Drupal node, for example) the cache-tags for this node are directly purged. Together with the <code>Varnish Bundled Purger</code>, this means just a single additional request to Varnish at the very end of a Drupal request, which causes no noticeable processing time on the request.</p>"},{"location":"applications/drupal/services/varnish/#full-support-for-varnish-ban-lurker","title":"Full support for Varnish Ban Lurker","text":"<p>Our Varnish configurations have full support for <code>Ban Lurker</code>. Ban Lurker helps you to maintain a clean cache and keep Varnish running smoothly. It is basically a small tool that runs through the Varnish ban list and compares them to the cached requests in the Varnish cache. Varnish bans are used to mark an object in the cache for purging. If Ban Lurker finds an item that should be \"banned,\" it removes them from the cache and also removes the ban itself. Now any seldom-accessed objects with very long TTLs which would normally never be banned and just keep taking up cache space are removed and can be refreshed. This keeps the list of bans small and with that, less processing time for Varnish on each request. Check out the official Varnish post on Ban Lurker and some other helpful reading for more information.</p>"},{"location":"applications/drupal/services/varnish/#troubleshooting","title":"Troubleshooting","text":"<p>Varnish doesn't cache? Or something else not working? Here a couple of ways to debug:</p> <ul> <li>Run <code>drush p-debug-en</code> to enable debug logging of the purge module. This should show you debugging in the Drupal log under <code>admin/reports/dblog</code>.</li> <li>Make sure that Drupal sends proper cache headers. To best test this, use the URL that Lagoon generates for bypassing the Varnish cache, (locally in our Drupal example this is http://nginx-drupal-example.docker.amazee.io). Check for the <code>Cache-Control: max-age=900, public</code> header, where the <code>900</code> is what you configured in <code>$config['system.performance']['cache']['page']['max_age']</code>.</li> <li>Make sure that the environment variable <code>VARNISH_BYPASS</code> is not set to <code>true</code> (see <code>docker-compose.yml</code> and run <code>docker compose up -d varnish</code> to make sure the environment variable is configured correctly).</li> <li>If all fails, and before you flip your table (\u256f\u00b0\u25a1\u00b0\uff09\u256f\ufe35 \u253b\u2501\u253b, talk to the Lagoon team, we're happy to help.</li> </ul>"},{"location":"community/discord/","title":"Lagoon Community on Discord","text":"<p>Our official community meeting space is the Lagoon Discord.</p> <p>We\u2019re starting this community as a place for all Lagoon users to collaborate, solve problems, share ideas, and contribute back to the Lagoon project. We\u2019re working to consolidate our community as it\u2019s currently spread out over Slack and various other places. We also wanted to invite all of our users and customers to join so that everyone can benefit from the community, no matter how they\u2019re using Lagoon.</p> <p>Please remember that this is not to replace your current support channels - those will remain the same. This is a place to connect with other users as well as the Lagoon maintainers.</p> <p>We ask that all community members review our Participation and Moderation Guidelines, as well as the Code of Conduct.</p>"},{"location":"community/discord/#community-hours","title":"Community Hours","text":"<p>Our Community hours are currently on hold as we survey the community to better determine the community's needs. Please fill our the survey here.</p> <p>If you need a hand with Lagoon, please reach out on Discord or shoot us an email at uselagoon@amazee.io.</p>"},{"location":"community/moderation/","title":"Lagoon Moderation Guidelines","text":"<p>These guidelines have been adapted from Drupal Diversity &amp; Inclusion\u2019s Moderation Guidelines.</p> <p>In Lagoon spaces, strive to promote understanding, empathy, and increase personal awareness of all people. This includes people from across the Drupal Community and the greater Technical Community, even those you may personally disagree with.</p> <p>If kicked from the Discord, the kicked user can send a private message (PM) to the kicker or another Moderator, if desired, for re-admittance. If a disruptive person is engaging in what appears to be intentionally inflammatory, bullying, or harassing behavior provoking hostile responses (or acting in a hostile manner), kicking is faster and easier than trying to placate a disruptive person whose behavior is causing distress to other channel members.</p> <p>The kick is not a ban. There are times when disruptive or triggering comments and statements are genuine and break the lines of communication between two parties. By speaking with a Moderator, the (potentially) disruptive person can be coached on using more sensitive, inclusive, and diverse-aware language, and on engaging in a more constructive manner.</p>"},{"location":"community/moderation/#tiered-responses","title":"Tiered Responses","text":"<ol> <li> <p>Tier One Response</p> <p>User is welcomed in the channel, asked to read some scroll back, and given a link to participation guidelines.</p> </li> <li> <p>Tier Two Response</p> <p>User is gently reminded in channel to keep posts on topic, and/or of participation guidelines.</p> </li> <li> <p>Tier Three Response</p> <p>User is PM\u2019d by available Moderator to explain the problem(s) with their posts and given suggestions of what to do differently.</p> </li> <li> <p>Tier Four Response</p> <p>If behavior continues, User is kicked for no less than 24 hours from the Discord.</p> </li> </ol>"},{"location":"community/moderation/#non-tiered-response-banning","title":"Non-Tiered Response Banning","text":"<p>Intentionally disruptive individuals get kicked, not tiered. Repeated offenses will result in a ban.</p>"},{"location":"community/participation/","title":"Lagoon Participation Guidelines","text":"<p>We ask that all members of our community, in any spaces, virtual or physical, adhere to our Code of Conduct.</p> <p>These guidelines have been adapted from Drupal Diversity &amp; Inclusion\u2019s Participation Guidelines.</p> <ol> <li>Listen actively, read carefully, and be understanding.<ul> <li>If joining a conversation, read the backlog. Give other Participants the opportunity to communicate effectively.</li> <li>Assume good intent behind other Participants\u2019 statements. The open-source software community is very diverse, with Participants from all over the globe. Be aware of cultural and linguistic quirks.</li> <li>There are also many Participants who are new to this space. Assume that they have good intent but have not yet mastered the language or ideas. We want to help them!</li> </ul> </li> <li>Speak from your own experience, instead of generalizing. Recognize the worth of others\u2019 experience. Try not to speak for others.<ul> <li>Use \u201cI\u201d instead of \u201cthey,\u201d \u201cwe,\u201d and \u201cyou\u201d.</li> <li>All Participants should recognize that other Participants have their own unique experiences.</li> <li>Don\u2019t invalidate another Participant\u2019s story with your own spin on their experience. Instead, share your own story and experience.</li> </ul> </li> <li>Challenge ideas, feelings, concerns, or one another by asking questions. Refrain from personal attacks. Focus on ideas first.<ul> <li>Avoid verbal challenges, backhanded insults, gender/race/region stereotyping, etc.</li> </ul> </li> <li>Take part to the fullest of your ability and availability.<ul> <li>Community growth depends on the inclusion of individual voices. The channel wants you to speak up and speak out. Everyone has a different amount of time to contribute. We value participation here if you can give 5 minutes or 5 hours.</li> <li>We do welcome those who quietly come to lurk and learn, or \u201clurk,\u201d but please introduce yourself and say hello!</li> </ul> </li> <li>Accept that it is not always the goal to agree.<ul> <li>There are often many different \u201cright\u201d answers to technical issues, even though they may not work for your setup.</li> </ul> </li> <li>Be conscious of language differences and unintended connotations.<ul> <li>\u201cText is hard\u201d - be aware that it is difficult to communicate effectively via text.</li> </ul> </li> <li>Acknowledge individuals\u2019 identities.<ul> <li>Use stated names and pronouns. Do not challenge a person\u2019s race, sexuality, disability, etc.</li> <li>f you are unsure how to address someone, ask them discreetly and respectfully. For example, if you are unsure what pronouns to use, send a private message and ask. Using the correct pronouns will help others.</li> </ul> </li> <li>Some off-topic conversation is okay.<ul> <li>Some cross posting of announcements is okay. The following is not permitted:<ul> <li>Thread hijacking</li> <li>Spamming</li> <li>Commercial advertising</li> <li>Overt self-promotion</li> <li>Excessive going off-topic, especially during official meeting times or focused conversations</li> </ul> </li> <li>Consider announcing more appropriate places or times for in-depth off-topic conversations.</li> <li>If you are not sure what\u2019s appropriate, please contact an admin.</li> </ul> </li> <li>Sharing content from inside Lagoon spaces must only be done with explicit consent. Any sharing must also be carefully considered, and without harassment or intent to harm any Participants.<ul> <li>This forum should be considered public. Assume that anyone can and may read anything posted here.</li> <li>When sharing any Lagoon content, permission from all Participants must be obtained first. This applies whether content is quoted, summarized, or screenshotted. This includes sharing in any public medium: on Twitter, in a blog post, in an article, on a podcast, etc. These spaces are where the discussion and work in progress is taking place. Removing snippets of a conversation takes away context. This can distort and discourage discussion, especially when this is done without the goal of driving the Lagoon project forward.</li> <li>As stated above, if you take screenshots and post them to social media or other forums, you must get permission from the person that posted it. When getting permission, include the option of removing identifying information. Permission is still needed even if identifying information is removed. This includes any content from Discord, Github, or any other Lagoon medium.</li> <li>If you want to share something, just ask! \u201cHey, is it ok to share this on Twitter? I\u2019m happy to credit you!\u201d</li> <li>If it is necessary for a participant to take a screenshot to report harassing behavior to Lagoon moderators, this may be done without obtaining permission. It is not, however, acceptable to take screenshots to publicly or privately shame an individual. Again, this applies only to reporting harassing behavior.</li> </ul> </li> <li>Address complaints between one another in the space when safe and appropriate.<ul> <li>When safe, try to clarify and engage in the space where the conflict happened. For example, in the Discord channel.</li> <li>Ping admins or Community Manager (Alanna) when conflict is escalating.</li> <li>Ask for help.</li> <li>If the topic of conflict is off-topic for Lagoon, move the conversation to a more appropriate channel.</li> </ul> </li> </ol> <p>Additional considerations for in-person Lagoon spaces</p> <ol> <li>Follow the event\u2019s Code of Conduct, if there is one. If not, our Code of Conduct applies.</li> <li>Do not touch people, their mobility devices, or other assistive equipment without their consent. If someone asks you to stop a certain behavior, stop immediately.</li> <li>Report any issues to the event\u2019s staff. If an issue involves Lagoon team members, report to uselagoon@amazee.io.</li> </ol> <p>The Lagoon team reserves the right to terminate anyone\u2019s access to the Lagoon spaces.</p>"},{"location":"concepts-advanced/","title":"Advanced Lagoon Concepts","text":"<p>This section covers some of the more advanced concepts in Lagoon. If you're new to Lagoon, start with Basic Lagoon Concepts.</p> <p>If you need help, contact your Lagoon administrator or reach out to the community and maintainers in our Discord.</p>"},{"location":"concepts-advanced/backups/","title":"Backups","text":"<p>Lagoon provides multiple methods for backing up environment data. Automated backups are done without user interaction and manual backups are done on-demand, as requested by users.</p>"},{"location":"concepts-advanced/backups/#automated-backups","title":"Automated Backups","text":"<p>By default, Lagoon will run nightly backups for each database and persistent volume. Daily backups are kept for seven days, and weekly backups are kept for six weeks.</p> <p>Lagoon keeps an up to date list of available backups. To view them, check the <code>Backups</code> tab of an environment in the Lagoon UI or use the Lagoon CLI (<code>lagoon list backups --help</code>).</p> <p>Lagoon administrators</p> <p>Automated backups are reliant on the installation of K8up. Default settings can be configured per Lagoon remote.</p>"},{"location":"concepts-advanced/backups/#downloading","title":"Downloading","text":"<p>In order to download the contents of a backup, it must first be retrieved. Click the <code>Retrieve</code> button in the UI or run <code>lagoon retrieve --help</code>. After some time (how long depends on how large the backup is), it will be available to download. Click the <code>Download</code> button in the UI or run <code>lagoon get backup --help</code>.</p>"},{"location":"concepts-advanced/backups/#configuring","title":"Configuring","text":"<p>Automated backups can be disabled by setting the <code>LAGOON_BACKUPS_DISABLED=true</code> environment variable.</p> <p>The storage bucket name can be changed by setting the <code>LAGOON_BAAS_BUCKET_NAME</code> environment variable. Do not change this unless asked by your Lagoon administrator.</p>"},{"location":"concepts-advanced/backups/#backup-schedules","title":"Backup Schedules","text":"<p>Schedules use a cron-compatible syntax with the default being to run nightly backups (<code>M H(22-2) * * *</code>). The <code>M</code> is special to Lagoon to allow for load balancing, and must be set, any other value will cause build failures.</p> <p>Timezones:</p> <p>Backup schedules use the cluster's local timezone.</p> <p>Each environment type can be configured to have it's own schedule:</p> <p>Production</p> <ul> <li>The schedule can be set in code by changing the <code>backup-schedule</code> in the   .lagoon.yml file.</li> <li>The schedule can be set using environment variables: Name Value <code>LAGOON_FEATURE_FLAG_CUSTOM_BACKUP_CONFIG</code> <code>enabled</code> <code>LAGOON_BACKUP_PROD_SCHEDULE</code> Cron schedule </li> </ul> <p>Development</p> <p>The schedule can be set using environment variables:</p> Name Value <code>LAGOON_FEATURE_FLAG_CUSTOM_BACKUP_CONFIG</code> <code>enabled</code> <code>LAGOON_BACKUP_DEV_SCHEDULE</code> Cron schedule <p>Pull Request</p> <p>The schedule can be set using environment variables:</p> Name Value <code>LAGOON_FEATURE_FLAG_CUSTOM_BACKUP_CONFIG</code> <code>enabled</code> <code>LAGOON_BACKUP_PR_SCHEDULE</code> Cron schedule"},{"location":"concepts-advanced/backups/#backup-retention","title":"Backup Retention","text":"<p>Backups will be held according to the following retention policy by default:</p> <ul> <li>Daily: 7</li> <li>Weekly: 6</li> </ul> <p>Production environments can set a different retention policy by changing <code>backup-retention</code> in the .lagoon.yml file.</p> <p>Warning</p> <p>Retention policies are evaluated by Restic, a 3rd party open source software. Make sure you are familiar with the policy options as they can be unintuitive.</p> <p>Other environment types cannot set a different retention policy.</p>"},{"location":"concepts-advanced/backups/#storage-location","title":"Storage Location","text":"<p>Lagoon supports custom backup locations and credentials for any project when all four of the following variables are set as <code>BUILD</code> type variables. The environment variables need to be set at the project level (not per environment), and requires a Lagoon deployment after setting them (for every environment).</p> <p>Danger</p> <p>Using custom settings will override cluster default. Any misconfiguration or invalid/expired credentials may cause automated backups to fail or be inaccessible.</p> Environment variable name Purpose <code>LAGOON_BAAS_CUSTOM_BACKUP_ENDPOINT</code> Specify the S3 compatible endpoint where any Lagoon initiated backups should be stored. An example for S3 Sydney would be: <code>https://s3.ap-southeast-2.amazonaws.com</code>. <code>LAGOON_BAAS_CUSTOM_BACKUP_BUCKET</code> Specify the bucket name where any Lagoon initiated backups should be stored.An example custom setting would be: <code>example-restore-bucket</code>. <code>LAGOON_BAAS_CUSTOM_BACKUP_ACCESS_KEY</code> Specify the access key Lagoon should use to access the custom backup bucket. An example custom setting would be: <code>AKIAIOSFODNN7EXAMPLE</code>. <code>LAGOON_BAAS_CUSTOM_BACKUP_SECRET_KEY</code> Specify the secret key Lagoon should use to access the custom backup bucket. An example custom setting would be: <code>wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY</code>. <p>No public access is needed on the S3 bucket and can be made entirely private.</p> <p>Lagoon will automatically prune the files in these S3 buckets, so no object retention policy is needed at the bucket level.</p>"},{"location":"concepts-advanced/backups/#retrieval-location","title":"Retrieval Location","text":"<p>Lagoon supports custom retrieval locations and credentials for any project when all four of the following variables are set as <code>BUILD</code> type environment variables. The environment variables need to be set at the project level (not per environment), and requires a Lagoon deployment after setting them (for every environment).</p> <p>Danger</p> <p>Using custom settings will override cluster default. Any misconfiguration or invalid/expired credentials may cause retrieval of backups to fail or be inaccessible.</p> Environment variable name Purpose <code>LAGOON_BAAS_CUSTOM_RESTORE_ENDPOINT</code> Specify the S3 compatible endpoint where any Lagoon initiated restores should be stored. An example for S3 Sydney would be: <code>https://s3.ap-southeast-2.amazonaws.com</code>. <code>LAGOON_BAAS_CUSTOM_RESTORE_BUCKET</code> Specify the bucket name where any Lagoon initiated restores should be stored.An example custom setting would be: <code>example-restore-bucket</code>. <code>LAGOON_BAAS_CUSTOM_RESTORE_ACCESS_KEY</code> Specify the access key Lagoon should use to access the custom restore bucket. An example custom setting would be: <code>AKIAIOSFODNN7EXAMPLE</code>. <code>LAGOON_BAAS_CUSTOM_RESTORE_SECRET_KEY</code> Specify the secret key Lagoon should use to access the custom restore bucket. An example custom setting would be: <code>wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY</code>. <p>The S3 bucket must have public access enabled, as Lagoon will create presigned URLs for the objects inside the bucket as needed.</p> <p>An example AWS IAM policy that you can create to allow access to just the S3 bucket <code>example-restore-bucket</code> is:</p> aws_iam_restore_policy.json<pre><code>{\n\"Version\": \"2012-10-17\",\n\"Statement\": [\n{\n\"Effect\": \"Allow\",\n\"Action\": [\n\"s3:GetBucketLocation\",\n\"s3:ListBucket\"\n],\n\"Resource\": [\n\"arn:aws:s3:::example-restore-bucket\"\n]\n},\n{\n\"Effect\": \"Allow\",\n\"Action\": [\n\"s3:PutObject\",\n\"s3:GetObject\",\n\"s3:GetObjectVersion\",\n\"s3:GetBucketLocation\",\n\"s3:PutObjectAcl\"\n],\n\"Resource\": [\n\"arn:aws:s3:::example-restore-bucket/*\"\n]\n}\n]\n}\n</code></pre> <p>For increased security and reduced storage costs you can opt into removing restored backups after a set lifetime (e.g. 7 days). Lagoon caters for this scenario gracefully and will re-create any restored snapshots as needed.</p>"},{"location":"concepts-advanced/backups/#manual-backups","title":"Manual Backups","text":"<p>Users can manually backup databases and files by running a task, syncing data from one environment to another, or by running custom commands in containers.</p>"},{"location":"concepts-advanced/backups/#tasks","title":"Tasks","text":"<p>For Drupal projects, there are tasks available that will run drush backups. For non-Drupal projects, a custom task can be created to take a backup.</p>"},{"location":"concepts-advanced/backups/#sync","title":"Sync","text":"<p>For Drupal projects, the use of <code>drush</code> to sync the database and files is recommneded. For non-Drupal projects, lagoon-sync can be added to the project and used to sync the database and files.</p>"},{"location":"concepts-advanced/backups/#manual","title":"Manual","text":"<p>The Lagoon cli base images contain all the tools needed to backup databases and transfer files. A user familiar with <code>mysqldump</code> and <code>rsync</code> can make manual backups.</p>"},{"location":"concepts-advanced/backups/#restoring-backups","title":"Restoring Backups","text":"<p>Lagoon cannot automatically restore backups. After downloading the backups, users can restore them manually by copying them to the desired environment.</p>"},{"location":"concepts-advanced/base-images/","title":"Base Images","text":""},{"location":"concepts-advanced/base-images/#what-is-a-base-image","title":"What is a base image?","text":"<p>A base image is a Docker image that can be and is used by a project deployed on Lagoon. A base image provides a way to ensure that nothing is brought into the codebase/project from upstream that has not been audited. It also allows us to ensure that anything we might need on the deployed environment is available - from lower-level libraries to application-level themes and modules.</p> <p>Base images save time and resources when you know what system is being deployed to - if shared packages are included in the base image, they don\u2019t have to be deployed to hundreds of sites individually.</p>"},{"location":"concepts-advanced/base-images/#derived-images","title":"Derived images","text":"<p>A derived image is one that extends a base image. For example, you might need to make several blog sites. You take our Drupal image, customize it to include all of the modules and themes you need for your blog sites, and deploy them all with that blog image. Templates are derived from base images.</p> <p>All derived images should pull in the <code>composer.json</code> file (via repositories like Packagist, Satis, or GitHub) so that they are using the most recent versions of the base packages.</p> <p>Further, the derived image includes a call to the script <code>/build/pre_composer</code>, which can be used by the base image to run scripts, updates, etc., downstream in the derived images. For instance, it should run by default when any package is updated or installed at the derived image, and the <code>pre_composer</code> script will then update the base image package.</p>"},{"location":"concepts-advanced/base-images/#anatomy-of-a-base-image","title":"Anatomy of a base image","text":"<p>Info</p> <p>This document will talk about Drupal and Laravel base images as examples, as it was originally written for a client who uses those technologies in their Lagoon projects. It will be expanded to cover the contents of other base images, but none of the processes differ, no matter what the content of your base image.</p> <p>Base images are managed with Composer and hosted in BitBucket, GitHub, or GitLab (whatever your team is using). Each base image has its own repository.</p>"},{"location":"concepts-advanced/base-images/#metapackages","title":"Metapackages","text":"<p>The metapackage is a Composer package that wraps several other components. These include, for example, the core files for Laravel or Drupal, along with any needed modules or themes. This way, you do not need to include Laravel or Drupal, etc., as a dependency in your project.</p> <p>Here\u2019s an example from the <code>composer.json</code> in a Laravel base image:</p> composer.json<pre><code>\"require\": {\n    \"amazeelabs/algm_laravel_baseimage\": \"*\"\n},\n</code></pre> <p>We only require this metapackage, which points to a GitHub repository.</p>"},{"location":"concepts-advanced/base-images/#docker-composeyml","title":"<code>docker-compose.yml</code>","text":"<p>Other pieces of your project are defined in <code>docker-compose.yml</code>. For example, if you have a Drupal project, you need the Drupal image, but you also need MariaDB, Solr, Redis, and Varnish. We have versions of these services optimized for Drupal, all of which are included in <code>docker-compose.yml</code>.</p>"},{"location":"concepts-advanced/base-images/#drupal","title":"Drupal","text":"<p>The Drupal base image contains the following contributed tools and modules, in addition to Drupal core:</p> <ul> <li>Drupal Console</li> <li>Drush</li> <li>Configuration Installer</li> <li>Redis</li> <li>Poll</li> <li>Search API</li> <li>Search API Solr</li> <li>Varnish Purge</li> <li>Purge</li> <li>Admin Toolbar</li> <li>CDN</li> <li>Password Policy</li> <li>Pathauto</li> <li>Ultimate Cron</li> </ul>"},{"location":"concepts-advanced/base-images/#laravel","title":"Laravel","text":""},{"location":"concepts-advanced/base-images/#configuration","title":"Configuration","text":"<p>The base images have provided the default values for the environment variables used by Laravel.</p> <p>These are values for:</p> <ul> <li><code>DB_CONNECTION</code></li> <li><code>DB_HOST</code></li> <li><code>DB_PORT</code></li> <li><code>DB_DATABASE</code></li> <li><code>DB_USERNAME</code></li> <li><code>DB_PASSWORD</code></li> <li><code>REDIS_HOST</code></li> <li><code>REDIS_PASSWORD</code></li> <li><code>REDIS_PORT</code></li> </ul> <p>Ensure that your config files (typically located in <code>/config</code>) make use of these by default.</p>"},{"location":"concepts-advanced/base-images/#queues","title":"Queues","text":"<p>If your project makes use of queues, you can make use of the <code>artisan-worker</code> service. It is a worker container, used for executing <code>artisan queue:work</code>. This is disabled by default - look at the comments in <code>docker-compose.yml</code>.</p>"},{"location":"concepts-advanced/base-images/#understanding-the-process-of-building-a-base-image","title":"Understanding the process of building a base image","text":"<p>There are several parts to the process of building a base image. All of the major steps are represented in the Makefile. The Jenkinsfile contains a more stripped-down view. Taking a look at both files will give you a good understanding of what happens during this process. Most steps can be tested locally (this is important when building new versions of the base image). After you\u2019ve created and tested everything locally and pushed it up, the actual base image is built by Jenkins and pushed to Harbor.</p>"},{"location":"concepts-advanced/base-images/#makefile-and-build-assumptions","title":"Makefile and build assumptions","text":"<p>If you're planning on running locally, there are some minimum environment variables that need to be present to build at all.</p>"},{"location":"concepts-advanced/base-images/#base-image-build-variables","title":"Base image build variables","text":"<p>Variables injected into the base image build process and where to find them.</p> <ul> <li><code>BUILD_NUMBER</code> - This is injected by Jenkins automatically.</li> <li><code>GIT_BRANCH</code> - This is provided by the Jenkins build process itself. Depends on the branch being built at the time (develop, main, etc.).</li> <li><code>DOCKER_REPO</code>/<code>DOCKER_HUB</code> - This is defined inside the Jenkinsfile itself. It points to the Docker project and hub into which the resulting images will be pushed.</li> <li><code>DOCKER_USERNAME</code>/<code>DOCKER_PASSWORD</code> - These are used to actually log into the Docker repository early in the build. These variables are stored inside of the Jenkins credentials. These are used in the Jenkinsfile itself and are not part of the Makefile. This means that if you\u2019re building base images outside of Jenkins (i.e. locally, to test, etc.) you have to run a <code>docker login</code> manually before running any of the make steps.</li> </ul> <p>In practice, this means that if you're running any of the <code>make</code> targets on your local machine, you'll want to ensure that these are available in the environment - even if this is just setting them when running make from the command line, as an example:</p> Setting make targets locally<pre><code>GIT_BRANCH=example_branch_name DOCKER_HUB=the_docker_hub_the_images_are_pushed_to DOCKER_REPO=your_docker_repo_here BUILD_NUMBER=&lt;some_integer&gt; make images_remove\n</code></pre>"},{"location":"concepts-advanced/base-images/#makefile-targets","title":"Makefile targets","text":"<p>The most important targets are the following:</p> <ul> <li><code>images_build</code> : Given the environment variables, this will build and tag the images for publication.</li> <li><code>images_publish</code> : Pushes built images to a Docker repository.</li> <li><code>images_start</code> : Will start the images for testing, etc.</li> <li><code>images_test</code>: Runs basic tests against images.</li> <li><code>images_remove</code>: Removes previously built images, given the build environment variables.</li> </ul>"},{"location":"concepts-advanced/base-images/#example-workflow-for-building-a-new-release-of-a-base-image","title":"Example workflow for building a new release of a base image","text":"<p>There are several steps to the build process. Most of these are shared among the various base images. These mostly correspond to the Makefile target described above.</p> <ol> <li>Docker Login - The Docker username, password, and URL for Harbor are passed to the Docker client.</li> <li>Docker Build - The <code>make images_build</code> step is run now, which will:<ol> <li>Ensure that all environment variables are prepared for the build.</li> <li>Run a <code>docker compose build</code>. This will produce several new Docker images from the current Git branch.</li> </ol> </li> <li>Images Test - This will run the <code>make images_test</code> target, which will differ depending on the images being tested. In most cases this is a very straightforward test to ensure that the images can be started and interacted with in some way (installing Drupal, listing files, etc.)</li> <li>Docker Push - This step runs the logic (contained in the make target <code>images_publish</code>) that will tag the images resulting from the Docker Build in Step 2 and push them to Harbor. This is described in more detail elsewhere in this guide.</li> <li>Docker Clean Images - Runs the make target <code>images_remove</code>, which simply deletes the newly built images from the Docker host now that they are in Harbor.</li> </ol>"},{"location":"concepts-advanced/base-images/#releasing-a-new-version-of-a-base-image","title":"Releasing a new version of a base image","text":"<p>There are many reasons to release a new version of a base image. On Drupal or Laravel, Node.js, etc. images, it may be in order to upgrade or install a module/package for features or security. It may be about the underlying software that comes bundled in the container, such as updating the version of PHP or Node.js. It may be about updating the actual underlying images on which the base images are built.</p> <p>The images that your project's base images are built on are the managed images maintained by the Lagoon team. We release updates to these underlying images on a monthly (or more fequent) basus. When these are updated, you need to build new versions of your own base images in order to incorporate the changes and upgrades bundled in the upstream images.</p> <p>In this section we will demonstrate the process of updating and tagging a new release of the Drupal 8 base image. We will add a new module (ClamAV) to the base. We\u2019re demonstrating on Drupal because it has the most complex setup of the base images. The steps that are common to every base image are noted below.</p>"},{"location":"concepts-advanced/base-images/#step-1-pull-down-the-base-image-locally","title":"Step 1 - Pull down the base image locally","text":"<p>This is just pulling down the Git repository locally. In the case of the Drupal 8 base image. In this example, we're using Bitbucket, so we will run:</p> Clone Git repo.<pre><code>git clone ssh://git@bitbucket.biscrum.com:7999/webpro/drupal8_base_image.git\n</code></pre> <p></p>"},{"location":"concepts-advanced/base-images/#step-2-make-the-changes-to-the-repository","title":"Step 2 - Make the changes to the repository","text":"<p>Info</p> <p>What is demonstrated here is specific to the Drupal 8 base image. However, any changes (adding files, changing base Docker images, etc.) will be done in this step for all of the base images.</p> <p>In our example, we are adding the ClamAV module to the Drupal 8 base image. This involves a few steps. The first is requiring the package so that it gets added to our <code>composer.json</code> file. This is done by running a <code>composer require</code>.</p> <p>Here we run:</p> Install package with Composer require.<pre><code>composer require drupal/clamav\n</code></pre> <p></p> <p>When the Composer require process completes, the package should then appear in the <code>composer.json</code> file.</p> <p>Here we open the <code>composer.json</code> file and take a look at the list of required packages, and check that the ClamAV package is listed, and see that it is there:</p> <p></p>"},{"location":"concepts-advanced/base-images/#step-22-ensure-that-the-required-drupal-module-is-enabled-in-template-based-derived-images","title":"Step 2.2 - Ensure that the required Drupal module is enabled in template-based derived images","text":"<p>For any modules now added to the base image, we need to ensure that they\u2019re enabled on the template-based derived images. This is done by adding the module to the Lagoon Bundle module located at <code>./web/modules/lagoon/lagoon_bundle</code>. Specifically, it requires you to add it as a dependency to the <code>dependencies</code> section of the <code>lagoon_bundle.info.yml</code> file. The Lagoon Bundle module is a utility module that exists only to help enforce dependencies across derived images.</p> <p>Here we open <code>web/modules/contrib/lagoon/lagoon_bundle/lagoon_bundle.info.yml</code> and add <code>clamav:clamav</code> as a dependency:</p> <p></p> <p>Adding a dependency to this will ensure that whenever the Lagoon Bundle module is enabled on the derived image, its dependencies (in this case, the just-added ClamAV module) will also be enabled. This is enforced by a post-rollout script which enables <code>lagoon_bundle</code> on the derived images when they are rolled out.</p>"},{"location":"concepts-advanced/base-images/#step-23-test","title":"Step 2.3 - Test","text":"<p>This will depend on what you\u2019re testing. In the case of adding the ClamAV module, we want to ensure that in the base image, the module is downloaded, and that the Lagoon Bundle module enables ClamAV when it is enabled.</p> <p>Here we check that the module is downloaded to <code>/app/web/modules/contrib</code>:</p> <p></p> <p>And then we check that when we enable the <code>lagoon_bundle</code> module, it enables <code>clamav</code> by running:</p> Enable module with Drush.<pre><code>drush pm-enable lagoon_bundle -y\n</code></pre> <p></p> <p>Warning</p> <p>You\u2019ll see that there is a JWT error in the container above. You can safely ignore this in the demonstration above - but, for background, you will see this error when there is no Lagoon environment for the site you\u2019re working on.</p> <p>With our testing done, we can now tag and build the images.</p>"},{"location":"concepts-advanced/base-images/#step-3-tagging-images","title":"Step 3 - Tagging images","text":"<p>Images are versioned based on their Git tags - these should follow standard semantic versioning (semver) practices. All tags should have the structure vX.Y.Z where X, Y, and Z are integers (to be precise the X.Y.Z are themselves the semantic version - the vX.Y.Z is a tag). This is an assumption that is used to determine the image tags, so it must be adhered to.</p> <p>In this example we will be tagging a new version of the Drupal 8 base image indicating that we have added ClamAV.</p>"},{"location":"concepts-advanced/base-images/#here-we-demonstrate-how-to-tag-an-image","title":"Here we demonstrate how to tag an image","text":"<p>We check that we have committed (but not pushed) our changes, just as you would do for any regular commit and push, using <code>git log</code>.</p> <ol> <li>Commit your changes if you haven\u2019t yet.</li> <li>We then check to see what tag we are on using <code>git tag</code>.</li> <li>Then, tag them using <code>git tag -a v0.0.9 -m \u201cAdds clamAV to base.\u201d</code><ol> <li>git  -a, --annotate:  Make an unsigned, annotated tag object</li> </ol> </li> <li>Next, we push our tags with <code>git push --tags</code>.</li> <li>And finally, push all of our changes with <code>git push</code>.</li> </ol> <p>Danger</p> <p>The tags must be pushed explicitly in their own step!</p> <p></p>"},{"location":"concepts-advanced/base-images/#how-git-tags-map-to-image-tags","title":"How Git tags map to image tags","text":"<p>Danger</p> <p>Depending on the build workflow, you will almost certainly push the changes via the develop branch before merging it into the main branch.</p> <p>An important point to remember here is that the Jenkins base image build process will tag images based on the most recent commit\u2019s tag.</p> <p>Images are tagged using the following rules, and images will be built for each of these that apply:</p> <ol> <li>When the main branch is built, it is tagged as <code>latest</code>.</li> <li>When the develop branch is built, it is tagged as <code>development</code>.</li> <li>If the commit being built is tagged then that branch will be built with that commit\u2019s tag.<ol> <li>This is how we release a new version as we demonstrated above. It can also be used to make ad hoc builds with fairly arbitrary tags - be reasonable with the tag names, it has only been tested with semver tags.</li> </ol> </li> </ol>"},{"location":"concepts-advanced/base-images/#step-4-building-the-new-base-images","title":"Step 4 - Building the new base images","text":"<p>Info</p> <p>Generally you will have a trigger strategy set up here for automatic builds, but as that will differ based on your needs and setup, this explains how to build manually.</p> <ol> <li>Visit your Lagoon Jenkins instance.</li> <li>Select the project you are working on (in this case, AIOBI Drupal 8 Base).</li> <li>Click the branch you would like to build.</li> <li>Click \u201cBuild Now.\u201d</li> </ol> <p></p> <p>This will kick off the build process which, if successful, will push up the new images to Harbor.</p> <p>If the build is not successful, you can click into the build itself and read the logs to understand where it failed.</p> <p>As shown in the screenshot below from Harbor, the image we\u2019ve just built in Jenkins has been uploaded and tagged in Harbor, where it will now be scanned for any vulnerabilities. Since it was tagged as v0.0.9, an image with that tag is present, and because we built the main branch, the \u201clatest\u201d image has also been built. At this stage, the v0.0.9 and \u201clatest\u201d images are identical.</p> <p></p>"},{"location":"concepts-advanced/base-images/#acknowledgement","title":"Acknowledgement","text":"<p>The base image structure draws heavily (and, in fact, is a fork of) Denpal. It is based on the original Drupal Composer Template, but includes everything necessary to run on Lagoon (either the local development environment or on hosted Lagoon).</p>"},{"location":"concepts-advanced/environment-idling/","title":"Environment Idling (optional)","text":""},{"location":"concepts-advanced/environment-idling/#what-is-the-environment-idler","title":"What is the Environment Idler?","text":"<p>Lagoon can utilize the Aergia controller, (installed in the <code>lagoon-remote</code>) to automatically idle environments if they have been unused for a defined period of time. This is done in order to reduce the load on the Kubernetes clusters and improve the overall performance of production environments and development environments that are actually in use.</p>"},{"location":"concepts-advanced/environment-idling/#how-does-an-environment-get-idled","title":"How does an environment get idled?","text":"<p>The environment idler has many different configuration capabilities. Here are the defaults of a standard Lagoon installation (these could be quite different in your Lagoon, contact your Lagoon administrator!)</p> <ul> <li>Idling is tried every 4 hours.</li> <li>Production environments are never idled.</li> <li>CLI pods are idled if they don't include a cron job and if there is no remote shell connection active.</li> <li>All other services and pods are idled if there was no traffic on the environment in the last 4 hours.</li> <li>If there is an active build happening, there will be no idling.</li> </ul>"},{"location":"concepts-advanced/environment-idling/#how-does-an-environment-get-un-idled","title":"How does an environment get un-idled?","text":"<p>Aergia will automatically un-idle an environment as soon as it is visited, therefore just visiting any URL of the environment will start the environment. Likewise, initiating an SSH session to the environment will also restart the services.</p> <p>The un-idling will take a couple of seconds, as the Kubernetes cluster needs to start all containers again. During this time there will be waiting screen shown to the visitor that their environment is currently started.</p>"},{"location":"concepts-advanced/environment-idling/#can-i-disable-prevent-the-idler-from-idling-my-environment","title":"Can I disable / prevent the Idler from idling my environment?","text":"<p>The field <code>autoIdle</code> can be set at the project level (impacts all environments) or for a single environment (target just one environment), as to whether idling is allowed to take place. A value of <code>1</code> indicates the project/environment is eligible for idling. If the project is set to <code>0</code>, then all environments will never be idled. The default value is <code>1</code> (idling is enabled).</p> <p>Contact your Lagoon administrator if you are unsure how to set these project/environment fields.</p>"},{"location":"concepts-advanced/environment-types/","title":"Environment Types","text":"<p>Lagoon currently differentiates between two different environment types: <code>production</code> and <code>development</code>.</p> <p>When setting up your project via the Lagoon GraphQL API, you can define a <code>productionEnvironment</code>. On every deployment Lagoon executes, it checks if the current environment name matches what is defined in <code>productionEnvironment</code>. If it does, Lagoon will mark this environment as the <code>production</code> environment. This happens in two locations:</p> <ol> <li>Within the GraphQL API itself.</li> <li>As an environment variable named <code>LAGOON_ENVIRONMENT_TYPE</code> in every container.</li> </ol> <p>But that's it. Lagoon itself handles <code>development</code> and <code>production</code> environments in exactly the same way (in the end we want as few differences of the environments as possible - that's the beauty of Lagoon).</p> <p>There are a couple of things that will use this information:</p> <ul> <li>By default, <code>development</code> environments are idled after 4 hours with no hits (don't worry, they wake up automatically). It is also possible for your Lagoon administrator to disable auto-idling on a per-environment basis, just ask!</li> <li>Our default Drupal <code>settings.php</code> files load additional settings files for <code>development.settings.php</code> and <code>production.settings.php</code> so you can define settings and configurations different per environment type.</li> <li>If you try to delete an environment that is defined as the production environment (either via webhooks or REST), Lagoon will politely refuse to delete the production environment, as it tries to prevent you from making a mistake. In order to delete a production environment, you can either change the <code>productionEnvironment</code> in the API or use the secret <code>forceDeleteProductionEnvironment: true</code> POST payload for the REST API.</li> <li>Sometimes your Lagoon administrator might use the production environment information for some additional things, such as calculating only the hits of the production environments to calculate the price of the hosting.</li> </ul>"},{"location":"concepts-advanced/environment-variables/","title":"Environment Variables","text":"<p>Lagoon supports the use of environment variables, which are commonly used by applications to store configuration separate from code. There are multiple methods to set an env var and each Lagoon environment can have separate values.</p>"},{"location":"concepts-advanced/environment-variables/#environment-variables-lagoon-api","title":"Environment Variables (Lagoon API)","text":"<p>Use Lagoon API env vars for config that you don't want to keep in your Git repository (like secrets or API keys). This prevents sensitive information from getting leaked due to accidental exposure of the code.</p> <p>Env vars can be added via the Lagoon dashboard, the Lagoon CLI, or the Lagoon API.</p> <p>Warning</p> <p>Adding or changing API env vars won't be reflected in a Lagoon environment until the next deployment.</p> <p>Env vars have a <code>name</code>, <code>value</code>, <code>type</code>, and <code>scope</code>. The type and scope determine when and where the env vars are added to Lagoon environments.</p>"},{"location":"concepts-advanced/environment-variables/#types","title":"Types","text":"<p>Types are used to set env vars for a set of environments. An env var can be of type <code>organization</code>, <code>project</code>, or <code>environment</code>. Review the precedence of all env vars to see how they interact with other types and methods.</p>"},{"location":"concepts-advanced/environment-variables/#organization","title":"Organization","text":"<p>Organization env vars are set for all environments, in all projects, in an organization. They can be overridden by project and environment env vars.</p> <p>An example of setting an <code>organization</code> env var:</p> Lagoon CLILagoon API <pre><code>lagoon add variable --organization-name lagoon-demo-org --scope runtime \\\n--name SSMTP_MAILHUB --value mailhub.example.com\n</code></pre> <pre><code>mutation {\naddOrUpdateEnvVariableByName(\ninput: {\norganization: \"lagoon-demo-org\"\nscope: RUNTIME\nname: \"SSMTP_MAILHUB\"\nvalue: \"mailhub.example.com\"\n}\n) {\nid\nname\nscope\nvalue\n}\n}\n</code></pre>"},{"location":"concepts-advanced/environment-variables/#project","title":"Project","text":"<p>Project env vars are set for all environments in a project. They can be overridden by environment env vars.</p> <p>An example of setting a <code>project</code> env var:</p> Lagoon CLILagoon API <pre><code>lagoon add variable --project lagoon-demo --scope runtime \\\n--name PHP_MEMORY_LIMIT --value 400M\n</code></pre> <pre><code>mutation {\naddOrUpdateEnvVariableByName(\ninput: {\nproject: \"lagoon-demo\"\nscope: RUNTIME\nname: \"PHP_MEMORY_LIMIT\"\nvalue: \"400M\"\n}\n) {\nid\nname\nscope\nvalue\n}\n}\n</code></pre>"},{"location":"concepts-advanced/environment-variables/#environment","title":"Environment","text":"<p>Environment env vars are set for a single Lagoon environment.</p> <p>An example of setting an <code>environment</code> env var:</p> Lagoon CLILagoon API <pre><code>lagoon add variable --project lagoon-demo --environment dev \\\n--scope runtime --name LOG_LEVEL --value DEBUG\n</code></pre> <pre><code>mutation {\naddOrUpdateEnvVariableByName(\ninput: {\nproject: \"lagoon-demo\"\nenvironment: \"dev\nscope: RUNTIME\nname: \"LOG_LEVEL\"\nvalue: \"DEBUG\"\n}\n) {\nid\nname\nscope\nvalue\n}\n}\n</code></pre>"},{"location":"concepts-advanced/environment-variables/#scopes","title":"Scopes","text":"<p>Scopes are used to set an env var for a specific context. An env var can have a scope of <code>build</code>, <code>runtime</code>, <code>global</code>, <code>container_registry</code> or <code>internal_container_registry</code>.</p>"},{"location":"concepts-advanced/environment-variables/#buildtime","title":"Buildtime","text":"<p>Buildtime env vars are only available during Docker image builds, and can be accessed by using the <code>ARG</code> instruction. Check the Docker documention on <code>ARG</code> for all the ways to use this method.</p> <p>Typically the <code>ARG</code> will go after the FROM. Read the Docker documentation about ARG and FROM.</p> <p>An example of setting a <code>build</code> env var:</p> Lagoon CLILagoon API <pre><code>lagoon add variable --project lagoon-demo --scope build \\\n--name COMPOSER_MEMORY_LIMIT --value -1\n</code></pre> <pre><code>mutation {\naddOrUpdateEnvVariableByName(\ninput: {\nproject: \"lagoon-demo\"\nscope: BUILD\nname: \"COMPOSER_MEMORY_LIMIT\"\nvalue: \"-1\"\n}\n) {\nid\nname\nscope\nvalue\n}\n}\n</code></pre>"},{"location":"concepts-advanced/environment-variables/#runtime","title":"Runtime","text":"<p>Runtime env vars are injected into all containers when they start.</p> <p>An example of setting a <code>runtime</code> scoped env var:</p> Lagoon CLILagoon API <pre><code>lagoon add variable --project lagoon-demo --environment dev \\\n--scope runtime --name LOG_LEVEL --value DEBUG\n</code></pre> <pre><code>mutation {\naddOrUpdateEnvVariableByName(\ninput: {\nproject: \"lagoon-demo\"\nenvironment: \"dev\nscope: RUNTIME\nname: \"LOG_LEVEL\"\nvalue: \"DEBUG\"\n}\n) {\nid\nname\nscope\nvalue\n}\n}\n</code></pre>"},{"location":"concepts-advanced/environment-variables/#global","title":"Global","text":"<p>Global env vars are set at buildtime and runtime and follow the same rules as those scopes.</p> <p>An example of setting a <code>global</code> scoped env var:</p> Lagoon CLILagoon API <pre><code>lagoon add variable --project lagoon-demo --scope global \\\n--name JAVA_OPTS --value '-Xmx512m'\n</code></pre> <pre><code>mutation {\naddOrUpdateEnvVariableByName(\ninput: {\nproject: \"lagoon-demo\"\nscope: GLOBAL\nname: \"JAVA_OPTS\"\nvalue: \"-Xmx512m\"\n}\n) {\nid\nname\nscope\nvalue\n}\n}\n</code></pre>"},{"location":"concepts-advanced/environment-variables/#container-registry","title":"Container Registry","text":"<p>Container registry scoped env vars can be used to authenticate to a private container registry so that Lagoon can pull custom and/or private images at buildtime. Check the full documentation on container registries for more information.</p> <p>Warning</p> <p>The scope <code>internal_container_registry</code> is not for general use, and shouldn't be used unless explicitly required.</p> <p>An example of setting a <code>container_registry</code> scoped env var:</p> Lagoon CLILagoon API <pre><code>lagoon add variable --project lagoon-demo --scope container_registry \\\n--name REGISTRY_DOCKERHUB_USERNAME --value dockerhub_user_123\n</code></pre> <pre><code>mutation {\naddOrUpdateEnvVariableByName(\ninput: {\nproject: \"lagoon-demo\"\nscope: GLOBAL\nname: \"JAVA_OPTS\"\nvalue: \"-Xmx512m\"\n}\n) {\nid\nname\nscope\nvalue\n}\n}\n</code></pre>"},{"location":"concepts-advanced/environment-variables/#environment-files-committed-to-git-repo","title":"Environment Files (committed to Git Repo)","text":"<p>Use environment files for config that can be safely committed to a Git repository.</p> <p>Environment files are only read by containers based on the Lagoon <code>commons</code> base image. They aren't read by Lagoon, but by the containers <code>ENTRYPOINT</code> scripts, which looks for them in the containers working directory. This means that these env vars are only available at runtime.</p> <p>Info</p> <p>If environment files aren't loading, confirm that you're using Lagoon base images, that you're copying them into the contianer as part of your <code>Dockerfile</code>, and that your container has a <code>WORKDIR</code> setting that points to the location of these files.</p> <p>The syntax of an environment file is <code>ENV_VAR_NAME=\"env var value\"</code>:</p> .env<pre><code>PHP_MEMORY_LIMIT=\"400M\"\nPHP_MAX_EXECUTION_TIME=900\nDB_USER=$DB_USERNAME # Redefine DB_USER with the value of DB_USERNAME e.g. if your application expects another variable name for the Lagoon-provided variables.\n</code></pre>"},{"location":"concepts-advanced/environment-variables/#lagoonenv-and-lagoonenvbranchname","title":"<code>.lagoon.env</code> and <code>.lagoon.env.BRANCHNAME</code>","text":"<p>Use <code>.lagoon.env</code> when you want to always set env vars, but only for Lagoon images.</p> <p>Use <code>.lagoon.env.BRANCHNAME</code> when you want to set different env vars per environment. <code>BRANCHNAME</code> will be replaced by the env vars <code>$LAGOON_GIT_BRANCH</code> or <code>$LAGOON_GIT_SAFE_BRANCH</code>. For example, if you deployed the branch <code>main</code>, the file name would be <code>.lagoon.env.main</code>. Branch names that contain special characters are sanitized, so check the value of <code>$LAGOON_GIT_SAFE_BRANCH</code> to determine what the filename should be.</p>"},{"location":"concepts-advanced/environment-variables/#env-and-envdefaults","title":"<code>.env</code> and <code>.env.defaults</code>","text":"<p>Use <code>.env</code> and <code>.env.defaults</code> when you want to always set env vars, including for local development and non-Lagoon tools that also read them.</p>"},{"location":"concepts-advanced/environment-variables/#docker-environment-variables","title":"Docker Environment Variables","text":""},{"location":"concepts-advanced/environment-variables/#docker-images","title":"Docker Images","text":"<p>Env vars can be set in docker images by using the <code>ENV</code> command in your <code>Dockerfile</code>. These will be set when Lagoon builds your projects images and are available at runtime.</p>"},{"location":"concepts-advanced/environment-variables/#docker-compose","title":"Docker Compose","text":"<p>Lagoon doesn't use env vars set using Docker Compose when deploying your projects. You may still choose to set them for local development purposes. Review the Docker Compose env var documentation for more information.</p>"},{"location":"concepts-advanced/environment-variables/#build-variables","title":"Build Variables","text":"<p>Use build vars when you want to set an env var that is valid at buildtime, but only for a single deployment. Bulk deployments also support build vars.</p> <p>Info</p> <p>Deployments triggered via webhooks won't receive build vars.</p> <p>Build vars can be set for a deployment using the Lagoon CLI or the Lagoon API.</p> <p>An example use case would be disabling post rollout tasks, but only for a single deployment:</p> Lagoon CLILagoon API <pre><code>lagoon deploy latest --project lagoon-demo --environment main \\\n--buildvar LAGOON_POSTROLLOUT_DISABLED=true\n</code></pre> <pre><code>mutation {\ndeployEnvironmentLatest(input: {\nenvironment: {\nname: \"main\"\nproject: {\nname: \"lagoon-demo\"\n}\n}\nbuildVariables: {\nname: \"LAGOON_POSTROLLOUT_DISABLED\"\nvalue: \"true\"\n}\n})\n}\n</code></pre>"},{"location":"concepts-advanced/environment-variables/#environment-variable-precedence","title":"Environment Variable Precedence","text":"<p>Since env vars may be duplicated in different methods, there's an order in which they're set that determines which value will be used. The order follows, with most specific listed first:</p> <ol> <li>Build vars</li> <li> <p>Env vars (Lagoon API)</p> <ol> <li>Environment specific</li> <li>Project wide</li> <li>Organization wide</li> </ol> </li> <li> <p>Docker env vars</p> </li> <li>Env files<ol> <li>Env vars defined in <code>.lagoon.env.BRANCHNAME</code></li> <li>Env vars defined in <code>.lagoon.env</code></li> <li>Env vars defined in <code>.env</code></li> <li>Env vars defined in <code>.env.defaults</code></li> </ol> </li> </ol>"},{"location":"concepts-advanced/feature-flags/","title":"Feature flags","text":"<p>Some Lagoon features can be controlled by setting feature flags. This is designed to assist users and administrators in rolling out new platform features in a controlled manner.</p>"},{"location":"concepts-advanced/feature-flags/#environment-variables","title":"Environment variables","text":"<p>The following can be set as API env vars  to toggle feature flags.</p> Environment Variable Name Active scope Version introduced Version removed Default Value Description <code>LAGOON_FEATURE_FLAG_ROOTLESS_WORKLOAD</code> <code>global</code> 2.2.0 - <code>disabled</code> Set to <code>enabled</code> to set a non-root pod security context on the pods in this environment or project.This flag will eventually be deprecated, at which point non-root workloads will be enforced. <code>LAGOON_FEATURE_FLAG_ISOLATION_NETWORK_POLICY</code> <code>global</code> 2.2.0 - <code>disabled</code> Set to <code>enabled</code> to add a default namespace isolation network policy to each environment on deployment.This flag will eventually be deprecated, at which point the namespace isolation network policy will be enforced.NOTE: enabling and then disabling this feature will not remove any existing network policy from previous deployments. Those must be removed manually."},{"location":"concepts-advanced/feature-flags/#cluster-level-controls","title":"Cluster-level controls","text":"<p>Feature flags may also be controlled at the cluster level. There is support for this in the <code>lagoon-build-deploy</code> chart. For each feature flag there are two flavours of values which can be set: <code>default</code> and <code>force</code>.</p> <ul> <li><code>default</code> controls the default policy for environments deployed to the cluster, but can be overridden at the organization, project, or environment level by the environment variables documented above.</li> <li><code>force</code> also controls the policy for environments deployed to the cluster, but cannot be overridden by the environment variables documented above.</li> </ul>"},{"location":"concepts-advanced/service-types/","title":"Service Types","text":"<p>The below lists all service types that can be defined via <code>lagoon.type</code> within a <code>docker-compose.yml</code> file.</p> <p>Warning</p> <p>Once a <code>lagoon.type</code> is defined and the environment is deployed, changing it to a different type is not supported and could result in a broken environment.</p>"},{"location":"concepts-advanced/service-types/#additional-volumes","title":"Additional Volumes","text":"<p>Some service types allow for additional volumes to be added, for more information on the <code>lagoon.volumes.X.path</code> label, please see Additional Volumes</p> <p>If a service type does not include the <code>lagoon.volumes.X.path</code> label in the <code>Docker compose labels</code> section, then it does not support additional volumes.</p> <p>If you're provisioning a new project, we recommend avoiding the usage of <code>-persistent</code> service types, and use additional volumes as required for any persistent data.</p>"},{"location":"concepts-advanced/service-types/#additional-service-ports","title":"Additional Service Ports","text":"<p>Most services provide a default port, in cases where you want to use the services already defined in your <code>docker-compose.yml</code> file, you can configure a service to use those ports instead.</p> <p>To use this feature, you set the <code>lagoon.service.usecomposeports: true</code> label on the service in your <code>docker-compose.yml</code> file. For more information on how to use this feature, see Additional Service Ports</p>"},{"location":"concepts-advanced/service-types/#storage-types","title":"Storage Types","text":"<p>See storage types for more information.</p>"},{"location":"concepts-advanced/service-types/#basic","title":"<code>basic</code>","text":"<p>Basic container, good to use for most applications that don't have an existing template. No persistent storage. The port can be changed using a label. If an autogenerated route is not required (e.g. for an internal-facing service, set <code>lagoon.autogeneratedroute: false</code> in the docker-compose.yml)</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels TCP connection on <code>3000</code> <code>3000</code> Yes No <code>lagoon.service.port</code>, <code>lagoon.autogeneratedroute</code>, <code>lagoon.volumes.X.path</code>"},{"location":"concepts-advanced/service-types/#basic-persistent","title":"<code>basic-persistent</code>","text":"<p>Like <code>basic</code>. Will also generate persistent storage, defines mount location via <code>lagoon.persistent</code>.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels TCP connection on <code>3000</code> <code>3000</code> Yes Bulk <code>lagoon.service.port</code>, <code>lagoon.autogeneratedroute</code>, <code>lagoon.persistent</code>, <code>lagoon.persistent.name</code>, <code>lagoon.persistent.size</code>,  <code>lagoon.volumes.X.path</code>"},{"location":"concepts-advanced/service-types/#basic-single","title":"<code>basic-single</code>","text":"<p>Like <code>basic-persistent</code>. This will also generate persistent storage, defines mount location via <code>lagoon.persistent</code>.</p> <p>Where this differs from <code>basic-persistent</code> is that the volume is a <code>ReadWriteOnce</code> volume type. The downsides to this service type are that it can't be scaled.</p> <p>This service type does not support additional volumes.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels TCP connection on <code>3000</code> <code>3000</code> Yes Block <code>lagoon.service.port</code>, <code>lagoon.autogeneratedroute</code>, <code>lagoon.persistent</code>, <code>lagoon.persistent.name</code>, <code>lagoon.persistent.size</code>"},{"location":"concepts-advanced/service-types/#cli","title":"<code>cli</code>","text":"<p>Use for any kind of CLI container (like PHP, Node.js, etc). Automatically gets the customer SSH private key that is mounted in <code>/var/run/secrets/lagoon/sshkey/ssh-privatekey</code>.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels - No No No <code>lagoon.volumes.X.path</code>"},{"location":"concepts-advanced/service-types/#cli-persistent","title":"<code>cli-persistent</code>","text":"<p>Like <code>cli</code>, expects <code>lagoon.persistent.name</code> to be given the name of a service that has persistent storage, which will be mounted under defined <code>lagoon.persistent</code> label. Does NOT generate its own persistent storage, only used to mount another service's persistent storage.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels - No No Bulk <code>lagoon.persistent.name</code>, <code>lagoon.persistent</code>, <code>lagoon.volumes.X.path</code>"},{"location":"concepts-advanced/service-types/#elasticsearch","title":"<code>elasticsearch</code>","text":"<p>Elasticsearch container, will auto-generate persistent storage under <code>/usr/share/elasticsearch/data</code>.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels HTTP on <code>localhost:9200/_cluster/health?local=true</code> 9200 No Block <code>lagoon.persistent.size</code>"},{"location":"concepts-advanced/service-types/#mariadb","title":"<code>mariadb</code>","text":"<p>A meta-service which will tell Lagoon to automatically decide between <code>mariadb-single</code> and <code>mariadb-dbaas</code>.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels - - - - -"},{"location":"concepts-advanced/service-types/#mariadb-single","title":"<code>mariadb-single</code>","text":"<p>MariaDB container. Creates cron job for backups running every 24h executing <code>/lagoon/mysql-backup.sh 127.0.0.1</code>.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels TCP connection on <code>3306</code> <code>3306</code> No Block <code>lagoon.persistent.size</code>"},{"location":"concepts-advanced/service-types/#mariadb-dbaas","title":"<code>mariadb-dbaas</code>","text":"<p>Uses a shared MariaDB server via the DBaaS Operator.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels Not Needed <code>3306</code> No - -"},{"location":"concepts-advanced/service-types/#mongo","title":"<code>mongo</code>","text":"<p>A meta-service which will tell Lagoon to automatically decide between <code>mongo-single</code> and <code>mongo-dbaas</code>.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels - - - - -"},{"location":"concepts-advanced/service-types/#mongo-single","title":"<code>mongo-single</code>","text":"<p>MongoDB container, will generate persistent storage of min 1GB mounted at <code>/data/db</code>.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels TCP connection on <code>27017</code> <code>27017</code> No Block <code>lagoon.persistent.size</code>"},{"location":"concepts-advanced/service-types/#mongo-dbaas","title":"<code>mongo-dbaas</code>","text":"<p>Uses a shared MongoDB server via the DBaaS Operator.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels Not Needed <code>27017</code> No - -"},{"location":"concepts-advanced/service-types/#nginx","title":"<code>nginx</code>","text":"<p>NGINX container. No persistent storage.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels <code>localhost:50000/nginx_status</code> <code>8080</code> Yes No <code>lagoon.autogeneratedroute</code>, <code>lagoon.volumes.X.path</code>"},{"location":"concepts-advanced/service-types/#nginx-php","title":"<code>nginx-php</code>","text":"<p>Like <code>nginx</code>, but additionally a <code>php</code> container.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels NGINX: <code>localhost:50000/nginx_status</code>, PHP: <code>/usr/sbin/check_fcgi</code> <code>8080</code> Yes No <code>lagoon.autogeneratedroute</code>, <code>lagoon.volumes.X.path</code>"},{"location":"concepts-advanced/service-types/#nginx-php-persistent","title":"<code>nginx-php-persistent</code>","text":"<p>Like <code>nginx-php.</code> Will generate persistent storage, defines mount location via <code>lagoon.persistent</code>.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels NGINX: <code>localhost:50000/nginx_status</code>, PHP: <code>/usr/sbin/check_fcgi</code> http on <code>8080</code> Yes Bulk <code>lagoon.autogeneratedroute</code>, <code>lagoon.persistent</code>, <code>lagoon.persistent.name</code>, <code>lagoon.persistent.size</code>, <code>lagoon.volumes.X.path</code>"},{"location":"concepts-advanced/service-types/#node","title":"<code>node</code>","text":"<p>Node.js container. No persistent storage.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels TCP connection on <code>3000</code> <code>3000</code> Yes No <code>lagoon.autogeneratedroute</code>, <code>lagoon.volumes.X.path</code>"},{"location":"concepts-advanced/service-types/#node-persistent","title":"<code>node-persistent</code>","text":"<p>Like <code>node</code>. Will generate persistent storage, defines mount location via <code>lagoon.persistent</code>.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels TCP connection on <code>3000</code> <code>3000</code> Yes Bulk <code>lagoon.autogeneratedroute</code>, <code>lagoon.persistent</code>, <code>lagoon.persistent.name</code>, <code>lagoon.persistent.size</code>, <code>lagoon.volumes.X.path</code>"},{"location":"concepts-advanced/service-types/#none","title":"<code>none</code>","text":"<p>Instructs Lagoon to completely ignore this service.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels - - - - -"},{"location":"concepts-advanced/service-types/#opensearch","title":"<code>opensearch</code>","text":"<p>OpenSearch container, will auto-generate persistent storage under <code>/usr/share/opensearch/data</code>.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels HTTP on <code>localhost:9200/_cluster/health?local=true</code> 9200 No Block <code>lagoon.persistent.size</code>"},{"location":"concepts-advanced/service-types/#postgres","title":"<code>postgres</code>","text":"<p>A meta-service which will tell Lagoon to automatically decide between <code>postgres-single</code> and <code>postgres-dbaas</code>.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels - - - - -"},{"location":"concepts-advanced/service-types/#postgres-single","title":"<code>postgres-single</code>","text":"<p>Postgres container. Creates cron job for backups running every 24h executing <code>/lagoon/postgres-backup.sh localhost</code>.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels TCP connection on <code>5432</code> <code>5432</code> No Block <code>lagoon.persistent.size</code>"},{"location":"concepts-advanced/service-types/#postgres-dbaas","title":"<code>postgres-dbaas</code>","text":"<p>Uses a shared PostgreSQL server via the DBaaS Operator.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels Not Needed <code>5432</code> No - -"},{"location":"concepts-advanced/service-types/#python","title":"<code>python</code>","text":"<p>Python container. No persistent storage.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels HTTP connection on <code>8800</code> <code>8800</code> Yes No <code>lagoon.autogeneratedroute</code>, <code>lagoon.volumes.X.path</code>"},{"location":"concepts-advanced/service-types/#python-persistent","title":"<code>python-persistent</code>","text":"<p>Python container. With persistent storage.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels HTTP connection on <code>8800</code> <code>8800</code> Yes Bulk <code>lagoon.autogeneratedroute</code>, <code>lagoon.volumes.X.path</code>"},{"location":"concepts-advanced/service-types/#redis","title":"<code>redis</code>","text":"<p>Redis container.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels TCP connection on <code>6379</code> <code>6379</code> No No -"},{"location":"concepts-advanced/service-types/#redis-persistent","title":"<code>redis-persistent</code>","text":"<p>Redis container with auto-generated persistent storage mounted under <code>/data</code>.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels TCP connection on <code>6379</code> <code>6379</code> No Block <code>lagoon.persistent.size</code>"},{"location":"concepts-advanced/service-types/#solr","title":"<code>solr</code>","text":"<p>Solr container with auto-generated persistent storage mounted under <code>/var/solr</code>.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels TCP connection on <code>8983</code> <code>8983</code> No Block <code>lagoon.persistent.size</code>"},{"location":"concepts-advanced/service-types/#varnish","title":"<code>varnish</code>","text":"<p>Varnish container.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels HTTP request <code>localhost:8080/varnish_status</code> <code>8080</code> Yes No <code>lagoon.autogeneratedroute</code>"},{"location":"concepts-advanced/service-types/#varnish-persistent","title":"<code>varnish-persistent</code>","text":"<p>Varnish container with auto-generated persistent storage mounted under <code>/var/cache/varnish</code>.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels HTTP request <code>localhost:8080/varnish_status</code> <code>8080</code> Yes Block <code>lagoon.autogeneratedroute</code>, <code>lagoon.persistent.size</code>"},{"location":"concepts-advanced/service-types/#worker","title":"<code>worker</code>","text":"<p>Use for any kind of worker container (like queue workers, etc.) where there is no exposed service port.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels - No No No <code>lagoon.volumes.X.path</code>"},{"location":"concepts-advanced/service-types/#worker-persistent","title":"<code>worker-persistent</code>","text":"<p>Like <code>worker</code>, expects <code>lagoon.persistent.name</code> to be given the name of a service that has persistent storage, which will be mounted under defined <code>lagoon.persistent</code> label. Does NOT generate its own persistent storage, only used to mount another service's persistent storage.</p> Healthcheck Exposed Ports Auto Generated Routes Storage Docker compose labels - No No Bulk <code>lagoon.persistent.name</code>, <code>lagoon.persistent</code>, <code>lagoon.volumes.X.path</code>"},{"location":"concepts-advanced/storage-types/","title":"Storage Types","text":"<p>Lagoon currently provides options for two storage types.</p>"},{"location":"concepts-advanced/storage-types/#bulk","title":"Bulk","text":"<p>Bulk storage in Lagoon offers the capability for <code>ReadWriteMany</code>.</p> <p>Service types that support this volume type can typically be scaled, and the volumes can often be shared across multiple pods and services, as long as those services support multiple additional volumes.</p> <p>Typically bulk volumes will be backed by NFS, however this can also depend on the cloud provider as there are different storage provisioners that can provision <code>ReadWriteMany</code> volumes.</p>"},{"location":"concepts-advanced/storage-types/#block","title":"Block","text":"<p>Block storage in Lagoon offers the capability for <code>ReadWriteOnce</code>.</p> <p>Service types that have this volume type available are not able to be scaled, this is due to the volume only be able to be written to by one pod.</p> <p>Most block storage will be backed by disk, which type of disk depends on the cloud provider.</p>"},{"location":"concepts-advanced/workflows/","title":"Workflows","text":"<p>Lagoon tries to support any development workflow possible. It specifically does not enforce any workflows onto teams, so that each development team can define how they would like to develop and deploy their code.</p>"},{"location":"concepts-advanced/workflows/#fixed-branches","title":"Fixed Branches","text":"<p>The most straightforward workflows are deployment-based on some fixed branches:</p> <p>You define which branches (like <code>develop</code>, <code>staging</code> and <code>main</code>, which would be <code>^(develop|staging|main)$</code> as regular expressions) that Lagoon should deploy and it will do so. Done!</p> <p>If you would like to test a new feature, merge them into a branch that you have set up locally and push, and Lagoon will deploy the feature and you can test. When all is good, merge the branch into your production branch and push.</p>"},{"location":"concepts-advanced/workflows/#feature-branches","title":"Feature Branches","text":"<p>A bit more advanced are feature branches. Since Lagoon supports the ability to define the branches you would like to deploy via regular expressions, you can also extend the above regular expression to this: <code>^feature\\/|^(staging|main)$</code>. This will instruct Lagoon to deploy all branches that start with <code>feature/</code>, plus the branches called <code>staging</code> and <code>main</code>. Our development workflow could be as following:</p> <ul> <li>Create a new branch from <code>main</code> called <code>feature/myfeature</code> and push <code>feature/myfeature</code>.</li> <li>Lagoon will deploy the branch <code>feature/myfeature</code> as a new environment, where you can test your feature independently of any other features.</li> <li>Merge <code>feature/myfeature</code> into the <code>main</code> branch and it will deploy to your production environment.</li> </ul> <p>If you like, you can also merge <code>feature/myfeature</code> and any other feature branches into <code>staging</code> first, in order to test the functionality of multiple features together. After you have tested the features together on staging, you can merge the features into main.</p> <p>This workflow needs a high level of branch pruning and cleanliness in your Git repository. Since each feature branch will create its own Lagoon environment, you can have very quickly generate a LOT of environments, which all of them will use resources. Be sure to merge or delete unused branches.</p> <p>Because of this, it could make sense to think about a pull request based workflow.</p>"},{"location":"concepts-advanced/workflows/#pull-requests","title":"Pull requests","text":"<p>Even more advanced are workflows via pull requests. Such workflows need the support of a Git hosting which supports pull requests (also called merge requests). The idea of pull request-based workflows lies behind that idea that you can test a feature together with a target branch, without actually needing to merge yet, as Lagoon will do the merging for you during the build.</p> <p>In our example we would configure Lagoon to deploy the branches <code>^(staging|main)$</code> and the pull requests to <code>.*</code> (to deploy all pull requests). Now our workflow would be:</p> <ol> <li>Create a new branch from <code>main</code> called <code>feature/myfeature</code> and push <code>feature/myfeature</code> (no deployment will happen now because we have only specific staging and main as our branches to be deployed).</li> <li>Create a pull request in your Git hosting from <code>feature/myfeature</code> into <code>main</code>.</li> <li>Lagoon will now merge the <code>feature/myfeature</code> branch on top of the <code>main</code> branch and deploy that resulting code for you.</li> <li>Now you can test the functionality of the <code>feature/myfeature</code> branch just as if it had been merged into <code>main</code>, so all changes that have happened in <code>main</code> since you created the  <code>feature/myfeature</code> branch from it will be there, and you don't need to worry that you might have an older version of the <code>main</code> branch.<ol> <li>If there is a merge conflict, the build will fail, Lagoon will stop and notify you.</li> </ol> </li> <li>After you have tested your pull request branch, you can go back to your Git hosting and actually merge the code into <code>main</code>. This will now trigger a deployment of <code>main</code>.</li> <li>When the pull request is merged, it is automatically closed and Lagoon will remove the environment for the pull request automatically.</li> </ol> <p>Some teams might opt to create the pull request against a shared <code>staging</code> branch and then merge the <code>staging</code> branch into the <code>main</code> branch via another pull request. This depends on the kind of Git workflow you're using.</p> <p>Additionally, in Lagoon you can define that only pull requests with a specific text in the title are deployed. <code>[BUILD]</code> defined as regular expression will only deploy pull requests that have a title like <code>[BUILD] My Pull Request</code>, while a pull request with that title <code>My other Pull Request</code> is not automatically deployed. This helps to keep the amount of environments small and allows for pull requests that don't need an environment yet.</p>"},{"location":"concepts-advanced/workflows/#automatic-database-sync-for-pull-requests","title":"Automatic Database Sync for Pull requests","text":"<p>Automatic pull request environments are a fantastic thing. But it would also be handy to have the database synced from another environment when those environments are created. Lagoon can handle that!</p> <p>The following example will sync the staging database on the first rollout of the pull request environment:</p> .lagoon.yml<pre><code>tasks:\npost-rollout:\n- run:\nname: IF no Drupal installed &amp; Pullrequest = Sync database from staging\ncommand: |\nif [[ -n ${LAGOON_PR_BASE_BRANCH} ]] &amp;&amp; tables=$(drush sqlq 'show tables;') &amp;&amp; [ -z \"$tables\" ]; then\ndrush -y sql-sync @staging default\nfi\nservice: cli\nshell: bash\n</code></pre>"},{"location":"concepts-advanced/workflows/#promotion","title":"Promotion","text":"<p>Another way of deploying your code into an environment is the promotion workflow.</p> <p>The idea behind the promotion workflow comes from this (as an example):</p> <p>If you merge the branch <code>staging</code> into the <code>main</code> branch, and if there are no changes to <code>main</code> , so <code>main</code> and <code>staging</code> have the exact same code in Git, it could still technically be possible that the resulting Docker images are slightly different. This is because it's possible that between the last <code>staging</code> deployment and the current <code>main</code> deployment, some upstream Docker images may have changed, or dependencies loaded from the various package managers may have changed. This is a very small chance, but it's there.</p> <p>For this situation, Lagoon understands the concept of promoting Lagoon images from one environment to another. This basically means that it will take the already built and deployed Docker images from one environment, and will use those exact same Docker images for another environment.</p> <p>In our example, we want to promote the Docker images from the <code>main</code> environment to the <code>production</code> environment:</p> <ul> <li>First, we need a regular deployed environment with the name <code>main</code>. Make sure that the environment has deployed successfully.</li> <li>Also, make sure that you don't have a branch called <code>production</code> in your Git repository. This could lead to weird confusions (like people pushing into this branch, etc).</li> <li>Now trigger a promotion deployment using the lagoon cli:</li> </ul> Trigger a promotion deployment<pre><code>lagoon deploy promote --project=\"myproject\" --source=\"main\" --destination=\"production\"\n</code></pre> <p>This tells Lagoon that you want to promote from the source <code>main</code> to the destination <code>production</code>.</p> <p>Lagoon will now do the following:</p> <ul> <li>Check out the Git branch <code>main</code> in order to load the <code>.lagoon.yml</code> and <code>docker-compose.yml</code> files (Lagoon still needs these in order to fully work).</li> <li>Create all Kubernetes/OpenShift objects for the defined services in <code>docker-compose.yml</code> , but with <code>LAGOON_GIT_BRANCH=production</code> as environment variable.</li> <li>Copy the newest images from the <code>main</code> environment and use them (instead of building Images or tagging them from upstream).</li> <li>Run all post-rollout tasks like a normal deployment.</li> </ul> <p>You will receive the same notifications of success or failures like any other deployment.</p>"},{"location":"concepts-basics/","title":"Basic Lagoon Concepts","text":"<p>This section covers some of the basic concepts in Lagoon. If you're already familiar with these, move on to Advanced Lagoon Concepts.</p> <p>If you need help, contact your Lagoon administrator or reach out to the community and maintainers in our Discord.</p>"},{"location":"concepts-basics/build-and-deploy-process/","title":"Build and Deploy Process","text":"<p>This document describes what actually happens during a Lagoon build and deployment. It is heavily simplified from what actually happens, but it will help you to understand what is happening under the hood every time that Lagoon deploys new code for you.</p> <p>Watch the video below for a walk-through of the deployment process.</p>"},{"location":"concepts-basics/build-and-deploy-process/#1-set-up-openshift-projectkubernetes-namespace-for-environment","title":"1. Set up OpenShift Project/Kubernetes Namespace for Environment","text":"<p>First, Lagoon checks if the OpenShift project/Kubernetes namespace for the given environment exists and is correctly set up. It will make sure that we have the needed service accounts, create secrets, and will configure environment variables into a ConfigMap <code>lagoon-env</code> which is filled with information like the environment type and name, the Lagoon project name, and so on.</p>"},{"location":"concepts-basics/build-and-deploy-process/#2-git-checkout-merge","title":"2. Git Checkout &amp; Merge","text":"<p>Next, Lagoon will check out your code from Git. It needs that to be able to read the <code>.lagoon.yml</code>, <code>docker-compose.yml</code> and any <code>.env</code> files, but also to build the Docker images.</p> <p>Note that Lagoon will only process these actions if the branch/PR matches the branch regex set in Lagoon. Based on how the deployment has been triggered, different things will happen:</p>"},{"location":"concepts-basics/build-and-deploy-process/#branch-webhook-push","title":"Branch Webhook Push","text":"<p>If the deployment is triggered automatically via a Git webhook and is for a single branch, Lagoon will check out the Git SHA which is included in the webhook payload. This will trigger a deployment for every Git SHA pushed.</p>"},{"location":"concepts-basics/build-and-deploy-process/#branch-rest-trigger","title":"Branch REST trigger","text":"<p>If you trigger a branch deployment manually via the REST API (via the UI, or GraphQL) and do NOT define a <code>SHA</code> in the POST payload, Lagoon will just check out the latest commit in that branch and deploy it.</p>"},{"location":"concepts-basics/build-and-deploy-process/#pull-requests","title":"Pull Requests","text":"<p>If the deployment is a pull request (PR) deployment, Lagoon will load the base and the HEAD branch and SHAs for the pull request and will:</p> <ul> <li>Check out the base branch (the branch the PR points to).</li> <li>Merge the <code>HEAD</code> branch (the branch that the PR originates from) on top of the base branch.</li> <li>More specifically:<ul> <li>Lagoon will check out and merge particular SHAs which were sent in the webhook. Those SHAs may or may not point to the branch heads. For example, if you make a new push to a GitHub pull request, it can happen that SHA of the base branch will not point to the current base branch HEAD.</li> </ul> </li> </ul> <p>If the merge fails, Lagoon will also stop and inform you about this.</p>"},{"location":"concepts-basics/build-and-deploy-process/#3-build-image","title":"3. Build Image","text":"<p>For each service defined in the <code>docker-compose.yml</code> Lagoon will check if images need to be built or not. If they need to be built, this will happen now. The order of building is based on the order they are configured in <code>docker-compose.yml</code> , and some build arguments are injected:</p> <ul> <li><code>LAGOON_GIT_SHA</code></li> <li><code>LAGOON_GIT_BRANCH</code></li> <li><code>LAGOON_PROJECT</code></li> <li><code>LAGOON_BUILD_TYPE</code> (either <code>pullrequest</code>, <code>branch</code> or <code>promote</code>)</li> <li><code>LAGOON_SSH_PRIVATE_KEY</code> - The SSH private key that is used to clone the source repository. Use <code>RUN /lagoon/entrypoints/05-ssh-key.sh</code> to convert the build argument into an actual key at <code>/home/.ssh/key</code> which will be used by SSH and Git automatically. For safety, remove the key again via <code>RUN rm /home/.ssh/key</code>.</li> <li><code>LAGOON_GIT_SOURCE_REPOSITORY</code> - The full Git URL of the source repository.</li> </ul> <p>Also, if this is a pull request build:</p> <ul> <li><code>LAGOON_PR_HEAD_BRANCH</code></li> <li><code>LAGOON_PR_HEAD_SHA</code></li> <li><code>LAGOON_PR_BASE_BRANCH</code></li> <li><code>LAGOON_PR_BASE_SHA</code></li> <li><code>LAGOON_PR_TITLE</code></li> </ul> <p>Additionally, for each already built image, its name is also injected. If your <code>docker-compose.yml</code> is configured to first build the <code>cli</code> image and then the <code>nginx</code> image, the name of the <code>nginx</code> image is injected as <code>NGINX_IMAGE</code>.</p>"},{"location":"concepts-basics/build-and-deploy-process/#4-configure-kubernetes-or-openshift-services-and-routes","title":"4. Configure Kubernetes or OpenShift Services and Routes","text":"<p>Next, Lagoon will configure Kubernetes or OpenShift with all services and routes that are defined from the service types, plus possible additional custom routes that you have defined in <code>.lagoon.yml</code>.</p> <p>In this step it will expose all defined routes in the <code>LAGOON_ROUTES</code> as comma separated URLs. It will also define one route as the \"main\" route, in this order:</p> <ol> <li>If custom routes defined: the first defined custom route in <code>.lagoon.yml</code>.</li> <li>The first auto-generated route from a service defined in <code>docker-compose.yml</code>.</li> <li>None.</li> </ol> <p>The \"main\" route is injected via the <code>LAGOON_ROUTE</code> environment variable.</p>"},{"location":"concepts-basics/build-and-deploy-process/#5-push-and-tag-images","title":"5. Push and Tag Images","text":"<p>Now it is time to push the previously built Docker images into the internal Docker image registry.</p> <p>For services that didn't specify a Dockerfile to be built in <code>docker-compose.yml</code> and only gave an image, they are also tagged and will cause the internal Docker image registry to know about the images, so that they can be used in containers.</p>"},{"location":"concepts-basics/build-and-deploy-process/#6-persistent-storage","title":"6. Persistent Storage","text":"<p>Lagoon will now create persistent storage (PVC) for each service that needs and requested persistent storage.</p>"},{"location":"concepts-basics/build-and-deploy-process/#7-cron-jobs","title":"7. Cron jobs","text":"<p>For each service that requests a cron job (like MariaDB), plus for each custom cron job defined in <code>.lagoon.yml,</code> Lagoon will now generate the cron job environment variables which are later injected into the Deployment.</p>"},{"location":"concepts-basics/build-and-deploy-process/#8-run-defined-pre-rollout-tasks","title":"8. Run defined pre-rollout tasks","text":"<p>Now Lagoon will check the <code>.lagoon.yml</code> file for defined tasks in <code>pre-rollout</code> and will run them one by one in the defined services. Note that these tasks are executed on the pods currently running (so cannot utilize features or scripts that only exist in the latest commit) and therefore they are also not run on first deployments.</p> <p>If any of them fail, Lagoon will immediately stop and notify you, and the rollout will not proceed.</p>"},{"location":"concepts-basics/build-and-deploy-process/#9-deploymentconfigs-statefulsets-daemonsets","title":"9. DeploymentConfigs, Statefulsets, Daemonsets","text":"<p>This is probably the most important step. Based on the defined service type, Lagoon will create the Deployment, Statefulset or Daemonsets for the service. (Note that Deployments are analogous to DeploymentConfigs in OpenShift)</p> <p>It will include all previously gathered information like the cron jobs, the location of persistent storage, the pushed images and so on.</p> <p>Creation of these objects will also automatically cause Kubernetes or OpenShift to trigger new deployments of the pods if necessary, like when an environment variable has changed or an image has changed. But if there is no change, there will be no deployment! This means if you only update the PHP code in your application, the Varnish, Solr, MariaDB, Redis and any other service that is defined but does not include your code will not be deployed. This makes everything much much faster.</p>"},{"location":"concepts-basics/build-and-deploy-process/#10-wait-for-all-rollouts-to-be-done","title":"10. Wait for all rollouts to be done","text":"<p>Now Lagoon waits! It waits for all of the just-triggered deployments of the new pods to be finished, as well as for their health checks to be successful.</p> <p>If any of the deployments or health checks fail, the deployment will be stopped here, and you will be informed via the defined notification systems (like Slack) that the deployment has failed.</p>"},{"location":"concepts-basics/build-and-deploy-process/#11-run-defined-post-rollout-tasks","title":"11. Run defined post-rollout tasks","text":"<p>Now Lagoon will check the <code>.lagoon.yml</code> file for defined tasks in <code>post-rollout</code> and will run them one by one in the defined services.</p> <p>If any of them fail, Lagoon will immediately stop and notify you.</p>"},{"location":"concepts-basics/build-and-deploy-process/#12-success","title":"12. Success","text":"<p>If all went well and nothing threw any errors, Lagoon will mark this build as successful and inform you via defined notifications. \u2705</p>"},{"location":"concepts-basics/docker-compose-yml/","title":"docker-compose.yml","text":"<p>The <code>docker-compose.yml</code> file is used by Lagoon to:</p> <ul> <li>Learn which services/containers should be deployed.</li> <li>Define how the images for the containers are built.</li> <li>Define additional configurations like persistent volumes.</li> </ul> <p>Docker Compose (the tool) is very strict in validating the content of the YAML file, so we can only do configuration within <code>labels</code> of a service definition.</p> <p>Warning</p> <p>Lagoon only reads the labels, service names, image names and build definitions from a <code>docker-compose.yml</code> file. Definitions like: ports, environment variables, volumes, networks, links, users, etc. are IGNORED.</p> <p>This is intentional, as the <code>docker-compose</code> file is there to define your local environment configuration. Lagoon learns from the <code>lagoon.type</code> the type of service you are deploying and from that knows about ports, networks and any additional configuration that this service might need.</p> <p>Here a straightforward example of a <code>docker-compose.yml</code> file for Drupal:</p> docker-compose.yml<pre><code>x-lagoon-project:\n# Lagoon project name (leave `&amp;lagoon-project` when you edit this)\n&amp;lagoon-project drupal-example\nx-volumes:\n&amp;default-volumes\n# Define all volumes you would like to have real-time mounted into the docker containers\nvolumes:\n- .:/app:delegated\nx-environment:\n&amp;default-environment\nLAGOON_PROJECT: *lagoon-project\n# Route that should be used locally, if you are using pygmy, this route *must* end with .docker.amazee.io\nLAGOON_ROUTE: http://drupal-example.docker.amazee.io\n# Uncomment if you want to have the system behave as it will in production\n#LAGOON_ENVIRONMENT_TYPE: production\n# Uncomment to enable Xdebug and then restart via `docker compose up -d`\n#XDEBUG_ENABLE: \"true\"\nx-user:\n&amp;default-user\n# The default user under which the containers should run. Change this if you are on linux and run with another user than ID `1000`\nuser: '1000'\nservices:\nnginx:\nbuild:\ncontext: .\ndockerfile: nginx.dockerfile\nlabels:\nlagoon.type: nginx-php-persistent # (1)\nlagoon.persistent: /app/web/sites/default/files/\nphp:\nbuild:\ncontext: .\ndockerfile: php.dockerfile\nlabels:\nlagoon.type: nginx-php-persistent # (2)\nlagoon.name: nginx\nlagoon.persistent: /app/web/sites/default/files/\nmariadb:\nimage: uselagoon/mariadb-10.11-drupal\nlabels:\nlagoon.type: mariadb\n</code></pre> <ol> <li>Note the multi-container pods here.</li> <li>Note the multi-container pods here.</li> </ol>"},{"location":"concepts-basics/docker-compose-yml/#basic-settings","title":"Basic settings","text":"<p><code>x-lagoon-project</code>:</p> <p>This is the machine name of your project, define it here. We\u2019ll use \u201cdrupal-example.\u201d</p> <p><code>x-volumes</code>:</p> <p>This tells Lagoon what to mount into the container. Your web application lives in <code>/app</code>, but you can add or change this if needed.</p> <p><code>x-environment</code>:</p> <ol> <li>Here you can set your local development URL. If you are using pygmy, it must end with <code>.docker.amazee.io</code>.</li> <li>If you want to exactly mimic the production environment, uncomment <code>LAGOON_ENVIRONMENT_TYPE: production</code>.</li> <li>If you want to enable Xdebug, uncomment <code>DEBUG_ENABLE: \"true\"</code>.</li> </ol> <p><code>x-user</code>:</p> <p>You are unlikely to need to change this, unless you are on Linux and would like to run with a user other than <code>1000</code>.</p>"},{"location":"concepts-basics/docker-compose-yml/#services","title":"<code>services</code>","text":"<p>This defines all the services you want to deploy. Unfortunately, Docker Compose calls them services, even though they are actually containers. Going forward we'll be calling them services, and throughout this documentation.</p> <p>The name of the service (<code>nginx</code>, <code>php</code>, and <code>mariadb</code> in the example above) is used by Lagoon as the name of the Kubernetes pod (yet another term - again, we'll be calling them services) that is generated, plus also any additional Kubernetes objects that are created based on the defined <code>lagoon.type</code>, which could be things like services, routes, persistent storage, etc.</p> <p>Please note that service names adhere to the RFC 1035 DNS label standard. Service names must:</p> <ul> <li>contain at most 63 characters</li> <li>contain only lowercase alphanumeric characters or '-'</li> <li>start with an alphabetic character</li> <li>end with an alphanumeric character</li> </ul> <p>Warning</p> <p>Once you have set the name of a service, do NOT rename it. This will cause all kind of havoc in your containers and break things.</p>"},{"location":"concepts-basics/docker-compose-yml/#docker-images","title":"Docker Images","text":""},{"location":"concepts-basics/docker-compose-yml/#build","title":"<code>build</code>","text":"<p>If you want Lagoon to build an image for your service during every deployment, you can define it here:</p> <p><code>build</code></p> <ul> <li><code>context</code>: The build context path that should be passed on into the <code>docker build</code> command.</li> <li><code>dockerfile</code>: Location and name of the Dockerfile that should be built.</li> </ul> <p>Warning</p> <p>Lagoon does NOT support the short version of <code>build: &lt;Dockerfile&gt;</code> and will fail if it finds such a definition.</p> <p>If you're building a derived image and need to ensure the base image is always updated, add the base image as a label for the service: <code>lagoon.base.image: container.reg/my/baseimage:latest</code>. The value supports environment variable replacement, for example <code>baseimage:${MY_BASEIMAGE_TAG:-latest}</code>.</p>"},{"location":"concepts-basics/docker-compose-yml/#image","title":"<code>image</code>","text":"<p>If you want to use an existing image, instead of building one, define it via <code>image</code>.</p>"},{"location":"concepts-basics/docker-compose-yml/#types","title":"Types","text":"<p>Lagoon needs to know what type of service you are deploying in order to configure the correct Kubernetes or OpenShift objects.</p> <p>This is done via the <code>lagoon.type</code> label. There are many different types to choose from. Check Service Types to see all of them and their additional configuration possibilities.</p>"},{"location":"concepts-basics/docker-compose-yml/#skipignore-containers","title":"Skip/Ignore containers","text":"<p>If you'd like Lagoon to ignore a service completely - for example, you need a container only during local development - give it the type <code>none</code>.</p>"},{"location":"concepts-basics/docker-compose-yml/#persistent-storage","title":"Persistent Storage","text":"<p>Some containers need persistent storage. Lagoon allows for each container to have a maximum of one persistent storage volume attached to the container. You can configure the container to request its own persistent storage volume (which can then be mounted by other container), or you can tell the container to mount the persistent storage created by another container.</p> <p>In many cases, Lagoon knows where that persistent storage needs to go. For example, for a MariaDB container, Lagoon knows that the persistent storage should be put into <code>/var/lib/mysql</code> , and puts it there automatically without any extra configuration to define that. For some situations, though, Lagoon needs your help to know where to put the persistent storage:</p> <ul> <li><code>lagoon.persistent</code> - The absolute path where the persistent storage should be mounted (the above example uses <code>/app/web/sites/default/files/</code> which is where Drupal expects its persistent storage).</li> <li><code>lagoon.persistent.name</code> - Tells Lagoon to not create a new persistent storage for that service, but instead mounts the persistent storage of another defined service into this service.</li> <li><code>lagoon.persistent.size</code> - The size of persistent storage you require (Lagoon usually gives you minimum 5G of persistent storage, if you need more, define it here).</li> <li><code>lagoon.persistent.class</code> - By default Lagoon automatically assigns the right storage class for your service (like SSDs for MySQL, bulk storage for Nginx, etc.). If you need to overwrite this, you can do so here. This is highly dependent on the underlying Kubernetes/OpenShift that Lagoon runs on. Contact your Lagoon administrator for this.</li> </ul> <p>See the Additional Volumes section on how to add more volumes</p>"},{"location":"concepts-basics/docker-compose-yml/#auto-generated-routes","title":"Auto-generated Routes","text":"<p>The docker-compose.yml file also supports per-service enabling and disabling of autogenerated routes</p> <ul> <li><code>lagoon.autogeneratedroute: false</code> label will stop a route from being automatically created for that service. It can be applied to all services with autogenerated routes, but is mostly useful for the <code>basic</code> and <code>basic-persistent</code> service types when used to create an additional internal-facing service for a database service or similar. The inverse is also true - it will enable an auto-generated route for a service when the .lagoon.yml file disables them.</li> </ul>"},{"location":"concepts-basics/docker-compose-yml/#additional-volumes","title":"Additional Volumes","text":"<p>In situations where more than one persistent volume is required by a service (or services), Lagoon can support the creation of multiple additional volumes.</p> <p>To do this, the volume should be created in the docker-compose.yml with a <code>lagoon.type</code> label - currently only \"persistent\" is supported.</p> docker-compose.yml volumes snippet<pre><code>volumes:\nextravol:\nlabels:\nlagoon.type: persistent\n</code></pre> <p>This volume can then be referenced in each service that requires it, along with the path.</p> <p>Currently, only bulk storage types are supported for additional volumes. To find out which service types support additional volumes, see Service Types</p>"},{"location":"concepts-basics/docker-compose-yml/#add-additional-volumes-to-an-existing-non-persistent-service-type","title":"Add additional volumes to an existing non <code>-persistent</code> service type","text":"<p>If you have a <code>basic</code> or other supported standalone service type and you want to add volumes, you can use the additional volumes to do this without chaning the service type to a <code>-persistent</code> type.</p> docker-compose.yml volume usage snippet<pre><code>services:\nbasic:\nbuild:\ncontext: .\ndockerfile: basic.dockerfile\nlabels:\nlagoon.type: basic\nlagoon.volumes.data.path: /data # basic-persistent provides a default volume, this needs to be defined\nlagoon.volumes.extravol.path: /extra\nvolumes: # these volumes are ignored by lagoon, only the labels above are consumed to handle volume mapping\n- data:/data:delegated\n- extravol:/extra\nvolumes:\ndata:\nlabels:\nlagoon.type: persistent\nextravol:\nlabels:\nlagoon.type: persistent\nlagoon.backup: false\n</code></pre>"},{"location":"concepts-basics/docker-compose-yml/#add-additional-volume-to-an-existing-persistent-service-type","title":"Add additional volume to an existing <code>-persistent</code> service type","text":"<p>docker-compose.yml volume usage snippet<pre><code>services:\nbasic:\nbuild:\ncontext: .\ndockerfile: basic.dockerfile\nlabels:\nlagoon.type: basic-persistent\nlagoon.persistent: /data # basic-persistent provides a default volume, this needs to be defined\nlagoon.volumes.extravol.path: /extra\nvolumes: # these volumes are ignored by lagoon, only the labels above are consumed to handle volume mapping\n- ./data:/data:delegated\n- extravol:/extra\nvolumes:\nextravol:\nlabels:\nlagoon.type: persistent\nlagoon.backup: false\n</code></pre> Note that the original volume created for this service still exists.</p>"},{"location":"concepts-basics/docker-compose-yml/#supported-persistent-volume-flags","title":"Supported persistent volume flags","text":"<ul> <li>The default size is 5Gi - but can be modified with a <code>lagoon.persistent.size: XXGi</code> label on the volume.</li> <li>By default, Lagoon will back up all persistent volumes, but this can be disabled with a <code>lagoon.backup: false</code> label on the volume.</li> </ul> docker-compose.yml volumes snippet<pre><code>volumes:\nextravol:\nlabels:\nlagoon.type: persistent\nlagoon.persistent.size: 10Gi\nlagoon.backup: false\n</code></pre>"},{"location":"concepts-basics/docker-compose-yml/#default-persistent-volumes","title":"Default persistent volumes","text":"<ul> <li>If a service type provides a default persistent volume (nginx-php-persistent, basic-persistent, node-persistent, python-persistent), it will be created and named as the name of the service (unless the lagoon.persistent.name label is assigned).</li> <li>If a volume defined in the volumes block is also named the same as a default volume would be, it will be ignored and only the default volume will be created.</li> <li>If a lagoon.volumes.${volume_name}.path is also defined on a service that has a default volume (or a volume linked to it using the lagoon.persistent.name label, it will also be ignored and the value of the lagoon.persistent path will be used.</li> </ul>"},{"location":"concepts-basics/docker-compose-yml/#ignored-volume","title":"Ignored volume","text":"<ul> <li>If a volume defined in the volumes block has a label lagoon.type: none it will not be created.</li> <li>If a volume defined in the volumes block has a label lagoon.type of a type (currently only persistent), but it is not consumed by any service using a lagoon.volumes.${volume_name}.path, then the volume will not be created.</li> </ul>"},{"location":"concepts-basics/docker-compose-yml/#maximum-number-of-volumes","title":"Maximum number of volumes","text":"<ul> <li>Currently a hard-coded limit of 6 volumes is in place, this may be made configurable in the future.</li> </ul>"},{"location":"concepts-basics/docker-compose-yml/#supported-service-types","title":"Supported service types","text":"<p>Currently, the only service types that support additional volumes are the following</p> <ul> <li>basic / basic-persistent</li> <li>worker / worker-persistent</li> <li>node / node-persistent</li> <li>python / python-persistent</li> <li>nginx / nginx-php / nginx-php-persistent</li> <li>cli / cli-persistent</li> </ul> <p>Adding a volume to any other type will result in an error during a build.</p>"},{"location":"concepts-basics/docker-compose-yml/#additional-service-ports","title":"Additional Service Ports","text":"<p>If you have a service that has many ports, you can use the <code>lagoon.service.usecomposeports: true</code> label to inform Lagoon to use the ports defined on the service.</p> <p>Info</p> <p>Only TCP based ports will be allowed to have a route attached, but UDP ports can be used for internal communications.</p> <p>For example, if you have a <code>basic</code> service that requires ports <code>8080</code> and <code>10009</code>.</p> <ul> <li>port 8080 could be a HTTP based port and you want to route to this using a route in <code>.lagoon.yml</code></li> <li>port 10009 could be used by other services within the environment for internal communications</li> </ul> <p>You would define your service to consume the <code>ports</code> like so:</p> docker-compose.yml service port snippet<pre><code>version: '2'\nservices:\ncustom:\nbuild:\ncontext: internal/testdata/basic/docker\ndockerfile: Dockerfile\nlabels:\nlagoon.type: basic\nlagoon.service.usecomposeports: true\nports:\n- \"8080\"\n- \"10009\"\n</code></pre> <p>The first port in the list of ports will be the \"default\" port for the service, so standard routes like so will route to the default port. An example <code>.lagoon.yml</code> is show how this looks the same as any other standard service route.</p> .lagoon.yml default port route<pre><code>environments:\nmain:\nroutes:\n- custom:\n- example.com\n</code></pre> <p>Alternatively, if you wanted to also have a route specifically for port 10009, you could define the route like so in your <code>.lagoon.yml</code>.</p> .lagoon.yml default and alternative port route<pre><code>environments:\nmain:\nroutes:\n- custom-10009:\n- otherport.example.com\n</code></pre> <p>Info</p> <p>You can define both the \"default\" route and a custom port route together, as long as they have different domains used.</p>"},{"location":"concepts-basics/docker-compose-yml/#multi-container-pods","title":"Multi-Container Pods","text":"<p>Kubernetes and OpenShift don't deploy plain containers. Instead, they deploy pods, with each one or more containers. Usually Lagoon creates a single pod with a container inside for each defined <code>docker-compose</code> service. For some cases, we need to put two containers inside a single pod, as these containers are so dependent on each other that they should always stay together. An example for such a situation is the PHP and NGINX containers that both contain PHP code of a web application like Drupal.</p> <p>For these cases, it is possible to tell Lagoon which services should stay together, which is done in the following way (remember that we are calling containers <code>services</code> because of <code>docker-compose</code>:</p> <ol> <li>Define both services with a <code>lagoon.type</code> that expects two services (in the example this is <code>nginx-php-persistent</code> defined on the <code>nginx</code> and <code>php</code> services).</li> <li>Link the second service with the first one, defining the label <code>lagoon.name</code> of the second one with the first one. (in the example this is done with defining <code>lagoon.name: nginx</code>).</li> </ol> <p>This will cause Lagoon to realize that the <code>nginx</code> and <code>php</code> containers are combined in a pod that will be called <code>nginx</code>.</p> <p>Warning</p> <p>Once you have set the <code>lagooon.name</code> of a service, do NOT rename it. This will cause all kind of havoc in your containers and break things.</p> <p>Lagoon still needs to understand which of the two services is the actual individual service type (<code>nginx</code> and <code>php</code> in this case). It does this by searching for service names with the same name that are given by the type, so <code>nginx-php-persistent</code> expects one service with the name <code>nginx</code> and one with <code>php</code> in the <code>docker-compose.yml.</code> If for any reason you want to use different names for the services, or you need for than one pod with the type <code>nginx-php-persistent</code> there is an additional label <code>lagoon.deployment.servicetype</code> which can be used to define the actual service type.</p> <p>An example:</p> docker-compose.yml<pre><code>nginx:\nbuild:\ncontext: .\ndockerfile: nginx.dockerfile\nlabels:\nlagoon.type: nginx-php-persistent\nlagoon.persistent: /app/web/sites/default/files/\nlagoon.name: nginx # If this isn't present, Lagoon will use the container name, which in this case is nginx.\nlagoon.deployment.servicetype: nginx\nphp:\nbuild:\ncontext: .\ndockerfile: php.dockerfile\nlabels:\nlagoon.type: nginx-php-persistent\nlagoon.persistent: /app/web/sites/default/files/\nlagoon.name: nginx # We want this service to be part of the NGINX pod in Lagoon.\nlagoon.deployment.servicetype: php\n</code></pre> <p>In the example above, the services are named <code>nginx</code> and <code>php</code> (but you can call them whatever you want). The <code>lagoon.name</code> tells Lagoon which services go together - all of the services with the same name go together.</p> <p>In order for Lagoon to realize which one is the <code>nginx</code> and which one is the <code>php</code> service, we define it via <code>lagoon.deployment.servicetype: nginx</code> and <code>lagoon.deployment.servicetype: php</code>.</p>"},{"location":"concepts-basics/docker-compose-yml/#docker-compose-v2-compatibility","title":"Docker Compose v2 compatibility","text":"<p>Bug</p> <p>Note that while using older versions of Docker Compose V2 locally, you may experience some known issues - these have been resolved in later releases (v2.17.3 onwards).</p> <p>The resolution for these errors is usually to update (or install a later version of) the version of Docker Compose you are using, either standalone or by upgrading the version of Docker Desktop you're using.  See the Docker Desktop release notes for more information</p> Docker Compose output indicating depends_on error<pre><code>Failed to solve with frontend dockerfile.v0: failed to create LLB definition: pull access denied, repository does not exist or may require authorization\n\nor\n\nFailed to solve: drupal9-base-cli: pull access denied, repository does not exist or may require authorization: server message: insufficient_scope: authorization failed`\n</code></pre> <ul> <li>These are resolved in Docker Compose v2.13.0.</li> <li>This message means that your build has tried to access a Docker image that hasn't been built yet. As BuildKit builds in parallel, if you have a Docker image that inherits another one (as we do in Drupal with the CLI).</li> <li>You can also use the target field inside the build to reconfigure as a multi-stage build.</li> <li>If you are already running a newer Docker Compose version, this error may be because you're defaulting to using a docker-container build context with buildx. You should make sure that <code>docker buildx ls</code> shows the docker builder as default, not a docker-container based one. Check the docs on Docker buildx here.</li> </ul> Docker Compose output indicating volumes_from error<pre><code>no such service: container:amazeeio-ssh-agent\n</code></pre> <ul> <li>This is resolved in Docker Compose v2.17.3.</li> <li>This message means that the service that provides SSH access into locally running containers runs outside of your Docker Compose stack and is inaccessible.</li> <li>The section can also be removed from your <code>docker-compose.yml</code> file if you don't require SSH access from inside your local environment.</li> </ul>"},{"location":"concepts-basics/docker-compose-yml/#buildkit-and-lagoon","title":"BuildKit and Lagoon","text":"<p>BuildKit is a toolkit for converting source code to build artifacts in an efficient, expressive and repeatable manner.</p> <p>With the release of Lagoon v2.11.0, Lagoon now provides support for more advanced BuildKit-based docker compose builds, and in Lagoon v2.21.0, BuildKit is now enabled by default for all builds. To specifically disable BuildKit for your Project or Environment, add <code>DOCKER_BUILDKIT=0</code> as a build-time variable to your Lagoon project or environment.</p>"},{"location":"concepts-basics/docker-compose-yml/#docker-compose-errors-in-lagoon-builds","title":"Docker Compose Errors in Lagoon Builds","text":"<p>See the Lagoon Build Errors page for how to resolve common build errors with Docker Compose.</p>"},{"location":"concepts-basics/docker-compose-yml/#common-docker-compose-issues","title":"Common Docker Compose Issues","text":"<p>This section outlines some of the more common Docker Compose errors, and how to remedy them. These may present in local development, or as Lagoon Build Errors and Warnings.</p>"},{"location":"concepts-basics/docker-compose-yml/#dual-mapping-keys","title":"Dual Mapping keys","text":"Docker Compose output indicating mapping key error<pre><code>ERR: yaml: unmarshal errors: line 22: mapping key \"&lt;&lt;\" already defined at line 21\n</code></pre> <p>Early releases of the Lagoon examples contained a pair of YAML aliases attached to services to provide volumes and user code. Newer releases of Docker Compose will report this as an error. While all examples have now been updated, there may be some older codebases around that need updating.</p> <p>This error arises from Docker Compose not knowing what it is inserting into the array, so just assuming it may be duplicate.</p> <p>If your <code>docker-compose.yml</code> contains one or more of this (or similar) code blocks, you will be affected.</p> Docker Compose error with dual mapping keys<pre><code>...\n&lt;&lt; : [*default-volumes]\n&lt;&lt; : [*default-user]\n...\n</code></pre> <p>The corrected version combines both aliases into a single mapping key - you'll need to remedy all occurrances.</p> Docker Compose correct insertion of multiple alias mapping keys<pre><code>...\n&lt;&lt; : [*default-volumes, *default-user]\n...\n</code></pre>"},{"location":"concepts-basics/docker-compose-yml/#deprecated","title":"Deprecated","text":"<p>These settings have been deprecated and should be removed from use in your <code>docker-compose.yml</code>.</p> <ul> <li><code>services.[name].labels.lagoon.rollout</code></li> <li><code>services.[name].labels.lagoon.template</code></li> </ul>"},{"location":"concepts-basics/lagoon-yml/","title":".lagoon.yml","text":"<p>The <code>.lagoon.yml</code> file is the central file to set up your project. It contains configuration in order to do the following:</p> <ul> <li>Define routes for accessing your sites.</li> <li>Define pre-rollout tasks.</li> <li>Define post-rollout tasks.</li> <li>Set up SSL certificates.</li> <li>Add cron jobs for environments.</li> </ul> <p>The <code>.lagoon.yml</code> file must be placed at the root of your Git repository.</p>"},{"location":"concepts-basics/lagoon-yml/#general-settings","title":"General Settings","text":""},{"location":"concepts-basics/lagoon-yml/#docker-compose-yaml","title":"<code>docker-compose-yaml</code>","text":"<p>Tells the build script which Docker Compose YAML file should be used, in order to learn which services and containers should be deployed. This defaults to <code>docker-compose.yml</code>, but could be used for a specific Lagoon Docker Compose YAML file if needed.</p>"},{"location":"concepts-basics/lagoon-yml/#environment_variablesgit_sha","title":"<code>environment_variables.git_sha</code>","text":"<p>This setting allows you to enable injecting the deployed Git SHA into your project as an environment variable. By default this is disabled. Setting the value to <code>true</code> sets the SHA as the environment variable <code>LAGOON_GIT_SHA</code>.</p>"},{"location":"concepts-basics/lagoon-yml/#routes","title":"Routes","text":"<p>Routes are used to direct traffic to services. Each service in an environnment can have routes, in which the domain names are defined manually or automatically. The top level <code>routes</code> section applies to all routes in all environments.</p>"},{"location":"concepts-basics/lagoon-yml/#routesautogenerate","title":"<code>routes.autogenerate</code>","text":"<p>This allows you to configure automatically created routes. Manual routes are defined per environment.</p> <ul> <li><code>enabled</code>: Set to <code>false</code> to disable autogenerated routes. Default is <code>true</code>.</li> <li><code>allowPullrequests</code>: Set to <code>true</code> to override <code>enabled: false</code> for pull   requests..lagoon.yml<pre><code>routes:\nautogenerate:\nenabled: false\nallowPullrequests: true\n</code></pre> </li> </ul> <ul> <li><code>insecure</code>: Configures HTTP connections. Default is <code>Allow</code>.<ul> <li><code>Allow</code>: Route will respond to HTTP and HTTPS.</li> <li><code>Redirect</code>: Route will redirect any HTTP request to HTTPS.</li> </ul> </li> </ul> <ul> <li> <p><code>prefixes</code>: Configure prefixes for the autogenerated routes of each   environment. This is useful for things like language prefix domains, or a   multi-domain site using the Drupal <code>domain</code> module.</p> .lagoon.yml<pre><code>  routes:\nautogenerate:\nprefixes:\n- www\n- de\n- fr\n- it\n</code></pre> </li> </ul>"},{"location":"concepts-basics/lagoon-yml/#path-based-routes","title":"Path Based Routes","text":"<p>Path based routes allows you to define paths on a route to a different backend. This can be used if you have a separate backend within the environment that you want to route traffic to on the same domain as another service within your environment.</p> <p>Warning</p> <p>Path based routes can get quite complex and should only be used if you have a need to use them.</p> <p>Here is an example <code>.lagoon.yml</code> file that shows how path based routes can be defined. There is support for global autogenerated routes, per environment autogenerated routes, and custom routes.</p> .lagoon.yml path based routes<pre><code>docker-compose-yaml: docker-compose.yml\n# if an environment has `autogeneratePathRoutes` defined like `environments.main.autogeneratePathRoutes`\n# then thes global lagoon yaml `routes.autogenerate.pathRoutes` are ignored\nroutes:\nautogenerate:\npathRoutes:\n- fromService: nginx\ntoService: node\npath: /api/v1\nenvironments:\nmain:\n# path routes for autogenerated routes for this environment only\nautogeneratePathRoutes:\n- fromService: nginx\ntoService: node\npath: /api/v1\nroutes:\n- nginx:\n- a.example.com:\npathRoutes:\n- toService: node\npath: /api/v1\n</code></pre>"},{"location":"concepts-basics/lagoon-yml/#autogenerated-routes","title":"Autogenerated Routes","text":"<p>It is possible to configure global autogenerated routes, these would apply to ALL environments that this <code>.lagoon.yml</code> file would cover.</p> <p>Additionally, per environment autogenerated route configurations are supported, the fields are the same, just where they are defined is different.</p> .lagoon.yml autogenerated path based routes<pre><code>routes:\nautogenerate:\npathRoutes:\n- fromService: nginx\ntoService: node\npath: /api/v1\nenvironments:\nmain:\n# path routes for autogenerated routes for this environment only\nautogeneratePathRoutes:\n- fromService: nginx\ntoService: node\npath: /api/v1\n</code></pre> <p>Info</p> <p>If the per environment path routes are defined on an environment, any global defined ones are ignored.</p> <p>The supported fields for autogenerated path routes are:</p> <ul> <li><code>fromService</code> - the autogenerated route for the service you want to add the path based route to</li> <li><code>toService</code> - the backend service you want to route to</li> <li><code>path</code> - the path to send to the <code>toService</code></li> </ul>"},{"location":"concepts-basics/lagoon-yml/#custom-routes","title":"Custom Routes","text":"<p>It is possible to turn on path based routes for a specific route too, the following <code>.lagoon.yml</code> example shows how.</p> <p>.lagoon.yml custom route path based routes<pre><code>environments:\nmain:\nroutes:\n- nginx:\n- a.example.com:\npathRoutes:\n- toService: node\npath: /api/v1\n</code></pre> The fields are the same, except that you can omit <code>fromService</code> due to the way that custom routes are defined already associated to a <code>fromService</code> in their normal configuration.</p>"},{"location":"concepts-basics/lagoon-yml/#conditions","title":"Conditions","text":""},{"location":"concepts-basics/lagoon-yml/#autogenerated-route-configurations","title":"Autogenerated Route configurations","text":"<p>If the global path routes for autogenerated routes are defined, but an environment has overrides, the global defined path routes are ignored by that environment.</p>"},{"location":"concepts-basics/lagoon-yml/#additional-service-ports","title":"Additional Service Ports","text":"<p>If the docker compose label <code>lagoon.service.usecomposeports=true</code> has been defined on a service, then the service name with the port number as a suffix to any ports beyond the default (first defined port) must be used as the <code>toService</code>. See Additional Service Ports for more information on this label.</p> <p>The following <code>docker-compose.yml</code> has an example of this label and the ports. This would create the default service port named <code>node</code> referencing port 1234, but also another service <code>node-4321</code>. If you need to create a path based route to port 4321, you would need to define the <code>toService</code> as <code>node-4321</code>.</p> <p>docker-compose.yml path based routes<pre><code>services:\nnginx:\nbuild:\ncontext: .\ndockerfile: basic.dockerfile\nlabels:\nlagoon.type: nginx\nlagoon.service.usecomposeports: true\nports:\n- '8080'\nnode:\nbuild:\ncontext: .\ndockerfile: basic.dockerfile\nlabels:\nlagoon.type: basic\nlagoon.service.usecomposeports: true\nports:\n- '1234'\n- '4321'\n</code></pre> Then you could create a route that would route <code>a.example.com</code> traffic to the <code>nginx</code> service. But any traffic destined for <code>a.example.com/api/v1</code> would go to the <code>node</code> service on port <code>4321</code></p> .lagoon.yml custom route path based routes<pre><code>environments:\nmain:\nroutes:\n- nginx:\n- a.example.com:\npathRoutes:\n- toService: node-4321\npath: /api/v1\n</code></pre>"},{"location":"concepts-basics/lagoon-yml/#urls","title":"URLs","text":"<p>The <code>path</code> defined in the <code>pathRoute</code> will be passed to whichever <code>toService</code> is defined in all URL queries. This means if you're using the <code>path</code> defined as <code>/api/v1</code> for example, then you may need to cater for this in your backend depending on how your backend is built.</p>"},{"location":"concepts-basics/lagoon-yml/#path-types","title":"Path Types","text":"<p>In Lagoon, currently only <code>Prefix</code> type is supported on ingress (see Ingress path types).</p>"},{"location":"concepts-basics/lagoon-yml/#tasks","title":"Tasks","text":"<p>There are different type of tasks you can define, and they differ in when exactly they are executed in a build flow:</p>"},{"location":"concepts-basics/lagoon-yml/#pre-rollout-tasks-pre_rolloutirun","title":"Pre-Rollout Tasks - <code>pre_rollout.[i].run</code>","text":"<p>Here you can specify tasks which will run against your project after all images have been successfully built, but before:</p> <ul> <li>Any running containers are updated with the newly built images.</li> <li>Any other changes are made to your existing environment.</li> </ul> <p>This feature enables you to, for example, create a database dump before updating your application. This can make it easier to roll back in case of a problem with the deploy.</p> <p>Info</p> <p>The pre-rollout tasks run in the existing pods before they are updated, which means:</p> <ul> <li>Changes made to your Dockerfile since the last deploy will not be visible when pre-rollout tasks run.</li> <li>If there are no existing containers (e.g. on the initial deployment of a new environment), pre-rollout tasks are skipped.</li> </ul>"},{"location":"concepts-basics/lagoon-yml/#post-rollout-tasks-post_rolloutirun","title":"Post-Rollout Tasks - <code>post_rollout.[i].run</code>","text":"<p>Here you can specify tasks which need to run against your project, after:</p> <ul> <li>All images have been successfully built.</li> <li>All containers are updated with the new images.</li> <li>All containers are running have passed their readiness checks.</li> </ul> <p>Common uses for post-rollout tasks include running <code>drush updb</code>, <code>drush cim</code>, or clearing various caches.</p> <ul> <li><code>name</code><ul> <li>The name is an arbitrary label for making it easier to identify each task in the logs.</li> </ul> </li> <li><code>command</code><ul> <li>Here you specify what command should run. These are run in the WORKDIR of each container, for Lagoon images this is <code>/app</code>. Keep this in mind if you need to <code>cd</code> into a specific location to run your task.</li> </ul> </li> <li><code>service</code><ul> <li>The service in which to run the task. If following our Drupal example, this will be the CLI container, as it has all your site code, files, and a connection to the database. Typically you do not need to change this.</li> </ul> </li> <li><code>container</code><ul> <li>If the service has multiple containers (e.g. <code>nginx-php</code>), you will need to specify which container in the pod to connect to (e.g. the <code>php</code> container within the <code>nginx</code> pod).</li> </ul> </li> <li><code>shell</code><ul> <li>In which shell the task should be run. By default <code>sh</code> is used, but if the container also has other shells (like <code>bash</code>, you can define it here). This is useful if you want to run some small if/else bash scripts within the post-rollouts. See the example below to learn how to write a script with multiple lines.</li> </ul> </li> <li><code>when</code><ul> <li>The \"when\" clause allows for the conditional running of tasks. It expects an expression that will evaluate to a true/false value which determines whether the task should be run.</li> </ul> </li> </ul> <p>Note: If you would like to disable pre/post-rollout tasks during a deployment, you can set either of the following as buildtime env vars.</p> <ul> <li><code>LAGOON_PREROLLOUT_DISABLED=true</code></li> <li><code>LAGOON_POSTROLLOUT_DISABLED=true</code></li> </ul>"},{"location":"concepts-basics/lagoon-yml/#example-post-rollout-tasks","title":"Example post-rollout tasks","text":"<p>Here are some useful examples of post-rollout tasks that you may want to use or adapt for your projects.</p> <p>Run only if Drupal not installed:</p> .lagoon.yml<pre><code>- run:\n  name: IF no Drupal installed\n  command: | # (1)\nif tables=$(drush sqlq \"show tables like 'node';\") &amp;&amp; [ -z \"$tables\" ]; then\n#### whatever you like\nfi\nservice: cli\n  shell: bash\n</code></pre> <ol> <li>This shows how to create a multi-line command.</li> </ol> <p>Different tasks based on branch name:</p> .lagoon.yml<pre><code>- run:\nname: Different tasks based on branch name\ncommand: |\n### Runs if current branch is not 'production'\nservice: cli\nwhen: LAGOON_GIT_BRANCH != \"production\"\n</code></pre> <p>Run shell script:</p> .lagoon.yml<pre><code>- run:\nname: Run Script\ncommand: './scripts/script.sh'\nservice: cli\n</code></pre> <p>Target specific container in pod:</p> .lagoon.yml<pre><code>- run:\nname: show php env variables\ncommand: env\nservice: nginx\ncontainer: php\n</code></pre> <p>Drupal &amp; Drush 9: Sync database &amp; files from master environment:</p> .lagoon.yml<pre><code>- run:\n    name: Sync DB and Files from master if we are not on master\n    command: |\n# Only if we don't have a database yet\nif tables=$(drush sqlq 'show tables;') &amp;&amp; [ -z \"$tables\" ]; then\ndrush sql-sync @lagoon.master @self # (1)\ndrush rsync @lagoon.master:%files @self:%files -- --omit-dir-times --no-perms --no-group --no-owner --chmod=ugo=rwX\n      fi\nservice: cli\n    when: LAGOON_ENVIRONMENT_TYPE != \"production\"\n</code></pre> <ol> <li>Make sure to use the correct aliases for your project here.</li> </ol>"},{"location":"concepts-basics/lagoon-yml/#backup-retention","title":"Backup Retention","text":""},{"location":"concepts-basics/lagoon-yml/#backup-retentionproductionmonthly","title":"<code>backup-retention.production.monthly</code>","text":"<p>Specify the number of monthly backups Lagoon should retain for your project's production environment(s).</p> <p>The global default is <code>0</code> if this value is not specified.</p>"},{"location":"concepts-basics/lagoon-yml/#backup-retentionproductionweekly","title":"<code>backup-retention.production.weekly</code>","text":"<p>Specify the number of weekly backups Lagoon should retain for your project's production environment(s).</p> <p>The global default is <code>6</code> if this value is not specified.</p>"},{"location":"concepts-basics/lagoon-yml/#backup-retentionproductiondaily","title":"<code>backup-retention.production.daily</code>","text":"<p>Specify the number of daily backups Lagoon should retain for your project's production environment(s).</p> <p>The global default is <code>7</code> if this value is not specified.</p>"},{"location":"concepts-basics/lagoon-yml/#backup-retentionproductionhourly","title":"<code>backup-retention.production.hourly</code>","text":"<p>Specify the number of hourly backups Lagoon should retain for your project's production environment(s).</p> <p>The global default is <code>0</code> if this value is not specified.</p>"},{"location":"concepts-basics/lagoon-yml/#backup-schedule","title":"Backup Schedule","text":""},{"location":"concepts-basics/lagoon-yml/#backup-scheduleproduction","title":"<code>backup-schedule.production</code>","text":"<p>Specify the backup schedule for this project. Accepts cron-compatible syntax with the notable exception that the <code>Minute</code> block must be the letter <code>M</code>. Any other value in the <code>Minute</code> block will cause the Lagoon build to fail. This allows Lagoon to randomly choose a specific minute for these backups to happen, while users can specify the remainder of the schedule down to the hour.</p> <p>The global default is <code>M H(22-2) * * *</code> if this value is not specified.</p> <p>Timezones:</p> <p>Backup schedules use the cluster's local timezone.</p>"},{"location":"concepts-basics/lagoon-yml/#environments","title":"Environments","text":"<p>Environment names match your deployed branches or pull requests. This allows for each environment to have a different config. In our example it will apply to the <code>main</code> and <code>staging</code> environment.</p>"},{"location":"concepts-basics/lagoon-yml/#environmentsnameroutes","title":"<code>environments.[name].routes</code>","text":"<p>Manual routes are domain names that are configured per environment to direct traffic to a service. Since all environments get automatically created routes by default, it is typical that manual routes are only setup for the production environment, using the main domain of the project's website like <code>www.example.com</code>.</p> <p>Tip</p> <p>Since Lagoon has no control over the manual routes, you'll need to ensure the DNS records are configured properly at your DNS provider. You can likely set a <code>CNAME</code> record to point to the automatic route.</p> <p>The first element after the environment is the target service, <code>nginx</code> in our example. This is how we identify which service incoming requests will be sent to.</p> <p>The simplest route is <code>example.com</code>, as seen in our example <code>.lagoon.yml</code> - you can see it has no additional configuration. This will assume that you want a Let's Encrypt certificate for your route and no redirect from HTTPS to HTTP.</p> <p>In the <code>\"www.example.com\"</code> example below, we see three more options (also notice the <code>:</code> at the end of the route and that the route is wrapped in <code>\"</code>, that's important!):</p> .lagoon.yml<pre><code>- \"www.example.com\":\ntls-acme: true\ninsecure: Redirect\nhstsEnabled: true\n</code></pre>"},{"location":"concepts-basics/lagoon-yml/#ssl-configuration-tls-acme","title":"SSL Configuration <code>tls-acme</code>","text":"<p>Warning</p> <p>If you switch from <code>tls-acme: true</code> to <code>tls-acme: false</code> this will remove any previously generated certificates for this route. This could result in unexpected behaviour if you're using an external CDN and do any certificate pinning.</p> <ul> <li><code>tls-acme</code>: Configures automatic TLS certificate generation via Let's Encrypt.   Default is <code>true</code>, set to <code>false</code> to disable automatic certificates.</li> <li><code>insecure</code>: Configures HTTP connections. Default is <code>Allow</code>.<ul> <li><code>Allow</code>: Route will respond to HTTP and HTTPS.</li> <li><code>Redirect</code>: Route will redirect any HTTP request to HTTPS.</li> </ul> </li> <li><code>hstsEnabled</code>: Adds the <code>Strict-Transport-Security</code> header. Default is   <code>false</code>.</li> <li><code>hstsMaxAge</code>: Configures the <code>max-age</code> directive. Default is <code>31536000</code> (1   year).</li> <li><code>hstsPreload</code>: Sets the <code>preload</code> directive. Default is <code>false</code>.</li> <li><code>hstsIncludeSubdomains</code>: Sets the <code>includeSubDomains</code> directive. Default is   <code>false</code>.</li> </ul> <p>Info</p> <p>If you plan to switch from a SSL certificate signed by a Certificate Authority (CA) to a Let's Encrypt certificate, it's best to get in touch with your Lagoon administrator to oversee the transition.</p>"},{"location":"concepts-basics/lagoon-yml/#monitoring-a-specific-path","title":"Monitoring a specific path","text":"<p>Info</p> <p>Lagoon does not provide any monitoring capabilties out of the box, only labels and annotations. Check with your Lagoon administrator if monitoring is supported.</p> <p>Lagoon will add the label <code>lagoon.sh/primaryIngress=true</code> to the first route defined in the <code>.lagoon.yml</code> file for an environment.</p> <p>If a specific path on a route requires monitoring, define <code>monitoring-path</code> with the path to use. Lagoon will add this path to the annotation <code>monitor.stakater.com/overridePath</code> to the route.</p> .lagoon.yml<pre><code>- \"www.example.com\":\nmonitoring-path: \"/bypass-cache\"\n</code></pre> <p>Info</p> <p>The annotation <code>monitor.stakater.com/overridePath</code> used by monitoring-path references the stakater monitoring controller, this is not used by Lagoon. This annotation will eventually be replaced with a <code>lagoon.sh</code> scoped annotation in the future.</p>"},{"location":"concepts-basics/lagoon-yml/#ingress-annotations","title":"Ingress annotations","text":"<p>Warning</p> <p>Route/Ingress annotations are only supported by projects that deploy into clusters that run nginx-ingress controllers! Check with your Lagoon administrator if this is supported.</p> <ul> <li><code>annotations</code> can be a YAML map of annotations supported by the nginx-ingress controller. This is specifically useful for easy redirects and other configurations.</li> </ul>"},{"location":"concepts-basics/lagoon-yml/#restrictions","title":"Restrictions","text":"<p>Some annotations are disallowed or partially restricted in Lagoon. The table below describes these rules.</p> <p>If your <code>.lagoon.yml</code> contains one of these annotations it will cause a build failure.</p> Annotation Notes <code>nginx.ingress.kubernetes.io/auth-snippet</code> Disallowed <code>nginx.ingress.kubernetes.io/configuration-snippet</code> Restricted to <code>rewrite</code>, <code>add_header</code>, <code>set_real_ip</code>, and <code>more_set_headers</code> directives. <code>nginx.ingress.kubernetes.io/modsecurity-snippet</code> Disallowed <code>nginx.ingress.kubernetes.io/server-snippet</code> Restricted to <code>rewrite</code>, <code>add_header</code>, <code>set_real_ip</code>, and <code>more_set_headers</code> directives. <code>nginx.ingress.kubernetes.io/stream-snippet</code> Disallowed <code>nginx.ingress.kubernetes.io/use-regex</code> Disallowed"},{"location":"concepts-basics/lagoon-yml/#ingress-annotations-redirects","title":"Ingress annotations redirects","text":"<p>In this example any requests to <code>example.ch</code> will be redirected to <code>https://www.example.ch</code> while keeping folders or query parameters intact (<code>example.com/folder?query</code> -&gt; <code>https://www.example.ch/folder?query</code>).</p> .lagoon.yml<pre><code>- \"example.ch\":\nannotations:\nnginx.ingress.kubernetes.io/permanent-redirect: https://www.example.ch$request_uri\n- www.example.ch\n</code></pre> <p>You can of course also redirect to any other URL not hosted on Lagoon, this will direct requests to <code>example.de</code> to <code>https://www.google.com</code></p> .lagoon.yml<pre><code>- \"example.de\":\nannotations:\nnginx.ingress.kubernetes.io/permanent-redirect: https://www.google.com\n</code></pre>"},{"location":"concepts-basics/lagoon-yml/#trusted-reverse-proxies","title":"Trusted Reverse Proxies","text":"<p>Warning</p> <p>Kubernetes will only process a single <code>nginx.ingress.kubernetes.io/server-snippet</code> annotation. Please ensure that if you use this annotation on a non-production environment route that you also include the <code>add_header X-Robots-Tag \"noindex, nofollow\";</code> annotation as part of your server-snippet. This is needed to stop robots from crawling development environments as the default server-snippet set to prevent this in development environments in the ingress templates will get overwritten with any <code>server-snippets</code> set in <code>.lagoon.yml</code>.</p> <p>Some configurations involve a reverse proxy (like a CDN) in front of the Kubernetes clusters. In these configurations, the IP of the reverse proxy will appear as the <code>REMOTE_ADDR</code> <code>HTTP_X_REAL_IP</code> <code>HTTP_X_FORWARDED_FOR</code> headers field in your applications. The original IP of the requester can be found in the <code>HTTP_X_ORIGINAL_FORWARDED_FOR</code> header.</p> <p>If you want the original IP to appear in the <code>REMOTE_ADDR</code> <code>HTTP_X_REAL_IP</code> <code>HTTP_X_FORWARDED_FOR</code> headers, you need to tell the ingress which reverse proxy IPs you want to trust:</p> .lagoon.yml<pre><code>- \"example.ch\":\nannotations:\nnginx.ingress.kubernetes.io/server-snippet: |\nset_real_ip_from 1.2.3.4/32;\n</code></pre> <p>This example would trust the CIDR <code>1.2.3.4/32</code> (the IP <code>1.2.3.4</code> in this case). Therefore if there is a request sent to the Kubernetes cluster from the IP <code>1.2.3.4</code> the <code>X-Forwarded-For</code> Header is analyzed and its contents injected into <code>REMOTE_ADDR</code> <code>HTTP_X_REAL_IP</code> <code>HTTP_X_FORWARDED_FOR</code> headers.</p>"},{"location":"concepts-basics/lagoon-yml/#environmentsnametypes","title":"<code>Environments.[name].types</code>","text":"<p>The Lagoon build process checks the <code>lagoon.type</code> label from the <code>docker-compose.yml</code> file in order to learn what type of service should be deployed (read more about them in the documentation of <code>docker-compose.yml</code>).</p> <p>Sometimes you might want to override the type just for a single environment, and not for all of them. For example, if you want a standalone MariaDB database (instead of letting the Service Broker/operator provision a shared one) for your non-production environment called <code>develop</code>:</p> <p><code>service-name: service-type</code></p> <ul> <li><code>service-name</code> is the name of the service from <code>docker-compose.yml</code> you would like to override.</li> <li><code>service-type</code> the type of the service you would like to use in your override.</li> </ul> <p>Example for setting up MariaDB_Galera:</p> .lagoon.yml<pre><code>environments:\ndevelop:\ntypes:\nmariadb: mariadb-single\n</code></pre>"},{"location":"concepts-basics/lagoon-yml/#environmentsnameautogenerateroutes","title":"<code>environments.[name].autogenerateRoutes</code>","text":"<p>This allows for any environments to get autogenerated routes when route autogeneration is disabled.</p> .lagoon.yml<pre><code>routes:\nautogenerate:\nenabled: false\nenvironments:\ndevelop:\nautogenerateRoutes: true\n</code></pre>"},{"location":"concepts-basics/lagoon-yml/#environmentsnamecronjobs","title":"<code>environments.[name].cronjobs</code>","text":"<p>Cron jobs must be defined explicitly for each environment, since it is typically not desirable to run the same ones for all environments. Depending on the defined schedule, cron jobs may run as a Kubernetes native <code>CronJob</code> or as an in-pod cron job via the crontab of the defined service.</p>"},{"location":"concepts-basics/lagoon-yml/#cron-job-example","title":"Cron Job Example","text":".lagoon.yml<pre><code>cronjobs:\n- name: Hourly Drupal Cron\nschedule: \"M * * * *\" # Once per hour, at a random minute.\ncommand: drush cron\nservice: cli\n- name: Nightly Drupal Cron\nschedule: \"M 0 * * *\" # Once per day, at a random minute from 00:00 to 00:59.\ncommand: drush cron\nservice: cli\n</code></pre> <ul> <li><code>name</code>: Any name that will identify the purpose and distinguish it from other   cron jobs.</li> <li> <p><code>schedule</code>: The schedule for executing the cron job. Lagoon uses an extended   version of the crontab format. If you're not sure about the syntax, use a   crontab generator.</p> <ul> <li>You can specify <code>M</code> for the minute, and your cron job will run once per   hour at a random minute (the same minute each hour), or <code>M/15</code> to run it   every 15 mins, but with a random offset from the hour (like   <code>6,21,36,51</code>). It is a good idea to spread out your cron jobs using this   feature, rather than have them all fire off on minute <code>0</code>.</li> <li>You can specify <code>H</code> for the hour, and your cron job will run once per day   at a random hour (the same hour every day), or <code>H(2-4)</code> to run it once   per day within the hours of 2-4.</li> </ul> </li> </ul> <p>Timezones:</p> <ul> <li>The default timezone for cron jobs is UTC.</li> <li>Native cron jobs use the timezone of the node, which is UTC.</li> <li>In-pod cron jobs use the timezone of the defined service, which   can be configured to something other than UTC.</li> </ul> <ul> <li><code>command</code>: The command to execute. This executes in the <code>WORKDIR</code> of the   service. For Lagoon images, this is <code>/app</code>.</li> </ul> <p>Warning</p> <p>Cronjobs may run in-pod, via crontab, which doesn't support multiline   commands. If   you need a complex or multiline cron command, you must put it in a   script that can be used as the command. Consider whether a pre- or post-rollout task would work.</p> <p>Danger</p> <p>Cronjobs run in Kubernetes pods, which means they can be interrupted due to pod rescheduling.   Therefore when creating a cronjob you must ensure that the command can be safely interrupted and re-run at the next cron interval.</p> <ul> <li><code>service</code>: Which service of your project to run the command in. For most   projects, this should be the <code>cli</code> service.</li> </ul>"},{"location":"concepts-basics/lagoon-yml/#polysite","title":"Polysite","text":"<p>In Lagoon, the same Git repository can be added to multiple projects, creating what is called a polysite. This allows you to run the same codebase, but allow for different, isolated, databases and persistent files. In <code>.lagoon.yml</code> , we currently only support specifying custom routes for a polysite project. The key difference from a standard project is that the <code>environments</code> becomes the second-level element, and the project name the top level.</p> <p>To utilize this, you will need to:</p> <ol> <li>Create two (or more) projects in Lagoon, each configured with the same Git URL and production branch, named per your .lagoon.yml (i.e <code>poly-project1</code> and <code>poly-project2</code> below)</li> <li>Add the deploy keys from each project to the Git repository.</li> <li>Configure the webhook for the repository (if required) - you can then push/deploy. Note that a push to the repository will simultaneously deploy all projects/branches for that Git URL.</li> </ol>"},{"location":"concepts-basics/lagoon-yml/#polysite-example","title":"Polysite Example","text":".lagoon.yml<pre><code>poly-project1:\nenvironments:\nmain:\nroutes:\n- nginx:\n- project1.com\npoly-project2:\nenvironments:\nmain:\nroutes:\n- nginx:\n- project2.com\n</code></pre>"},{"location":"concepts-basics/lagoon-yml/#specials","title":"Specials","text":""},{"location":"concepts-basics/lagoon-yml/#api","title":"<code>api</code>","text":"Info <p>If you run directly on amazee.io hosted Lagoon you will not need this key set.</p> <p>With the key <code>api</code> you can define another URL that should be used by the Lagoon CLI and <code>drush</code> to connect to the Lagoon GraphQL API. This needs to be a full URL with a scheme, like: <code>http://localhost:3000</code> This usually does not need to be changed, but there might be situations where your Lagoon administrator tells you to do so.</p>"},{"location":"concepts-basics/lagoon-yml/#ssh","title":"<code>ssh</code>","text":"Info <p>If you run directly on amazee.io hosted Lagoon you will not need this key set.</p> <p>With the key <code>ssh</code> you can define another SSH endpoint that should be used by the Lagoon CLI and <code>drush</code> to connect to the Lagoon remote shell service. This needs to be a hostname and a port separated by a colon, like: <code>localhost:2020</code> This usually does not need to be changed, but there might be situations where your Lagoon administrator tells you to do so.</p>"},{"location":"concepts-basics/lagoon-yml/#container-registries","title":"<code>container-registries</code>","text":"<p>The <code>container-registries</code> block allows you to define your own private container registries to pull custom or private images.</p> <p>To use a private container registry, you will need a <code>username</code>, <code>password</code>, and optionally the <code>url</code> for your registry. If you don't specify a <code>url</code> in your YAML, it will default to using Docker Hub. We also recommend adding a <code>description</code> to your container-registry entries to provide a bit of information about them, some examples are provided.</p> <p>There are 2 ways to define the username and password used for your registry user.</p> <ul> <li>Define them as environment variables in the API</li> <li>Hardcode them in the <code>.lagoon.yml</code> file (we don't recommend this though)</li> </ul>"},{"location":"concepts-basics/lagoon-yml/#environment-variables-method","title":"Environment variables method","text":"<p>Firstly, define the <code>container-registries</code> in your <code>.lagoon.yml</code>, you don't need to define the username or password here. If you do use a custom registry, you will still need to provide the <code>url</code>, for example:</p> .lagoon.yml<pre><code>container-registries:\ndocker-hub:\ndescription: \"username and password consumed from environment variables for the default docker.io registry\"\nmy-custom-registry:\ndescription: \"username and password consumed from environment variables for my custom registry\"\nurl: my.own.registry.com\nanother-custom-registry:\ndescription: \"password consumed from environment variables for my other registry\"\nusername: myotheruser\nurl: my.other.registry.com\n</code></pre> <p>If you do define a username in the <code>.lagoon.yml</code> you don't need to add the associated variable, but if you do add the variable, the value of the variable will be prefered.</p> <p>Next, create environment variables in the Lagoon API with the type <code>container_registry</code>:</p> <ul> <li><code>lagoon add variable -p &lt;project_name&gt; -N &lt;registry_username_variable_name&gt; -V &lt;username_goes_here&gt; -S container_registry</code></li> <li><code>lagoon add variable -p &lt;project_name&gt; -N &lt;registry_password_variable_name&gt; -V &lt;password_goes_here&gt; -S container_registry</code></li> <li>(see more on Environment Variables)</li> </ul> <p>The name of the variables should be the name of the registry defined in the <code>.lagoon.yml</code> file, it should be:</p> <ul> <li>uppercase</li> <li>replace <code>-</code> with <code>_</code></li> <li>have the prefix <code>REGISTRY_</code></li> <li>have the suffix of <code>_USERNAME</code> or <code>_PASSWORD</code>.</li> </ul> <p>Some examples of this are:</p> <ul> <li><code>dockerhub</code> would become <code>REGISTRY_DOCKERHUB_USERNAME</code> and <code>REGISTRY_DOCKERHUB_PASSWORD</code></li> <li><code>docker-hub</code> would become <code>REGISTRY_DOCKER_HUB_USERNAME</code> and <code>REGISTRY_DOCKER_HUB_PASSWORD</code></li> <li><code>my-custom-registry</code> would become <code>REGISTRY_MY_CUSTOM_REGISTRY_USERNAME</code> and <code>REGISTRY_MY_CUSTOM_REGISTRY_PASSWORD</code></li> <li>lowercased versions may still work if there are no <code>-</code> in them, for example <code>REGISTRY_dockerhub_USERNAME</code>, but the uppercased version will always be chosen above others.</li> </ul> Legacy method of defining registry password <p>A previous method that allowed for the password to be defined using an environment variable, with the name of the variable to be defined in the <code>.lagoon.yml</code> file like so: .lagoon.yml<pre><code>container-registries:\ndocker-hub:\nusername: dockerhubuser\npassword: MY_DOCKER_HUB_PASSWORD\n</code></pre></p> <p>the username needs to be provided in this file too, unless the supported variable for defining the username is provided.</p> <p>The variable can then ba added to the API like so</p> <ul> <li><code>lagoon add variable -p &lt;project_name&gt; -N MY_DOCKER_HUB_PASSWORD -V &lt;password_goes_here&gt; -S container_registry</code></li> </ul> <p>While we will continue to support this method, it may be deprecated in the future, we will ensure that warnings are presented within builds to give time for users to change to the supported method.</p> <p>If a supported variable password is provided, it will be used instead of the custom named variable.</p>"},{"location":"concepts-basics/lagoon-yml/#hardcoded-values-method","title":"Hardcoded values method","text":"<p>You can also define the password directly in the <code>.lagoon.yml</code> file in plain text, however we do not recommend this.</p> .lagoon.yml<pre><code>container-registries:\ndocker-hub:\ndescription: \"the default docker.io registry credentials\"\nusername: dockerhubuser\npassword: MySecretPassword\nmy-custom-registry:\ndescription: \"the credentials for my own registry\"\nurl: my.own.registry.com\nusername: mycustomuser\npassword: MyCustomSecretPassword\n</code></pre>"},{"location":"concepts-basics/lagoon-yml/#consuming-a-custom-or-private-container-registry-image","title":"Consuming a custom or private container registry image","text":"<p>To consume a custom or private container registry image, you need to update the service inside your <code>docker-compose.yml</code> file to use a build context instead of defining an image:</p> .docker-compose.yml<pre><code>services:\nmariadb:\nbuild:\ncontext: .\ndockerfile: Dockerfile.mariadb\n</code></pre> <p>Once the <code>docker-compose.yml</code> file has been updated to use a build, you need to create the <code>Dockerfile.&lt;service&gt;</code> and then set your private image as the <code>FROM &lt;repo&gt;/&lt;name&gt;:&lt;tag&gt;</code></p> .lagoon.yml<pre><code>FROM dockerhubuser/my-private-database:tag\n</code></pre>"},{"location":"concepts-basics/lagoon-yml/#example-lagoonyml","title":"Example <code>.lagoon.yml</code>","text":"<p>This is an example <code>.lagoon.yml</code> which showcases all possible settings. You will need to adapt it to your project.</p> .lagoon.yml<pre><code>docker-compose-yaml: docker-compose.yml\nenvironment_variables:\ngit_sha: 'true'\ntasks:\npre-rollout:\n- run:\nname: drush sql-dump\ncommand: mkdir -p /app/web/sites/default/files/private/ &amp;&amp; drush sql-dump --ordered-dump --gzip --result-file=/app/web/sites/default/files/private/pre-deploy-dump.sql.gz\nservice: cli\npost-rollout:\n- run:\nname: drush cim\ncommand: drush -y cim\nservice: cli\nshell: bash\n- run:\nname: drush cr\ncommand: drush -y cr\nservice: cli\nroutes:\nautogenerate:\ninsecure: Redirect\nenvironments:\nmain:\nroutes:\n- nginx:\n- example.com\n- example.net\n- \"www.example.com\":\ntls-acme: true\ninsecure: Redirect\nhstsEnabled: true\n- \"example.ch\":\nannotations:\nnginx.ingress.kubernetes.io/permanent-redirect: https://www.example.ch$request_uri\n- www.example.ch\ntypes:\nmariadb: mariadb\ncronjobs:\n- name: drush cron\nschedule: \"M * * * *\" # This will run the cron once per hour.\ncommand: drush cron\nservice: cli\nstaging:\ncronjobs:\n- name: drush cron\nschedule: \"M * * * *\" # This will run the cron once per hour.\ncommand: drush cron\nservice: cli\nfeature/feature-branch:\ncronjobs:\n- name: drush cron\nschedule: \"H * * * *\" # This will run the cron once per hour.\ncommand: drush cron\nservice: cli\n</code></pre>"},{"location":"concepts-basics/lagoon-yml/#deprecated","title":"Deprecated","text":"<p>These settings have been deprecated and should be removed from use in your <code>.lagoon.yml</code>.</p> <ul> <li><code>routes.autogenerate.insecure</code><p>The <code>None</code> option is equivalent to <code>Redirect</code>.</p> </li> </ul> <ul> <li><code>environments.[name].monitoring_urls</code></li> <li><code>environments.[name].rollouts</code></li> <li><code>environments.[name].routes.[service].[route].hsts</code></li> <li><code>environments.[name].routes.[service].[route].insecure</code><p>The <code>None</code> option is equivalent to <code>Redirect</code>.</p> </li> </ul> <ul> <li><code>environments.[name].templates</code></li> </ul>"},{"location":"concepts-basics/building-blocks/deploy-targets/","title":"Deploy Targets","text":"<p>A deploy target tells Lagoon where to deploy your project - into which cluster. A project may have one or more deploy targets, for example, one for production and one for testing. Deploy targets have options that allow for automatic deployment of defined branches, as well as pull requests.</p> <p>Read more about deploy targets.</p>"},{"location":"concepts-basics/building-blocks/groups/","title":"Groups","text":"<p>Groups are made up of users who have roles. An organization can have one or more groups. Each project can be assigned one or more groups. Groups can be assigned to multiple projects. Groups are created independently of projects, and then assigned to them.</p> <p>Organizations have a quota to limit the number of groups assigned to it. If you need to change the quota, please contact your Lagoon administrator.</p>"},{"location":"concepts-basics/building-blocks/notifications/","title":"Notifications","text":"<p>Notifications are how Lagoon informs users about what's going on with their projects. There are several types of notifications:</p> <ul> <li>Slack</li> <li>RocketChat</li> <li>Email</li> <li>Webhook</li> <li>Microsoft Teams</li> </ul> <p>A project can have one or more notifications. Organizations have a notification quota for all of their projects. Notifications are created independently of projects, and can then be assigned to one or more projects.</p> <p>Learn how to add notifications step-by-step in the Lagoon UI.</p> <p>Learn how to add notifications notifications via the API.</p>"},{"location":"concepts-basics/building-blocks/organizations/","title":"Organizations","text":"<p>An organization is an entity which can contain one or more projects, groups, users, and notifications. Organizations help control access to projects, making it easy to create groups, add and remove users, and assign groups to projects.</p> <p>Organizations add a layer of structure to help imitate life - for example, you may be a project manager who creates an organization to reflect the team working on a specific site. So that organization would contain the project or projects that make up that site, all of the people who need access to work on the site as users in a group called developers, and maybe another group of people who just need access to Lagoon to view the site and any issues, called viewers, each with the appropriate roles.</p> <p>Organizations have a quota to limit the number of projects, groups, notifications, and environments that can be assigned to it. If you need to change this quota, please contact your Lagoon administrator.</p> <p>Learn more about how to interact with Organizations.</p>"},{"location":"concepts-basics/building-blocks/projects/","title":"Projects","text":"<p>A project is an application that lives on Lagoon. An organization may have one or more projects. A project may have one or more users, notifications, and at least one deploy target. Organizations have a quota to limit the amount of projects that can be created.</p>"},{"location":"concepts-basics/building-blocks/roles/","title":"Roles","text":"<p>Roles determine a user's access to projects. Users are given roles in groups and organizations.</p> <p>Members of groups can be given the following roles:</p> <ul> <li>Guest</li> <li>Reporter</li> <li>Developer</li> <li>Maintainer</li> <li>Owner</li> </ul> <p>These roles and their permissions are described in more depth here: Role-Based Access Control.</p> <p>Members of organizations can be given the following roles:</p> <ul> <li>Org Owner</li> <li>Org Viewer</li> </ul> <p>Changing Quotas</p> <p>If you need to change quotas, please contact your Lagoon administrator.</p> <p>An organization owner can do everything to do with administering an organization aside from changing quotas. They can add and delete users, groups, projects, deploy targets, and notifcations</p> <p>An organization viewer is a read-only role that can only view the organization, but cannot make any changes or additions. They can view the projects, groups, users, and notifications within an organization but cannot modify them.</p> <p>A user who has not been assigned as an owner or viewer cannot see the organization.</p>"},{"location":"concepts-basics/building-blocks/users/","title":"Users","text":"<p>A user is a Lagoon account that allows you to interact with the Lagoon system. A user may belong to one or more organizations and groups, and each group may have a different role granting various permissions. Organizations, groups, and roles grant users access to projects.</p> <p>Read more about user roles.</p>"},{"location":"contributing-to-lagoon/api-debugging/","title":"API Debugging","text":"<p>1 . Ensure the <code>dev</code> script at <code>services/api/package.json</code> includes the following:</p> services/api/package.json<pre><code>node --inspect=0.0.0.0:9229\n</code></pre> <p>2 . Update <code>docker-compose.yml</code> to map the <code>dist</code> folder and expose the <code>9229</code> port:</p> docker-compose.yml<pre><code>  api:\nimage: ${IMAGE_REPO:-lagoon}/api\ncommand: yarn run dev\nvolumes:\n- ./services/api/src:/app/services/api/src\n- ./services/api/dist:/app/services/api/dist\ndepends_on:\n- api-db\n- local-api-data-watcher-pusher\n- keycloak\nports:\n- '3000:3000'\n- '9229:9229'\n</code></pre> <p>3 . Add the following to <code>.vscode/launch.json</code>:</p> .vscode/launch.json<pre><code>{\n// Use IntelliSense to learn about possible attributes.\n// Hover to view descriptions of existing attributes.\n// For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387.\n\"version\": \"0.2.0\",\n\"configurations\": [\n{\n\"name\": \"Docker: Attach to Node\",\n\"type\": \"node\",\n\"request\": \"attach\",\n\"port\": 9229,\n\"address\": \"localhost\",\n\"outFiles\": [\"${workspaceRoot}/app/services/api/dist/**/*.js\"],\n\"localRoot\": \"${workspaceFolder}/services/api\",\n\"remoteRoot\": \"/app/services/api\",\n\"sourceMaps\": true,\n\"protocol\": \"inspector\"\n}\n]\n}\n</code></pre> <p>4 . Rebuild/restart the containers:</p> Restart containers<pre><code>rm build/api &amp;&amp; make build/api &amp;&amp; docker compose restart api\n</code></pre> <p>5 . Restart VScode.</p>"},{"location":"contributing-to-lagoon/developing-lagoon/","title":"Developing Lagoon","text":"<p>Development of Lagoon locally can now be performed on a local Kubernetes cluster, or via Docker Compose (as a fallback).</p> <p>Note</p> <p>The full Lagoon stack relies on a range of upstream projects which are currently incompatible with ARM-based architectures, such as the the M1/M2 Apple Silicon-based machines. For this reason, running or developing <code>lagoon-core</code> or <code>lagoon-remote</code> locally on these architectures is not currently supported. See https://github.com/uselagoon/lagoon/issues/3189 for more information.</p>"},{"location":"contributing-to-lagoon/developing-lagoon/#required-command-line-tools","title":"Required command line tools","text":"<p>Some tools are required that are not downloaded/linked by the makefile, some systems may have these installed already.</p> <ul> <li><code>envsubst</code></li> <li><code>wget</code></li> </ul> <p>Mac users can install these via brew:</p> Text Only<pre><code>brew install wget gettext\n</code></pre>"},{"location":"contributing-to-lagoon/developing-lagoon/#docker","title":"Docker","text":"<p>Docker must be installed to build and run Lagoon locally.</p>"},{"location":"contributing-to-lagoon/developing-lagoon/#install-docker-and-docker-compose","title":"Install Docker and Docker Compose","text":"<p>Please check the official docs for how to install Docker.</p> <p>Docker Compose is included in Docker for Mac installations. For Linux installations see the directions here.</p>"},{"location":"contributing-to-lagoon/developing-lagoon/#configure-docker","title":"Configure Docker","text":"<p>You will need to update your insecure registries in Docker. Read the instructions here on how to do that. We suggest adding the entire local IPv4 Private Address Spaces to avoid unnecessary reconfiguration between Kubernetes and Docker Compose. e.g. <code>\"insecure-registries\" : [\"172.16.0.0/12\",\"192.168.0.0/16\"],</code></p>"},{"location":"contributing-to-lagoon/developing-lagoon/#allocate-enough-docker-resources","title":"Allocate Enough Docker Resources","text":"<p>Running a Lagoon, Kubernetes, or Docker cluster on your local machine consumes a lot of resources. We recommend that you give your Docker host a minimum of 8 CPU cores and 12GB RAM.</p>"},{"location":"contributing-to-lagoon/developing-lagoon/#macos-docker-networking","title":"MacOS Docker Networking","text":"<p>Unfortunately Docker for Mac runs Docker inside a lightweight VM. This makes some of the functionality that Linux users enjoy, unusable in MacOS. That functionality is the ability to route to container IP addresses within the docker networks directly. On MacOS this is not possible out of the box.</p> <p>You can install the following package https://github.com/chipmk/docker-mac-net-connect. What this software does is create a tunnel between the Docker VM and the host and creates routes for the internal docker networks to the host. This allows you to access the Lagoon services in the docker network that is exposed inside of k3d the same way users developing on Linux would.</p> Text Only<pre><code># Install via Homebrew\n$ brew install chipmk/tap/docker-mac-net-connect\n# Run the service and register it to launch at boot\n$ sudo brew services start chipmk/tap/docker-mac-net-connect\n# Stop the service\n$ sudo brew services stop chipmk/tap/docker-mac-net-connect\n</code></pre>"},{"location":"contributing-to-lagoon/developing-lagoon/#build-lagoon-locally","title":"Build Lagoon Locally","text":"<p>Warning</p> <p>Only consider building Lagoon this way if you intend to develop features or functionality for it, or want to debug internal processes. We will also be providing instruction to install Lagoon without building it (i.e. by using the published releases).</p> <p>We're using <code>make</code> (see the Makefile) in order to build the needed Docker images, configure Kubernetes and run tests.</p> <p>We have provided a number of routines in the Makefile to cover most local development scenarios. Here we will run through a complete process.</p>"},{"location":"contributing-to-lagoon/developing-lagoon/#build-images","title":"Build images","text":"<ol> <li>Here <code>-j8</code> tells make to run 8 tasks in parallel to speed the build up. Adjust as necessary.</li> <li>We have set <code>SCAN_IMAGES=false</code> as a default to not scan the built images for vulnerabilities. If set to true, a <code>scan.txt</code> file will be created in the project root with the scan output.</li> </ol> Build images<pre><code>make -j8 build\n</code></pre>"},{"location":"contributing-to-lagoon/developing-lagoon/#deploy-a-local-lagoon-development-stack-without-test-suites","title":"Deploy a local Lagoon development stack without test suites","text":"<p>The make file offers a command that allows you to spin up Lagoon inside of a k3d cluster locally and explore its functionality.</p> <p>Using the following make command will create a k3d cluster and install any dependencies (ingress, harbor, s3 compatible storage, etc) that are required by Lagoon. It will then build any images required and push them to the registry, and install <code>lagoon-core</code>, <code>lagoon-remote</code>, and <code>lagoon-build-deploy</code> charts.</p> Deploy local stack<pre><code>make k3d/local-stack\n</code></pre> <p>Warning</p> <p>Once you have a running <code>make k3d/local-stack</code> you should not run it again. There are other targets that can be run safely after the initial stack is running.</p> <p>At the end of the process, the command will provide some useful information that will help to get you up and running and able to log in to the UI or using the API with tools like the Lagoon CLI.</p> <p>Warning</p> <p>This can take some time to complete as it will install a lot of components necessary to make Lagoon work. This includes things like ingress-nginx, harbor, and all the additional services to make exploring Lagoon easy.</p>"},{"location":"contributing-to-lagoon/developing-lagoon/#local-development-certificates","title":"Local development certificates","text":"<p>The local stack deploys with a locally generated CA certificate. This certificate is used by the local stack to provision certificates for services deployed in the local stack.</p> <p>The certificate <code>local-dev/certificates/rootCA.pem</code> is generated automatically when starting the local stack, along with the key. These are stored locally, and ignored by git. Don't share them!</p> <p>When accessing components of the stack (ui, api, keycloak, anything deployed), you may be presented with certificate warnings. If you have <code>mkcert</code> installed, you can use the following target to install the generated certificate into your computers trust store.</p> Text Only<pre><code>make install-ca\n\n# uninstall if required\nmake uninstall-ca\n</code></pre> <p>For information on <code>mkcert</code>, see https://github.com/FiloSottile/mkcert#installation.</p> <p>Alternatively, you can manually add the generated certificate into your browsers website trusts. You can use your favorite search engine for how to do this, each browser is a little bit different.</p>"},{"location":"contributing-to-lagoon/developing-lagoon/#local-stack-setup-options","title":"Local stack setup options","text":"<p>There are a number of variables that can be used with <code>make k3d/local-stack</code> that can enable or disable certain options when setting up the initial cluster.</p>"},{"location":"contributing-to-lagoon/developing-lagoon/#dbaas-providers","title":"DBaaS providers","text":"<p>There are some Database as a Service (DBaaS) providers that are installed by default, to speed up time with a local stack, or for compatability reasons, you can disable them individually.</p> Deploy local stack without specific provider<pre><code># disable all of them\nmake k3d/local-stack INSTALL_DBAAS_PROVIDERS=false\n# just disable mongodb\nmake k3d/local-stack INSTALL_MONGODB_PROVIDER=false\n# just disable mariadb\nmake k3d/local-stack INSTALL_MARIADB_PROVIDER=false\n# just disable postgres\nmake k3d/local-stack INSTALL_POSTGRES_PROVIDER=false\n# other combinations as needed\nmake k3d/local-stack INSTALL_POSTGRES_PROVIDER=false  INSTALL_MONGODB_PROVIDER=false\n</code></pre> <p>Info</p> <p>If you're using an arm64 based operating system (MacOS M* for example), then <code>INSTALL_MONGODB_PROVIDER</code> will always be set to <code>false</code>, this is because there are some issues due to MongoDB not working properly.</p>"},{"location":"contributing-to-lagoon/developing-lagoon/#build-deploy-image-version","title":"Build-deploy-image version","text":"<p>By default, the image used will be <code>uselagoon/build-deploy-image:edge</code>. This image will be pulled, and then re-tagged and pushed into the registry that is deployed as part of the local-stack.</p> <p>If you want to run a custom version of the build-deploy-tool in a local-stack, you can checkout the build-deploy-tool repo, work on your changes and use <code>make docker-build</code> in that repository to build the image. Then in the local-stack repository use <code>make k3d/push-local-build-image</code> to push it to the local-stack registry.</p> Change build-deploy-image to a working local version<pre><code># in `uselagoon/build-deploy-tool` branch\nmake docker-build\n\n# in `uselagoon/lagoon` branch\nmake k3d/push-local-build-image\n</code></pre> <p>To change back to the default image you can use <code>make k3d/push-stable-build-image</code>. This target also supports using <code>BUILD_DEPLOY_IMAGE_REPO</code> and <code>BUILD_DEPLOY_IMAGE_TAG</code> variables, allowing you to push any other image from other repositories and tags.</p> Change build-deploy-image to a specific tag<pre><code>make k3d/push-stable-build-image BUILD_DEPLOY_IMAGE_TAG=pr-123\n</code></pre>"},{"location":"contributing-to-lagoon/developing-lagoon/#stable-chart-installation-and-upgrading-chart-versions","title":"Stable chart installation and upgrading chart versions","text":"<p>It is possible to run the local-stack as it would be directly from a stable chart version.</p> <p>This can be useful if you want to get a Lagoon up and running without having to build all the service images.</p> <p>Using this feature also allows for upgrading from a stable chart version to a feature chart.</p>"},{"location":"contributing-to-lagoon/developing-lagoon/#all-stable-components","title":"All stable components","text":"<p>This will install lagoon-core, lagoon-remote, and lagoon-build-deploy charts with their current stable versions</p> Deploy local stack with stable core, remote, build-deploy<pre><code>make k3d/stable-local-stack\n\n# which is a shorter target for\nmake k3d/local-stack INSTALL_STABLE_LAGOON=true\n</code></pre>"},{"location":"contributing-to-lagoon/developing-lagoon/#specific-stable-components","title":"Specific stable components","text":"<p>It's also possible to selectively install certain components with a stable version. Anything not set to <code>true</code> will install the version from the charts repository.</p> Deploy local stack with stable versions<pre><code>make k3d/local-stack INSTALL_STABLE_CORE=true\nmake k3d/local-stack INSTALL_STABLE_REMOTE=true\nmake k3d/local-stack INSTALL_STABLE_BUILDDEPLOY=true\n</code></pre>"},{"location":"contributing-to-lagoon/developing-lagoon/#upgrading-lagoon-components-only","title":"Upgrading Lagoon components only","text":"<p>Once you have a <code>k3d/local-stack</code> running, if you need to re-run the Lagoon installation to test an upgrade you can use the following target.</p> Install or upgrade all Lagoon components<pre><code>make k3d/install-lagoon\n\n# or shortcut to a stable lagoon\nmake k3d/stable-install-lagoon\n# which is a shorter target for\nmake k3d/install-lagoon INSTALL_STABLE_LAGOON=true\n</code></pre> <p>This can be used if you started an initial <code>local-stack</code> with stable chart versions. Running this without any of the <code>INSTALL_STABLE_X</code> flags, will build and install Lagoon with the versions of images in the current <code>uselagoon/lagoon</code> branch, and install using the charts from the repository listed under <code>CHARTS_REPOSITORY</code> and <code>CHARTS_TREEISH</code>.</p> <p>You can also retain any stable versions of other components if you wish, for example only installing the bleeding edge lagoon-core. This can be used to verify an upgrade path from a stable chart</p> Install all stable then upgrade Lagoon core only<pre><code># install a local stack with all stable components\nmake k3d/local-stack INSTALL_STABLE_LAGOON=true\n# optionally checkout a new version of the charts branch if there are changes made\nmake k3d/checkout-charts\n\n# make changes to a lagoon service or the lagoon-core charts and re-install lagoon\nmake k3d/install-lagoon INSTALL_STABLE_REMOTE=true INSTALL_STABLE_BUILDDEPLOY=true\n</code></pre> <p>Warning</p> <p>The upstream charts <code>CHARTS_REPOSITORY</code> and <code>CHARTS_TREEISH</code> are only checked out when the cluster is first created and installed. If you make changes to the charts branch, you can use <code>make k3d/dev</code> to clone and checkout the latest changes. Otherwise the existing checked out chart branch would be used. <code>make k3d/dev</code> is a short cut to <code>make k3d/checkout-charts</code> and <code>make k3d/install-lagoon</code>, which can also be used independently.</p> <p>Warning</p> <p>Starting a <code>make k3d/local-stack</code> without any stable versions, then using <code>make k3d/install-lagoon</code> with <code>INSTALL_STABLE_X</code> flags may result in a broken Lagoon installation, however, this can be useful for verifying any downgrade or rollback paths.</p>"},{"location":"contributing-to-lagoon/developing-lagoon/#harbor-or-unauthenticated-registry","title":"Harbor or unauthenticated registry","text":"<p>Currently, Harbor does not have any arm64 based images. This means local-stack will not install Harbor on an arm64 based system. Instead an unauthenticed registry will be installed, and <code>lagoon-remote</code> will be configured to use this. This has the downsides that you won't be able to properly test any Harbor integrations on arm64 based systems for now.</p> <p>If you want to skip installing Harbor entirely, even if your system is not arm based, you can use the following</p> <p>```bash title=\"Harbor disabled INSTALL_UNAUTHENTICATED_REGISTRY=true Text Only<pre><code>!!! info\n    There are [open issues](https://github.com/goharbor/harbor/issues/20074) in the harbor repository with people requesting support for arm, and even a [harbor-arm repository](https://github.com/goharbor/harbor-arm), which appears to be abandoned.\n\n#### Backups / K8up\n\nIt is possible to start the local-stack with k8up support for `backup.appuio.ch/v1alpha`(v1) and `k8up.io/v1`(v2) for testing and validating that backups work, or verifying changes to backup functionality.\n\nThere are 2 make variables you can set, by default k8up is not installed.\n\nIf you wish to install k8up, you can change the following in the Makefile (or use it on every make command you run). This will install both versions of k8up into the local-stack in separate namespaces. The version that `lagoon-remote` will use is defined with a separate variable\n\n```bash title=\"K8up enabled\nINSTALL_K8UP=true\n</code></pre></p> <p>If k8up is installed, the default version that will be supported by <code>lagoon-remote</code> will be <code>k8up.io/v1</code>(v2) of k8up. This means any builds will create resources with this CRD version. You can change the version that <code>lagoon-remote</code> uses by specifying <code>v1</code> or <code>v2</code>.</p> <p>```bash title=\"K8up version BUILD_DEPLOY_CONTROLLER_K8UP_VERSION=v2 Text Only<pre><code>Installing k8up will also configure `lagoon-core` to start the `backup-handler` service so that the entire system works locally.\n\n### Run the Lagoon test-suite\n\nIf you're developing new functionality in Lagoon and want to make sure the tests complete, you can run the entire test suite using the following options.\n\n1. Start Lagoon test routine using the defaults in the Makefile \\(all tests\\).\n\n```bash title=\"Start tests\"\nmake k3d/test\n# or use retest if you already have a local stack running\nmake k3d/retest\n</code></pre></p> <p>Warning</p> <p>There are a lot of tests configured to run by default - please consider only testing locally the minimum that you need to ensure functionality. This can be done by specifying or removing tests from the <code>TESTS</code> variable in the Makefile.</p> <p>This process will:</p> <ol> <li>Download the correct versions of the local development tools if not installed - <code>k3d</code>, <code>kubectl</code>, <code>helm</code>, <code>jq</code>.</li> <li>Update the necessary Helm repositories for Lagoon to function.</li> <li>Ensure all of the correct images have been built in the previous step.</li> <li>Create a local K3D cluster, which provisions an entire running Kubernetes cluster in a local Docker container. This cluster has been configured to talk to a provisioned image registry that we will be pushing the built Lagoon images to. It has also been configured to allow access to the host filesystem for local development.</li> <li>Clone Lagoon from https://github.com/uselagoon/lagoon-charts (use the <code>CHARTS_TREEISH</code> variable in the Makefile to control which branch if needed).</li> <li>Install the Harbor Image registry into the K3D cluster and configure its ingress and access properly.</li> <li>Docker will push the built images for Lagoon into the Harbor image registry.</li> <li>It then uses the Makefile from lagoon-charts to perform the rest of the setup steps.</li> <li>A suitable ingress controller is installed - we use the NGINX Ingress Controller.</li> <li>A local NFS server provisioner is installed to handle specific volume requests - we use one that handles Read-Write-Many operations (RWX).</li> <li>Lagoon Core is then installed, using the locally built images pushed to the cluster-local Image Registry, and using the default configuration, which may exclude some services not needed for local testing. The installation will wait for the API and Keycloak to come online.</li> <li>The DBaaS providers are installed - MariaDB, PostgreSQL and MongoDB. This step provisions standalone databases to be used by projects running locally, and emulates the managed services available via cloud providers (e.g. Cloud SQL, RDS or Azure Database).</li> <li>Lagoon Remote is then installed, and configured to talk to the Lagoon Core, databases and local storage. The installation will wait for this to complete before continuing.</li> <li>To provision the tests, the Lagoon Test chart is then installed, which provisions a local Git server to host the test repositories, and pre-configures the Lagoon API database with the default test users, accounts and configuration. It then performs readiness checks before starting tests.</li> <li>Lagoon will run all the tests specified in the TESTS variable in the Makefile. Each test creates its own project &amp; environments, performs the tests, and then removes the environments &amp; projects. The test runs are output to the console log in the <code>lagoon-test-suite-*</code> pod, and can be accessed one test per container.</li> </ol> <p>Ideally, all of the tests pass and it's all done!</p>"},{"location":"contributing-to-lagoon/developing-lagoon/#view-the-test-progress-and-your-local-cluster","title":"View the test progress and your local cluster","text":"<p>The test routine creates a local Kubeconfig file (called <code>kubeconfig.k3d.lagoon</code> in the root of the project, that can be used with a Kubernetes dashboard, viewer or CLI tool to access the local cluster. We use tools like Lens, Octant, kubectl or Portainer in our workflows. Lagoon Core and the tests build in the <code>lagoon-core</code> namespace, Remote is installed in the <code>Lagoon</code> namespace. Each lagoon test environment creates its own namespace to run, so make sure to use the correct context when inspecting.</p> <p>In order to use kubectl with the local cluster, you will need to use the correct Kubeconfig. This can be done for every command or it can be added to your preferred tool:</p> kubeconfig.k3d.lagoon<pre><code>KUBECONFIG=./kubeconfig.k3d.lagoon kubectl get pods -n lagoon\n</code></pre> <p>The Helm charts used to build the local Lagoon are cloned into a local folder and symlinked to <code>lagoon-charts.k3d.lagoon</code> where you can see the configuration. We'll cover how to make easy modifications later in this documentation.</p>"},{"location":"contributing-to-lagoon/developing-lagoon/#interact-with-your-local-lagoon-cluster","title":"Interact with your local Lagoon cluster","text":"<p>The Makefile includes a few simple routines that will make interacting with the installed Lagoon simpler:</p>"},{"location":"contributing-to-lagoon/developing-lagoon/#port-forwarding","title":"Port forwarding","text":"<p>Clusters deployed by this makefile will provide loadbalancers and individual IPs, but if you choose to you can port-forward some services using the following</p> Create local ports<pre><code>make k3d/port-forwards\n</code></pre> <p>This will create local ports to expose the UI (6060), API (7070) and Keycloak (8080). Note that this logs to <code>stdout</code>, so it should be performed in a secondary terminal/window.</p>"},{"location":"contributing-to-lagoon/developing-lagoon/#lagoon-credentialsinformation","title":"Lagoon credentials/information","text":"<p>This will retrieve the necessary credentials to interact with the Lagoon.</p> Retrieve admin creds<pre><code>make k3d/get-lagoon-details\n</code></pre> <ul> <li>The JWT is an admin-scoped token for use as a bearer token with your local GraphQL client. See more in our GraphQL documentation.</li> <li>There is a token for use with the \"admin\" user in Keycloak, who can access all users, groups, roles, etc.</li> </ul> <p>It is also possible to get the command snippet to add the configuration for the local-stack to your lagoon-cli.</p> Retrieve admin creds<pre><code>make k3d/get-lagoon-cli-details\n</code></pre>"},{"location":"contributing-to-lagoon/developing-lagoon/#rebuild-lagoon-core-and-push-images","title":"Rebuild Lagoon core and push images","text":"<p>This will checkout <code>CHARTS_REPOSITORY</code> and <code>CHARTS_TREEISH</code> again, then build and re-push the images listed in <code>KIND_SERVICES</code> with the correct tag, and redeploy the lagoon charts. This is useful for testing small changes to Lagoon services, but does not support \"live\" development. You will need to rebuild these images locally first, e.g <code>rm build/api &amp;&amp; make build/api</code>.</p> Re-push images<pre><code>make k3d/dev\n</code></pre>"},{"location":"contributing-to-lagoon/developing-lagoon/#patch-with-local-nodejs","title":"Patch with local node.js","text":"<p>This will build the typescript services, using your locally installed Node.js (it should be &gt;16.0). It will then:</p> Build typescript services<pre><code>make k3d/local-dev-patch\n</code></pre> <ul> <li>Mount the \"dist\" folders from the Lagoon services into the correct lagoon-core pods in Kubernetes</li> <li>Redeploy the lagoon-core chart with the services running with <code>nodemon</code>watching the code for changes</li> <li>This will facilitate \"live\" development on Lagoon.</li> <li>Note that occasionally the pod in Kubernetes may require redeployment for a change to show. Clean any build artifacts from those services if you're rebuilding different branches with <code>git clean -dfx</code> as the dist folders are ignored by Git.</li> </ul>"},{"location":"contributing-to-lagoon/developing-lagoon/#install-simple-logging-support","title":"Install simple Logging support","text":"<p>This will create a standalone OpenDistro for Elasticsearch cluster in your local Docker, and configure Lagoon to dispatch all logs (Lagoon and project) to it, using the configuration in lagoon-logging.</p> Initiate logging<pre><code>make k3d/local-dev-logging\n</code></pre>"},{"location":"contributing-to-lagoon/developing-lagoon/#re-run-specific-tests","title":"Re run specific tests","text":"<p>This will re-run a suite of tests (defined in the <code>TESTS</code> variable) against the existing cluster. It will re-push the images needed for tests (tests, local-git, and the data-watcher-pusher). You can specify tests to run by passing the TESTS variable inline.</p> Re-run tests.<pre><code>make k3d/retest\n# OR\nmake k3d/retest TESTS='[features-kubernetes]'\n</code></pre> <p>If updating a test configuration, the tests image will need to be rebuilt and pushed, e.g <code>rm build/tests &amp;&amp; make build/tests &amp;&amp; make k3d/push-images IMAGES='tests' &amp;&amp; make k3d/retest TESTS='[api]'</code></p>"},{"location":"contributing-to-lagoon/developing-lagoon/#push-images","title":"Push images","text":"<p>This will push all the images up to the image registry. Specifying <code>IMAGES</code> will tag and push specific images.</p> Push all images<pre><code>make k3d/push-images\n# OR\nmake k3d/push-images IMAGES='tests local-git'\n</code></pre>"},{"location":"contributing-to-lagoon/developing-lagoon/#tear-down","title":"Tear down","text":"<p>This will remove the K3D Lagoon cluster from your local Docker.</p> Remove cluster<pre><code>make k3d/clean\n</code></pre>"},{"location":"contributing-to-lagoon/developing-lagoon/#additional-cleanup-commands","title":"Additional cleanup commands","text":"<p>There could be a number of old resources hanging around after you've run the stack a few times, you can use the following to clean up further.</p> Cleanup commands<pre><code># remove any unused generated kubeconfigs\nmake k3d/clean-k3dconfigs\n\n# remove any unused cloned chart directories\nmake k3d/clean-charts\n\n# combination of tear down, remove any unused cloned chart directories, and unused generated kubeconfigs\nmake k3d/clean-all\n</code></pre>"},{"location":"contributing-to-lagoon/developing-lagoon/#ansible","title":"Ansible","text":"<p>The Lagoon test uses Ansible to run the test suite. Each range of tests for a specific function has been split into its own routine. If you are performing development work locally, select which tests to run, and update the <code>$TESTS</code> variable in the Makefile to reduce the concurrent tests running.</p> <p>The configuration for these tests is held in three services:</p> <ul> <li><code>tests</code> is the Ansible test services themselves.  The local testing routine runs each individual test as a separate container within a test-suite pod.  These are listed below.</li> <li><code>local-git</code> is a Git server hosted in the cluster that holds the source files for the tests.  Ansible pulls and pushes to this repository throughout the tests</li> <li><code>api-data-watcher-pusher</code> is a set of GraphQL mutations that pre-populates local Lagoon with the necessary Kubernetes configuration, test user accounts and SSH keys, and the necessary groups and notifications.  Note that this will wipe local projects and environments on each run.</li> </ul> <p>The individual routines relevant to Kubernetes are:</p> <ul> <li><code>active-standby-kubernetes</code> runs tests to check active/standby in Kubernetes.</li> <li><code>api</code> runs tests for the API - branch/PR deployment, promotion.</li> <li><code>bitbucket</code>, <code>gitlab</code> and <code>github</code> run tests for the specific SCM providers.</li> <li><code>drupal-php74</code> runs a single-pod MariaDB, MariaDB DBaaS and a Drush-specific test for a Drupal 8/9 project (<code>drupal-php73</code> doesn't do the Drush test).</li> <li><code>drupal-postgres</code> runs a single-pod PostgreSQL and a PostgreSQL DBaaS test for a Drupal 8 project.</li> <li><code>elasticsearch</code> runs a simple NGINX proxy to an Elasticsearch single-pod.</li> <li><code>features-variables</code> runs tests that utilize variables in Lagoon.</li> <li><code>features-kubernetes</code> runs a range of standard Lagoon tests, specific to Kubernetes.</li> <li><code>features-kubernetes-2</code> runs more advanced kubernetes-specific tests - covering multi-project and subfolder configurations.</li> <li><code>nginx</code>, <code>node</code> and <code>python</code> run basic tests against those project types.</li> <li><code>node-mongodb</code> runs a single-pod MongoDB test and a MongoDB DBaaS test against a Node.js app.</li> </ul>"},{"location":"contributing-to-lagoon/developing-lagoon/#local-development","title":"Local Development","text":"<p>Most services are written in Node.js. As many of these services share similar Node.js code and Node.js packages, we're using a feature of Yarn, called Yarn workspaces. Yarn workspaces need a <code>package.json</code> in the project's root directory that defines the workspaces.</p> <p>The development of the services can happen directly within Docker. Each container for each service is set up in a way that its source code is mounted into the running container (see <code>docker-compose.yml</code>). Node.js itself is watching the code via <code>nodemon</code> , and restarts the Node.js process automatically on a change.</p>"},{"location":"contributing-to-lagoon/developing-lagoon/#lagoon-commons","title":"lagoon-commons","text":"<p>The services not only share many Node.js packages, but also share actual custom code. This code is within <code>node-packages/lagoon-commons</code>. It will be automatically symlinked by Yarn workspaces. Additionally, the <code>nodemon</code> of the services is set up in a way that it checks for changes in <code>node-packages</code> and will restart the node process automatically.</p>"},{"location":"contributing-to-lagoon/developing-lagoon/#troubleshooting","title":"Troubleshooting","text":""},{"location":"contributing-to-lagoon/developing-lagoon/#i-cant-build-a-docker-image-for-any-nodejs-based-service","title":"I can't build a Docker image for any Node.js based service","text":"<p>Rebuild the images via:</p> Rebuild images<pre><code>    make clean\n    make build\n</code></pre>"},{"location":"contributing-to-lagoon/developing-lagoon/#i-get-errors-about-missing-node_modules-content-when-i-try-to-build-run-a-nodejs-based-image","title":"I get errors about missing <code>node_modules</code> content when I try to build / run a Node.js based image","text":"<p>Make sure to run <code>yarn</code> in Lagoon's root directory, since some services have common dependencies managed by <code>yarn</code> workspaces.</p>"},{"location":"contributing-to-lagoon/developing-lagoon/#i-get-an-error-resolving-the-nipio-domains","title":"I get an error resolving the <code>nip.io</code> domains","text":"Error<pre><code>Error response from daemon: Get https://registry.172.18.0.2.nip.io/v2/: dial tcp: lookup registry.172.18.0.2.nip.io: no such host\n</code></pre> <p>This can happen if your local resolver filters private IPs from results. You can work around this by editing <code>/etc/resolv.conf</code> and adding a line like <code>nameserver 8.8.8.8</code> at the top to use a public resolver that doesn't filter results.</p>"},{"location":"contributing-to-lagoon/developing-lagoon/#i-want-to-be-able-to-test-email-in-a-demo-environment-using-the-lagoon-built-in-ssmtp-configuration-entrypoints","title":"I want to be able to test email in a demo environment using the lagoon built in ssmtp configuration entrypoints","text":"<p>This k3d cluster installs a mail catching service that is available at <code>mxout.lagoon.svc:25</code> within the cluster (it also has a web interface <code>make k3d/get-lagoon-details</code> for details). Some images in lagoon support <code>SSMTP_MAILHUB</code> variable, which can be added to a project using the lagoon-cli, or the following graphql via the API.</p> Text Only<pre><code>addOrUpdateEnvVariableByName(\n    input: {\n        project: \"lagoon-demo\"\n        scope: RUNTIME\n        name: \"SSMTP_MAILHUB\"\n        value: \"mxout.lagoon.svc:25\"\n    }\n) {\n    id\n}\n</code></pre>"},{"location":"contributing-to-lagoon/developing-lagoon/#example-workflows","title":"Example workflows","text":"<p>Here are some development scenarios and useful workflows for getting things done.</p>"},{"location":"contributing-to-lagoon/developing-lagoon/#add-tests","title":"Add tests","text":"<p>An example</p> <ol> <li>Deploy the lagoon and run the test you're modifying.</li> </ol> Deploy Lagoon<pre><code>make k3d/test TESTS=[features-variables]\n</code></pre> <ol> <li>Edit <code>tests/tests/features-variables.yaml</code> and add a test case.</li> <li>Rebuild the <code>tests</code> image.</li> </ol> Build tests<pre><code>rm build/tests\nmake -j8 build/tests\n</code></pre> <ol> <li>Push the new <code>tests</code> image into the cluster registry.</li> </ol> Push test image<pre><code>make k3d/push-images IMAGES=tests\n</code></pre> <ol> <li>Rerun the tests.</li> </ol> Re-run tests<pre><code>make k3d/retest TESTS=[features-variables]\n</code></pre>"},{"location":"contributing-to-lagoon/developing-lagoon/#k3d-internal-dns-cluster-service-resolution-issues","title":"k3d internal DNS cluster service resolution issues","text":"<p>If you encounter an issue whe running a local-stack that seems to indicate that the cluster can't resolve an internal service within the cluster, you may need to run br_netfilter<pre><code>sudo modprobe br_netfilter\n</code></pre></p>"},{"location":"contributing-to-lagoon/developing-lagoon/#k3d-containers-reporting-too-many-open-files","title":"k3d containers reporting too many open files","text":"<p>You may need to bump <code>fs.inotify.max_user_instances</code> and <code>fs.inotify.max_user_watches</code></p> sysctl<pre><code>sudo sysctl fs.inotify.max_user_instances=8192\nsudo sysctl fs.inotify.max_user_watches=524288\n</code></pre>"},{"location":"contributing-to-lagoon/documentation/","title":"Contributing to Lagoon documentation","text":"<p>We really value anything that you can offer us!</p> <p>We've made building and viewing the documentation really straightforward, and the team is always ready to help out with reviews or pointers.</p> <p>We use mkdocs with the excellent Material theme.</p>"},{"location":"contributing-to-lagoon/documentation/#viewing-and-updating-docs-locally","title":"Viewing and updating docs locally","text":"<p>From the root of the Lagoon repository (you'll need Docker), run:</p> Get local docs up and running.<pre><code>make docs/serve\n</code></pre> <p>This will start a development server on http://127.0.0.1:8000, configured to live-reload on any updates.</p> <p>The customized Docker image contains all the necessary extensions.</p> <p>Alternatively, to run the <code>mkdocs</code> package locally, you'll need to install mkdocs, and then install all of the necessary plugins.</p> Install mkdocs<pre><code>pip3 install -r docs/requirements.txt\nmkdocs serve\n</code></pre>"},{"location":"contributing-to-lagoon/documentation/#editing-in-the-cloud","title":"Editing in the Cloud","text":"<p>Each documentation page also has an \"edit\" pencil in the top right, that will take you to the correct page in the Git repository.</p> <p>Feel free to contribute here, too - you can always use the built-in github.dev web-based editor. It's got basic Markdown previews, but none of the mkdocs loveliness.</p>"},{"location":"contributing-to-lagoon/documentation/#how-we-deploy-documentation","title":"How we deploy documentation","text":"<p>We use the Deploy MkDocs GitHub Action to build all main branch pushes, and trigger a deployment of the <code>gh-pages</code> branch.</p>"},{"location":"contributing-to-lagoon/releasing/","title":"Releasing Lagoon","text":"<p>Lagoon has a number of moving parts, making releases quite complicated!</p>"},{"location":"contributing-to-lagoon/releasing/#lagoon-core-tags-and-testing","title":"Lagoon-core - tags and testing","text":"<ol> <li>Ensure all the identified pull requests have been merged into main branch for:<ul> <li>uselagoon/lagoon</li> <li>uselagoon/build-deploy-tool</li> <li>uselagoon/lagoon-ui</li> </ul> </li> <li>Once you are confident, push the next tag in sequence (minor or patch) to the main branch in the format v2.MINOR.PATCH as per semver. This will trigger a Jenkins build, visible at https://ci.lagoon.sh/blue/organizations/jenkins/lagoon/branches</li> <li>Whilst this is building, push lightweight tags to the correct commits on <code>lagoon-ui</code> and <code>build-deploy-tool</code> in the format core-v2.MINOR.PATCH. Note that there are no other tags or releases on build-deploy-tool, but lagoon-ui also has it's own semver releases that are based on it's features.</li> <li>Once the build has completed successfully in Jenkins, head to https://github.com/uselagoon/lagoon-charts to prepare the charts release</li> <li> <p>In the chart.yaml for the <code>lagoon-core</code> and <code>lagoon-test</code> charts, update the following fields:</p> <ul> <li>version: This is the next \"minor\" release of the chart - we usually use minor for a corresponding lagoon-core release</li> <li>appVersion: This is the actual tag of the released lagoon-core</li> <li>artifacthub.io/changes: All that's needed are the two lines in the below snippet, modified for the actual appVersion being released.</li> </ul> <p>sample chart.yml snippets<pre><code># This is the chart version. This version number should be incremented each\n# time you make changes to the chart and its templates, including the app\n# version.\n# Versions are expected to follow Semantic Versioning (https://semver.org/)\nversion: 1.28.0\n# This is the version number of the application being deployed. This version\n# number should be incremented each time you make changes to the application.\n# Versions are not expected to follow Semantic Versioning. They should reflect\n# the version the application is using.\nappVersion: v2.14.2\n# This section is used to collect a changelog for artifacthub.io\n# It should be started afresh for each release\n# Valid supported kinds are added, changed, deprecated, removed, fixed and security\nannotations:\nartifacthub.io/changes: |\n- kind: changed\ndescription: update Lagoon appVersion to v2.14.2\n</code></pre> Only lagoon-core and lagoon-test charts are updated as a result of a lagoon-core release. Follow the lagoon-remote process if there are any other changes.</p> </li> <li> <p>Create a PR for this chart release, and the Github Actions suite will undertake a full suite of tests:</p> <ul> <li>Lint and test charts - matrix: performs a lint and chart install against the current tested version of Kubernetes</li> <li>Lint and test charts - current: performs a lint and chart install against previous/future versions of Kubernetes</li> <li>Lagoon tests: runs the full series of ansible tests against the release.</li> </ul> <p>Usually, failures in the lint and test charts are well explained (missing/misconfigured chart settings). If a single Lagoon test failes, it may just need re-running. If multiple failures occur, they will need investigating.</p> </li> </ol> <p>Once those tests have all passed successfully, you can proceed with creating the releases:</p>"},{"location":"contributing-to-lagoon/releasing/#lagoon-core-releases-and-release-notes","title":"Lagoon-core - releases and release notes","text":"<ol> <li>In uselagoon/lagoon create a release from the tag pushed earlier. Use the \"Generate release notes\" button to create the changelog. Look at previous releases for what we include in the release - and the lagoon-images link will always be the most recent released version. Note that the links to the charts, lagoon-ui and build-deploy-tool can all be filled in now, but the links won't work until the future steps. Mark this as the latest release and Publish the release.</li> <li>In uselagoon/build-deploy-tool create a release from the tag pushed earlier. Use the \"Generate release notes\" button to create the changelog - ensuring that the last core-v2.X tag is used, not any other tag. Look at previous releases for what we include in the release - Mark this as the latest release and Publish the release.</li> <li>In uselagoon/lagoon-ui create a release from the tag pushed earlier. Use the \"Generate release notes\" button to create the changelog - ensuring that the last core-v2.X tag is used, not any other tag. Look at previous releases for what we include in the release - Mark this as the latest release and Publish the release.</li> <li>In uselagoon/lagoon-charts merge the successful PR, this will create the lagoon-core and lagoon-test releases for you. Edit the resulting lagoon-core chart release to note the corresponding lagoon release in the title and text box, as per previous releases.</li> </ol>"},{"location":"contributing-to-lagoon/releasing/#lagoon-remote-releases-and-release-notes","title":"Lagoon-remote - releases and release notes","text":"<p>Lagoon remote has a release cycle separate to Lagoon Core, and as such, can be released anytime that a dependency sub-chart or service is updated.</p>"},{"location":"contributing-to-lagoon/tests/","title":"Tests","text":"<p>All of our tests are written with Ansible and mostly follow this approach:</p> <ol> <li>They create a new Git repository.</li> <li>Add and commit some files from a list of files (in <code>tests/files</code>) into this Git repository.</li> <li>Push this Git repository to a Git server (either locally or on GitHub).</li> <li>Send a trigger to a trigger service (for example a webhook to the webhook handler, which is the same as a real webhook that would be sent).</li> <li>Starts to monitor the URL at which the test would expect something to happen (like deploying a Node.js app that has the Git branch as an HTML text).</li> <li>Compares the result on the URL with the expected result.</li> </ol> <p>Lagoon is mostly tested in 3 different ways:</p>"},{"location":"contributing-to-lagoon/tests/#1-locally","title":"1. Locally","text":"<p>During local development, the best way to test is locally. All tests are started via <code>make</code>. Make will download and build all the required dependencies.</p> Make tests<pre><code>make tests\n</code></pre> <p>This will run all defined tests. If you only want to run a subset of the tests, run <code>make tests-list</code> to see all existing tests and run them individually.</p> <p>For example, <code>make tests/node</code> will run the Node.js Docker images tests.</p> <p>In order to actually see what is happening inside the microservices, we can use <code>make logs</code>:</p> Make logs<pre><code>make logs\n</code></pre> <p>Or only for a specific service:</p> Make logs<pre><code>make logs service=webhook-handler\n</code></pre>"},{"location":"contributing-to-lagoon/tests/#2-automated-integration-testing","title":"2. Automated integration testing","text":"<p>In order to test pull requests that are created against Lagoon, we have a fully automatic integration test running on a dedicated Jenkins instance: https://ci.lagoon.sh. It is defined inside the <code>.Jenkinsfile</code>, and runs automatically for every pull request that is opened.</p> <p>This will build all images, start a Kubernetes cluster and run a series of tests.</p> <p>The tests can be found here:</p> <ul> <li>https://ci.lagoon.sh/blue/organizations/jenkins/lagoon/activity</li> </ul>"},{"location":"docker-images/commons/","title":"Commons","text":"<p>The Lagoon <code>commons</code> Docker image. Based on the official Alpine images.</p> <p>This image has no functionality itself, but is instead a base image, intended to be extended and utilized to build other images. All the alpine-based images in Lagoon inherit components from commons.</p>"},{"location":"docker-images/commons/#included-tooling","title":"Included tooling","text":"<ul> <li><code>docker-sleep</code> - standardized one-hour sleep</li> <li><code>fix-permissions</code> - automatically fixes permissions on a given directory to all group read-write</li> <li><code>wait-for</code> - a small script to ensure that services are up and running in the correct order - based off https://github.com/eficode/wait-for</li> <li><code>entrypoint-readiness</code> - checks to make sure that long-running entrypoints have completed</li> <li><code>entrypoints</code> - a script to source all entrypoints under /lagoon/entrypoints/* in an alphabetical/numerical order</li> </ul>"},{"location":"docker-images/commons/#included-entrypoints","title":"Included entrypoints","text":"<p>The list of default entrypoints in this image is found at https://github.com/uselagoon/lagoon-images/tree/main/images/commons/lagoon/entrypoints. Subsequent downstream images will also contribute entrypoints under <code>/lagoon</code> that are run in the eventual image.</p>"},{"location":"docker-images/deprecated-images/","title":"Deprecated Images","text":"<p>From time to time, the Lagoon team may need to mark images as deprecated.</p> <p>This is conveyed in a \"sh.lagoon.image.deprecated\" . It can be viewed in Docker Desktop, via a <code>docker inspect</code> command, or in future releases of Lagoon, highlighted in a build.</p> <p></p> <p>If the image has a suggested replacement, it will be conveyed in a \"sh.lagoon.image.deprecated.suggested\" label attached the deprecated image.</p> docker inspect output showing deprecated image<pre><code>$ docker inspect amazeeio/mongo:latest\n...\n{\n...\n  \"sh.lagoon.image.deprecated.status\": \"replaced\",\n  \"sh.lagoon.image.deprecated.suggested\": \"docker.io/uselagoon/mongo-4\"\n}\n</code></pre>"},{"location":"docker-images/deprecated-images/#changing-the-image","title":"Changing the image","text":"<p>In all cases, changing to a suggested or updated image will require a change in your codebase. Any reference to the image in a Dockerfile, or in your docker-compose.yml will need to be updated.</p>"},{"location":"docker-images/deprecated-images/#reasons-for-deprecating","title":"Reasons for deprecating","text":"<p>We have three main reasons for deprecating an image:</p>"},{"location":"docker-images/deprecated-images/#replaced","title":"Replaced","text":"<p>An image will be marked as \"replaced\" when the image reference needs to be changed. This could be because of a naming change, a repository change, or a versioning change. In these cases a new image will usually be recommended for use instead, and using it should be a fairly easy switch.</p> <p>Some examples of this are:</p> <ul> <li>the migration from <code>amazeeio/{image}</code> to <code>uselagoon/{image}</code> - these images should be identical</li> <li>the versioning of an image from <code>uselagoon/mongo</code> to <code>uselagoon/mongo-4</code> - these images should be identical</li> </ul>"},{"location":"docker-images/deprecated-images/#end-of-life","title":"End of Life","text":"<p>An image will be marked as \"endoflife\" when the version published is no longer actively supported or maintained upstream. In these cases a new image will usually be recommended for use instead, but upgrading to it may require updating some of your application code, so should always be tested thoroughly. Also note that any suggested image may also be marked as endoflife (especially if the upstream moves quickly)</p> <p>Some examples of this are:</p> <ul> <li>PHP 8.0 reached EOL in November 2023, and any <code>uselagoon/php-8.0-{variant}</code> image will suggest <code>uselagoon/php-8.3-{variant}</code> as it is the current latest release of PHP. Upgrades here may be straightforward as it's within a major version.</li> <li>Python 2.7 reached EOL in January 2020, and the <code>uselagoon/php-2.7</code> images will suggest <code>uselagoon/python-3.12</code> as it is the current latest release of Python. Upgrades here will be complex, owing to it being a major version change.</li> </ul>"},{"location":"docker-images/deprecated-images/#discontinued","title":"Discontinued","text":"<p>An image will be marked as \"discontinued when the variant is no longer being published by the Lagoon team (although the upstream may still be supported). In these cases a replacement image may be suggested, but any migration will be involved, and require updating of application code, client libraries, data directories etc, or removal of functionality completely.</p> <ul> <li>A CKAN variant of Python 2.7 image <code>uselagoon/python-2.7-ckan</code> stopped being published in August 2021 and no replacement is suggested.</li> <li>An AthenaPDF image <code>uselagoon/athenapdf-service</code> stopped being published in October 2022 and no replacement image is suggested.</li> <li>An Elasticsearch 7 image <code>uselagoon/elasticsearch-7</code> stopped being published in April 2023 due to licensing concerns, and although images may suggest <code>uselagoon/opensearch-2</code> - any upgrade here will be extremely involved.</li> </ul>"},{"location":"docker-images/deprecated-images/#amazeeio-image-variants","title":"\"amazeeio/\" image variants","text":"<p>Historically, all Lagoon images were dual published to the uselagoon and amazeeio Docker Hub organizations.</p> <p>In August 2024, we ceased this dual-publishing model, and have used the deprecated image tooling to suggest the correct replacements.</p> <p>We encourage anyone still using the <code>amazeeio</code> variants to switch to the <code>uselagoon</code> variants as soon as possible.</p> <p>As well as being easier for us to maintain, the uselagoon versions:</p> <ul> <li>Are routinely published and updated. No <code>amazeeio</code> image will be updated beyond July 2024.</li> <li>Are published as multi-architecture images by default, so will work natively on Linux, Windows or MacOS machines.</li> <li>Are free from any rate-limit restrictions, as the <code>uselagoon</code> organization is Docker Sponsored Open Source</li> </ul>"},{"location":"docker-images/mariadb/","title":"MariaDB","text":"<p>MariaDB is the open source successor to MySQL.</p> <p>The Lagoon <code>MariaDB</code> image Dockerfile. Based on the official packages <code>mariadb</code> and <code>mariadb-client</code> provided by the the upstream Alpine image.</p> <p>This Dockerfile is intended to be used to set up a standalone MariaDB database server.</p> <ul> <li>10.4 (available for compatibility only, no longer officially supported) - <code>uselagoon/mariadb-10.4</code></li> <li>10.5 Dockerfile (Alpine 3.14 Support until May 2023) - <code>uselagoon/mariadb-10.5</code></li> <li>10.6 Dockerfile (Alpine 3.16 Support until May 2024) - <code>uselagoon/mariadb-10.6</code></li> <li>10.11 Dockerfile (Alpine 3.18 Support until May 2025) - <code>uselagoon/mariadb-10.11</code></li> </ul> <p>Info</p> <p>As these images are not built from the upstream MariaDB images, their support follows a different cycle - and will only receive updates as long as the underlying Alpine images receive support - see https://alpinelinux.org/releases/ for more information. In practice, most MariaDB users will only be running these containers locally - the production instances will use the Managed Cloud Databases provided by the DBaaS Operator</p>"},{"location":"docker-images/mariadb/#lagoon-adaptions","title":"Lagoon adaptions","text":"<p>The default exposed port of MariaDB containers is port <code>3306</code>.</p> <p>To allow Lagoon to select the best way to run the MariaDB container, use <code>lagoon.type: mariadb</code> - this allows the DBaaS operator to provision a cloud database if available in the cluster. Use <code>lagoon.type: mariadb-single</code> to specifically request MariaDB in a container. Persistent storage is always provisioned for MariaDB containers at <code>/var/lib/mysql</code>.</p> <p>This image is prepared to be used on Lagoon. There are therefore some things already done:</p> <ul> <li>Folder permissions are automatically adapted with <code>fix-permissions</code>, so this image will work with a random user.</li> <li><code>readiness-probe.sh</code> script to check when MariaDB container is ready.</li> </ul>"},{"location":"docker-images/mariadb/#docker-composeyml-snippet","title":"<code>docker-compose.yml</code> snippet","text":"docker-compose.yml<pre><code>    mariadb:\nimage: uselagoon/mariadb-10.6-drupal:latest\nlabels:\n# tells Lagoon this is a MariaDB database\nlagoon.type: mariadb\nports:\n# exposes the port 3306 with a random local port, find it with `docker compose port mariadb 3306`\n- \"3306\"\nvolumes:\n# mounts a named volume at the default path for MariaDB\n- db:/var/lib/mysql\n</code></pre>"},{"location":"docker-images/mariadb/#included-tools","title":"Included tools","text":"<ul> <li><code>mysqltuner.pl</code> - Perl script useful for database parameter tuning.</li> <li><code>mysql-backup.sh</code> - Script for automating the daily MySQL backups on development environment.</li> <li><code>pwgen</code> - Utility to generate random and complex passwords.</li> </ul>"},{"location":"docker-images/mariadb/#included-mycnf-configuration-file","title":"Included <code>my.cnf</code> configuration file","text":"<p>The image ships a default MariaDB configuration file, optimized to work on Lagoon. Some options are configurable via environment variables.</p>"},{"location":"docker-images/mariadb/#environment-variables","title":"Environment Variables","text":"Environment Variable Default Description MARIADB_DATABASE lagoon Database name created at startup. MARIADB_USER lagoon Default user created at startup. MARIADB_PASSWORD lagoon Password of default user created at startup. MARIADB_ROOT_PASSWORD Lag00n MariaDB root user's password. MARIADB_CHARSET utf8mb4 Set the server charset. MARIADB_COLLATION utf8mb4_bin Set server collation. MARIADB_MAX_ALLOWED_PACKET 64M Set the <code>max_allowed_packet</code> size. MARIADB_INNODB_BUFFER_POOL_SIZE 256M Set the MariaDB InnoDB buffer pool size. MARIADB_INNODB_BUFFER_POOL_INSTANCES 1 Number of InnoDB buffer pool instances. MARIADB_INNODB_LOG_FILE_SIZE 64M Size of InnoDB log file. MARIADB_LOG_SLOW (not set) Variable to control the save of slow queries. MARIADB_LOG_QUERIES (not set) Variable to control the save of ALL queries. BACKUPS_DIR /var/lib/mysql/backup Default path for databases backups. MARIADB_DATA_DIR /var/lib/mysql Path of the MariaDB data dir, be careful, changing this can occur data loss! MARIADB_COPY_DATA_DIR_SOURCE (not set) Path which the entrypoint script of mariadb will use to copy into the defined <code>MARIADB_DATA_DIR</code>, this can be used for prepopulating the MariaDB with a database. The scripts expects actual MariaDB data files and not a sql file! Plus it only copies data if the destination does not already have a mysql datadir in it. <p>If the <code>LAGOON_ENVIRONMENT_TYPE</code> variable is set to <code>production</code>, performances are set accordingly by using <code>MARIADB_INNODB_BUFFER_POOL_SIZE=1024</code> and <code>MARIADB_INNODB_LOG_FILE_SIZE=256</code>.</p>"},{"location":"docker-images/mongodb/","title":"MongoDB","text":"<p>MongoDB is a general purpose, document-based, distributed database built for modern application developers and for the cloud era. MongoDB is a document database, which means it stores data in JSON-like documents.</p> <ul> <li>from mongodb.com</li> </ul>"},{"location":"docker-images/mongodb/#supported-versions","title":"Supported Versions","text":"<p>4.0 Dockerfile - <code>uselagoon/mongo-4</code></p> <p>This Dockerfile is intended to be used to set up a standalone MongoDB database server.</p>"},{"location":"docker-images/mongodb/#lagoon-adaptions","title":"Lagoon adaptions","text":"<p>This image is prepared to be used on Lagoon. There are therefore some things already done:</p> <ul> <li>Folder permissions are automatically adapted with <code>fix-permissions</code>, so this image will work with a random user, and therefore also on Kubernetes or OpenShift.</li> </ul>"},{"location":"docker-images/mysql/","title":"MySQL","text":"<p>MySQL is a widely used, open-source relational database management system (RDBMS).</p> <p>The Lagoon <code>MySQL</code> image Dockerfile. Based on the official upstream docker image <code>mysql</code> (Oracle Linux variant).</p> <p>This Dockerfile is intended to be used to set up a standalone MySQL database server, intended for use in Local Development</p> <ul> <li>8.0 Dockerfile (Extended Support until April 2026) - <code>uselagoon/mysql-8.0</code></li> <li>8.4 Dockerfile (Extended Support until April 2032) - <code>uselagoon/mysql-8.4</code></li> </ul> <p>Info</p> <p>These images are not intended as drop-in alernatives to MariaDB images, and as such, may require customization to run in local development environments</p>"},{"location":"docker-images/mysql/#lagoon-adaptions","title":"Lagoon adaptions","text":"<p>The default exposed port of MySQL containers is port <code>3306</code>.</p> <p>To allow Lagoon to select the best way to run the MySQL container, use <code>lagoon.type: mariadb</code> - this allows the DBaaS operator to provision a cloud database if available in the cluster. Use <code>lagoon.type: mariadb-single</code> to specifically request MySQL in a container. Persistent storage is always provisioned for MySQL containers at <code>/var/lib/mysql</code>.</p> <p>This image is prepared to be used on Lagoon. There are therefore some things already done:</p> <ul> <li>Folder permissions are automatically adapted with <code>fix-permissions</code>, so this image will work with a random user.</li> <li><code>readiness-probe.sh</code> script to check when MySQL container is ready.</li> </ul>"},{"location":"docker-images/mysql/#docker-composeyml-snippet-for-non-drupal-projects","title":"<code>docker-compose.yml</code> snippet for non-Drupal projects","text":"docker-compose.yml<pre><code>    mysql:\nimage: uselagoon/mysql-8.4:latest\nlabels:\n# tells Lagoon this is a MariaDB-compatible database\nlagoon.type: mariadb\nports:\n# exposes the port 3306 with a random local port, find it with `docker compose port mysql 3306`\n- \"3306\"\nvolumes:\n# mounts a named volume at the default path for MySQL\n- db:/var/lib/mysql\n</code></pre>"},{"location":"docker-images/mysql/#docker-composeyml-snippet-for-drupal-projects","title":"<code>docker-compose.yml</code> snippet for Drupal projects","text":"docker-compose.yml<pre><code>    mariadb:\nimage: uselagoon/mysql-8.4:latest\nlabels:\n# tells Lagoon this is a MariaDB-compatible database\nlagoon.type: mariadb\nports:\n# exposes the port 3306 with a random local port, find it with `docker compose port mariadb 3306`\n- \"3306\"\nenvironment:\n# These override the default credentials to match what Drupal is hardwired to expect in Lagoon\n- MYSQL_DATABASE=drupal\n- MYSQL_USER=drupal\n- MYSQL_PASSWORD=drupal\nvolumes:\n# mounts a named volume at the default path for MariaDB\n- db:/var/lib/mysql\n</code></pre>"},{"location":"docker-images/mysql/#included-tools","title":"Included tools","text":"<ul> <li><code>mysqltuner.pl</code> - Perl script useful for database parameter tuning.</li> <li><code>mysql-backup.sh</code> - Script for automating the daily MySQL backups on development environment.</li> <li><code>pwgen</code> - Utility to generate random and complex passwords.</li> </ul>"},{"location":"docker-images/mysql/#included-mycnf-configuration-file","title":"Included <code>my.cnf</code> configuration file","text":"<p>The image ships a default MySQL configuration file, optimized to work on Lagoon. Some options are configurable via environment variables.</p>"},{"location":"docker-images/mysql/#environment-variables","title":"Environment Variables","text":"Environment Variable Default Description MYSQL_DATABASE lagoon Database name created at startup. MYSQL_USER lagoon Default user created at startup. MYSQL_PASSWORD lagoon Password of default user created at startup. MYSQL_ROOT_PASSWORD Lag00n MySQL root user's password. MYSQL_CHARSET utf8mb4 Set the server charset. MYSQL_COLLATION utf8mb4_bin Set server collation. MYSQL_MAX_ALLOWED_PACKET 64M Set the <code>max_allowed_packet</code> size. MYSQL_INNODB_BUFFER_POOL_SIZE 256M Set the MySQL InnoDB buffer pool size. MYSQL_INNODB_BUFFER_POOL_INSTANCES 1 Number of InnoDB buffer pool instances. MYSQL_INNODB_LOG_FILE_SIZE 64M Size of InnoDB log file. MYSQL_LOG_SLOW (not set) Variable to control the save of slow queries. MYSQL_LOG_QUERIES (not set) Variable to control the save of ALL queries. BACKUPS_DIR /var/lib/mysql/backup Default path for databases backups. MYSQL_DATA_DIR /var/lib/mysql Path of the MySQL data dir, be careful, changing this can occur data loss! MYSQL_COPY_DATA_DIR_SOURCE (not set) Path which the entrypoint script of MySQL will use to copy into the defined <code>MYSQL_DATA_DIR</code>, this can be used for prepopulating the MySQL with a database. The scripts expects actual MySQL data files and not a sql file! Plus it only copies data if the destination does not already have a MySQL datadir in it. <p>If the <code>LAGOON_ENVIRONMENT_TYPE</code> variable is set to <code>production</code>, performances are set accordingly by using <code>MYSQL_INNODB_BUFFER_POOL_SIZE=1024</code> and <code>MYSQL_INNODB_LOG_FILE_SIZE=256</code>.</p>"},{"location":"docker-images/nginx/","title":"NGINX","text":"<p>The Lagoon <code>nginx</code> image Dockerfile. Based on the official <code>openresty/openresty</code> images.</p> <p>This Dockerfile is intended to be used as a base for any web servers within Lagoon.</p>"},{"location":"docker-images/nginx/#lagoon-adaptions","title":"Lagoon adaptions","text":"<p>The default exposed port of NGINX containers is port <code>8080</code>.</p> <p>This image is prepared to be used on Lagoon. There are therefore some things already done:</p> <ul> <li>Folder permissions are automatically adapted with <code>fix-permissions</code>, so this image will work with a random user.</li> <li>The files within <code>/etc/nginx/*</code> are parsed through <code>envplate</code> with a container-entrypoint.</li> </ul>"},{"location":"docker-images/nginx/#included-nginx-configuration-static-filesconf","title":"Included <code>NGINX</code> configuration (<code>static-files.conf</code>)","text":"<p>Warning</p> <p>By default <code>NGINX</code> only serves static files - this can be used for static sites that don't require a database or PHP components: for example, static site generators like Hugo, Jekyll or Gatsby.</p> <p>If you need PHP, have a look at the <code>php-fpm</code> image and use <code>nginx</code> and <code>php-fpm</code> in tandem.</p> <p>Build the content during the build process and inject it into the <code>nginx</code> container.</p>"},{"location":"docker-images/nginx/#helpers","title":"Helpers","text":""},{"location":"docker-images/nginx/#redirects-mapconf","title":"<code>redirects-map.conf</code>","text":"<p>In order to create redirects, we have <code>redirects-map.conf</code> in place. This helps you to redirect marketing domains to sub-sites or do non-www to www redirects. If you have a lot of redirects, we suggest having <code>redirects-map.conf</code> stored next to your code for easier maintainability.</p> <p>Note</p> <p>If you only have a few redirects, there's a handy trick to create the redirects with a <code>RUN</code> command in your <code>nginx.dockerfile</code>.</p> <p>Here's an example showing how to redirect <code>www.example.com</code> to <code>example.com</code> and preserve the request:</p> Redirect<pre><code>RUN echo \"~^www.example.com http://example.com\\$request_uri;\" &gt;&gt; /etc/nginx/redirects-map.conf\n</code></pre> <p>To get more details about the various types of redirects that can be achieved, see the documentation within the <code>redirects-map.conf</code> directly.</p> <p>After you put the <code>redirects-map.conf</code> in place, you also need to include it in your <code>nginx.dockerfile</code> in order to get the configuration file into your build.</p> nginx.dockerfile<pre><code>COPY redirects-map.conf /etc/nginx/redirects-map.conf\n</code></pre>"},{"location":"docker-images/nginx/#basic-authentication","title":"Basic Authentication","text":"<p>Basic authentication is enabled automatically when the <code>BASIC_AUTH_USERNAME</code> and <code>BASIC_AUTH_PASSWORD</code> environment variables are set.</p> <p>Warning</p> <p>Automatic basic auth configuration is provided for convenience. It should not be considered a secure method of protecting your website or private data.</p>"},{"location":"docker-images/nginx/#environment-variables","title":"Environment Variables","text":"<p>Some options are configurable via environment variables.</p> Environment Variable Default Description BASIC_AUTH restricted Set to <code>off</code> to disable basic authentication. BASIC_AUTH_USERNAME (not set) Username for basic authentication. BASIC_AUTH_PASSWORD (not set) Password for basic authentication (unencrypted). FAST_HEALTH_CHECK (not set) Set to <code>true</code> to redirect GET requests from certain user agents (StatusCake, Pingdom, Site25x7, Uptime, nagios) to the lightweight Lagoon service healthcheck."},{"location":"docker-images/nodejs/","title":"Node.js","text":"<p>The Lagoon <code>Node.js</code> Docker image. Based on the official Node Alpine images.</p>"},{"location":"docker-images/nodejs/#supported-versions","title":"Supported Versions","text":"<p>We ship 2 versions of Node.js images: the normal <code>node:version</code> image and the <code>node:version-builder</code>.</p> <p>The builder variant of those images comes with additional tooling that is needed when you build Node.js apps (such as the build libraries, npm and Yarn). For a full list check out their Dockerfile.</p> <ul> <li>12 (available for compatibility only, no longer officially supported) - <code>uselagoon/node-12</code></li> <li>14 (available for compatibility only, no longer officially supported) - <code>uselagoon/node-14</code></li> <li>16 (available for compatibility only, no longer officially supported) - <code>uselagoon/node-16</code></li> <li>18 Dockerfile (Security Support until April 2025) - <code>uselagoon/node-18</code></li> <li>20 Dockerfile (Security Support until April 2026) - <code>uselagoon/node-20</code></li> <li>22 Dockerfile (Security Support until April 2027) - <code>uselagoon/node-22</code></li> </ul> <p>Tip</p> <p>We stop updating EOL Node.js images usually with the Lagoon release that comes after the officially communicated EOL date: https://nodejs.org/en/about/releases/.</p>"},{"location":"docker-images/nodejs/#lagoon-adaptions","title":"Lagoon adaptions","text":"<p>The default exposed port of Node.js containers is port <code>3000</code>.</p> <p>Persistent storage is configurable in Lagoon, using the <code>lagoon.type: node-persistent</code>. See the docs for more info</p> <p>Use the following labels in your <code>docker-compose.yml</code> file to configure it:</p> <ul> <li><code>lagoon.persistent</code> = use this to define the path in the container to use as persistent storage - e.g. /app/files.</li> <li><code>lagoon.persistent.size</code> = this to tell Lagoon how much storage to assign this path.</li> <li>If you have multiple services that share the same storage, use this <code>lagoon.persistent.name</code> = (optional) use this to tell Lagoon to use the storage defined in another named service.</li> </ul>"},{"location":"docker-images/nodejs/#docker-composeyml-snippet","title":"<code>docker-compose.yml</code> snippet","text":"docker-compose.yml<pre><code>    node:\nbuild:\n# this configures a build from a Dockerfile in the root folder\ncontext: .\ndockerfile: Dockerfile\nlabels:\n# tells Lagoon this is a node service, configured with 500MB of persistent storage at /app/files\nlagoon.type: node-persistent\nlagoon.persistent: /app/files\nlagoon.persistent.size: 500Mi\nports:\n# local development only\n# this exposes the port 3000 with a random local port\n# find it with `docker compose port node 3000`\n- \"3000\"\nvolumes:\n# local development only\n# mounts a named volume (files) at the defined path for this service to replicate production\n- files:/app/files\n</code></pre>"},{"location":"docker-images/opensearch/","title":"OpenSearch","text":"<p>OpenSearch is a community-driven, Apache 2.0-licensed open source search and analytics suite that makes it easy to ingest, search, visualize, and analyze data.</p> <ul> <li>from https://opensearch.org/</li> </ul>"},{"location":"docker-images/opensearch/#supported-versions","title":"Supported versions","text":"<ul> <li>2 Dockerfile - <code>uselagoon/opensearch-2</code></li> </ul>"},{"location":"docker-images/opensearch/#environment-variables","title":"Environment Variables","text":"<p>Some options are configurable via environment variables.</p> Environment Variable Default Description OPENSEARCH_JAVA_OPTS -Xms512m -Xmx512m Sets the memory usage of the OpenSearch container. Both values need be the same value or OpenSearch will not start cleanly."},{"location":"docker-images/opensearch/#known-issues","title":"Known issues","text":"<p>On Linux-based systems, the start of the OpenSearch container may fail due to a low <code>vm.max_map_count</code> setting.</p> Error<pre><code>opensearch_1  | ERROR: [1] bootstrap checks failed\nopensearch_1  | [1]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]\n</code></pre> <p>Solution to this issue can be found here.</p>"},{"location":"docker-images/php-cli/","title":"PHP-CLI","text":"<p>The Lagoon <code>php-cli</code> Docker image. Based on Lagoon <code>php-fpm</code> image, it has all the needed command line tools for daily operations.</p> <p>Containers (or pods) started from <code>cli</code> images are responsible for building code for Composer or Node.js based projects.</p> <p>The image also contains database <code>cli</code>s for both MariaDB and PostgreSQL.</p> <p>Info</p> <p>This Dockerfile is intended to be used as a base for any <code>cli</code> needs within Lagoon.</p>"},{"location":"docker-images/php-cli/#supported-versions","title":"Supported versions","text":"<ul> <li>7.3 (available for compatibility only, no longer officially supported) - <code>uselagoon/php-7.3-cli</code></li> <li>7.4 (available for compatibility only, no longer officially supported) - <code>uselagoon/php-7.4-cli</code></li> <li>8.0 (available for compatibility only, no longer officially supported) - <code>uselagoon/php-8.0-cli</code></li> <li>8.1 Dockerfile (Security Support until November 2024) - <code>uselagoon/php-8.1-cli</code></li> <li>8.2 Dockerfile (Security Support until December 2025) - <code>uselagoon/php-8.2-cli</code></li> <li>8.3 Dockerfile (Security Support until December 2026) - <code>uselagoon/php-8.3-cli</code></li> </ul> <p>All PHP versions use their own Dockerfiles.</p>"},{"location":"docker-images/php-cli/#lagoon-adaptions","title":"Lagoon adaptions","text":"<p>This image is prepared to be used on Lagoon. There are therefore some things already done:</p> <ul> <li>Folder permissions are automatically adapted with <code>fix-permissions</code>, so this image will work with a random user.</li> <li><code>COMPOSER_ALLOW_SUPERUSER=1</code> removes warning about use of Composer as root.</li> <li><code>80-shell-timeout.sh</code> script checks if containers are running in a Kubernetes environment and then set a 10 minutes timeout to idle <code>cli</code> pods.</li> <li><code>cli</code> containers use an SSH key injected by Lagoon or defined into <code>SSH_PRIVATE_KEY</code>environment variable.</li> </ul>"},{"location":"docker-images/php-cli/#included-cli-tools","title":"Included CLI tools","text":"<p>The included CLI tools are:</p> <ul> <li><code>composer</code> version 1.9.0 (changeable via <code>COMPOSER_VERSION</code> and <code>COMPOSER_HASH_SHA256</code>)</li> <li><code>node.js</code> verison 17 (as of Mar 2022)</li> <li><code>npm</code></li> <li><code>yarn</code></li> <li><code>mariadb-client</code></li> <li><code>postgresql-client</code></li> </ul>"},{"location":"docker-images/php-cli/#change-nodejs-version","title":"Change Node.js Version","text":"<p>By default this image ships with the <code>nodejs-current</code> package (v17 as of Mar 2022). If you need another version you can remove the current version and install the one of your choice. For example, to install Node.js 16, modify your dockerfile to include:</p> Update Node.js version<pre><code>RUN apk del nodejs-current \\\n&amp;&amp; apk add --no-cache nodejs=~16\n</code></pre>"},{"location":"docker-images/php-cli/#environment-variables","title":"Environment variables","text":"<p>Some options are configurable via environment variables. The php-fpm environment variables also apply.</p> Name Default Description MARIADB_MAX_ALLOWED_PACKET 64M Controls the max allowed packet for the MySql client."},{"location":"docker-images/php-fpm/","title":"PHP-FPM","text":"<p>The Lagoon <code>php-fpm</code> Docker image. Based on the official PHP Alpine images.</p> <p>PHP-FPM (FastCGI Process Manager) is an alternative PHP FastCGI implementation with some additional features useful for sites of any size, especially busier sites.</p> <ul> <li>from https://php-fpm.org/</li> </ul> <p>FastCGI is a way of having server scripts execute time-consuming code just once instead of every time the script is loaded, reducing overhead.</p> <p>Info</p> <p>This Dockerfile is intended to be used as a base for any <code>PHP</code> needs within Lagoon. This image itself does not create a web server, rather a <code>php-fpm</code> fastcgi listener. You may need to adapt the <code>php-fpm</code> pool config.</p>"},{"location":"docker-images/php-fpm/#supported-versions","title":"Supported versions","text":"<ul> <li>7.3 (available for compatibility only, no longer officially supported) - <code>uselagoon/php-7.3-fpm</code></li> <li>7.4 (available for compatibility only, no longer officially supported) - <code>uselagoon/php-7.4-fpm</code></li> <li>8.0 (available for compatibility only, no longer officially supported) - <code>uselagoon/php-8.0-fpm</code></li> <li>8.1 Dockerfile (Security Support until November 2024) - <code>uselagoon/php-8.1-fpm</code></li> <li>8.2 Dockerfile (Security Support until December 2025) - <code>uselagoon/php-8.2-fpm</code></li> <li>8.3 Dockerfile (Security Support until December 2026) - <code>uselagoon/php-8.3-fpm</code></li> </ul> <p>All PHP versions use their own Dockerfiles.</p> <p>Tip</p> <p>We stop updating End of Life (EOL) PHP images usually with the Lagoon release that comes after the officially communicated EOL date: https://www.php.net/supported-versions.php. Previous published versions will remain available.</p>"},{"location":"docker-images/php-fpm/#lagoon-adaptions","title":"Lagoon adaptions","text":"<p>This image is prepared to be used on Lagoon. There are therefore some things are already done:</p> <ul> <li>Folder permissions are automatically adapted with <code>fix-permissions</code>, so this image will work with a random user.</li> <li>The <code>/usr/local/etc/php/php.ini</code> and <code>/usr/local/etc/php-fpm.conf</code>, plus all files within <code>/usr/local/etc/php-fpm.d/</code> , are parsed through <code>envplate</code> with a container-entrypoint.</li> <li>See the Dockerfile for installed <code>PHP</code> extensions.</li> <li>To install further extensions, extend your Dockerfile from this image. Install extensions according to the docs, under the heading How to install more PHP extensions.</li> </ul>"},{"location":"docker-images/php-fpm/#included-php-config","title":"Included PHP config","text":"<p>The included <code>PHP</code> config contains sensible values that will make the creation of <code>PHP</code> pools config easier. Here is a list of some of these. Check <code>/usr/local/etc/php.ini</code>, <code>/usr/local/etc/php-fpm.conf</code> for all of them:</p> Value Details <code>max_execution_time = 900</code> Changeable via <code>PHP_MAX_EXECUTION_TIME</code>. <code>realpath_cache_size = 256k</code> For handling big PHP projects. <code>memory_limit = 400M</code> For big PHP projects (changeable via <code>PHP_MEMORY_LIMIT</code>). <code>opcache.memory_consumption = 265</code> For big PHP projects. <code>opcache.enable_file_override = 1</code> and <code>opcache.huge_code_pages = 1</code> For faster PHP. <code>display_errors = Off</code> and <code>display_startup_errors = Off</code> For sensible production values (changeable via <code>PHP_DISPLAY_ERRORS</code> and <code>PHP_DISPLAY_STARTUP_ERRORS</code>). <code>upload_max_filesize = 2048M</code> For big file uploads. <code>apc.shm_size = 32m</code> and <code>apc.enabled = 1</code> Changeable via <code>PHP_APC_SHM_SIZE</code> and <code>PHP_APC_ENABLED</code>. <p>Also, <code>php-fpm</code> error logging happens in <code>stderr</code>.</p> <p>\ud83d\udca1 If you don't like any of these configs, you have three possibilities:</p> <ol> <li>If they are changeable via environment variables, use environment variables (this is the preferred method, see table of environment variables below).</li> <li>Create your own <code>fpm-pool</code> config and set via <code>php_admin_value</code> and <code>php_admin_flag</code>.<ol> <li>Learn more about them in <code>this documentation for Running PHP as an Apache module</code>. This documentation refers to Apache, but it is also the case for <code>php-fpm</code>).<p>Important:</p> <p>1. If you want to provide your own <code>php-fpm</code> pool, overwrite the file <code>/usr/local/etc/php-fpm.d/www.conf</code> with your own config, or rename this file if you want it to have another name. If you don't do that, the provided pool will be started!   2. PHP values with the <code>PHP_INI_SYSTEM</code> changeable mode cannot be changed via an <code>fpm-pool</code> config. They need to be changed either via already provided environment variables or: 3. Provide your own <code>php.ini</code> or <code>php-fpm.conf</code> file (this is the least preferred method).</p> </li> </ol> </li> </ol>"},{"location":"docker-images/php-fpm/#default-fpm-pool","title":"Default fpm-pool","text":"<p>This image is shipped with an <code>fpm-pool</code> config (<code>php-fpm.d/www.conf</code>) that creates an <code>fpm-pool</code> and listens on port 9000. This is because we try to provide an image which already covers most needs for PHP, so you don't need to create your own. You are welcome to do so if you like, though!</p> <p>Here a short description of what this file does:</p> <ul> <li>Listens on port 9000 via IPv4 and IPv6.</li> <li>Uses the pm <code>dynamic</code> and creates between 2-50 children.</li> <li>Re-spawns <code>php-fpm</code> pool children after 500 requests to prevent memory leaks.</li> <li>Replies with <code>pong</code> when making a fastcgi request to <code>/ping</code> (good for automated testing to check if the pool started).</li> <li><code>catch_workers_output = yes</code> to see PHP errors.</li> <li><code>clear_env = no</code> to be able to inject PHP environment variables via regular Docker environment variables.</li> </ul>"},{"location":"docker-images/php-fpm/#environment-variables","title":"Environment Variables","text":"<p>Some options are configurable via environment variables.</p> Environment Variable Default Description NEWRELIC_ENABLED false Enable NewRelic performance monitoring, needs <code>NEWRELIC_LICENSE</code> be configured. NEWRELIC_LICENSE (not set) NewRelic license to be used. Important: <code>NEWRELIC_ENABLED</code> needs to be set to<code>true</code> in order for NewRelic to be enabled. NEWRELIC_BROWSER_MONITORING_ENABLED true This enables auto-insertion of the JavaScript fragments for NewRelic browser monitoring. Important: <code>NEWRELIC_ENABLED</code> needs to be set to<code>true</code> in order for NewRelic to be enabled. NEWRELIC_DISTRIBUTED_TRACING_ENABLED false This enables distributed tracing. Important: <code>NEWRELIC_ENABLED</code> needs to be set to<code>true</code> in order for NewRelic to be enabled. PHP_APC_ENABLED 1 Can be set to <code>0</code> to disable APC. PHP_APC_SHM_SIZE 32m The size of each shared memory segment given. PHP_DISPLAY_ERRORS Off Configures whether errors are printed or hidden. See php.net. PHP_DISPLAY_STARTUP_ERRORS Off Configures whether startup errors are printed or hidden. See php.net. PHP_ERROR_REPORTING Production <code>E_ALL &amp; ~E_DEPRECATED &amp; ~E_STRICT</code> Development: <code>E_ALL &amp; ~E_DEPRECATED &amp; ~E_STRICT &amp; ~E_NOTICE</code> The desired logging level you'd like PHP to use. See php.net. PHP_FPM_PM_MAX_CHILDREN 50 The the maximum number of child processes. See php.net. PHP_FPM_PM_MAX_REQUESTS 500 The number of requests each child process should execute before re-spawning. See php.net. PHP_FPM_PM_MAX_SPARE_SERVERS 2 The desired maximum number of idle server processes. See php.net. PHP_FPM_PM_MIN_SPARE_SERVERS 2 The desired minimum number of idle server processes. See php.net. PHP_FPM_PM_PROCESS_IDLE_TIMEOUT 60s The number of seconds after which an idle process will be killed. See php.net. PHP_FPM_PM_START_SERVERS 2 The number of child processes created on startup. See php.net. PHP_MAX_EXECUTION_TIME 900 Maximum execution time of each script, in seconds. See php.net. PHP_MAX_FILE_UPLOADS 20 The maximum number of files allowed to be uploaded simultaneously. See php.net. PHP_MAX_INPUT_VARS 2000 How many input variables will be accepted. See php.net. PHP_MEMORY_LIMIT 400M Maximum amount of memory a script may consume. See php.net. XDEBUG_ENABLE (not set) Set to <code>true</code> to enable <code>xdebug</code> extension. BLACKFIRE_ENABLED (not set) Set to <code>true</code> to enable <code>blackfire</code> extension. BLACKFIRE_SERVER_ID (not set) Set to Blackfire Server ID provided by Blackfire.io. Needs <code>BLACKFIRE_ENABLED</code> set to <code>true</code>. BLACKFIRE_SERVER_TOKEN (not set) Set to Blackfire Server Token provided by Blackfire.io. Needs <code>BLACKFIRE_ENABLED</code> set to <code>true</code>. BLACKFIRE_LOG_LEVEL 3 Change the log level of the blackfire agent. Available values: <code>log verbosity level (4: debug, 3: info, 2: warning, 1: error)</code> See blackfire.io."},{"location":"docker-images/postgres/","title":"PostgreSQL","text":"<p>The Lagoon PostgreSQL Docker image. Based on the official PostgreSQL Alpine images.</p>"},{"location":"docker-images/postgres/#supported-versions","title":"Supported versions","text":"<ul> <li>11 (available for compatibility only, no longer officially supported) - <code>uselagoon/postgres-11</code></li> <li>12 Dockerfile (Security Support until November 2024) - <code>uselagoon/postgres-12</code></li> <li>13 Dockerfile (Security Support until November 2025) - <code>uselagoon/postgres-13</code></li> <li>14 Dockerfile (Security Support until November 2026) - <code>uselagoon/postgres-14</code></li> <li>15 Dockerfile (Security Support until November 2027) - <code>uselagoon/postgres-15</code></li> <li>16 Dockerfile (Security Support until November 2028) - <code>uselagoon/postgres-16</code></li> </ul> <p>Tip</p> <p>We stop updating EOL PostgreSQL images usually with the Lagoon release that comes after the officially communicated EOL date: https://www.postgresql.org/support/versioning</p>"},{"location":"docker-images/postgres/#lagoon-adaptions","title":"Lagoon adaptions","text":"<p>The default exposed port of Postgres containers is port <code>5432</code>.</p> <p>To allow Lagoon to select the best way to run the Postgres container, use <code>lagoon.type: postgres</code> - this allows DBaaS operator to provision a cloud database if available in the cluster. Use <code>lagoon.type: postgres-single</code> to specifically request Postgres in a container. Persistent storage is always provisioned for postgres containers at /var/lib/postgresql/data.</p>"},{"location":"docker-images/postgres/#docker-composeyml-snippet","title":"<code>docker-compose.yml</code> snippet","text":"docker-compose.yml<pre><code>postgres:\nimage: uselagoon/postgres-14-drupal:latest\nlabels:\n# tells Lagoon this is a Postgres database\nlagoon.type: postgres\nports:\n# exposes the port 5432 with a random local port\n# find it with `docker compose port postgres 5432`\n- \"5432\"\nvolumes:\n# mounts a named volume at the default path for Postgres\n- db:/var/lib/postgresql/data\n</code></pre>"},{"location":"docker-images/postgres/#tips-tricks","title":"Tips &amp; Tricks","text":"<p>If you have SQL statements that need to be run immediately after container startup to initialize the database, you can place those <code>.sql</code> files in the container's <code>docker-entrypoint-initdb.d</code> directory. Any <code>.sql</code> files contained in that directory are run automatically at startup, as part of bringing the PostgreSQL container up.</p> <p>Warning</p> <p>These scripts are only run if the container is started with an empty database.</p>"},{"location":"docker-images/python/","title":"Python","text":"<p>The Lagoon <code>python</code> Docker image. Based on the official Python Alpine images.</p>"},{"location":"docker-images/python/#supported-versions","title":"Supported Versions","text":"<ul> <li>2.7 (available for compatibility only, no longer officially supported) - <code>uselagoon/python-2.7</code></li> <li>3.7 (available for compatibility only, no longer officially supported) - <code>uselagoon/python-3.7</code></li> <li>3.8 Dockerfile (Security Support until October 2024) - <code>uselagoon/python-3.8</code></li> <li>3.9 Dockerfile (Security Support until October 2025) - <code>uselagoon/python-3.9</code></li> <li>3.10 Dockerfile (Security Support until October 2026) - <code>uselagoon/python-3.10</code></li> <li>3.11 Dockerfile (Security Support until October 2027) - <code>uselagoon/python-3.11</code></li> <li>3.12 Dockerfile (Security Support until October 2028) - <code>uselagoon/python-3.12</code></li> </ul> <p>Tip</p> <p>We stop updating and publishing EOL Python images usually with the Lagoon release that comes after the officially communicated EOL date: https://devguide.python.org/versions/#versions. Previous published versions will remain available.</p>"},{"location":"docker-images/python/#lagoon-adaptions","title":"Lagoon adaptions","text":"<p>The default exposed port of Python containers is port <code>8800</code>.</p> <p>Persistent storage is configurable in Lagoon, using the <code>lagoon.type: python-persistent</code>. See the docs for more info</p> <p>Use the following labels in your <code>docker-compose.yml</code> file to configure it: <code>lagoon.persistent</code> = use this to define the path in the container to use as persistent storage - e.g. /app/files <code>lagoon.persistent.size</code> = this to tell Lagoon how much storage to assign this path</p> <p>If you have multiple services that share the same storage, use this <code>lagoon.persistent.name</code> = (optional) use this to tell Lagoon to use the storage defined in another named service</p>"},{"location":"docker-images/python/#docker-composeyml-snippet","title":"<code>docker-compose.yml</code> snippet","text":"docker-compose.yml<pre><code>python:\nbuild:\n# this configures a build from a Dockerfile in the root folder\ncontext: .\ndockerfile: Dockerfile\nlabels:\n# tells Lagoon this is a python service, configured with 500MB of persistent storage at /app/files\nlagoon.type: python-persistent\nlagoon.persistent: /app/files\nlagoon.persistent.size: 500Mi\nports:\n# local development only\n# this exposes the port 8800 with a random local port\n# find it with `docker compose port python 8800`\n- \"8800\"\nvolumes:\n# local development only\n# mounts a named volume (files) at the defined path for this service to replicate production\n- files:/app/files\n</code></pre>"},{"location":"docker-images/rabbitmq/","title":"RabbitMQ","text":"<p>The Lagoon RabbitMQ Dockerfile with management plugin installed. Based on the official <code>rabbitmq:3-management</code> image at docker-hub.</p> <p>This Dockerfile is intended to be used to set up a standalone RabbitMQ queue broker, as well as a base image to set up a cluster with high availability queue support by default (Mirrored queues).</p> <p>By default, the RabbitMQ broker is started as single node. If you want to start a cluster, you need to use the <code>rabbitmq-cluster</code> Docker image, based on <code>rabbitmq</code> image plus the <code>rabbitmq_peer_discovery_k8s</code> plugin.</p>"},{"location":"docker-images/rabbitmq/#supported-versions","title":"Supported versions","text":"<ul> <li>3.10 Dockerfile (Security Support until July 2023) - <code>uselagoon/rabbitmq</code></li> </ul>"},{"location":"docker-images/rabbitmq/#lagoon-adaptions","title":"Lagoon adaptions","text":"<p>This image is prepared to be used on Lagoon. There are therefore some things already done:</p> <ul> <li>Folder permissions are automatically adapted with <code>fix-permissions</code>, so this image will work with a random user.</li> <li>The file <code>/etc/rabbitmq/definitions.json</code> is parsed through <code>envplate</code> with a container-entrypoint.</li> </ul>"},{"location":"docker-images/rabbitmq/#included-rabbitmq-default-schema-definitionsjson","title":"Included RabbitMQ default schema (definitions.json)","text":"<ul> <li>To enable the support for Mirrored Queues, at least one <code>policy</code>must exist.</li> <li> <p>In the <code>definitions.json</code> schema file, minimal entities are defined to make the</p> <p>container run: <code>virtualhost</code> (<code>vhost</code>), <code>username</code> , and <code>password</code> to access management</p> <p>UI, <code>permissions</code> , and <code>policies</code>.</p> </li> </ul> <p>By default, a policy called <code>lagoon-ha</code> is created at startup, but it is not active because it doesn't match any queue's name pattern (see default Environment Variables).</p> definitions.json<pre><code>\"policies\":[\n{\"vhost\":\"${RABBITMQ_DEFAULT_VHOST}\",\"name\":\"lagoon-ha\",\"pattern\":\"${RABBITMQ_DEFAULT_HA_PATTERN}\", \"definition\":{\"ha-mode\":\"exactly\",\"ha-params\":2,\"ha-sync-mode\":\"automatic\",\"ha-sync-batch-size\":5}}\n]\n</code></pre> <p>By default, the <code>ha-mode</code> is set to <code>exactly</code> which controls the exact number of mirroring nodes for a queue (mirrors). The number of nodes is controller by <code>ha-params</code>.</p> <p>For further information and custom configuration, please refer to official RabbitMQ documentation.</p>"},{"location":"docker-images/rabbitmq/#environment-variables","title":"Environment Variables","text":"<p>Some options are configurable via environment variables.</p> Environment Variable Default Description RABBITMQ_DEFAULT_USER guest Username for management UI access. RABBITMQ_DEFAULT_PASS guest Password for management UI access. RABBITMQ_DEFAULT_VHOST / RabbitMQ main virtualhost. RABBITMQ_DEFAULT_HA_PATTERN ^$ Regular expression to match for mirrored queues."},{"location":"docker-images/redis/","title":"Redis","text":"<p>Lagoon <code>Redis</code> image Dockerfile, based on official <code>redis:alpine</code> image.</p> <p>This Dockerfile is intended to be used to set up a standalone Redis ephemeral server by default.</p>"},{"location":"docker-images/redis/#supported-versions","title":"Supported versions","text":"<ul> <li>5 (available for compatibility only, no longer officially supported) - <code>uselagoon/redis-5</code> or <code>uselagoon/redis-5-persistent</code></li> <li>6 Dockerfile - <code>uselagoon/redis-6</code> or <code>uselagoon/redis-6-persistent</code></li> <li>7 Dockerfile - <code>uselagoon/redis-7</code> or <code>uselagoon/redis-7-persistent</code></li> </ul>"},{"location":"docker-images/redis/#usage","title":"Usage","text":"<p>There are 2 different flavors of Redis Images: Ephemeral and Persistent.</p>"},{"location":"docker-images/redis/#ephemeral","title":"Ephemeral","text":"<p>The ephemeral image is intended to be used as an in-memory cache for applications and will not retain data across container restarts.</p> <p>When being used as an in-memory (RAM) cache, the first thing you might want to tune if you have large caches is to adapt the <code>MAXMEMORY</code> variable. This variable controls the maximum amount of memory (RAM) which redis will use to store cached items.</p>"},{"location":"docker-images/redis/#persistent","title":"Persistent","text":"<p>The persistent Redis image will persist data across container restarts and can be used for queues or application data that will need persistence.</p> <p>We don't typically suggest using a persistent Redis for in-memory cache scenarios as this might have unintended side-effects on your application while a Redis container is restarting and loading data from disk.</p>"},{"location":"docker-images/redis/#lagoon-adaptions","title":"Lagoon adaptions","text":"<p>This image is prepared to be used on Lagoon. There are therefore some things already done:</p> <ul> <li>Folder permissions are automatically adapted with <code>fix-permissions</code>so this image will work with a random user.</li> <li>The files within <code>/etc/redis/*</code> are templated using <code>envplate</code> via a container-entrypoint.</li> </ul>"},{"location":"docker-images/redis/#included-redisconf-configuration-file","title":"Included <code>redis.conf</code> configuration file","text":"<p>The image ships a default Redis configuration file, optimized to work on Lagoon.</p>"},{"location":"docker-images/redis/#environment-variables","title":"Environment Variables","text":"<p>Some options are configurable via environment variables.</p> Environment Variable Default Description DATABASES -1 Default number of databases created at startup. LOGLEVEL notice Define the level of logs. MAXMEMORY 100mb Maximum amount of memory. MAXMEMORYPOLICY allkeys-lru The policy to use when evicting keys if Redis reaches its maximum memory usage. REDIS_PASSWORD disabled Enables authentication feature."},{"location":"docker-images/redis/#custom-configuration","title":"Custom configuration","text":"<p>By building on the base image you can include custom configuration. See https://github.com/redis/redis/blob/7.2.5/redis.conf for full documentation of the Redis configuration file.</p>"},{"location":"docker-images/redis/#redis-persistent","title":"Redis-persistent","text":"<p>Based on the Lagoon <code>redis</code> image, the Lagoon <code>redis-persistent</code> Docker image is intended for use when the Redis service must be utilized in <code>persistent</code> mode (ie. with a persistent volume where keys will be saved to disk).</p> <p>It differs from <code>redis</code> only with the <code>FLAVOR</code> environment variable, which will use the respective Redis configuration according to the version of redis in use.</p>"},{"location":"docker-images/redis/#troubleshooting","title":"Troubleshooting","text":"<p>The Lagoon Redis images all come pre-loaded with the <code>redis-cli</code> command, which allows for querying the Redis service for information and setting config values dynamically. To use this utility, you can simply SSH into your Redis pod by using the instructions here with <code>redis</code> as the <code>pod</code> value then run it from the terminal once you've connected.</p>"},{"location":"docker-images/redis/#maximum-memory-policy","title":"Maximum Memory Policy","text":"<p>By default, the Lagoon <code>redis</code> images are set to use the <code>allkeys-lru</code> policy. This policy will alow ANY keys stored in Redis to be evicted if/when the Redis service hits its <code>maxmemory</code> limit according to when the key was least recently used.</p> <p>For typical installations, this is the ideal configuration, as Drupal may not set a <code>TTL</code> value for each key cached in Redis. If the <code>maxmemory-policy</code> is set to something like <code>volatile-lru</code> and Drupal doesn't provide these <code>TTL</code> tags, this would result in the Redis container filling up, being totally unable to evict ANY keys, and ceasing to accept new cache keys at all.</p> <p>More information on Redis' maxmemory policies can be found in Redis' official documentation.</p> <p>Proceed with Caution</p> <p>Changing this setting can lead to Redis becoming completely full and cause outages as a result.</p>"},{"location":"docker-images/redis/#tuning-redis-maxmemory-value","title":"Tuning Redis' <code>maxmemory</code> value","text":"<p>Finding the optimal amount of memory to give Redis can be quite the difficult task. Before attempting to tune your Redis cache's memory size, it is prudent to let it run normally for as long as practical, with at least a day of typical usage being the ideal minimum timeframe.</p> <p>There are a few high level things you can look at when tuning these memory values:</p> <ul> <li>The first thing to check is the percentage of memory in use by Redis currently.<ul> <li>If this percentage is less than <code>50%</code>, you might consider lowering the <code>maxmemory</code> value by 25%.</li> <li>If this percentage is between <code>50%</code> and <code>75%</code>, things are running just fine.</li> <li>If this value is greater than <code>75%</code>, then it's worth looking at other variables to see if <code>maxmemory</code> needs to be increased.</li> </ul> </li> <li>If you find that your Redis' memory usage percentage is high, the next thing to look at is the number of key evictions.<ul> <li>A large number of key evictions and a memory usage greater than <code>95%</code> is a fairly good indicator that your redis needs a higher <code>maxmemory</code> setting.</li> <li>If the number of key evictions doesn't seem high and typical response times are reasonable, this is simply indicative of Redis doing its job and managing its allocated memory as expected.</li> </ul> </li> </ul>"},{"location":"docker-images/redis/#example-commands","title":"Example commands","text":"<p>The following commands can be used to view information about the Redis service:</p> <ul> <li>View all info about the Redis service: <code>redis-cli info</code></li> <li>View service memory information: <code>redis-cli info memory</code></li> <li>View service keyspace information: <code>redis-cli info keyspace</code></li> <li>View service statistics: <code>redis-cli info stats</code></li> </ul> <p>It is also possible to set values for the Redis service dynamically without a restart of the Redis service. It is important to note that these dynamically set values will not persist if the pod is restarted (which can happen as a result of a deployment, maintenance, or even just being shuffled from one node to another).</p> <ul> <li>Set <code>maxmemory</code> config value dynamically to <code>500mb</code>: <code>config set maxmemory 500mb</code></li> <li>Set <code>maxmemory-policy</code> config value dynamically to <code>volatile-lru</code>: <code>config set maxmemory-policy volatile-lru</code></li> </ul>"},{"location":"docker-images/ruby/","title":"Ruby","text":"<p>The Lagoon <code>ruby</code> Docker image. Based on the official Python Alpine images.</p>"},{"location":"docker-images/ruby/#supported-versions","title":"Supported Versions","text":"<ul> <li>3.0 (available for compatibility only, no longer officially supported) - <code>uselagoon/ruby-3.0</code></li> <li>3.1 Dockerfile (Security Support until March 2025) - <code>uselagoon/ruby-3.1</code></li> <li>3.2 Dockerfile (Security Support until March 2026) - <code>uselagoon/ruby-3.2</code></li> <li>3.3 Dockerfile (Security Support until March 2027) - <code>uselagoon/ruby-3.3</code></li> </ul> <p>Tip</p> <p>We stop updating and publishing EOL Ruby images usually with the Lagoon release that comes after the officially communicated EOL date: https://www.ruby-lang.org/en/downloads/releases/. Previous versions will remain available.</p>"},{"location":"docker-images/ruby/#lagoon-adaptions","title":"Lagoon adaptions","text":"<p>The default exposed port of ruby containers is port <code>3000</code>.</p> <p>Lagoon has no \"pre-defined\" type for Ruby services, they should be configured with the <code>lagoon.type: generic</code> and a port set with <code>lagoon.port: 3000</code></p>"},{"location":"docker-images/ruby/#docker-composeyml-snippet","title":"<code>docker-compose.yml</code> snippet","text":"docker-compose.yml<pre><code>ruby:\nbuild:\n# this configures a build from a Dockerfile in the root folder\ncontext: .\ndockerfile: Dockerfile\nlabels:\n# tells Lagoon this is a generic service, configured to expose port 3000\nlagoon.type: generic\nlagoon.port: 3000\nports:\n# local development only\n# this exposes the port 3000 with a random local port\n# find it with `docker compose port ruby 3000`\n- \"3000\"\n</code></pre>"},{"location":"docker-images/solr/","title":"Solr","text":"<p>The Lagoon <code>Solr</code> image Dockerfile. Based on the official <code>solr:&lt;version&gt;-alpine</code> images.</p> <p>This Dockerfile is intended to be used to set up a standalone Solr server with an initial core <code>mycore</code>.</p>"},{"location":"docker-images/solr/#supported-versions","title":"Supported Versions","text":"<ul> <li>5.5 (available for compatibility only, no longer officially supported)</li> <li>6.6 (available for compatibility only, no longer officially supported)</li> <li>7.7 (available for compatibility only, no longer officially supported)</li> <li>7 (available for compatibility only, no longer officially supported) - <code>uselagoon/solr-7</code></li> <li>8 Dockerfile - <code>uselagoon/solr-8</code></li> <li>9 Dockerfile - <code>uselagoon/solr-9</code></li> </ul>"},{"location":"docker-images/solr/#lagoon-adaptions","title":"Lagoon adaptions","text":"<p>This image is prepared to be used on Lagoon. There are therefore some things already done:</p> <ul> <li>Folder permissions are automatically adapted with <code>fix-permissions</code>, so this image will work with a random user.</li> <li><code>10-solr-port.sh</code> script to fix and check <code>Solr</code> port.</li> <li><code>20-solr-datadir.sh</code> script to check if <code>Solr</code> config is compliant for Lagoon.  This sets directory paths, and configures the correct lock type.</li> </ul>"},{"location":"docker-images/solr/#environment-variables","title":"Environment Variables","text":"<p>Some options are configurable via environment variables.</p> Environment Variable Default Description SOLR_JAVA_MEM 512M Default Java HEAP size (ie. <code>SOLR_JAVA_MEM=\"-Xms10g -Xmx10g\"</code>). SOLR_DATA_DIR /var/solr Path of the solr data dir. Be careful, changing this can cause data loss! SOLR_COPY_DATA_DIR_SOURCE (not set) Path which the entrypoint script of solr will use to copy into the defined <code>SOLR_DATA_DIR</code>, this can be used for prepopulating the Solr with a core. The scripts expects actual Solr data files! Plus it only copies data if the destination does not already have a solr core in it."},{"location":"docker-images/varnish/","title":"Varnish","text":"<p>The Lagoon <code>Varnish</code> Docker images. Based on the official <code>Varnish</code> package</p>"},{"location":"docker-images/varnish/#supported-versions","title":"Supported versions","text":"<ul> <li>5 (available for compatibility only, no longer officially supported) - <code>uselagoon/varnish-5</code></li> <li>6.0 LTS Dockerfile - <code>uselagoon/varnish-6</code></li> <li>7 Dockerfile - <code>uselagoon/varnish-7</code></li> </ul>"},{"location":"docker-images/varnish/#included-varnish-modules","title":"Included varnish modules","text":"<ul> <li><code>vbox-dynamic</code> - Dynamic backends from DNS lookups and service discovery from SRV records.</li> <li><code>vbox-bodyaccess</code> - Varnish <code>vmod</code> that lets you access the request body.</li> </ul>"},{"location":"docker-images/varnish/#lagoon-adaptions","title":"Lagoon adaptions","text":"<p>This image is prepared to be used on Lagoon. There are therefore some things already done:</p> <ul> <li>Folder permissions are automatically adapted with <code>fix-permissions</code>, so this image will work with a random user.</li> </ul>"},{"location":"docker-images/varnish/#included-defaultvcl-configuration-file","title":"Included <code>default.vcl</code> configuration file","text":"<p>The image ships a default <code>vcl</code> configuration file, optimized to work on Lagoon. Some options are configurable via environments variables (see Environment Variables).</p>"},{"location":"docker-images/varnish/#environment-variables","title":"Environment Variables","text":"<p>Some options are configurable via environment variables.</p> Environment Variable Default Description VARNISH_BACKEND_HOST NGINX Default backend host. VARNISH_BACKEND_PORT 8080 Default listening Varnish port. VARNISH_SECRET lagoon_default_secret Varnish secret used to connect to management. LIBVMOD_DYNAMIC_VERSION 5.2 Default version of <code>vmod-dynamic</code> module. LIBVMOD_BODYACCESS_VERSION 5.0 Default version of <code>vmod-bodyaccess</code> module. HTTP_RESP_HDR_LEN 8k Maximum length of any HTTP backend response header. HTTP_RESP_SIZE 32k Maximum number of bytes of HTTP backend response we will deal with. NUKE_LIMIT 150 Maximum number of objects we attempt to nuke in order to make space for an object body. CACHE_TYPE malloc Type of varnish cache. CACHE_SIZE 500M Cache size. LISTEN 8080 Default backend server port. MANAGEMENT_LISTEN 6082 Default management listening port."},{"location":"installing-lagoon/add-group/","title":"Add Group","text":"Add group<pre><code>  lagoon add group -N groupname\n</code></pre>"},{"location":"installing-lagoon/add-project/","title":"Adding a Project","text":""},{"location":"installing-lagoon/add-project/#add-the-project-to-lagoon","title":"Add the project to Lagoon","text":"<ol> <li> <p>Run this command:</p> Add project<pre><code>lagoon add project \\\n--git-url &lt;YOUR-GITHUB-REPO-URL&gt; \\\n--deploytarget 1 \\\n--production-environment &lt;YOUR-PROD-ENV&gt; \\\n--branches &lt;THE-BRANCHES-YOU-WANT-TO-DEPLOY&gt; \\\n--project &lt;YOUR-PROJECT-NAME&gt;\n</code></pre> <ul> <li>The value for <code>--deploytarget</code> is the ID of your Kubernetes cluster.</li> <li>Your production environment should be the name of the branch you want to have as your production environment.</li> <li>The branches you want to deploy might look like this: <code>\u201c^(main|develop)$\u201d</code></li> <li>The name of your project is anything you want - \u201cCompany Website,\u201d \u201cexample,\u201d etc.</li> </ul> </li> <li> <p>Go to the Lagoon UI, and you should see your project listed!</p> </li> </ol>"},{"location":"installing-lagoon/add-project/#add-the-deploy-key-to-your-git-repository","title":"Add the deploy key to your Git repository","text":"<p>Lagoon creates a deploy key for each project. You now need to add it as a deploy key in your Git repository to allow Lagoon to download the code.</p> <ol> <li> <p>Run the following command to get the deploy key:</p> Get project-key<pre><code>lagoon get project-key --project &lt;YOUR-PROJECT-NAME&gt;\n</code></pre> </li> <li> <p>Copy the key and save it as a deploy key in your Git repository.</p> </li> </ol> <p>GitHub GitLab Bitbucket</p>"},{"location":"installing-lagoon/add-project/#add-the-webhooks-endpoint-to-your-git-repository","title":"Add the webhooks endpoint to your Git repository","text":"<p>In order for Lagoon to be able to deploy on code updates, it needs to be connected to your Git repository</p> <ol> <li> <p>Add your Lagoon cluster's webhook endpoint to your Git repository</p> <ul> <li>Payload URL: <code>&lt;LAGOON-WEBHOOK-INGRESS&gt;</code></li> <li>Content Type: JSON</li> <li>Active: Active (allows you to enable/disable as required)</li> <li>Events: Select the relevant events, or choose All.  Usually push, branch create/delete are required</li> </ul> </li> </ol> <p>GitHub GitLab Bitbucket</p>"},{"location":"installing-lagoon/bulk-storage-provisioner/","title":"Bulk Storage Provisioner","text":""},{"location":"installing-lagoon/bulk-storage-provisioner/#aws-specific-instructions","title":"AWS-specific instructions","text":"<p>Info</p> <p>The EFS info here is only applicable to AWS installations, but the basic process should be similar for all NFS volumes.</p> <p>In order to create the necessary <code>Bulk</code> StorageClass, you will need to have an RWX-capable storage backend.</p> <p>In this example, we will provide documentation to configure EFS as a NFS server, and configure that for use with Lagoon</p>"},{"location":"installing-lagoon/bulk-storage-provisioner/#requirements","title":"Requirements","text":"<ol> <li>Provision and configure an EFS, taking note of any security group requirements (https://docs.aws.amazon.com/efs/latest/ug/mounting-fs-mount-cmd-dns-name.html)</li> <li>The DNS name for the mount target of the EFS volume - usually <code>file-system-id.efs.aws-region.amazonaws.com</code></li> <li>Familiarity with the NFS CSI driver for Kubernetes - https://github.com/kubernetes-csi/csi-driver-nfs</li> </ol>"},{"location":"installing-lagoon/bulk-storage-provisioner/#steps","title":"Steps","text":"<ol> <li>Add Helm repository for the NFS CSI driver     Add Helm repo<pre><code>helm repo add csi-driver-nfs https://raw.githubusercontent.com/kubernetes-csi/csi-driver-nfs/master/charts\n</code></pre></li> <li>Configure the <code>bulk</code> StorageClass EFS NFS mount target in a values file. Note that this step also installs a secret into the namespace to handle deleting volumes, as per here<p>csi-driver-nfs-storageclass.yaml<pre><code>apiVersion: storage.k8s.io/v1\nkind: StorageClass\nmetadata:\nname: bulk\nprovisioner: nfs.csi.k8s.io\nparameters:\nserver: file-system-id.efs.aws-region.amazonaws.com\nshare: /\ncsi.storage.k8s.io/provisioner-secret-name: \"mount-options\"\ncsi.storage.k8s.io/provisioner-secret-namespace: \"csi-driver-nfs\"\nreclaimPolicy: Delete\nvolumeBindingMode: Immediate\nmountOptions:\n- nfsvers=4.1\n- rsize=1048576\n- wsize=1048576\n- hard\n- timeo=600\n- retrans=2\n- noresvport\n---\napiVersion: v1\nkind: Secret\nmetadata:\nname: mount-options\nnamespace: csi-driver-nfs\nstringData:\nmountOptions: \"nfsvers=4.1,rsize=1048576,wsize=1048576,hard,timeo=600,retrans=2,noresvport\"\n</code></pre> 3. Install the NFS CSI driver   Install NFS CSI Driver<pre><code>helm upgrade --install --create-namespace \\\n--namespace csi-driver-nfs --wait \\\ncsi-driver-nfs csi-driver-nfs/csi-driver-nfs\n</code></pre> 4. Install the StorageClass and secret   Install bulk StorageClass and Secret<pre><code>kubectl apply -f csi-driver-nfs-storageclass.yaml\n</code></pre></p> </li> </ol>"},{"location":"installing-lagoon/create-user/","title":"Create Lagoon user","text":"<ol> <li> <p>Add user via Lagoon CLI:</p> Add user<pre><code>lagoon add user --email user@example.com --firstName MyFirstName --lastName MyLastName\n</code></pre> </li> <li> <p>Go to your email and click the password reset link in the email.</p> </li> <li>Follow the instructions and log in to Lagoon UI with created password.</li> <li>Add the SSH public key of the user via Settings.</li> </ol>"},{"location":"installing-lagoon/deploy-project/","title":"Deploy Your Project","text":"<ol> <li> <p>Run the following command to deploy your project:</p> Deploy<pre><code>lagoon deploy branch -p &lt;YOUR-PROJECT-NAME&gt; -b &lt;YOUR-BRANCH-NAME&gt;\n</code></pre> </li> <li> <p>Go to the Lagoon UI and take a look at your project - you should now see the environment for this project!</p> </li> <li>Look in your cluster at your pods list, and you should see the build pod as it begins to clone Git repositories, set up services, etc.See all pods<pre><code>kubectl get pods --all-namespaces | grep lagoon-build\n</code></pre> </li> </ol>"},{"location":"installing-lagoon/gitlab/","title":"GitLab","text":"<p>Not needed for *most* installs, but this is configured to integrate Lagoon with GitLab for user and group authentication.</p> <ol> <li>Create Personal Access token in GitLab for a user with admin access.</li> <li>Create system hooks under <code>your-gitlab.com/admin/hooks</code> pointing to: <code>webhookhandler.lagoon.example.com</code> and define a random secret token.<ol> <li>Enable \u201crepository update events\u201d</li> </ol> </li> <li> <p>Update <code>lagoon-core-values.yml</code>:</p> lagoon-core-values.yml<pre><code>api:\nadditionalEnvs:\nGITLAB_API_HOST: &lt;&lt;URL of GitLab example: https://your-gitlab.com&gt;&gt;\nGITLAB_API_TOKEN: &lt;&lt; Personal Access token with Access to API &gt;&gt;\nGITLAB_SYSTEM_HOOK_TOKEN: &lt;&lt; System Hook Secret Token &gt;&gt;\nwebhook-haondler:\nadditionalEnvs:\nGITLAB_API_HOST: &lt;&lt;URL of GitLab example: https://your-gitlab.com&gt;&gt;\nGITLAB_API_TOKEN: &lt;&lt; Personal Access token with Access to API &gt;&gt;\nGITLAB_SYSTEM_HOOK_TOKEN: &lt;&lt; System Hook Secret Token &gt;&gt;\nwebhooks2tasks:\nadditionalEnvs:\nGITLAB_API_HOST: &lt;&lt;URL of GitLab example: https://your-gitlab.com&gt;&gt;\nGITLAB_API_TOKEN: &lt;&lt; Personal Access token with Access to API &gt;&gt;\nGITLAB_SYSTEM_HOOK_TOKEN: &lt;&lt; System Hook Secret Token &gt;&gt;\n</code></pre> </li> <li> <p>Helm update the <code>lagoon-core</code> helmchart.</p> </li> <li>If you've already created users in Keycloak, delete them.</li> <li>Run the following command in an API pod:Sync with GitLab<pre><code>  yarn sync:gitlab:all\n</code></pre> </li> </ol>"},{"location":"installing-lagoon/install-harbor/","title":"Install Harbor","text":"<ol> <li> <p>Add Helm repository:</p> Add Helm repository<pre><code>helm repo add harbor https://helm.goharbor.io\n</code></pre> </li> <li> <p>Consider the optimal configuration of Harbor for your particular circumstances - see their docs for more recommendations:</p> <ol> <li>We recommend using S3-compatible storage for image blobs (<code>imageChartStorage</code>).</li> <li>We recommend using a managed database service for the Postgres service (<code>database.type</code>).</li> <li>In high-usage scenarios we recommend using a managed Redis service. (<code>redis.type</code>)</li> </ol> </li> <li> <p>Create the file <code>harbor-values.yml</code> inside of your config directory. The proxy-buffering annotations help with large image pushes:</p> harbor-values.yml<pre><code>expose:\ningress:\nannotations:\nkubernetes.io/tls-acme: \"true\"\nnginx.ingress.kubernetes.io/proxy-buffering: \"off\"\nnginx.ingress.kubernetes.io/proxy-request-buffering: \"off\"\nhosts:\ncore: harbor.lagoon.example.com\ntls:\nenabled: true\ncertSource: secret\nsecret:\nsecretName: harbor-harbor-ingress\nexternalURL: https://harbor.lagoon.example.com\nharborAdminPassword: &lt;your Harbor Admin Password&gt;\nchartmuseum:\nenabled: false\nclair:\nenabled: false\nnotary:\nenabled: false\ntrivy:\nenabled: false\njobservice:\njobLogger: stdout\n</code></pre> </li> <li> <p>Install Harbor, checking the requirements for the currently supported Harbor versions:</p> Install Harbor<pre><code>helm upgrade --install --create-namespace \\\n--namespace harbor --wait \\\n-f harbor-values.yml \\\nharbor harbor/harbor\n</code></pre> </li> <li> <p>Visit Harbor at the URL you set in <code>harbor.yml</code>.</p> <ol> <li>Username: admin</li> <li>Password:</li> </ol> Get Harbor secret<pre><code>kubectl -n harbor get secret harbor-core -o jsonpath=\"{.data.HARBOR_ADMIN_PASSWORD}\" | base64 --decode\n</code></pre> </li> <li> <p>You will need to add the above Harbor credentials to the Lagoon Remote <code>values.yml</code> in the next step, as well as <code>harbor-values.yml</code>.</p> </li> </ol>"},{"location":"installing-lagoon/install-lagoon-remote/","title":"Install Lagoon Remote","text":"<p>Now we will install Lagoon Remote into the Lagoon namespace. The RabbitMQ service is the broker.</p> <ol> <li> <p>Create <code>lagoon-remote-values.yml</code> in your config directory as you did the previous two files, and update the values.</p> <ul> <li>rabbitMQPassword</li> </ul> Get RabbitMQ password<pre><code>kubectl -n lagoon-core get secret lagoon-core-broker -o jsonpath=\"{.data.RABBITMQ_PASSWORD}\" | base64 --decode\n</code></pre> <ul> <li>rabbitMQHostname</li> </ul> lagoon-remote-values.yml<pre><code>lagoon-core-broker.lagoon-core.svc.local\n</code></pre> <ul> <li>taskSSHHost</li> </ul> Update SSH Host<pre><code>kubectl get service lagoon-core-broker-amqp-ext \\\n-o custom-columns=\"NAME:.metadata.name,IP ADDRESS:.status.loadBalancer.ingress[*].ip,HOSTNAME:.status.loadBalancer.ingress[*].hostname\"\n</code></pre> <ul> <li>harbor-password</li> </ul> Get Harbor secret<pre><code>kubectl -n harbor get secret harbor-harbor-core -o jsonpath=\"{.data.HARBOR_ADMIN_PASSWORD}\" | base64 --decode\n</code></pre> </li> <li> <p>Add the Harbor configuration from the Install Harbor step.</p> lagoon-remote-values.yml<pre><code>lagoon-build-deploy:\nenabled: true\nextraArgs:\n- \"--enable-harbor=true\"\n- \"--harbor-url=https://harbor.lagoon.example.com\"\n- \"--harbor-api=https://harbor.lagoon.example.com/api/\"\n- \"--harbor-username=admin\"\n- \"--harbor-password=&lt;from harbor-harbor-core secret&gt;\"\nrabbitMQUsername: lagoon\nrabbitMQPassword: &lt;from lagoon-core-broker secret&gt;\nrabbitMQHostname: lagoon-core-broker.lagoon-core.svc.cluster.local\nlagoonTargetName: &lt;name of lagoon remote, can be anything&gt;\ntaskSSHHost: &lt;IP of ssh service loadbalancer&gt;\ntaskSSHPort: \"22\"\ntaskAPIHost: \"api.lagoon.example.com\"\ndbaas-operator:\nenabled: true\nmariadbProviders:\nproduction:\nenvironment: production\nhostname: 172.17.0.1.nip.io\nreadReplicaHostnames:\n- 172.17.0.1.nip.io\npassword: password\nport: '3306'\nuser: root\ndevelopment:\nenvironment: development\nhostname: 172.17.0.1.nip.io\nreadReplicaHostnames:\n- 172.17.0.1.nip.io\npassword: password\nport: '3306'\nuser: root\n</code></pre> </li> <li> <p>Enable ssh-core service account</p> </li> <li> <p>Install Lagoon Remote:</p> Install Lagoon remote<pre><code>helm upgrade --install --create-namespace \\\n--namespace lagoon \\\n-f lagoon-remote-values.yml \\\nlagoon-remote lagoon/lagoon-remote\n</code></pre> </li> </ol>"},{"location":"installing-lagoon/lagoon-backups/","title":"Lagoon Backups","text":"<p>Lagoon uses the K8up backup operator: https://k8up.io. Lagoon isn\u2019t tightly integrated with K8up, it\u2019s more that Lagoon can create its resources in a way that K8up can automatically discover and backup.</p> <p>Lagoon has been extensively tested with K8up 1.x, but is not compatible with 2.x yet. We recommend using the 1.1.0 chart version (App version v1.2.0).</p> <ol> <li> <p>Create new AWS User with policies:</p> example K8up IAM user<pre><code>{\n\"Version\":\"2012-10-17\",\n\"Statement\":[\n{\n\"Sid\":\"VisualEditor0\",\n\"Effect\":\"Allow\",\n\"Action\":[\n\"s3:ListAllMyBuckets\",\n\"s3:CreateBucket\",\n\"s3:GetBucketLocation\"\n],\n\"Resource\":\"*\"\n},\n{\n\"Sid\":\"VisualEditor1\",\n\"Effect\":\"Allow\",\n\"Action\":\"s3:ListBucket\",\n\"Resource\":\"arn:aws:s3:::baas-*\"\n},\n{\n\"Sid\":\"VisualEditor2\",\n\"Effect\":\"Allow\",\n\"Action\":[\n\"s3:PutObject\",\n\"s3:GetObject\",\n\"s3:AbortMultipartUpload\",\n\"s3:DeleteObject\",\n\"s3:ListMultipartUploadParts\"\n],\n\"Resource\":\"arn:aws:s3:::baas-*/*\"\n}\n]\n}\n</code></pre> </li> <li> <p>Create <code>k8up-values.yml</code> (customize for your provider):</p> k8up-values.yml<pre><code>k8up:\nenvVars:\n- name: BACKUP_GLOBALS3ENDPOINT\nvalue: 'https://s3.eu-west-1.amazonaws.com'\n- name: BACKUP_GLOBALS3BUCKET\nvalue: ''\n- name: BACKUP_GLOBALKEEPJOBS\nvalue: '1'\n- name: BACKUP_GLOBALSTATSURL\nvalue: 'https://backup.lagoon.example.com'\n- name: BACKUP_GLOBALACCESSKEYID\nvalue: ''\n- name: BACKUP_GLOBALSECRETACCESSKEY\nvalue: ''\n- name: BACKUP_BACKOFFLIMIT\nvalue: '2'\n- name: BACKUP_GLOBALRESTORES3BUCKET\nvalue: ''\n- name: BACKUP_GLOBALRESTORES3ENDPOINT\nvalue: 'https://s3.eu-west-1.amazonaws.com'\n- name: BACKUP_GLOBALRESTORES3ACCESSKEYID\nvalue: ''\n- name: BACKUP_GLOBALRESTORES3SECRETACCESSKEY\nvalue: ''\ntimezone: Europe/Zurich\n</code></pre> </li> <li> <p>Install K8up:</p> Install K8up Step 1<pre><code>helm repo add appuio https://charts.appuio.ch\n</code></pre> Install K8up Step 2<pre><code>kubectl apply -f https://github.com/vshn/k8up/releases/download/v1.2.0/k8up-crd.yaml\n</code></pre> Install K8up Step 3<pre><code>helm upgrade --install --create-namespace \\\n--namespace k8up \\\n-f k8up-values.yaml \\\n--version 1.1.0 \\\nk8up appuio/k8up\n</code></pre> </li> <li> <p>Update <code>lagoon-core-values.yml</code>:</p> lagoon-core-values.yml<pre><code>s3BAASAccessKeyID: &lt;&lt;Access Key ID for restore bucket&gt;&gt;\ns3BAASSecretAccessKey: &lt;&lt;Access Key Secret for restore bucket&gt;&gt;\n</code></pre> </li> <li> <p>Redeploy <code>lagoon-core</code>.</p> </li> </ol>"},{"location":"installing-lagoon/lagoon-cli/","title":"Install the Lagoon CLI","text":"<ol> <li>Check https://github.com/uselagoon/lagoon-cli#install on how to install for your operating system. For macOS and Linux, you can use Homebrew:<ol> <li><code>brew tap uselagoon/lagoon-cli</code></li> <li><code>brew install lagoon</code></li> </ol> </li> <li> <p>The CLI needs to know how to communicate with Lagoon, so run the following command:</p> Lagoon config<pre><code>    lagoon config add \\\n--graphql https://YOUR-API-URL/graphql \\\n--ui https://YOUR-UI-URL \\\n--hostname YOUR.SSH.IP \\\n--lagoon YOUR-LAGOON-NAME \\\n--port 22\n</code></pre> </li> <li> <p>Access Lagoon by authenticating with your SSH key.</p> <ol> <li>In the Lagoon UI (the URL is in <code>values.yml</code> if you forget), go to Settings.</li> <li>Add your public SSH key.</li> <li> <p>You need to set the default Lagoon to your Lagoon so that it doesn\u2019t try to use the amazee.io defaults:</p> Lagoon config<pre><code>    lagoon config default --lagoon &lt;YOUR-LAGOON-NAME&gt;\n</code></pre> </li> </ol> </li> <li> <p>Now run <code>lagoon login</code>. Lagoon talks to SSH and authenticates against your public/private key pair, and gets a token for your username.</p> </li> <li> <p>Verify via <code>lagoon whoami</code> that you are logged in.</p> </li> </ol> <p>Info</p> <p>We don\u2019t generally recommend using the Lagoon Admin role, but you\u2019ll need to create an admin account at first to get started. Ideally, you\u2019ll immediately create another account to work from which is not an admin.</p>"},{"location":"installing-lagoon/lagoon-core/","title":"Install Lagoon Core","text":""},{"location":"installing-lagoon/lagoon-core/#install-the-helm-chart","title":"Install the Helm chart","text":"<ol> <li> <p>Add Lagoon Charts repository to your Helm Repositories:</p> Add Lagoon Charts repository<pre><code>helm repo add lagoon https://uselagoon.github.io/lagoon-charts/\n</code></pre> </li> <li> <p>Create a directory for the configuration files we will create, and make sure that it\u2019s version controlled. Ensure that you reference this path in commands referencing your <code>values.yml</code> files.</p> </li> <li>Create <code>values.yml</code> in the directory you\u2019ve just created. Update the endpoint URLs (change them from <code>api.lagoon.example.com</code> to your values).    Example: https://github.com/uselagoon/lagoon-charts/blob/main/charts/lagoon-core/ci/linter-values.yaml</li> <li> <p>Now run <code>helm upgrade --install</code> command, pointing to <code>values.yml</code>, like so:</p> Upgrade Helm with values.yml<pre><code>helm upgrade --install --create-namespace --namespace lagoon-core -f values.yml lagoon-core lagoon/lagoon-core`\n</code></pre> </li> <li> <p>Lagoon Core is now installed!</p> </li> </ol> <p>Warning</p> <p>Sometimes we run into Docker Hub pull limits. We are considering moving our images elsewhere if this continues to be a problem.</p>"},{"location":"installing-lagoon/lagoon-core/#configure-keycloak","title":"Configure Keycloak","text":"<p>Visit the Keycloak dashboard at the URL you defined in the <code>values.yml</code> for Keycloak.</p> <ol> <li>Click \"Administration Console\"</li> <li>Username: <code>admin</code></li> <li>Password: use <code>lagoon-core-keycloak</code> secret, key-value <code>KEYCLOAK_ADMIN_PASSWORD</code></li> <li> <p>Retrieve the secret like so:</p> Retrieve secret<pre><code>kubectl -n lagoon-core get secret lagoon-core-keycloak -o jsonpath=\"{.data.KEYCLOAK_ADMIN_PASSWORD}\" | base64 --decode\n</code></pre> </li> <li> <p>Click on User on top right.</p> <ol> <li>Go to Manage Account.</li> <li>Add an Email for the admin account you created.</li> <li>Save.</li> </ol> </li> <li>Go to Realm Lagoon -&gt; Realm Settings -&gt; Email<ol> <li>Configure email server for Keycloak, test connection via \u201cTest connection\u201d button.</li> </ol> </li> <li>Go to Realm Lagoon -&gt; Realm Settings -&gt; Login<ol> <li>Enable \u201cForgot Password\u201d</li> <li>Save.</li> </ol> </li> </ol>"},{"location":"installing-lagoon/lagoon-core/#log-in-to-the-ui","title":"Log in to the UI","text":"<p>You should now be able to visit the Lagoon UI at the URL you defined in the <code>values.yml</code> for the UI.</p> <ol> <li>Username: <code>lagoonadmin</code></li> <li>Secret: use <code>lagoon-core-keycloak</code> secret key-value: <code>LAGOON-CORE-KEYCLOAK</code></li> <li>Retrieve the secret:Retrieve secret<pre><code>    kubectl -n lagoon-core get secret lagoon-core-keycloak -o jsonpath=\"{.data.KEYCLOAK_LAGOON_ADMIN_PASSWORD}\" | base64 --decode\n</code></pre> </li> </ol>"},{"location":"installing-lagoon/lagoon-files/","title":"Lagoon Files","text":"<p>Lagoon files are used to store the file output of tasks, such as backups, and can be hosted on any S3-compatible storage.</p> <ol> <li> <p>Create new AWS User with policies:</p> Example files IAM user<pre><code>{\n\"Version\":\"2012-10-17\",\n\"Statement\":[\n{\n\"Effect\":\"Allow\",\n\"Action\":[\n\"s3:ListBucket\",\n\"s3:GetBucketLocation\",\n\"s3:ListBucketMultipartUploads\"\n],\n\"Resource\":\"arn:aws:s3:::S3_BUCKET_NAME\"\n},\n{\n\"Effect\":\"Allow\",\n\"Action\":[\n\"s3:PutObject\",\n\"s3:GetObject\",\n\"s3:DeleteObject\",\n\"s3:ListMultipartUploadParts\",\n\"s3:AbortMultipartUpload\"\n],\n\"Resource\":\"arn:aws:s3:::S3_BUCKET_NAME/*\"\n}\n]\n}\n</code></pre> </li> <li> <p>Update <code>lagoon-core-values.yml</code>:</p> lagoon-core-values.yml<pre><code>s3FilesAccessKeyID: &lt;&lt;Access Key ID&gt;&gt;\ns3FilesBucket: &lt;&lt;Bucket Name for Lagoon Files&gt;&gt;\ns3FilesHost: &lt;&lt;S3 endpoint like \"https://s3.eu-west-1.amazonaws.com\" &gt;&gt;\ns3FilesSecretAccessKey: &lt;&lt;Access Key Secret&gt;&gt;\ns3FilesRegion: &lt;&lt;S3 Region &gt;&gt;\n</code></pre> </li> <li> <p>If you use <code>ingress-nginx</code> in front of <code>lagoon-core</code>, we suggest setting this configuration which will allow for bigger file uploads:</p> lagoon-core-values.yml<pre><code>controller:\nconfig:\nclient-body-timeout: '600' # max 600 secs fileuploads\nproxy-send-timeout: '1800' # max 30min connections - needed for websockets\nproxy-read-timeout: '1800' # max 30min connections - needed for websockets\nproxy-body-size: 1024m # 1GB file size\nproxy-buffer-size: 64k # bigger buffer\n</code></pre> </li> </ol>"},{"location":"installing-lagoon/lagoon-logging/","title":"Lagoon Logging","text":"<p>Lagoon integrates with OpenSearch to store application, container and router logs. Lagoon Logging collects the application, router and container logs from Lagoon projects, and sends them to the logs concentrator.  It needs to be installed onto each <code>lagoon-remote</code> instance.</p> <p>In addition, it should be installed in the <code>lagoon-core</code> cluster to collect logs from the <code>lagoon-core</code> service.  This is configured in the <code>LagoonLogs</code> section.</p> <p>Logging Overview: Lucid Chart</p> <p>See also: Logging.</p> <p>Read more about Lagoon logging here: https://github.com/uselagoon/lagoon-charts/tree/main/charts/lagoon-logging</p> <ol> <li> <p>Create <code>lagoon-logging-values.yaml</code>:</p> lagoon-logging-values.yaml<pre><code>tls:\ncaCert: |\n&lt;&lt; content of ca.pem from Logs-Concentrator&gt;&gt;\nclientCert: |\n&lt;&lt; content of client.pem from Logs-Concentrator&gt;&gt;\nclientKey: |\n&lt;&lt; content of client-key.pem from Logs-Concentrator&gt;&gt;\nforward:\nusername: &lt;&lt;Username for Lagoon Remote 1&gt;&gt;\npassword: &lt;&lt;Password for Lagoon Remote 1&gt;&gt;\nhost: &lt;&lt;ExternalIP of Logs-Concentrator Service LoadBalancer&gt;&gt;\nhostName: &lt;&lt;Hostname in Server Cert of Logs-Concentrator&gt;&gt;\nhostPort: '24224'\nselfHostname: &lt;&lt;Hostname in Client Cert of Logs-Concentrator&gt;&gt;\nsharedKey: &lt;&lt;Generated ForwardSharedKey of Logs-Concentrator&gt;&gt;\ntlsVerifyHostname: false\nclusterName: &lt;&lt;Short Cluster Identifier&gt;&gt;\nlogsDispatcher:\nserviceMonitor:\nenabled: false\nlogging-operator:\nmonitoring:\nserviceMonitor:\nenabled: false\nlagoonLogs:\nenabled: true\nrabbitMQHost: lagoon-core-broker.lagoon-core.svc.cluster.local\nrabbitMQUser: lagoon\nrabbitMQPassword: &lt;&lt;RabbitMQ Lagoon Password&gt;&gt;\nexcludeNamespaces: {}\n</code></pre> </li> <li> <p>Install <code>lagoon-logging</code>:</p> Install lagoon-logging<pre><code>helm repo add banzaicloud-stable https://kubernetes-charts.banzaicloud.com\n\nhelm upgrade --install --create-namespace \\\n--namespace lagoon-logging \\\n-f lagoon-logging-values.yaml \\\nlagoon-logging lagoon/lagoon-logging\n</code></pre> </li> </ol>"},{"location":"installing-lagoon/lagoon-logging/#logging-nginx-ingress-controller","title":"Logging NGINX Ingress Controller","text":"<p>If you'd like logs from <code>ingress-nginx</code> inside <code>lagoon-logging</code>:</p> <ol> <li>The ingress controller must be installed in the namespace <code>ingress-nginx</code></li> <li> <p>Add the content of this file to <code>ingress-nginx</code>:</p> ingress-nginx log-format-upstream<pre><code>controller:\nconfig:\nlog-format-upstream: &gt;-\n{\n\"time\": \"$time_iso8601\",\n\"remote_addr\": \"$remote_addr\",\n\"x-forwarded-for\": \"$http_x_forwarded_for\",\n\"true-client-ip\": \"$http_true_client_ip\",\n\"req_id\": \"$req_id\",\n\"remote_user\": \"$remote_user\",\n\"bytes_sent\": $bytes_sent,\n\"request_time\": $request_time,\n\"status\": \"$status\",\n\"host\": \"$host\",\n\"request_proto\": \"$server_protocol\",\n\"request_uri\": \"$uri\",\n\"request_query\": \"$args\",\n\"request_length\": $request_length,\n\"request_time\": $request_time,\n\"request_method\": \"$request_method\",\n\"http_referer\": \"$http_referer\",\n\"http_user_agent\": \"$http_user_agent\",\n\"namespace\": \"$namespace\",\n\"ingress_name\": \"$ingress_name\",\n\"service_name\": \"$service_name\",\n\"service_port\": \"$service_port\"\n}\n</code></pre> </li> <li> <p>Your logs should start flowing!</p> </li> </ol>"},{"location":"installing-lagoon/logs-concentrator/","title":"Logs-Concentrator","text":"<p>Logs-concentrator collects the logs being sent by Lagoon clusters and augments them with additional metadata before inserting them into Elasticsearch.</p> <ol> <li>Create certificates according to ReadMe: https://github.com/uselagoon/lagoon-charts/tree/main/charts/lagoon-logs-concentrator</li> <li> <p>Create <code>logs-concentrator-values.yml</code>:</p> logs-concentrator-values.yml<pre><code>tls:\ncaCert: |\n&lt;&lt;contents of ca.pem&gt;&gt;\nserverCert: |\n&lt;&lt;contents of server.pem\nserverKey: |\n&lt;&lt;contents of server-key.pem&gt;&gt;\nelasticsearchHost: elasticsearch-opendistro-es-client-service.elasticsearch.svc.cluster.local\nelasticsearchAdminPassword: &lt;&lt;ElasticSearch Admin Password&gt;&gt;\nforwardSharedKey: &lt;&lt;Random 32 Character Password&gt;&gt;\nusers:\n- username: &lt;&lt;Username for Lagoon Remote 1&gt;&gt;\npassword: &lt;&lt;Random Password for Lagoon Remote 1&gt;&gt;\nservice:\ntype: LoadBalancer\nserviceMonitor:\nenabled: false\n</code></pre> </li> <li> <p>Install logs-concentrator:</p> Install logs-concentrator<pre><code>helm upgrade --install --create-namespace \\\n--namespace lagoon-logs-concentrator \\\n-f logs-concentrator-values.yaml \\\nlagoon-logs-concentrator lagoon/lagoon-logs-concentrator\n</code></pre> </li> </ol>"},{"location":"installing-lagoon/opendistro/","title":"OpenDistro","text":"<p>To install an OpenDistro cluster, you will need to configure TLS and secrets so that Lagoon can talk to it securely. You're going to have to create a handful of JSON files - put these in the same directory as the values files you've been creating throughout this installation process.</p> <p>Install OpenDistro Helm, according to https://opendistro.github.io/for-elasticsearch-docs/docs/install/helm/</p>"},{"location":"installing-lagoon/opendistro/#create-keys-and-certificates","title":"Create Keys and Certificates","text":"<ol> <li> <p>Generate certificates</p> <p>Note:</p> <p>CFSSL is CloudFlare's PKI/TLS swiss army knife. It is both a command line tool and an HTTP API server for signing, verifying, and bundling TLS certificates. It requires Go 1.12+ to build.</p> <ol> <li>Install CFSSL:  https://github.com/cloudflare/cfssl</li> <li>Generate CA. You'll need the following file:</li> </ol> ca-csr.json<pre><code>{\n\"CN\": \"ca.elasticsearch.svc.cluster.local\",\n\"hosts\": [\n\"ca.elasticsearch.svc.cluster.local\"\n],\n\"key\": {\n\"algo\": \"ecdsa\",\n\"size\": 256\n},\n\"ca\": {\n\"expiry\": \"87600h\"\n}\n}\n</code></pre> </li> <li> <p>Run the following two commands:</p> Generate certificate<pre><code>cfssl gencert -initca ca-csr.json | cfssljson -bare ca -\nrm ca.csr\n</code></pre> <p>You'll get <code>ca-key.pem</code>, and <code>ca.pem</code>. This is your CA key and self-signed certificate.</p> </li> <li> <p>Next, we'll generate the node peering certificate. You'll need the following two files:</p> ca-config.json<pre><code>{\n\"signing\": {\n\"default\": {\n\"expiry\": \"87600h\"\n},\n\"profiles\": {\n\"peer\": {\n\"expiry\": \"87600h\",\n\"usages\": [\n\"signing\",\n\"key encipherment\",\n\"server auth\",\n\"client auth\"\n]\n},\n\"client\": {\n\"expiry\": \"87600h\",\n\"usages\": [\n\"signing\",\n\"key encipherment\",\n\"client auth\"\n]\n}\n}\n}\n}\n</code></pre> node.json<pre><code>{\n\"hosts\": [\n\"node.elasticsearch.svc.cluster.local\"\n],\n\"CN\": \"node.elasticsearch.svc.cluster.local\",\n\"key\": {\n\"algo\": \"ecdsa\",\n\"size\": 256\n}\n}\n</code></pre> </li> <li> <p>Run the following two commands:</p> Generate certificate keys<pre><code>cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=peer node.json | cfssljson -bare node\nrm node.csr\n</code></pre> <p>You'll get <code>node.pem</code> and <code>node-key.pem</code>. This is the peer certificate that will be used by nodes in the ES cluster.</p> </li> <li> <p>Next, we'll convert the key to the format supported by Java with the following command:</p> Convert key format<pre><code>openssl pkey -in node-key.pem -out node-key.pkcs8\n</code></pre> </li> <li> <p>Now we'll generate the admin certificate. You'll need the following file:</p> admin.json<pre><code>{\n\"CN\": \"admin.elasticsearch.svc.cluster.local\",\n\"key\": {\n\"algo\": \"ecdsa\",\n\"size\": 256\n}\n}\n</code></pre> </li> <li> <p>Run the following two commands:</p> Generate admin certificate keys<pre><code>cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=client admin.json | cfssljson -bare admin\nrm admin.csr\n</code></pre> <p>You'll get <code>admin.pem</code> and <code>admin-key.pem</code>. This is the certificate that will be used to perform admin commands on the opendistro-security plugin.</p> </li> <li> <p>Next, we'll convert the key to the format supported by Java with the following command:</p> Convert key format<pre><code>openssl pkey -in admin-key.pem -out admin-key.pkcs8\n</code></pre> </li> </ol>"},{"location":"installing-lagoon/opendistro/#installing-opendistro","title":"Installing OpenDistro","text":"<p>Now that we have our keys and certificates, we can continue with the installation.</p> <ol> <li> <p>Generate hashed passwords.</p> <ol> <li>The <code>elasticsearch-secrets-values.yaml</code> needs two hashed passwords. Create them with this command (run it twice, enter a random password, store both the plaintext and hashed passwords).</li> </ol> Generate hashed passwords<pre><code>docker run --rm -it docker.io/amazon/opendistro-for-elasticsearch:1.12.0 sh -c \"chmod +x /usr/share/elasticsearch/plugins/opendistro_security/tools/hash.sh; /usr/share/elasticsearch/plugins/opendistro_security/tools/hash.sh\"\n</code></pre> </li> <li> <p>Create secrets:</p> <ol> <li>You'll need to create <code>elasticsearch-secrets-values.yaml</code>. See this gist as an example: https://gist.github.com/Schnitzel/43f483dfe0b23ca0dddd939b12bb4b0b</li> </ol> </li> <li> <p>Install secrets with the following commands:</p> Install secrets<pre><code>helm repo add incubator https://charts.helm.sh/incubator`\nhelm upgrade --namespace elasticsearch --create-namespace --install elasticsearch-secrets incubator/raw --values elasticsearch-secrets-values.yaml `\n</code></pre> </li> <li> <p>You'll need to create <code>elasticsearch-values.yaml</code>.  See this gist as an example: (fill all &lt;\\&gt; with values) https://gist.github.com/Schnitzel/1e386654b6abf75bf4d66a544db4aa6a <li> <p>Install Elasticsearch:</p> Install Elasticsearch<pre><code>helm upgrade --namespace elasticsearch --create-namespace --install elasticsearch opendistro-es-X.Y.Z.tgz --values elasticsearch-values.yaml\n</code></pre> </li> <li> <p>Configure security inside Elasticsearch with the following:</p> Configure security<pre><code>kubectl exec -n elasticsearch -it elasticsearch-opendistro-es-master-0 -- bash\nchmod +x /usr/share/elasticsearch/plugins/opendistro_security/tools/securityadmin.sh\n/usr/share/elasticsearch/plugins/opendistro_security/tools/securityadmin.sh -nhnv -cacert /usr/share/elasticsearch/config/admin-root-ca.pem -cert /usr/share/elasticsearch/config/admin-crt.pem -key /usr/share/elasticsearch/config/admin-key.pem -cd /usr/share/elasticsearch/plugins/opendistro_security/securityconfig/\n</code></pre> </li> <li> <p>Update <code>lagoon-core-values.yaml</code> with:</p> lagoon-core-values.yaml<pre><code>elasticsearchURL: http://elasticsearch-opendistro-es-client-service.elasticsearch.svc.cluster.local:9200\nkibanaURL: https://&lt;&lt;Kibana Public URL&gt;&gt;\nlogsDBAdminPassword: \"&lt;&lt;PlainText Elasticsearch Admin Password&gt;&gt;\"\n</code></pre> </li> <li> <p>Rollout Lagoon Core:</p> Rollout Lagoon Core<pre><code>helm upgrade --install --create-namespace --namespace lagoon-core -f values.yaml lagoon-core lagoon/lagoon-core\n</code></pre> </li> <li> <p>Sync all Lagoon Groups with Opendistro Elasticsearch</p> Sync groups<pre><code>kubectl -n lagoon-core exec -it deploy/lagoon-core-api -- sh\nyarn run sync:opendistro-security\n</code></pre> </li>"},{"location":"installing-lagoon/querying-graphql/","title":"Querying with GraphQL","text":"<ol> <li> <p>You\u2019ll need an app for sending and receiving GraphQL queries. We recommend GraphiQL.</p> <ol> <li>If you\u2019re using Homebrew, you can install it with <code>brew install --cask graphiql</code>.</li> </ol> </li> <li> <p>We need to tell Lagoon Core about the Kubernetes cluster. The GraphQL endpoint is: <code>https://&lt;YOUR-API-URL&gt;/graphql</code></p> </li> <li> <p>Go to Edit HTTP Headers, and Add Header.</p> <ol> <li>Header Name: <code>Authorization</code></li> <li>Value: <code>Bearer YOUR-TOKEN-HERE</code></li> <li>In your home directory, the Lagoon CLI has created a <code>.lagoon.yml</code> file. Copy the token from that file and use it for the value here.</li> <li>Save.</li> </ol> </li> <li> <p>Now you\u2019re ready to run some queries. Run the following test query to ensure everything is working correctly:</p> Get all projects<pre><code>query allProjects {allProjects {name } }\n</code></pre> </li> <li> <p>This should give you the following response:</p> API Response<pre><code>  {\n    \"data\": {\n      \"allProjects\": []\n    }\n  }\n</code></pre> <p>Read more about GraphQL here in our documentation.</p> </li> <li> <p>Once you get the correct response, we need to add a mutation.</p> <ol> <li> <p>Run the following query:</p> Add mutation<pre><code>mutation addKubernetes {\naddKubernetes(input:\n{\nname: \"&lt;TARGET-NAME-FROM-REMOTE-VALUES.yml&gt;\",\nconsoleUrl: \"&lt;URL-OF-K8S-CLUSTER&gt;\",\ntoken: \"xxxxxx\u201d\nrouterPattern: \"${environment}.${project}.lagoon.example.com\"\n}){id}\n}\n</code></pre> <ol> <li><code>name</code>: get from <code>lagoon-remote-values.yml</code></li> <li><code>consoleUrl</code>: API Endpoint of Kubernetes cluster. Get from <code>values.yml</code></li> <li> <p><code>token</code>: get a token for the <code>ssh-core</code> service account</p> Get token<pre><code>kubectl -n lagoon get secret/lagoon-remote-ssh-core-token -o json | jq -r '.data.token | @base64d'\n</code></pre> </li> </ol> </li> </ol> </li> </ol> <p>Info</p> <p>Authorization tokens for GraphQL are very short term so you may need to generate a new one. Run <code>lagoon login</code> and then cat the <code>.lagoon.yml</code> file to get the new token, and replace the old token in the HTTP header with the new one.</p>"},{"location":"installing-lagoon/requirements/","title":"Installing Lagoon Into Existing Kubernetes Cluster","text":""},{"location":"installing-lagoon/requirements/#requirements","title":"Requirements","text":"<ul> <li>Kubernetes 1.23+ (Kubernetes 1.21 is supported, but 1.23 is recommended)</li> <li>Familiarity with Helm and Helm Charts, and kubectl.</li> <li>Ingress controller, we recommend ingress-nginx, installed into ingress-nginx namespace</li> <li>Cert manager (for TLS) - We highly recommend using letsencrypt</li> <li>StorageClasses (RWO as default, RWM for persistent types)</li> </ul> <p>Note</p> <p>We acknowledge that this is a lot of steps, and our roadmap for the immediate future includes reducing the number of steps in this process.</p>"},{"location":"installing-lagoon/requirements/#specific-requirements-as-of-january-2023","title":"Specific requirements (as of January 2023)","text":""},{"location":"installing-lagoon/requirements/#kubernetes","title":"Kubernetes","text":"<p>Lagoon supports Kubernetes versions 1.21 onwards. We actively test and develop against Kubernetes 1.24, also regularly testing against 1.21,1.22 and 1.25.</p> <p>The next large round of breaking changes is in Kubernetes 1.25, and we will endeavour to be across these in advance, although this will require a bump in the minimum supported version of Lagoon.</p>"},{"location":"installing-lagoon/requirements/#ingress-nginx","title":"ingress-nginx","text":"<p>Lagoon is currently configured only for a single <code>ingress-nginx</code> controller, and therefore defining an <code>IngressClass</code> was not necessary in the past.</p> <p>In order to use the recent <code>ingress-nginx</code> controllers (v4 onwards, required for Kubernetes 1.22), the following configuration should be used, as per the <code>ingress-nginx</code> docs.</p> <ul> <li><code>nginx-ingress</code> should be configured as the default controller - set <code>.controller.ingressClassResource.default: true</code> in Helm values</li> <li><code>nginx-ingress</code> should be configured to watch ingresses without <code>IngressClass</code> set - set <code>.controller.watchIngressWithoutClass: true</code> in Helm values</li> </ul> <p>This will configure the controller to create any new ingresses with itself as the <code>IngressClass</code>, and also to handle any existing ingresses without an <code>IngressClass</code> set.</p> <p>Other configurations may be possible, but have not been tested.</p>"},{"location":"installing-lagoon/requirements/#harbor","title":"Harbor","text":"<p>Versions 2.1 and 2.2+ of Harbor are currently supported. The method of retrieving robot accounts was changed in 2.2, and the Lagoon remote-controller is able to handle these tokens. This means that Harbor has to be configured with the credentials in <code>lagoon-build-deploy</code> - not <code>lagoon-core</code>.</p> <p>We recommend installing a Harbor version greater than 2.6.0 with Helm chart 1.10.0 or greater.</p>"},{"location":"installing-lagoon/requirements/#k8up-for-backups","title":"k8up for backups","text":"<p>Lagoon has built in configuration for the K8up backup operator. Lagoon can configure prebackup pods, schedules and retentions, and manage backups and restores for K8up. Lagoon currently only supports the 1.x versions of K8up, owing to a namespace change in v2 onwards, but we are working on a fix.</p> <p>K8up v2:</p> <p>Lagoon does not currently support K8up v2 onwards due to a namespace change here.</p> <p>We recommend installing K8up version 1.2.0 with Helm Chart 1.1.0</p>"},{"location":"installing-lagoon/requirements/#storage-provisioners","title":"Storage provisioners","text":"<p>Lagoon utilizes a default 'standard' <code>StorageClass</code> for most workloads, and the internal provisioner for most Kubernetes platforms will suffice. This should be configured to be dynamic provisioning and expandable where possible.</p> <p>Lagoon also requires a <code>StorageClass</code> called 'bulk' to be available to support persistant pod replicas (across nodes). This <code>StorageClass</code> should support <code>ReadWriteMany</code> (RWX) access mode and should be configured to be dynamic provisioning and expandable where possible. See https://kubernetes.io/docs/concepts/storage/persistent-volumes/#access-modes for more information, and the production drivers list for a complete list of compatible drivers.</p> <p>We have curently only included the instructions a generic Bulk Storage provisioner using NFS Bulk Storage Provisioner. In AWS the production EFS CSI driver is limited to provisioning no more than 1000 PVCs. We are awaiting an upstream possible fix here - but most other providers CSI drivers should also work, as will configurations with an NFS-compatible server and provisioner.</p>"},{"location":"installing-lagoon/requirements/#how-much-kubernetes-experienceknowledge-is-required","title":"How much Kubernetes experience/knowledge is required?","text":"<p>Lagoon uses some very involved Kubernetes and cloud-native concepts, and while full familiarity may not be necessary to install and configure Lagoon, diagnosing issues and contributing may prove difficult without a good level of familiarity.</p> <p>As an indicator, comfort with the curriculum for the Certified Kubernetes Administrator would be suggested as a minimum.</p>"},{"location":"installing-lagoon/update-lagoon/","title":"Updating","text":"<ol> <li> <p>Download newest charts using Helm.</p> Download newest charts<pre><code>helm repo update\n</code></pre> </li> <li> <p>Check with <code>helm diff</code> for changes (https://github.com/databus23/helm-diff).</p> Check for changes<pre><code>helm diff upgrade --install --create-namespace --namespace lagoon-core \\\n-f values.yml lagoon-core lagoon/lagoon-core\n</code></pre> </li> <li> <p>Back up the Lagoon databases prior to any Helm actions.    We also suggest scaling the API to a single pod, to aid the database migration scripts running in the initContainers.</p> </li> <li> <p>Run the upgrade using Helm.</p> Run upgrade<pre><code>helm upgrade --install --create-namespace --namespace lagoon-core \\\n-f values.yaml lagoon-core lagoon/lagoon-core\n</code></pre> </li> <li> <p>(Note that as of Lagoon v2.11.0, this step is no longer required.)     If upgrading Lagoon Core, ensure you run the <code>rerun_initdb.sh</code> script to perform post upgrade migrations.</p> Run script<pre><code>kubectl --namespace lagoon-core exec -it lagoon-core-api-db-0 -- \\\nsh -c /rerun_initdb.sh\n</code></pre> </li> <li> <p>Re-scale the API pods back to their original level.</p> </li> <li> <p>If upgrading Lagoon Core, and you have enabled groups/user syncing for OpenSearch, you may additionally need to run the <code>sync:opendistro-security</code> script to update the groups in OpenSearch. This command can also be prefixed with a <code>GROUP_REGEX=&lt;group-to-sync</code> to sync a single group at a time, as syncing the entire group structure may take a long time.</p> Run script<pre><code>kubectl --namespace lagoon-core exec -it deploy/lagoon-core-api -- \\\nsh -c yarn sync:opendistro-security\n</code></pre> </li> </ol> <p>Check https://github.com/uselagoon/lagoon/releases for additional upgrades.</p>"},{"location":"installing-lagoon/update-lagoon/#database-backups","title":"Database Backups","text":"<p>You may want to back up the databases before upgrading Lagoon Core, the following will create backups you can use to restore from if required. You can delete them afterwards.</p>"},{"location":"installing-lagoon/update-lagoon/#api-db","title":"API DB","text":"Back up API DB<pre><code>kubectl --namespace lagoon-core exec -it lagoon-core-api-db-0 -- \\\nsh -c 'mysqldump --max-allowed-packet=500M --events \\\n    --routines --quick --add-locks --no-autocommit \\\n    --single-transaction infrastructure | gzip -9 &gt; \\\n    /var/lib/mysql/backup/$(date +%Y-%m-%d_%H%M%S).infrastructure.sql.gz'\n</code></pre>"},{"location":"installing-lagoon/update-lagoon/#keycloak-db","title":"Keycloak DB","text":"Back up Keycloak DB<pre><code>kubectl --namespace lagoon-core exec -it lagoon-core-keycloak-db-0 -- \\\nsh -c 'mysqldump --max-allowed-packet=500M --events \\\n    --routines --quick --add-locks --no-autocommit \\\n    --single-transaction keycloak | gzip -9 &gt; \\\n    /var/lib/mysql/backup/$(date +%Y-%m-%d_%H%M%S).keycloak.sql.gz'\n</code></pre>"},{"location":"interacting/graphql-queries/","title":"GraphQL API","text":""},{"location":"interacting/graphql-queries/#running-graphql-queries","title":"Running GraphQL queries","text":"<p>Direct API interactions in Lagoon are done via GraphQL.</p> <p>In order to authenticate with the API, we need a JWT (JSON Web Token) that allows us to use the GraphQL API as admin. To generate this token, open the terminal of the <code>storage-calculator</code> pod via your Kubernetes UI, or via kubectl and run the following command:</p> Generate JWT token.<pre><code>./create_jwt.py\n</code></pre> <p>This will return a long string which is the JWT token. Make a note of this, as we will need it to send queries.</p> <p>We also need the URL of the API endpoint, which can be found under \"Ingresses\" in your Kubernetes UI or via kubectl on the command line. Make a note of this endpoint URL, which we will also need.</p> <p>To compose and send GraphQL queries, we recommend GraphiQL.app, a desktop GraphQL client with features such as autocomplete. To continue with the next steps, install and start the app.</p> <p>Under \"GraphQL Endpoint\", enter the API endpoint URL with <code>/graphql</code> on the end. Then click on \"Edit HTTP Headers\" and add a new header:</p> <ul> <li>\"Header name\": <code>Authorization</code></li> <li>\"Header value\": <code>Bearer [JWT token]</code> (make sure that the JWT token has no spaces, as this would not work)</li> </ul> <p>Press ESC to close the HTTP header overlay and now we are ready to send the first GraphQL request!</p> <p></p> <p>Enter this in the left panel</p> Running a query<pre><code>query allProjects{\nallProjects {\nname\n}\n}\n</code></pre> <p></p> <p>And press the \u25b6\ufe0f button (or press CTRL+ENTER).</p> <p>If all went well, your first GraphQL response should appear shortly afterwards in the right pane.</p>"},{"location":"interacting/graphql-queries/#creating-the-first-project","title":"Creating the first project","text":"<p>Let's create the first project for Lagoon to deploy! For this we'll use the queries from the GraphQL query template in <code>create-project.gql</code>.</p> <p>For each of the queries (the blocks starting with <code>mutation {</code>), fill in all of the empty fields marked by TODO comments and run the queries in GraphiQL.app. This will create one of each of the following two objects:</p> <ol> <li><code>kubernetes</code> : The Kubernetes (or Openshift) cluster to which Lagoon should deploy. Lagoon is not only capable of deploying to its own Kubernetes cluster, but also to any Kubernetes cluster anywhere in the world.</li> <li><code>project</code> : The Lagoon project to be deployed, which is a Git repository with a <code>.lagoon.yml</code> configuration file committed in the root.</li> </ol>"},{"location":"interacting/graphql-queries/#allowing-access-to-the-project","title":"Allowing access to the project","text":"<p>In Lagoon, each developer authenticates via their SSH key(s). This determines their access to:</p> <ol> <li>The Lagoon API, where they can see and edit projects they have access to.</li> <li>Remote shell access to containers that are running in projects they have access to.</li> <li>The Lagoon logging system, where a developer can find request logs, container logs, Lagoon logs and more.</li> </ol> <p>To allow access to the project, we first need to add a new group to the API:</p> Add group to API<pre><code>mutation {\naddGroup (\ninput: {\n# TODO: Enter the name for your new group.\nname: \"\"\n}\n)     {\nid\nname\n}\n}\n</code></pre> <p>Then we need to add a new user to the API:</p> Add new user to API<pre><code>mutation {\naddUser(\ninput: {\nemail: \"michael.schmid@example.com\"\nfirstName: \"Michael\"\nlastName: \"Schmid\"\ncomment: \"CTO\"\n}\n) {\n# TODO: Make a note of the user ID that is returned.\nid\n}\n}\n</code></pre> <p>Then we can add an SSH public key for the user to the API:</p> Add SSH public key for the user to API<pre><code>mutation {\naddSshKey(\ninput: {\n# TODO: Fill in the name field.\n# This is a non-unique identifier for the SSH key.\nname: \"\"\n# TODO: Fill in the keyValue field.\n# This is the actual SSH public key (without the type at the beginning and without the comment at the end, ex. `AAAAB3NzaC1yc2EAAAADAQ...3QjzIOtdQERGZuMsi0p`).\nkeyValue: \"\"\n# TODO: Fill in the keyType field.\n# Valid values are either SSH_RSA, SSH_ED25519, ECDSA_SHA2_NISTP256/384/521\nkeyType: SSH_RSA\nuser: {\n# TODO: Fill in the userId field.\n# This is the user ID that we noted from the addUser query.\nid:\"0\",\nemail:\"michael.schmid@example.com\"\n}\n}\n) {\nid\n}\n}\n</code></pre> <p>After we add the key, we need to add the user to a group:</p> Add user to group<pre><code>mutation {\naddUserToGroup (\ninput: {\nuser: {\n#TODO: Enter the email address of the user.\nemail: \"\"\n}\ngroup: {\n#TODO: Enter the name of the group you want to add the user to.\nname: \"\"\n}\n#TODO: Enter the role of the user.\nrole: OWNER\n}\n) {\nid\nname\n}\n}\n</code></pre> <p>After running one or more of these kinds of queries, the user will be granted access to create tokens via SSH, access containers and more.</p>"},{"location":"interacting/graphql-queries/#adding-notifications-to-the-project","title":"Adding notifications to the project","text":"<p>If you want to know what is going on during a deployment, we suggest configuring notifications for your project, which provide:</p> <ul> <li>Push notifications</li> <li>Build start information</li> <li>Build success or failure messages</li> <li>And many more!</li> </ul> <p>As notifications can be quite different in terms of the information they need, each notification type has its own mutation.</p> <p>As with users, we first add the notification:</p> Add notification<pre><code>mutation {\naddNotificationSlack(\ninput: {\n# TODO: Fill in the name field.\n# This is your own identifier for the notification.\nname: \"\"\n# TODO: Fill in the channel field.\n# This is the channel for the message to be sent to.\nchannel: \"\"\n# TODO: Fill in the webhook field.\n# This is the URL of the webhook where messages should be sent, this is usually provided by the chat system to you.\nwebhook: \"\"\n}\n) {\nid\n}\n}\n</code></pre> <p>After the notification is created, we can now assign it to our project:</p> Assign notification to project<pre><code>mutation {\naddNotificationToProject(\ninput: {\nnotificationType: SLACK\n# TODO: Fill in the project field.\n# This is the project name.\nproject: \"\"\n# TODO: Fill in the notification field.\n# This is the notification name.\nnotificationName: \"\"\n# TODO: OPTIONAL\n# The kind notification class you're interested in defaults to DEPLOYMENT\ncontentType: DEPLOYMENT/PROBLEM\n# TODO: OPTIONAL\n# Related to contentType PROBLEM, we can set the threshold for the kinds of problems\n# we'd like to be notified about\nnotificationSeverityThreshold \"NONE/UNKNOWN/NEGLIGIBLE/LOW/MEDIUM/HIGH/CRITICAL\n}\n) {\nid\n}\n}\n</code></pre> <p>Now for every deployment you will receive messages in your defined channel.</p>"},{"location":"interacting/graphql-queries/#example-graphql-queries","title":"Example GraphQL queries","text":""},{"location":"interacting/graphql-queries/#adding-a-new-kubernetes-target","title":"Adding a new Kubernetes target","text":"<p>Note</p> <p>In Lagoon, both <code>addKubernetes</code> and <code>addOpenshift</code> can be used for both Kubernetes and OpenShift targets - either will work interchangeably.</p> <p>The cluster to which Lagoon should deploy.</p> Add Kubernetes target<pre><code>mutation {\naddKubernetes(\ninput: {\n# TODO: Fill in the name field.\n# This is the unique identifier of the cluster.\nname: \"\"\n# TODO: Fill in consoleUrl field.\n# This is the URL of the Kubernetes cluster\nconsoleUrl: \"\"\n# TODO: Fill in the token field.\n# This is the token of the `lagoon` service account created in this cluster (this is the same token that we also used during installation of Lagoon).\ntoken: \"\"\n}\n) {\nname\nid\n}\n}\n</code></pre>"},{"location":"interacting/graphql-queries/#adding-a-group-to-a-project","title":"Adding a group to a project","text":"<p>This query will add a group to a project. Users of that group will be able to access the project. They will be able to make changes, based on their role in that group.</p> Add a group to a project<pre><code>mutation {\naddGroupsToProject (\ninput: {\nproject: {\n#TODO: Enter the name of the project.\nname: \"\"\n}\ngroups: {\n#TODO: Enter the name of the group that will be added to the project.\nname: \"\"\n}\n}\n) {\nid\n}\n}\n</code></pre>"},{"location":"interacting/graphql-queries/#adding-a-new-project","title":"Adding a new project","text":"<p>This query adds a new Lagoon project to be deployed, which is a Git repository with a <code>.lagoon.yml</code> configuration file committed in the root.</p> <p>If you omit the <code>privateKey</code> field, a new SSH key for the project will be generated automatically.</p> <p>If you would like to reuse a key from another project. you will need to supply the key in the <code>addProject</code> mutation.</p> Add a new project<pre><code>mutation {\naddProject(\ninput: {\n# TODO: Fill in the name field.\n# This is the project name.\nname: \"\"\n# TODO: Fill in the private key field (replace newlines with '\\n').\n# This is the private key for a project, which is used to access the Git code.\nprivateKey: \"\"\n# TODO: Fill in the Kubernetes field.\n# This is the ID of the Kubernetes or OpenShift to assign to the project.\nkubernetes: 0\n# TODO: Fill in the name field.\n# This is the project name.\ngitUrl: \"\"\n# TODO: Fill in the branches to be deployed.\nbranches: \"\"\n# TODO: Define the production environment.\nproductionEnvironment: \"\"\n}\n) {\nname\nkubernetes {\nname\nid\n}\ngitUrl\nbranches\npullrequests\n}\n}\n</code></pre>"},{"location":"interacting/graphql-queries/#list-projects-and-groups","title":"List projects and groups","text":"<p>This is a good query to see an overview of all projects, clusters and groups that exist within our Lagoon.</p> Get an overview of all projects, clusters, and groups<pre><code>query {\nallProjects {\nname\ngitUrl\n}\nallKubernetes {\nname\nid\n}\nallGroups{\nid\nname\nmembers {\n# This will display the users in this group.\nuser {\nid\nfirstName\nlastName\n}\nrole\n}\ngroups {\nid\nname\n}\n}\n}\n</code></pre>"},{"location":"interacting/graphql-queries/#single-project","title":"Single project","text":"<p>If you want a detailed look at a single project, this query has been proven quite good:</p> Take a detailed look at one project<pre><code>query {\nprojectByName(\n# TODO: Fill in the project name.\nname: \"\"\n) {\nid\nbranches\ngitUrl\npullrequests\nproductionEnvironment\nnotifications(type: SLACK) {\n... on NotificationSlack {\nname\nchannel\nwebhook\nid\n}\n}\nenvironments {\nname\ndeployType\nenvironmentType\n}\nkubernetes {\nid\n}\n}\n}\n</code></pre>"},{"location":"interacting/graphql-queries/#querying-a-project-by-its-git-url","title":"Querying a project by its Git URL","text":"<p>Don't remember the name of a project, but know the Git URL? Search no longer, there is a GraphQL query for that:</p> Query project by Git URL<pre><code>query {\nprojectByGitUrl(gitUrl: \"git@server.com:org/repo.git\") {\nname\n}\n}\n</code></pre>"},{"location":"interacting/graphql-queries/#updating-objects","title":"Updating objects","text":"<p>The Lagoon GraphQL API can not only display objects and create objects, it also has the capability to update existing objects, using a patch object.</p> <p>Update the branches to deploy within a project:</p> Update deploy branches.<pre><code>mutation {\nupdateProject(\ninput: { id: 109, patch: { branches: \"^(prod|stage|dev|update)$\" } }\n) {\nid\n}\n}\n</code></pre> <p>Update the production environment within a project:</p> <p>Warning</p> <p>This requires a redeploy in order for the changes to be reflected in the containers.</p> Update prod environment<pre><code> mutation {\nupdateProject(\ninput: { id: 109, patch: { productionEnvironment: \"main\" } }\n) {\nid\n}\n}\n</code></pre> <p>You can also combine multiple changes at once:</p> Update prod environment and set deploy branches.<pre><code>mutation {\nupdateProject(\ninput: {\nid: 109\npatch: {\nproductionEnvironment: \"main\"\nbranches: \"^(prod|stage|dev|update)$\"\n}\n}\n) {\nid\n}\n}\n</code></pre>"},{"location":"interacting/graphql-queries/#deleting-environments","title":"Deleting Environments","text":"<p>You can also use the Lagoon GraphQL API to delete an environment. You'll need to know the project name and the environment name in order to run the command.</p> Delete environment.<pre><code>mutation {\ndeleteEnvironment(\ninput: {\n# TODO: Fill in the name field.\n# This is the environment name.\nname:\"\"\n# TODO: Fill in the project field.\n# This is the project name.\nproject:\"\"\nexecute:true\n}\n)\n}\n</code></pre>"},{"location":"interacting/graphql-queries/#querying-a-project-to-see-what-groups-and-users-are-assigned","title":"Querying a project to see what groups and users are assigned","text":"<p>Want to see what groups and users have access to a project? Want to know what their roles are? Do I have a query for you! Using the query below you can search for a project and display the groups, users, and roles that are assigned to that project.</p> Query groups, users, and roles assigned to project<pre><code>query search{\nprojectByName(\n#TODO: Enter the name of the project.\nname: \"\"\n) {\nid,\nbranches,\nproductionEnvironment,\npullrequests,\ngitUrl,\nkubernetes {\nid\n},\ngroups{\nid\nname\ngroups {\nid\nname\n}\nmembers {\nrole\nuser {\nid\nemail\n}\n}\n}\n}\n}\n</code></pre>"},{"location":"interacting/graphql-queries/#maintaining-project-metadata","title":"Maintaining project metadata","text":"<p>Project metadata can be assigned using arbitrary key/value pairs. Projects can then be queried by the associated metadata; for example you may categorize projects by type of software, version number, or any other categorization you may wish to query on later.</p>"},{"location":"interacting/graphql-queries/#addupdate-metadata-on-a-project","title":"Add/update metadata on a project","text":"<p>Updates to metadata expect a key/value pair. It operates as an <code>UPSERT</code>, meaning if a key already exists the value will be updated, otherwise inserted.</p> <p>You may have any number of k/v pairs stored against a project.</p> Add a key/value pair to metadata<pre><code>mutation {\nupdateProjectMetadata(\ninput: { id: 1,  patch: { key: \"type\", value: \"saas\" } }\n) {\nid\nmetadata\n}\n}\n</code></pre>"},{"location":"interacting/graphql-queries/#query-for-projects-by-metadata","title":"Query for projects by metadata","text":"<p>Queries may be by <code>key</code> only (e.g return all projects where a specific key exists) or both <code>key</code> and <code>value</code> where both key and value must match.</p> <p>All projects that have the <code>version</code> tag:</p> Query by metadata<pre><code>query projectsByMetadata {\nprojectsByMetadata(metadata: [{key: \"version\"] ) {\nid\nname\n}\n}\n</code></pre> <p>All projects that have the <code>version</code> tag, specifically version <code>8</code>:</p> Query by metadata<pre><code>query projectsByMetadata {\nprojectsByMetadata(metadata: [{key: \"version\", value: \"8\"] ) {\nid\nname\n}\n}\n</code></pre>"},{"location":"interacting/graphql-queries/#removing-metadata-on-a-project","title":"Removing metadata on a project","text":"<p>Metadata can be removed on a per-key basis. Other metadata key/value pairs will persist.</p> Remove metadata<pre><code>mutation {\nremoveProjectMetadataByKey (\ninput: { id: 1,  key: \"version\" }\n) {\nid\nmetadata\n}\n}\n</code></pre>"},{"location":"interacting/graphql/","title":"GraphQL","text":""},{"location":"interacting/graphql/#connect-to-graphql-api","title":"Connect to GraphQL API","text":"<p>API interactions in Lagoon are done via GraphQL. In order to authenticate to the API, you need a JWT (JSON Web Token), which will authenticate you against the API via your SSH public key.</p> <p>To generate this token, use the remote shell via the <code>token</code> command:</p> Get token<pre><code>ssh -p [PORT] -t lagoon@[HOST] token\n</code></pre> <p>example.com connection string:</p> Get example.com token<pre><code>ssh -p 22 -t lagoon@ssh.example.com token\n</code></pre> <p>This will return a long string, which is the JWT token.</p> <p>We also need the URL of the API endpoint. Contact your Lagoon administrator for this.</p> <p>For example.com this is <code>https://api.example.com/graphql</code>.</p> <p>Now we need a GraphQL client! Technically this is just HTTP, but we suggest GraphiQL. It has a nice UI that allows you to write GraphQL requests with autocomplete. Download, install and start it. [GraphiQL App]</p> <p>Enter the API endpoint URL. Then click on \"Edit HTTP Headers\" and add a new Header:</p> <ul> <li>\"Header name\": <code>Authorization</code></li> <li>\"Header value\": <code>Bearer [jwt token]</code> (make sure that the JWT token has no spaces, that won't work)</li> </ul> <p></p> <p>Close the HTTP Header overlay (press ESC) and now you are ready to make your first GraphQL Request!</p> <p>Enter this on the left window:</p> Get all projects<pre><code>query whatIsThere {\nallProjects {\nid\ngitUrl\nname\nbranches\npullrequests\nproductionEnvironment\nenvironments {\nname\nenvironmentType\n}\n}\n}\n</code></pre> <p>And press the \u25b6\ufe0f button (or press CTRL+ENTER).</p> <p></p> <p>If all went well, you should see your first GraphQL response.</p>"},{"location":"interacting/graphql/#mutations","title":"Mutations","text":"<p>The Lagoon GraphQL API can not only display objects and create objects, but it also has the capability to update existing objects. All of Lagoon's GraphQL uses best practices.</p> <p>Info</p> <p>Mutation queries in GraphQL modify the data in the data store, and return a value. They can be used to insert, update, and delete data. Mutations are defined as a part of the schema._</p> <p>Update the branches to deploy within a project:</p> Update deploy branches<pre><code>mutation editProjectBranches {\nupdateProject(input:{id:109, patch:{branches:\"^(prod|stage|dev|update)$\"}}) {\nid\n}\n}\n</code></pre> <p>Update the production environment within a project:</p> <p>Warning</p> <p>This requires a redeploy in order for all changes to be reflected in the containers.</p> Update production environment<pre><code>mutation editProjectProductionEnvironment {\nupdateProject(input:{id:109, patch:{productionEnvironment:\"prod\"}}) {\nid\n}\n}\n</code></pre> <p>You can also combine multiple changes into a single query:</p> Multiple changes<pre><code>mutation editProjectProductionEnvironmentAndBranches {\nupdateProject(input:{id:109, patch:{productionEnvironment:\"prod\", branches:\"^(prod|stage|dev|update)$\"}}) {\nid\n}\n}\n</code></pre>"},{"location":"interacting/lagoon-ui/","title":"The Lagoon UI","text":"<p>The Lagoon UI is your first point of call with Lagoon. If you have any issues with access, please contact your Lagoon administrator.</p> <p>The UI allows you to complete a variety of tasks with your projects and organizations. Learn more about organizations here. and what you can do with organizations in the UI here.</p>"},{"location":"interacting/organizations/","title":"Working with Organizations in the UI","text":"<p>Here are some step-by-step guides to help walk you through useful organization-related tasks in the Lagoon UI, working with groups, projects, users, and roles.</p>"},{"location":"interacting/organizations/#log-in-and-find-organizations","title":"Log in and find organizations","text":""},{"location":"interacting/organizations/#view-who-has-access-to-a-project","title":"View who has access to a project","text":""},{"location":"interacting/organizations/#add-user-to-group-with-role","title":"Add User to Group with Role","text":""},{"location":"interacting/organizations/#remove-a-user-from-a-group","title":"Remove a User from a Group","text":""},{"location":"interacting/organizations/#change-a-user-role","title":"Change a User Role","text":""},{"location":"interacting/organizations/#add-an-email-notification-to-a-project","title":"Add an Email Notification to a Project","text":""},{"location":"interacting/organizations/#add-a-group-to-a-project","title":"Add a Group to a Project","text":""},{"location":"interacting/organizations/#add-a-user-with-organization-owner-privileges","title":"Add a User with Organization Owner Privileges","text":""},{"location":"interacting/organizations/#create-a-new-project-add-a-group-and-create-a-production-environment","title":"Create a new Project, add a Group, and create a Production Environment","text":""},{"location":"interacting/rbac/","title":"Role-Based Access Control (RBAC)","text":"<p>Version 1.0 of Lagoon changed how you access your projects! Access to your project is handled via groups, with projects assigned to one or multiple groups. Users are added to groups with a role. Groups can also be nested within sub-groups. This change provides a lot more flexibility and the possibility to recreate real world teams within Lagoon.</p>"},{"location":"interacting/rbac/#roles","title":"Roles","text":"<p>When assigning a user to a group, you need to provide a group role for that user inside this group. Each one of the 5 current existing group roles gives the user different permissions to the group and projects assigned to the group. Here are the platform-wide roles and the group roles that are currently found in Lagoon:</p>"},{"location":"interacting/rbac/#platform-wide-roles","title":"Platform-Wide Roles","text":"<p>Platform-wide roles are typically assigned to people that manage Lagoon.</p>"},{"location":"interacting/rbac/#platform-wide-owner","title":"Platform-Wide Owner","text":"<p>The platform-wide owner has access to everything across all of Lagoon.</p>"},{"location":"interacting/rbac/#platform-wide-viewer","title":"Platform-Wide Viewer","text":"<p>Similar to the platform-wide owner, except this role can only view.</p>"},{"location":"interacting/rbac/#platform-wide-organization-owner","title":"Platform-Wide Organization Owner","text":"<p>The platform-wide organization owner role provides permission to create, update, delete, and all other permissions related to changes withing an organization, including existing organizations. It does not grant full platform-wide owner access, this means the ability to access and deploy projects still needs to be granted via a group within an organization.</p> <p>This role also has the ability to view all the deploytargets (kubernetes clusters) assigned to Lagoon so that they can be assigned to an organization when it is being created.</p> <p>NOTE</p> <p>By default this role does not allow the creation of environments or the ability to trigger deployments within a project within an organization. They can add themselves to a group with a role that does grant them this permission.</p>"},{"location":"interacting/rbac/#organization-roles","title":"Organization Roles","text":""},{"location":"interacting/rbac/#organization-owner","title":"Organization Owner","text":"<p>The organization owner role allows for the creation and deletion of projects, groups, and notifications within their organization.</p> <p>They can add users to groups, change the roles of users within those groups, and associate projects with groups. This gives the organization owner the ability to clearly see who has access, and quickly add and remove users.</p> <p>Organization owners now also have the ability to create Slack or other notifications directly, and associate those notifications with a project without requiring help from your Lagoon administrator.</p> <p>Organization owners also have the ability to add and remove other owners, admins, or viewers to manage their organization.</p> <p>NOTE</p> <p>By default this role does not allow organization owners to create environments or trigger deployments within a project. They can add themselves to a group with a role that does grant them this permission. When creating a project, an organization owner can opt to be added as an owner of the project default group.</p>"},{"location":"interacting/rbac/#organization-admin","title":"Organization Admin","text":"<p>The organization admin role is the same as organization owner, except that this role cannot make changes to the owners, admins, or viewers of the organization.</p>"},{"location":"interacting/rbac/#organization-viewer","title":"Organization Viewer","text":"<p>The organization view has access to view the projects, group and user access, and notifications within their organization.</p>"},{"location":"interacting/rbac/#group-roles","title":"Group Roles","text":""},{"location":"interacting/rbac/#owner","title":"Owner","text":"<p>The owner role can do everything within a group and its associated projects. They can add and manage users of a group. Be careful with this role, as it can delete projects and production environments!</p> <p>IMPORTANT</p> <p>If a user has this role in a group that is within the scope of an organization, this role's ability to manage that group's users is removed. Only organization owners or admins can manage groups and their users.</p>"},{"location":"interacting/rbac/#maintainer","title":"Maintainer","text":"<p>The maintainer role can do everything within a group and its associated projects except deleting the project itself or the production environment. They can add and manage users of a group.</p>"},{"location":"interacting/rbac/#developer","title":"Developer","text":"<p>The developer role has SSH access only to development environments. This role cannot access, update or delete the production environment. They can run a sync task with the production environment as a source, but not as the destination. Cannot manage users of a group.</p> <p>IMPORTANT</p> <p>This role does not prevent the deployment of the production environment as a deployment is triggered via a Git push! You need to make sure that your Git server prevents these users from pushing into the branch defined as production environment.</p>"},{"location":"interacting/rbac/#reporter","title":"Reporter","text":"<p>The reporter role has view access only. They cannot access any environments via SSH or make modifications to them. They can run cache-clear tasks. This role is mostly used for stakeholders to have access to Lagoon UI and logging.</p>"},{"location":"interacting/rbac/#guest","title":"Guest","text":"<p>The guest role has the same privileges as the reporter role listed above.</p> <p>Here is a table that lists the roles and the access they have:</p>"},{"location":"interacting/rbac/#lagoon-100-rbac-permission-matrix","title":"Lagoon 1.0.0 RBAC Permission Matrix","text":"SelfGuestDeveloperMaintainerOwnerOrganization ViewerOrganization OwnerPlatform-Wide OwnerPlatform-Wide Admin Name Resource Scope Attributes addSshKey ssh_key add userID updateSshKey ssh_key update userID deleteSshKey ssh_key delete userID getUserSshKeys ssh_key view:user userID updateUser user update userID deleteUser user delete userID Name Resource Scope Attributes getBackupsByEnvironmentId deployment view projectID getEnvironmentsByProjectId environment view projectID getEnvironmentServicesByEnvironmentId environment view projectID getEnvVarsByEnvironmentId env_var environment:view:development projectID getEnvVarsByEnvironmentId env_var environment:view:production projectID getEnvVarsByProjectId env_var project:view projectID addGroup group add getOpenshiftByProjectId openshift view projectID addProject project add getProjectByEnvironmentId project view projectID getProjectByGitUrl project view projectID getProjectByName project view projectID addRestore restore add projectID updateRestore restore update projectID taskDrushCacheClear task drushCacheClear:development projectID taskDrushCacheClear task drushCacheClear:production projectID taskDrushCron task drushCron:development projectID taskDrushCron task drushCron:production projectID getFilesByTaskId task view projectID getTasksByEnvironmentId task view projectID getTaskByRemoteId task view projectID getTaskById task view projectID addUser user add Name Resource Scope Attributes addBackup backup add projectID getBackupsByEnvironmentId backup view projectID addEnvVariable (to Environment) env_var environment:add:development projectID deleteEnvVariable (from Environment) env_var environment:delete:development projectID getEnvVarsByEnvironmentId env_var environment:viewValue:development projectID addOrUpdateEnvironment environment addOrUpdate:development projectID updateEnvironment environment update:development projectID deleteEnvironment environment delete:development projectID addDeployment environment deploy:development projectID setEnvironmentServices environment update:development projectID deployEnvironmentLatest environment deploy:development projectID deployEnvironmentBranch environment deploy:development projectID deployEnvironmentPullrequest environment deploy:development projectID deployEnvironmentPromote environment deploy:development projectID userCanSshToEnvironment environment ssh:development projectID getNotificationsByProjectId notification view projectID addTask task add:development projectID taskDrushArchiveDump task drushArchiveDump:development projectID taskDrushArchiveDump task drushArchiveDump:production projectID taskDrushSqlDump task drushSqlDump:development projectID taskDrushSqlDump task drushSqlDump:production projectID taskDrushUserLogin task drushUserLogin:destination:development environmentID taskDrushSqlSync task drushSqlSync:source:development projectID taskDrushSqlSync task drushSqlSync:source:production projectID taskDrushSqlSync task drushSqlSync:destination:development projectID taskDrushRsyncFiles task drushRsync:source:development projectID taskDrushRsyncFiles task drushRsync:source:production projectID taskDrushRsyncFiles task drushRsync:destination:development projectID deleteTask task delete projectID updateTask task update projectID uploadFilesForTask task update projectID deleteFilesForTask task delete projectID getBackupsByEnvironmentId deployment view projectID getEnvironmentsByProjectId environment view projectID getEnvironmentServicesByEnvironmentId environment view projectID getEnvVarsByEnvironmentId env_var environment:view:development projectID getEnvVarsByEnvironmentId env_var environment:view:production projectID getEnvVarsByProjectId env_var project:view projectID addGroup group add getOpenshiftByProjectId openshift view projectID addProject project add getProjectByEnvironmentId project view projectID getProjectByGitUrl project view projectID getProjectByName project view projectID addRestore restore add projectID updateRestore restore update projectID taskDrushCacheClear task drushCacheClear:development projectID taskDrushCacheClear task drushCacheClear:production projectID taskDrushCron task drushCron:development projectID taskDrushCron task drushCron:production projectID getFilesByTaskId task view projectID getTasksByEnvironmentId task view projectID getTaskByRemoteId task view projectID getTaskById task view projectID addUser user add Name Resource Scope Attributes deleteBackup backup delete projectID addEnvVariable (to Project) env_var project:add projectID addEnvVariable (to Environment) env_var environment:add:production projectID deleteEnvVariable env_var delete projectID deleteEnvVariable (from Project) env_var project:delete projectID deleteEnvVariable (from Environment) env_var environment:delete:production projectID getEnvVarsByProjectId env_var project:viewValue projectID getEnvVarsByEnvironmentId env_var environment:viewValue:production projectID addOrUpdateEnvironment environment addOrUpdate:production projectID updateEnvironment environment update:production projectID addDeployment environment deploy:production projectID deleteDeployment deployment delete projectID updateDeployment deployment update projectID setEnvironmentServices environment update:production projectID deployEnvironmentLatest environment deploy:production projectID deployEnvironmentBranch environment deploy:production projectID deployEnvironmentPullrequest environment deploy:production projectID deployEnvironmentPromote environment deploy:production projectID userCanSshToEnvironment environment ssh:production projectID updateGroup group update groupID deleteGroup group delete groupID addUserToGroup group addUser groupID removeUserFromGroup group removeUser groupID addNotificationToProject project addNotification projectID removeNotificationFromProject project removeNotification projectID updateProject project update projectID addGroupsToProject project addGroup projectID removeGroupsFromProject project removeGroup projectID addTask task add:production projectID taskDrushUserLogin task drushUserLogin:destination:production environmentID taskDrushSqlSync task drushSqlSync:destination:production projectID taskDrushRsyncFiles task drushRsync:destination:production projectID addBackup backup add projectID getBackupsByEnvironmentId backup view projectID addEnvVariable (to Environment) env_var environment:add:development projectID deleteEnvVariable (from Environment) env_var environment:delete:development projectID getEnvVarsByEnvironmentId env_var environment:viewValue:development projectID addOrUpdateEnvironment environment addOrUpdate:development projectID updateEnvironment environment update:development projectID deleteEnvironment environment delete:development projectID addDeployment environment deploy:development projectID setEnvironmentServices environment update:development projectID deployEnvironmentLatest environment deploy:development projectID deployEnvironmentBranch environment deploy:development projectID deployEnvironmentPullrequest environment deploy:development projectID deployEnvironmentPromote environment deploy:development projectID getNotificationsByProjectId notification view projectID addTask task add:development projectID taskDrushArchiveDump task drushArchiveDump:development projectID taskDrushArchiveDump task drushArchiveDump:production projectID taskDrushSqlDump task drushSqlDump:development projectID taskDrushSqlDump task drushSqlDump:production projectID taskDrushUserLogin task drushUserLogin:destination:development environmentID taskDrushSqlSync task drushSqlSync:source:development projectID taskDrushSqlSync task drushSqlSync:source:production projectID taskDrushSqlSync task drushSqlSync:destination:development projectID taskDrushRsyncFiles task drushRsync:source:development projectID taskDrushRsyncFiles task drushRsync:source:production projectID taskDrushRsyncFiles task drushRsync:destination:development projectID deleteTask task delete projectID updateTask task update projectID uploadFilesForTask task update projectID deleteFilesForTask task delete projectID getBackupsByEnvironmentId deployment view projectID getEnvironmentsByProjectId environment view projectID getEnvironmentServicesByEnvironmentId environment view projectID getEnvVarsByEnvironmentId env_var environment:view:development projectID getEnvVarsByEnvironmentId env_var environment:view:production projectID getEnvVarsByProjectId env_var project:view projectID addGroup group add getOpenshiftByProjectId openshift view projectID addProject project add getProjectByEnvironmentId project view projectID getProjectByGitUrl project view projectID getProjectByName project view projectID addRestore restore add projectID updateRestore restore update projectID taskDrushCacheClear task drushCacheClear:development projectID taskDrushCacheClear task drushCacheClear:production projectID taskDrushCron task drushCron:development projectID taskDrushCron task drushCron:production projectID getFilesByTaskId task view projectID getTasksByEnvironmentId task view projectID getTaskByRemoteId task view projectID getTaskById task view projectID addUser user add Name Resource Scope Attributes deleteEnvironment environment delete:production projectID deleteProject project delete projectID getProjectByEnvironmentId project viewPrivateKey projectID getProjectByGitUrl project viewPrivateKey projectID getProjectByName project viewPrivateKey projectID deleteBackup backup delete projectID addEnvVariable (to Project) env_var project:add projectID addEnvVariable (to Environment) env_var environment:add:production projectID deleteEnvVariable env_var delete projectID deleteEnvVariable (from Project) env_var project:delete projectID deleteEnvVariable (from Environment) env_var environment:delete:production projectID getEnvVarsByProjectId env_var project:viewValue projectID getEnvVarsByEnvironmentId env_var environment:viewValue:production projectID addOrUpdateEnvironment environment addOrUpdate:production projectID updateEnvironment environment update:production projectID addDeployment environment deploy:production projectID deleteDeployment deployment delete projectID updateDeployment deployment update projectID setEnvironmentServices environment update:production projectID deployEnvironmentLatest environment deploy:production projectID deployEnvironmentBranch environment deploy:production projectID deployEnvironmentPullrequest environment deploy:production projectID deployEnvironmentPromote environment deploy:production projectID updateGroup group update groupID deleteGroup group delete groupID addUserToGroup group addUser groupID removeUserFromGroup group removeUser groupID addNotificationToProject project addNotification projectID removeNotificationFromProject project removeNotification projectID updateProject project update projectID addGroupsToProject project addGroup projectID removeGroupsFromProject project removeGroup projectID addTask task add:production projectID taskDrushUserLogin task drushUserLogin:destination:production environmentID taskDrushSqlSync task drushSqlSync:destination:production projectID taskDrushRsyncFiles task drushRsync:destination:production projectID addBackup backup add projectID getBackupsByEnvironmentId backup view projectID addEnvVariable (to Environment) env_var environment:add:development projectID deleteEnvVariable (from Environment) env_var environment:delete:development projectID getEnvVarsByEnvironmentId env_var environment:viewValue:development projectID addOrUpdateEnvironment environment addOrUpdate:development projectID updateEnvironment environment update:development projectID deleteEnvironment environment delete:development projectID addDeployment environment deploy:development projectID setEnvironmentServices environment update:development projectID deployEnvironmentLatest environment deploy:development projectID deployEnvironmentBranch environment deploy:development projectID deployEnvironmentPullrequest environment deploy:development projectID deployEnvironmentPromote environment deploy:development projectID getNotificationsByProjectId notification view projectID addTask task add:development projectID taskDrushArchiveDump task drushArchiveDump:development projectID taskDrushArchiveDump task drushArchiveDump:production projectID taskDrushSqlDump task drushSqlDump:development projectID taskDrushSqlDump task drushSqlDump:production projectID taskDrushUserLogin task drushUserLogin:destination:development environmentID taskDrushSqlSync task drushSqlSync:source:development projectID taskDrushSqlSync task drushSqlSync:source:production projectID taskDrushSqlSync task drushSqlSync:destination:development projectID taskDrushRsyncFiles task drushRsync:source:development projectID taskDrushRsyncFiles task drushRsync:source:production projectID taskDrushRsyncFiles task drushRsync:destination:development projectID deleteTask task delete projectID updateTask task update projectID uploadFilesForTask task update projectID deleteFilesForTask task delete projectID getBackupsByEnvironmentId deployment view projectID getEnvironmentsByProjectId environment view projectID getEnvironmentServicesByEnvironmentId environment view projectID getEnvVarsByEnvironmentId env_var environment:view:development projectID getEnvVarsByEnvironmentId env_var environment:view:production projectID getEnvVarsByProjectId env_var project:view projectID addGroup group add getOpenshiftByProjectId openshift view projectID addProject project add getProjectByEnvironmentId project view projectID getProjectByGitUrl project view projectID getProjectByName project view projectID addRestore restore add projectID updateRestore restore update projectID taskDrushCacheClear task drushCacheClear:development projectID taskDrushCacheClear task drushCacheClear:production projectID taskDrushCron task drushCron:development projectID taskDrushCron task drushCron:production projectID getFilesByTaskId task view projectID getTasksByEnvironmentId task view projectID getTaskByRemoteId task view projectID getTaskById task view projectID addUser user add Name Resource Scope Attributes getOrganizationById organization view organizationId getProjectByEnvironmentId organization viewProject organizationId getGroupsByOrganizationId organization viewGroup organizationId getUsersByOrganizationId organization viewUsers organizationId getUserByEmailAndOrganizationId organization viewUser organizationId getNotificationsByOrganizationId organization viewNotification organizationId Name Resource Scope Attributes getOrganizationById organization view organizationId getProjectByEnvironmentId organization viewProject organizationId getGroupsByOrganizationId organization viewGroup organizationId getUsersByOrganizationId organization viewUsers organizationId getUserByEmailAndOrganizationId organization viewUser organizationId getNotificationsByOrganizationId organization viewNotification organizationId addProject organization addProject organizationId updateProject organization updateProject organizationId deleteProject organization deleteProject organizationId addGroup organization addGroup organizationId deleteGroup organization removeGroup organizationId addNotificationSlack organization addNotification organizationId updateNotificationSlack organization updateNotification organizationId deleteNotificationSlack organization removeNotification organizationId addUserToOrganization organization addOwner organizationId addUserToOrganization organization addViewer organizationId updateOrganization organization updateOrganization organizationId Name Resource Scope Attributes addOrUpdateEnvironmentStorage environment storage addNotificationSlack notification add updateNotificationSlack notification update deleteNotificationSlack notification delete addKubernetes kubernetes add updateKubernetes kubernetes update deleteKubernetes kubernetes delete getAllOpenshifts openshift viewAll getAllProjects project viewAll addSshKey ssh_key add userID updateSshKey ssh_key update userID deleteSshKey ssh_key delete userID getUserSshKeys ssh_key view:user userID updateUser user update userID deleteUser user delete userID deleteEnvironment environment delete:production projectID deleteProject project delete projectID getProjectByEnvironmentId project viewPrivateKey projectID getProjectByGitUrl project viewPrivateKey projectID getProjectByName project viewPrivateKey projectID deleteBackup backup delete projectID addEnvVariable (to Project) env_var project:add projectID addEnvVariable (to Environment) env_var environment:add:production projectID deleteEnvVariable env_var delete projectID deleteEnvVariable (from Project) env_var project:delete projectID deleteEnvVariable (from Environment) env_var environment:delete:production projectID getEnvVarsByProjectId env_var project:viewValue projectID getEnvVarsByEnvironmentId env_var environment:viewValue:production projectID addOrUpdateEnvironment environment addOrUpdate:production projectID updateEnvironment environment update:production projectID allEnvironments environment viewAll getEnvironmentStorageMonthByEnvironmentId environment storage getEnvironmentHoursMonthByEnvironmentId environment storage getEnvironmentHitsMonthByEnvironmentId environment storage addOrUpdateEnvironmentStorage environment storage addDeployment environment deploy:production projectID deleteDeployment deployment delete projectID updateDeployment deployment update projectID setEnvironmentServices environment update:production projectID deployEnvironmentLatest environment deploy:production projectID deployEnvironmentBranch environment deploy:production projectID deployEnvironmentPullrequest environment deploy:production projectID deployEnvironmentPromote environment deploy:production projectID updateGroup group update groupID deleteGroup group delete groupID addUserToGroup group addUser groupID removeUserFromGroup group removeUser groupID addNotificationToProject project addNotification projectID removeNotificationFromProject project removeNotification projectID updateProject project update projectID addGroupsToProject project addGroup projectID removeGroupsFromProject project removeGroup projectID addTask task add:production projectID taskDrushUserLogin task drushUserLogin:destination:production environmentID taskDrushSqlSync task drushSqlSync:destination:production projectID taskDrushRsyncFiles task drushRsync:destination:production projectID addBackup backup add projectID getBackupsByEnvironmentId backup view projectID addEnvVariable (to Environment) env_var environment:add:development projectID deleteEnvVariable (from Environment) env_var environment:delete:development projectID getEnvVarsByEnvironmentId env_var environment:viewValue:development projectID addOrUpdateEnvironment environment addOrUpdate:development projectID updateEnvironment environment update:development projectID deleteEnvironment environment delete:development projectID addDeployment environment deploy:development projectID setEnvironmentServices environment update:development projectID deployEnvironmentLatest environment deploy:development projectID deployEnvironmentBranch environment deploy:development projectID deployEnvironmentPullrequest environment deploy:development projectID deployEnvironmentPromote environment deploy:development projectID getNotificationsByProjectId notification view projectID addTask task add:development projectID taskDrushArchiveDump task drushArchiveDump:development projectID taskDrushArchiveDump task drushArchiveDump:production projectID taskDrushSqlDump task drushSqlDump:development projectID taskDrushSqlDump task drushSqlDump:production projectID taskDrushUserLogin task drushUserLogin:destination:development environmentID taskDrushSqlSync task drushSqlSync:source:development projectID taskDrushSqlSync task drushSqlSync:source:production projectID taskDrushSqlSync task drushSqlSync:destination:development projectID taskDrushRsyncFiles task drushRsync:source:development projectID taskDrushRsyncFiles task drushRsync:source:production projectID taskDrushRsyncFiles task drushRsync:destination:development projectID deleteTask task delete projectID updateTask task update projectID uploadFilesForTask task update projectID deleteFilesForTask task delete projectID getBackupsByEnvironmentId deployment view projectID getEnvironmentsByProjectId environment view projectID getEnvironmentServicesByEnvironmentId environment view projectID getEnvVarsByEnvironmentId env_var environment:view:development projectID getEnvVarsByEnvironmentId env_var environment:view:production projectID getEnvVarsByProjectId env_var project:view projectID addGroup group add getOpenshiftByProjectId openshift view projectID addProject project add getProjectByEnvironmentId project view projectID getProjectByGitUrl project view projectID getProjectByName project view projectID addRestore restore add projectID updateRestore restore update projectID taskDrushCacheClear task drushCacheClear:development projectID taskDrushCacheClear task drushCacheClear:production projectID taskDrushCron task drushCron:development projectID taskDrushCron task drushCron:production projectID getFilesByTaskId task view projectID getTasksByEnvironmentId task view projectID getTaskByRemoteId task view projectID getTaskById task view projectID addUser user add getAllOrganizations organization viewAll addOrganization add viewAll updateOrganization update viewAll deleteOrganization delete viewAll getOrganizationById organization view organizationId getProjectByEnvironmentId organization viewProject organizationId getGroupsByOrganizationId organization viewGroup organizationId getUsersByOrganizationId organization viewUsers organizationId getUserByEmailAndOrganizationId organization viewUser organizationId getNotificationsByOrganizationId organization viewNotification organizationId addProject organization addProject organizationId updateProject organization updateProject organizationId deleteProject organization deleteProject organizationId addGroup organization addGroup organizationId deleteGroup organization removeGroup organizationId addNotificationSlack organization addNotification organizationId updateNotificationSlack organization updateNotification organizationId deleteNotificationSlack organization removeNotification organizationId addUserToOrganization organization addOwner organizationId addUserToOrganization organization addViewer organizationId updateOrganization organization updateOrganization organizationId Name Resource Scope Attributes getEnvironmentStorageMonthByEnvironmentId environment storage getEnvironmentHoursMonthByEnvironmentId environment storage getEnvironmentHitsMonthByEnvironmentId environment storage getAllOpenshifts openshift viewAll addOrUpdateEnvironmentStorage environment storage addNotificationSlack notification add updateNotificationSlack notification update deleteNotificationSlack notification delete addKubernetes kubernetes add updateKubernetes kubernetes update deleteKubernetes kubernetes delete getAllProjects project viewAll addSshKey ssh_key add userID updateSshKey ssh_key update userID deleteSshKey ssh_key delete userID getUserSshKeys ssh_key view:user userID updateUser user update userID deleteUser user delete userID deleteEnvironment environment delete:production projectID deleteProject project delete projectID getProjectByEnvironmentId project viewPrivateKey projectID getProjectByGitUrl project viewPrivateKey projectID getProjectByName project viewPrivateKey projectID deleteBackup backup delete projectID addEnvVariable (to Project) env_var project:add projectID addEnvVariable (to Environment) env_var environment:add:production projectID deleteEnvVariable env_var delete projectID deleteEnvVariable (from Project) env_var project:delete projectID deleteEnvVariable (from Environment) env_var environment:delete:production projectID getEnvVarsByProjectId env_var project:viewValue projectID getEnvVarsByEnvironmentId env_var environment:viewValue:production projectID addOrUpdateEnvironment environment addOrUpdate:production projectID updateEnvironment environment update:production projectID addDeployment environment deploy:production projectID deleteDeployment deployment delete projectID updateDeployment deployment update projectID setEnvironmentServices environment update:production projectID deployEnvironmentLatest environment deploy:production projectID deployEnvironmentBranch environment deploy:production projectID deployEnvironmentPullrequest environment deploy:production projectID deployEnvironmentPromote environment deploy:production projectID updateGroup group update groupID deleteGroup group delete groupID addUserToGroup group addUser groupID removeUserFromGroup group removeUser groupID addNotificationToProject project addNotification projectID removeNotificationFromProject project removeNotification projectID updateProject project update projectID addGroupsToProject project addGroup projectID removeGroupsFromProject project removeGroup projectID addTask task add:production projectID taskDrushUserLogin task drushUserLogin:destination:production environmentID taskDrushSqlSync task drushSqlSync:destination:production projectID taskDrushRsyncFiles task drushRsync:destination:production projectID addBackup backup add projectID getBackupsByEnvironmentId backup view projectID addEnvVariable (to Environment) env_var environment:add:development projectID deleteEnvVariable (from Environment) env_var environment:delete:development projectID getEnvVarsByEnvironmentId env_var environment:viewValue:development projectID addOrUpdateEnvironment environment addOrUpdate:development projectID updateEnvironment environment update:development projectID deleteEnvironment environment delete:development projectID addDeployment environment deploy:development projectID setEnvironmentServices environment update:development projectID deployEnvironmentLatest environment deploy:development projectID deployEnvironmentBranch environment deploy:development projectID deployEnvironmentPullrequest environment deploy:development projectID deployEnvironmentPromote environment deploy:development projectID getNotificationsByProjectId notification view projectID addTask task add:development projectID taskDrushArchiveDump task drushArchiveDump:development projectID taskDrushArchiveDump task drushArchiveDump:production projectID taskDrushSqlDump task drushSqlDump:development projectID taskDrushSqlDump task drushSqlDump:production projectID taskDrushUserLogin task drushUserLogin:destination:development environmentID taskDrushSqlSync task drushSqlSync:source:development projectID taskDrushSqlSync task drushSqlSync:source:production projectID taskDrushSqlSync task drushSqlSync:destination:development projectID taskDrushRsyncFiles task drushRsync:source:development projectID taskDrushRsyncFiles task drushRsync:source:production projectID taskDrushRsyncFiles task drushRsync:destination:development projectID deleteTask task delete projectID updateTask task update projectID uploadFilesForTask task update projectID deleteFilesForTask task delete projectID getBackupsByEnvironmentId deployment view projectID getEnvironmentsByProjectId environment view projectID getEnvironmentServicesByEnvironmentId environment view projectID getEnvVarsByEnvironmentId env_var environment:view:development projectID getEnvVarsByEnvironmentId env_var environment:view:production projectID getEnvVarsByProjectId env_var project:view projectID addGroup group add getOpenshiftByProjectId openshift view projectID addProject project add getProjectByEnvironmentId project view projectID getProjectByGitUrl project view projectID getProjectByName project view projectID addRestore restore add projectID updateRestore restore update projectID taskDrushCacheClear task drushCacheClear:development projectID taskDrushCacheClear task drushCacheClear:production projectID taskDrushCron task drushCron:development projectID taskDrushCron task drushCron:production projectID getFilesByTaskId task view projectID getTasksByEnvironmentId task view projectID getTaskByRemoteId task view projectID getTaskById task view projectID addUser user add getAllOrganizations organization viewAll addOrganization add viewAll updateOrganization update viewAll deleteOrganization delete viewAll getOrganizationById organization view organizationId getProjectByEnvironmentId organization viewProject organizationId getGroupsByOrganizationId organization viewGroup organizationId getUsersByOrganizationId organization viewUsers organizationId getUserByEmailAndOrganizationId organization viewUser organizationId getNotificationsByOrganizationId organization viewNotification organizationId addProject organization addProject organizationId updateProject organization updateProject organizationId deleteProject organization deleteProject organizationId addGroup organization addGroup organizationId deleteGroup organization removeGroup organizationId addNotificationSlack organization addNotification organizationId updateNotificationSlack organization updateNotification organizationId deleteNotificationSlack organization removeNotification organizationId addUserToOrganization organization addOwner organizationId addUserToOrganization organization addViewer organizationId updateOrganization organization updateOrganization organizationId"},{"location":"interacting/ssh/","title":"SSH","text":"<p>Lagoon allows you to connect to your running containers via SSH. The containers themselves don't actually have an SSH server installed, but instead you connect via SSH to Lagoon, which then itself creates a remote shell connection via the Kubernetes API for you.</p>"},{"location":"interacting/ssh/#ensure-you-are-set-up-for-ssh-access","title":"Ensure you are set up for SSH access","text":""},{"location":"interacting/ssh/#generating-an-ssh-key","title":"Generating an SSH Key","text":"<p>It is recommended to generate a separate SSH key for each device as opposed to sharing the same key between multiple computers. Instructions for generating an SSH key on various systems can be found below:</p>"},{"location":"interacting/ssh/#osx-mac","title":"OSX (Mac)","text":"<p>Mac</p>"},{"location":"interacting/ssh/#linux-ubuntu","title":"Linux (Ubuntu)","text":"<p>Linux</p>"},{"location":"interacting/ssh/#windows","title":"Windows","text":"<p>Windows</p>"},{"location":"interacting/ssh/#ssh-agent","title":"SSH Agent","text":""},{"location":"interacting/ssh/#osx-mac_1","title":"OSX (Mac)","text":"<p>OSX does not have its SSH agent configured to load configured SSH keys at startup, which can cause some headaches. You can find a handy guide to configuring this capability here: https://www.backarapper.com/add-ssh-keys-to-ssh-agent-on-startup-in-macos/</p>"},{"location":"interacting/ssh/#linux","title":"Linux","text":"<p>Linux distributions vary in how they use the <code>ssh-agent</code> . You can find a general guide here: https://www.ssh.com/academy/ssh/agent</p>"},{"location":"interacting/ssh/#windows_1","title":"Windows","text":"<p>SSH key support in Windows has improved markedly as of recently, and is now supported natively. A handy guide to configuring the Windows 10 SSH agent can be found here: https://richardballard.co.uk/ssh-keys-on-windows-10/</p>"},{"location":"interacting/ssh/#uploading-ssh-keys","title":"Uploading SSH Keys","text":""},{"location":"interacting/ssh/#via-the-ui","title":"Via the UI","text":"<p>You can upload your SSH key(s) through the UI. Log in as you normally would.</p> <p>In the upper right hand corner, click on Settings:</p> <p></p> <p>You will then see a page where you can upload your SSH key(s), and it will show any uploaded keys. Paste your key into the text box, give it a name, and click \"Add.\" That's it! Add additional keys as needed.</p> <p></p>"},{"location":"interacting/ssh/#via-command-line","title":"Via Command Line","text":"<p>A general example of using the Lagoon API via GraphQL to add an SSH key to a user can be found here</p>"},{"location":"interacting/ssh/#ssh-into-a-pod","title":"SSH into a pod","text":"<p>Note</p> <p>The easiest way to SSH into a pod is to use the Lagoon CLI.</p> <p>The instructions below only apply if you want to use the regular <code>ssh</code> client, or other advanced use cases.</p>"},{"location":"interacting/ssh/#connection","title":"Connection","text":"<p>Connecting is straightforward and follows the following pattern:</p> SSH<pre><code>ssh [PROJECT-ENVIRONMENT-NAME]@[HOST]\n</code></pre> <ul> <li><code>HOST</code> - The remote shell SSH endpoint host (for example <code>ssh.example.com</code>).</li> <li><code>PROJECT-ENVIRONMENT-NAME</code> - The environment you want to connect to. This is most commonly in the pattern <code>PROJECTNAME-ENVIRONMENT</code>.</li> </ul> <p>As an example:</p> SSH example<pre><code>ssh drupal-example-main@ssh.example.com\n</code></pre> <p>This will connect you to a <code>cli</code> pod in the environment <code>main</code> of the project <code>drupal-example</code>.</p>"},{"location":"interacting/ssh/#podservice-container-definition","title":"Pod/Service, Container Definition","text":"<p>By default the remote shell will try to connect you to the first container in the pod of the service type <code>cli</code>. If you would like to connect to another service you can specify it using a <code>service=[SERVICE-NAME]</code> argument to the SSH command.</p> <p>Note</p> <p>When you run the <code>ssh</code> client command with just a <code>USER@HOST</code> argument, it will assume that you want an interactive session and allocate a pty. This give you a regular shell environment where you can enter commands at a prompt, send interrupts using <code>^C</code> etc.</p> <p>However, when you provide an argument to the <code>ssh</code> client command, it assumes that you want a non-interactive session (e.g. just run a command and return) and will not allocate a pty.</p> <p>So when providing an argument such as <code>service=[SERVICE-NAME]</code>, if you want an interactive shell session you need to tell the <code>ssh</code> client to not \"auto-detect\" if it needs a pty and just allocate one anyway using the <code>-t</code> flag.</p> SSH to another service example<pre><code>ssh -t [PROJECT-ENVIRONMENT-NAME]@[HOST] service=[SERVICE-NAME]\n</code></pre> <p>If your pod/service contains multiple containers, Lagoon will connect you to the first defined container. You can also define the specific container to connect to via:</p> Define container<pre><code>ssh -t [PROJECT-ENVIRONMENT-NAME]@[HOST] service=[SERVICE-NAME] container=[CONTAINER-NAME]\n</code></pre> <p>For example, to connect to the <code>php</code> container within the <code>nginx</code> pod:</p> SSH to php container<pre><code>ssh -t drupal-example-main@ssh.example.com service=nginx container=php\n</code></pre>"},{"location":"interacting/ssh/#copying-files","title":"Copying files","text":"<p>The common case of copying a file into your <code>cli</code> pod can be achieved with the usual SSH-compatible tools.</p>"},{"location":"interacting/ssh/#scp","title":"scp","text":"Copy file with scp<pre><code>scp [local_path] [project_name]-[environment_name]@ssh.example.com:[remote_path]\n</code></pre>"},{"location":"interacting/ssh/#rsync","title":"rsync","text":"Copy files with rsync<pre><code>rsync --rsh=ssh [local_path] [project_name]-[environment_name]@ssh.example.com:[remote_path]\n</code></pre>"},{"location":"interacting/ssh/#tar","title":"tar","text":"Bash<pre><code>ssh [project_name]-[environment_name]@ssh.example.com tar -zcf - [remote_path] | tar -zxf - -C /tmp/\n</code></pre>"},{"location":"interacting/ssh/#specifying-non-cli-podservice","title":"Specifying non-CLI pod/service","text":"<p>In the rare case that you need to specify a non-CLI service you can specify the <code>service=...</code> and/or <code>container=...</code> arguments in the copy command.</p> <p>Piping <code>tar</code> through the <code>ssh</code> connection is the simplest method, and can be used to copy a file or directory using the usual <code>tar</code> flags:</p> Bash<pre><code>ssh [project_name]-[environment_name]@ssh.example.com service=solr tar -zcf - [remote_path] | tar -zxf - -C /tmp/\n</code></pre> <p>You can also use <code>rsync</code> with a wrapper script to reorder the arguments to <code>ssh</code> in the manner required by Lagoon's SSH service:</p> Bash<pre><code>#!/usr/bin/env sh\nsvc=$1 user=$3 host=$4\nshift 4\nexec ssh -l \"$user\" \"$host\" \"$svc\" \"$@\"\n</code></pre> <p>Put that in an executable shell script <code>rsh.sh</code> and specify the <code>service=...</code> in the <code>rsync</code> command:</p> rsync to non-CLI pod<pre><code>rsync --rsh=\"/path/to/rsh.sh service=cli\" /tmp/foo [project_name]-[environment_name]@ssh.example.com:/tmp/foo\n</code></pre> <p>The script could also be adjusted to also handle a <code>container=...</code> argument.</p>"},{"location":"lagoonizing/","title":"Lagoonizing Your Existing Site","text":"<p>Lagoonizing, or getting your existing site ready for the Lagoon platform, isn't generally difficult (depending on your site and setup), but does have a handful of steps. We've put together a stepo-by-step guide to make this process easier for you.</p>"},{"location":"lagoonizing/#requirements","title":"Requirements","text":"<p>Make sure your system meets the requirements for working with Lagoon locally.</p>"},{"location":"lagoonizing/#local-development-environment","title":"Local Development Environment","text":"<p>Set up your local development environment. You can choose between Pygmy and Lando.</p>"},{"location":"lagoonizing/#command-line-and-git","title":"Command Line and Git","text":"<p>You'll need to interact with Lagoon via the command line, and you'll need Git as well, so make sure they're ready to go.</p>"},{"location":"lagoonizing/#command-line","title":"Command line","text":"<p>You\u2019ll need to use a command line terminal for some tasks. Whatever you want to use is fine, including your operating system default tool. Here are a few options:</p> <ul> <li>iTerm2 (Mac)</li> <li>PowerShell (Windows)</li> <li>Fish (Mac, Windows, Linux)</li> <li>Tabby (Mac, Windows, Linux)</li> </ul>"},{"location":"lagoonizing/#install-git","title":"Install Git","text":"<p>If you don\u2019t have one already, you\u2019ll need a Git client of some kind. Command line, GUI, whatever works for you (our examples will use the command line, FYI). Here are a few options:</p> <ul> <li>Installing Git (Mac, Windows, Linux)</li> <li>SourceTree (Mac, Windows)</li> <li>GitHub Desktop (Mac, Windows)</li> <li>GitKraken (Mac, Windows, Linux - free for public repositories)</li> </ul>"},{"location":"lagoonizing/#what-your-lagoon-administrator-needs","title":"What your Lagoon administrator Needs","text":"<p>The person setting up your Lagoon, usually your Lagoon administrator will need some information, which is detailed here.</p>"},{"location":"lagoonizing/#configure-webhooks","title":"Configure Webhooks","text":"<p>Next, you'll need to configure webhooks for your Git respository. You can find those instructions here.</p>"},{"location":"lagoonizing/#docker-composeyml","title":"<code>docker-compose.yml</code>","text":"<p>The <code>docker-compose.yml</code> file is used by Lagoon to:</p> <ul> <li>Learn which services/containers should be deployed.</li> <li>Define how the images for the containers are built.</li> <li>Define additional configurations like persistent volumes.</li> </ul> <p>You can read more about it in our <code>docker-compose.yml</code> documentation.</p> <p>This is the first of two files we\u2019ll create and set up to get your site ready for Lagoon.</p> <p><code>Docker-compose</code> (the tool) is very strict in validating the content of the YAML file, so we can only do configuration within labels of a service definition.</p> <p>Warning</p> <p>Lagoon only reads the labels, service names, image names and build definitions from a <code>docker-compose.yml</code> file. Definitions like: ports, environment variables, volumes, networks, links, users, etc. are IGNORED. This is intentional, as the <code>docker-compose</code> file is there to define your local environment configuration. Lagoon learns from the <code>lagoon.type</code> the type of service you are deploying and from that knows about ports, networks and any additional configuration that this service might need.</p> <p>Let\u2019s walk through setting up some basic services. In this example, we\u2019ll set up NGINX, PHP, and MariaDB, which you\u2019ll need for many systems like Drupal, Laravel, and other content management systems.</p> <p>Here is a straightforward example of a <code>docker-compose.yml</code> file for Drupal:</p> docker-compose.yml<pre><code>version: '2.3'\nx-lagoon-project:\n# Lagoon project name (leave `&amp;lagoon-project` when you edit this)\n&amp;lagoon-project drupal-example\nx-volumes:\n&amp;default-volumes\n# Define all volumes you would like to have real-time mounted into the docker containers\nvolumes:\n- .:/app:delegated\nx-environment:\n&amp;default-environment\nLAGOON_PROJECT: *lagoon-project\n# Route that should be used locally, if you are using pygmy, this route *must* end with .docker.amazee.io\nLAGOON_ROUTE: http://drupal-example.docker.amazee.io\n# Uncomment if you would like to have the system behave like in production\n#LAGOON_ENVIRONMENT_TYPE: production\n# Uncomment to enable xdebug and then restart via `docker compose up -d`\n#XDEBUG_ENABLE: \"true\"\nx-user:\n&amp;default-user\n# The default user under which the containers should run. Change this if you are on linux and run with a user other than id `1000`.\nuser: '1000'\nservices:\nnginx:\nbuild:\ncontext: .\ndockerfile: nginx.dockerfile\nlabels:\nlagoon.type: nginx-php-persistent\nlagoon.persistent: /app/web/sites/default/files/\nphp:\nbuild:\ncontext: .\ndockerfile: php.dockerfile\nlabels:\nlagoon.type: nginx-php-persistent\nlagoon.name: nginx\nlagoon.persistent: /app/web/sites/default/files/\nmariadb:\nimage: uselagoon/mariadb-10.11-drupal\nlabels:\nlagoon.type: mariadb\n</code></pre> <p>Now let\u2019s break down what each of these options mean.</p>"},{"location":"lagoonizing/#basic-settings","title":"Basic Settings","text":"<p><code>x-lagoon-project</code>: This is the machine name of your project, define it here. We\u2019ll use \u201cdrupal-example.\u201d</p> <p><code>x-volumes</code>: This tells Lagoon what to mount into the container. Your web application lives in <code>/app</code>, but you can add or change this if needed.</p> <p><code>x-environment</code>:</p> <ul> <li>Here you can set your local development URL. If you are using Pygmy, it must end with <code>.docker.amazee.io.</code></li> <li>If you want to exactly mimic the production environment, uncomment <code>LAGOON_ENVIRONMENT_TYPE: production</code>.</li> <li>If you want to enable x-debug, uncomment <code>DEBUG_ENABLE: \"true\"</code>.</li> </ul> <p><code>x-user</code>: You are unlikely to need to change this, unless you are on Linux and would like to run with a user other than 1000.</p>"},{"location":"lagoonizing/#services","title":"<code>services</code>","text":"<p>This defines all the services you want to deploy. Unfortunately, <code>docker-compose</code> calls them services, even though they are actually defining the containers. Going forward we'll be calling them services, and throughout this documentation.</p> <p>The name of the service (<code>nginx</code>, <code>php</code>, and <code>mariadb</code> in the example above) is used by Lagoon as the name of the Kubernetes pod (yet another term - again, we'll be calling them services) that is generated, plus any additional Kubernetes objects that are created based on the defined <code>lagoon.type</code>. This could be things like services, routes, persistent storage, etc.</p>"},{"location":"lagoonizing/#docker-images","title":"Docker Images","text":"<p>If you want Lagoon to build a Dockerfile for your service during every deployment, you can define it here:</p> <p><code>build</code></p> <ul> <li><code>context</code><ul> <li>The build context path that should be passed on into the Docker <code>build</code> command.</li> </ul> </li> <li><code>dockerfile</code>:<ul> <li>Location and name of the Dockerfile that should be built.</li> </ul> </li> </ul> <p>Warning</p> <p>Lagoon does NOT support the short version of <code>build: &lt;Dockerfile&gt;</code> and will fail if it finds such a definition.</p> <p><code>image</code></p> <ul> <li>If you don't need to build a Dockerfile and just want to use an existing Dockerfile, define it via <code>image</code>.</li> </ul> <p>In our example, we\u2019re giving the path of the current directory. NGINX is set to build <code>nginx.dockerfile</code>, and PHP, <code>php.dockerfile</code>. MariaDB is using an existing image at <code>uselagoon/mariadb-10.11-drupal</code>. You can learn more about our Docker images here.</p>"},{"location":"lagoonizing/#types","title":"Types","text":"<p>Lagoon needs to know what type of service you are deploying in order to configure the correct Kubernetes objects.</p> <p>This is done via the <code>lagoon.type</code> label. There are many different types to choose from. Read our public documentation about Service Types to see all of them and their additional configuration possibilities.</p> <p>You might have noticed that in our example, both the PHP and NGINX services have their type defined as <code>nginx-php-persistent</code>. That\u2019s because they are what\u2019s called multi-container pods.</p>"},{"location":"lagoonizing/#multi-container-pods","title":"Multi-Container Pods","text":"<p>Kubernetes doesn\u2019t deploy plain containers. Instead, it deploys pods, with each one or more containers. Usually Lagoon creates a single pod with a container inside for each defined <code>docker-compose</code> service. For some cases, we need to put two containers inside a single pod, as these containers are so dependent on each other that they should always stay together. An example for such a situation is the PHP and NGINX containers that both contain PHP code of a web application like Drupal, as we\u2019ve done above.</p> <p>For these cases, it is possible to tell Lagoon which services should stay together. This is done in the following way (remember that we are calling containers services):</p> <ol> <li>Define both services with a <code>lagoon.type</code> that expects two services (in the example this is <code>nginx-php-persistent</code> defined on the NGINX and PHP services).</li> <li>Link the second service with the first one, setting the label <code>lagoon.name</code> of the second one to match the first one. (in the example this is done by setting <code>lagoon.name: nginx</code>).</li> </ol> <p>This will cause Lagoon to realize that the <code>nginx</code> and <code>php</code> services are combined in a pod that will be called <code>nginx</code>.</p> <p>Lagoon still needs to understand which of the two services is the actual individual service type (<code>nginx</code> and <code>php</code> in this case). It does this by searching for the service names of the matching service types. <code>nginx-php-persistent</code> expects one service with the name <code>nginx</code> and one with <code>php</code> in the <code>docker-compose.yml</code>.</p> <p>If for any reason you want to use different names for the services, or you need more than one pod with the type <code>nginx-php-persistent</code>, there is an additional label <code>lagoon.deployment.servicetype</code>, which can be used to define the actual service type.</p> <p>Here\u2019s an example showing how multi-container pods can be set up in more detail:</p> docker-compose.yml<pre><code>nginx:\nbuild:\ncontext: .\ndockerfile: nginx.dockerfile\nlabels:\nlagoon.type: nginx-php-persistent\nlagoon.persistent: /app/web/sites/default/files/\nlagoon.name: nginx # If this isn't present, Lagoon will use the container name, which in this case is nginx.\nlagoon.deployment.servicetype: nginx\nphp:\nbuild:\ncontext: .\ndockerfile: php.dockerfile\nlabels:\nlagoon.type: nginx-php-persistent\nlagoon.persistent: /app/web/sites/default/files/\nlagoon.name: nginx # We want this service to be part of the nginx pod in Lagoon.\nlagoon.deployment.servicetype: php\n</code></pre> <p>There is quite a bit more you can do in docker-compose.yml, but setting up your services is the most important part. Check out our  documentation on <code>docker-compose.yml</code> to learn what else you can do.</p>"},{"location":"lagoonizing/#lagoonyml","title":"<code>.lagoon.yml</code>","text":"<p>The <code>.lagoon.yml</code> file is the central file for setting up your project. It contains configuration in order to do the following:</p> <ul> <li>Define routes for accessing your sites.</li> <li>Define pre-rollout tasks.</li> <li>Define post-rollout tasks.</li> <li>Set up SSL certificates.</li> <li>Add cron jobs for environments.</li> </ul> <p>The <code>.lagoon.yml</code> file must be created and placed at the root of your Git repository.</p> <p>Here is an example <code>.lagoon.yml</code> file showing a variety of configuration options for a Drupal site that we\u2019ll go over:</p> .lagoon.yml<pre><code>docker-compose-yaml: docker-compose.yml\nenvironment_variables:\ngit_sha: 'true'\ntasks:\npre-rollout:\n- run:\nname: drush sql-dump\ncommand: mkdir -p /app/web/sites/default/files/private/ &amp;&amp; drush sql-dump --ordered-dump --gzip --result-file=/app/web/sites/default/files/private/pre-deploy-dump.sql.gz\nservice: cli\npost-rollout:\n- run:\nname: drush cim\ncommand: drush -y cim\nservice: cli\nshell: bash\n- run:\nname: drush cr\ncommand: drush -y cr\nservice: cli\nroutes:\ninsecure: Redirect\nenvironments:\nmain:\nroutes:\n- nginx:\n- example.com\n- example.net\n- \"www.example.com\":\ntls-acme: 'true'\ninsecure: Redirect\nhsts: max-age=31536000\n- \"example.ch\":\nAnnotations:\nnginx.ingress.kubernetes.io/permanent-redirect: https://www.example.ch$request_uri\n- www.example.ch\ncronjobs:\n- name: drush cron\nschedule: \"H * * * *\" # This will run the cron once per hour.\ncommand: drush cron\nservice: cli\nstaging:\ncronjobs:\n- name: drush cron\nschedule: \"H * * * *\" # This will run the cron once per hour.\ncommand: drush cron\nservice: cli\n</code></pre>"},{"location":"lagoonizing/#general-settings","title":"General Settings","text":""},{"location":"lagoonizing/#docker-compose-yaml","title":"<code>docker-compose-yaml</code>","text":"<p>This file tells the build script which <code>docker-compose</code> YAML file should be used, in order to learn which services and containers should be deployed. This defaults to <code>docker-compose.yml</code>, but could be used for a specific Lagoon <code>docker-compose</code> YAML file if you need something like that.</p>"},{"location":"lagoonizing/#environment_variablesgit_sha","title":"<code>environment_variables.git_sha</code>","text":"<p>This setting allows you to enable injecting the deployed Git SHA into your project as an environment variable. By default this is disabled. Setting the value to <code>true</code> sets the SHA as the environment variable <code>LAGOON_GIT_SHA</code>.</p>"},{"location":"lagoonizing/#tasks","title":"Tasks","text":"<p>There are different type of tasks you can define, and they differ when exactly they are executed in a build flow:</p>"},{"location":"lagoonizing/#pre-rollout-tasks-pre_rolloutirun","title":"Pre-Rollout Tasks - <code>pre_rollout.[i].run</code>","text":"<p>The tasks defined as <code>pre_rollout</code> tasks will run against your project after the new images have been built successfully, and before the project gets altered in any way. This feature enables you, for example, to create a database dump before the rollout is running, as in our example above. This will make it easier to roll back in case of an issue with the rollout.</p>"},{"location":"lagoonizing/#post-rollout-tasks-post_rolloutirun","title":"Post-Rollout Tasks - <code>post_rollout.[i].run</code>","text":"<p>Here you can specify tasks which need to run against your project, after:</p> <ul> <li>All images have been successfully built.</li> <li>All containers are updated with the new images.</li> <li>All running containers have passed their readiness checks.</li> </ul> <p>Common uses for <code>post_rollout</code> tasks include running <code>drush updb</code>, <code>drush cim</code>, or clearing various caches. In the above example, we run <code>drush cim</code> and <code>drush cr</code>.</p> <p><code>name</code></p> <ul> <li>The name is an arbitrary label for making it easier to identify each task in the logs.</li> </ul> <p><code>command</code></p> <ul> <li>Here you specify what command should run. These are run in the <code>WORKDIR</code> of each container. For Lagoon images this is <code>/app</code>, keep this in mind if you need to <code>cd</code> into a specific location to run your task.</li> </ul> <p><code>service</code></p> <ul> <li>The service in which to run the task. If following our drupal-example, this will be the CLI container, as it has all your site code, files, and a connection to the database. Typically you do not need to change this.</li> </ul> <p><code>shell</code></p> <p>Which shell should be used to run the task. By default <code>sh</code> is used, but if the container also has other shells (like bash), you can define it here. This is useful if you want to run some small if/else bash scripts within the post-rollouts. (see the example above for how to write a script with multiple lines).</p>"},{"location":"lagoonizing/#routes","title":"Routes","text":""},{"location":"lagoonizing/#routesautogenerateenabled","title":"<code>routes.autogenerate.enabled</code>","text":"<p>This allows for the disabling of the automatically created routes altogether. This does NOT disable the custom routes per environment, see below for more on that.</p>"},{"location":"lagoonizing/#routesautogenerateinsecure","title":"<code>routes.autogenerate.insecure</code>","text":"<p>This allows you to define the behavior of the automatically created routes. This does NOT configure the custom routes per environment, see below for more on that. This is the option we\u2019re using in the example above, with <code>insecure: Redirect</code>.</p> <p>The following options are allowed:</p> <p><code>Allow</code></p> <ul> <li>Sets up routes for both HTTP and HTTPS (this is the default).</li> </ul> <p><code>Redirect</code></p> <ul> <li>Will redirect any HTTP requests to HTTPS.</li> </ul> <p><code>None</code></p> <ul> <li>A route for HTTP will not be created, and no redirect.</li> </ul>"},{"location":"lagoonizing/#environments","title":"Environments","text":"<p>Environment names match your deployed branches or pull requests. This allows each environment to have a different configuration. In this example, we have the environments main and staging.</p>"},{"location":"lagoonizing/#environmentsnameroutes","title":"<code>environments.[name].routes</code>","text":"<p>In the route section, we identify the domain names to which the environment will respond. It is typical to only have an environment with routes specified for your production environment. All environments receive a generated route, but sometimes there is a need for a non-production environment to have its own domain name. You can specify it here, and then add that domain with your DNS provider as a CNAME to the generated route name (these routes publish in deploy messages).</p> <p>The first element after the environment is the target service, NGINX in our example. This is how we identify which service incoming requests will be sent to.</p> <p>The simplest route is the <code>example.com</code> example in our sample <code>.lagoon.yml</code> above - you can see it has no additional configuration. This will assume that you want a Let's Encrypt certificate for your route and no redirect from HTTPS to HTTP.</p>"},{"location":"lagoonizing/#annotations","title":"Annotations","text":"<p>Info</p> <p>Route/Ingress annotations are only supported by projects that deploy into clusters that run nginx-ingress controllers! Check with your Lagoon administrator if this is supported.</p> <p>Annotations can be a YAML map of annotations supported by the <code>nginx-ingress</code> controller, this is specifically useful for easy redirects:</p> <p>In this example any requests to <code>example.ch</code> will be redirected to <code>https://www.example.ch</code> with keeping folders or query parameters intact:</p> <p><code>(example.com/folder?query -&gt; https://www.example.ch/folder?query)</code></p> .lagoon.yml example<pre><code>        - \"example.ch\":\nannotations:\nnginx.ingress.kubernetes.io/permanent-redirect: https://www.example.ch$request_uri\n- www.example.ch\n</code></pre> <p>You can of course also redirect to any other URL not hosted on Lagoon. This will direct requests to <code>example.de</code> to <code>https://www.google.com</code>:</p> .lagoon.yml example<pre><code>        - \"example.de\":\nannotations:\nnginx.ingress.kubernetes.io/permanent-redirect: https://www.google.com\n</code></pre>"},{"location":"lagoonizing/#ssl-configuration-tls-acme","title":"SSL Configuration - <code>tls-acme</code>","text":"<p><code>tls-acme : \u2018true\u2019</code></p> <ul> <li>Tells Lagoon to issue a Let's Encrypt certificate for that route. This is the default.</li> <li>If you don't want a Let's Encrypt, set this to <code>tls-acme: \u2018false\u2019</code>.</li> </ul> <p><code>insecure</code></p> <ul> <li>Can be set to <code>None</code>, <code>Allow</code> or <code>Redirect</code>.</li> <li>Allow simply sets up both routes for HTTP and HTTPS (this is the default).</li> <li><code>Redirect</code> will redirect any HTTP requests to HTTPS.</li> </ul> <p><code>None</code></p> <ul> <li>Will mean a route for HTTP will not be created, and no redirect will take place.</li> </ul> <p><code>Hsts</code></p> <ul> <li>Can be set to a value of <code>max-age=31536000;includeSubDomains;preload</code>.</li> <li>Ensure there are no spaces and no other parameters included.</li> <li>Only the <code>max-age</code> parameter is required. The required max-age parameter indicates the length of time, in seconds, the HSTS policy is in effect for.</li> </ul> <p>Info</p> <p>If you plan to switch from a SSL certificate signed by a Certificate Authority (CA) to a Let's Encrypt certificate, it's best to get in touch with your Lagoon administrator to oversee the transition.</p>"},{"location":"lagoonizing/#environmentsnametypes","title":"<code>environments.[name].types</code>","text":"<p>The Lagoon build process checks the <code>lagoon.type</code> label from the <code>docker-compose.yml</code> file in order to learn what type of service should be deployed (read more about them in the documentation of docker-compose.yml).</p> <p>Sometimes you might want to override the type just for a single environment, and not for all of them.</p>"},{"location":"lagoonizing/#service-name-service-type","title":"`service-name: service-type","text":"<ul> <li><code>service-name`` is the name of the service from</code>docker-compose.yml` you would like to override.</li> <li><code>service-type</code> the type of the service you would like to use in your override.</li> </ul> <p>For example, if you want a MariaDB-Galera high availability database for your production environment called main - this is what we\u2019re doing in our example file:</p> .lagoon.yml example<pre><code>environments:\nmain:\ntypes:\nmariadb: mariadb-galera\n</code></pre>"},{"location":"lagoonizing/#environmentsnametemplates","title":"<code>environments.[name].templates</code>","text":"<p>The Lagoon build process checks the <code>lagoon.template</code> label from the <code>docker-compose.yml</code> file in order to check if the service needs a custom template file (read more about them in the documentation of docker-compose.yml).</p> <p>Sometimes you might want to override the template just for a single environment, and not for all of them:</p>"},{"location":"lagoonizing/#service-name-template-file","title":"<code>service-name: template-file</code>","text":"<ul> <li><code>service-name</code> is the name of the service from <code>docker-compose.yml</code> you would like to override.</li> <li><code>template-file</code> is the path and name of the template to use for this service in this environment.</li> </ul> .lagoon.yml example<pre><code>environments:\nmain:\ntemplates:\nmariadb: mariadb.main.deployment.yml\n</code></pre>"},{"location":"lagoonizing/#environmentsnamerollouts","title":"<code>environments.[name].rollouts</code>","text":"<p>The Lagoon build process checks the <code>lagoon.rollout</code> label from the <code>docker-compose.yml</code> file in order to check if the service needs a special rollout type (read more about them in the documentation of docker-compose.yml).</p> <p>Sometimes you might want to override the rollout type just for a single environment, especially if you also overwrote the template type for the environment:</p>"},{"location":"lagoonizing/#service-name-rollout-type","title":"<code>service-name: rollout-type</code>","text":"<ul> <li><code>service-name</code> is the name of the service from <code>docker-compose.yml</code> you would like to override.</li> <li><code>rollout-type</code> is the type of rollout. See the documentation of docker-compose.yml for possible values.</li> </ul> .lagoon.yml example<pre><code>environments:\nmain:\nrollouts:\nmariadb: statefulset\n</code></pre>"},{"location":"lagoonizing/#cron-jobs-environmentsnamecronjobs","title":"Cron jobs - <code>environments.[name].cronjobs</code>","text":"<p>As most of the time it is not desirable to run the same cron jobs across all environments, you must explicitly define which jobs you want to run for each environment. In our example, we\u2019re creating a drush cron job that will run once per hour.</p> <p><code>name</code></p> <ul> <li>Just a friendly name for identifying what the cron job will do.</li> </ul> <p><code>schedule</code></p> <ul> <li>The schedule for executing the cron job. This follows the standard convention of cron. If you're not sure about the syntax, Crontab Generator can help.</li> <li>You can specify <code>M</code> for the minute, and your cron job will run once per hour at a random minute (the same minute each hour), or <code>M/15</code> to run it every 15 mins, but with a random offset from the hour (like 6, 21, 36, 51).</li> <li>You can specify <code>H</code> for the hour, and your cron job will run once per day at a random hour (the same hour every day), or <code>H(2-4)</code> to run it once per day within the hours of 2-4.</li> </ul> <p><code>command</code></p> <ul> <li>The command to execute. Like the tasks, this executes in the <code>WORKDIR</code> of the service. For Lagoon images, this is <code>/app</code>.</li> </ul> <p><code>service</code></p> <ul> <li>Which service of your project to run the command in. For most projects, this is the CLI service.</li> </ul> <p>There is quite a bit more you can do in <code>.lagoon.yml</code>. Check out our documentation on <code>.lagoon.yml</code> to find out.</p>"},{"location":"lagoonizing/#drupal-specific-setup","title":"Drupal-specific Setup","text":"<p>If you\u2019re moving a Drupal site to Lagoon, there are a few Drupal-specific tasks to complete in order to get everything all set up.</p>"},{"location":"lagoonizing/#settings-files","title":"Settings Files","text":"<p>The next step is to update your settings files. Lagoon uses a set of environment-specific settings files which use environment variables, so no sensitive information is stored in these files, and they are all safe to commit. We have a variety of different example projects in our example repository - if you\u2019re starting from scratch, we encourage using one of them. If you\u2019re not, just pick a similar one and copy the relevant settings files. Check out the documentation on environment variables for more information on how to use them.</p> <p>Copy in the settings files from the example repository, and then review it to remove configuration for services that your site isn\u2019t using (for example, not all sites use Solr or Redis). If you need to override configuration for a specific environment type (things like disabling caching on development environments), additional settings files can be set up (there\u2019s even some in the example repository already), and are loaded in the following order:</p> settings.php<pre><code> all.settings.php\n all.services.yml\n production.settings.php\n production.services.yml\n development.settings.php\n development.services.yml\n settings.local.php\n services.local.yml\n</code></pre>"},{"location":"lagoonizing/#update-your-gitignore-settings","title":"Update Your <code>.gitignore</code> Settings","text":"<p>Make sure your <code>.gitignore</code> will allow you to commit the settings files. Drupal is shipped with <code>sites/*/settings*.php</code> and <code>sites/*/services*.yml</code> in <code>.gitignore.</code> You can remove that, as with Lagoon we don't ever keep sensitive information in the Git repository.</p>"},{"location":"lagoonizing/#note-about-webroot-in-drupal","title":"Note About Webroot in Drupal","text":"<p>Unfortunately the Drupal community has not decided on a standardized webroot folder name. Some projects put Drupal within <code>/web</code>, and others within <code>/docroot</code> or somewhere else. The Lagoon Drupal settings files assume that your Drupal is within <code>/web</code>, if this is different for your Drupal installation, please adapt the files accordingly.</p>"},{"location":"lagoonizing/#build-your-images","title":"Build Your Images","text":"<p>First, we need to build the defined images:</p> build your images<pre><code>docker compose build\n</code></pre> <p>This may take several minutes and you\u2019ll get a long response, which should look something like this.</p> <p>This will tell <code>docker-compose</code> to build the Docker images for all containers that have a <code>build:</code> definition in <code>docker-compose.yml</code>. Usually for Drupal this includes <code>cli</code>, <code>nginx</code> and <code>php</code>. We do this because we want to run specific build commands (like <code>composer install</code>) or inject specific environment variables (like <code>WEBROOT</code>) into the images.</p> <p>Usually building is not needed every time you edit your Drupal code (as the code is mounted into the containers from your host), but rebuilding does not hurt. Plus Lagoon will build the exact same Docker images during a deployment, so you check that your build will also work during a deployment by just running <code>docker compose build</code> again.</p>"},{"location":"lagoonizing/#start-containers","title":"Start Containers","text":"<p>Now that the images are built, we can start the containers:</p> start the containers<pre><code>docker compose up -d\n</code></pre> <p>You will get a response something like this:</p> containers started<pre><code>\u279c  lagoon-test git:(main) docker compose up -d\nRecreating lagoon-test_cli_1   ... done\nStarting lagoon-test_redis_1   ... done\nStarting lagoon-test_solr_1    ... done\nStarting lagoon-test_mariadb_1 ... done\nRecreating lagoon-test_php_1   ... done\nRecreating lagoon-test_nginx_1 ... done\nRecreating lagoon-test_varnish_1 ... done\n</code></pre> <p>This will bring up all containers. After the command is done, you can check with <code>docker compose ps</code> to ensure that they are all fully up and have not crashed. That response should look something like this:</p> view running containers<pre><code>\u279c  lagoon-test git:(main) docker compose ps\nName                       Command               State            Ports\n----------------------------------------------------------------------------------------\nlagoon-test_cli_1       /sbin/tini -- /lagoon/entr ...   Up      9000/tcp\nlagoon-test_mariadb_1   /sbin/tini -- /lagoon/entr ...   Up      0.0.0.0:32768-&gt;3306/tcp\nlagoon-test_nginx_1     /sbin/tini -- /lagoon/entr ...   Up      8080/tcp\nlagoon-test_php_1       /sbin/tini -- /lagoon/entr ...   Up      9000/tcp\nlagoon-test_redis_1     /sbin/tini -- /lagoon/entr ...   Up      6379/tcp\nlagoon-test_solr_1      /sbin/tini -- /lagoon/entr ...   Up      0.0.0.0:32769-&gt;8983/tcp\n</code></pre> <p>If there is a problem, check the logs with <code>docker compose logs -f [servicename]</code>.</p>"},{"location":"lagoonizing/#re-run-composer-install-for-composer-projects-only","title":"Re-Run `composer install`` (for Composer projects only)","text":"<p>If you\u2019re running a Drupal 8+ project, you should be using Composer, and you\u2019ll need to get all dependencies downloaded and installed. Connect into the cli container and run composer install:</p> re-run composer install<pre><code>docker compose exec cli bash\n[drupal-example]cli-drupal:/app$ composer install\n</code></pre> <p>This might sound weird, as there was already a <code>composer install</code> executed during the build step, so here\u2019s why we do this again:</p> <ul> <li>In order to be able to edit files on the host and have them immediately available in the container, the default <code>docker-composer.yml</code> mounts the whole folder into the containers (this happens with <code>.:/app:delegated</code> in the <code>volumes</code> section). This also means that all dependencies installed during the Docker build are overwritten with the files on the host.</li> <li>Locally, you probably want access to dependencies defined as <code>require-dev</code> in <code>composer.json</code>, while on a production deployment they would just use unnecessary space. So we run <code>composer install --no-dev</code> in the Dockerfile and <code>composer install</code> manually.</li> </ul> <p>If everything went well, open the <code>LAGOON_ROUTE</code> defined in <code>docker-compose.yml</code> (for example <code>http://drupal.docker.amazee.io</code>) and you should be greeted by a nice Drupal error. Don't worry - that's okay right now, the most important thing is that it tries to load a Drupal site.</p> <p>If you get a 500 or similar error, make sure that everything is loaded properly with Composer.</p>"},{"location":"lagoonizing/#check-status-and-install-drupal","title":"Check Status and Install Drupal","text":"<p>Finally it's time to install Drupal, but just before that we want to make sure everything works. We suggest using Drush for that with <code>drush status</code>:</p> run drush status<pre><code>docker compose exec cli bash\n[drupal-example]cli-drupal:/app$ drush status\n</code></pre> <p>The above command should return something like the following:</p> drush status results<pre><code>[drupal-example]cli-drupal:/app$ drush status\n[notice] Missing database table: key_value\nDrupal version       :  8.6.1\nSite URI             :  http://drupal.docker.amazee.io\nDatabase driver      :  mysql\nDatabase hostname    :  mariadb\nDatabase port        :  3306\nDatabase username    :  drupal\nDatabase name        :  drupal\nPHP binary           :  /usr/local/bin/php\nPHP config           :  /usr/local/etc/php/php.ini\nPHP OS               :  Linux\nDrush script         :  /app/vendor/drush/drush/drush\nDrush version        :  9.4.0\nDrush temp           :  /tmp\nDrush configs        :  /home/.drush/drush.yml\n                        /app/vendor/drush/drush/drush.yml\nDrupal root          :  /app/web\nSite path            :  sites/default\n</code></pre> <p>You may have to tell pygmy about your public key before the next step. If you get an error like <code>Permission denied (publickey)</code>, check out the documentation here: pygmy - adding ssh keys.</p> <p>Now it\u2019s time to install Drupal (if instead you would like to import an existing SQL File, please skip to the next step, but we suggest you install a clean Drupal in the beginning to be sure everything works.)</p> <p>run drush si<pre><code>[drupal-example]cli-drupal:/app$ drush site-install\n</code></pre> This should output something like:</p> drush si results<pre><code>[drupal-example]cli-drupal:/app$ drush site-install\nYou are about to DROP all tables in your 'drupal' database. Do you want to continue? (y/n): y\nStarting Drupal installation. This takes a while. Consider using the --notify global option.\nInstallation complete.  User name: admin  User password: arbZJekcqh\nCongratulations, you installed Drupal!\n</code></pre> <p>Now you can visit the URL defined in <code>LAGOON_ROUTE</code> and you should see a fresh and cleanly installed Drupal - Congrats!</p>"},{"location":"lagoonizing/#import-existing-database-dump","title":"Import existing Database Dump","text":"<p>If you have an already existing Drupal site you probably want to import its database over to your local site. There are many different ways on how to create a database dump, if your current hosting provider has Drush installed, you can use the following:</p> drush sql-dump<pre><code>[your-existing-site]$ drush sql-dump --result-file=dump.sql\nDatabase dump saved to dump.sql                         [success]\n</code></pre> <p>Now you have a <code>dump.sql</code> file that contains your whole database. Copy this file into your local Git repository and connect to the CLI, you should see the file in there:</p> <p>here's our dump file<pre><code>[drupal-example] docker compose exec cli bash\n[drupal-example]cli-drupal:/app$ ls -l dump.sql\n-rw-r--r--    1 root     root          5281 Dec 19 12:46 dump.sql\n</code></pre> Now you can import the dump after dropping the current database (still connected to the cli):</p> dump existing db and import dump file<pre><code>[drupal-example]cli-drupal:/app$ drush sql-drop\nDo you really want to drop all tables in the database drupal? (y/n): y\n[drupal-example]cli-drupal:/app$ drush sql-cli &lt; dump.sql\n</code></pre>"},{"location":"lagoonizing/#drupal-files-directory","title":"Drupal files directory","text":"<p>A Drupal site also consists of the files directory. To migrate your files from your existing site, just add the files into the correct folder (probably <code>web/sites/default/files</code>, <code>sites/default/files</code> or something similar). Remember what you've set as your webroot - it may not be the same for all projects.</p>"},{"location":"lagoonizing/#deploy","title":"Deploy","text":"<p>If you\u2019ve done everything in this guide, and your Lagoon administrator has everything set up, you are now ready to deploy your site!</p> <p>If you are deploying a Drupal site, follow this deployment guide.</p> <p>For all other deployments, follow this deployment guide.</p>"},{"location":"logging/logging/","title":"Logging","text":"<p>Lagoon provides access to the following logs:</p> <ul> <li>Logs from the Kubernetes Routers, including every single HTTP and HTTPS request with:<ul> <li>Source IP</li> <li>URL</li> <li>Path</li> <li>HTTP verb</li> <li>Cookies</li> <li>Headers</li> <li>User agent</li> <li>Project</li> <li>Container name</li> <li>Response size</li> <li>Response time</li> </ul> </li> <li>Logs from containers:<ul> <li><code>stdout</code> and <code>stderr</code> messages</li> <li>Container name</li> <li>Project</li> </ul> </li> <li>Lagoon logs:<ul> <li>Webhooks parsing</li> <li>Build logs</li> <li>Build errors</li> <li>Any other Lagoon related logs</li> </ul> </li> <li>Application logs:<ul> <li>For Drupal: install the Lagoon Logs module in order to receive logs from Drupal Watchdog.</li> <li>For Laravel: install the Lagoon Logs for Laravel package.</li> <li>For other workloads:<ul> <li>Send logs to <code>udp://application-logs.lagoon.svc:5140</code></li> <li>Ensure logs are structured as JSON encoded objects.</li> <li>Ensure the <code>type</code> field contains the name of the Kubernetes namespace (<code>$LAGOON_PROJECT-$LAGOON_ENVIRONMENT</code>).</li> </ul> </li> </ul> </li> </ul>"},{"location":"other-tools/client-libraries/","title":"Lagoon client libraries","text":"<p>If you're interested in developing tooling for the Lagoon ecosystem, there are a few libraries that you may find helpful.</p>"},{"location":"other-tools/client-libraries/#golang","title":"Golang","text":""},{"location":"other-tools/client-libraries/#machinery","title":"Machinery","text":"<p>The Machinery library is the most actively supported and developed of the tooling libraries for Lagoon. It is a central store of all the basic operations used across all our golang based tool types, primarily -- but not exclusively -- for API interaction.</p> <p>https://github.com/uselagoon/machinery/</p>"},{"location":"other-tools/client-libraries/#php","title":"PHP","text":"<p>If you're looking for PHP integration, the php-sdk may give you a good jumping off point for your work.</p> <p>https://github.com/uselagoon/lagoon-php-sdk</p>"},{"location":"other-tools/client-libraries/#third-party-libraries","title":"Third Party Libraries","text":""},{"location":"other-tools/client-libraries/#ansible","title":"Ansible","text":"<p>A frequently updated and expanding Ansible library for interacting with Lagoon.</p> <p>https://github.com/salsadigitalauorg/lagoon_ansible_collection</p>"},{"location":"other-tools/sail/","title":"Sail:onLagoon","text":"<p>Sail:onLagoon is a Laravel extension that simplifies the process of Lagoonizing Laravel sites that are already using Laravel Sail to generate their docker-compose setup. This extension provides additional features and configurations tailored for Lagoon environments.</p> <p>Check out Sail:onLagoon on GitHub: https://github.com/uselagoon/sailonlagoon</p> <p>Here's a quickstart step by step to get you started:</p> <p>Watch a short video demonstrating how quickly you can get a Laravel site ready for Lagoon:</p>"},{"location":"releases/2.10.0/","title":"2.10.0","text":""},{"location":"releases/2.10.0/#release-links","title":"Release Links","text":"<ul> <li>lagoon v2.10.0</li> <li>lagoon-ui core-v2.10.0</li> <li>lagoon-build-deploy core-v2.10.0</li> <li>lagoon-core chart 1.12.0</li> </ul>"},{"location":"releases/2.10.0/#upgrades","title":"Upgrades","text":""},{"location":"releases/2.10.0/#upgrade-to-v29x-first","title":"Upgrade to v2.9.x first","text":"<p>You must upgrade to Lagoon v2.9.x before upgrading to v2.10.0. Ensure you read all the linked release notes.</p>"},{"location":"releases/2.10.0/#deprecations","title":"Deprecations","text":"<p>There are no required actions or considerations with this release. As always, we suggest upgrading all minor versions.</p>"},{"location":"releases/2.11.0/","title":"2.11.0","text":""},{"location":"releases/2.11.0/#release-links","title":"Release Links","text":"<ul> <li>lagoon v2.11.0</li> <li>lagoon-ui core-v2.11.0</li> <li>lagoon-build-deploy core-v2.11.0</li> <li>lagoon-core chart 1.16.0</li> </ul>"},{"location":"releases/2.11.0/#upgrades","title":"Upgrades","text":""},{"location":"releases/2.11.0/#upgrade-to-v210x-first","title":"Upgrade to v2.10.x first","text":"<p>You must upgrade to Lagoon v2.10.x before upgrading to v2.11.0. Ensure you read all the linked release notes.</p>"},{"location":"releases/2.11.0/#essential-database-backups","title":"Essential database backups","text":"<p>Ensure you have a local backup of the api-db and keycloak-db before you commence this update, as there are complex migrations taking place in preparation for the v2.12.0 release.</p>"},{"location":"releases/2.11.0/#deprecations","title":"Deprecations","text":""},{"location":"releases/2.11.0/#storage-calculator-removed-from-core","title":"Storage Calculator removed from core","text":"<p>The storage-calculator service was removed from core in this release, and the service is now included in lagoon-remote.</p>"},{"location":"releases/2.12.0/","title":"2.12.0","text":""},{"location":"releases/2.12.0/#release-links","title":"Release Links","text":"<ul> <li>lagoon v2.12.0</li> <li>lagoon-ui core-v2.12.0</li> <li>lagoon-build-deploy core-v2.12.0</li> <li>lagoon-core chart 1.23.0</li> </ul>"},{"location":"releases/2.12.0/#upgrades","title":"Upgrades","text":""},{"location":"releases/2.12.0/#essential-database-backups","title":"Essential database backups","text":"<p>Ensure you have a local backup of the api-db and keycloak-db before you commence this update. The update of these databases from MariaDB 10.4 to 10.6 should update seamlessly. In the event it does not go smoothly, the image cannot be rolled back owing to incompatible storage engines. You will need to drop the db and restore the backup to get running again.</p>"},{"location":"releases/2.12.0/#kubernetes-121-minimum-requirement","title":"Kubernetes 1.21 minimum requirement","text":"<p>The minimum supported version of Kubernetes is 1.21 as of this release.</p>"},{"location":"releases/2.12.0/#deprecations","title":"Deprecations","text":"<p>There are no required actions or considerations with this release. As always, we suggest upgrading all minor versions.</p>"},{"location":"releases/2.13.0/","title":"2.13.0","text":""},{"location":"releases/2.13.0/#release-links","title":"Release Links","text":"<ul> <li>lagoon v2.13.0</li> <li>lagoon-ui core-v2.13.0</li> <li>lagoon-build-deploy core-v2.13.0</li> <li>lagoon-core chart 1.25.0</li> </ul>"},{"location":"releases/2.13.0/#upgrades","title":"Upgrades","text":"<p>There are no required actions or considerations with this release. As always, we suggest upgrading all minor versions.</p>"},{"location":"releases/2.13.0/#deprecations","title":"Deprecations","text":""},{"location":"releases/2.13.0/#monitoring-urls","title":"monitoring-urls","text":"<p>The storage and use of monitoring-urls provided in lagoon.yml has been removed from the API.</p>"},{"location":"releases/2.14.0/","title":"2.14.0","text":""},{"location":"releases/2.14.0/#upgrades","title":"Upgrades","text":"<p>This tag was never released, and the 2.14.2 release should be installed instead.</p>"},{"location":"releases/2.14.0/#deprecations","title":"Deprecations","text":"<p>This tag was never released, and the 2.14.2 release should be installed instead.</p>"},{"location":"releases/2.14.1/","title":"2.14.1","text":""},{"location":"releases/2.14.1/#release-links","title":"Release Links","text":"<ul> <li>lagoon v2.14.2</li> <li>lagoon-ui core-v2.14.2</li> <li>lagoon-build-deploy core-v2.14.2</li> <li>lagoon-core chart 1.28.0</li> <li>lagoon-remote chart 0.76.0</li> </ul>"},{"location":"releases/2.14.1/#release-notes","title":"Release Notes","text":"<p>This release was superseded, and the 2.14.2 release is recommended to be installed instead.</p>"},{"location":"releases/2.14.1/#upgrades","title":"Upgrades","text":"<p>This release was superseded, and the 2.14.2 release is recommended to be installed instead.</p>"},{"location":"releases/2.14.1/#deprecations","title":"Deprecations","text":"<p>This release was superseded, and the 2.14.2 release is recommended to be installed instead.</p>"},{"location":"releases/2.14.2/","title":"2.14.2","text":""},{"location":"releases/2.14.2/#release-links","title":"Release Links","text":"<ul> <li>lagoon v2.14.2</li> <li>lagoon-ui core-v2.14.2</li> <li>lagoon-build-deploy core-v2.14.2</li> <li>lagoon-core chart 1.28.0</li> <li>lagoon-remote chart 0.76.0</li> </ul>"},{"location":"releases/2.14.2/#release-notes","title":"Release Notes","text":"<p>This release resolved a couple of minor issues discovered after releasing the 2.14.0 and 2.14.1 releases.</p>"},{"location":"releases/2.14.2/#upgrades","title":"Upgrades","text":"<p>There are no required actions or considerations with this release. As always, we suggest upgrading all minor versions.</p>"},{"location":"releases/2.14.2/#deprecations","title":"Deprecations","text":"<p>There are no required actions or considerations with this release. As always, we suggest upgrading all minor versions.</p>"},{"location":"releases/2.15.0/","title":"2.15.0","text":""},{"location":"releases/2.15.0/#release-links","title":"Release Links","text":"<ul> <li>lagoon v2.15.0</li> <li>lagoon-ui core-v2.15.0</li> <li>lagoon-build-deploy core-v2.15.0</li> <li>lagoon-core chart 1.29.0</li> </ul>"},{"location":"releases/2.15.0/#release-notes","title":"Release Notes","text":"<p>This release was superseded, and the 2.15.4 release is recommended to be installed instead.</p>"},{"location":"releases/2.15.0/#upgrades","title":"Upgrades","text":"<p>This release was superseded, and the 2.15.4 release is recommended to be installed instead.</p>"},{"location":"releases/2.15.0/#deprecations","title":"Deprecations","text":"<p>This release was superseded, and the 2.15.4 release is recommended to be installed instead.</p>"},{"location":"releases/2.15.1/","title":"2.15.1","text":""},{"location":"releases/2.15.1/#release-links","title":"Release Links","text":"<ul> <li>lagoon v2.15.1</li> <li>lagoon-ui core-v2.15.1</li> <li>lagoon-build-deploy core-v2.15.1</li> <li>lagoon-core chart 1.31.0</li> </ul>"},{"location":"releases/2.15.1/#release-notes","title":"Release Notes","text":"<p>This release was superseded, and the 2.15.4 release is recommended to be installed instead.</p>"},{"location":"releases/2.15.1/#upgrades","title":"Upgrades","text":"<p>This release was superseded, and the 2.15.4 release is recommended to be installed instead.</p>"},{"location":"releases/2.15.1/#deprecations","title":"Deprecations","text":"<p>This release was superseded, and the 2.15.4 release is recommended to be installed instead.</p>"},{"location":"releases/2.15.2/","title":"2.15.2","text":""},{"location":"releases/2.15.2/#release-links","title":"Release Links","text":"<ul> <li>lagoon v2.15.2</li> <li>lagoon-ui core-v2.15.2</li> <li>lagoon-build-deploy core-v2.15.2</li> <li>lagoon-core chart 1.34.0</li> </ul>"},{"location":"releases/2.15.2/#release-notes","title":"Release Notes","text":"<p>This release was superseded, and the 2.15.4 release is recommended to be installed instead.</p>"},{"location":"releases/2.15.2/#upgrades","title":"Upgrades","text":"<p>This release was superseded, and the 2.15.4 release is recommended to be installed instead.</p>"},{"location":"releases/2.15.2/#deprecations","title":"Deprecations","text":"<p>This release was superseded, and the 2.15.4 release is recommended to be installed instead.</p>"},{"location":"releases/2.15.3/","title":"2.15.3","text":""},{"location":"releases/2.15.3/#release-links","title":"Release Links","text":"<ul> <li>lagoon v2.15.3</li> <li>lagoon-ui core-v2.15.3</li> <li>lagoon-build-deploy core-v2.15.3</li> <li>lagoon-core chart 1.35.0</li> </ul>"},{"location":"releases/2.15.3/#release-notes","title":"Release Notes","text":"<p>This release was superseded, and the 2.15.4 release is recommended to be installed instead.</p>"},{"location":"releases/2.15.3/#upgrades","title":"Upgrades","text":"<p>This release was superseded, and the 2.15.4 release is recommended to be installed instead.</p>"},{"location":"releases/2.15.3/#deprecations","title":"Deprecations","text":"<p>This release was superseded, and the 2.15.4 release is recommended to be installed instead.</p>"},{"location":"releases/2.15.4/","title":"2.15.4","text":""},{"location":"releases/2.15.4/#release-links","title":"Release Links","text":"<ul> <li>lagoon v2.15.4</li> <li>lagoon-ui core-v2.15.4</li> <li>lagoon-build-deploy core-v2.15.4</li> <li>lagoon-core chart 1.36.0</li> </ul>"},{"location":"releases/2.15.4/#release-notes","title":"Release Notes","text":"<p>This release resolved a couple of minor issues discovered after releasing the 2.15.0, 2.15.1, 2.15.2, and 2.15.3 releases.</p>"},{"location":"releases/2.15.4/#upgrades","title":"Upgrades","text":"<p>There are no required actions or considerations with this release. As always, we suggest upgrading all minor versions.</p>"},{"location":"releases/2.15.4/#deprecations","title":"Deprecations","text":"<p>There are no required actions or considerations with this release. As always, we suggest upgrading all minor versions.</p>"},{"location":"releases/2.16.0/","title":"2.16.0","text":""},{"location":"releases/2.16.0/#release-links","title":"Release Links","text":"<ul> <li>lagoon v2.16.0</li> <li>lagoon-ui core-v2.16.0</li> <li>lagoon-build-deploy core-v2.16.0</li> <li>lagoon-core chart 1.37.0</li> </ul>"},{"location":"releases/2.16.0/#upgrades","title":"Upgrades","text":"<p>There are no required actions or considerations with this release. As always, we suggest upgrading all minor versions.</p>"},{"location":"releases/2.16.0/#deprecations","title":"Deprecations","text":"<p>There are no required actions or considerations with this release. As always, we suggest upgrading all minor versions.</p>"},{"location":"releases/2.17.0/","title":"2.17.0","text":""},{"location":"releases/2.17.0/#release-links","title":"Release Links","text":"<ul> <li>lagoon v2.17.0</li> <li>lagoon-ui core-v2.17.0</li> <li>lagoon-build-deploy core-v2.17.0</li> <li>lagoon-core chart 1.41.0</li> <li>lagoon-remote chart 0.87.0</li> </ul>"},{"location":"releases/2.17.0/#upgrades","title":"Upgrades","text":"<p>There are no required actions or considerations with this release. As always, we suggest upgrading all minor versions.</p>"},{"location":"releases/2.17.0/#deprecations","title":"Deprecations","text":""},{"location":"releases/2.17.0/#activestandby-task-image","title":"activestandby task image","text":"<ul> <li>This release introduces a new active/standby task image that does not require the use of the dioscuri controller. Dioscuri is deprecated and will eventually be removed from the <code>lagoon-remote</code> helm chart. If you use active/standby functionality in your clusters, you should upgrade to lagoon v2.17.0 and update your remote clusters to the version of the <code>lagoon-remote</code> helm chart the in the 2.17.0 release.</li> </ul>"},{"location":"releases/2.17.0/#api-harbor-support","title":"API Harbor support","text":"<ul> <li>Support for Harbor in the API will be removed in a future release. If you currently have your core installation with Harbor support, you should move to using the integration within lagoon-remote instead. See the documentation here and read the section about Harbor.</li> <li>Removed in 2.20.1</li> </ul>"},{"location":"releases/2.17.0/#harbor-21-and-earlier-support","title":"Harbor 2.1 and earlier support","text":"<ul> <li>Support for Harbor 2.1.x (chart version 1.5.x) and older in <code>lagoon-remote</code> will be removed in a future release. You should consider upgrading Harbor to a newer version (currently Lagoon supports up to v2.9.x (chart version 1.13.x)), following any recommended upgrade paths from Harbor.</li> </ul>"},{"location":"releases/2.18.0/","title":"2.18.0","text":""},{"location":"releases/2.18.0/#release-links","title":"Release Links","text":"<ul> <li>lagoon v2.18.0</li> <li>lagoon-ui core-v2.18.0</li> <li>lagoon-build-deploy core-v2.18.0</li> <li>lagoon-core chart 1.42.0</li> <li>lagoon-remote chart 0.88.0</li> </ul>"},{"location":"releases/2.18.0/#release-notes","title":"Release Notes","text":"<p>This release was superseded, and the 2.18.2 release is recommended to be installed instead.</p>"},{"location":"releases/2.18.0/#upgrades","title":"Upgrades","text":"<p>This release was superseded, and the 2.18.2 release is recommended to be installed instead.</p>"},{"location":"releases/2.18.0/#deprecations","title":"Deprecations","text":"<p>This release was superseded, and the 2.18.2 release is recommended to be installed instead.</p>"},{"location":"releases/2.18.1/","title":"2.18.1","text":""},{"location":"releases/2.18.1/#release-links","title":"Release Links","text":"<ul> <li>lagoon v2.18.1</li> <li>lagoon-core chart 1.43.0</li> </ul>"},{"location":"releases/2.18.1/#release-notes","title":"Release Notes","text":"<p>This release was superseded, and the 2.18.2 release is recommended to be installed instead.</p>"},{"location":"releases/2.18.1/#upgrades","title":"Upgrades","text":"<p>This release was superseded, and the 2.18.2 release is recommended to be installed instead.</p>"},{"location":"releases/2.18.1/#deprecations","title":"Deprecations","text":"<p>This release was superseded, and the 2.18.2 release is recommended to be installed instead.</p>"},{"location":"releases/2.18.2/","title":"2.18.2","text":""},{"location":"releases/2.18.2/#release-links","title":"Release Links","text":"<ul> <li>lagoon v2.18.2</li> <li>lagoon-core chart 1.44.0</li> </ul>"},{"location":"releases/2.18.2/#release-notes","title":"Release Notes","text":"<p>This release resolved a couple of minor issues discovered after releasing the 2.18.0 and 2.18.1 release.</p>"},{"location":"releases/2.18.2/#upgrades","title":"Upgrades","text":"<p>There are no required actions or considerations with this release. As always, we suggest upgrading all minor versions.</p>"},{"location":"releases/2.18.2/#deprecations","title":"Deprecations","text":""},{"location":"releases/2.18.2/#in-built-drupal-tasks","title":"In-built Drupal Tasks","text":"<ul> <li>The standard drupal based tasks that Lagoon ships with (Drush ....) have been flagged as deprecated and should not be used anymore. These will need to be replaced with custom tasks. Example replacement tasks will be provided prior to their removal.</li> </ul>"},{"location":"releases/2.18.2/#setenvironmentservices","title":"setEnvironmentServices","text":"<ul> <li>This release introduces a deprecation of the <code>setEnvironmentServices</code> mutation to updated services for an environment, it is being replaced with <code>addOrUpdateEnvironmentService</code> and <code>deleteEnvironmentService</code>. This is because the type is being refactored to support additional information, and eventually additional functionality. For now, the actions-handler service will still support the older <code>setEnvironmentServices</code> for backwards compatibility for a short period to allow older versions of <code>lagoon-remote</code> to still work, but a new version of <code>lagoon-remote</code> will be available that will no longer provides the payload that the actions-handler uses.</li> </ul>"},{"location":"releases/2.18.2/#core-registry-variable","title":"Core Registry variable","text":"<ul> <li>The value for <code>registry</code> which was previously required by the <code>lagoon-core</code> chart is no longer required. If you are using this, you will need to add it under the new <code>unauthenticatedRegistry</code> setting when installing <code>lagoon-remote</code> in the <code>lagoon-build-deploy</code> section of your values file. If you aren't using an actual registry and have the example <code>disabled-only-use-harbor-via-deploy-controller.invalid</code> value, then you do not need to do anything except you can now remove the <code>registry</code> setting from your core values file.</li> </ul>"},{"location":"releases/2.18.2/#bytesused","title":"bytesUsed","text":"<ul> <li>The environment storage return field named <code>bytesUsed</code> is deprecated. The actual value stored is <code>kibibytes</code>. A new return field called <code>kibUsed</code> exists and should be used, the returned data is the same and both fields are still returned. <code>bytesUsed</code> will be removed in a future release, make any adjustments now to use <code>kibUsed</code>. This will be a breaking change in a future release.</li> </ul>"},{"location":"releases/2.18.2/#addorupdateenvironmentstorage","title":"addOrUpdateEnvironmentStorage","text":"<ul> <li><code>addOrUpdateEnvironmentStorage</code> is deprecated, <code>addOrUpdateStorageOnEnvironment</code> is the replacement to use as it supports the updated input value for <code>kibUsed</code>. <code>addOrUpdateEnvironmentStorage</code> will be completely removed in a future release.</li> </ul>"},{"location":"releases/2.18.2/#activesystems","title":"activesystems","text":"<ul> <li>The ability to configure projects to use different subsystems for managing deployments/tasks has been removed. Setting any values for the <code>activeSystems*</code> fields on the project will have no effect and the fields will be removed in a future release.</li> </ul>"},{"location":"releases/2.19.0/","title":"2.19.0","text":""},{"location":"releases/2.19.0/#release-links","title":"Release Links","text":"<ul> <li>lagoon v2.19.0</li> <li>lagoon-ui core-v2.19.0</li> <li>lagoon-build-deploy core-v2.19.0</li> <li>lagoon-core chart 1.45.0</li> <li>lagoon-remote chart 0.89.0</li> </ul>"},{"location":"releases/2.19.0/#upgrades","title":"Upgrades","text":"<p>There are no required actions or considerations with this release. As always, we suggest upgrading all minor versions.</p>"},{"location":"releases/2.19.0/#deprecations","title":"Deprecations","text":"<p>There are no required actions or considerations with this release. As always, we suggest upgrading all minor versions.</p>"},{"location":"releases/2.20.0/","title":"2.20.0","text":""},{"location":"releases/2.20.0/#release-links","title":"Release Links","text":"<ul> <li>lagoon v2.20.0</li> <li>lagoon-ui core-v2.20.0</li> <li>lagoon-build-deploy core-v2.20.0</li> <li>lagoon-core chart 1.46.0</li> <li>lagoon-remote chart 0.92.0</li> </ul>"},{"location":"releases/2.20.0/#release-notes","title":"Release Notes","text":"<p>This release was superseded, and the 2.20.1 release is recommended to be installed instead.</p>"},{"location":"releases/2.20.0/#upgrades","title":"Upgrades","text":"<p>This release was superseded, and the 2.20.1 release is recommended to be installed instead.</p>"},{"location":"releases/2.20.0/#deprecations","title":"Deprecations","text":"<p>This release was superseded, and the 2.20.1 release is recommended to be installed instead.</p>"},{"location":"releases/2.20.1/","title":"2.20.1","text":""},{"location":"releases/2.20.1/#release-links","title":"Release Links","text":"<ul> <li>lagoon v2.20.1</li> <li>lagoon-ui core-v2.20.1</li> <li>lagoon-build-deploy core-v2.20.1</li> <li>lagoon-core chart 1.47.0</li> </ul>"},{"location":"releases/2.20.1/#release-notes","title":"Release Notes","text":"<p>This release resolved a couple of minor issues discovered after releasing the 2.20.0 release.</p>"},{"location":"releases/2.20.1/#upgrades","title":"Upgrades","text":"<p>This release contains changes that you may need to be aware of. Read carefully before you upgrade.</p>"},{"location":"releases/2.20.1/#harbor-21x-and-earlier","title":"Harbor 2.1.x and earlier","text":"<ul> <li>This release removes the support for Harbor from the Lagoon API. If you're still using the Harbor support in the API, you should NOT upgrade until you have configured your <code>lagoon-remote</code> installations to use Harbor instead. See the documentation here and read the section about Harbor.</li> <li>We also recommend that if you're using Harbor version 2.1.x and earlier, that you upgrade this as soon as possible. Follow any instructions that Harbor recommend for upgrading. As of this release, <code>lagoon-remote</code> has been tested up to Harbor version 2.10.0 (helm chart version 1.14.0). Lagoon will stop supporting Harbor 2.1.x and earlier in a future release.</li> </ul>"},{"location":"releases/2.20.1/#deprecations","title":"Deprecations","text":""},{"location":"releases/2.20.1/#kubernetes-minimum-supported-version-is-now-125-tested-up-to-130","title":"Kubernetes minimum supported version is now 1.25, tested up to 1.30","text":"<ul> <li>The minimum supported version of Kubernetes is now 1.25, owing to deprecations in some core API functions, and the availability of upstream charts. The v2.20.0 release will not install into an earlier version of Kubernetes, so any Kubernetes upgrades will need to be performed prior to the Lagoon update.</li> </ul>"},{"location":"releases/2.20.1/#deleted-backups","title":"Deleted Backups","text":"<ul> <li>When a backup is deleted via the webhook, it will now actually be removed from the API rather than being flagged as deleted. The <code>Backup</code> type field <code>deleted</code> is deprecated, and will be removed in a future release. Additionally, <code>includeDeleted</code> if requested when querying backups will not change the result as there will be no deleted backups to include.</li> </ul>"},{"location":"releases/2.20.1/#api-harbor-support","title":"API Harbor support","text":"<ul> <li>In 2.17.0 we announced that Harbor support in the API was deprecated. This release of Lagoon removes all support for Harbor from the API. See upgrade notes above.</li> </ul>"},{"location":"releases/2.20.1/#deleteallremoveall-mutations-removed","title":"DeleteAll/RemoveAll mutations removed","text":"<ul> <li>This release removes all <code>DeleteAllX</code> and <code>RemoveAllX</code> from the API. These were only ever meant for local development and are no longer relevant.</li> </ul>"},{"location":"releases/2.20.1/#error-handling-on-deployment-triggers","title":"Error handling on deployment triggers","text":"<ul> <li>In the past, if triggering a deployment using any of the <code>DeployEnvironmentX</code> mutations and an error was encountered, the API would not return an actual error, just a string that contained the error. This was changed in this release to actually return an error now. As this is a change in behaviour, it may impact any users that may have previously been capturing the string error text and parsing it to check for errors.</li> </ul>"},{"location":"releases/2.21.0/","title":"2.21.0","text":""},{"location":"releases/2.21.0/#release-links","title":"Release Links","text":"<ul> <li>lagoon v2.21.0</li> <li>lagoon-ui core-v2.21.0</li> <li>lagoon-build-deploy core-v2.21.0</li> <li>lagoon-core chart 1.48.0</li> <li>lagoon-remote chart 0.94.0</li> </ul>"},{"location":"releases/2.21.0/#release-notes","title":"Release Notes","text":"<p>This release is a standard Lagoon release.</p>"},{"location":"releases/2.21.0/#upgrades","title":"Upgrades","text":""},{"location":"releases/2.21.0/#upgrade-to-v220x-first","title":"Upgrade to v2.20.x first","text":"<p>You must upgrade to Lagoon v2.20.x before upgrading to v2.21.0. Ensure you read all the linked release notes. The upgrade to v2.20.x is to ensure that the functionality used to enable the feature flags in the broker service is present prior to being called as a pre-upgrade job in v2.22.x</p>"},{"location":"releases/2.21.0/#keycloak-24","title":"Keycloak 24","text":"<p>This release includes an update to Keycloak 24. This should be a seamless experience for all users.</p>"},{"location":"releases/2.21.0/#deprecations","title":"Deprecations","text":""},{"location":"releases/2.21.0/#organization-notification-graphql-commands","title":"Organization &amp; Notification GraphQL commands","text":"<p>Some of the GraphQL commands used to modify organization user roles have changed. The API schema documents them. Some of the GRaphQL command inputs used to interact with Notifications may have changed. The API schema documents them.</p>"},{"location":"releases/2.22.0/","title":"2.22.0","text":""},{"location":"releases/2.22.0/#release-links","title":"Release Links","text":"<ul> <li>lagoon v2.22.0</li> <li>lagoon-ui core-v2.22.0</li> <li>lagoon-build-deploy core-v2.22.0</li> <li>lagoon-core chart 1.49.0</li> <li>lagoon-remote chart 0.95.0</li> </ul>"},{"location":"releases/2.22.0/#release-notes","title":"Release Notes","text":"<p>This release is a standard Lagoon release. There are changes required for teams managing their own Lagoon installations (core and remote).</p>"},{"location":"releases/2.22.0/#upgrades","title":"Upgrades","text":"<p>Self-managed Lagoon installs will need to be aware of three changes in lagoon-core and lagoon-remote. Please read the following sections carefully to ensure you update components that apply to your installation correctly.</p>"},{"location":"releases/2.22.0/#lagoon-custom-resource-definitions-crds","title":"Lagoon Custom Resource Definitions (CRDs)","text":"<p>We introduced a new API version of the Lagoon Build and Task CRDs in https://github.com/uselagoon/lagoon-charts/pull/688. You must upgrade these after installing the latest version of <code>lagoon-remote</code>. Failure to update the CRDs will result in the remote controller failing to start, or builds and tasks failing.</p> <p>If you're installing the version defined in the top of these release notes, you can use the following to upgrade the CRDs to the version required.</p> Text Only<pre><code>helm show crds lagoon/lagoon-build-deploy --version 0.30.2 | kubectl apply -f -\n</code></pre> <p>Alternatively, see the README in the lagoon-build-deploy chart for further examples on how to update the Lagoon Build and Task CRDs.</p>"},{"location":"releases/2.22.0/#dockerhost-statefulset","title":"DockerHost StatefulSet","text":"<p>To help with improving or distributing build loads, we converted the docker-host from a <code>Deployment</code> to a <code>StatefulSet</code> in https://github.com/uselagoon/lagoon-charts/pull/687. This allows the docker-host to be scaled.</p> <p>This will provide the ability to load-balance docker build workloads. It will result in a new docker-host cache being created the first time any replica starts up (including on the first deployment), this may result in the first few builds being less-optimized whilst the cache rebuilds. This StatefulSet must only be scaled up or down via helm, and not directly in kubernetes otherwise the load-balancing of the workloads will not be able to be fully utilised.</p>"},{"location":"releases/2.22.0/#nats-ssh-portal","title":"NATS / SSH Portal","text":"<p>The version of NATS used by Lagoon was updated in https://github.com/uselagoon/lagoon-charts/pull/602. If your installation of Lagoon utilises SSH portals and NATS, you need to be aware of changes to the structure of the NATS values. This upgrade requires minimal config structure changes in your lagoon-core and lagoon-remote values files. There are no changes to the certs or keys, just the naming of the YAML items. See the pullrequest description for more information.</p>"},{"location":"releases/2.22.0/#deprecations","title":"Deprecations","text":"<p>tbc</p>"},{"location":"releases/2.23.0/","title":"2.23.0","text":""},{"location":"releases/2.23.0/#release-links","title":"Release Links","text":"<ul> <li>lagoon v2.23.0</li> <li>lagoon-ui core-v2.23.0</li> <li>lagoon-build-deploy core-v2.23.0</li> <li>lagoon-core chart 1.50.0</li> <li>lagoon-remote chart 0.96.0</li> </ul>"},{"location":"releases/2.23.0/#release-notes","title":"Release Notes","text":"<p>This release is a standard Lagoon release. There are changes that teams managing their own Lagoon installations (core and remote) may need to be aware of.</p>"},{"location":"releases/2.23.0/#upgrades","title":"Upgrades","text":"<p>Self-managed Lagoon installs may need to be aware of these changes in lagoon-core:</p>"},{"location":"releases/2.23.0/#broker-update-to-rabbitmq-313","title":"Broker update to RabbitMQ 3.13","text":"<p>This release of Lagoon includes an update to RabbitMQ 3.13 in #3849 - which has necessitated a small modification to the feature flag enabler (to ignore experimental plugins like Khepri, that are known to have issues). As long as the upgrade runs in order successfully, the plugin should remain disabled.</p>"},{"location":"releases/2.23.0/#keycloak_admin_api_client_secret","title":"KEYCLOAK_ADMIN_API_CLIENT_SECRET","text":"<p>In #3841 a new client was added to the Master realm in Keycloak to allow the API to configure Keycloak. This will remove the need for an admin user/password to be used, so MFA can be set on the admin account (AFTER the upgrade!!). The charts will autocreate and configure the secret if none is provided.</p>"},{"location":"releases/2.23.0/#platform-x-roles-can-be-set-within-lagoon-instead-of-keycloak","title":"Platform-X roles can be set within Lagoon instead of Keycloak","text":"<p>In #3840, this release introduced the ability to set platform-X roles via the lagoon CLI/API instead of directly within Keycloak.</p>"},{"location":"releases/2.23.0/#deprecations","title":"Deprecations","text":"<p>Self-managed Lagoon installs may need to be aware of these changes in lagoon-remote:</p>"},{"location":"releases/2.23.0/#node-sysctl-daemonset-replaces-init-containers-for-opensearch-and-elasticsearch","title":"Node sysctl daemonset replaces init containers for OpenSearch and Elasticsearch","text":"<p>In build-deploy-tool#395 a future release of the build deploy tool will remove the init containers from OpenSearch &amp; Elasticsearch deployments that are used to set the necessary sysctl settings. This daemonset, when enabled in lagoon-remote, runs once on node startup to ensure the correct setting is in place for all future deployments. Ideally, the necessary configuration should be performed at the Infrastructure provisioning, in which case this daemonset is not required.</p>"},{"location":"releases/policy/","title":"Policy","text":""},{"location":"releases/policy/#upgrade-policy","title":"Upgrade Policy","text":"<p>Our general policy is that you should upgrade to the latest version of each minor version before you upgrade to the latest version.</p> <p>You should check all upgrade requirements and deprecation notices for all versions as you upgrade.</p> <p>An example of this policy is as follows</p> <ul> <li>Currently installed v2.13.0, planning to upgrade to v2.16.0<ol> <li>Upgrade to v2.14.2 (the latest 2.14.x release)</li> <li>Upgrade to v2.15.4 (the latest 2.15.x release)</li> <li>Upgrade to v2.16.0</li> </ol> </li> </ul> <p>We may, from time to time, provide additional context to the upgrades listed in these pages.</p>"},{"location":"releases/policy/#deprecation-policy","title":"Deprecation Policy","text":"<p>As Lagoon continues to evolve, we occasionally need to replace, rename or retire existing processes, tools or configuration. Where this may impact a user's processes or procedures, we intend to outline a timeframe to allow any necessary changes to be made.</p> <p>Deprecations will be tracked by the release they are announced in, and then updated when the actual deprecation occurs. All deprecations should provide a rough timeline (in months or releases).</p> <p>We may, from time to time, provide additional context to the deprecations listed in these pages.</p>"},{"location":"resources/faq/","title":"FAQ","text":""},{"location":"resources/faq/#i-found-a-bug","title":"I found a bug! \ud83d\udc1e","text":"<p>If you've found a bug, please raise a GitHub issue for it, or contact your Lagoon administrator.</p>"},{"location":"resources/faq/#i-found-a-security-issue","title":"I found a security issue! \ud83d\udc1e","text":"<p>If you've found a security issue, please send your findings to security@amazee.io. Please DO NOT file a GitHub issue for it.</p>"},{"location":"resources/faq/#im-interested-in-amazeeios-hosting-services-with-lagoon","title":"I'm interested in amazee.io's hosting services with Lagoon","text":"<p>That's great news! You can contact them via email at sales@amazee.io.</p>"},{"location":"resources/faq/#im-getting-an-invalid-ssl-certificate-error","title":"I'm getting an invalid SSL certificate error","text":"<p>The first thing to try is what is listed in our documentation about SSL.</p> <p>If you follow those steps, and you are still seeing an error, please submit a ticket or send us a message on chat and we can help resolve this for you.</p>"},{"location":"resources/faq/#im-getting-an-array-error-when-running-a-drush-command","title":"I'm getting an \"Array\" error when running a Drush command","text":"<p>This was a bug that was prevalent in Drush versions 8.1.16 and 8.1.17. There error would look something like this:</p> Bash<pre><code>The command could not be executed successfully (returned: Array [error]\n(\n[default] =&gt; Array\n(\n[default] =&gt; Array\n(\n[driver] =&gt; mysql\n[prefix] =&gt; Array\n(\n[default] =&gt;\n)\n, code: 0)\nError: no database record could be found for source @main [error]\n</code></pre> <p>Upgrading Drush should fix that for you. We strongly suggest that you use version 8.3 or newer. Once Drush is upgraded the command should work!</p>"},{"location":"resources/faq/#im-seeing-an-internal-server-error-when-trying-to-access-my-kibana-logs","title":"I'm seeing an Internal Server Error when trying to access my Kibana logs","text":"<p>No need to panic! This usually happens when a tenant has not been selected. To fix this, follow these steps:</p> <ol> <li>Go to \"Tenants\" on the left-hand menu of Kibana.</li> <li>Click on your tenant name.</li> <li>You'll see a pop-up window that says: \"Tenant Change\" and the name of your tenant.</li> <li>Go back to the \"Discover\" tab and attempt your query again.</li> </ol> <p>You should now be able to see your logs.</p>"},{"location":"resources/faq/#im-unable-to-ssh-into-any-environment","title":"I'm unable to SSH into any environment","text":"<p>I'm unable to SSH into any environment. I'm getting the following message: <code>Permission denied (publickey)</code>. When I run <code>drush sa</code> no aliases are returned.</p> <p>This typically indicates an issue with Pygmy. You can find our troubleshooting docs for Pygmy here: https://pygmystack.github.io/pygmy/troubleshooting/</p>"},{"location":"resources/faq/#how-can-i-check-the-status-of-a-build","title":"How can I check the status of a build?","text":""},{"location":"resources/faq/#how-do-i-add-a-cron-job","title":"How do I add a cron job?","text":""},{"location":"resources/faq/#how-do-i-add-a-new-route","title":"How do I add a new route?","text":""},{"location":"resources/faq/#how-do-i-remove-a-route","title":"How do I remove a route?","text":"<p>Lagoon will detect the removal of routes from your <code>.lagoon.yml</code> during a deployment. Check the deployment logs to confirm that the routes were removed automatically or for instructions on how to remove them.</p>"},{"location":"resources/faq/#when-i-run-pygmy-status-no-keys-are-loaded","title":"When I run <code>pygmy status</code>, no keys are loaded","text":"<p>You'll need to load your SSH key into pygmy. Here's how: https://pygmystack.github.io/pygmy/ssh_agent</p>"},{"location":"resources/faq/#when-i-run-drush-sa-no-aliases-are-returned","title":"When I run <code>drush sa</code> no aliases are returned","text":"<p>This typically indicates an issue with Pygmy. You can find our troubleshooting docs for Pygmy here: https://pygmystack.github.io/pygmy/troubleshooting</p>"},{"location":"resources/faq/#my-deployments-fail-with-a-message-saying-drush-needs-a-more-functional-environment","title":"My deployments fail with a message saying: \"drush needs a more functional environment\"","text":"<p>This usually means that there is no database uploaded to the project. Follow our step-by-step guide to add a database to your project.</p>"},{"location":"resources/faq/#when-i-start-pygmy-i-see-an-address-already-in-use-error","title":"When I start Pygmy I see an \"address already in use\" error?","text":"<p><code>Error starting userland proxy: listen tcp 0.0.0.0:80: bind: address already in use Error: failed to start containers: amazeeio-haproxy</code></p> <p>This is a known error! Most of the time it means that there is already something running on port 80. You can find the culprit by running the following query:</p> <pre><code>netstat -ltnp | grep -w ':80'\n</code></pre> <p>That should list everything running on port 80. Kill the process running on port 80. Once port 80 is freed up, Pygmy should start up with no further errors.</p>"},{"location":"resources/faq/#how-can-i-change-branchespr-environmentsproduction-on-my-project","title":"How can I change branches/PR environments/production on my project?","text":"<p>You can make that change using the Lagoon API! You can find the documentation for this change in our GraphQL documentation.</p>"},{"location":"resources/faq/#how-do-i-add-a-redirect","title":"How do I add a redirect?","text":""},{"location":"resources/faq/#how-can-i-add-new-users-and-ssh-keys-to-my-projectgroup","title":"How can I add new users (and SSH keys) to my project/group?","text":"<p>This can be done via the Lagoon API. You can find the steps documentation for this change in our GraphQL documentation.</p>"},{"location":"resources/faq/#can-an-environment-be-completely-deleted-to-roll-out-large-code-changes-to-my-project","title":"Can an environment be completely deleted to roll out large code changes to my project?","text":"<p>Environments are fully built from scratch at each deploy, dropping the old database and files and pushing your code would result in a fresh clean build, Don\u2019t forget to re-sync!</p> <p>It is possible to delete an environment via GraphQL. You can find the instructions in our GraphQL documentation.</p>"},{"location":"resources/faq/#how-do-i-get-my-new-environment-variable-to-show-up","title":"How do I get my new environment variable to show up?","text":"<p>Once you've added a runtime environment variable to your production environment via GraphQL, then all you need to do a deploy in order to get your change to show up on your environment.</p>"},{"location":"resources/faq/#how-do-i-sftp-files-tofrom-my-lagoon-environment","title":"How do I SFTP files to/from my Lagoon environment?","text":"<p>For cloud hosting customers, you can SFTP to your Lagoon environment by using the following information:</p> <ul> <li>Server Hostname: <code>ssh.example.com</code></li> <li>Port: 22</li> <li>Username: &lt;Project-Environment-Name&gt;</li> </ul> <p>Your username is going to be the name of the environment you are connecting to, most commonly in the pattern <code>PROJECTNAME-ENVIRONMENT</code>.</p> <p>You may also be interested in checking out our new Lagoon Sync tool, which you can read about here: https://github.com/uselagoon/lagoon-sync</p> <p>Authentication also happens automatically via SSH Public &amp; Private Key Authentication.</p>"},{"location":"resources/faq/#i-dont-want-to-use-lets-encrypt-i-have-an-ssl-certificate-i-would-like-to-install","title":"I don't want to use Let's Encrypt. I have an SSL certificate I would like to install","text":"<p>We can definitely help with that. Once you have your own SSL certificate, feel free to submit a ticket or send us a message via chat and we will be more than happy to help! You will need to send us the following files:</p> <ul> <li>Certificate key (.key)</li> <li>Certificate file (.crt)</li> <li>Intermediate certificates (.crt)</li> </ul> <p>Also, you will need to set the <code>tls-acme</code> option in <code>.lagoon.yml</code> to false.</p>"},{"location":"resources/faq/#is-it-possible-to-mount-an-external-volume-efsfusesmbetc-into-lagoon","title":"Is it possible to mount an external volume (EFS/Fuse/SMB/etc) into Lagoon?","text":"<p>Mounting an external volume would need to be handled completely inside of your containers, Lagoon does not provide a provision for this type of connection as part of the platform.</p> <p>A developer can handle this by installing the necessary packages into the container (via the Dockerfile), and ensuring the volume mount is connected via a pre- or post-rollout task.</p>"},{"location":"resources/faq/#is-there-a-way-to-stop-a-lagoon-build","title":"Is there a way to stop a Lagoon build?","text":"<p>If you have a build that has been running for a long time, and want to stop it, you will need to reach out to support. Currently, builds can only be stopped by users with admin access to the cluster.</p>"},{"location":"resources/faq/#we-installed-the-elasticsearchsolr-service-on-our-website-how-can-we-get-access-to-the-ui-port-92008983-from-a-browser","title":"We installed the Elasticsearch\\Solr service on our website. How can we get access to the UI (port 9200/8983) from a browser?","text":"<p>We suggest only exposing web services (NGINX/Varnish/Node.js) in your deployed environments. Locally, you can get the ports mapped for these services by checking <code>docker compose ps</code>, and then load <code>http://localhost</code><code>:&lt;port&gt;</code> in your browser.</p>"},{"location":"resources/faq/#i-have-a-question-that-isnt-answered-here","title":"I have a question that isn't answered here","text":"<p>You should contact your Lagoon administrator for any hosting-related enquiries, but you can also reach out to the Lagoon team via Discord or email at uselagoon@amazee.io.</p>"},{"location":"resources/glossary/","title":"Glossary","text":"Term Definition Access Mode Controls how a persistent volume can be accessed. Active/Standby Active/Standby deployments, also known as blue/green deployments, are a way to seamlessly switch over your production content. Ansible An open-source suite of software tools that enables infrastructure as code. AWS Amazon Web Services Amazon S3 Glacier A secure and inexpensive S3 storage for long-term backup. BitBucket Git hosting owned by Atlassian, which integrates with their tools. Brew Homebrew is a package manager for OSX. CA A Certificate Authority is a trusted entity that issues Secure Sockets Layer (SSL) certificates. CDN Content Delivery Network - distributes content via caching CI Continuous Integration CIDR Classess Inter-Domain Routing - a method of assigning IP addresses CLI Command Line Interface Cluster A unified group of servers or VMs, distributed and managed together, which serves one entity to ensure high availability, load balancing, and scalability. CMS Content Management System Cron job The cron command-line utility is a job scheduler on Unix-like operating systems. Users who set up and maintain software environments use cron to schedule jobs, also known as cron jobs, to run periodically at fixed times, dates, or intervals. Composer A package manager DDEV A Docker-based PHP development environment popular in the Drupal community. DDoS Distributed Denial of Service DNS Domain Name System Docker A container engine using Linux features and automating application deployment. Docker Compose A tool for defining and running Docker applications via YAML files. Drupal Open-source Content Management System Drush A command line shell for Drupal. EC2 Amazon Elastic Compute Cloud Elasticsearch An open-source search engine. It provides a distributed, multi-tenant-capable full-text search engine with a web interface and schema-free JSON documents. Galera A generic synchronous multi-master replication library for transactional databases. Git A free and open-source distributed version control system. Git Hash/SHA A generated string that identifies each commit. Uses the SHA-1 algorithm GitHub A proprietary version control hosting company using Git. A subsidiary of Microsoft, it offers all of the distributed version control and source code management functionality of Git as well as additional features. GitLab A web-based Git repository manager with CI capabilities. Grafana An open-source analytics and monitoring solution. GraphQL An open-source data query and manipulation language for APIs, and a runtime for fulfilling queries with existing data. Harbor An open source container image registry that secures images with role-based access control, scans images for vulnerabilities, and signs images as trusted. Helm A package manager for Kubernetes, it helps you manage Kubernetes applications. Helm Charts Helm Charts help you define, install, and upgrade even the most complex Kubernetes application. HTTP HyperText Transfer Protocol. HTTP is the underlying protocol used by the World Wide Web and this protocol defines how messages are formatted and transmitted, and what actions Web servers and browsers should take in response to various commands. IAM AWS Identity and Access Management (IAM) is a web service that helps you securely control access to AWS resources. IDE An integrated development environment is a software application that provides comprehensive facilities to computer programmers for software development. An IDE normally consists of at least a source code editor, build automation tools, and a debugger. Ingress controller An Ingress controller is a specialized load balancer for Kubernetes (and other containerized) environments. IPTables A command line utility for configuring Linux kernel firewall. Jenkins An open-source automation server. JWT JSON Web Token. k3s A highly available, certified Kubernetes distribution. k3d k3d is a lightweight wrapper to run k3s in Docker. k8s Numeronym for Kubernetes (K + 8 letters + s) k8up K8up is a backup operator that will handle storage and app backups on a k8s/OpenShift cluster. Keycloak An open-source identity and access management system. Kibana An open-source data visualization plugin for Elasticsearch. It provides visualization capabilities on top of the content indexed on an Elasticsearch cluster. KinD Kubernetes in Docker - a tool for running local Kubernetes clusters using Docker container \u201cnodes\u201d. Kind was primarily designed for testing Kubernetes itself, but may be used for local development or CI. kubectl The Kubernetes command-line tool which allows you to run commands against Kubernetes clusters. Kubernetes An open-source system for automating deployment, scaling, and management of containerized applications. Lagoon An open-source application delivery platform for Kubernetes. Lagoonize Configuration changes to allow your app to run on Lagoon. Lando A free, open source, cross-platform, local development environment and DevOps tool built on Docker. Laravel A free, open-source PHP web framework, following the model\u2013view\u2013controller (MVC) architectural pattern and based on Symfony. Let's Encrypt Aa free, automated, and open certificate authority (CA). MariaDB A community-developed, commercially supported fork of the MySQL relational database management system, intended to remain free and open-source software under the GNU General Public License. Master node A single node in the cluster on which a collection of processes which manage the cluster state are running. Microservice The practice of breaking up an application into a series of smaller, more specialized parts, each of which communicate with one another across common interfaces such as APIs and REST interfaces like HTTP MongoDB MongoDB is a cross-platform document-oriented database program. Classified as a NoSQL database program, MongoDB uses JSON-like documents with schema. Multi-Tenant A single instance of software runs on a server and serves multiple tenants - a tenant is a group of users who share common access with privileges to access the software instance. The software is designed to provide each tenant a share of the resources. MVC Model-view-controller - an architectural pattern that separates an application into three main logical components: the model, the view, and the controller. Each of these components are built to handle specific development aspects of an application. MySQL MySQL is an open-source relational database management system. NGINX NGINX is a web server which can also be used as a reverse proxy, load balancer, mail proxy and HTTP cache. Node Single EC2 instance (AWS virtual machine) Node.js An open-source, cross-platform, JavaScript runtime environment that executes JavaScript code outside of a browser. Open source A type of computer software in which source code is released under a license in which the copyright holder grants users the rights to study, change, and distribute the software to anyone and for any purpose. Open-source software may be developed in a collaborative public manner. OpenSearch A community-driven, Apache 2.0-licensed open source search and analytics suite that makes it easy to ingest, search, visualize, and analyze data. OpenShift Container application platform that brings Docker and Kubernetes to the enterprise. PHP PHP (Personal Home Page) is a general-purpose programming language originally designed for web development. PhpStorm A development tool (IDE) for PHP and web projects. Pod A group of containers that are deployed together on the same host. The basic unit that Kubernetes works with. PostgreSQL A free and open-source relational database management system emphasizing extensibility and technical standards compliance. Public/Private Key Public-key encryption is a cryptographic system that uses two keys -- a public key known to everyone and a private or secret key known only to the recipient of the message. Puppet An open-source software configuration management and deployment tool. PV PersistentVolume -  a piece of storage in the cluster that has been provisioned by an administrator or dynamically provisioned using Storage Classes. PVC Persistent Volume Claim - a request for storage by a user. Pygmy A Lagoon flavored local development system. Python Python is an open-source, interpreted, high-level, general-purpose programming language. RabbitMQ An open-source message-broker software. RBAC Role-Based Access Control RDS Relational Database Service Redis An open source, in-memory data store used as a database, cache, streaming engine, and message broker. Restic An open-source backup program. ROX Kubernetes access mode ReadOnlyMany - the volume can be mounted as read-only by many nodes. Ruby An interpreted, high-level, general-purpose programming language which supports multiple programming paradigms. It was designed with an emphasis on programming productivity and simplicity. In Ruby, everything is an object, including primitive data types. RWO Kubernetes access mode ReadWriteOnce - the volume can be mounted as read-write by a single node. ReadWriteOnce access mode still can allow multiple pods to access the volume when the pods are running on the same node. RWOP Kubernetes access mode ReadWriteOncePod - the volume can be mounted as read-write by a single Pod. Use ReadWriteOncePod access mode if you want to ensure that only one pod across whole cluster can read that PVC or write to it. This is only supported for CSI volumes and Kubernetes version 1.22+. RWX Kubernetes access mode ReadWriteMany - the volume can be mounted as read-write by many nodes. S3 Amazon Simple Storage Service. SBOM Software Bill of Materials. SHA-1 Secure Hash Algorithm 1, a hash function which takes an input and produces a 160-bit hash value known as a message digest \u2013 typically rendered as 40 hexadecimal digits. It was designed by the United States National Security Agency, and is a U.S. Federal Information Processing Standard. Solr An open-source enterprise-search platform, written in Java. SSH Secure Socket Shell, a network protocol that provides administrators with a secure way to access a remote computer. SSL Secure Socket Layer Storage Classes A StorageClass provides a way for Kubernetes administrators to describe the \"classes\" of storage they offer. Different classes might map to quality-of-service levels, or to backup policies, or to arbitrary policies determined by the cluster administrators Symfony Symfony is a PHP web application framework and a set of reusable PHP components/libraries, Drupal 8 and up are based on Symfony. TCP Transmission Control Protocol, a standard that defines how to establish and maintain a network conversation through which application programs can exchange data. TLS Transport Layer Security Trivy A simple and comprehensive vulnerability scanner for containers, suitable for CI. TTL Time to live or hop limit is a mechanism that limits the lifespan or lifetime of data in a computer or network. Varnish A powerful, open-source HTTP engine/reverse HTTP proxy that can speed up a website by caching (or storing) a copy of a webpage the first time a user visits. VM Virtual Machine Webhook A webhook is a way for an app like GitHub, GitLab, Bitbucket, etc, to provide other applications with immediate data and act upon something, like a pull request. YAML YAML Ain't Markup Language - YAML is a human-readable data-serialization language. It is commonly used for configuration files and in applications where data is being stored or transmitted."},{"location":"resources/tutorials-and-webinars/","title":"Tutorials, Webinars, and Videos","text":""},{"location":"resources/tutorials-and-webinars/#intro-to-lagoon-webinar","title":"Intro to Lagoon Webinar","text":"<p>[Slides]</p>"},{"location":"resources/tutorials-and-webinars/#advance-lando-ing-with-lagoon","title":"Advance Lando-ing with Lagoon","text":""},{"location":"resources/tutorials-and-webinars/#webinar-lagoon-insights","title":"Webinar - Lagoon Insights","text":""},{"location":"resources/tutorials-and-webinars/#lagoon-deployment-demo","title":"Lagoon Deployment Demo","text":""},{"location":"resources/tutorials-and-webinars/#how-to-manage-multiple-drupal-sites-with-lagoon","title":"How to Manage Multiple Drupal Sites with Lagoon","text":"<p>[Slides]</p>"},{"location":"resources/tutorials-and-webinars/#kubernetes-webinar-101","title":"Kubernetes Webinar 101","text":"<p>[Slides]</p>"},{"location":"resources/tutorials-and-webinars/#kubernetes-webinar-102","title":"Kubernetes Webinar 102","text":"<p>[Slides]</p>"},{"location":"resources/tutorials-and-webinars/#server-side-rendering-best-practices-how-we-run-decoupled-websites-with-110-million-hits-per-month","title":"Server-side Rendering Best Practices: How We Run Decoupled Websites with 110 Million Hits per Month","text":""},{"location":"resources/tutorials-and-webinars/#lagoon-opensource-docker-build-deployment-system-with-full-drupal-support","title":"Lagoon: OpenSource Docker Build &amp; Deployment System with Full Drupal Support","text":""},{"location":"resources/tutorials-and-webinars/#how-do-i-fix-an-internal-server-error-in-kibana","title":"How do I fix an internal server error in Kibana?","text":""},{"location":"resources/tutorials-and-webinars/#how-do-i-add-a-new-route","title":"How do I add a new route?","text":""},{"location":"resources/tutorials-and-webinars/#how-do-i-check-the-status-of-a-build","title":"How do I check the status of a build?","text":""},{"location":"resources/tutorials-and-webinars/#how-do-i-add-a-redirect-in-lagoon","title":"How do I add a redirect in Lagoon?","text":""},{"location":"resources/tutorials-and-webinars/#how-do-i-download-a-database-dump","title":"How do I download a database dump?","text":""},{"location":"resources/tutorials-and-webinars/#how-do-i-add-a-cron-job","title":"How do I add a cron job?","text":""},{"location":"resources/tutorials-and-webinars/#deploying-web-applications-on-kubernetes-toby-bellwood-techweek21-talk","title":"Deploying web applications on Kubernetes - Toby Bellwood | Techweek21 Talk","text":""},{"location":"resources/tutorials-and-webinars/#dealing-with-unprecedented-scale-during-covid-19-sean-hamlin-techweek21-talk","title":"Dealing with unprecedented scale during Covid-19 - Sean Hamlin| Techweek21 Talk","text":""},{"location":"resources/tutorials-and-webinars/#silverstripe-from-local-to-live-on-lagoon-thom-toogood-techweek21-talk","title":"Silverstripe from local to live on Lagoon -Thom Toogood | Techweek21 Talk","text":""},{"location":"using-lagoon-advanced/","title":"Using Lagoon - Advanced","text":"<p>This section covers some of the more advanced features and functionality of Lagoon. If you're new to Lagoon, start with Using Lagoon - the Basics.</p> <p>If you need help, contact your Lagoon administrator or reach out to the community and maintainers in our Discord.</p>"},{"location":"using-lagoon-advanced/active-standby/","title":"Active/Standby","text":""},{"location":"using-lagoon-advanced/active-standby/#configuration","title":"Configuration","text":"<p>To change an existing project to support active/standby you'll need to configure some project settings with the Lagoon API.</p> <ul> <li><code>productionEnviromment</code> should be set to the branch name of the current active environment.</li> <li><code>standbyProductionEnvironment</code> should be set to the branch name of the current environment that is in standby.</li> </ul> Update project settings<pre><code>mutation updateProject {\nupdateProject(input:{\nid:1234\npatch:{\nproductionEnvironment:\"production-brancha\"\nstandbyProductionEnvironment:\"production-branchb\"\n}\n}){\nstandbyProductionEnvironment\nname\nproductionEnvironment\n}\n}\n</code></pre>"},{"location":"using-lagoon-advanced/active-standby/#lagoonyml-production_routes","title":"<code>.lagoon.yml</code> - <code>production_routes</code>","text":"<p>To configure a project for active/standby in the <code>.lagoon.yml</code> file, you'll need to configure the <code>production_routes</code> section with any routes you want to attach to the <code>active</code> environment, and any routes to the <code>standby</code> environment. During an active/standby switch, these routes will migrate between the two environments.</p> <p>If you have two production environments, <code>production-brancha</code> and <code>production-branchb</code>, with the current active production environment as <code>production-brancha</code> then:</p> <ul> <li>Routes under <code>production_routes.active</code> will direct you to <code>production-brancha</code>.</li> <li>Routes under <code>production_routes.standby</code> will direct you to <code>production-branchb</code>.</li> </ul> <p>During an active/standby switch, the routes will swap:</p> <ul> <li>Routes under <code>production_routes.active</code> will direct you to <code>production-branchb</code>.</li> <li>Routes under <code>production_routes.standby</code> will direct you to <code>production-brancha</code>.</li> </ul> .lagoon.yml<pre><code>production_routes:\nactive:\nroutes:\n- nginx:\n- example.com:\ntls-acme: 'false'\n- active.example.com:\ntls-acme: 'false'\nstandby:\nroutes:\n- nginx:\n- standby.example.com:\ntls-acme: 'false'\n</code></pre> <p>Info</p> <p>Any routes that are under the section <code>environments..routes</code> will not be moved as part of active/standby. These routes will always be attached to the environment as defined. Ensure that if you do need a specific route to be migrated during an active/standby switch, that you remove them from the environments section and place them under the <code>production_routes</code> section specific to if it should be an active or standby route. See more about routes in <code>.lagoon.yml</code>.</p>"},{"location":"using-lagoon-advanced/active-standby/#triggering-a-switch-event","title":"Triggering a switch event","text":""},{"location":"using-lagoon-advanced/active-standby/#via-the-ui","title":"via the UI","text":"<p>To trigger the switching of environment routes, you can visit the standby environment in the Lagoon UI and click on the button labeled <code>Switch Active/Standby environments</code>. You will be prompted to confirm your action.</p> <p>Once confirmed, it will take you to the tasks page where you can view the progress of the switch.</p>"},{"location":"using-lagoon-advanced/active-standby/#via-the-api","title":"via the API","text":"<p>To trigger an event to switch the environments, run the following GraphQL mutation. This will tell Lagoon to begin the process.</p> Active Standby Switch<pre><code>mutation ActiveStandby {\nswitchActiveStandby(\ninput:{\nproject:{\nname:\"drupal-example\"\n}\n}\n){\nid\nremoteId\n}\n}\n</code></pre> <p>A task is created in the current active environment <code>tasks</code> tab when a switch event is triggered. You can check the status of the switch here.</p> <p>Using the <code>remoteId</code> from the <code>switchActiveStandby</code> mutation, we can also check the status of the task.</p> Check task status<pre><code>query getTask {\ntaskByRemoteId(id: \"&lt;remoteId&gt;\") {\nid\nname\ncreated\nstarted\ncompleted\nstatus\nlogs\n}\n}\n</code></pre>"},{"location":"using-lagoon-advanced/active-standby/#drush-aliases","title":"<code>drush</code> aliases","text":"<p>By default, projects will be created with the following aliases that will be available when active/standby is enabled on a project.</p> <ul> <li><code>lagoon-production</code></li> <li><code>lagoon-standby</code></li> </ul> <p>The <code>lagoon-production</code> alias will point to whichever site is defined as <code>productionEnvironment</code>, and <code>lagoon-standby</code> will always point to the site that is defined as <code>standbyProductionEnvironment</code>.</p> <p>These aliases are configurable by updating the project. Be aware that changing them may require you to update any scripts that rely on them.</p> Update Drush Aliases<pre><code>mutation updateProject {\nupdateProject(input:{\nid:1234\npatch:{\nproductionAlias:\"custom-lagoon-production-alias\"\nstandbyAlias:\"custom-lagoon-standby-alias\"\n}\n}){\nproductionAlias\nname\nstandbyAlias\n}\n}\n</code></pre>"},{"location":"using-lagoon-advanced/active-standby/#disabling-activestandby","title":"Disabling Active/Standby","text":"<p>You need to decide which of these 2 branches are the one you want to go forward with as being the main environment and then ensure it is set as the active branch (e.g <code>production-branchb</code>).</p> <ol> <li>In your <code>.lagoon.yml</code> file in this (now active) branch, move the routes from the <code>production_routes.active.routes</code> section into the <code>environments.production-branchb</code> section. This will mean that they are then attached to the <code>production-branchb environment</code> only.</li> <li>Once you've done this, you can delete the entire production_routes section from the <code>.lagoon.yml</code> file and re-deploy the production-branchb environment.</li> <li>If you no longer need the other branch <code>production-brancha</code>, you can delete it.</li> <li>If you keep the branch in Git, you should also remove the <code>production_routes</code> from that branch <code>.lagoon.yml</code> too, just to prevent any confusion. The branch will remain as <code>production</code> type unless you delete and redeploy it (wiping all storage and databases, etc).</li> <li>Once you've got the project in a state where there is only the <code>production-branchb</code> production environment, and all the other environments are <code>development</code>, update the project to remove the <code>standbyProductionEnvironment</code> from the project so that the active/standby labels on the environments go away.</li> </ol> Turn off Active/Standby<pre><code>mutation updateProject {\nupdateProject(input:{\nid:1234\npatch:{\nproductionEnvironment:\"production-branchb\"\nstandbyProductionEnvironment:\"\"\n}\n}){\nstandbyProductionEnvironment\nname\nproductionEnvironment\n}\n}\n</code></pre>"},{"location":"using-lagoon-advanced/active-standby/#notes","title":"Notes","text":"<p>When the active/standby trigger has been executed, the <code>productionEnvironment</code> and <code>standbyProductionEnvironments</code> will switch within the Lagoon API. Both environments are still classed as <code>production</code> environment types. We use the <code>productionEnvironment</code> to determine which one is labelled as <code>active</code>. For more information on the differences between environment types, read the documentation for <code>environment types</code></p> Get environments via GraphQL<pre><code>query projectByName {\nprojectByName(name:\"drupal-example\"){\nproductionEnvironment\nstandbyProductionEnvironment\n}\n}\n</code></pre> <p>Before switching environments:</p> Results of environment query<pre><code>{\n\"data\": {\n\"projectByName\": {\n\"productionEnvironment\": \"production-brancha\",\n\"standbyProductionEnvironment\": \"production-branchb\"\n}\n}\n}\n</code></pre> <p>After switching environments:</p> Results of environment query<pre><code>{\n\"data\": {\n\"projectByName\": {\n\"productionEnvironment\": \"production-branchb\",\n\"standbyProductionEnvironment\": \"production-brancha\"\n}\n}\n}\n</code></pre>"},{"location":"using-lagoon-advanced/blackfire/","title":"Blackfire","text":""},{"location":"using-lagoon-advanced/blackfire/#blackfire-variables","title":"Blackfire variables","text":"<p>The Lagoon Base Images have support for Blackfire included in the PHP Images (see the PHP images).</p> <p>In order to use Blackfire in Lagoon, these three environment variables need to be defined:</p> Environment Variable Default Description <code>BLACKFIRE_ENABLED</code> (not set) Used to enable <code>blackfire</code> extension with setting variable to <code>TRUE</code> or <code>true</code> <code>BLACKFIRE_SERVER_ID</code> (not set) Set to Blackfire Server ID provided by Blackfire.io. Needs <code>BLACKFIRE_ENABLED</code> set to <code>true</code> <code>BLACKFIRE_SERVER_TOKEN</code> (not set) Set to Blackfire Server Token provided by Blackfire.io. Needs <code>BLACKFIRE_ENABLED</code> set to <code>true</code>"},{"location":"using-lagoon-advanced/blackfire/#local-usage-of-blackfire","title":"Local Usage of Blackfire","text":"<p>For local usage of Blackfire with Lagoon Images, set the above environment variables for the PHP container. Here is an example for a Drupal application:</p> docker-compose.yml<pre><code>services:\n[[snip]]\nphp:\n[[snip]]\nenvironment:\n&lt;&lt; : *default-environment # loads the defined environment variables from the top\nBLACKFIRE_ENABLED: TRUE\nBLACKFIRE_SERVER_ID: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\nBLACKFIRE_SERVER_TOKEN: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n</code></pre> <p>After restarting the containers, you should be able to profile via the Blackfire Browser Plugin or the Blackfire CLI.</p>"},{"location":"using-lagoon-advanced/blackfire/#remote-usage-of-blackfire","title":"Remote Usage of Blackfire","text":"<p>In order to use Blackfire in deployed Lagoon environments the same enviornment variables need to be set, this time via one of the possibilities of adding environment variables to Lagoon. Important: Environment variables set in the <code>docker-compose.yml</code> for local development are not used by Lagoon in remote environments!</p>"},{"location":"using-lagoon-advanced/blackfire/#debugging","title":"Debugging","text":"<p>The Blackfire Agent running in the PHP containers outputs logs as normal container logs, which can be seen via <code>docker compose logs</code> or via the Lagoon Logging Infrastructure for remote environments.</p> <p>By default the Logs are set to Level <code>3</code> (info), via the environment variable <code>BLACKFIRE_LOG_LEVEL</code> the level can be increased to <code>4</code> (debug) to generate more debugging ouput.</p>"},{"location":"using-lagoon-advanced/custom-tasks/","title":"Custom Tasks","text":"<p>Lagoon allows for the definition of custom tasks at environment, project, and group levels. This is presently accomplished through the GraphQL API and exposed in the UI.</p>"},{"location":"using-lagoon-advanced/custom-tasks/#defining-a-custom-task","title":"Defining a custom task","text":"<p>When defining a task you need to determine a number of things.</p>"},{"location":"using-lagoon-advanced/custom-tasks/#which-task-do-you-want-to-run","title":"Which task do you want to run?","text":"<p>In most cases, the custom task you will be running will be something that will be run in a shell on one of the containers in your application.</p> <p>For instance, in a Node.js application, you may be interested in running a <code>yarn audit</code> in your <code>node</code> container. The command, in this case, would simply be <code>yarn audit</code>.</p>"},{"location":"using-lagoon-advanced/custom-tasks/#where-will-this-task-be-run","title":"Where will this task be run?","text":"<p>We have to define where this task will be run -- this means two things, first, which project or environment we'll be running the task in, and, second, which service.</p> <p>Let's say that we'd like for our <code>yarn audit</code> task to be available to run in any environment in a specific project (let's say the project's ID is 42 for this example). We will therefore specify the project's ID when we create our task definition, as we will describe below.</p> <p>The second question regards which environment we want to target with our task. When you set up your project, you specify several services in your <code>docker-compose.yml</code>. We use this service name to determine where the command is actually executed.</p>"},{"location":"using-lagoon-advanced/custom-tasks/#who-can-run-this-task","title":"Who can run this task?","text":"<p>There are three levels of permissions to the task system corresponding to project roles. Guest, Developer, and Maintainer -- from most restrictive to least restrictive, with each role being able to invoke the tasks defined for the lower role (Developer can see Guest tasks, Maintainers can see all tasks).</p>"},{"location":"using-lagoon-advanced/custom-tasks/#defining-a-task","title":"Defining a task","text":"<p>Tasks are defined by calling the <code>addAdvancedTaskDefinition</code> mutation. Importantly, this simply defines the task, it does not invoke it. It simply makes it avaliable to be run in an environment.</p> <p>Schematically, the call looks like this</p> Define a new task<pre><code>mutation addAdvancedTask {\naddAdvancedTaskDefinition(input:{\nname: string,\nconfirmationText: string,\ntype: [COMMAND|IMAGE],\n[project|environment]: int,\ndescription: string,\nservice: string,\ncommand: string,\nadvancedTaskDefinitionArguments: [\n{\nname: \"ENVIROMENT_VARIABLE_NAME\",\ndisplayName: \"Friendly Name For Variable\",\ntype: [STRING | ENVIRONMENT_SOURCE_NAME | ENVIRONMENT_SOURCE_NAME_EXCLUDE_SELF]\n}\n]\n}) {\n... on AdvancedTaskDefinitionImage {\nid\nname\ndescription\nservice\nimage\nconfirmationText\nadvancedTaskDefinitionArguments {\ntype\nrange\nname\ndisplayName\n}\n...\n}\n... on AdvancedTaskDefinitionCommand {\nid\nname\ndescription\nservice\ncommand\nadvancedTaskDefinitionArguments {\ntype\nrange\nname\ndisplayName\n}\n...\n}\n}\n}\n</code></pre> <p>Fields <code>name</code> and <code>description</code> are straightforward. They're simply the name and description of the task - these are used primarily in the UI.</p> <p>The <code>type</code> field needs some explanation - for now, only platform admins are able to define <code>IMAGE</code> type commands - these allow for the running of specifically created task images as tasks, rather than targeting existing services. Most tasks, though, will be <code>COMMAND</code> types.</p> <p>The <code>[project|environment]</code> set of fields will attach the task to either the <code>project</code> or <code>environment</code> (depending on the key you use), with the value being the id. In the case we're considering for our <code>yarn audit</code> we will specify we're targeting a <code>project</code> with an ID of <code>42</code>.</p> <p>We put the service we'd like to target with our task in the <code>service</code> field, and <code>command</code> is the actual command that we'd like to run.</p>"},{"location":"using-lagoon-advanced/custom-tasks/#arguments-passed-to-tasks","title":"Arguments passed to tasks","text":"<p>In order to give more flexibility to the users invoking the tasks via the Lagoon UI, we support defining task arguments. These arguments are displayed as text boxes or drop downs and are required for the task to be invoked.</p> <p>Here is an example of how we might set up two arguments.</p> Define task arguments<pre><code>advancedTaskDefinitionArguments: [\n{\nname: \"ENV_VAR_NAME_SOURCE\",\ndisplayName: \"Environment source\",\ntype: ENVIRONMENT_SOURCE_NAME\n},\n{\nname: \"ENV_VAR_NAME_STRING\",\ndisplayName: \"Echo value\",\ntype: STRING\n}\n]\n})\n</code></pre> <p>This fragment shows both types of arguments the system currently supports. The first, <code>ENV_VAR_NAME_SOURCE</code> is an example of type <code>ENVIRONMENT_SOURCE_NAME</code>, which will present the user of the UI a dropdown of the different environments inside of a project. If we don't want to allow the task to be run on the invoking environment (say, if we want to import a database from another environment), we can restrict the environment list by using <code>ENVIRONMENT_SOURCE_NAME_EXCLUDE_SELF</code>. The second <code>ENV_VAR_NAME_STRING</code> is of type <code>STRING</code> and will present the user with a textbox to fill in.</p> <p>The values that the user selects will be available as environment variables in the <code>COMMAND</code> type tasks when the task is run.</p> <p></p>"},{"location":"using-lagoon-advanced/custom-tasks/#system-wide-tasks","title":"System wide tasks","text":"<p>Only your Lagoon administrator is able to register system wide tasks. These tasks will appear for all environments, subject to the user's permission to invoke them.</p> <p>Creating a system wide task is almost exactly the same as other task types, with two exceptions.</p> <p>First, you set the <code>systemWide: true</code> field in your <code>addAdvancedTaskDefinition</code> mutation.</p> <p>Second, you make sure you have not specified <code>groupName</code>, <code>project</code>, or <code>environment</code> - which would defeat the purpose, since these fields are used to target specific contexts.</p>"},{"location":"using-lagoon-advanced/custom-tasks/#confirmation","title":"Confirmation","text":"<p>When the <code>confirmationText</code> field has text, it will be displayed with a confirmation modal in the UI before the user is able to run the task.</p> <p></p>"},{"location":"using-lagoon-advanced/custom-tasks/#invoking-the-task","title":"Invoking the task","text":"<p>With the task now defined, the task should now show up in the tasks dropdown in the Lagoon UI.</p> <p>We are also able to invoke it via the GraphQL api by using the <code>invokeTask</code> mutation.</p> Invoke task<pre><code>mutation invokeTask {\ninvokeRegisteredTask(advancedTaskDefinition: int, environment: int) {\nstatus\n}\n}\n</code></pre> <p>Note that <code>invokeTask</code> will always invoke a task on a specific environment.</p>"},{"location":"using-lagoon-advanced/custom-tasks/#example","title":"Example","text":"<p>Let's now setup our <code>yarn audit</code> example.</p> Define task mutation<pre><code>mutation runYarnAudit {\naddAdvancedTaskDefinition(input:{\nname:\"Run yarn audit\",\nproject: 42,\ntype:COMMAND,\npermission:DEVELOPER,\ndescription: \"Runs a 'yarn audit'\",\nservice:\"node\",\ncommand: \"yarn audit\"})\n{\nid\n}\n}\n</code></pre> <p>This, then, will define our task for our project (42). When we run this, we will get the ID of the task definition back (for argument's sake, let's say it's <code>9</code>)</p> <p>This task will now be available to run from the UI for anyone with the <code>DEVELOPER</code> or <code>MAINTAINER</code> role.</p> <p></p>"},{"location":"using-lagoon-advanced/deploytarget-configs/","title":"DeployTarget Configurations","text":"<p>DeployTarget configurations are a way to define how a project can deploy to multiple clusters. This feature is useful when you have two clusters, one which could be dedicated for running production workloads, and another that is used for running development workloads.</p> <p>The configuration for these is not limited to just a production/development split though, so projects could perceivably target more than one specific cluster.</p> <p>The basic idea of a DeployTarget configuration is that it is a way to easily define how a project can deploy across multiple clusters. It uses the existing methods of checking if a environment is valid</p>"},{"location":"using-lagoon-advanced/deploytarget-configs/#important-information","title":"Important Information","text":"<p>Before going in to how to configure a project to leverage DeployTarget configurations, there are some things you need to know.</p> <ol> <li> <p>Environments now have two new fields available to them to identify which DeployTarget(Kubernetes or OpenShift) they have been created on.</p> <ol> <li><code>kubernetesNamespacePattern</code></li> <li><code>kubernetes</code></li> </ol> </li> <li> <p>Once an environment has been deployed to a specific DeployTarget, it will always deploy to this target, even if the DeployTarget configuration, or project configuration is modified.</p> <ol> <li>This offers some safety to existing environments by preventing changes to DeployTarget configurations from creating new environments on different clusters.</li> <li>This is a new feature that is part of Lagoon, not specifically for DeployTarget configurations.</li> </ol> </li> <li> <p>By default, if no DeployTarget configurations are associated to a project, that project will continue to use the existing methods to determine which environments to deploy. These are the following fields used for this.</p> <ol> <li><code>branches</code></li> <li><code>pullrequests</code></li> <li><code>kubernetesNamespacePattern</code></li> <li><code>kubernetes</code></li> </ol> </li> <li> <p>As soon as any DeployTarget configurations are added to a project, then all future deployments for this project will use these configurations. What is defined in the project is ignored, and overwritten to inform users that DeployTarget configurations are in use.</p> </li> <li> <p>DeployTarget configurations are weighted, which means that a DeployTarget configuration with a larger weight is prioritized over one with lower weight.</p> <p>1. The order in which they are returned by the query is the order they are used to determine where an environment should be deployed.</p> </li> <li> <p>Active/Standby environments can only be deployed to the same cluster, so your DeployTarget configuration must be able to deploy both those environments to the same target.</p> </li> <li> <p>Projects that leverage the <code>promote</code> feature of Lagoon must be aware that DeployTarget configurations are ignored for the <code>destination</code> environment.</p> <ol> <li>The destination environment will always be deployed to the same target that the <code>source</code> environment is on, your DeployTarget configuration MUST be configured correctly for this <code>source</code> environment.</li> <li>For safety, it is best to define both the <code>source</code> and <code>destination</code> environment in the same DeployTarget configuration branch regex.</li> </ol> </li> </ol>"},{"location":"using-lagoon-advanced/deploytarget-configs/#configuration","title":"Configuration","text":"<p>To configure a project to use DeployTarget configurations, the first step is to add a configuration to a project.</p> <p>The following GraphQL mutation can be used, this particular example will add a DeployTarget configuration to the project with the project ID 1. It will allow only the branches that match the name <code>main</code> to be deployed, and <code>pullrequests</code> is set to <code>false</code>. This means no other branches will be able to deploy to this particular target, and no pull requests will be deployed to this particular target. The <code>deployTarget</code> is ID 1, this could be a Kubernetes cluster in a specific region, or designated for a specific type of workload (production or development).</p> Configure DeployTarget<pre><code>mutation addDeployTargetConfig{\naddDeployTargetConfig(input:{\nproject: 1\nbranches: \"main\"\npullrequests: \"false\"\ndeployTarget: 1\nweight: 1\n}){\nid\nweight\nbranches\npullrequests\ndeployTargetProjectPattern\ndeployTarget{\nname\nid\n}\nproject{\nname\n}\n}\n}\n</code></pre> <p>Info</p> <p><code>deployTarget</code> is an alias the Kubernetes or OpenShift ID in the Lagoon API</p> <p>It is also possible to configure multiple DeployTarget configurations.</p> <p>The following GraphQL mutation can be used, this particular example will add a DeployTarget configuration to the same project as above.</p> <p>It will allow only the branches that regex match with <code>^feature/|^(dev|test|develop)$</code> to be deployed, and <code>pullrequests</code> is set to <code>true</code> so all pull requests will reach this target.</p> <p>The targeted cluster in this example is ID 2, which is a completely different Kubernetes cluster to what was defined above for the <code>main</code> branch.</p> Configure DeployTarget<pre><code>mutation addDeployTargetConfig{\naddDeployTargetConfig(input:{\nproject: 1\nbranches: \"^feature/|^(dev|test|develop)$\"\npullrequests: \"true\"\ndeployTarget: 2\nweight: 1\n}){\nid\nweight\nbranches\npullrequests\ndeployTargetProjectPattern\ndeployTarget{\nname\nid\n}\nproject{\nname\n}\n}\n}\n</code></pre> <p>Once these have been added to a project, you can return all the DeployTarget configurations for a project using the following query</p> Get DeployTargets<pre><code>query deployTargetConfigsByProjectId{\ndeployTargetConfigsByProjectId(project:1){\nid\nweight\nbranches\npullrequests\ndeployTargetProjectPattern\ndeployTarget{\nname\nid\n}\nproject{\nname\n}\n}\n}\n# result:\n{\n\"data\": {\n\"deployTargetConfigsByProjectId\": [\n{\n\"id\": 1,\n\"weight\": 1,\n\"branches\": \"main\",\n\"pullrequests\": \"false\",\n\"deployTargetProjectPattern\": null,\n\"deployTarget\": {\n\"name\": \"production-cluster\",\n\"id\": 1\n},\n\"project\": {\n\"name\": \"my-project\"\n}\n},\n{\n\"id\": 2,\n\"weight\": 1,\n\"branches\": \"^feature/|^(dev|test|develop)$\",\n\"pullrequests\": \"true\",\n\"deployTargetProjectPattern\": null,\n\"deployTarget\": {\n\"name\": \"development-cluster\",\n\"id\": 2\n},\n\"project\": {\n\"name\": \"my-project\"\n}\n}\n]\n}\n}\n</code></pre>"},{"location":"using-lagoon-advanced/nodejs/","title":"Node.js Graceful Shutdown","text":"<p>Node.js has integrated web server capabilities. Plus, with Express, these can be extended even more.</p> <p>Unfortunately, Node.js does not handle shutting itself down very nicely out of the box. This causes many issues with containerized systems. The biggest issue is that when a Node.js container is told to shut down, it will immediately kill all active connections, and does not allow them to stop gracefully.</p> <p>This part explains how you can teach Node.js to behave like a real web server: finishing active requests and then gracefully shutting down.</p> <p>As an example we use a no-frills Node.js server with Express:</p> app.js<pre><code>const express = require('express');\nconst app = express();\n// Adds a 5 second delay for all requests.\napp.use((req, res, next) =&gt; setTimeout(next, 5000));\napp.get('/', function (req, res) {\nres.send(\"Hello World\");\n})\nconst server = app.listen(3000, function () {\nconsole.log('Example app listening on port 3000!');\n})\n</code></pre> <p>This will just show \"Hello World\" in when the web server is visited at <code>localhost:3000</code>. Note the 5 second delay in the response in order to simulate a request that takes some computing time.</p>"},{"location":"using-lagoon-advanced/nodejs/#part-a-allow-requests-to-be-finished","title":"Part A: Allow requests to be finished","text":"<p>If we run the above example and stop the Node.js process while the request is handled (within the 5 seconds), we will see that the Node.js server immediately kills the connection, and our browser will show an error.</p> <p>To explain to our Node.js server that it should wait for all the requests to be finished before actually stopping itself, we add the following code:</p> Graceful Shutdown<pre><code>const startGracefulShutdown = () =&gt; {\nconsole.log('Starting shutdown of express...');\nserver.close(function () {\nconsole.log('Express shut down.');\n});\n}\nprocess.on('SIGTERM', startGracefulShutdown);\nprocess.on('SIGINT', startGracefulShutdown);\n</code></pre> <p>This basically calls <code>server.close()</code>, which will instruct the Node.js HTTP server to:</p> <ol> <li>Not accept any more requests.</li> <li>Finish all running requests.</li> </ol> <p>It will do this on <code>SIGINT</code> (when you press <code>CTRL + C</code>) or on <code>SIGTERM</code> (the standard signal for a process to terminate).</p> <p>With this small addition, our Node.js will wait until all requests are finished, and then stop itself.</p> <p>If we were not running Node.js in a containerized environment, we would probably want to include some additional code that actually kills the Node.js server after a couple of seconds, as it is technically possible that some requests are either taking very long or are never stopped. Because it is running in a containerized system, if the container is not stopped, Docker and Kubernetes will run a <code>SIGKILL</code> after a couple of seconds (usually 30) which cannot be handled by the process itself, so this is not a concern for us.</p>"},{"location":"using-lagoon-advanced/nodejs/#part-b-yarn-and-npm-children-spawning-issues","title":"Part B: Yarn and NPM children spawning issues","text":"<p>If we only implemented Part A, we would have a good experience. In the real world, many Node.js systems are built with Yarn or NPM, which provide not only package management systems to Node.js, but also script management.</p> <p>With these script functionalities, we simplify the start of our application. We can see many <code>package.json</code> files that look like:</p> package.json<pre><code>{\n\"name\": \"node\",\n\"version\": \"1.0.0\",\n\"main\": \"index.js\",\n\"license\": \"MIT\",\n\"dependencies\": {\n\"express\": \"^4.15.3\"\n},\n\"scripts\": {\n\"start\": \"node index.js\"\n}\n}\n</code></pre> <p>and with the defined <code>scripts</code> section we can run our application just with:</p> Start application<pre><code>yarn start\n</code></pre> <p>or</p> Start application<pre><code>npm start\n</code></pre> <p>This is nice and makes the life of developers easier. So we also end up using the same within Dockerfiles:</p> .dockerfile<pre><code>CMD [\"yarn\", \"start\"]\n</code></pre> <p>Unfortunately there is a big problem with this:</p> <p>If <code>yarn</code> or <code>npm</code> get a <code>SIGINT</code> or <code>SIGTERM</code> signal, they correctly forward the signal to spawned child process (in this case <code>node index.js</code>). However, it does not wait for the child processes to stop. Instead, <code>yarn</code>/<code>npm</code> immediately stop themselves. This signals to Docker/Kubernetes that the container is finished and Docker/Kubernetes will kill all children processes immediately. There are issues open for Yarn and NPM but unfortunately they are not solved yet.</p> <p>The solution for the problem is to not use Yarn or NPM to start your application and instead use <code>node</code> directly:</p> .dockerfile<pre><code>CMD [\"node\", \"index.js\"]\n</code></pre> <p>This allows Node.js to properly terminate and Docker/Kubernetes will wait for Node.js to be finished.</p>"},{"location":"using-lagoon-advanced/private-repositories/","title":"Private Repositories","text":"<ol> <li>Give the deploy key access to the Git repositories in your GitHub/GitLab/BitBucket.</li> <li>Add <code>ARG LAGOON_SSH_PRIVATE_KEY</code> to your <code>dockerfile</code> (before the step of the build process that needs the SSH key).</li> <li>Add <code>RUN /lagoon/entrypoints/05-ssh-key.sh</code> to your <code>dockerfile</code> (before the step of the build process that needs the SSH key).</li> </ol> Set up your private respository<pre><code>RUN /lagoon/entrypoints/05-ssh-key.sh &amp;&amp; composer install &amp;&amp; rm /home/.ssh/key\n</code></pre>"},{"location":"using-lagoon-advanced/project-default-users-keys/","title":"Project Default Users and SSH Keys","text":"<p>When a Lagoon project is created, by default an associated SSH \"project key\" is generated and the private key made available inside the CLI pods of the project. A service account <code>default-user@project</code> is also created and given <code>MAINTAINER</code> access to the project. The SSH \"project key\" is attached to that <code>default-user@project</code>.</p> <p>The result of this is that from inside the CLI pod of any environment it is possible to SSH to any other environment within the same project. This access is used for running tasks from the command line such as synchronizing databases between environments (e.g. drush <code>sql-sync</code>).</p> <p>There is more information on the <code>MAINTAINER</code> role available in the RBAC documentation.</p>"},{"location":"using-lagoon-advanced/project-default-users-keys/#specifying-the-project-key","title":"Specifying the project key","text":"<p>It is possible to specify an SSH private key when creating a project, but this is not recommended as it has security implications.</p>"},{"location":"using-lagoon-advanced/setting-up-xdebug-with-lagoon/","title":"Setting up Xdebug with Lagoon","text":""},{"location":"using-lagoon-advanced/setting-up-xdebug-with-lagoon/#enable-xdebug-extension-in-the-containers","title":"Enable Xdebug extension in the containers","text":"<p>The Lagoon base images are pre-configured with Xdebug but, for performance reasons, the extension is not loaded by default. To enable the extension, the <code>XDEBUG_ENABLE</code> environment variable must be set to <code>true</code>:</p> <ul> <li> <p>Locally (Pygmy and Lando)</p> <ol> <li>If your project is based off the lagoon-examples <code>docker-compose.yml</code>     file, the environment variable already exists. Uncomment these lines.</li> <li>Make sure to rebuild and restart the containers after changing any     environment variables. - Remotely (dev/prod)</li> <li>You can     use the Lagoon API to add the environment variable to a running environment.</li> <li>Make sure to redeploy the environment after changing this any     environment variables.</li> </ol> </li> </ul>"},{"location":"using-lagoon-advanced/setting-up-xdebug-with-lagoon/#activate-xdebug-extension","title":"Activate Xdebug Extension","text":"<p>The default Xdebug configuration requires a \"trigger\" to activate the extension and start a session. You can view the complete documentation for activating the debugger but the most straightforward instructions are below.</p>"},{"location":"using-lagoon-advanced/setting-up-xdebug-with-lagoon/#cli","title":"CLI","text":"<p>The <code>php-cli</code> image is configured to always activate Xdebug when it\u2019s enabled, so there is nothing else that needs to be done. Running any PHP script will start a debugging session.</p>"},{"location":"using-lagoon-advanced/setting-up-xdebug-with-lagoon/#web","title":"Web","text":"<p>Install a browser extension to set/unset an activation cookie.</p> <p>Make sure the activation cookie is set for the website you want to start debugging.</p>"},{"location":"using-lagoon-advanced/setting-up-xdebug-with-lagoon/#configure-phpstorm","title":"Configure PHPStorm","text":"<ol> <li>PHPStorm is configured correctly by default.</li> <li>Click the \u201cStart Listening for PHP Debug Connections\u201d icon in the    toolbar.</li> <li>Load a webpage or run a Drush command.</li> <li>On first run, PHPStorm should pop up a window asking you to:<ol> <li>Confirm path mappings.</li> <li>Select the correct file locally that was triggered on the server.</li> </ol> </li> </ol>"},{"location":"using-lagoon-advanced/setting-up-xdebug-with-lagoon/#configure-visual-studio-code","title":"Configure Visual Studio Code","text":"<ol> <li>Install the PHP Debug extension    by Felix Becker.</li> <li>Follow the instructions    to create a basic <code>launch.json</code> for PHP.</li> <li> <p>Add correct path mappings. For a typical Drupal site, an example would be:</p> launch.json<pre><code>\"pathMappings\": {\n\"/app\": \"${workspaceFolder}\",\n},\n</code></pre> </li> <li> <p>In the Run tab of Visual Studio Code, click the green arrow next to    \u201cListen for Xdebug\u201d</p> </li> <li>Load a webpage or run a Drush command.</li> </ol>"},{"location":"using-lagoon-advanced/setting-up-xdebug-with-lagoon/#troubleshooting","title":"Troubleshooting","text":"<ul> <li>Verify that Xdebug extension is loaded. The best way to do this on a Drupal   site is to check the PHP status page. You should find a section about Xdebug   and all its settings.</li> </ul> <ul> <li>Verify the following settings:</li> </ul> Directive Local Value xdebug.mode debug xdebug.client_host <code>host.docker.internal</code> or your IP address xdebug.client_port 9003 <ul> <li>Enable Xdebug logging within the running containers. All you need is an   environment variable named <code>XDEBUG_LOG</code> set to anything to enable logging.   Logs will be saved to <code>/tmp/xdebug.log</code>. If you are using the lagoon-examples   then you can uncomment some existing lines.</li> <li>Verify you have the activation cookie set. You can use the browser tools in   Chrome or Firefox to check that a <code>XDEBUG_SESSION</code> cookie is set.</li> <li>Verify that Xdebug is activated and attempting to start a debug session with   your computer. You can use the <code>nc -l 9003</code> command line tool to open the   Xdebug port. If everything is configured in PHP correctly, you should get a   Xdebug init response when you load a webpage or run a Drush command.</li> <li>Verify that the <code>xdebug.client_host</code> has been set correctly. For local   debugging with Docker for Mac, this value should be <code>host.docker.internal</code>.   For remote debugging this value should be your IP address. If this value was   not correctly determined, you can override it by setting the <code>DOCKERHOST</code>   environment variable.</li> <li>When using Lando locally, in order to debug scripts run from the CLI you must   first SSH into the CLI container via <code>lando ssh</code>. You won\u2019t be able to debug   things by running <code>lando drush</code> or <code>lando php</code>.</li> </ul>"},{"location":"using-lagoon-advanced/setting-up-xdebug-with-lagoon/#mac-specific-troubleshooting","title":"Mac specific troubleshooting","text":"<ul> <li> <p>Verify that Docker for Mac networking is not broken. On your host machine, run   <code>nc -l 9003</code>, then in a new terminal window, run:</p> Verify Docker for Mac networking<pre><code>docker compose run cli nc -zv host.docker.internal 9003\n</code></pre> <p>You should see a message like: <code>host.docker.internal (192.168.65.2:9003) open</code>.</p> </li> </ul>"},{"location":"using-lagoon-advanced/setting-up-xdebug-with-lagoon/#linux-specific-troubleshooting","title":"Linux specific troubleshooting","text":"<ul> <li> <p>Ensure the host <code>host.docker.internal</code> can be reached. If <code>docker</code> has been   installed manually (and not through Docker Desktop), this host will not   resolve. You can force this to resolve with an additional snippet in your   <code>docker-compose.yml</code> file (instructions taken from this blog post):</p> docker-compose.yml alterations for Linux<pre><code>  services:\ncli:\nextra_hosts:\nhost.docker.internal: host-gateway\nphp:\nextra_hosts:\nhost.docker.internal: host-gateway\n</code></pre> </li> </ul>"},{"location":"using-lagoon-advanced/setting-up-xdebug-with-lagoon/#xdebug-2","title":"Xdebug 2","text":"<p>If you're running older images you may still be using Xdebug version 2. All the information on this page still applies, but some of the configuration names and values have changes:</p> v3 v2 xdebug.mode xdebug.remote_enabled On xdebug.client_host xdebug.remote_host <code>host.docker.internal</code> or your IP address xdebug.client_port xdebug.remote_port 9000"},{"location":"using-lagoon-advanced/simplesaml/","title":"SimpleSAML","text":""},{"location":"using-lagoon-advanced/simplesaml/#simplesamlphp","title":"SimpleSAMLphp","text":"<p>This is an example of how to add SimpleSAMLphp to your project and then modify configuration to serve it via NGINX.</p>"},{"location":"using-lagoon-advanced/simplesaml/#requirements","title":"Requirements","text":"<p>Add SimpleSAMLphp to your project:</p> Add SimpleSAMLphp to your project via Composer<pre><code>composer req simplesamlphp/simplesamlphp\n</code></pre>"},{"location":"using-lagoon-advanced/simplesaml/#modify-configuration-for-simplesamlphp","title":"Modify configuration for SimpleSAMLphp","text":"<p>Copy <code>authsources.php</code> and <code>config.php</code> from <code>vendor/simplesamlphp/simplesamlphp/config-templates</code> to somewhere outside vendor directory, such as <code>conf/simplesamlphp</code>. You also need <code>saml20-idp-remote.php</code> from <code>vendor/simplesamlphp/simplesamlphp/metadata-templates</code>.</p> <p>In <code>config.php</code> set following values for Lagoon:</p> <p>Base URL path where SimpleSAMLphp is accessed:</p> config.php<pre><code>  'baseurlpath' =&gt; 'https://YOUR_DOMAIN.TLD/simplesaml/',\n</code></pre> <p>Store sessions to database:</p> config.php<pre><code>  'store.type'                    =&gt; 'sql',\n  'store.sql.dsn'                 =&gt; vsprintf('mysql:host=%s;port=%s;dbname=%s', [\n    getenv('MARIADB_HOST'),\n    getenv('MARIADB_PORT'),\n    getenv('MARIADB_DATABASE'),\n  ]),\n</code></pre> <p>Alter other settings to your liking:</p> <ul> <li>Check the paths for logs and certs.</li> <li>Secure SimpleSAMLphp dashboard.</li> <li>Set up level of logging.</li> <li>Set <code>technicalcontact</code> and <code>timezone</code>.</li> </ul> <p>Add authsources (IdPs) to <code>authsources.php</code>, see example:</p> authsources.php<pre><code>  'default-sp' =&gt; [\n    'saml:SP',\n    // The entity ID of this SP.\n    'entityID' =&gt; 'https://YOUR_DOMAIN.TLD',\n    // The entity ID of the IdP this should SP should contact.\n    // Can be NULL/unset, in which case the user will be shown a list of available IdPs.\n    'idp' =&gt; 'https://YOUR_IDP_DOMAIN.TLD',\n    // The URL to the discovery service.\n    // Can be NULL/unset, in which case a builtin discovery service will be used.\n    'discoURL' =&gt; null,\n    'NameIDFormat' =&gt; 'urn:oasis:names:tc:SAML:2.0:nameid-format:transient',\n    'certificate' =&gt; '/app/conf/simplesamlphp/certs/saml.crt',\n    'privatekey' =&gt; '/app/conf/simplesamlphp/certs/saml.pem',\n    'redirect.sign' =&gt; TRUE,\n    'redirect.validate' =&gt; TRUE,\n    'authproc' =&gt; [\n      50 =&gt; [\n        'class' =&gt; 'core:AttributeCopy',\n        'urn:oid:1.3.6.1.4.1.5923.1.1.1.6' =&gt; 'eduPersonPrincipalName',\n      ],\n      51 =&gt; [\n        'class' =&gt; 'core:AttributeCopy',\n        'urn:oid:2.5.4.42' =&gt; 'givenName',\n      ],\n      52 =&gt; [\n        'class' =&gt; 'core:AttributeCopy',\n        'urn:oid:2.5.4.4' =&gt; 'sn',\n      ],\n      53 =&gt; [\n        'class' =&gt; 'core:AttributeCopy',\n        'urn:oid:0.9.2342.19200300.100.1.3' =&gt; 'mail',\n      ],\n    ],\n  ],\n</code></pre> <p>Add IdP metadata to <code>saml20-idp-remote.php</code>, see example:</p> saml20-idp-remote.php<pre><code>&lt;?php\n/**\n * SAML 2.0 remote IdP metadata for SimpleSAMLphp.\n *\n * Remember to remove the IdPs you don't use from this file.\n *\n * See: https://simplesamlphp.org/docs/stable/simplesamlphp-reference-idp-remote\n */\n/**\n * Some IdP.\n */\n$metadata['https://YOUR_IDP_DOMAIN.TLD'] = [\n'entityid' =&gt; 'https://YOUR_IDP_DOMAIN.TLD',\n'name' =&gt; [\n'en' =&gt; 'Some IdP',\n],\n'description' =&gt; 'Some IdP',\n...\n];\n</code></pre> <p>In your build process, copy configuration files to SimpleSAMLphp:</p> <ul> <li><code>vendor/simplesamlphp/simplesamlphp/config/authsources.php</code></li> <li><code>vendor/simplesamlphp/simplesamlphp/config/config.php</code></li> <li><code>vendor/simplesamlphp/simplesamlphp/metadata/saml20-idp-remote.php</code></li> </ul>"},{"location":"using-lagoon-advanced/simplesaml/#create-nginx-conf-for-simplesamlphp","title":"Create NGINX conf for SimpleSAMLphp","text":"<p>Create file  <code>lagoon/nginx/location_prepend_simplesamlphp.conf</code>:</p> location_prepend_simplesamlphp.conf<pre><code>location ^~ /simplesaml {\nalias /app/vendor/simplesamlphp/simplesamlphp/www;\nlocation ~ ^(?&lt;prefix&gt;/simplesaml)(?&lt;phpfile&gt;.+?\\.php)(?&lt;pathinfo&gt;/.*)?$ {\ninclude          fastcgi_params;\nfastcgi_pass     ${NGINX_FASTCGI_PASS:-php}:9000;\nfastcgi_param    SCRIPT_FILENAME $document_root$phpfile;\n# Must be prepended with the baseurlpath\nfastcgi_param    SCRIPT_NAME /simplesaml$phpfile;\nfastcgi_param    PATH_INFO $pathinfo if_not_empty;\n}\n}\n</code></pre> <p>This will route <code>/simplesaml</code> URLs to SimpleSAMLphp in vendor.</p>"},{"location":"using-lagoon-advanced/simplesaml/#add-additional-nginx-conf-to-nginx-image","title":"Add additional NGINX conf to NGINX image","text":"<p>Modify <code>nginx.dockerfile</code> and add <code>location_prepend_simplesamlphp.conf</code> to the image:</p> nginx.dockerfile<pre><code>ARG CLI_IMAGE\nFROM ${CLI_IMAGE} AS cli\n\nFROM uselagoon/nginx-drupal\n\nCOPY --from=cli /app /app\n\nCOPY lagoon/nginx/location_prepend_simplesamlphp.conf /etc/nginx/conf.d/drupal/location_prepend_simplesamlphp.conf\nRUN fix-permissions /etc/nginx/conf.d/drupal/location_prepend_simplesamlphp.conf\n\n# Define where the Drupal Root is located\nENV WEBROOT=public\n</code></pre>"},{"location":"using-lagoon-advanced/triggering-deployments/","title":"Triggering Deployments","text":""},{"location":"using-lagoon-advanced/triggering-deployments/#trigger-a-new-deployment-using-azure-pipelines","title":"Trigger a new deployment using Azure Pipelines","text":"<p>In order to automatically trigger new deployments using Azure Pipelines follow these instructions:</p> <ol> <li>Add your deployment SSH private key to Azure as a secure file as <code>id_rsa_lagoon</code>. For more information about secure files have a look at the Azure Documentation Site.</li> <li>Add the following configuration to your <code>azure-pipelines.yml</code>:</li> </ol> azure-pipelines.yml<pre><code>pool:\nvmImage: 'ubuntu-latest'\nstages:\n# .. other stages\n- stage: Deploy\ncondition: and(succeeded(), in(variables['Build.SourceBranch'], 'refs/heads/staging', 'refs/heads/develop'))\njobs:\n- job: DeployLagoon\nsteps:\n- task: DownloadSecureFile@1\nname: lagoonSshKey\ndisplayName: 'Download Lagoon SSH key'\ninputs:\nsecureFile: id_rsa_lagoon\n- script: |\ncurl -L \"https://github.com/uselagoon/lagoon-cli/releases/download/v0.21.3/lagoon-cli-v0.21.3-linux-amd64\" -o ./lagoon\nchmod +x ./lagoon\ndisplayName: 'Download lagoon-cli'\n- script: ./lagoon login -i $(lagoonSshKey.secureFilePath)\ndisplayName: 'Log into Lagoon'\n- script: ./lagoon deploy branch -e $(Build.SourceBranchName) -p my-awesome-project -b $(Build.SourceBranchName) --force\ndisplayName: 'Trigger deployment using lagoon-cli'\n</code></pre> <p>This will trigger a new deployment whenever changes are made on the <code>develop</code> or <code>staging</code> branch. Adjust these values accordingly so they fit your deployment strategy and configuration.</p>"},{"location":"using-lagoon-advanced/triggering-deployments/#push-without-deploying","title":"Push without deploying","text":"<p>There may be a case where you want to push without a deployment. Make sure your commit message contains \"<code>[skip deploy]</code>\" or \"<code>[deploy skip]</code>\" and Lagoon will not trigger a deployment from that commit.</p>"},{"location":"using-lagoon-advanced/using-harbor/","title":"Harbor","text":"<p>Harbor is used as the default package repository for Lagoon when deploying to Kubernetes infrastructure. Harbor provides a Docker registry and a container security scanning solution provided by Trivy.</p> <p>Note</p> <p>When running Lagoon locally, the configuration for Harbor is handled entirely automagically.</p> <p>If you are running Lagoon locally, you can access that UI at localhost:8084. The username is <code>admin</code> and the password is <code>admin</code>.</p> <p>Note</p> <p>If you are hosting a site with a provider, they may not allow customer access to the Harbor UI.</p> <p>Once logged in, the first screen is a list of all repositories your user has access to. Each \"repository\" in Harbor correlates to a project in Lagoon.</p> <p></p> <p>Within each Harbor repository, you'll see a list of container images from all environments with a single Lagoon project.</p> <p></p> <p>From here, you can drill down into an individual container in order to see its details, including an overview of its security scan results.</p> <p></p>"},{"location":"using-lagoon-advanced/using-harbor/security-scanning/","title":"Security Scanning","text":"<p>Harbor comes with a built-in security scanning solution provided by the Trivy service. This service analyzes a specified container image for any installed packages, and collects the version numbers of those installed packages. The Trivy service then searches the National Vulnerability Database for any CVEs (common vulnerabilities and exposures) affecting those package versions. Trivy is also library aware, so it will scan any Composer files or other package library definition files and report any vulnerabilities found within those package versions. These vulnerabilities are then reported within Harbor for each individual container.</p> <p>An example of a security scan in Harbor, showing applicable vulnerabilities for a scanned container:</p> <p></p>"},{"location":"using-lagoon-advanced/using-harbor/harbor-settings/","title":"Running Harbor Locally","text":"<p>Lagoon supports running Harbor locally, where it makes use of MinIO as a storage backend, which is an AWS S3 compatible local storage solution.</p>"},{"location":"using-lagoon-advanced/using-harbor/harbor-settings/#settings","title":"Settings","text":"<p>Harbor is composed of multiple containers, which all require different settings in order for them to run successfully.</p>"},{"location":"using-lagoon-advanced/using-harbor/harbor-settings/#environment-variables","title":"Environment Variables","text":"<p>The following environment variables are required to be set in order for Harbor to properly start:</p> <ul> <li><code>HARBOR_REGISTRY_STORAGE_AMAZON_BUCKET</code><ul> <li>This needs to be set to the name of the AWS bucket which Harbor will save images to.</li> <li>Defaults to <code>harbor-images</code> when Lagoon is run locally or during CI testing.</li> </ul> </li> <li><code>HARBOR_REGISTRY_STORAGE_AMAZON_REGION</code><ul> <li>This needs to be set to the AWS region in which Harbor's bucket is located.</li> <li>Defaults to <code>us-east-1</code> when Lagoon is run locally or during CI testing.</li> </ul> </li> <li><code>REGISTRY_STORAGE_S3_ACCESSKEY</code><ul> <li>This needs to be set to the AWS access key Harbor should use to read and write to the AWS bucket.</li> <li>Defaults to an empty string when Lagoon is run locally or during CI testing, as MinIO does not require authentication.</li> </ul> </li> <li><code>REGISTRY_STORAGE_S3_SECRETKEY</code><ul> <li>This needs to be set to the AWS secret key Harbor should use to read and write to the AWS bucket.</li> <li>Defaults to an empty string when Lagoon is run locally or during CI testing, as MinIO does not require authentication.</li> </ul> </li> </ul> <p>The following environment variables can be set if required:</p> <ul> <li><code>HARBOR_REGISTRY_STORAGE_AMAZON_ENDPOINT</code><ul> <li>If this variable is set, the Harbor registry will use its value as the address of the s3 entrypoint.</li> <li>Defaults to <code>https://s3.amazonaws.com</code> when this variable is not set.</li> </ul> </li> </ul>"},{"location":"using-lagoon-advanced/using-harbor/harbor-settings/#container-specific-settings","title":"Container Specific Settings","text":"<p>The following containers make use of configuration files:</p> <ul> <li>HarborRegistry</li> <li>HarborRegistryCtl</li> <li>Harbor-Core</li> <li>Harbor-Database</li> <li>Harbor-Jobservice</li> <li>Harbor-Trivy</li> </ul> <p>The following containers do not require configuration files to run:</p> <ul> <li>Harbor-Nginx</li> <li>Harbor-Portal</li> <li>Harbor-Redis</li> </ul>"},{"location":"using-lagoon-advanced/using-harbor/harbor-settings/harbor-core/","title":"Harbor-Core","text":"<p>Harbor-Core requires a configuration file to start, which is located at <code>/etc/core/app.conf</code> within the container. Any changes made to this config file are temporary and will not persist once the pod is restarted.</p> <p>The configmap from which this config file is generated is stored within Lagoon in the <code>services/harbor-core/harbor-core.yml</code> file. Any changes made to this configmap will be persisted across container restarts.</p>"},{"location":"using-lagoon-advanced/using-harbor/harbor-settings/harbor-core/#config-file-contents","title":"Config File Contents","text":"<ul> <li><code>_REDIS_URL</code><ul> <li>Tells harbor-core and the Chartmuseum service connection info for the Redis server.</li> <li>The default value is <code>harbor-redis:6379,100,</code>.</li> </ul> </li> <li><code>_REDIS_URL_REG</code><ul> <li>The url which harborregistry should use to connect to the Redis server.</li> <li>The default value is <code>redis://harbor-redis:6379/2</code>.</li> </ul> </li> <li><code>ADMIRAL_URL</code><ul> <li>Tells harbor-core where to find the admiral service.</li> <li>This service is not used with Lagoon's implementation of Harbor.</li> <li>The default value is <code>NA</code>.</li> </ul> </li> <li><code>CFG_EXPIRATION</code><ul> <li>This value is not used.</li> <li>The default value is <code>5</code>.</li> </ul> </li> <li><code>CHART_CACHE_DRIVER</code><ul> <li>Tells harbor-core where to store any uploaded charts.</li> <li>The default value is <code>redis</code>.</li> </ul> </li> <li><code>CLAIR_ADAPTER_URL</code><ul> <li>The URL that harbor-core should use to connect to the harbor-trivy service.</li> <li>The default value is <code>http://harbor-trivy:8080</code>.</li> </ul> </li> <li><code>CLAIR_DB</code><ul> <li>The database type harborclair should use.</li> <li>This value is not used, and is included only for legacy support</li> <li>The default value is <code>postgres</code>.</li> </ul> </li> <li><code>CLAIR_DB_HOST</code><ul> <li>This value is not used, and is included only for legacy support</li> <li>Tells harbor-core where to find the harborclair service.</li> <li>The default value is <code>harbor-database</code>.</li> </ul> </li> <li><code>CLAIR_DB_PASSWORD</code><ul> <li>The password used to access harborclair's postgres database.</li> <li>The default value is <code>test123</code> when run locally or during CI testing.</li> <li>This value is not used, and is included only for legacy support</li> <li>This value is retrieved from a secret created when Harbor is first set up on a running Lagoon.</li> </ul> </li> <li><code>CLAIR_DB_PORT</code><ul> <li>The port harborclair should use to connect to the harborclair server.</li> <li>This value is not used, and is included only for legacy support</li> <li>The default value is <code>5432</code>.</li> </ul> </li> <li><code>CLAIR_DB_SSLMODE</code><ul> <li>Whether or not harborclair should use SSL to connect to the postgresql server.</li> <li>This value is not used, and is included only for legacy support</li> <li>The default value is <code>disable</code>.</li> </ul> </li> <li><code>CLAIR_DB_USERNAME</code><ul> <li>The user harborclair should use to connect to the postgresql server.</li> <li>This value is not used, and is included only for legacy support</li> <li>The default value is <code>postgres</code>.</li> </ul> </li> <li><code>CLAIR_HEALTH_CHECK_SERVER_URL</code><ul> <li>This value tells harbor-core where it should issue health checks to for the harbor-trivy service.</li> <li>The default value is <code>http://harbor-trivy:8080</code></li> </ul> </li> <li><code>CLAIR_URL</code><ul> <li>The URL that harbor-core should use to connect to the harbor-trivy service.</li> <li>The default value is <code>http://harbor-trivy:6060</code>.</li> </ul> </li> <li><code>CONFIG_PATH</code><ul> <li>Where harbor-core should look for its config file.</li> <li>The default value is <code>/etc/core/app.conf</code>.</li> </ul> </li> <li><code>CORE_SECRET</code><ul> <li>This value is a pre-shared key that must match between the various services connecting to harbor-core.</li> <li>The default value is set to <code>secret123</code> when Harbor is run locally or during CI testing.</li> <li>This value is retrieved from a secret created when Harbor is first set up on a running Lagoon.</li> </ul> </li> <li><code>CORE_URL</code><ul> <li>The URL that harbor-core should publish to other Harbor services in order for them to connect to the harbor-core service.</li> <li>The default value is <code>http://harbor-core:8080</code>.</li> </ul> </li> <li><code>DATABASE_TYPE</code><ul> <li>The database type Harbor should use.</li> <li>The default value is <code>postgresql</code>.</li> </ul> </li> <li><code>HARBOR_ADMIN_PASSWORD</code><ul> <li>The password which should be used to access harbor using the <code>admin</code> user.</li> <li>The default value is <code>admin</code> when run locally or during CI testing.</li> <li>This value is retreived from a secret created when Harbor is first set up on a running Lagoon.</li> </ul> </li> <li><code>HARBOR_NGINX_ENDPOINT</code><ul> <li>This environment variable tells harborregistry where its NGINX ingress controller, harbor-nginx, is running in order to construct proper push and pull instructions in the UI, among other things.</li> <li>The default value is set to <code>http://harbor-nginx:8080</code> when run locally or during CI testing.</li> <li>Lagoon attempts to obtain and set this variable automagically when run in production. If that process fails, this service will fail to run.</li> </ul> </li> <li><code>HTTP_PROXY</code><ul> <li>The default value is an empty string.</li> </ul> </li> <li><code>HTTPS_PROXY</code><ul> <li>The default value is an empty string.</li> </ul> </li> <li><code>JOBSERVICE_SECRET</code><ul> <li>This value is a pre-shared key that must match between the various services connecting to harbor-jobservice.</li> <li>The default value is set to <code>secret123</code> when Harbor is run locally or during CI testing.</li> <li>This value is retrieved from a secret created when Harbor is first set up on a running Lagoon.</li> </ul> </li> <li><code>JOBSERVICE_URL</code><ul> <li>The URL that harbor-core should use to connect to the harbor-jobservice service.</li> <li>The default value is <code>http://harbor-jobservice:8080</code>.</li> </ul> </li> <li><code>LOG_LEVEL</code><ul> <li>The default log level of the harbor-core service.</li> <li>The default value is <code>error</code>.</li> </ul> </li> <li><code>NO_PROXY</code><ul> <li>A list of hosts which should never have their requests proxied.</li> <li>The default is <code>harbor-core,harbor-jobservice,harbor-database,harbor-trivy,harborregistry,harbor-portal,127.0.0.1,localhost,.local,.internal</code>.</li> </ul> </li> <li><code>PORTAL_URL</code><ul> <li>This value tells the service where to connect to the harbor-portal service.</li> <li>The default value is <code>http://harbor-portal:8080</code>.</li> </ul> </li> <li><code>POSTGRESQL_DATABASE</code><ul> <li>The postgres database harbor-core should use when connecting to the postgresql server.</li> <li>The default value is <code>registry</code>.</li> </ul> </li> <li><code>POSTGRESQL_HOST</code><ul> <li>Where harbor-core should connect to the postgresql server.</li> <li>The default value is <code>harbor-database</code>.</li> </ul> </li> <li><code>POSTGRESQL_MAX_IDLE_CONNS</code><ul> <li>The maximum number of idle connections harbor-core should leave open to the postgresql server.</li> <li>The default value is <code>50</code>.</li> </ul> </li> <li><code>POSTGRESQL_MAX_OPEN_CONNS</code><ul> <li>The maximum number of open connections harbor-core should have to the postgresql server.</li> <li>The default value is <code>100</code>.</li> </ul> </li> <li><code>POSTGRESQL_PASSWORD</code><ul> <li>The password Harbor should use to connect to the postgresql server.</li> <li>The default value is a randomly generated value.</li> </ul> </li> <li><code>POSTGRESQL_PORT</code><ul> <li>The port harbor-core should use to connect to the postgresql server.</li> <li>The default value is <code>5432</code>.</li> </ul> </li> <li><code>POSTGRESQL_USERNAME</code><ul> <li>The username harbor-core should use to connect to the postgresql server.</li> <li>The default value is <code>postgres</code>.</li> </ul> </li> <li><code>POSTGRESQL_SSLMODE</code><ul> <li>Whether or not harbor-core should use SSL to connect to the postgresql server.</li> <li>The default value is <code>disable</code>.</li> </ul> </li> <li><code>REGISTRY_HTTP_SECRET</code><ul> <li>This value is a pre-shared key that must match between the various services connecting to harborregistry.</li> <li>The default value is set to <code>secret123</code> when Harbor is run locally or during CI testing.</li> <li>This value is retreived from a secret created when Harbor is first set up on a running Lagoon.</li> </ul> </li> <li><code>REGISTRY_STORAGE_PROVIDER_NAME</code><ul> <li>The storage backend that harborregistry should use.</li> <li>The default value is <code>s3</code>.</li> </ul> </li> <li><code>REGISTRY_URL</code><ul> <li>The URL that harbor-core should use to connect to the harborregistry service..</li> <li>The default value is <code>http://harborregistry:5000</code>.</li> </ul> </li> <li><code>REGISTRYCTL_URL</code><ul> <li>This value tells the service where to connect to the harborregistryctl service.</li> <li>The default value is set to <code>http://harborregistryctl:8080</code>.</li> </ul> </li> <li><code>ROBOT_TOKEN_DURATION</code><ul> <li>This values sets how many days each issues robot token should be valid for.</li> <li>The default value is set to <code>999</code>.</li> </ul> </li> <li><code>SYNC_REGISTRY</code><ul> <li>This value is not used.</li> <li>The default value is <code>false</code>.</li> </ul> </li> <li><code>TOKEN_SERVICE_URL</code><ul> <li>The URL that the harbor-core service publishes to other services in order to retrieve a JWT token.</li> <li>The default value is <code>http://harbor-core:8080/service/token</code>.</li> </ul> </li> <li><code>TRIVY_ADAPTER_URL</code><ul> <li>The URL that the harbor-core service should use to connect to the harbor-trivy service.</li> <li>The default value is <code>http://harbor-trivy:8080</code>.</li> </ul> </li> <li><code>WITH_CHARTMUSEUM</code><ul> <li>Tells harbor-core if the Chartmuseum service is being used.</li> <li>This service is not used with Lagoon's implementation of Harbor.</li> <li>The default value is <code>false</code>.</li> </ul> </li> <li><code>WITH_CLAIR</code><ul> <li>Tells harbor-core if the harborclair service is being used.</li> <li>Lagoon does use this service in its implementation of Harbor.</li> <li>The default value is <code>true</code>.</li> </ul> </li> <li><code>WITH_NOTARY</code><ul> <li>Tells harbor-core if the Notary service is being used.</li> <li>This service is not used with Lagoon's implementation of Harbor.</li> <li>The default value is <code>false</code>.</li> </ul> </li> <li><code>WITH_TRIVY</code><ul> <li>Tells harbor-core if the Trivy service is being used.</li> <li>The default value is <code>true</code>.</li> </ul> </li> </ul>"},{"location":"using-lagoon-advanced/using-harbor/harbor-settings/harbor-database/","title":"Harbor-Database","text":"<p>Harbor-Database requires specific environment variables to be set in order to start, which are stored within secrets as described in the <code>services/harbor-database/harbor-core.yml</code> file.</p>"},{"location":"using-lagoon-advanced/using-harbor/harbor-settings/harbor-database/#config-file-contents","title":"Config File Contents","text":"<ul> <li><code>POSTGRES_DB</code><ul> <li>The default database to be set up when initializing the Postgres service.</li> <li>The default value is <code>postgres</code>.</li> </ul> </li> <li><code>POSTGRES_PASSWORD</code><ul> <li>The root password for the Postgres database.</li> <li>The default value is <code>test123</code>.</li> <li>This value is retrieved from a secret created when Harbor is first set up on a running Lagoon.</li> </ul> </li> <li><code>POSTGRES_USER</code><ul> <li>The default user to be set up when initializing the Postgres service.</li> <li>The default value is <code>postgres</code>.</li> </ul> </li> </ul>"},{"location":"using-lagoon-advanced/using-harbor/harbor-settings/harbor-jobservice/","title":"Harbor-Jobservice","text":"<p>Harbor-Jobservice requires a configuration file to start, which is located at <code>/etc/jobservice/config.yml</code> within the container. Any changes made to this config file are temporary and will not persist once the pod is restarted.</p> <p>The configmap from which this config file is generated is stored within Lagoon in the <code>services/harbor-jobservice/harbor-jobservice.yml</code> file. Any changes made to this configmap will be persisted across container restarts.</p>"},{"location":"using-lagoon-advanced/using-harbor/harbor-settings/harbor-jobservice/#config-file-contents","title":"Config File Contents","text":"<ul> <li><code>CORE_URL</code><ul> <li>This value tells <code>harbor-jobservice</code> where <code>harbor-core</code> can be reached.</li> <li>The default value is <code>http://harbor-core:8080</code>.</li> </ul> </li> <li><code>CORE_SECRET</code><ul> <li>This value is a pre-shared key that must match between the various services connecting to <code>harbor-core</code>.</li> <li>The default value is set to <code>secret123</code> when Harbor is run locally or during CI testing.</li> <li>This value is retrieved from a secret created when Harbor is first set up on a running Lagoon.</li> </ul> </li> <li><code>HTTP_PROXY</code><ul> <li>The default value is an empty string.</li> </ul> </li> <li><code>HTTPS_PROXY</code><ul> <li>The default value is an empty string.</li> </ul> </li> <li><code>JOBSERVICE_SECRET</code><ul> <li>This value is a pre-shared key that must match between the various services connecting to <code>harbor-jobservice</code>.</li> <li>The default value is set to <code>secret123</code> when Harbor is run locally or during CI testing.</li> <li>This value is retrieved from a secret created when Harbor is first set up on a running Lagoon.</li> </ul> </li> <li><code>LOG_LEVEL</code><ul> <li>The logging level this service should use.</li> <li>The default value is <code>error</code>.<ul> <li>This can also be set to <code>debug</code> to enable very verbose logging.</li> </ul> </li> </ul> </li> <li><code>NO_PROXY</code><ul> <li>A list of hosts which should never have their requests proxied.</li> <li>The default is <code>harbor-core,harbor-jobservice,harbor-database,harbor-trivy,harborregistry,harbor-portal,127.0.0.1,localhost,.local,.internal</code>.</li> </ul> </li> <li><code>REGISTRY_CONTROLLER_URL</code><ul> <li>This value tells the service where to connect to the <code>harborregistryctl</code> service.</li> <li>The default value is set to <code>http://harborregistryctl:8080</code></li> </ul> </li> <li><code>SCANNER_LOG_LEVEL</code><ul> <li>The logging level the scanning service should use.</li> <li>The default value is <code>error</code>.<ul> <li>This can also be set to <code>debug</code> to enable very verbose logging.</li> </ul> </li> </ul> </li> <li><code>SCANNER_STORE_REDIS_URL</code><ul> <li>This value tells <code>harbor-trivy</code> how to connect to its Redis store.</li> <li>The default value is <code>redis://harbor-redis:6379/4</code>.</li> </ul> </li> </ul>"},{"location":"using-lagoon-advanced/using-harbor/harbor-settings/harbor-trivy/","title":"Harbor-Trivy","text":"<p>Harbor-Trivy is configured via specific environment variables and does not use a config file.</p>"},{"location":"using-lagoon-advanced/using-harbor/harbor-settings/harbor-trivy/#environment-variables","title":"Environment Variables","text":"<ul> <li><code>SCANNER_LOG_LEVEL</code><ul> <li>The logging level this service should use.</li> <li>The default value is <code>error</code>.<ul> <li>This can be set to <code>debug</code> to enable very verbose logging.</li> </ul> </li> </ul> </li> <li><code>SCANNER_STORE_REDIS_URL</code><ul> <li>This value tells harbor-trivy how to connect to its Redis store.</li> <li>The default value is <code>redis://harbor-redis:6379/4</code>.</li> </ul> </li> <li><code>SCANNER_JOB_QUEUE_REDIS_URL</code><ul> <li>This value tells harbor-trivy how to connect to its Redis store.</li> <li>The default value is <code>redis://harbor-redis:6379/4</code>.</li> </ul> </li> <li><code>SCANNER_TRIVY_VULN_TYPE</code><ul> <li>This value tells harbor-trivy what types of vulnerabilities it should be searching for.</li> <li>The default value is <code>os,library</code></li> </ul> </li> </ul>"},{"location":"using-lagoon-advanced/using-harbor/harbor-settings/harborregistry/","title":"HarborRegistry","text":"<p>HarborRegistry requires a configuration file to start, which is located at <code>/etc/registry/config.yml</code> within the container. Any changes made to this config file are temporary and will not persist once the pod is restarted.</p> <p>This config file is stored within the <code>services/harborregistry/harborregistry.yml</code> file and loaded into the container as <code>/etc/registry/pre-config.yml</code>.</p> <p>A custom container entrypoint, <code>services/harborregistry/entrypoint.sh</code>, then transposes provided environment variables into this config file and saves the results as <code>/etc/registry/config.yml</code>.</p>"},{"location":"using-lagoon-advanced/using-harbor/harbor-settings/harborregistry/#config-file-contents","title":"Config File Contents","text":"<ul> <li><code>CORE_SECRET</code><ul> <li>This value is a pre-shared key that must match between the various services connecting to <code>harbor-core</code>.</li> <li>The default value is set to <code>secret123</code> when Harbor is run locally or during CI testing.</li> <li>This value is retrieved from a secret created when Harbor is first set up on a running Lagoon.</li> </ul> </li> <li><code>HARBOR_NGINX_ENDPOINT</code><ul> <li>This environment variable tells <code>harborregistry</code> where its NGINX ingress controller, <code>harbor-nginx</code>, is running in order to construct proper push and pull instructions in the UI, among other things.</li> <li>The default value is set to <code>http://harbor-nginx:8080</code> when run locally or during CI testing.</li> <li>Lagoon attempts to obtain and set this variable automagically when run in production. If that process fails, this service will fail to run.</li> </ul> </li> <li><code>JOBSERVICE_SECRET</code><ul> <li>This value is a pre-shared key that must match between the various services connecting to <code>harbor-jobservice</code>.</li> <li>The default value is set to <code>secret123</code> when Harbor is run locally or during CI testing.</li> <li>This value is retrieved from a secret created when Harbor is first set up on a running Lagoon.</li> </ul> </li> <li><code>REGISTRY_HTTP_SECRET</code><ul> <li>This value is a pre-shared key that must match between the various services connecting to <code>harborregistry</code>.</li> <li>The default value is set to <code>secret123</code> when Harbor is run locally or during CI testing.</li> <li>This value is retrieved from a secret created when Harbor is first set up on a running Lagoon.</li> </ul> </li> <li><code>REGISTRY_REDIS_PASSWORD</code><ul> <li>This environment variable tells <code>harborregistryctl</code> the password that should be used to connect to Redis.</li> <li>The default value is an empty string.</li> </ul> </li> </ul>"},{"location":"using-lagoon-advanced/using-harbor/harbor-settings/harborregistryctl/","title":"HarborRegistryCtl","text":"<p>HarborRegistryCtl requires a configuration file to start, which is located at <code>/etc/registryctl/config.yml</code> within the container. Any changes made to this config file are temporary and will not persist once the pod is restarted.</p> <p>The configmap from which this config file is generated is stored within Lagoon in the <code>services/harborregistryctl/harborregistry.yml</code> file. Any changes made to this configmap will be persisted across container restarts.</p>"},{"location":"using-lagoon-advanced/using-harbor/harbor-settings/harborregistryctl/#config-file-contents","title":"Config File Contents","text":"<ul> <li><code>CORE_SECRET</code><ul> <li>This value is a pre-shared key that must match between the various services connecting to <code>harbor-core</code>.</li> <li>The default value is set to <code>secret123</code> when Harbor is run locally or during CI testing.</li> <li>This value is retrieved from a secret created when Harbor is first set up on a running Lagoon.</li> </ul> </li> <li><code>JOBSERVICE_SECRET</code><ul> <li>This value is a pre-shared key that must match between the various services connecting to <code>harbor-jobservice</code>.</li> <li>The default value is set to <code>secret123</code> when Harbor is run locally or during CI testing.</li> <li>This value is retrieved from a secret created when Harbor is first set up on a running Lagoon.</li> </ul> </li> <li><code>REGISTRY_HTTP_SECRET</code><ul> <li>This value is a pre-shared key that must match between the various services connecting to <code>harborregistry</code>.</li> <li>The default value is set to <code>secret123</code> when Harbor is run locally or during CI testing.</li> <li>This value is retrieved from a secret created when Harbor is first set up on a running Lagoon.</li> </ul> </li> <li><code>REGISTRY_REDIS_PASSWORD</code><ul> <li>This environment variable tells <code>harborregistryctl</code> the password that should be used to connect to Redis.</li> <li>The default value is an empty string.</li> </ul> </li> </ul>"},{"location":"using-lagoon-the-basics/","title":"Using Lagoon - Overview","text":"<p>This section covers some of the basic features and functionality in Lagoon. If you're familiar with these, move on to Using Lagoon - Advanced.</p> <p>If you need help, contact your Lagoon administrator or reach out to the community and maintainers in our Discord.</p>"},{"location":"using-lagoon-the-basics/#requirements","title":"Requirements","text":""},{"location":"using-lagoon-the-basics/#docker","title":"Docker","text":"<p>To run a Lagoon Project, your system must meet the requirements to run Docker. We suggest installing the latest version of Docker for your workstation. You can download Docker here. We also suggest allowing Docker at least 4 CPUs and 4 GB RAM.</p>"},{"location":"using-lagoon-the-basics/#local-development-environments","title":"Local Development Environments","text":"<p>You can choose from pygmy, Lando, or DDEV - it's up to you!</p> <p>Learn more about Lagoon and Local Development Environments</p>"},{"location":"using-lagoon-the-basics/#step-by-step-guides","title":"Step by Step Guides","text":"<ul> <li>General: set up a new project in Lagoon</li> <li>General: first deployment</li> <li>Drupal: first deployment in Drupal</li> <li>Drupal: Lagoonize your Drupal site</li> <li>All: build and deployment process of Lagoon</li> </ul>"},{"location":"using-lagoon-the-basics/#overview-of-lagoon-configuration-files","title":"Overview of Lagoon Configuration Files","text":""},{"location":"using-lagoon-the-basics/#lagoonyml","title":"<code>.lagoon.yml</code>","text":"<p>This is the main file that will be used by Lagoon to understand what should be deployed, as well as many other things. See documentation for <code>.lagoon.yml</code>.</p>"},{"location":"using-lagoon-the-basics/#docker-composeyml","title":"<code>docker-compose.yml</code>","text":"<p>This file is used by <code>Docker Compose</code> to start your local development environment. Lagoon also uses it to understand which of the services should be deployed, which type, and how to build them. This happens via <code>labels</code>. See documentation for <code>docker-compose.yml</code>.</p>"},{"location":"using-lagoon-the-basics/#dockerfiles","title":"Dockerfiles","text":"<p>Some Docker images and containers need additional customizations from the provided images. This usually has two reasons:</p> <ol> <li>Application code: Containers like NGINX, PHP, Node.js, etc, need the actual programming code within their images. This is done during a Docker build step, which is configured in a Dockerfile. Lagoon has full support for Docker, and therefore also allows you full control over the resulting images via Dockerfile customizations.</li> <li>Customization of images: Lagoon also allows you to customize the base images according to your needs. This can be to inject an additional environment variable, change a service configuration, or even install additional tools. We advise caution with installing additional tools to the Docker images, as you will need to maintain any adaptions in the future!</li> </ol>"},{"location":"using-lagoon-the-basics/#supported-services-base-images-by-lagoon","title":"Supported Services &amp; Base Images by Lagoon","text":"Type Versions Dockerfile MariaDB 10.4, 10.5, 10.6, 10.11 mariadb/Dockerfile PostgreSQL 11, 12, 13, 14, 15, 16 postgres/Dockerfile MongoDB 4 mongo/Dockerfile NGINX openresty/1.25 nginx/Dockerfile Node.js 18, 20, 22 node/Dockerfile PHP FPM 8.1, 8.2, 8.3 php/fpm/Dockerfile PHP CLI 8.1, 8.2, 8.3 php/cli/Dockerfile Python 3.8, 3.9, 3.10, 3.11, 3.12 python/Dockerfile Redis 6, 7 redis/Dockerfile Solr 8, 9 solr/Dockerfile Varnish 6, 7 varnish/Dockerfile Opensearch 2 opensearch/Dockerfiles RabbitMQ 3.10 rabbitmq/Dockerfile Ruby 3.1, 3.2, 3.3 ruby/Dockerfile <p>All images are pushed to https://hub.docker.com/u/uselagoon. We suggest always using the latest tag (like <code>uselagoon/nginx:latest</code>) as they are kept up to date in terms of features and security.</p> <p>If you choose to use a specific Lagoon version of an image like <code>uselagoon/nginx:20.10.0</code> or <code>uselagoon/node-10:20.10.0</code> it is your own responsibility to upgrade the version of the images as soon as a new Lagoon version is released!</p>"},{"location":"using-lagoon-the-basics/configure-webhooks/","title":"Configure Webhooks","text":"<p>Your Lagoon administrator will also give you the route to the <code>webhook-handler</code>. You will add this to your repository as an outgoing webhook, and choose which events to send to Lagoon. Typically, you will send all push and pull request events. In Lagoon it is possible to add a regular expression to determine which branches and pull requests actually result in a deploy, and your Lagoon administrator can set that up for you. For example, all branches that start with <code>feature-</code> could be deployed to Lagoon.</p> Info for amazee.io customers <p>If you are an amazee.io customer, the route to the webhook-handler is: <code>https://hooks.lagoon.amazeeio.cloud</code>. </p> <p>Danger</p> <p>Managing the following settings will require you to have a high level of access to these repositories, which will be controlled by your organization. If you cannot access these settings, please contact your systems administrator or the appropriate person within your organization.</p>"},{"location":"using-lagoon-the-basics/configure-webhooks/#github","title":"GitHub","text":"<ol> <li>Proceed to Settings -&gt; Webhooks -&gt; <code>Add webhook</code> in your GitHub repository.   </li> <li>The <code>Payload URL</code> is the route to the <code>webhook-handler</code> of your Lagoon instance, provided by your Lagoon administrator.</li> <li>Set <code>Content type</code> to <code>application/json</code>.   </li> <li>Choose \"<code>Let me select individual events</code>.\"</li> <li>Choose which events will trigger your webhook. We suggest that you send <code>Push</code> and <code>Pull request</code> events, and then filter further in the Lagoon configuration of your project.   </li> <li>Make sure the webhook is set to <code>Active</code>.</li> <li>Click <code>Add webhook</code> to save your configuration.</li> </ol>"},{"location":"using-lagoon-the-basics/configure-webhooks/#gitlab","title":"GitLab","text":"<ol> <li>Navigate to Settings -&gt; Integrations in your GitLab repository.   </li> <li>The <code>URL</code> is the route to the <code>webhook-handler</code> of your Lagoon instance, provided by your Lagoon administrator.</li> <li>Select the <code>Trigger</code> events which will send a notification to Lagoon. We suggest that you send <code>Push events</code> and <code>Merge request events</code>, and then filter further in the Lagoon configuration of your project.   </li> <li>Click <code>Add webhook</code>to save your configuration.</li> </ol>"},{"location":"using-lagoon-the-basics/configure-webhooks/#bitbucket","title":"Bitbucket","text":"<ol> <li>Navigate to Settings -&gt; Webhooks -&gt; Add new webhook in your repository.</li> <li><code>Title</code> is for your reference.</li> <li><code>URL</code> is the route to the <code>webhook-handler</code> of your Lagoon instance, provided by your Lagoon administrator.</li> <li> <p><code>Choose from a full list of triggers</code> and select the following:</p> <ul> <li>Repository<ul> <li>Push</li> </ul> </li> <li>Pull Request<ul> <li>Created</li> <li>Updated</li> <li>Approved</li> <li>Approval removed</li> <li>Merged</li> <li>Declined</li> </ul> </li> </ul> <p> 5. Click <code>Save</code> to save the webhook configurations for Bitbucket.</p> </li> </ol>"},{"location":"using-lagoon-the-basics/first-deployment/","title":"First Deployment","text":"<p>Note</p> <p>If you are deploying a Drupal Project, skip this and read the Drupal-specific first deployment documentation.</p>"},{"location":"using-lagoon-the-basics/first-deployment/#1-make-sure-you-are-ready","title":"1. Make sure you are ready","text":"<p>In order to make your first deployment a successful one, please make sure that your project is Lagoonized and that you have set up the project in Lagoon. If not, or you're not sure, or that doesn't sound familiar, don't worry, go back and follow the Step-by-Step Guides which show you how this works, and then come back and deploy!</p>"},{"location":"using-lagoon-the-basics/first-deployment/#2-push","title":"2. Push","text":"<p>With Lagoon, you create a new deployment by pushing into a branch that is configured to be deployed.</p> <p>If you don't have any new code to push, don't worry! Run:</p> Git push<pre><code>git commit --allow-empty -m \"go, go! Power Rangers!\"\ngit push\n</code></pre> <p>This will trigger a push, and your Git hosting will inform Lagoon about this push via the configured webhook.</p> <p>If all is correct, you should see a notification in your configured chat system. (Contact your Lagoon administrator for this):</p> <p></p> <p>This informs you that Lagoon has just started to deploy your code. Depending on the size of the code and amount of containers, this will take a couple of seconds. Just relax. If you want to know what's happening now, check out the Build and Deploy Process of Lagoon.</p> <p>You can also check your Lagoon UI to see the progress of any deployment. (Contact your Lagoon administrator for this).</p>"},{"location":"using-lagoon-the-basics/first-deployment/#3-its-done","title":"3. It's done","text":"<p>As soon as Lagoon is done building and deploying it will send a second notification to the chat system, here an example:</p> <p></p> <p>It tells you:</p> <ul> <li>Which project has been deployed.</li> <li>Which branch and Git SHA have been deployed.</li> <li>A link to the full logs of the build and deployment.</li> <li>Links to all routes (URLs) where the environment can be reached.</li> </ul> <p>You can also quickly tell what kind of notification it is by the emoji at the beginning - whether it's just info that the build has started, a success, or fail.</p> <p>That's it! We hope that wasn't too hard - making devOps accessible is what we are striving for!</p>"},{"location":"using-lagoon-the-basics/first-deployment/#but-wait-how-about-other-branches-or-the-production-environment","title":"But wait, how about other branches or the production environment?","text":"<p>That's the beauty of Lagoon: it's exactly the same! Just push the name of the branch and that one will be deployed.</p>"},{"location":"using-lagoon-the-basics/first-deployment/#failure-dont-worry","title":"Failure? Don't worry","text":"<p>Did the deployment fail? Oh no! But we're here to help:</p> <ol> <li>If you deployed a Drupal site, make sure to read the Drupal-specific first deployment documentation, which explains why this happens.</li> <li>Click on the <code>Logs</code> link in the error notification, it will tell you where in the deployment process the failure happened.</li> <li>If you can't figure it out, just ask your Lagoon administrator, they are here to help!</li> <li>Reach out to us in your support channel or in the community Discord.</li> </ol>"},{"location":"using-lagoon-the-basics/going-live/","title":"Going Live","text":"<p>Congratulations, you're this close to going live with your website on Lagoon! In order to make this as seamless as possible, we've got this final checklist for you. It leads you through the last few things you should check before taking your site live.</p>"},{"location":"using-lagoon-the-basics/going-live/#check-your-lagoonyml","title":"Check your <code>.lagoon.yml</code>","text":""},{"location":"using-lagoon-the-basics/going-live/#routes-ssl","title":"Routes / SSL","text":"<p>Check to be sure that all routes have been set up in your <code>.lagoon.yml</code>. Be aware that if you don't point the domains towards Lagoon, you should disable Let's Encrypt (LE) certificate creation, as it will lead to issues. Domains not pointing towards Lagoon will be disabled after a while in order to not exceed the Let's Encrypt quotas.</p> <p>If you use Certificate Authority (CA) signed certificates, you can set <code>tls-acme</code> to <code>false</code> , but leave the <code>insecure</code> flag set to <code>Allow</code> or <code>Redirect</code>. In the case of CA certificates, contact your Lagoon administrator with the routes and the SSL certificate that needs to be put in place.</p> .lagoon.yml<pre><code>environments:\nmain:\nroutes:\n- nginx:\n- example.com:\ntls-acme: 'false'\ninsecure: Allow\n- www.example.com:\ntls-acme: 'false'\ninsecure: Allow\n</code></pre> <p>As soon as the DNS entries point towards your Lagoon installation, you can switch the flags: <code>tls-acme</code> to <code>true</code> and <code>insecure</code> to <code>Redirect</code></p> .lagoon.yml<pre><code>environments:\nmain:\nroutes:\n- nginx:\n- example.com:\ntls-acme: 'true'\ninsecure: Redirect\n- www.example.com:\ntls-acme: 'true'\ninsecure: Redirect\n</code></pre> <p>Note</p> <p>As checking every page of your website might be a bit a tedious job, you can make use of mixed-content-scan. This will crawl the entire site and give you back pages that include assets from a non-HTTPS site.</p>"},{"location":"using-lagoon-the-basics/going-live/#redirects","title":"Redirects","text":"<p>If you need non-www to www redirects, make sure you have them set up in the <code>redirects-map.conf</code> - see Documentation.</p>"},{"location":"using-lagoon-the-basics/going-live/#cron-jobs","title":"Cron jobs","text":"<p>Check if your cron jobs have been set up for your production environment - see <code>.lagoon.yml</code>.</p>"},{"location":"using-lagoon-the-basics/going-live/#dns","title":"DNS","text":"<p>You will need to update your DNS to point at your Lagoon hosting providers servers (e.g. their CDN or load balancers). Please contact your Lagoon administrator for more information.</p> <p>Before you switch over your domain to Lagoon, make sure you lower the Time-to-Live (TTL) before you go live. This will ensure that the switch from the old to the new servers will go quickly. We usually advise a TTL of 300 seconds prior to the DNS switch. More information about TTL.</p>"},{"location":"using-lagoon-the-basics/going-live/#production-environment","title":"Production environment","text":"<p>Lagoon understands the concept of development and production environments. Development environments automatically send <code>noindex</code> and <code>nofollow</code> headers in order to prohibit indexing by search engines.</p> <p><code>X-Robots-Tag: noindex, nofollow</code></p> <p>During project setup, the production environment should already be defined. If that's omitted, your environment will run in development mode. You can check if the environment is set as production environment in the Lagoon user interface. If the production environment is not set, let your Lagoon administrator know, and they will configure the system accordingly.</p> <p></p>"},{"location":"using-lagoon-the-basics/lagoon-build-errors-and-warnings/","title":"Lagoon Build Errors and Warnings","text":"<p>Newer releases of Lagoon have the capability to identify potential issues with the build, and highlight them as warnings without failing. This is also a way for the Lagoon team to inform users of pending deprecations and changes to functionality.</p> <p>For example, if the Lagoon team makes a change to a setting in <code>lagoon.yml</code>, and there\u2019s something that users need to change, the warning will mention it, so users will be able to change it before it becomes a breaking change. They should be resolved ASAP wherever possible, as future releases of Lagoon may not be able to handle the errors, but they shouldn't stop your build.</p> <p>If you aren't sure how to resolve these errors, please reach out to your Lagoon administrator, or ask a question in the Lagoon community.</p>"},{"location":"using-lagoon-the-basics/lagoon-build-errors-and-warnings/#docker-compose-errors","title":"Docker Compose Errors","text":"<p>Please also see the section on Common Docker Compose Issues, as some of these issues may be covered there</p> Lagoon Build output indicating env_file error<pre><code>&gt; an env_file is defined in your docker-compose file, but no matching file found\n</code></pre> <p>Docker Compose expects a referenced env file to be present at build time, but that env file is only present in local development, or has been excluded from the Dockerfile. The Lagoon team is working to hopefully allow Docker Compose to ignore this error, so this warning will remain until we have a resolution.</p> Lagoon Build output indicating string key error<pre><code>&gt; an invalid string key was detected in your docker-compose file\n</code></pre> <p>There is an error in your Docker Compose file, most likely relating to a malformed or misused alias or anchor. The error message should help you understand where.</p> Lagoon Build output indicating yaml validation error<pre><code>&gt; There are yaml validation errors in your docker-compose file that should be corrected\n</code></pre> <p>There is an error in your Docker Compose file, most likely relating to a malformed or misused alias or anchor. The error message should help you understand where.</p>"},{"location":"using-lagoon-the-basics/lagoon-build-errors-and-warnings/#deprecated-images","title":"Deprecated Images","text":"<p>Please see the dedicated page on how to handle this warning</p> <p></p>"},{"location":"using-lagoon-the-basics/local-development-environments/","title":"Local Development Environments","text":"<p>Even though Lagoon has only a hard dependency on Docker and Docker Compose (which is mostly shipped with Docker) there are some things which are nice for local development that are not included in Docker:</p> <ul> <li>An HTTP reverse proxy for nice URLs and HTTPS offloading.</li> <li>A DNS system so we don't have to remember IP addresses.</li> <li>SSH agents to use SSH keys within containers.</li> <li>A system that receives and displays mail locally.</li> </ul> Warning <p>You do not need to install Lagoon locally to use it locally! That sounds confusing but follow the documentation. Lagoon is the system that deploys your local development environment to your production environment, it's not the environment itself.</p>"},{"location":"using-lagoon-the-basics/local-development-environments/#pygmy-ddev-or-lando-the-choice-is-yours","title":"pygmy, DDEV, or Lando - the choice is yours","text":""},{"location":"using-lagoon-the-basics/local-development-environments/#pygmy","title":"pygmy","text":"<p>Lagoon has traditionally worked best with <code>pygmy</code> , which is a preconfigured system of the above tools and works out of the box with Lagoon. It lives at https://github.com/pygmystack/pygmy</p> <p><code>pygmy</code> is written in Golang, so to install it, run:</p> Install with HomeBrew<pre><code>brew tap pygmystack/pygmy &amp;&amp; brew install pygmy\n</code></pre> <p>For detailed usage or installation info on pygmy, see its documentation.</p>"},{"location":"using-lagoon-the-basics/local-development-environments/#lando","title":"Lando","text":"<p>Lagoon is well-integrated with Lando! For more information, please see the documentation at https://docs.lando.dev/config/lagoon.html to get yourself up and running.</p> <p>Lando's workflow for Lagoon will be familiar to users of Lando, and will also be the easiest way for Lagoon newcomers to get up and running. Pygmy presents a closer integration with Docker, which will lend itself better to more complex scenarios and use cases but will also require a deeper understanding.</p>"},{"location":"using-lagoon-the-basics/local-development-environments/#ddev","title":"DDEV","text":"<p>Lagoon is also supported on DDEV! Check out their documentation to get started: https://ddev.readthedocs.io/en/stable/users/providers/lagoon/.</p> <p>We have previously evaluated adding support for other systems like Docksal and Docker4Drupal, and while we may add support for these in the future, our current focus is on supporting our current tools.</p>"},{"location":"using-lagoon-the-basics/setup-project/","title":"Set Up a New Project","text":"<p>Note</p> <p>We are working hard on getting our CLI and GraphQL API set up to allow everyone using Lagoon to set up and configure their projects themselves. Right now, it needs more testing before we can release those features, so hold tight!</p> <p>Until then, the setup of a new project involves talking to your Lagoon administrator, which is ok, as they are much friendlier than APIs. \ud83d\ude0a</p> <p>Please have the following information ready for your Lagoon administrator:</p> <ul> <li>A name you would like the project to be known by<ul> <li>This name can only contain lowercase characters, numbers and dashes</li> <li>Double dashes (<code>--</code>) are not allowed within a project name</li> </ul> </li> <li>SSH public keys, email addresses and the names of everybody that will work on this project. Here are instructions for generating and copying SSH keys for GitHub, GitLab, and Bitbucket.</li> <li>The URL of the Git repository where your code is hosted (<code>git@example.com:test/test.git</code>).</li> <li>The name of the Git branch you would like to use for your production environment (see Environment Types for details about the environments).</li> <li>Which branches and pull requests you would like to deploy to your additional environments. With Lagoon, you can filter branches and pull requests by name with regular expressions, and your Lagoon administrator can get this set up for you.</li> </ul> <p>We suggest deploying specific important branches (like <code>develop</code> and <code>main</code>) and pull requests. But that's all up to you! (see Workflows for some more information)</p>"},{"location":"using-lagoon-the-basics/setup-project/#1-make-sure-your-project-is-lagoonized","title":"1. Make sure your project is Lagoonized","text":"<p>This means that the <code>.lagoon.yml</code> and <code>docker-compose.yml</code> files are available in your Git repository and configured accordingly.</p> <p>If this is not the case, check out the list of Step-by-Step Guides on how to do so before proceeding.</p>"},{"location":"using-lagoon-the-basics/setup-project/#2-provide-access-to-your-code","title":"2. Provide access to your code","text":"<p>In order to deploy your code, Lagoon needs access to it. By design and for security, Lagoon only needs read access to your Git repository.</p> <p>You may need your Lagoon administrator to tell you the SSH public key or the Git account to give read access to.</p>"},{"location":"using-lagoon-the-basics/setup-project/#3-configure-webhooks","title":"3. Configure Webhooks","text":"<p>Lagoon needs to be informed about a couple of events that are happening to your Git repository. Currently these are pushes and pull requests, but we may add more in the future.</p> <p>As Lagoon supports many different Git hosts, we have split off those instructions into this documentation: Configure Webhooks.</p>"},{"location":"using-lagoon-the-basics/setup-project/#4-next-first-deployment","title":"4. Next: First deployment","text":"<p>Congratulations, you are now ready to run your first deployment.</p>"},{"location":"ja/#lagoon-kubernetes","title":"Lagoon - Kubernetes\u5411\u3051\u306e\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30c7\u30ea\u30d0\u30ea\u30fc\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0","text":"<p>Lagoon\u306f\u958b\u767a\u8005\u304c\u7406\u60f3\u3068\u3059\u308b\u3082\u306e\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002\u305d\u308c\u306f\u958b\u767a\u8005\u304c\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u3068\u672c\u756a\u74b0\u5883\u3067\u307e\u3063\u305f\u304f\u540c\u3058\u30b3\u30fc\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3092\u53ef\u80fd\u306b\u3059\u308b\u30b7\u30b9\u30c6\u30e0\u3067\u3059\u3002\u540c\u3058Docker\u30a4\u30e1\u30fc\u30b8\u3001\u540c\u3058\u30b5\u30fc\u30d3\u30b9\u8a2d\u5b9a\u3001\u305d\u3057\u3066\u540c\u3058\u30b3\u30fc\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/#_1","title":"\u306f\u3058\u3081\u306b","text":"<p>\u3042\u306a\u305f\u304cLagoon\u3092\u4f7f\u7528\u3057\u3066\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u3084\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30db\u30b9\u30c8\u3057\u305f\u3044\u5834\u5408\u306f\u3001Lagoon\u306e\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>Lagoon\u306e\u6a5f\u80fd\u306b\u3064\u3044\u3066\u3088\u308a\u6df1\u304f\u7406\u89e3\u3059\u308b\u305f\u3081\u306b\u306f\u3001Lagoon\u306e\u9ad8\u5ea6\u306a\u4f7f\u3044\u65b9\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002</p> <p>Lagoon\u306e\u4ed5\u7d44\u307f\u3092\u7406\u89e3\u3059\u308b\u305f\u3081\u306b\u306f\u3001Lagoon\u306e\u57fa\u672c\u7684\u306a\u6982\u5ff5\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u305d\u3057\u3066\u3001\u3088\u308a\u6df1\u3044\u7406\u89e3\u306e\u305f\u3081\u306b\u3001Lagoon\u306e\u9ad8\u5ea6\u306a\u6982\u5ff5\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u3042\u306a\u305f\u304cLagoon\u3092\u958b\u767a\u3057\u305f\u3044(\u6a5f\u80fd\u3092\u8ffd\u52a0\u3001\u30d0\u30b0\u3092\u4fee\u6b63)\u5834\u5408\u306f\u3001Lagoon\u306e\u958b\u767a\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/#tldr-lagoon","title":"TL;DR: Lagoon\u306e\u4ed5\u7d44\u307f","text":"<ol> <li>\u958b\u767a\u8005\u306f\u3001YAML \u30d5\u30a1\u30a4\u30eb\u5185\u3067\u5fc5\u8981\u306a\u30b5\u30fc\u30d3\u30b9\u3092\u5b9a\u7fa9\u3001\u8a2d\u5b9a\u3057\u307e\u3059\u3002</li> <li>\u4fee\u6b63\u3057\u305f\u30b3\u30fc\u30c9\u3092 Git \u306b\u30d7\u30c3\u30b7\u30e5\u3057\u307e\u3059\u3002</li> <li>Lagoon \u306f YAML \u30d5\u30a1\u30a4\u30eb\u3092\u89e3\u6790\u3057\u3001\u5fc5\u8981\u306a\u69cb\u6210\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</li> <li>Lagoon \u306f\u5fc5\u8981\u306a Docker \u30a4\u30e1\u30fc\u30b8\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002</li> <li>Lagoon \u306f\u305d\u308c\u3089\u3092 Docker \u30ec\u30b8\u30b9\u30c8\u30ea\u306b\u30d7\u30c3\u30b7\u30e5\u3057\u307e\u3059\u3002</li> <li>Lagoon \u306f Kubernetes \u306b\u5fc5\u8981\u306a\u30ea\u30bd\u30fc\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</li> <li>Lagoon \u306f\u30b3\u30f3\u30c6\u30ca\u306e\u5c55\u958b\u3092\u76e3\u8996\u3057\u307e\u3059\u3002</li> <li>\u3059\u3079\u3066\u304c\u5b8c\u4e86\u3059\u308b\u3068\u3001Lagoon \u306f\u3055\u307e\u3056\u307e\u306a\u65b9\u6cd5 (Slack\u3001\u30e1\u30fc\u30eb\u3001Web \u30b5\u30a4\u30c8\u306a\u3069) \u3067\u958b\u767a\u8005\u306b\u901a\u77e5\u3057\u307e\u3059\u3002</li> </ol>"},{"location":"ja/#_2","title":"\u30d8\u30eb\u30d7","text":"<p>\u8cea\u554f\u3084\u30a2\u30a4\u30c7\u30a2\u304c\u3042\u308a\u307e\u3057\u305f\u3089\u30b3\u30fc\u30c9\u30e1\u30f3\u30c6\u30ca\u30fc\u3084\u30b3\u30f3\u30c8\u30ea\u30d3\u30e5\u30fc\u30bf\u306b\u4f1a\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p>Lagoon Discord\u306e\u4f1a\u8a71\u3078\u3054\u53c2\u52a0\u304f\u3060\u3055\u3044\uff1ahttps://discord.gg/te5hHe95JE</p>"},{"location":"ja/#lagoon_1","title":"Lagoon\u306b\u3064\u3044\u3066","text":"<ol> <li>Lagoon \u306f\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u306b\u57fa\u3065\u3044\u3066\u3044\u307e\u3059\u3002\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u3068\u30d3\u30eb\u30c9\u306e\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u306f\u975e\u5e38\u306b\u8907\u96d1\u3067\u3059\u3002\u8907\u6570\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u30bd\u30fc\u30b9\u3001\u8907\u6570\u306e\u30af\u30e9\u30b9\u30bf\u30fc\u3001\u8907\u6570\u306e\u901a\u77e5\u30b7\u30b9\u30c6\u30e0\u304c\u3042\u308a\u307e\u3059\u3002\u5404\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u306f1\u30641\u3064\u304c\u7279\u6709\u306e\u3082\u306e\u3067\u3042\u308a\u3001\u6570\u79d2\u304b\u3089\u6570\u6642\u9593\u304b\u304b\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\u67d4\u8edf\u6027\u3068\u5805\u7262\u6027\u3092\u8003\u616e\u3057\u3066\u69cb\u7bc9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u306f\u30e1\u30c3\u30bb\u30fc\u30b8\u30f3\u30b0 \u30b7\u30b9\u30c6\u30e0\u3092\u4ecb\u3057\u3066\u901a\u4fe1\u3059\u308b\u305f\u3081\u3001\u500b\u3005\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u30b9\u30b1\u30fc\u30eb\u30a2\u30c3\u30d7\u304a\u3088\u3073\u30b9\u30b1\u30fc\u30eb\u30c0\u30a6\u30f3\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u500b\u3005\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u30c0\u30a6\u30f3\u30bf\u30a4\u30e0\u3092\u4e57\u308a\u5207\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u307e\u305f\u3001\u4ed6\u306e\u90e8\u5206\u306b\u5f71\u97ff\u3092\u4e0e\u3048\u308b\u3053\u3068\u306a\u304f\u3001\u672c\u756a\u74b0\u5883\u3067 Lagoon \u306e\u65b0\u3057\u3044\u90e8\u5206\u3092\u8a66\u3059\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002</li> <li>Lagoon \u3067\u306f\u591a\u304f\u306e\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u5404\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u306b\u306f\u305d\u308c\u305e\u308c\u56fa\u6709\u306e\u9577\u6240\u304c\u3042\u308a\u307e\u3059\u3002\u79c1\u305f\u3061\u306f\u3001\u5404\u30b5\u30fc\u30d3\u30b9\u306b\u6700\u3082\u9069\u3057\u305f\u8a00\u8a9e\u3092\u6c7a\u5b9a\u3059\u308b\u3088\u3046\u52aa\u3081\u3066\u3044\u307e\u3059\u3002\u73fe\u5728\u3001Lagoon \u306e\u591a\u304f\u306f Node.js \u3067\u69cb\u7bc9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306f\u6700\u521d\u306bNode.js\u3092\u4f7f\u3044\u59cb\u3081\u305f\u304b\u3089\u3060\u3051\u3067\u306a\u304f\u3001Node.js\u304cwebhooks\u3001\u30bf\u30b9\u30af\u306a\u3069\u306e\u975e\u540c\u671f\u51e6\u7406\u3092\u53ef\u80fd\u306b\u3059\u308b\u304b\u3089\u3067\u3059\u3002\u4e00\u90e8\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u3092\u8003\u3048\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306f\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u306e\u7d20\u6674\u3089\u3057\u3044\u3068\u3053\u308d\u3067\u3042\u308a\u3001\u4ed6\u306e\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3078\u306e\u5f71\u97ff\u3092\u61f8\u5ff5\u3059\u308b\u3053\u3068\u306a\u304f\u3001\u4e00\u3064\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u5225\u306e\u8a00\u8a9e\u3067\u7f6e\u304d\u63db\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</li> <li>Lagoon\u306fDrupal\u7279\u6709\u306e\u3082\u306e\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u4efb\u610f\u306eDocker\u30a4\u30e1\u30fc\u30b8\u3092\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u69cb\u7bc9\u3055\u308c\u3066\u3044\u307e\u3059\u3002Drupal\u7528\u306e\u65e2\u5b58\u306eDocker\u30a4\u30e1\u30fc\u30b8\u304c\u3042\u308a\u3001Drush\u306e\u3088\u3046\u306aDrupal\u7279\u6709\u306e\u30c4\u30fc\u30eb\u3082\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u304c\u3001Drupal\u7279\u6709\u306e\u90e8\u5206\u306f\u305d\u3053\u3060\u3051\u3067\u3059\u3002</li> <li>Lagoon\u306fDevOps\u3067\u3059\u3002\u958b\u767a\u8005\u304c\u5fc5\u8981\u306a\u30b5\u30fc\u30d3\u30b9\u3092\u5b9a\u7fa9\u3057\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u304c\u6b63\u3057\u3044\u65b9\u6cd5\u3067\u306a\u3044\u3068\u601d\u3046\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3057\u3001\u958b\u767a\u8005\u306b\u3042\u307e\u308a\u306b\u3082\u591a\u304f\u306e\u6a29\u9650\u3092\u4e0e\u3048\u3066\u3044\u308b\u3068\u601d\u3046\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u3057\u304b\u3057\u3001\u79c1\u305f\u3061\u306f\u30b7\u30b9\u30c6\u30e0\u30a8\u30f3\u30b8\u30cb\u30a2\u3068\u3057\u3066\u3001\u958b\u767a\u8005\u3092\u5f37\u5316\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3068\u8003\u3048\u3066\u3044\u307e\u3059\u3002\u958b\u767a\u8005\u304c\u30ed\u30fc\u30ab\u30eb\u3067\u30b5\u30fc\u30d3\u30b9\u3092\u5b9a\u7fa9\u3057\u3001\u305d\u308c\u3089\u3092\u30ed\u30fc\u30ab\u30eb\u3067\u30c6\u30b9\u30c8\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308c\u3070\u3001\u5f7c\u3089\u81ea\u8eab\u304c\u30d0\u30b0\u3084\u30df\u30b9\u3092\u898b\u3064\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</li> <li>Lagoon\u306fDocker\u3068Kubernetes\u4e0a\u3067\u52d5\u4f5c\u3057\u307e\u3059\u3002</li> <li>Lagoon\u306f\u5b8c\u5168\u306b\u30ed\u30fc\u30ab\u30eb\u3067\u958b\u767a\u30fb\u30c6\u30b9\u30c8\u304c\u53ef\u80fd\u3067\u3059\u3002</li> <li>Lagoon\u306f\u5b8c\u5168\u306b\u7d71\u5408\u30c6\u30b9\u30c8\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306f\u79c1\u305f\u3061\u304c \u5168\u30d7\u30ed\u30bb\u30b9\u3092\u30c6\u30b9\u30c8\u3067\u304d\u308b\u3068\u3044\u3046\u3053\u3068\u3092\u610f\u5473\u3057\u307e\u3059\u3002Git\u30a6\u30a7\u30d6\u30d5\u30c3\u30af\u306e\u53d7\u4fe1\u304b\u3089Docker\u30b3\u30f3\u30c6\u30ca\u3078\u306e\u30c7\u30d7\u30ed\u30a4\u307e\u3067\u3001\u540c\u3058Git\u30cf\u30c3\u30b7\u30e5\u304c\u30af\u30e9\u30b9\u30bf\u306b\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u307e\u3059\u3002</li> <li>\u6700\u3082\u91cd\u8981\u306a\u70b9: \u3053\u308c\u306f\u9032\u884c\u4e2d\u306e\u4f5c\u696d\u3067\u3059\u3002\u307e\u3060\u7d42\u308f\u308a\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002amazee.io\u3067\u306f\u3001\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3068\u3057\u3066\u3001\u53ef\u80fd\u306a\u9650\u308a\u30b3\u30fc\u30c9\u3092\u5171\u6709\u3057\u3001\u5354\u529b\u3057\u3066\u4f5c\u696d\u3092\u9032\u3081\u308b\u5fc5\u8981\u304c\u3042\u308b\u3068\u8003\u3048\u3066\u3044\u307e\u3059\u3002</li> </ol> <p>\u79c1\u305f\u3061\u306f\u3042\u306a\u305f\u304cLagoon\u306e\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u3068\u30b5\u30fc\u30d3\u30b9\u304c\u3069\u306e\u3088\u3046\u306b\u9023\u643a\u3057\u3066\u52d5\u4f5c\u3059\u308b\u304b\u3001\u7406\u89e3\u3057\u3066\u3082\u3089\u3048\u308b\u3053\u3068\u3092\u671b\u3093\u3067\u3044\u307e\u3059\u3002\u3053\u3053\u306b\u30b9\u30ad\u30fc\u30de\u304c\u3042\u308a\u307e\u3059(\u5c11\u3057\u53e4\u304f\u3001\u6700\u8fd1\u8ffd\u52a0\u3057\u305f\u30b5\u30fc\u30d3\u30b9\u3084Kubernetes\u3092\u30ab\u30d0\u30fc\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u66f4\u65b0\u4f5c\u696d\u4e2d\u3067\u3059):Lucid Chart</p>"},{"location":"ja/#lagoon_2","title":"Lagoon\u306e\u6b74\u53f2","text":"<p>\u8aac\u660e\u3057\u305f\u3088\u3046\u306b\u3001Lagoon\u306f\u7406\u60f3\u3092\u73fe\u5b9f\u306b\u3057\u305f\u3082\u306e\u3067\u3059\u3002amazee.io\u3067\u306f\u3001Drupal\u30928\u5e74\u4ee5\u4e0a\u30db\u30b9\u30c8\u3057\u3066\u304d\u307e\u3057\u305f\u3002\u3053\u308c\u306f\u79c1\u305f\u3061\u306e\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306e4\u56de\u76ee\u306e\u5927\u304d\u306a\u6539\u8a02\u3067\u3059\u30023\u56de\u76ee\u306e\u6539\u8a02\u306fPuppet\u3068Ansible\u3092\u4e2d\u5fc3\u306b\u69cb\u7bc9\u3055\u308c\u307e\u3057\u305f\u3002\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306e\u5404\u90e8\u5206\u306f\u5168\u3066\u8a2d\u5b9a\u7ba1\u7406\u3067\u884c\u308f\u308c\u307e\u3057\u305f\u3002\u3053\u308c\u306b\u3088\u308a\u65b0\u3057\u3044\u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a\u304c\u975e\u5e38\u306b\u901f\u304f\u3067\u304d\u307e\u3057\u305f\u304c\u3001\u540c\u6642\u306b\u958b\u767a\u8005\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u306e\u4f59\u5730\u304c\u4e0d\u8db3\u3057\u3066\u3044\u307e\u3057\u305f\u3002\u79c1\u305f\u3061\u306f\u3044\u304f\u3064\u304b\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3092\u5b9f\u88c5\u3057\u307e\u3057\u305f\u304c\u3001\u3059\u3067\u306bDocker\u3092\u672c\u756a\u74b0\u5883\u3067\u4f7f\u7528\u3057\u3066\u3044\u307e\u3057\u305f\u3002\u3057\u304b\u3057\u3001\u79c1\u305f\u3061\u306f\u305d\u306e\u3053\u3068\u306b\u5b8c\u5168\u306b\u6e80\u8db3\u3057\u3066\u3044\u305f\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u79c1\u305f\u3061\u306f\u3001\u65e2\u5b58\u306e\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3060\u3051\u3067\u306f\u8db3\u308a\u306a\u3044\u3068\u6c17\u3065\u304d\u307e\u3057\u305f\u3002\u30c7\u30ab\u30c3\u30d7\u30ebDrupal\u306e\u53f0\u982d\u3001\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067\u306eNode.js\u306e\u52d5\u4f5c\u8981\u6c42\u3001Elasticsearch\u3078\u306e\u8981\u671b\u3001\u7570\u306a\u308bSolr\u30d0\u30fc\u30b8\u30e7\u30f3\u306a\u3069\u3001\u591a\u304f\u306b\u5bfe\u5fdc\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3057\u305f\u3002</p> <p>\u540c\u6642\u306b\u3001\u79c1\u305f\u3061\u306f\u9577\u5e74\u306b\u308f\u305f\u308a\u3001\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u306e\u305f\u3081\u306bDocker\u3092\u4f7f\u7528\u3057\u3066\u304d\u307e\u3057\u305f\u3002\u672c\u756a\u74b0\u5883\u3067\u5168\u3066\u3092Docker\u3067\u884c\u3046\u3068\u3044\u3046\u306e\u306f\u5e38\u306b\u8003\u3048\u3066\u3044\u307e\u3057\u305f\u3002\u552f\u4e00\u306e\u554f\u984c\u306f\u3001\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u3068\u672c\u756a\u74b0\u5883\u3068\u306e\u9023\u643a\u3067\u3057\u305f\u3002\u4ed6\u306b\u3082\u3001\u672c\u756a\u74b0\u5883\u3067Drupal\u3092Docker\u3067\u52d5\u4f5c\u3055\u305b\u308b\u30b7\u30b9\u30c6\u30e0\u304c\u5b58\u5728\u3057\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u30ed\u30fc\u30ab\u30eb\u3068\u672c\u756a\u74b0\u5883\u3067\u6b63\u78ba\u306b\u540c\u3058\u30a4\u30e1\u30fc\u30b8\u3068\u30b5\u30fc\u30d3\u30b9\u3092\u30c6\u30b9\u30c8\u3059\u308b\u3053\u3068\u3092\u8a31\u53ef\u3059\u308b\u3082\u306e\u306f\u4f55\u3082\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002</p> <p>Lagoon\u306f2017\u5e74\u306b\u8a95\u751f\u3057\u307e\u3057\u305f\u3002\u305d\u308c\u4ee5\u6765\u3001\u672c\u756a\u74b0\u5883\u3067Docker\u3092\u52d5\u4f5c\u3055\u305b\u308b\u30b7\u30b9\u30c6\u30e0\u306b\u767a\u5c55\u3057\u307e\u3057\u305f\u3002Lagoon\u306f\u3001\u6211\u3005\u306e\u7b2c3\u4e16\u4ee3\u306e\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3092\u3001\u6700\u5148\u7aef\u306e\u5168Docker\u30d9\u30fc\u30b9\u306e\u30b7\u30b9\u30c6\u30e0\u306b\u7f6e\u304d\u63db\u3048\u307e\u3057\u305f\u3002</p>"},{"location":"ja/#_3","title":"\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9","text":"<p>amazee.io\u3067\u306f\u3001\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u53ef\u80fd\u6027\u3092\u4fe1\u3058\u3066\u3044\u307e\u3059\u3002Drupal\u306e\u3088\u3046\u306a\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304c\u72ec\u5360\u7684\u306a\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3067\u30db\u30b9\u30c8\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u306f\u5e38\u306b\u6211\u3005\u306b\u3068\u3063\u3066\u554f\u984c\u3067\u3057\u305f\u3002\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u4f1a\u793e\u306e\u5f37\u3055\u3068\u6210\u529f\u306f\u3001\u5358\u306b\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u30b7\u30b9\u30c6\u30e0\u3084\u30b5\u30fc\u30d3\u30b9\u306e\u8a2d\u5b9a\u3060\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u305d\u308c\u306f\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3092\u52d5\u304b\u3059\u4eba\u3005\u3068\u77e5\u8b58\u3067\u3059\u3002 \u30d7\u30ed\u30bb\u30b9\u3001\u30b9\u30ad\u30eb\u3001\u4e88\u671f\u3057\u306a\u3044\u72b6\u6cc1\u306b\u5bfe\u5fdc\u3059\u308b\u80fd\u529b\u3001\u305d\u3057\u3066\u6700\u5f8c\u306b\u5fd8\u308c\u3066\u306f\u306a\u3089\u306a\u3044\u306e\u306f\u3001\u5f7c\u3089\u304c\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u63d0\u4f9b\u3059\u308b\u30b5\u30dd\u30fc\u30c8\u3067\u3059\u3002</p>"},{"location":"ja/#_4","title":"\u30e9\u30a4\u30bb\u30f3\u30b9","text":"<p>Lagoon\u306f\u3001<code>Apache 2.0 \u30e9\u30a4\u30bb\u30f3\u30b9</code>\u306e\u4e0b\u3067\u5229\u7528\u53ef\u80fd\u3067\u3059\u3002</p>"},{"location":"ja/code-of-conduct/","title":"\u884c\u52d5\u898f\u7bc4","text":""},{"location":"ja/code-of-conduct/#our-pledge","title":"\u79c1\u305f\u3061\u306e\u8a93\u3044","text":"<p>\u30aa\u30fc\u30d7\u30f3\u3067\u6b53\u8fce\u7684\u306a\u74b0\u5883\u3092\u80b2\u3066\u308b\u305f\u3081\u306b\u3001\u79c1\u305f\u3061\u306f\u8ca2\u732e\u8005\u3084\u30e1\u30f3\u30c6\u30ca\u3068\u3057\u3066\u3001\u5e74\u9f62\u3001\u4f53\u578b\u3001\u969c\u5bb3\u3001\u6c11\u65cf\u6027\u3001\u6027\u81ea\u8a8d\u3068\u6027\u8868\u73fe\u3001\u7d4c\u9a13\u306e\u30ec\u30d9\u30eb\u3001\u56fd\u7c4d\u3001\u500b\u4eba\u306e\u5916\u898b\u3001\u4eba\u7a2e\u3001\u5b97\u6559\u3001\u307e\u305f\u306f\u6027\u7684\u30a2\u30a4\u30c7\u30f3\u30c6\u30a3\u30c6\u30a3\u3068\u6027\u7684\u6307\u5411\u306b\u95a2\u4fc2\u306a\u304f\u3001\u79c1\u305f\u3061\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3068\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3078\u306e\u53c2\u52a0\u3092\u8ab0\u3082\u304c\u30cf\u30e9\u30b9\u30e1\u30f3\u30c8\u306e\u306a\u3044\u7d4c\u9a13\u306b\u3059\u308b\u3053\u3068\u3092\u8a93\u3044\u307e\u3059\u3002</p>"},{"location":"ja/code-of-conduct/#our-standards","title":"\u79c1\u305f\u3061\u306e\u57fa\u6e96","text":"<p>\u7a4d\u6975\u7684\u306a\u74b0\u5883\u4f5c\u308a\u306b\u8ca2\u732e\u3059\u308b\u884c\u52d5\u306e\u4f8b:</p> <ul> <li>\u30a6\u30a7\u30eb\u30ab\u30df\u30f3\u30b0\u3067\u5305\u62ec\u7684\u306a\u8a00\u8449\u9063\u3044\u3092\u3059\u308b\u3053\u3068\u3002</li> <li>\u7570\u306a\u308b\u8996\u70b9\u3068\u7d4c\u9a13\u3092\u5c0a\u91cd\u3059\u308b\u3053\u3068\u3002</li> <li>\u5efa\u8a2d\u7684\u306a\u6279\u8a55\u3092\u7a4f\u3084\u304b\u306b\u53d7\u3051\u5165\u308c\u308b\u3053\u3068\u3002</li> <li>\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306e\u305f\u3081\u306b\u6700\u5584\u3092\u5c3d\u304f\u3059\u3053\u3068\u3002</li> <li>\u4ed6\u306e\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u30e1\u30f3\u30d0\u30fc\u306b\u5bfe\u3059\u308b\u5171\u611f\u3092\u793a\u3059\u3053\u3068\u3002</li> </ul> <p>\u53c2\u52a0\u8005\u306b\u3088\u308b\u8a31\u3055\u308c\u306a\u3044\u884c\u52d5\u306e\u4f8b:</p> <ul> <li>\u6027\u7684\u306a\u8a00\u8449\u3084\u30a4\u30e1\u30fc\u30b8\u306e\u4f7f\u7528\u3001\u304a\u3088\u3073\u6b53\u8fce\u3055\u308c\u306a\u3044\u6027\u7684\u306a\u95a2\u5fc3\u3084\u30a2\u30c9\u30d0\u30f3\u30b9\u3002</li> <li>\u30c8\u30ed\u30fc\u30ea\u30f3\u30b0\u3001\u4fae\u8fb1\u7684/\u8511\u8996\u7684\u306a\u30b3\u30e1\u30f3\u30c8\u3001\u304a\u3088\u3073\u500b\u4eba\u307e\u305f\u306f\u653f\u6cbb\u7684\u306a\u653b\u6483\u3002</li> <li>\u516c\u5171\u306e\u5834\u307e\u305f\u306f\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u3067\u306e\u30cf\u30e9\u30b9\u30e1\u30f3\u30c8\u3002</li> <li>\u660e\u78ba\u306a\u8a31\u53ef\u306a\u3057\u306b\u4ed6\u4eba\u306e\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u60c5\u5831(\u7269\u7406\u7684\u307e\u305f\u306f\u96fb\u5b50\u7684\u306a\u4f4f\u6240\u306a\u3069)\u3092\u516c\u958b\u3059\u308b\u3053\u3068\u3002</li> <li>\u5408\u7406\u7684\u306b\u4e0d\u9069\u5207\u3068\u8003\u3048\u3089\u308c\u308b\u4ed6\u306e\u884c\u70ba\u3002 \u5c02\u9580\u7684\u306a\u74b0\u5883\u3067\u306f\u4e0d\u9069\u5207\u3068\u8003\u3048\u3089\u308c\u308b\u5834\u5408\u3002</li> </ul>"},{"location":"ja/code-of-conduct/#our-responsibilities","title":"\u79c1\u305f\u3061\u306e\u8cac\u4efb","text":"<p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u7ba1\u7406\u8005\u306f\u3001\u53d7\u3051\u5165\u308c\u3089\u308c\u308b\u884c\u52d5\u306e\u57fa\u6e96\u3092\u660e\u78ba\u306b\u3057\u3001\u4e0d\u53d7\u3051\u5165\u308c\u53ef\u80fd\u306a\u884c\u52d5\u306e\u4e8b\u4f8b\u306b\u5bfe\u3057\u3066\u9069\u5207\u3067\u516c\u6b63\u306a\u662f\u6b63\u63aa\u7f6e\u3092\u3068\u308b\u3053\u3068\u304c\u671f\u5f85\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u7ba1\u7406\u8005\u306f\u3001\u3053\u306e\u884c\u52d5\u898f\u7bc4\u306b\u5408\u81f4\u3057\u3066\u3044\u306a\u3044\u30b3\u30e1\u30f3\u30c8\u3001\u30b3\u30df\u30c3\u30c8\u3001\u30b3\u30fc\u30c9\u3001\u30a6\u30a3\u30ad\u306e\u7de8\u96c6\u3001\u554f\u984c\u3001\u304a\u3088\u3073\u305d\u306e\u4ed6\u306e\u8ca2\u732e\u3092\u524a\u9664\u3001\u7de8\u96c6\u3001\u307e\u305f\u306f\u62d2\u5426\u3059\u308b\u6a29\u5229\u3068\u8cac\u4efb\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002\u307e\u305f\u3001\u4e0d\u9069\u5207\u3001\u8105\u5a01\u7684\u3001\u653b\u6483\u7684\u3001\u307e\u305f\u306f\u6709\u5bb3\u3068\u898b\u306a\u3059\u4ed6\u306e\u884c\u52d5\u3092\u884c\u3063\u305f\u8ca2\u732e\u8005\u3092\u4e00\u6642\u7684\u307e\u305f\u306f\u6c38\u4e45\u306b\u7981\u6b62\u3059\u308b\u3053\u3068\u3082\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/code-of-conduct/#scope","title":"\u9069\u7528\u7bc4\u56f2","text":"<p>\u3053\u306e\u884c\u52d5\u898f\u7bc4\u306f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30b9\u30da\u30fc\u30b9\u5185\u3060\u3051\u3067\u306a\u304f\u3001\u500b\u4eba\u304c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u307e\u305f\u306f\u305d\u306e\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3092\u4ee3\u8868\u3057\u3066\u516c\u5171\u306e\u30b9\u30da\u30fc\u30b9\u306b\u3044\u308b\u3068\u304d\u306b\u3082\u9069\u7528\u3055\u308c\u307e\u3059\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u307e\u305f\u306f\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3092\u4ee3\u8868\u3059\u308b\u4f8b\u3068\u3057\u3066\u306f\u3001\u516c\u5f0f\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u96fb\u5b50\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3001\u516c\u5f0f\u306e\u30bd\u30fc\u30b7\u30e3\u30eb\u30e1\u30c7\u30a3\u30a2\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u901a\u3058\u3066\u6295\u7a3f\u3059\u308b\u3053\u3068\u3001\u30aa\u30f3\u30e9\u30a4\u30f3\u307e\u305f\u306f\u30aa\u30d5\u30e9\u30a4\u30f3\u306e\u30a4\u30d9\u30f3\u30c8\u3067\u6307\u540d\u3055\u308c\u305f\u4ee3\u8868\u8005\u3068\u3057\u3066\u884c\u52d5\u3059\u308b\u3053\u3068\u306a\u3069\u304c\u3042\u308a\u307e\u3059\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4ee3\u8868\u306f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u7ba1\u7406\u8005\u306b\u3088\u3063\u3066\u3055\u3089\u306b\u5b9a\u7fa9\u3055\u308c\u3001\u660e\u78ba\u5316\u3055\u308c\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/code-of-conduct/#enforcement","title":"\u57f7\u884c","text":"<p>\u8650\u5f85\u7684\u3001\u5acc\u304c\u3089\u305b\u306e\u3042\u308b\u3001\u307e\u305f\u306f\u305d\u308c\u4ee5\u5916\u306e\u4e0d\u53d7\u3051\u5165\u308c\u53ef\u80fd\u306a\u884c\u52d5\u306e\u4e8b\u4f8b\u306f\u3001\u9023\u7d61\u5148\u306b\u5831\u544a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30c1\u30fc\u30e0\u306fuselagoon@amazee.io\u306b\u3044\u307e\u3059\u3002\u307e\u305f\u3001CoC\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u3092\u5b8c\u4e86\u3057\u305fLagoon\u30c1\u30fc\u30e0\u306e\u30e1\u30f3\u30d0\u30fc\u3067\u3042\u308bAlanna\u307e\u305f\u306fBrandon\u306b\u76f4\u63a5\u9023\u7d61\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30c1\u30fc\u30e0\u306f\u3059\u3079\u3066\u306e\u82e6\u60c5\u3092\u30ec\u30d3\u30e5\u30fc\u3057\u3001\u8abf\u67fb\u3057\u3001\u72b6\u6cc1\u306b\u9069\u3057\u305f\u3068\u8003\u3048\u308b\u65b9\u6cd5\u3067\u5bfe\u5fdc\u3057\u307e\u3059\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30c1\u30fc\u30e0\u306f\u3001\u4e8b\u8c61\u306e\u5831\u544a\u8005\u306b\u95a2\u3059\u308b\u6a5f\u5bc6\u6027\u3092\u7dad\u6301\u3059\u308b\u7fa9\u52d9\u304c\u3042\u308a\u307e\u3059\u3002\u5177\u4f53\u7684\u306a\u65bd\u884c\u30dd\u30ea\u30b7\u30fc\u306e\u8a73\u7d30\u306f\u3001\u5225\u9014\u6295\u7a3f\u3055\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30e1\u30f3\u30c6\u30ca\u30fc\u304c\u8aa0\u5b9f\u306b\u884c\u52d5\u898f\u7bc4\u306b\u5f93\u308f\u306a\u3044\u5834\u5408\u3001\u307e\u305f\u306f\u305d\u308c\u3092\u5f37\u5236\u3057\u306a\u3044\u5834\u5408\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30ea\u30fc\u30c0\u30fc\u30b7\u30c3\u30d7\u306e\u4ed6\u306e\u30e1\u30f3\u30d0\u30fc\u306b\u3088\u3063\u3066\u4e00\u6642\u7684\u307e\u305f\u306f\u6c38\u4e45\u7684\u306a\u5f71\u97ff\u3092\u53d7\u3051\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/code-of-conduct/#attribution","title":"\u30a2\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3","text":"<p>\u3053\u306e\u884c\u52d5\u898f\u7bc4\u306f\u3001Contributor Covenant\u3001\u30d0\u30fc\u30b8\u30e7\u30f31.4\u304b\u3089\u30a2\u30c0\u30d7\u30c8\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u3061\u3089\u3067\u3054\u89a7\u3044\u305f\u3060\u3051\u307e\u3059 http://contributor-covenant.org/version/1/4\u3002</p>"},{"location":"ja/contributing/","title":"\u8ca2\u732e","text":"<p>\u6211\u3005\u306fLagoon\u3078\u306e\u3042\u3089\u3086\u308b\u7a2e\u985e\u306e\u8ca2\u732e\u3092\u5fc3\u304b\u3089\u6b53\u8fce\u3057\u307e\u3059\uff01</p>"},{"location":"ja/contributing/#what-kind-of-contributions-do-we-need","title":"\u3069\u306e\u3088\u3046\u306a\u8ca2\u732e\u304c\u5fc5\u8981\u3067\u3059\u304b\uff1f","text":"<p>Lagoon\u306f\u3069\u3093\u306a\u7a2e\u985e\u306e\u8ca2\u732e\u3067\u3082\u6069\u6075\u3092\u53d7\u3051\u307e\u3059 - \u30d0\u30b0\u4fee\u6b63\u3001\u65b0\u6a5f\u80fd\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u306e\u66f4\u65b0\u3001\u3042\u308b\u3044\u306f\u5358\u7d14\u306a\u30ad\u30e5\u30fc\u306e\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u306a\u3069 - \u3042\u306a\u305f\u304c\u52a9\u3051\u3066\u304f\u308c\u308b\u3053\u3068\u3092\u6211\u3005\u306f\u5b09\u3057\u304f\u601d\u3044\u307e\u3059\u3002</p>"},{"location":"ja/contributing/#developing-for-lagoon","title":"Lagoon\u306e\u958b\u767a","text":"<p>Lagoon\u3092\u3042\u306a\u305f\u306e\u30ed\u30fc\u30ab\u30eb\u30de\u30b7\u30f3\u4e0a\u3067\u52d5\u304b\u3059\u65b9\u6cd5\u306b\u3064\u3044\u3066\u3001KinD\u3092\u4f7f\u7528\u3057\u305fDeveloping Lagoon\u3068\u3044\u3046\u30bb\u30af\u30b7\u30e7\u30f3\u5168\u4f53\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u306f\u307e\u3060\u975e\u5e38\u306bWIP\u3067\u3059\u304c\u3001\u3042\u306a\u305f\u3092\u52a9\u3051\u308b\u305f\u3081\u306e\u591a\u304f\u306eMakefile\u30eb\u30fc\u30c1\u30f3\u304c\u5b58\u5728\u3057\u307e\u3059\u3002</p>"},{"location":"ja/contributing/#installing-lagoon","title":"Lagoon\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u6211\u3005\u306fLagoon\u3092Helm\u30c1\u30e3\u30fc\u30c8\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u65b9\u6cd5\u3092\u6982\u8aac\u3057\u305f\u5225\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u540d\u3082Installing Lagoon Into Existing Kubernetes Cluster - \u3053\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u53ef\u80fd\u306a\u9650\u308a\u30b9\u30e0\u30fc\u30ba\u306b\u3057\u305f\u3044\u3068\u8003\u3048\u3066\u3044\u307e\u3059\uff01</p>"},{"location":"ja/contributing/#help-us-with-our-examples","title":"\u6211\u3005\u306e\u4f8b\u984c\u3067\u306e\u52a9\u3051","text":"<p>\u73fe\u5728\u3001\u6211\u3005\u306e\u6700\u5927\u306e\u30cb\u30fc\u30ba\u306e\u4e00\u3064\u306f\u3001Lagoon\u304cDrupal\u4ee5\u5916\u306e\u5404\u7a2e\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u30b7\u30b9\u30c6\u30e0\u306a\u3069\u3068\u3069\u306e\u3088\u3046\u306b\u52d5\u4f5c\u3059\u308b\u304b\u306e\u4f8b\u3092\u307e\u3068\u3081\u308b\u3053\u3068\u3067\u3059\u3002</p> <p>\u3082\u3057\u3001\u3042\u306a\u305f\u304c\u73fe\u5728\u6211\u3005\u304cDocker Compose\u30b9\u30bf\u30c3\u30af\u3068\u3057\u3066\u6301\u3063\u3066\u3044\u306a\u3044\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9CMS\u307e\u305f\u306f\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u7acb\u3061\u4e0a\u3052\u308b\u3053\u3068\u304c\u3067\u304d\u308c\u3070\u3001PR\u3092\u9001\u3063\u3066\u304f\u3060\u3055\u3044\u3002\u65e2\u5b58\u306e\u4f8b\u3092https://github.com/uselagoon/lagoon-ex\u3067\u3054\u89a7\u304f\u3060\u3055\u3044\u3002 \u30d2\u30f3\u30c8\u3001\u30a2\u30c9\u30d0\u30a4\u30b9\u3001\u30b9\u30bf\u30fc\u30bf\u30fc\u306e\u554f\u984c\u306b\u3064\u3044\u3066\u306f\u3001examples\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002</p> <p>\u305f\u3060\u3057\u3001\u53ef\u80fd\u306a\u9650\u308a\u3001\u57fa\u672c\u306eDocker Hub\u30a4\u30e1\u30fc\u30b8https://hub.docker.com/u/uselagoon\u3092\u4f7f\u7528\u3057\u3066\u4f5c\u6210\u3057\u3066\u3044\u305f\u3060\u304d\u305f\u3044\u3068\u8003\u3048\u3066\u3044\u307e\u3059\u3002\u9069\u5207\u306a\u30a4\u30e1\u30fc\u30b8\u304c\u306a\u3044\u5834\u5408\u3084\u3001\u5f53\u793e\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u5909\u66f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u5834\u5408\u306f\u3001PR(\u53ef\u80fd\u306a\u5834\u5408)\u3092\u6295\u3052\u3066\u3044\u305f\u3060\u304f\u304b\u3001\u554f\u984c\u3092\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044(\u4ed6\u306e\u8ab0\u304b\u304c\u5bfe\u5fdc\u3067\u304d\u308b\u3088\u3046\u306b)https://github.com/uselagoon/lagoon-images\u306b\u3066\u3002</p> <p>\u65e2\u5b58\u306e\u4f8b\u3092\u6539\u5584\u3059\u308b\u305f\u3081\u306b\u79c1\u305f\u3061\u3092\u624b\u4f1d\u3063\u3066\u304f\u3060\u3055\u3044\u3001\u3082\u3057\u3054\u53ef\u80fd\u3067\u3042\u308c\u3070 - \u79c1\u305f\u3061\u306f\u6700\u826f\u306e\u65b9\u6cd5\u3092\u8ffd\u6c42\u3057\u3066\u3044\u308b\u306e\u3067\u3057\u3087\u3046\u304b\u3001\u4f55\u304b\u610f\u5473\u306e\u306a\u3044\u3053\u3068\u3092\u3057\u3066\u3044\u308b\u306e\u3067\u3057\u3087\u3046\u304b\uff1f</p> <p>\u3053\u308c\u3089\u306e\u4f8b\u306e\u3044\u305a\u308c\u304b\u306e\u30c6\u30b9\u30c8\u306b\u8ca2\u732e\u3059\u308b\u4eba\u306b\u306f\u30dc\u30fc\u30ca\u30b9\u30dd\u30a4\u30f3\u30c8\u304c\u3042\u308a\u307e\u3059 \u2013 https://github.com/amazeeio/drupal-example-simple/blob/8.x/TESTING_dockercompose.md\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u3044\u304f\u3064\u304b\u306e\u4f8b\u30c6\u30b9\u30c8\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u3001\u305d\u308c\u3089\u3092\u30ac\u30a4\u30c0\u30f3\u30b9\u306b\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u79c1\u305f\u3061\u304c\u4f7f\u7528\u3057\u3066\u3044\u308b\u30c6\u30b9\u30c8\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306f\u3001Lando\u306e\u512a\u308c\u305f\u30c1\u30fc\u30e0\u304b\u3089\u306eLeia\u3067\u3059\u3002</p> <p>\u4ed6\u306e\u4f8b\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u6539\u5584\u3059\u308b\u305f\u3081\u306b\u79c1\u305f\u3061\u3092\u624b\u4f1d\u3063\u3066\u304f\u3060\u3055\u3044 \u2013 \u79c1\u305f\u3061\u306f\u5b8c\u5168\u306a\u3082\u306e\u3092\u671f\u5f85\u3057\u3066\u3044\u307e\u305b\u3093\u304c\u3001 \u539f\u7a3f\u3001\u6574\u7406\u3001\u5f79\u7acb\u3064\u30ea\u30bd\u30fc\u30b9\u3078\u306e\u30ea\u30f3\u30af\u3001\u660e\u78ba\u306a\u58f0\u660e\u306f\u5168\u3066\u8d85\u7d20\u6674\u3089\u3057\u3044\u3067\u3059\u3002</p> <p>\u4f55\u304b\u8cea\u554f\u304c\u3042\u308b\u5834\u5408\u306f\u3001Discord\u3067\u79c1\u305f\u3061\u306b\u9023\u7d61\u3057\u3066\u304f\u3060\u3055\u3044\uff01</p>"},{"location":"ja/contributing/#i-found-a-security-issue","title":"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u554f\u984c\u3092\u898b\u3064\u3051\u307e\u3057\u305f \ud83d\udd13","text":"<p>\u79c1\u305f\u3061\u306f\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u975e\u5e38\u306b\u91cd\u8996\u3057\u3066\u3044\u307e\u3059\u3002 \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u554f\u984c\u3092\u767a\u898b\u3057\u305f\u308a\u3001\u767a\u898b\u3057\u305f\u3068\u601d\u3063\u305f\u3089\u3001\u662f\u975e\u30e1\u30f3\u30c6\u30ca\u306b\u6ce8\u610f\u3092\u4fc3\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u5371\u967a</p> <p>\u7d50\u679c\u3092security@amazee.io\u306b\u9001\u3063\u3066\u304f\u3060\u3055\u3044\u3002 GitHub\u306e\u554f\u984c\u3068\u3057\u3066\u305d\u308c\u3089\u3092\u30d5\u30a1\u30a4\u30eb\u3057\u3066\u306f\u7d76\u5bfe\u306b\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002</p> <p>\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30ec\u30dd\u30fc\u30c8\u306f\u975e\u5e38\u306b\u8a55\u4fa1\u3055\u308c\u3001\u516c\u5171\u306e\u30ab\u30eb\u30de\u3068\u30b9\u30ef\u30c3\u30b0\u304c\u3082\u3089\u3048\u307e\u3059\uff01 \u79c1\u305f\u3061\u306f\u307e\u305f\u3001\u30d0\u30b0\u30d0\u30a6\u30f3\u30c6\u30a3\u30b7\u30b9\u30c6\u30e0\u306e\u4f5c\u696d\u3082\u9032\u3081\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/contributing/#i-found-an-issue","title":"\u554f\u984c\u3092\u898b\u3064\u3051\u307e\u3057\u305f","text":"<p>\u79c1\u305f\u3061\u306f\u5e38\u306b\u554f\u984c\u3092\u89e3\u6c7a\u3059\u308b\u3053\u3068\u306b\u8208\u5473\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u3001\u554f\u984c\u5831\u544a\u306f\u5927\u6b53\u8fce\u3067\u3059\u3002 \u3042\u306a\u305f\u306e\u554f\u984c\u304c\u3059\u3067\u306b\u554f\u984c\u30ad\u30e5\u30fc\u306b\u5b58\u5728\u3057\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/contributing/#i-have-a-feature-request-or-idea","title":"\u6a5f\u80fd\u306e\u8981\u671b\u3084\u30a2\u30a4\u30c7\u30a2\u304c\u3042\u308a\u307e\u3059","text":"<p>\u7d20\u6575\u3067\u3059\uff01 \u554f\u984c\u3092\u4f5c\u6210\u3057\u3066\u3044\u305f\u3060\u3051\u308c\u3070\u3001\u79c1\u305f\u3061\u306f\u305d\u308c\u3092\u691c\u8a0e\u3059\u308b\u3053\u3068\u3092\u559c\u3073\u307e\u3059\u3002 \u305d\u308c\u304c\u5b9f\u88c5\u3055\u308c\u308b\u3053\u3068\u3092\u4fdd\u8a3c\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002 \u3057\u304b\u3057\u3001\u79c1\u305f\u3061\u306f\u5e38\u306bLagoon\u306b\u4f55\u3092\u3082\u305f\u3089\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u304b\u306e\u30a2\u30a4\u30c7\u30a2\u3092\u805e\u304f\u3053\u3068\u306b\u8208\u5473\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>\u5225\u306e\u826f\u3044\u65b9\u6cd5\u306f\u3001\u3042\u306a\u305f\u306e\u30a2\u30a4\u30c7\u30a2\u306b\u3064\u3044\u3066Discord\u7d4c\u7531\u3067\u79c1\u305f\u3061\u3068\u8a71\u3059\u3053\u3068\u3082\u3067\u3059\u3002 . \u4eca\u65e5\u53c2\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\uff01</p>"},{"location":"ja/contributing/#i-wrote-some-code","title":"\u79c1\u306f\u3044\u304f\u3064\u304b\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u304d\u307e\u3057\u305f","text":"<p>\u7d20\u6674\u3089\u3057\u3044\uff01\u305d\u308c\u306b\u3064\u3044\u3066\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u304a\u9001\u308a\u304f\u3060\u3055\u3044\u3001\u53ef\u80fd\u306a\u9650\u308a\u30ec\u30d3\u30e5\u30fc\u3057\u3001\u53ef\u80fd\u3067\u3042\u308c\u3070\u30de\u30fc\u30b8\u3057\u307e\u3059\u3002</p>"},{"location":"ja/applications/","title":"Lagoon\u306f\u5e45\u5e83\u3044\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3001\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3001\u8a00\u8a9e\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059","text":"<p>Lagoon\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b9\u30bf\u30c3\u30af\u3092\u5927\u304d\u304f3\u3064\u306e\u30ec\u30d9\u30eb\u306b\u5206\u985e\u3057\u3066\u3044\u307e\u3059:</p>"},{"location":"ja/applications/#_1","title":"\u8a00\u8a9e","text":"<p>Lagoon\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u57fa\u672c\u7684\u306a\u69cb\u6210\u8981\u7d20\u3067\u3042\u308a\u3001\u901a\u5e38\u306fLagoon\u5c02\u7528\u306e\u30a4\u30e1\u30fc\u30b8\u306b\u3088\u3063\u3066\u63d0\u4f9b\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/applications/#_2","title":"\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af","text":"<p>\u3053\u308c\u3089\u306e\u57fa\u672c\u30a4\u30e1\u30fc\u30b8\u3092\u57fa\u306b\u3001\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u3092\u63d0\u4f9b\u3057\u305f\u308a\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u99c6\u52d5\u3057\u305f\u308a\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306a\u30ed\u30b8\u30c3\u30af\u3001\u30c4\u30fc\u30eb\u3001\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p>"},{"location":"ja/applications/#_3","title":"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3","text":"<p>\u901a\u5e38\u3001\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e\u4e0a\u306b\u69cb\u7bc9\u3055\u308c\u3001\u30b3\u30f3\u30c6\u30f3\u30c4\u7de8\u96c6\u8005\u3084\u958b\u767a\u8005\u304c\u6700\u7d42\u88fd\u54c1\u3092\u5f62\u4f5c\u308b\u305f\u3081\u306b\u64cd\u4f5c\u3059\u308b\u30ec\u30a4\u30e4\u30fc\u3067\u3059\u3002</p> <p>Lagoon\u3067\u4f7f\u7528\u3059\u308b\u305f\u3081\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u53c2\u7167\u3059\u308b\u3068\u304d\u3001\u901a\u5e38\u306f3\u3064\u306e\u65b9\u6cd5\u3067\u305d\u308c\u3089\u3092\u53c2\u7167\u3057\u307e\u3059:</p>"},{"location":"ja/applications/#_4","title":"\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8","text":"<p>\u3053\u308c\u3089\u306f\u5b8c\u5168\u306b\u6a5f\u80fd\u3059\u308b\u3001\u30af\u30ed\u30fc\u30f3\u53ef\u80fd\u306a\u30b9\u30bf\u30fc\u30bf\u30fc\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u3059\u3002\u5b9a\u671f\u7684\u306b\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u3068\u66f4\u65b0\u304c\u884c\u308f\u308c\u3001\u308f\u305a\u304b\u306a\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3067\u62e1\u5f35\u3057\u3066\u4f7f\u7528\u3067\u304d\u308b\u72b6\u614b\u306b\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/applications/#_5","title":"\u4f8b","text":"<p>\u3053\u308c\u3089\u306f\u5b8c\u5168\u306b\u6a5f\u80fd\u3059\u308b\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u3001\u5b9a\u671f\u7684\u306b\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u3068\u66f4\u65b0\u304c\u884c\u308f\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u500b\u5225\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u52d5\u4f5c\u3055\u305b\u308b\u306b\u306f\u3042\u308b\u7a0b\u5ea6\u306e\u52b4\u529b\u304c\u5fc5\u8981\u306a\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/applications/#_6","title":"\u30c7\u30e2","text":"<p>\u3053\u308c\u3089\u306f\u5b9f\u8a3c\u306e\u305f\u3081\u306b\u69cb\u7bc9\u3055\u308c\u305f\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u3001\u6982\u5ff5\u691c\u8a3c\u3068\u3057\u3066\u306f\u4f7f\u7528\u53ef\u80fd\u3067\u3059\u304c\u3001\u5b9a\u671f\u7684\u306a\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u3084\u66f4\u65b0\u306f\u884c\u308f\u308c\u3066\u3044\u307e\u305b\u3093\u3002</p> <p>\u3088\u308a\u5b8c\u5168\u306a\u30ea\u30b9\u30c8\u306b\u3064\u3044\u3066\u306f\u3001\u79c1\u305f\u3061\u306eGitHub\u30ea\u30dd\u30b8\u30c8\u30ea:https://www.github.com/lagoon-examples \u3068\u79c1\u305f\u3061\u306e\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8 https://lagoon.sh/application/ \u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/applications/laravel/","title":"Laravel\u3092Lagoon\u3067\u5b9f\u884c","text":"<p>Laravel\u3092Lagoon\u3067\u5b9f\u884c\u3059\u308b\u306b\u306f\u3001\u8907\u6570\u306e\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002</p> <ul> <li>\u65e2\u5b58\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u81ea\u5206\u3067\u300clagoonize\u300d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\uff08Lagoonizing\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\uff09\u3002</li> <li>\u53c2\u8003\u3068\u3057\u3066\u3001\u30b7\u30f3\u30d7\u30eb\u306alagoonize\u3055\u308c\u305fLaravel\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u4f8b\u793a\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u7528\u610f\u3057\u3066\u3044\u307e\u3059\u3002</li> <li>\uff08\u63a8\u5968\uff09 \"Sail:onLagoon\"\u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306f\u6a19\u6e96\u7684\u306aLaravel Sail\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u53d6\u308a\u3001\u9069\u5207\u306aLagoon\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u81ea\u52d5\u751f\u6210\u3057\u307e\u3059\u3002</li> </ul>"},{"location":"ja/applications/laravel/#_1","title":"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u74b0\u5883\u30ad\u30fc","text":"<p>\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30ad\u30fc\u3092\u8a2d\u5b9a\u3059\u308b\u306b\u306f\u3001CLI\u307e\u305f\u306fUI\u3092\u901a\u3058\u3066<code>APP_KEY</code>\u74b0\u5883\u5909\u6570(environment variable)\u3092\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u3053\u308c\u306b\u3088\u308a\u3001\u30ad\u30fc\u3092\u30b3\u30fc\u30c9\u5185\uff08\u4f8b\u3048\u3070<code>.env</code>\u30d5\u30a1\u30a4\u30eb\uff09\u306b\u4fdd\u5b58\u3059\u308b\u5fc5\u8981\u304c\u306a\u304f\u306a\u308a\u307e\u3059\u3002</p> <p>\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30ad\u30fc\u3092\u751f\u6210\u3059\u308b\u306b\u306f\u3001<code>php artisan key:generate --show</code>\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u306e\u30b3\u30de\u30f3\u30c9\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u5909\u66f4\u305b\u305a\u306b\u3001\u6709\u52b9\u306a\u30ad\u30fc\u3092\u51fa\u529b\u3057\u307e\u3059\u3002</p>"},{"location":"ja/applications/node/#_1","title":"\u306f\u3058\u3081\u306b","text":"<p>Lagoon\u306f\u3001\u516c\u5f0f\u306eNode Alpine\u30a4\u30e1\u30fc\u30b8\u3092\u30d9\u30fc\u30b9\u306b\u3057\u305fNode.js\u30a4\u30e1\u30fc\u30b8\u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002</p> <p>Lagoon\u4e0a\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u52d5\u304b\u3059\u305f\u3081\u306e\u9069\u5fdc\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306e\u8a73\u3057\u3044\u60c5\u5831\u306f\u3001Node.js Docker\u30a4\u30e1\u30fc\u30b8\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u898b\u3064\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/applications/options/","title":"Lagoon\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a","text":""},{"location":"ja/applications/options/#lagoonyml","title":"<code>lagoon.yml</code>","text":"<p>Lagoon\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30ec\u30d9\u30eb\u304a\u3088\u3073\u74b0\u5883\u30ec\u30d9\u30eb\u306e\u8a2d\u5b9a\u306f\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u306e <code>.lagoon.yml</code> \u30d5\u30a1\u30a4\u30eb\u3067\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p><code>lagoon-yml.md</code>\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/applications/options/#docker-composeyml","title":"<code>docker-compose.yml</code>","text":"<p>Lagoon\u306e\u30b5\u30fc\u30d3\u30b9\u30ec\u30d9\u30eb\u306e\u8a2d\u5b9a\u306f\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u306e<code>docker-compose.yml</code>\u30d5\u30a1\u30a4\u30eb\u3067\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u7279\u306b\u3001<code>lagoon.type</code>\u3068\u95a2\u9023\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u30e9\u30d9\u30eb\u306f\u3001\u500b\u3005\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p><code>docker-compose-yml.md</code>\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/applications/options/#_1","title":"\u30b9\u30c8\u30ec\u30fc\u30b8","text":"<p>Lagoon\u306f\u307b\u3068\u3093\u3069\u306e\u30b5\u30fc\u30d3\u30b9\u306b\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u63d0\u4f9b\u3059\u308b\u6a5f\u80fd\u304c\u3042\u308a\u307e\u3059\u3002Lagoon\u7d44\u307f\u8fbc\u307f\u306e\u30b5\u30fc\u30d3\u30b9\u30bf\u30a4\u30d7\u306b\u306f\u3001\u5fc5\u8981\u306aPVC\u3001\u30dc\u30ea\u30e5\u30fc\u30e0\u306a\u3069\u3092\u8ffd\u52a0\u3067\u304d\u308b<code>-persistent</code>\u30d0\u30ea\u30a2\u30f3\u30c8\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u306e\u8a2d\u5b9a\u3092\u30ed\u30fc\u30ab\u30eb\u3067\u53cd\u6620\u3059\u308b\u3088\u3046\u306b\u4f8b\u3092\u66f4\u65b0\u3057\u307e\u3057\u305f\u3002</p>"},{"location":"ja/applications/options/#_2","title":"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9","text":"<p>Lagoon\u306f\u4ee5\u4e0b\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u5b9a\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059:</p> <ul> <li>Mariadb - \u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u5168\u30d0\u30fc\u30b8\u30e7\u30f3</li> <li>PostgreSQL - \u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u5168\u30d0\u30fc\u30b8\u30e7\u30f3</li> </ul>"},{"location":"ja/applications/options/#_3","title":"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30fb\u30a2\u30ba\u30fb\u30a2\u30fb\u30b5\u30fc\u30d3\u30b9","text":"<p>Lagoon\u306f\u307e\u305f\u3001dbaas-operator\u3092\u5229\u7528\u3057\u3066\u3001\u57fa\u76e4\u3068\u306a\u308b\u30de\u30cd\u30fc\u30b8\u30c9\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30b5\u30fc\u30d3\u30b9\uff08\u4f8b\uff1aRDS\u3001Google Cloud Databases\u3001Azure Database\uff09\u3092\u4f7f\u7528\u3057\u3066\u3053\u308c\u3089\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u81ea\u52d5\u7684\u306b\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3059\u308b\u6a5f\u80fd\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u304c\u30af\u30e9\u30b9\u30bf\u7528\u306b\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u304a\u3088\u3073\u8a2d\u5b9a\u3055\u308c\u308b\u3068\u3001\u81ea\u52d5\u7684\u306b\u884c\u308f\u308c\u307e\u3059\u3002\u3053\u308c\u3089\u304c\u5229\u7528\u3067\u304d\u306a\u3044\u5834\u5408\u306f\u3001\u30d5\u30a9\u30fc\u30eb\u30d0\u30c3\u30af\u3068\u3057\u3066\u30dd\u30c3\u30c9\u304c\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/applications/options/#_4","title":"\u30ad\u30e3\u30c3\u30b7\u30e5","text":"<p>Lagoon\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3068\u3057\u3066Redis\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\u672c\u756a\u74b0\u5883\u3067\u306f\u3001\u4e00\u90e8\u306e\u30e6\u30fc\u30b6\u30fc\u304c\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u3092\u652f\u63f4\u3059\u308b\u305f\u3081\u306b\u3001\u30de\u30cd\u30fc\u30b8\u30c9Redis\u30b5\u30fc\u30d3\u30b9\u3092\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3057\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/applications/options/#_5","title":"\u691c\u7d22","text":"<p>Lagoon\u306f\u691c\u7d22\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u3068\u3057\u3066Elasticsearch\u3001Solr\u3001OpenSearch\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u5916\u90e8\u306e\u691c\u7d22\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u3082\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/applications/options/#_6","title":"\u30a4\u30f3\u30b0\u30ec\u30b9/\u30eb\u30fc\u30c8","text":"<p>Lagoon\u306f\u3001\u30a4\u30f3\u30b0\u30ec\u30b9\u8981\u4ef6\u3092\u6301\u3064\u30b5\u30fc\u30d3\u30b9\u306e\u30eb\u30fc\u30c8\u3092\u81ea\u52d5\u751f\u6210\u3057\u307e\u3059\u3002\u30ab\u30b9\u30bf\u30e0\u30eb\u30fc\u30c8\u306f\u3001\u5404\u30b5\u30fc\u30d3\u30b9\u3054\u3068\u306b <code>.lagoon.yml</code> \u306b\u63d0\u4f9b\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/applications/options/#environment-variables","title":"\u74b0\u5883\u5909\u6570","text":"<p>Lagoon\u306f\u3001\u30d3\u30eb\u30c9\u6642\u3068\u30e9\u30f3\u30bf\u30a4\u30e0\u6642\u306b\u74b0\u5883\u5909\u6570\u3092\u591a\u7528\u3057\u307e\u3059\u3002\u3053\u308c\u3089\u304c\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u91cd\u8981\u306a\u8a2d\u5b9a(\u4f8b:\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u5b9a/\u8a8d\u8a3c\u60c5\u5831)\u3092\u63d0\u4f9b\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u308b\u5834\u5408\u3001\u30ed\u30fc\u30ab\u30eb\u3068Lagoon\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u540c\u69d8\u306e\u540d\u524d\u3092\u4ed8\u3051\u308b\u3053\u3068\u304c\u91cd\u8981\u3067\u3059\u3002</p> <p>\u8a73\u7d30\u306f environment-variables.md\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/applications/other/","title":"Lagoon\u3067\u4ed6\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u884c","text":"<p>Lagoon\u304c\u7279\u5b9a\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3001\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3001\u8a00\u8a9e\u7528\u306e\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u3092\u6301\u3063\u3066\u3044\u306a\u304f\u3066\u3082\u3001Lagoon\u3067\u30d3\u30eb\u30c9\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002</p> <p>commons\u30a4\u30e1\u30fc\u30b8\u3092\u62e1\u5f35\u307e\u305f\u306f\u7d99\u627f\u3059\u308b\u3053\u3068\u3067\u3001Lagoon\u306f\u307b\u307c\u3042\u3089\u3086\u308b\u30ef\u30fc\u30af\u30ed\u30fc\u30c9\u3092\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/applications/other/#hugo","title":"Hugo","text":"<p>\u3053\u306e\u7c21\u5358\u306a\u4f8b\u306f\u3001Hugo\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u3092\u30d3\u30eb\u30c9\u3057\u3001NGINX\u30a4\u30e1\u30fc\u30b8\u3067\u9759\u7684\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u63d0\u4f9b\u3059\u308b\u65b9\u6cd5\u3092\u793a\u3057\u3066\u3044\u307e\u3059\u3002commons\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u7528\u3057\u3066Hugo\u3092\u8ffd\u52a0\u3057\u3001\u30b5\u30a4\u30c8\u3092\u30b3\u30d4\u30fc\u3057\u3066\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002\u305d\u306e\u5f8c\u3001\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3055\u308c\u305fNGINX\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u305fNGINX\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u7528\u3057\u3066\u30b5\u30a4\u30c8\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002</p> nginx.dockerfile<pre><code>FROM uselagoon/commons AS builder\n\nRUN apk add hugo git\nWORKDIR /app\nCOPY . /app\nRUN hugo\n\nFROM uselagoon/nginx\n\nCOPY --from=builder /app/public/ /app\nCOPY lagoon/static-files.conf /etc/nginx/conf.d/app.conf\n\nRUN fix-permissions /usr/local/openresty/nginx\n</code></pre> docker-compose.yml<pre><code>services:\nnginx:\nbuild:\ncontext: .\ndockerfile: lagoon/nginx.Dockerfile\nlabels:\nlagoon.type: nginx\n</code></pre>"},{"location":"ja/applications/php/#_1","title":"\u306f\u3058\u3081\u306b","text":"<p>Lagoon\u306f\u3001Drupal\u3001Laravel\u3001Wordpress\u3001Magento\u3001Symfony\u306a\u3069\u3001\u69d8\u3005\u306aPHP\u30d9\u30fc\u30b9\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002</p> <p>Lagoon\u3067PHP\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306e\u9069\u5fdc\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306e\u8a73\u7d30\u306f\u3001PHP-cli Docker\u30a4\u30e1\u30fc\u30b8\u304a\u3088\u3073PHP-FPM Docker\u30a4\u30e1\u30fc\u30b8\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u898b\u3064\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/applications/python/#_1","title":"\u306f\u3058\u3081\u306b","text":"<p>Lagoon\u306f\u3001Python\u30d9\u30fc\u30b9\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3084\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u3092\u69cb\u7bc9\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3067\u304d\u308bPython 3.7\u4ee5\u4e0a\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002</p> <p>Lagoon\u4e0a\u3067Python\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u52d5\u4f5c\u3055\u305b\u308b\u305f\u3081\u306e\u8abf\u6574\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306e\u8a73\u7d30\u306f\u3001Python Docker\u30a4\u30e1\u30fc\u30b8\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u898b\u3064\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/applications/ruby/","title":"Ruby\u3068Ruby on Rails","text":""},{"location":"ja/applications/ruby/#_1","title":"\u306f\u3058\u3081\u306b","text":"<p>\u79c1\u305f\u3061\u306f\u3001\u516c\u5f0f\u306e Ruby alpine Docker \u30a4\u30e1\u30fc\u30b8\u3092\u30d9\u30fc\u30b9\u306b\u3057\u305f Ruby 3.0 \u4ee5\u4e0a\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002 \u4ee5\u4e0b\u3067\u306f\u3001Rails \u30a2\u30d7\u30ea\u3092 Lagoon \u306b\u30c7\u30d7\u30ed\u30a4\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u524d\u63d0\u3068\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u3053\u3067\u8aac\u660e\u3059\u308b\u8a73\u7d30\u306e\u591a\u304f\u306f\u5b9f\u969b\u306b\u306f\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306b\u4f9d\u5b58\u3057\u307e\u305b\u3093\u3002</p>"},{"location":"ja/applications/ruby/#lagoon-rails","title":"Lagoon \u3067 Rails \u3092\u5b9f\u884c\u3059\u308b","text":""},{"location":"ja/applications/ruby/#_2","title":"\u30ea\u30af\u30a8\u30b9\u30c8\u3078\u306e\u5fdc\u7b54","text":"<p>Lagoon\u306e\u4f8b\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u3042\u308bRuby on Rails\u306e\u4f8b\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\u3002</p> <p><code>docker-compose.yml</code>\u3067\u306f\u3001\u52d5\u7684\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u51e6\u7406\u3059\u308b\u4e3b\u8981\u30b5\u30fc\u30d3\u30b9\u3068\u3057\u3066<code>ruby</code>\u3068\u3044\u3046\u540d\u524d\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002</p> <p><code>ruby</code>\u30b5\u30fc\u30d3\u30b9\u7528\u306b\u6307\u5b9a\u3055\u308c\u305fdockerfile\u3092\u898b\u3066\u307f\u308b\u3068\u3001\u30dd\u30fc\u30c83000\u3092\u516c\u958b\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002<code>nginx</code>\u30b5\u30fc\u30d3\u30b9\u306f\u3001\u975e\u9759\u7684\u30a2\u30bb\u30c3\u30c8\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u3053\u306e\u30dd\u30fc\u30c8\u306e<code>ruby</code>\u30b5\u30fc\u30d3\u30b9\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3057\u307e\u3059(\u8a73\u7d30\u306fnginx\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044)\u3002</p>"},{"location":"ja/applications/ruby/#_3","title":"\u30ed\u30ae\u30f3\u30b0","text":"<p>Lagoon\u306e\u30ed\u30ae\u30f3\u30b0\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u306b\u3064\u3044\u3066\u306f\u3001\u6b21\u306e\u6587\u66f8\u3067\u8aac\u660e\u3055\u308c\u3066\u3044\u307e\u3059\u3002 \u3053\u3061\u3089\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\u57fa\u672c\u7684\u306b\u3001\u3053\u306e\u30a4\u30f3\u30d5\u30e9\u3092\u5229\u7528\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u30ed\u30b0\u3092UDP\u30e1\u30c3\u30bb\u30fc\u30b8\u3067<code>udp://application-logs.lagoon.svc:5140</code>\u306b\u9001\u4fe1\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>Rails\u306e\u4f8b\u3067\u306f\u3001<code>logstash-logger</code>\u3068\u3044\u3046gem\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u3001\u305d\u306e\u5f8c<code>config/application.rb</code>\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u521d\u671f\u5316\u3057\u3066\u3044\u307e\u3059\uff1a</p> config/application.rb<pre><code>    if ENV.has_key?('LAGOON_PROJECT') &amp;&amp; ENV.has_key?('LAGOON_ENVIRONMENT') then\nlagoon_namespace = ENV['LAGOON_PROJECT'] + \"-\" + ENV['LAGOON_ENVIRONMENT']\nLogStashLogger.configure do |config|\nconfig.customize_event do |event|\nevent[\"type\"] = lagoon_namespace\nend\nend\nconfig.logstash.host = 'application-logs.lagoon.svc'\nconfig.logstash.type = :udp\nconfig.logstash.port = 5140\nend\n</code></pre>"},{"location":"ja/applications/ruby/#_4","title":"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u5b9a","text":"<p>\u3053\u306e\u4f8b\u3067\u306f\u3001\u79c1\u305f\u3061\u306ePostgreSQL\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059(<code>docker-compose.yml</code>\u30d5\u30a1\u30a4\u30eb\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044)\u3002Lagoon\u3067\u306eRails\u3092\u7528\u3044\u305f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30a2\u30af\u30bb\u30b9\u306e\u8a2d\u5b9a\u306f\u975e\u5e38\u306b\u7c21\u5358\u3067\u3059\u3002Lagoon \u306f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u63a5\u7d9a\u306b\u5fc5\u8981\u306a\u60c5\u5831\u3092\u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u63d0\u4f9b\u3057\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001<code>config/database.yml</code> \u30d5\u30a1\u30a4\u30eb\u3067\u3053\u308c\u3089\u306e\u74b0\u5883\u5909\u6570\u3092\u5229\u7528\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u7c21\u5358\u306b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u63a5\u7d9a\u3092\u69cb\u6210\u3067\u304d\u307e\u3059\u3002</p> config/database.yml<pre><code>default: &amp;default\nadapter: postgresql\nencoding: unicode\npool: &lt;%= ENV.fetch(\"RAILS_MAX_THREADS\") { 5 } %&gt;\nusername: &lt;%= ENV.fetch(\"POSTGRES_USERNAME\") { \"drupal\" } %&gt;\npassword: &lt;%= ENV.fetch(\"POSTGRES_PASSWORD\") { \"drupal\" } %&gt;\nhost: &lt;%= ENV.fetch(\"POSTGRES_HOST\") { \"postgres\" } %&gt;\ndatabase: &lt;%= ENV.fetch(\"'POSTGRES_DATABASE'\") { \"drupal\" } %&gt;\n</code></pre>"},{"location":"ja/applications/wordpress/","title":"WordPress\u3092Lagoon\u3067\u5b9f\u884c","text":"<p>WordPress\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306f\u3001Composer\u3092\u4f7f\u7528\u3057\u3066WordPress\u3001\u305d\u306e\u4f9d\u5b58\u95a2\u4fc2\u3001\u304a\u3088\u3073\u30c6\u30fc\u30de\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p>\u3053\u306eWordPress\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306f\u3001https://github.com/roots/bedrock\u306e\u30dc\u30a4\u30e9\u30fc\u30d7\u30ec\u30fc\u30c8\u3092\u30d9\u30fc\u30b9\u306b\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u6a19\u6e96\u5316\u3055\u308c\u305fLagoon\u306e\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u30d1\u30bf\u30fc\u30f3\u306b\u5408\u308f\u305b\u3066\u62e1\u5f35\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/applications/wordpress/#composer","title":"Composer\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u3053\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306f\u3001WordPress\u3068\u305d\u306e\u30c6\u30fc\u30de\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u305f\u3081\u306bComposer\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002</p>"},{"location":"ja/applications/wordpress/#_1","title":"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9","text":"<p>Lagoon\u306fMariaDB\u3068PostgreSQL\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u304c\u3001WordPress\u3067\u306ePostgreSQL\u306e\u30b5\u30dd\u30fc\u30c8\u306f\u9650\u5b9a\u7684\u306a\u306e\u3067\u3001\u4f7f\u7528\u306f\u63a8\u5968\u3055\u308c\u307e\u305b\u3093\u3002</p>"},{"location":"ja/applications/wordpress/#nginx","title":"NGINX\u306e\u8a2d\u5b9a","text":"<p>Lagoon\u306b\u306fWordPress\u7528\u306e\u7d44\u307f\u8fbc\u307f\u8a2d\u5b9a\u304c\u3042\u308a\u307e\u305b\u3093 - \u4ee3\u308f\u308a\u306b\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u306f\u521d\u671f\u8a2d\u5b9a\u306enginx.conf\u304c\u4ed8\u5c5e\u3057\u3066\u3044\u307e\u3059\u3002\u6539\u5584\u70b9\u304c\u3042\u308c\u3070\u3001\u305c\u3072\u8ca2\u732e\u3057\u3066\u304f\u3060\u3055\u3044\uff01</p>"},{"location":"ja/applications/wordpress/#wp-cli","title":"WP-CLI","text":"<p>Lagoon\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306f\u3001WordPress\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u7ba1\u7406\u3059\u308b\u305f\u3081\u306b<code>wp-cli</code>\u3092cli\u30a4\u30e1\u30fc\u30b8\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/","title":"\u6982\u8981","text":"<p>Lagoon\u306fDrupal\u30b5\u30a4\u30c8\u3092\u30db\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u4f5c\u3089\u308c\u307e\u3057\u305f(\u3044\u3084\u3001\u672c\u5f53\u306b\u3001\u5c11\u306a\u304f\u3068\u3082\u6700\u521d\u306f\u305d\u3046\u3067\u3057\u305f\uff01)</p> <p>\u3053\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u306f\u3001Drupal\u3067\u4f7f\u7528\u3059\u308b\u305f\u3081\u306b\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3055\u308c\u305f\u69d8\u3005\u306a\u30b5\u30fc\u30d3\u30b9\u306b\u95a2\u3059\u308b\u8a73\u7d30\u60c5\u5831\u3092\u898b\u3064\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/#drupal_integrations-drupal","title":"<code>drupal_integrations</code> Drupal\u30b9\u30ad\u30e3\u30d5\u30a9\u30fc\u30eb\u30c7\u30a3\u30f3\u30b0\u30d1\u30c3\u30b1\u30fc\u30b8","text":"<p>packagist\u3067\u5229\u7528\u53ef\u80fd\u306a<code>drupal_integrations</code>\u30d1\u30c3\u30b1\u30fc\u30b8\u306f\u3001Lagoon\u3067\u4f7f\u7528\u3059\u308b\u305f\u3081\u306bDrupal\u306ecore-composer-scaffold\u3092\u62e1\u5f35\u3057\u307e\u3059\u3002\u307e\u305f\u3001Lagoon\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306eDrush\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u53d6\u5f97\u3059\u308b\u305f\u3081\u306e\u8ffd\u52a0\u306eDrush\u30b3\u30de\u30f3\u30c9<code>drush la</code>\u3082\u63d0\u4f9b\u3057\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/#lagoon-logs-drupal","title":"<code>lagoon-logs</code> Drupal\u30e2\u30b8\u30e5\u30fc\u30eb","text":"<p>drupal.org\u3067\u5229\u7528\u53ef\u80fd\u306a<code>lagoon_logs</code>\u30e2\u30b8\u30e5\u30fc\u30eb\u306f\u3001Lagoon\u4e0a\u306eDrupal\u306b\u5bfe\u3057\u3066\u8a2d\u5b9a\u4e0d\u8981\u306e\u30ed\u30ae\u30f3\u30b0\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/automatic-updates/","title":"\u81ea\u52d5\u66f4\u65b0","text":"<p>Lagoon\u306f\u3001Drupal\u306e\u30b3\u30a2\u90e8\u5206\u3084contrib\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u66f4\u65b0\u65b9\u6cd5\u306e\u4e00\u90e8\u3068\u4e92\u63db\u6027\u304c\u3042\u308a\u307e\u305b\u3093\u3002Lagoon\u306f\u5909\u66f4\u3067\u304d\u306a\u3044\u30a4\u30e1\u30fc\u30b8\u3092\u69cb\u7bc9\u3057\u3001\u5909\u66f4\u3067\u304d\u306a\u3044\u30b3\u30f3\u30c6\u30ca\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3092\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30b3\u30fc\u30c9\u304c\u5b9f\u884c\u6642\u306b\u5909\u66f4\u3055\u308c\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u554f\u984c\u304c\u767a\u751f\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002</p> <ol> <li>\u30b3\u30f3\u30c6\u30ca\u306e\u518d\u8d77\u52d5\u306b\u3088\u308b\u5909\u66f4\u306e\u6d88\u5931: \u30b3\u30f3\u30c6\u30ca\u306fKubernetes\u306b\u3088\u3063\u3066\u81ea\u52d5\u7684\u306b\u7ba1\u7406\u3055\u308c\u3066\u304a\u308a\u3001\u3044\u3064\u3067\u3082\u79fb\u52d5\u3001\u518d\u8d77\u52d5\u3001\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u3055\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u304c\u767a\u751f\u3059\u308b\u3068\u3001\u6700\u521d\u306b\u69cb\u7bc9\u3055\u308c\u305f\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u304c\u5b9f\u884c\u3055\u308c\u3001\u5b9f\u884c\u6642\u306b\u52a0\u3048\u3089\u308c\u305f\u5909\u66f4\u306f\u3059\u3079\u3066\u5931\u308f\u308c\u307e\u3059\u3002</li> <li>\u30bf\u30b9\u30af\u3068Cron\u30b8\u30e7\u30d6\u306e\u554f\u984c: \u30bf\u30b9\u30af\u3084Cron\u30b8\u30e7\u30d6\u306f\u6700\u521d\u306b\u69cb\u7bc9\u3055\u308c\u305f\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3067\u5b9f\u884c\u3055\u308c\u308b\u305f\u3081\u3001\u66f4\u65b0\u3055\u308c\u305f\u30b3\u30fc\u30c9\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u305b\u3093\u3002</li> <li>\u8aad\u307f\u53d6\u308a\u5c02\u7528\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306b\u3088\u308b\u66f4\u65b0\u306e\u5236\u9650: \u66f4\u65b0\u306b\u306f\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3078\u306e\u66f8\u304d\u8fbc\u307f\u6a29\u9650\u304c\u5fc5\u8981\u3067\u3059\u304c\u3001\u8aad\u307f\u53d6\u308a\u5c02\u7528\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u5f37\u5236\u3059\u308b\u74b0\u5883\u3092\u69cb\u6210\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002</li> <li>\u8907\u6570\u30b3\u30f3\u30c6\u30ca\u66f4\u65b0\u6642\u306e\u4e0d\u4e00\u81f4: \u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u3067\u306f\u3001\u305d\u308c\u305e\u308c\u5358\u4e00\u306e\u6a5f\u80fd\u3092\u6301\u3064\u5c0f\u3055\u306a\u30b3\u30f3\u30c6\u30ca\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3053\u3068\u3092\u63a8\u5968\u3057\u307e\u3059\u3002\u4e00\u822c\u7684\u306aDrupal\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u306f\u3001\u30b3\u30fc\u30c9\u306e\u30b3\u30d4\u30fc\u3092\u542b\u3080<code>cli</code>\u3001<code>php</code>\u3001<code>nginx</code>\u306e\u30b3\u30f3\u30c6\u30ca\u304c3\u3064\u5b58\u5728\u3057\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30b3\u30f3\u30c6\u30ca\u306e\u3046\u30611\u3064\u3060\u3051\u3092\u66f4\u65b0\u3059\u308b\u3068\u3001\u30b3\u30fc\u30c9\u306e\u4e0d\u4e00\u81f4\u306b\u3088\u308b\u554f\u984c\u304c\u767a\u751f\u3057\u307e\u3059\u3002</li> </ol> <p>Lagoon\u3067\u306f\u4ee5\u4e0b\u306e\u66f4\u65b0\u65b9\u6cd5\u304c\u7121\u52b9\u5316\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/automatic-updates/#drupal","title":"Drupal \u81ea\u52d5\u66f4\u65b0","text":"<p>Drupal \u81ea\u52d5\u66f4\u65b0\u30e2\u30b8\u30e5\u30fc\u30eb:contrib\u30e2\u30b8\u30e5\u30fc\u30eb\u306e[\u81ea\u52d5\u66f4\u65b0] (https ://www.drupal.org/project/automatic_updates)\u306f\u7121\u52b9\u5316\u3055\u308c\u3066\u304a\u308a\u3001Drupal\u30b3\u30a2\u306b\u79fb\u884c\u3057\u3066\u3082\u7121\u52b9\u5316\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/automatic-updates/#drush","title":"Drush","text":"<p><code>drush pm-install</code>\u307e\u305f\u306f<code>drush pm-update</code>\u30b3\u30de\u30f3\u30c9\u306f\u3001amazeeio/drupal-integrations\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u4e00\u90e8\u3068\u3057\u3066\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u7121\u52b9\u5316\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/drush-9/#_1","title":"\u30a8\u30a4\u30ea\u30a2\u30b9","text":"<p>\u6b8b\u5ff5\u306a\u304c\u3089\u3001Drush 9\u3067\u306f Drush 8\u306e\u3088\u3046\u306a\u52d5\u7684\u30b5\u30a4\u30c8\u30a8\u30a4\u30ea\u30a2\u30b9\u306e\u6ce8\u5165\u6a5f\u80fd\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002Drush\u30c1\u30fc\u30e0\u3068\u5354\u529b\u3057\u3066\u3001\u3053\u306e\u6a5f\u80fd\u3092\u518d\u3073\u5b9f\u88c5\u3067\u304d\u308b\u3088\u3046\u306b\u53d6\u308a\u7d44\u3093\u3067\u3044\u307e\u3059\u3002\u5f53\u9762\u306e\u9593\u3001Drush 9\u3092Lagoon\u3068\u4e00\u7dd2\u306b\u4f7f\u7528\u3059\u308b\u969b\u306e\u56de\u907f\u7b56\u3092\u3054\u7d39\u4ecb\u3057\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/drush-9/#_2","title":"\u57fa\u672c\u7684\u306a\u8003\u3048\u65b9","text":"<p>Drush 9\u306f\u65b0\u3057\u3044\u30b3\u30de\u30f3\u30c9<code>drush site:alias-convert</code>\u3092\u63d0\u4f9b\u3057\u3066\u304a\u308a\u3001Drush 8 \u5f62\u5f0f\u306e\u30b5\u30a4\u30c8\u30a8\u30a4\u30ea\u30a2\u30b9\u3092 Drush 9\u306eYAML\u5f62\u5f0f\u306e\u30b5\u30a4\u30c8\u30a8\u30a4\u30ea\u30a2\u30b9\u306b\u5909\u63db\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u30b3\u30de\u30f3\u30c9\u306f\u3001Lagoon\u306b\u73fe\u5728\u5b58\u5728\u3059\u308b\u30b5\u30a4\u30c8\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u4e00\u5ea6\u3060\u3051\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3057\u3001\u305d\u308c\u3089\u3092<code>/app/drush/sites</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4fdd\u5b58\u3057\u307e\u3059\u3002\u305d\u306e\u5f8c\u3001\u3053\u308c\u3089\u306e\u30a8\u30a4\u30ea\u30a2\u30b9\u306f <code>drush sa</code>\u306e\u3088\u3046\u306a\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u969b\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/drush-9/#_3","title":"\u6e96\u5099","text":"<p><code>drush site:alias-convert</code>\u3092\u4f7f\u7528\u3059\u308b\u524d\u306b\u3001\u4ee5\u4e0b\u306e\u624b\u9806\u3092\u884c\u3046\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059:</p> <ul> <li><code>drush</code>\u30d5\u30a9\u30eb\u30c0\u5185\u306e<code>aliases.drushrc.php</code>\u3092<code>lagoon.aliases.drushrc.php</code>\u306b\u30ea\u30cd\u30fc\u30e0\u3057\u307e\u3059\u3002</li> </ul>"},{"location":"ja/applications/drupal/drush-9/#_4","title":"\u30b5\u30a4\u30c8\u30a8\u30a4\u30ea\u30a2\u30b9\u306e\u751f\u6210","text":"<p><code>cli</code>\u30b3\u30f3\u30c6\u30ca\u3092\u4f7f\u7528\u3057\u3066\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5185\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001Drush\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u5909\u63db\u3067\u304d\u307e\u3059:</p> <p>\u30b5\u30a4\u30c8\u30a8\u30a4\u30ea\u30a2\u30b9\u306e\u751f\u6210<pre><code>docker-compose exec cli drush site:alias-convert /app/drush/sites --yes\n</code></pre> \u751f\u6210\u3055\u308c\u305fYAML\u30d5\u30a1\u30a4\u30eb\u306fGit\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u30b3\u30df\u30c3\u30c8\u3059\u308b\u306e\u304c\u826f\u3044\u7fd2\u6163\u3067\u3059\u3002\u305d\u3046\u3059\u308b\u3053\u3068\u3067\u3001\u4ed6\u306e\u958b\u767a\u8005\u3082\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/drush-9/#_5","title":"\u30b5\u30a4\u30c8\u30a8\u30a4\u30ea\u30a2\u30b9\u306e\u4f7f\u7528","text":"<p>Drush 9\u3067\u306f\u3001\u3059\u3079\u3066\u306e\u30b5\u30a4\u30c8\u30a8\u30a4\u30ea\u30a2\u30b9\u306f\u30b0\u30eb\u30fc\u30d7\u540d\u3067\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u304c\u4ed8\u3051\u3089\u308c\u3066\u3044\u307e\u3059\u3002\u4eca\u56de\u3067\u3042\u308c\u3070\u3001\u305d\u306e\u30b0\u30eb\u30fc\u30d7\u540d\u306flagoon\u3067\u3059\u3002\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3001\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u4ed8\u304d\u306e\u3059\u3079\u3066\u306e\u30b5\u30a4\u30c8\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002</p> \u3059\u3079\u3066\u306e\u30b5\u30a4\u30c8\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u8868\u793a<pre><code>drush sa --format=list\n</code></pre> <p>\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u5229\u7528\u3059\u308b\u306b\u306f\u3001\u6b21\u306e\u3088\u3046\u306b\u3057\u307e\u3059:</p> Drush \u30b5\u30a4\u30c8\u30a8\u30a4\u30ea\u30a2\u30b9\u306e\u4f7f\u7528<pre><code>drush @lagoon.main ssh\n</code></pre>"},{"location":"ja/applications/drupal/drush-9/#_6","title":"\u30b5\u30a4\u30c8\u30a8\u30a4\u30ea\u30a2\u30b9\u306e\u66f4\u65b0","text":"<p>Lagoon\u3067\u65b0\u3057\u3044\u74b0\u5883\u304c\u4f5c\u6210\u3055\u308c\u305f\u5834\u5408\u3001<code>drush site:alias-convert</code>\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3001\u30b5\u30a4\u30c8\u30a8\u30a4\u30ea\u30a2\u30b9\u30d5\u30a1\u30a4\u30eb (.yml) \u3092\u66f4\u65b0\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u30b3\u30de\u30f3\u30c9\u3067<code>lagoon.site.yml</code>\u304c\u66f4\u65b0\u3055\u308c\u306a\u3044\u5834\u5408\u306f\u3001\u6700\u521d\u306b<code>lagoon.site.yml</code>\u3092\u524a\u9664\u3057\u3066\u304b\u3089\u3001\u3082\u3046\u4e00\u5ea6<code>drush site:alias-convert</code>\u3092\u5b9f\u884c\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/applications/drupal/drush-9/#drush-rsync","title":"\u30ed\u30fc\u30ab\u30eb\u304b\u3089\u30ea\u30e2\u30fc\u30c8\u74b0\u5883\u3078\u306eDrush <code>rsync</code>","text":"<p>\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u304b\u3089\u30ea\u30e2\u30fc\u30c8\u74b0\u5883\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u540c\u671f\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u8ffd\u52a0\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6e21\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059:</p> Drush rsync<pre><code>drush rsync @self:%files @lagoon.main:%files -- --omit-dir-times --no-perms --no-group --no-owner --chmod=ugo=rwX\n</code></pre> <p>\u3053\u308c\u306f\u3001Lagoon\u306e\u30bf\u30b9\u30afUI\u3092\u4f7f\u7528\u305b\u305a\u306b\u3001\u30ea\u30e2\u30fc\u30c8\u74b0\u5883\u9593\u3067\u30d5\u30a1\u30a4\u30eb\u3092\u540c\u671f\u3059\u308b\u5834\u5408\u306b\u3082\u5f53\u3066\u306f\u307e\u308a\u307e\u3059\u3002</p> <p>\u305f\u3068\u3048\u3070\u3001<code>@lagoon.main</code>\u304b\u3089<code>@lagoon.dev</code>\u3078\u30d5\u30a1\u30a4\u30eb\u3092\u540c\u671f\u3057\u305f\u3044\u5834\u5408\u3001\u4e0a\u8a18\u306e\u8ffd\u52a0\u30d1\u30e9\u30e1\u30fc\u30bf\u306a\u3057\u3067\u30ed\u30fc\u30ab\u30eb\u3067<code>drush rsync @lagoon.main @lagoon.dev</code>\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\"Cannot specify two remote aliases\" (2 \u3064\u306e\u30ea\u30e2\u30fc\u30c8\u30a8\u30a4\u30ea\u30a2\u30b9\u306f\u6307\u5b9a\u3067\u304d\u307e\u305b\u3093) \u3068\u3044\u3046\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>\u3053\u308c\u3092\u89e3\u6c7a\u3059\u308b\u306b\u306f\u3001\u307e\u305a\u5b9b\u5148\u306e\u74b0\u5883\u306bSSH\u3067\u63a5\u7d9a <code>drush @lagoon.dev ssh</code>\u3057\u3001\u4e0a\u8a18\u3068\u540c\u69d8\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4f7f\u7528\u3057\u3066 <code>rsync</code>\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> Drush rsync<pre><code>drush rsync @lagoon.main:%files  @self:%files -- --omit-dir-times --no-perms --no-group --no-owner --chmod=ugo=rwX\n</code></pre> <p>\u4e0a\u8a18\u306e\u5185\u5bb9\u306f\u3001\u30ea\u30e2\u30fc\u30c8\u74b0\u5883\u304b\u3089\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u3078 <code>rsync</code>\u3092\u4f7f\u3063\u3066\u540c\u671f\u3059\u308b\u5834\u5408\u306b\u306f\u5fc5\u8981\u3042\u308a\u307e\u305b\u3093\u3002</p> <p>\u307e\u305f\u3001\u79c1\u305f\u3061\u306fDrush\u306e\u30e1\u30f3\u30c6\u30ca\u3068\u5354\u529b\u3057\u3066\u3001\u3053\u308c\u3092\u81ea\u52d5\u7684\u306b\u6ce8\u5165\u3059\u308b\u65b9\u6cd5\u3092\u6a21\u7d22\u3057\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/first-deployment-of-drupal/","title":"Drupal\u306e\u521d\u56de\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8","text":""},{"location":"ja/applications/drupal/first-deployment-of-drupal/#1-make-sure-you-are-all-set","title":"1. \u6e96\u5099\u3092\u6574\u3048\u307e\u3057\u3087\u3046","text":"<p>\u521d\u56de\u306e\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u3092\u6210\u529f\u3055\u305b\u308b\u305f\u3081\u306b\u306f\u3001Drupal\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304cLagoon\u5316\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3068\u3001Lagoon\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u305d\u3046\u3067\u306a\u3044\u5834\u5408\u3067\u3082\u5fc3\u914d\u306f\u3044\u308a\u307e\u305b\u3093\uff01\u30b9\u30c6\u30c3\u30d7\u30d0\u30a4\u30b9\u30c6\u30c3\u30d7\u30ac\u30a4\u30c9\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/applications/drupal/first-deployment-of-drupal/#2-push","title":"2. \u30d7\u30c3\u30b7\u30e5","text":"<p>Lagoon \u3092\u5229\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u30c7\u30d7\u30ed\u30a4\u7528\u306b\u8a2d\u5b9a\u3055\u308c\u305f\u30d6\u30e9\u30f3\u30c1\u306b push \u3059\u308b\u3053\u3068\u3067\u65b0\u3057\u3044\u30c7\u30d7\u30ed\u30a4\u3092\u4f5c\u6210\u3067\u304d\u307e\u3059\u3002</p> <p>\u65b0\u3057\u3044\u30b3\u30fc\u30c9\u3092push\u3059\u308b\u5fc5\u8981\u304c\u306a\u3044\u5834\u5408\u3067\u3082\u5fc3\u914d\u306f\u3044\u308a\u307e\u305b\u3093\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002</p> Git\u306bpush<pre><code>git commit --allow-empty -m \"go, go! Power Rangers!\"\ngit push\n</code></pre> <p>\u30d7\u30c3\u30b7\u30e5\u304c\u5b9f\u884c\u3055\u308c\u308b\u3068\u3001Git\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u304c\u8a2d\u5b9a\u6e08\u307f\u306eWebhook\u3092\u4ecb\u3057\u3066Lagoon\u306b\u901a\u77e5\u3057\u307e\u3059\u3002</p> <p>\u3059\u3079\u3066\u6b63\u5e38\u3067\u3042\u308c\u3070\u3001\u8a2d\u5b9a\u6e08\u307f\u306e\u30c1\u30e3\u30c3\u30c8\u30b7\u30b9\u30c6\u30e0\u306b\u901a\u77e5\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002(\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u306fLagoon\u7ba1\u7406\u8005\u306b\u554f\u3044\u5408\u308f\u305b\u3066\u304f\u3060\u3055\u3044):</p> <p></p> <p>\u3053\u306e\u901a\u77e5\u306f\u3001Lagoon\u304c\u30b3\u30fc\u30c9\u306e\u30c7\u30d7\u30ed\u30a4\u3092\u958b\u59cb\u3057\u305f\u3053\u3068\u3092\u793a\u3057\u3066\u3044\u307e\u3059\u3002\u30c7\u30d7\u30ed\u30a4\u6642\u9593\u306f\u3001\u30b3\u30fc\u30c9\u30d9\u30fc\u30b9\u306e\u30b5\u30a4\u30ba\u3068\u30b3\u30f3\u30c6\u30ca\u306e\u6570\u306b\u3088\u3063\u3066\u6570\u79d2\u304b\u304b\u308a\u307e\u3059\u3002\u3057\u3070\u3089\u304f\u304a\u5f85\u3061\u304f\u3060\u3055\u3044\u3002\u73fe\u5728\u306e\u72b6\u6cc1\u3092\u78ba\u8a8d\u3057\u305f\u3044\u5834\u5408\u306f\u3001Lagoon\u306e\u30d3\u30eb\u30c9\u3068\u30c7\u30d7\u30ed\u30a4\u30d7\u30ed\u30bb\u30b9\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u30c7\u30d7\u30ed\u30a4\u306e\u9032\u884c\u72b6\u6cc1\u306f\u3001LagoonUI\u3067\u3082\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002(URL\u304c\u308f\u304b\u3089\u306a\u3044\u5834\u5408\u306f\u3001Lagoon\u7ba1\u7406\u8005\u306b\u554f\u3044\u5408\u308f\u305b\u3066\u304f\u3060\u3055\u3044)</p>"},{"location":"ja/applications/drupal/first-deployment-of-drupal/#3-a-fail","title":"3. \u5931\u6557","text":"<p><code>.lagoon.yml</code>\u30d5\u30a1\u30a4\u30eb\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u30c7\u30d7\u30ed\u30a4\u5f8c\u51e6\u7406\u30bf\u30b9\u30af\u306b\u3088\u3063\u3066\u306f\u3001<code>drush updb</code>\u3084<code>drush cr</code>\u306a\u3069\u306e\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3089\u306eDrush\u30bf\u30b9\u30af\u306f\u3001\u74b0\u5883\u5185\u306b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304c\u5b58\u5728\u3059\u308b\u3053\u3068\u3092\u524d\u63d0\u3068\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u30c7\u30d7\u30ed\u30a4\u76f4\u5f8c\u3067\u306f\u5f53\u7136\u306a\u304c\u3089\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306f\u5b58\u5728\u3057\u307e\u305b\u3093\u3002\u3053\u306e\u554f\u984c\u3092\u89e3\u6c7a\u3059\u308b\u65b9\u6cd5\u3092\u6b21\u306b\u8aac\u660e\u3057\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/first-deployment-of-drupal/#4-synchronize-local-database-to-the-remote-lagoon-environment","title":"4. \u30ed\u30fc\u30ab\u30eb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u30ea\u30e2\u30fc\u30c8\u306eLagoon\u74b0\u5883\u306b\u540c\u671f","text":"<p>Lagoon\u306f\u5b8c\u5168\u306aDrush\u30b5\u30a4\u30c8\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u304a\u308a\u3001\u30ed\u30fc\u30ab\u30eb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3068\u30ea\u30e2\u30fc\u30c8\u306eLagoon\u74b0\u5883\u3092\u540c\u671f\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p>\u8b66\u544a</p> <p>\u6b21\u306e\u30b9\u30c6\u30c3\u30d7\u306e\u524d\u306b\u3001pygmy\u306b\u516c\u958b\u30ad\u30fc\u3092\u767b\u9332\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002</p> <p><code>Permission denied (publickey)</code>\u306a\u3069\u306e\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u5834\u5408\u3001\u3053\u3061\u3089\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044:pygmy - ssh\u30ad\u30fc\u306e\u8ffd\u52a0</p> <p>\u307e\u305a\u306f\u3001Drush \u30b5\u30a4\u30c8\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046:</p> \u30b5\u30a4\u30c8\u30a8\u30a4\u30ea\u30a2\u30b9\u306e\u53d6\u5f97<pre><code>drush sa\n</code></pre> <p>\u3053\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u73fe\u5728\u30c7\u30d7\u30ed\u30a4\u6e08\u307f\u306e\u74b0\u5883\u304c\u53d6\u5f97\u3055\u308c\u307e\u3059\uff08\u6700\u65b0\u306e\u72b6\u614b\u306f\u3001<code>develop</code>\u30d6\u30e9\u30f3\u30c1\u306b\u30d7\u30c3\u30b7\u30e5\u3057\u305f\u6642\u70b9\u306e\u3082\u306e\u3068\u4eee\u5b9a\u3057\u307e\u3059\uff09:</p> \u8fd4\u3055\u308c\u305f\u30b5\u30a4\u30c8\u30a8\u30a4\u30ea\u30a2\u30b9<pre><code>[drupal-example]cli-drupal:/app$ drush sa\n@develop\n@self\ndefault\n</code></pre> <p>\u3053\u308c\u306b\u3088\u308a\u3001\u30ed\u30fc\u30ab\u30eb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9(Drush\u3067\u306f\u30b5\u30a4\u30c8\u30a8\u30a4\u30ea\u30a2\u30b9<code>@self</code>\u3067\u8868\u3055\u308c\u307e\u3059)\u3068\u30ea\u30e2\u30fc\u30c8\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9(<code>@develop</code>)\u3092\u540c\u671f\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> Drush sql-sync<pre><code>drush sql-sync @self @develop\n</code></pre> <p>\u6b21\u306e\u3088\u3046\u306a\u7d50\u679c\u304c\u8868\u793a\u3055\u308c\u308b\u306f\u305a\u3067\u3059:</p> Drush sql-sync\u306e\u7d50\u679c<pre><code>[drupal-example]cli-drupal:/app$ drush sql-sync @self @develop\nYou will destroy data in ssh.example.com/drupal and replace with data from drupal.\nDo you really want to continue? (y/n): y\nStarting to dump database on Source.                                                                              [ok]\nDatabase dump saved to /home/drush-backups/drupal/20180227075813/drupal_20180227_075815.sql.gz               [success]\nStarting to discover temporary files directory on Destination.                                                    [ok]\nYou will delete files in drupal-example-develop@ssh.example.com:/tmp/drupal_20180227_075815.sql.gz and replace with data from /home/drush-backups/drupal/20180227075813/drupal_20180227_075815.sql.gz\nDo you really want to continue? (y/n): y\nCopying dump file from Source to Destination.                                                                     [ok]\nStarting to import dump file onto Destination database.\n</code></pre> <p>\u3055\u3066\u3001\u518d\u5ea6\u30c7\u30d7\u30ed\u30a4\u3092\u8a66\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u4eca\u5ea6\u306f\u7a7a\u306e\u30d7\u30c3\u30b7\u30e5\u3067\u3059:</p> Git push<pre><code>git commit --allow-empty -m \"\u884c\u3051\u3001\u884c\u3051\uff01 \u30d1\u30ef\u30fc\u30ec\u30f3\u30b8\u30e3\u30fc\uff01\"\ngit push\n</code></pre> <p>\u4eca\u5ea6\u306f\u3059\u3079\u3066\u6b63\u5e38\u306b\u52d5\u4f5c\u3059\u308b\u306f\u305a\u3067\u3059:</p> <p></p> <p>\u901a\u77e5\u5185\u306e\u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001Drupal\u30b5\u30a4\u30c8\u304c\u3059\u3079\u3066\u306e\u6a5f\u80fd\u3092\u5099\u3048\u3066\u30ed\u30fc\u30c9\u3055\u308c\u305f\u72b6\u614b\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u304a\u305d\u3089\u304f\u307e\u3060\u753b\u50cf\u306f\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u304c\u3001\u305d\u308c\u306f\u30b9\u30c6\u30c3\u30d75\u3067\u51e6\u7406\u3057\u307e\u3059\u3002</p> <p>\u30c7\u30d7\u30ed\u30a4\u304c\u4f9d\u7136\u3068\u3057\u3066\u5931\u6557\u3059\u308b\u5834\u5408\u306f\u3001\u8a73\u7d30\u60c5\u5831\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306b\u30ed\u30b0\u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/applications/drupal/first-deployment-of-drupal/#5-synchronize-local-files-to-the-remote-lagoon-environment","title":"5. \u30ed\u30fc\u30ab\u30eb\u30d5\u30a1\u30a4\u30eb\u3092\u30ea\u30e2\u30fc\u30c8\u306eLagoon\u74b0\u5883\u306b\u540c\u671f","text":"<p>\u304a\u305d\u3089\u304f\u4e88\u60f3\u901a\u308a\u3067\u3059\u304c\u3001Drush\u3092\u4f7f\u3063\u3066\u540c\u671f\u3067\u304d\u307e\u3059:</p> Drush rsync<pre><code>drush rsync @self:%files @develop:%files\n</code></pre> <p>\u6b21\u306e\u3088\u3046\u306a\u8868\u793a\u304c\u51fa\u308b\u306f\u305a\u3067\u3059:</p> Drush rsync results<pre><code>[drupal-example]cli-drupal:/app$ drush rsync @self:%files @develop:%files\nYou will delete files in drupal-example-develop@ssh.example.com:/app/web/sites/default/files and replace with data from /app/web/sites/default/files/\nDo you really want to continue? (y/n): y\n</code></pre> <p>\u3057\u304b\u3057\u3001\u5834\u5408\u306b\u3088\u3063\u3066\u306f\u3001\u3053\u306e\u3088\u3046\u306b\u6b63\u3057\u304f\u8868\u793a\u3055\u308c\u306a\u3044\u3053\u3068\u3082\u3042\u308b\uff1a</p> Drush rsync results<pre><code>[drupal-example]cli-drupal:/app$ drush rsync @self:%files @develop:%files\nYou will delete files in drupal-example-develop@ssh.example.com:'/app/web/%files' and replace with data from '/app/web/%files'/\nDo you really want to continue? (y/n):\n</code></pre> <p>\u3053\u306e\u7406\u7531\u306f\u3001Drupal\u304c\u30d5\u30a1\u30a4\u30eb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u30d1\u30b9\u3092\u89e3\u6c7a\u3067\u304d\u306a\u3044\u305f\u3081\u3067\u3059\u3002\u3053\u308c\u306f\u304a\u305d\u3089\u304f\u3001Drupal\u304c\u5b8c\u5168\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u304b\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304c\u5b58\u5728\u3057\u306a\u3044\u3053\u3068\u304c\u539f\u56e0\u3067\u3059\u3002\u56de\u907f\u7b56\u3068\u3057\u3066\u306f<code>drush rsync @self:sites/default/files @develop:sites/default/files</code>\u3092\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u5b9f\u969b\u306b\u306f\u30ed\u30fc\u30ab\u30eb\u3068\u30ea\u30e2\u30fc\u30c8\u306e Drupal \u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059 (<code>drush status</code>\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u3001\u30d5\u30a1\u30a4\u30eb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u6b63\u3057\u304f\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059)</p>"},{"location":"ja/applications/drupal/first-deployment-of-drupal/#6-its-done","title":"6. \u5b8c\u4e86","text":"<p>Lagoon\u304c\u30d3\u30eb\u30c9\u3068\u30c7\u30d7\u30ed\u30a4\u3092\u5b8c\u4e86\u3059\u308b\u3068\u3001\u30c1\u30e3\u30c3\u30c8\u30b7\u30b9\u30c6\u30e0\u306b\u6b21\u306e\u3088\u3046\u306a2\u56de\u76ee\u306e\u901a\u77e5\u304c\u9001\u4fe1\u3055\u308c\u307e\u3059\u3002:</p> <p></p> <p>\u901a\u77e5\u306f\u6b21\u306e\u3088\u3046\u306a\u5185\u5bb9\u3092\u793a\u3057\u3066\u3044\u307e\u3059:</p> <ul> <li>\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8</li> <li>\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u305f\u30d6\u30e9\u30f3\u30c1\u3068Git SHA</li> <li>\u30d3\u30eb\u30c9\u3068\u30c7\u30d7\u30ed\u30a4\u306e\u30ed\u30b0\u3078\u306e\u30ea\u30f3\u30af</li> <li>\u74b0\u5883\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3059\u3079\u3066\u306e\u30eb\u30fc\u30c8(URL)\u3078\u306e\u30ea\u30f3\u30af</li> </ul> <p>\u3053\u308c\u3067\u4f5c\u696d\u306f\u5b8c\u4e86\u3067\u3059! DevOps\u3092\u7c21\u5358\u306b\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3053\u3068\u304c\u79c1\u305f\u3061\u306e\u76ee\u6a19\u3067\u3059\u3002</p>"},{"location":"ja/applications/drupal/first-deployment-of-drupal/#but-wait-how-about-other-branches-or-the-production-environment","title":"\u3057\u304b\u3057\u3001\u4ed6\u306e\u30d6\u30e9\u30f3\u30c1\u3084\u672c\u756a\u74b0\u5883\u306f\u3069\u3046\u306a\u308b\u306e\u3067\u3057\u3087\u3046\u304b\uff1f","text":"<p>Lagoon\u306e\u512a\u308c\u305f\u70b9\u306f\u3001\u307e\u3063\u305f\u304f\u540c\u3058\u65b9\u6cd5\u3067\u51e6\u7406\u3067\u304d\u308b\u3053\u3068\u3067\u3059\u3002\u672c\u756a\u74b0\u5883\u30d6\u30e9\u30f3\u30c1\u3068\u3057\u3066\u5b9a\u7fa9\u3057\u305f\u30d6\u30e9\u30f3\u30c1\u540d\u3092\u30d7\u30c3\u30b7\u30e5\u3059\u308b\u3068\u3001\u305d\u306e\u30d6\u30e9\u30f3\u30c1\u304c\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/first-deployment-of-drupal/#failure-dont-worry","title":"\u30c7\u30d7\u30ed\u30a4\u306e\u5931\u6557","text":"<p>\u30c7\u30d7\u30ed\u30a4\u304c\u5931\u6557\u3057\u307e\u3057\u305f\u304b\uff1f \u5fc3\u914d\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002\u30d8\u30eb\u30d7\u3092\u7528\u610f\u3057\u3066\u3044\u307e\u3059:</p> <ol> <li>\u30a8\u30e9\u30fc\u901a\u77e5\u5185\u306e <code>logs</code> \u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\u30c7\u30d7\u30ed\u30a4\u30d7\u30ed\u30bb\u30b9\u3067\u3069\u3053\u3067\u5931\u6557\u3057\u305f\u304b\u304c\u308f\u304b\u308a\u307e\u3059\u3002</li> <li>\u554f\u984c\u304c\u89e3\u6c7a\u3067\u304d\u306a\u3044\u5834\u5408\u306f\u3001Lagoon\u7ba1\u7406\u8005\u306b\u9023\u7d61\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u30b5\u30dd\u30fc\u30c8\u3044\u305f\u3057\u307e\u3059!</li> </ol>"},{"location":"ja/applications/drupal/integrate-drupal-and-fastly/","title":"Drupal\u3068Fastly\u306e\u7d71\u5408","text":""},{"location":"ja/applications/drupal/integrate-drupal-and-fastly/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li>Drupal 7\u4ee5\u964d</li> <li>Fastly\u30b5\u30fc\u30d3\u30b9ID</li> <li>\u30d1\u30fc\u30b8\u6a29\u9650\u3092\u6301\u3064Fastly API\u30c8\u30fc\u30af\u30f3</li> </ul>"},{"location":"ja/applications/drupal/integrate-drupal-and-fastly/#drupal-7url","title":"Drupal 7\u3067\u306eURL\u30d9\u30fc\u30b9\u306e\u30d1\u30fc\u30b8","text":"<ol> <li>Fastly Drupal\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002</li> <li>Fastly\u30b5\u30fc\u30d3\u30b9ID\u3068API\u30c8\u30fc\u30af\u30f3\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002</li> <li>\u5fc5\u8981\u306b\u5fdc\u3058\u3066Webhooks\u3092\u8a2d\u5b9a\u3057\u307e\u3059(\u4f8b\u3048\u3070\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u30d1\u30fc\u30b8\u304c\u9001\u4fe1\u3055\u308c\u305f\u3068\u304d\u306bSlack\u306b\u901a\u77e5\u3059\u308b\u306a\u3069)\u3002</li> <li>Drupal 7\u3067\u306fURL\u30d9\u30fc\u30b9\u306e\u30d1\u30fc\u30b8(\u7c21\u6613\u30d1\u30fc\u30b8)\u306e\u307f\u304c\u53ef\u80fd\u3067\u3059\u3002</li> <li><code>settings.php</code>\u3067Drupal\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8IP\u3092\u5909\u66f4\u3057\u307e\u3059:</li> </ol> Drupal 7\u306e\u305f\u3081\u306esettings.php\u306e\u5909\u66f4<pre><code>$conf['reverse_proxy_header'] = 'HTTP_TRUE_CLIENT_IP';\n</code></pre>"},{"location":"ja/applications/drupal/integrate-drupal-and-fastly/#drupal-10","title":"Drupal 10\u4ee5\u964d\u3067\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u30bf\u30b0\u30d1\u30fc\u30b8","text":"<p>Composer\u3092\u4f7f\u3063\u3066\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u53d6\u5f97\u3057\u307e\u3059:</p> Fastly Drupal\u30e2\u30b8\u30e5\u30fc\u30eb\u3068\u4f9d\u5b58\u95a2\u4fc2\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9<pre><code>composer require drupal/fastly drupal/http_cache_control drupal/purge\n</code></pre> <p>\u6b21\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u6709\u52b9\u5316\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059:</p> <ul> <li><code>fastly</code></li> <li><code>fastlypurger</code></li> <li><code>http_cache_control</code> (2.x)</li> <li><code>purge</code></li> <li><code>purge_ui</code> (\u6280\u8853\u7684\u306b\u306f\u5fc5\u9808\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u672c\u756a\u74b0\u5883\u3067\u6709\u52b9\u306b\u3059\u308b\u3068\u975e\u5e38\u306b\u4fbf\u5229\u3067\u3059)</li> <li><code>purge_processor_lateruntime</code></li> <li><code>purge_processor_cron</code></li> <li><code>purge_queuer_coretags</code></li> <li><code>purge_drush</code> (Drush\u3092\u4f7f\u3063\u305f\u30d1\u30fc\u30b8\u306b\u4fbf\u5229\u3067\u3059\u3002\u3053\u3061\u3089\u306b\u30b3\u30de\u30f3\u30c9\u306e\u30ea\u30b9\u30c8\u304c\u3042\u308a\u307e\u3059)</li> </ul>"},{"location":"ja/applications/drupal/integrate-drupal-and-fastly/#drupalfastly_1","title":"Drupal\u3067Fastly\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u8a2d\u5b9a\u3057\u307e\u3059","text":"<p>Fastly\u30b5\u30fc\u30d3\u30b9ID\u3068API\u30c8\u30fc\u30af\u30f3\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u30b5\u30a4\u30c8ID\u306f\u81ea\u52d5\u7684\u306b\u751f\u6210\u3055\u308c\u307e\u3059\u3002\u5b9f\u884c\u6642\u74b0\u5883\u5909\u6570\u3092\u5229\u7528\u3059\u308b\u304b\u3001<code>/admin/config/services/fastly</code>\u306b\u3042\u308b\u8a2d\u5b9a\u30d5\u30a9\u30fc\u30e0\u3092\u7de8\u96c6\u3067\u304d\u307e\u3059:</p> <ul> <li><code>FASTLY_API_TOKEN</code></li> <li><code>FASTLY_API_SERVICE</code></li> </ul>"},{"location":"ja/applications/drupal/integrate-drupal-and-fastly/#_2","title":"\u30d1\u30fc\u30b8\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a","text":"<ul> <li>\u30ad\u30e3\u30c3\u30b7\u30e5\u30bf\u30b0\u30cf\u30c3\u30b7\u30e5\u9577: 4\u6587\u5b57</li> <li>\u30d1\u30fc\u30b8\u65b9\u5f0f: \u30bd\u30d5\u30c8\u30d1\u30fc\u30b8\u3092\u4f7f\u7528</li> </ul> <p>\u307b\u3068\u3093\u3069\u306e\u30b5\u30a4\u30c8\u3067\u306f<code>4</code>\u6587\u5b57\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u30bf\u30b0\u3067\u5341\u5206\u3067\u3059\u304c\u3001\u6570\u767e\u4e07\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u6301\u3064\u30b5\u30a4\u30c8\u3067\u306f\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u30bf\u30b0\u306e\u885d\u7a81\u3092\u6e1b\u3089\u3059\u305f\u3081\u306b<code>5</code>\u6587\u5b57\u306e\u65b9\u304c\u826f\u3044\u3067\u3057\u3087\u3046\u3002</p> <p>\u6ce8\u610f:</p> <p>\u30bd\u30d5\u30c8\u30d1\u30fc\u30b8\u3092\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002Fastly\u5185\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u53e4\u304f\u306a\u3063\u305f\u3068\u30de\u30fc\u30af\u3055\u308c\u3001\u5b8c\u5168\u306b\u524a\u9664\u3055\u308c\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u306e\u3067\u3001\u30aa\u30ea\u30b8\u30f3\u304c\u30c0\u30a6\u30f3\u3057\u3066\u3044\u308b\u5834\u5408\u306b\u3082\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059(\u53e4\u304f\u306a\u3063\u305f\u3082\u306e\u3092\u63d0\u4f9b\u3059\u308b\u6a5f\u80fd\u3092\u4f7f\u7528\u3057\u305f\u5834\u5408)</p> <p></p>"},{"location":"ja/applications/drupal/integrate-drupal-and-fastly/#_3","title":"\u53e4\u3044\u30b3\u30f3\u30c6\u30f3\u30c4\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a","text":"<p>\u30b5\u30a4\u30c8\u306b\u9069\u3057\u305f\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u6700\u5c0f1\u6642\u9593(<code>3600</code>)\u3001\u6700\u59271\u9031\u9593(<code>604800</code>)\u3067\u3059\u3002\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u8a2d\u5b9a\u304c\u4e00\u822c\u7684\u3067\u3059:</p> <ol> <li>\u518d\u691c\u8a3c\u6642\u306b\u30b9\u30c6\u30fc\u30eb - \u30aa\u30f3\u3001<code>14440</code>\u79d2</li> <li>\u30a8\u30e9\u30fc\u6642\u306b\u30b9\u30c6\u30fc\u30eb - \u30aa\u30f3\u3001<code>604800</code>\u79d2</li> </ol> <p></p> <p>\u5fc5\u8981\u306b\u5fdc\u3058\u3066Webhook\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059(\u305f\u3068\u3048\u3070\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u30d1\u30fc\u30b8\u304c\u9001\u4fe1\u3055\u308c\u305f\u3068\u304d\u306bSlack\u306b\u901a\u77e5\u3092\u9001\u308b\u306a\u3069)</p> <p></p>"},{"location":"ja/applications/drupal/integrate-drupal-and-fastly/#purge","title":"Purge\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u8a2d\u5b9a","text":"<p>\u30d1\u30fc\u30b8\u30da\u30fc\u30b8<code>/admin/config/development/performance/purge</code>\u306b\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\u3002</p> <p>\u4ee5\u4e0b\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3057\u307e\u3059:</p>"},{"location":"ja/applications/drupal/integrate-drupal-and-fastly/#_4","title":"\u30ad\u30e3\u30c3\u30b7\u30e5\u7121\u52b9\u5316","text":"<ul> <li>Drupal Origin: \u30bf\u30b0</li> <li>Fastly: E\u3001\u30bf\u30b0\u3001URL</li> </ul>"},{"location":"ja/applications/drupal/integrate-drupal-and-fastly/#_5","title":"\u30ad\u30e5\u30fc","text":"<ul> <li>\u30ad\u30e5\u30fc\u30ef\u30fc:\u30b3\u30a2\u30bf\u30b0\u30ad\u30e5\u30fc\u30ef\u30fc\u3001\u30d1\u30fc\u30b8\u30d6\u30ed\u30c3\u30af(\u8907\u6570\u53ef)</li> <li>\u30ad\u30e5\u30fc:\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9</li> <li>\u30d7\u30ed\u30bb\u30c3\u30b5:\u30b3\u30a2\u30d7\u30ed\u30bb\u30c3\u30b5\u3001\u30ec\u30a4\u30c8\u30e9\u30f3\u30bf\u30a4\u30e0\u30d7\u30ed\u30bb\u30c3\u30b5\u3001\u30d1\u30fc\u30b8\u30d6\u30ed\u30c3\u30af(\u8907\u6570\u53ef)</li> </ul> <p>\u3053\u308c\u306f\u3001Drupal\u306e\u7d44\u307f\u8fbc\u307f\u306e\u30b3\u30a2\u30bf\u30b0\u30ad\u30e5\u30fc\u30ef\u30fc\u3092\u4f7f\u7528\u3057\u3066\u30ad\u30e5\u30fc\u306b\u30bf\u30b0\u3092\u8ffd\u52a0\u3057\u3001\u30ad\u30e5\u30fc\u306f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u4fdd\u5b58\u3055\u308c (\u30c7\u30d5\u30a9\u30eb\u30c8)\u3001\u4ee5\u4e0b\u306e\u30d7\u30ed\u30bb\u30c3\u30b5\u306b\u3088\u3063\u3066\u51e6\u7406\u3055\u308c\u308b\u3053\u3068\u3092\u610f\u5473\u3057\u307e\u3059\u3002</p> <ul> <li>Cron\u30d7\u30ed\u30bb\u30c3\u30b5</li> <li>\u30ec\u30a4\u30c8\u30e9\u30f3\u30bf\u30a4\u30e0\u30d7\u30ed\u30bb\u30c3\u30b5</li> </ul> <p>cron\u30d7\u30ed\u30bb\u30c3\u30b5\u3092\u5b9f\u884c\u3059\u308b\u306b\u306f\u3001\u30b5\u30a4\u30c8\u3067cron\u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059 (\u7406\u60f3\u7684\u306b\u306f1\u5206\u3054\u3068)\u3002<code>cli</code>\u30dd\u30c3\u30c9\u3067cron\u3092\u624b\u52d5\u5b9f\u884c\u3057\u3066\u3001<code>purge_processor_cron_cron()</code>\u304c\u30a8\u30e9\u30fc\u306a\u304f\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> cron\u306e\u958b\u59cb<pre><code>[drupal8]production@cli-drupal:/app$ drush cron -v\n...\n[notice] purge_processor_cron_cron()\u306e\u5b9f\u884c\u3092\u958b\u59cb\u3001node_cron()\u306e\u5b9f\u884c\u306f21.16ms\u304b\u304b\u308a\u307e\u3057\u305f\u3002\n</code></pre> <p>\u30ec\u30a4\u30a2\u30a6\u30c8\u30d1\u30fc\u30b8\u306f\u3001\u30da\u30fc\u30b8\u30ed\u30fc\u30c9\u3054\u3068\u306bhook_exit()\u3067\u5b9f\u884c\u3055\u308c\u308b<code>Late runtime processor</code>\u306b\u3088\u3063\u3066\u51e6\u7406\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u30d1\u30fc\u30b8\u8981\u6c42\u304c\u30ad\u30e5\u30fc\u306b\u8ffd\u52a0\u3055\u308c\u308b\u3068\u307b\u307c\u540c\u6642\u306b\u51e6\u7406\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u3001\u975e\u5e38\u306b\u4fbf\u5229\u3067\u3059\u3002</p> <p>\u4e21\u65b9\u306e\u65b9\u5f0f\u3092\u4f75\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u30d1\u30fc\u30b8\u304c\u53ef\u80fd\u306a\u9650\u308a\u8fc5\u901f\u306b\u5b9f\u884c\u3055\u308c\u308b\u3053\u3068\u304c\u4fdd\u8a3c\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/integrate-drupal-and-fastly/#_6","title":"\u6700\u9069\u306a\u30ad\u30e3\u30c3\u30b7\u30e5\u30d8\u30c3\u30c0\u30fc\u8a2d\u5b9a","text":"<p>Drupal\u306f\u6a19\u6e96\u8a2d\u5b9a\u3067\u306f\u3001\u30d6\u30e9\u30a6\u30b6\u3068Fastly\u3067\u7570\u306a\u308b\u30ad\u30e3\u30c3\u30b7\u30e5\u6709\u52b9\u671f\u9650\u3092\u8a2d\u5b9a\u3059\u308b\u6a5f\u80fd\u304c\u3042\u308a\u307e\u305b\u3093\u3002\u305d\u306e\u305f\u3081\u3001Drupal\u3067\u9577\u3044\u30ad\u30e3\u30c3\u30b7\u30e5\u6709\u52b9\u671f\u9650\u3092\u8a2d\u5b9a\u3057\u3066\u3082\u3001\u30d6\u30e9\u30a6\u30b6\u304c\u65e2\u306b\u30da\u30fc\u30b8\u3092\u30ad\u30e3\u30c3\u30b7\u30e5\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u30e6\u30fc\u30b6\u30fc\u306f\u5909\u66f4\u3092\u78ba\u8a8d\u3067\u304d\u307e\u305b\u3093\u3002HTTP Cache Control\u30e2\u30b8\u30e5\u30fc\u30eb\u306e<code>2.x</code>\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u3001\u3055\u307e\u3056\u307e\u306a\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u5bfe\u3057\u3066\u3001\u3088\u308a\u8a73\u7d30\u306a\u6709\u52b9\u671f\u9650\u8a2d\u5b9a\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002</p> <p>\u307b\u3068\u3093\u3069\u306e\u30b5\u30a4\u30c8\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u8a2d\u5b9a\u304c\u59a5\u5f53\u306a\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306b\u306a\u308b\u3067\u3057\u3087\u3046\u3002</p> <ul> <li>\u5171\u6709\u30ad\u30e3\u30c3\u30b7\u30e5\u6700\u5927\u6709\u52b9\u671f\u9650: 1\u30f6\u6708</li> <li>\u30d6\u30e9\u30a6\u30b6\u30ad\u30e3\u30c3\u30b7\u30e5\u6700\u5927\u6709\u52b9\u671f\u9650: 10\u5206</li> <li>404 \u30a8\u30e9\u30fc\u30ad\u30e3\u30c3\u30b7\u30e5\u6700\u5927\u6709\u52b9\u671f\u9650: 15\u5206</li> <li>302 \u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u30ad\u30e3\u30c3\u30b7\u30e5\u6700\u5927\u6709\u52b9\u671f\u9650: 1\u6642\u9593</li> <li>301 \u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u30ad\u30e3\u30c3\u30b7\u30e5\u6700\u5927\u6709\u52b9\u671f\u9650: 1\u6642\u9593</li> <li>5xx \u30a8\u30e9\u30fc\u30ad\u30e3\u30c3\u30b7\u30e5\u6700\u5927\u6709\u52b9\u671f\u9650: \u30ad\u30e3\u30c3\u30b7\u30e5\u3057\u306a\u3044</li> </ul> <p>\u6ce8\u610f:</p> <p>\u3053\u306e\u8a2d\u5b9a\u306f\u3001\u30b5\u30a4\u30c8\u4e0a\u306e\u3059\u3079\u3066\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306b\u5bfe\u3057\u3066\u9069\u5207\u306a\u30ad\u30e3\u30c3\u30b7\u30e5\u30bf\u30b0\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u524d\u63d0\u3068\u3057\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/integrate-drupal-and-fastly/#ip","title":"\u5b9f\u969b\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8IP","text":"<p>Fastly\u306f\u3001\u5b9f\u969b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092<code>True-Client-IP</code>HTTP\u30d8\u30c3\u30c0\u30fc\u3067\u8fd4\u9001\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002<code>settings.php</code>\u3067\u4ee5\u4e0b\u306e\u5909\u66f4\u3092\u884c\u3046\u3053\u3068\u3067\u3001Drupal\u304c\u3053\u306e\u30d8\u30c3\u30c0\u30fc\u3092\u5c0a\u91cd\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059:</p> Drupal &lt; 8.7.0\u7528\u306esettings.php\u306e\u5909\u66f4<pre><code>$settings['reverse_proxy'] = TRUE;\n$settings['reverse_proxy_header'] = 'HTTP_TRUE_CLIENT_IP';\n</code></pre> <p>\u3057\u304b\u3057\u3001Drupal 8.7.0\u3067\u306f\u3001\u3053\u306e\u6a5f\u80fd\u304c\u524a\u9664\u3055\u308c\u307e\u3057\u305f\u3002\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u30b9\u30cb\u30da\u30c3\u30c8\u3067\u540c\u69d8\u306e\u52d5\u4f5c\u3092\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002</p> Drupal &gt;= 8.7.0\u7528\u306esettings.php\u306e\u5909\u66f4<pre><code>/**\n * Drupal\u306bTrue-Client-IP HTTP\u30d8\u30c3\u30c0\u30fc\u3092\u4f7f\u7528\u3059\u308b\u3088\u3046\u6307\u793a\u3057\u307e\u3059\u3002\n */\nif (isset($_SERVER['HTTP_TRUE_CLIENT_IP'])) {\n  $_SERVER['REMOTE_ADDR'] = $_SERVER['HTTP_TRUE_CLIENT_IP'];\n}\n</code></pre>"},{"location":"ja/applications/drupal/integrate-drupal-and-fastly/#drush","title":"Drush\u7d71\u5408","text":"settings.php<pre><code> fastly:\n   fastly:purge:all (fpall)                                                    \u30b5\u30fc\u30d3\u30b9\u5168\u4f53\u3092\u30d1\u30fc\u30b8\n   fastly:purge:key (fpkey)                                                    \u30ad\u30fc\u3067\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u30d1\u30fc\u30b8\n   fastly:purge:url (fpurl)                                                    URL\u3067\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u30d1\u30fc\u30b8\n## cURL\u3092\u4f7f\u7528\u3057\u3066Fastly\u30ad\u30e3\u30c3\u30b7\u30e5\u30d8\u30c3\u30c0\u30fc\u3092\u8868\u793a\u3059\u308b\n\u4ee5\u4e0b\u306e\u95a2\u6570\u3092\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044:(Linux\u3068Mac OSX\u3067\u52d5\u4f5c\u3057\u307e\u3059)\n```bash title=\"cURL function\"\nfunction curlf() { curl -sLIXGET -H 'Fastly-Debug:1' \"$@\" | grep -iE 'X-Cache|Cache-Control|Set-Cookie|X-Varnish|X-Hits|Vary|Fastly-Debug|X-Served|surrogate-control|surrogate-key' }\n</code></pre> Using cURL<pre><code>$ curlf https://www.example-site-fastly.com\ncache-control: max-age=601, public, s-maxage=2764800\nsurrogate-control: max-age=2764800, public, stale-while-revalidate=3600, stale-if-error=3600\nfastly-debug-path: (D cache-wlg10427-WLG 1612906144) (F cache-wlg10426-WLG 1612906141) (D cache-fra19179-FRA 1612906141) (F cache-fra19122-FRA 1612906141)\nfastly-debug-ttl: (H cache-wlg10427-WLG - - 3) (M cache-fra19179-FRA - - 0)\nfastly-debug-digest: 1118d9fefc8a514ca49d49cb6ece04649e1acf1663398212650bb462ba84c381\nx-served-by: cache-fra19179-FRA, cache-wlg10427-WLG\nx-cache: MISS, HIT\nx-cache-hits: 0, 1\nvary: Cookie, Accept-Encoding\n</code></pre> <p>\u4e0a\u8a18\u306e\u30d8\u30c3\u30c0\u30fc\u304b\u3089\u3001\u4ee5\u4e0b\u306e\u60c5\u5831\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059:</p> <ul> <li>HTML\u30da\u30fc\u30b8\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u53ef\u80fd</li> <li>\u30d6\u30e9\u30a6\u30b6\u306f\u30da\u30fc\u30b8\u3092601\u79d2\u9593\u30ad\u30e3\u30c3\u30b7\u30e5\u3057\u307e\u3059</li> <li>Fastly\u306f\u30da\u30fc\u30b8\u309232\u65e5\u9593(<code>2764800</code>\u79d2)\u30ad\u30e3\u30c3\u30b7\u30e5\u3057\u307e\u3059</li> <li>\u968e\u5c64\u578b\u30ad\u30e3\u30c3\u30b7\u30e5\u304c\u6709\u52b9(Wellington\u306e\u30a8\u30c3\u30b8PoP\u3001\u30d5\u30e9\u30f3\u30b9\u306e\u30b7\u30fc\u30eb\u30c9PoP)</li> <li>HTML\u30da\u30fc\u30b8\u306f\u30a8\u30c3\u30b8PoP\u3067\u30ad\u30e3\u30c3\u30b7\u30e5\u30d2\u30c3\u30c8\u3057\u307e\u3057\u305f</li> </ul>"},{"location":"ja/applications/drupal/integrate-drupal-and-fastly/#fastly","title":"Fastly\u306b\u624b\u52d5\u3067\u30d1\u30fc\u30b8\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u4fe1\u3059\u308b","text":"<p>\u7279\u5b9a\u306e\u30da\u30fc\u30b8\u3092\u624b\u52d5\u3067\u30ad\u30e3\u30c3\u30b7\u30e5\u304b\u3089\u524a\u9664\u3057\u305f\u3044\u5834\u5408\u3001\u3044\u304f\u3064\u304b\u306e\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002</p> \u5358\u4e00\u306eURL\u3067Fastly\u3092\u30d1\u30fc\u30b8<pre><code>curl -Ssi -XPURGE -H 'Fastly-Soft-Purge:1' -H \"Fastly-Key:$FASTLY_API_TOKEN\" https://www.example.com/subpage\n</code></pre> <p>\u30ad\u30e3\u30c3\u30b7\u30e5\u30bf\u30b0\u3092\u6307\u5b9a\u3057\u3066\u30d1\u30fc\u30b8\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059:</p> \u30ad\u30e3\u30c3\u30b7\u30e5\u30bf\u30b0\u3067Fastly\u3092\u30d1\u30fc\u30b8<pre><code>curl -XPOST -H 'Fastly-Soft-Purge:1' -H \"Fastly-Key:$FASTLY_API_TOKEN\" https://api.fastly.com/service/$FASTLY_API_SERVICE/purge/&lt;surrogatekey&gt;\n</code></pre> <p>Fastly CLI\u3092\u4f7f\u7528\u3059\u308b\u3068\u3001\u3088\u308a\u7c21\u5358\u306b\u30d1\u30fc\u30b8\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/phpunit-and-phpstorm/","title":"PHPUnit\u3068PhpStorm","text":"<p>\u6ce8\u610f:</p> <p>\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u306f\u3001\u4ee5\u4e0b\u3092\u524d\u63d0\u3068\u3057\u3066\u3044\u307e\u3059:</p> <p>- Docker\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b</p> <p>- <code>docker-compose.yml</code>\u30d5\u30a1\u30a4\u30eb\u3092\u6301\u3064\u6a19\u6e96\u7684\u306aAmazee/Lagoon\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b</p> <p>- Mac\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b(\u4ed6\u306eOS\u3067\u3082\u52d5\u4f5c\u3059\u308b\u306f\u305a\u3067\u3059\u304c\u3001\u30d5\u30a9\u30eb\u30c0\u69cb\u9020\u3084\u8a2d\u5b9a\u304c\u7570\u306a\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059)</p>"},{"location":"ja/applications/drupal/phpunit-and-phpstorm/#_1","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a","text":"<ol> <li><code>/core/phpunit.xml.dist</code>\u30d5\u30a1\u30a4\u30eb\u3092\u8907\u88fd\u3057\u3001<code>/core/phpunit.xml</code>\u3068\u3044\u3046\u540d\u524d\u3067\u4fdd\u5b58\u3057\u307e\u3059\u3002</li> <li> <p><code>/core/phpunit.xml</code>\u3092\u7de8\u96c6\u3057\u3001\u4ee5\u4e0b\u306e\u5909\u6570\u3092\u8a2d\u5b9a\u3057\u307e\u3059:</p> <ul> <li>SIMPLETEST_DB: <code>mysql://drupal:drupal@mariadb:3306/drupal#db</code></li> <li>SIMPLETEST_BASE_URL: <code>&lt;PROJECT_URL&gt;</code></li> </ul> </li> </ol>"},{"location":"ja/applications/drupal/phpunit-and-phpstorm/#phpstorm","title":"PhpStorm\u306e\u8a2d\u5b9a","text":""},{"location":"ja/applications/drupal/phpunit-and-phpstorm/#docker","title":"Docker\u306e\u8a2d\u5b9a","text":"<ol> <li>PhpStorm\u3067\u3001\u30d5\u30a1\u30a4\u30eb &gt; \u8a2d\u5b9a &gt; \u30d3\u30eb\u30c9\u3001\u5b9f\u884c\u3001\u30c7\u30d7\u30ed\u30a4 &gt; Docker\u3078\u79fb\u52d5\u3057\u307e\u3059\u3002</li> <li><code>+</code>\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</li> <li><code>Docker for Mac</code>\u3092\u9078\u629e\u3057\u307e\u3059\u3002</li> </ol>"},{"location":"ja/applications/drupal/phpunit-and-phpstorm/#cli","title":"CLI\u30a4\u30f3\u30bf\u30fc\u30d7\u30ea\u30bf\u306e\u8a2d\u5b9a","text":"<p>\u65b0\u3057\u3044CLI\u30a4\u30f3\u30bf\u30fc\u30d7\u30ea\u30bf\u3092\u8ffd\u52a0:</p> <ol> <li>PhpStorm\u3067\u3001\u30d5\u30a1\u30a4\u30eb &gt; \u8a2d\u5b9a &gt; \u8a00\u8a9e &amp; \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af &gt; PHP\u3078\u79fb\u52d5\u3057\u307e\u3059\u3002</li> <li><code>...</code>\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001 <code>+</code>\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</li> <li>\u6b21\u306b\u3001Docker\u3001vagrant\u306a\u3069\u304b\u3089\u65b0\u3057\u3044CLI\u30a4\u30f3\u30bf\u30fc\u30d7\u30ea\u30bf\u3092\u8ffd\u52a0\u3092\u9078\u629e\u3057\u307e\u3059\u3002</li> <li>\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u4f7f\u7528\u3057\u307e\u3059: * \u30b5\u30fc\u30d0\u30fc: <code>&lt;DOCKER&gt;</code> * \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb: <code>./docker-compose.yml</code> * \u30b5\u30fc\u30d3\u30b9: <code>cli</code> * \u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb: <code>\u65e2\u5b58\u306e\u30b3\u30f3\u30c6\u30ca\u306b\u63a5\u7d9a ('docker-compose exec')</code></li> <li>\u30d1\u30b9\u306e\u30de\u30c3\u30d4\u30f3\u30b0:<ul> <li>\u30ed\u30fc\u30ab\u30eb\u30d1\u30b9: <code>&lt;ROOT_PATH&gt;</code></li> <li>\u30ea\u30e2\u30fc\u30c8\u30d1\u30b9: <code>/app</code></li> </ul> </li> </ol> <p></p>"},{"location":"ja/applications/drupal/phpunit-and-phpstorm/#_2","title":"\u30ea\u30e2\u30fc\u30c8\u30a4\u30f3\u30bf\u30fc\u30d7\u30ea\u30bf\u306e\u8a2d\u5b9a","text":"<p>\u30ea\u30e2\u30fc\u30c8\u30a4\u30f3\u30bf\u30fc\u30d7\u30ea\u30bf\u306e\u8ffd\u52a0:</p> <ol> <li>PhpStorm\u3067\u3001\u30d5\u30a1\u30a4\u30eb &gt; \u8a2d\u5b9a &gt; \u8a00\u8a9e &amp; \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af &gt; PHP &gt; \u30c6\u30b9\u30c8\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3078\u79fb\u52d5\u3057\u307e\u3059\u3002</li> <li><code>+</code>\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001<code>PHPUnit by Remote Interpreter</code>\u3092\u9078\u629e\u3057\u307e\u3059\u3002</li> <li>\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u4f7f\u7528\u3057\u307e\u3059:<ul> <li>CLI\u30a4\u30f3\u30bf\u30fc\u30d7\u30ea\u30bf: <code>&lt;CLI_INTERPRETER&gt;</code></li> <li>\u30d1\u30b9\u30de\u30c3\u30d4\u30f3\u30b0: <code>&lt;PROJECT_ROOT&gt; -&gt; /app</code></li> <li>PHPUnit: <code>Use Composer autoloader</code></li> <li>\u30b9\u30af\u30ea\u30d7\u30c8\u3078\u306e\u30d1\u30b9: <code>/app/vendor/autoload.php</code></li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb: <code>/app/web/core/phpunit.xml</code></li> </ul> </li> </ol> <p></p>"},{"location":"ja/applications/drupal/phpunit-and-phpstorm/#_3","title":"\u30e9\u30f3\u30ca\u30fc\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u8a2d\u5b9a/\u69cb\u6210","text":"<ol> <li>\u30e9\u30f3\u30ca\u30fc\u306e\u8a2d\u5b9a:<ol> <li>PhpStorm\u3067\u3001\u5b9f\u884c &gt; \u8a2d\u5b9a\u306e\u7de8\u96c6... &gt; \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8 &gt; PHPUnit\u3078\u79fb\u52d5\u3057\u307e\u3059\u3002</li> <li>\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u4f7f\u7528\u3057\u307e\u3059:<p>1. \u30c6\u30b9\u30c8\u30b9\u30b3\u30fc\u30d7: <code>Defined in the configuration file</code></p> <p>2. \u30a4\u30f3\u30bf\u30fc\u30d7\u30ea\u30bf\u30fc: <code>&lt;CLI_INTERPRETER&gt;</code></p> </li> </ol> </li> </ol> <p></p> <p>\u6ce8\u610f:</p> <p>Mac\u4ee5\u5916\u306eOS\u3067\u306f\u624b\u9806\u304c\u7570\u306a\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/phpunit-and-phpstorm/#_4","title":"\u6700\u7d42\u30c1\u30a7\u30c3\u30af","text":""},{"location":"ja/applications/drupal/phpunit-and-phpstorm/#_5","title":"\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3059\u308b\u524d\u306b\u3001\u3044\u304f\u3064\u304b\u306e\u78ba\u8a8d\u304c\u5fc5\u8981\u3067\u3059\u3002","text":"<ol> <li>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059:<code>$ docker-compose up -d</code></li> <li>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u30a8\u30e9\u30fc\u306a\u304f\u52d5\u4f5c\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059 (\u30b5\u30a4\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001\u3059\u3079\u3066\u60f3\u5b9a\u901a\u308a\u306b\u52d5\u4f5c\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044)\u3002\u5fc5\u305a\u3057\u3082\u5fc5\u8981\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u6b63\u5e38\u306b\u52d5\u4f5c\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304a\u304f\u3068\u5b89\u5fc3\u3067\u3059\u3002</li> <li>\u3053\u308c\u3067\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3059\u308b\u6e96\u5099\u304c\u6574\u3044\u307e\u3057\u305f\uff01</li> </ol>"},{"location":"ja/applications/drupal/phpunit-and-phpstorm/#_6","title":"\u5b9f\u884c\u6e96\u5099\u5b8c\u4e86","text":"<p>\u4e0a\u8a18\u306e\u8a2d\u5b9a\u304c\u5b8c\u4e86\u3057\u3066\u3044\u308c\u3070\u3001\u5b9f\u884c\u3057\u305f\u3044\u30c6\u30b9\u30c8\u306b\u79fb\u52d5\u3057\u3001\u7dd1\u8272\u306e\u77e2\u5370\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3060\u3051\u3067\u7c21\u5358\u306b\u5b9f\u884c\u3067\u304d\u307e\u3059\uff01</p> <p>PhpStorm\u306f\u3001Docker\u3092\u4f7f\u7528\u3057\u3066CLI\u30b3\u30f3\u30c6\u30ca\u306b\u5165\u308a\u3001\u8a2d\u5b9a\u306b\u57fa\u3065\u3044\u3066PHPUnit\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"ja/applications/drupal/step-by-step-getting-drupal-ready-to-run-on-lagoon/","title":"\u30b9\u30c6\u30c3\u30d7\u30d0\u30a4\u30b9\u30c6\u30c3\u30d7:Drupal\u3092Lagoon\u3067\u5b9f\u884c\u3059\u308b\u6e96\u5099","text":""},{"location":"ja/applications/drupal/step-by-step-getting-drupal-ready-to-run-on-lagoon/#1-lagoon-drupal-setting-files","title":"1. Lagoon Drupal \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb","text":"<p>Drupal\u304cLagoon\u3068\u9023\u643a\u3059\u308b\u305f\u3081\u306b\u306f\u3001Drupal\u306bLagoon\u306e\u3053\u3068\u3092\u3001Lagoon\u306bDrupal\u306e\u3053\u3068\u3092\u6559\u3048\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u7279\u5b9a\u306eYAML\u3068PHP\u30d5\u30a1\u30a4\u30eb\u3092Git\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <p>Drupal\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u53d6\u308a\u7d44\u3093\u3067\u3044\u308b\u5834\u5408\u306f\u3001\u79c1\u305f\u3061\u306e\u4f8b\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u3042\u308b\u69d8\u3005\u306aDrupal\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u5229\u7528\u3067\u304d\u307e\u3059\u3002\u30cb\u30fc\u30ba\u306b\u5408\u308f\u305b\u3066 Drupal 8\u3001Drupal 9 \u3060\u3051\u3067\u306a\u304f\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u7a2e\u985e\u306a\u3069\u30d0\u30ea\u30a8\u30fc\u30b7\u30e7\u30f3\u3082\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u958b\u59cb\u3059\u308b\u306b\u306f\u3001\u81ea\u5206\u306e\u30cb\u30fc\u30ba\u306b\u5408\u3063\u305f\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u30af\u30ed\u30fc\u30f3\u3057\u3066\u304f\u3060\u3055\u3044\uff01</p> <p>\u4ee5\u4e0b\u306f\u3001Lagoon\u3068Drupal\u306b\u7279\u5316\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u6982\u8981\u3067\u3059\uff1a</p> <ul> <li><code>.lagoon.yml</code> - Lagoon\u304c\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u3059\u308b\u5185\u5bb9\u306a\u3069\u3092\u7406\u89e3\u3059\u308b\u305f\u3081\u306e\u30e1\u30a4\u30f3\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002Drupal\u5411\u3051\u306e\u9069\u5207\u306a\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u7de8\u96c6\u3084\u5909\u66f4\u3092\u884c\u3046\u5834\u5408\u306f\u3001<code>.lagoon.yml</code>\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li><code>docker-compose.yml</code>\u3001<code>.dockerignore</code>\u3001\u304a\u3088\u3073 <code>*.dockerfile</code> (\u307e\u305f\u306f <code>Dockerfile</code>) - \u3053\u308c\u3089\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u30ed\u30fc\u30ab\u30eb\u306eDrupal\u958b\u767a\u74b0\u5883\u306e\u5b9f\u884c\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u3001Docker\u306b\u5bfe\u3057\u3066\u8d77\u52d5\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u306e\u7a2e\u985e\u3084\u30d3\u30eb\u30c9\u65b9\u6cd5\u3092\u6307\u793a\u3057\u307e\u3059\u3002\u9069\u5207\u306a\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u3068\u3001\u591a\u304f\u306e\u30b3\u30e1\u30f3\u30c8\u884c\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u3001\u5185\u5bb9\u304c\u8aad\u307f\u53d6\u308c\u308b\u3088\u3046\u5341\u5206\u306a\u30b3\u30e1\u30f3\u30c8\u304c\u4ed8\u3051\u3089\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u76ee\u6307\u3057\u3066\u3044\u307e\u3059\u3002\u8a73\u7d30\u306f\u3001<code>docker-compose.yml</code>\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u304f\u3060\u3055\u3044\u3002</li> <li><code>sites/default/*</code> - <code>.php</code>\u3068<code>.yml</code>\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u3001Drupal\u304c\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u3068\u672c\u756a\u74b0\u5883\u306e\u4e21\u65b9\u3067Lagoon\u30b3\u30f3\u30c6\u30ca\u3068\u901a\u4fe1\u3059\u308b\u65b9\u6cd5\u3092Drupal\u306b\u6307\u793a\u3057\u307e\u3059\u3002\u307e\u305f\u3001\u958b\u767a\u74b0\u5883\u3068\u672c\u756a\u74b0\u5883\u3067\u7279\u5b9a\u306e\u8a2d\u5b9a\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9 (\u4e0a\u66f8\u304d) \u3059\u308b\u305f\u3081\u306e\u30b7\u30f3\u30d7\u30eb\u306a\u4ed5\u7d44\u307f\u3082\u63d0\u4f9b\u3057\u307e\u3059\u3002\u4ed6\u306eDrupal\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u30b7\u30b9\u30c6\u30e0\u3068\u306f\u7570\u306a\u308a\u3001Lagoon\u306fDrupal\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u4e00\u5207\u5e72\u6e09\u3057\u307e\u305b\u3093\u3002\u305d\u306e\u305f\u3081\u3001\u3053\u308c\u3089\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u81ea\u7531\u306b\u7de8\u96c6\u3067\u304d\u307e\u3059\u3002\u4ed6\u306e\u30d5\u30a1\u30a4\u30eb\u3068\u540c\u69d8\u306b\u3001\u9069\u5207\u306a\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u3068\u3001\u4e00\u90e8\u30b3\u30e1\u30f3\u30c8\u4ed8\u304d\u306e\u90e8\u5206\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002</li> <li><code>drush/aliases.drushrc.php</code> - Drush\u72ec\u81ea\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u3001Drush\u304cLagoon\u306eGraphQL API\u3092\u4f7f\u3063\u3066\u30b5\u30a4\u30c8\u30a8\u30a4\u30ea\u30a2\u30b9 (\u30b5\u30a4\u30c8\u306e\u5225\u540d) \u3092\u53d6\u5f97\u3059\u308b\u65b9\u6cd5\u3092Drush\u306b\u6307\u793a\u3057\u307e\u3059\u3002</li> <li><code>drush/drushrc.php</code> - Drush\u30b3\u30de\u30f3\u30c9\u7528\u306e\u9069\u5207\u306a\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002</li> </ul>"},{"location":"ja/applications/drupal/step-by-step-getting-drupal-ready-to-run-on-lagoon/#update-your-gitignore-settings","title":"<code>.gitignore</code>\u8a2d\u5b9a\u306e\u66f4\u65b0","text":"<p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30df\u30c3\u30c8\u3067\u304d\u308b\u3088\u3046\u306b\u3001<code>.gitignore</code>\u30d5\u30a1\u30a4\u30eb\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>Drupal\u306f<code>sites/*/settings*.php</code>\u3068<code>sites/*/services*.yml</code>\u3092<code>.gitignore</code>\u3067\u30b3\u30df\u30c3\u30c8\u304b\u3089\u9664\u5916\u3059\u308b\u3088\u3046\u306b\u521d\u671f\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002Lagoon \u74b0\u5883\u3067\u306f\u6a5f\u5bc6\u60c5\u5831\u306f Git \u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u4fdd\u5b58\u3057\u306a\u3044\u306e\u3067\u3001\u3053\u306e\u9664\u5916\u8a2d\u5b9a\u3092\u524a\u9664\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/applications/drupal/step-by-step-getting-drupal-ready-to-run-on-lagoon/#note-about-webroot-in-drupal-8","title":"Drupal 8\u306e<code>WEBROOT</code>\u306b\u95a2\u3059\u308b\u6ce8\u610f\u4e8b\u9805","text":"<p>\u6b8b\u5ff5\u306a\u304c\u3089\u3001Drupal\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3067\u306f<code>WEBROOT</code>\u30d5\u30a9\u30eb\u30c0\u540d\u306e\u6a19\u6e96\u5316\u304c\u307e\u3060\u6c7a\u307e\u3063\u3066\u3044\u307e\u305b\u3093\u3002Drupal\u3092<code>web</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306b\u914d\u7f6e\u3059\u308b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3082\u3042\u308c\u3070\u3001<code>docroot</code>\u3084\u5225\u306e\u5834\u6240\u306b\u5165\u308c\u308b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3082\u3042\u308a\u307e\u3059\u3002Lagoon\u306eDrupal\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f\u3001Drupal\u304c<code>web</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306b\u914d\u7f6e\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u524d\u63d0\u3068\u3057\u3066\u3044\u307e\u3059\u3002\u3082\u3057\u3042\u306a\u305f\u306eDrupal\u306e\u69cb\u6210\u304c\u7570\u306a\u308b\u5834\u5408\u306f\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u305d\u308c\u306b\u5408\u308f\u305b\u3066\u4fee\u6b63\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/applications/drupal/step-by-step-getting-drupal-ready-to-run-on-lagoon/#note-about-composerjson","title":"<code>composer.json</code>\u306b\u95a2\u3059\u308b\u6ce8\u610f\u4e8b\u9805","text":"<p>Composer \u3092\u4f7f\u3063\u3066 Drupal \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u5834\u5408\u3001<code>composer.json</code>\u3092\u78ba\u8a8d\u3057\u3001<code>name</code>\u304c<code>drupal/drupal</code>\u3067\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u306e\u540d\u524d\u306f Drush \u3084\u305d\u306e\u4ed6\u306e Drupal \u95a2\u9023\u30c4\u30fc\u30eb\u3068\u7af6\u5408\u3057\u3066\u3057\u307e\u3046\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u3001<code>myproject/drupal</code>\u306a\u3069\u3001\u5225\u306e\u540d\u524d\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/applications/drupal/step-by-step-getting-drupal-ready-to-run-on-lagoon/#2-customize-docker-composeyml","title":"2. <code>docker-compose.yml</code>\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba","text":"<p><code>lagoon-project</code>\u3068<code>LAGOON_ROUTE</code>\u306e\u5024\u3092\u5fd8\u308c\u305a\u306b\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3057\u3001\u30b5\u30a4\u30c8\u540d\u3068\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3044URL\u306b\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\u4ee5\u4e0b\u306b\u4f8b\u3092\u793a\u3057\u307e\u3059:</p> docker-compose.yml<pre><code>x-environment:\n&amp;default-environment\nLAGOON_PROJECT: *lagoon-project\n# Route that should be used locally. If you are using pygmy, this route *must* end with .docker.amazee.io.\nLAGOON_ROUTE: http://drupal-example.docker.amazee.io\n</code></pre>"},{"location":"ja/applications/drupal/step-by-step-getting-drupal-ready-to-run-on-lagoon/#3-build-images","title":"3. \u30a4\u30e1\u30fc\u30b8\u306e\u30d3\u30eb\u30c9","text":"<p>\u307e\u305a\u3001\u5b9a\u7fa9\u3055\u308c\u305f\u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059:</p> \u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9<pre><code>docker-compose build\n</code></pre> <p>\u3053\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001<code>docker-compose.yml</code>\u5185\u3067<code>build:</code>\u306e\u5b9a\u7fa9\u304c\u3042\u308b\u3059\u3079\u3066\u306e\u30b3\u30f3\u30c6\u30ca\u306eDocker\u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3059\u308b\u3088\u3046\u306b<code>docker-compose</code>\u306b\u6307\u793a\u3057\u307e\u3059\u3002\u901a\u5e38\u3001Drupal\u3067\u306f<code>cli</code>\u3001<code>nginx</code>\u3001<code>php</code>\u306e\u30a4\u30e1\u30fc\u30b8\u304c\u8a72\u5f53\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u7279\u5b9a\u306e\u30d3\u30eb\u30c9\u30b3\u30de\u30f3\u30c9(<code>composer install</code>\u306a\u3069)\u3092\u5b9f\u884c\u3057\u305f\u308a\u3001\u7279\u5b9a\u306e\u74b0\u5883\u5909\u6570(<code>WEBROOT</code>\u306a\u3069)\u3092\u30a4\u30e1\u30fc\u30b8\u306b\u6ce8\u5165\u3059\u308b\u305f\u3081\u3067\u3059\u3002</p> <p>\u901a\u5e38\u3001Drupal \u30b3\u30fc\u30c9\u3092\u7de8\u96c6\u3059\u308b\u305f\u3073\u306b\u30d3\u30eb\u30c9\u3092\u884c\u3046\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093 (\u30b3\u30fc\u30c9\u306f\u30db\u30b9\u30c8\u304b\u3089\u30b3\u30f3\u30c6\u30ca\u306b\u30de\u30a6\u30f3\u30c8\u3055\u308c\u308b\u305f\u3081)\u3002\u3068\u306f\u3044\u3048\u3001\u30d3\u30eb\u30c9\u3092\u3057\u3066\u3082\u4f55\u3089\u304b\u306e\u554f\u984c\u304c\u751f\u3058\u308b\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u3055\u3089\u306b\u3001Lagoon \u306f\u30c7\u30d7\u30ed\u30a4\u4e2d\u306b\u307e\u3063\u305f\u304f\u540c\u3058 Docker \u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3059\u308b\u306e\u3067\u3001<code>docker-compose build</code>\u30b3\u30de\u30f3\u30c9\u3092\u3082\u3046\u4e00\u5ea6\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u3001\u30c7\u30d7\u30ed\u30a4\u6642\u306b\u3082\u30d3\u30eb\u30c9\u304c\u6b63\u5e38\u306b\u52d5\u4f5c\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/step-by-step-getting-drupal-ready-to-run-on-lagoon/#4-start-containers","title":"4. \u30b3\u30f3\u30c6\u30ca\u306e\u8d77\u52d5","text":"<p>\u30a4\u30e1\u30fc\u30b8\u304c\u30d3\u30eb\u30c9\u3055\u308c\u305f\u306e\u3067\u3001\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3067\u304d\u307e\u3059:</p> \u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5<pre><code>docker-compose up -d\n</code></pre> <p>\u3053\u308c\u306b\u3088\u308a\u3001\u3059\u3079\u3066\u306e\u30b3\u30f3\u30c6\u30ca\u304c\u8d77\u52d5\u3057\u307e\u3059\u3002\u30b3\u30de\u30f3\u30c9\u304c\u5b8c\u4e86\u3057\u305f\u5f8c\u3001<code>docker-compose ps</code>\u3067\u3059\u3079\u3066\u306e\u30b3\u30f3\u30c6\u30ca\u304c\u5b8c\u5168\u306b\u7acb\u3061\u4e0a\u304c\u3063\u3066\u3044\u308b\u304b\u3001\u30af\u30e9\u30c3\u30b7\u30e5\u3057\u3066\u3044\u306a\u3044\u304b\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u554f\u984c\u304c\u3042\u308b\u5834\u5408\u306f\u3001<code>docker-compose logs -f [servicename]</code>\u3067\u30ed\u30b0\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/applications/drupal/step-by-step-getting-drupal-ready-to-run-on-lagoon/#5-rerun-composer-install","title":"5. <code>composer install</code>\u3092\u518d\u5b9f\u884c\u3057\u307e\u3059\uff08composer\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u307f\uff09","text":"<p>\u30ed\u30fc\u30ab\u30eb\u306e\u958b\u767a\u74b0\u5883\u3067\u306f\u3001\u3059\u3079\u3066\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3044\u3068\u601d\u3046\u3067\u3057\u3087\u3046\u3002\u305d\u306e\u305f\u3081\u3001<code>cli</code>\u30b3\u30f3\u30c6\u30ca\u306b\u63a5\u7d9a\u3057\u3066<code>composer install</code>\u3092\u5b9f\u884c\u3057\u307e\u3059:</p> CLI\u3067composer install\u3092\u5b9f\u884c<pre><code>docker-compose exec cli bash\ncomposer install\n</code></pre> <p>\u5c11\u3057\u5947\u5999\u306b\u611f\u3058\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u30d3\u30eb\u30c9\u624b\u9806\u3067\u3059\u3067\u306b<code>composer install</code>\u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u8aac\u660e\u3092\u52a0\u3048\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3059:</p> <ul> <li>\u30db\u30b9\u30c8\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u3066\u3001\u3059\u3050\u306b\u30b3\u30f3\u30c6\u30ca\u3067\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e<code>docker-composer.yml</code>\u30d5\u30a1\u30a4\u30eb\u306f\u3001\u3059\u3079\u3066\u306e\u30d5\u30a9\u30eb\u30c0\u30fc\u3092\u30b3\u30f3\u30c6\u30ca\u5185\u306b\u30de\u30a6\u30f3\u30c8\u3057\u3066\u3044\u307e\u3059 (\u30dc\u30ea\u30e5\u30fc\u30e0\u30bb\u30af\u30b7\u30e7\u30f3\u306e<code>.:/app:delegated</code>\u304c\u3053\u308c\u306b\u8a72\u5f53\u3057\u307e\u3059)\u3002\u3064\u307e\u308a\u3001Docker\u30d3\u30eb\u30c9\u6642\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u3059\u3079\u3066\u306e\u4f9d\u5b58\u95a2\u4fc2\u306f\u3001\u30db\u30b9\u30c8\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u4e0a\u66f8\u304d\u3055\u308c\u307e\u3059\u3002</li> <li>\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u74b0\u5883\u306b\u304a\u3044\u3066\u306f\u3001<code>composer.json</code>\u3067<code>require-dev</code>\u3068\u3057\u3066\u5b9a\u7fa9\u3055\u308c\u305f\u4f9d\u5b58\u95a2\u4fc2\u3082\u5b58\u5728\u3055\u305b\u308b\u5fc5\u8981\u304c\u3042\u308b\u3067\u3057\u3087\u3046\u3002\u4e00\u65b9\u3001\u672c\u756a\u74b0\u5883\u3067\u306f\u3001\u305d\u3046\u3057\u305f\u4f9d\u5b58\u95a2\u4fc2\u306f\u305f\u3060\u7121\u99c4\u306a\u5bb9\u91cf\u3092\u6d88\u8cbb\u3059\u308b\u3060\u3051\u3067\u3059\u3002\u305d\u306e\u305f\u3081\u3001Dockerfile\u5185\u3067\u306f <code>composer install --no-dev</code>\u3092\u5b9f\u884c\u3057\u3001\u624b\u52d5\u3067<code>composer install</code>\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</li> </ul> <p>\u3059\u3079\u3066\u554f\u984c\u306a\u304f\u52d5\u4f5c\u3057\u3066\u3044\u308b\u5834\u5408\u3001<code>docker-compose.yml</code> (\u4f8b\u3048\u3070 <code>http://drupal.docker.amazee.io</code>)\u3067\u5b9a\u7fa9\u3055\u308c\u305f<code>LAGOON_ROUTE</code>\u3092\u958b\u304f\u3068\u3001Drupal\u30a8\u30e9\u30fc\u304c\u8868\u793a\u3055\u308c\u308b\u306f\u305a\u3067\u3059\u3002\u5fc3\u914d\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002\u4eca\u306e\u6bb5\u968e\u3067\u306f\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\u91cd\u8981\u306a\u306e\u306f\u3001Drupal\u30b5\u30a4\u30c8\u304c\u8aad\u307f\u8fbc\u307e\u308c\u3088\u3046\u3068\u3057\u3066\u3044\u308b\u3053\u3068\u3067\u3059\u3002</p> <p>500\u30a8\u30e9\u30fc\u3084\u540c\u69d8\u306e\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u5834\u5408\u306f\u3001Composer\u306b\u3088\u3063\u3066\u3059\u3079\u3066\u304c\u6b63\u3057\u304f\u8aad\u307f\u8fbc\u307e\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/applications/drupal/step-by-step-getting-drupal-ready-to-run-on-lagoon/#6-check-status-and-install-drupal","title":"6. \u30b9\u30c6\u30fc\u30bf\u30b9\u306e\u78ba\u8a8d\u3068Drupal\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u3044\u3088\u3044\u3088Drupal\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u304c\u3001\u305d\u306e\u524d\u306b\u3059\u3079\u3066\u304c\u6a5f\u80fd\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u306bDrush\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059:</p> Drush status<pre><code>docker-compose exec cli bash\ndrush status\n</code></pre> <p>\u3053\u308c\u306b\u3088\u308a\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u7d50\u679c\u304c\u8fd4\u3055\u308c\u308b\u306f\u305a\u3067\u3059:</p> Drush status result<pre><code>[drupal-example]cli-drupal:/app$ drush status\n[notice] Missing database table: key_value\nDrupal version       :  8.6.1\nSite URI             :  http://drupal.docker.amazee.io\nDatabase driver      :  mysql\nDatabase hostname    :  mariadb\nDatabase port        :  3306\nDatabase username    :  drupal\nDatabase name        :  drupal\nPHP binary           :  /usr/local/bin/php\nPHP config           :  /usr/local/etc/php/php.ini\nPHP OS               :  Linux\nDrush script         :  /app/vendor/drush/drush/drush\nDrush version        :  9.4.0\nDrush temp           :  /tmp\nDrush configs        :  /home/.dr ush/drush.yml\n                        /app/vendor/drush/drush/drush.yml\nDrupal root          :  /app/web\nSite path            :  sites/default\n</code></pre> <p>\u8b66\u544a</p> <p>\u6b21\u306e\u30b9\u30c6\u30c3\u30d7\u524d\u306b\u3001pygmy\u306b\u516c\u958b\u9375\u306b\u3064\u3044\u3066\u4f1d\u3048\u308b\u5fc5\u8981\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002</p> <p><code>Permission denied (publickey)</code>\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u5834\u5408\u306f\u3001\u3053\u3061\u3089\u304b\u3089SSH\u30ad\u30fc\u306e\u8ffd\u52a0\u65b9\u6cd5\u306b\u95a2\u3059\u308b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u304f\u3060\u3055\u3044: pygmy - ssh\u30ad\u30fc\u306e\u8ffd\u52a0</p> <p>\u6b21\u306bDrupal\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059(\u65e2\u5b58\u306eSQL\u30d5\u30a1\u30a4\u30eb\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u30b9\u30c6\u30c3\u30d77\u3078\u30b9\u30ad\u30c3\u30d7\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u305f\u3060\u3057\u3001\u3059\u3079\u3066\u304c\u6a5f\u80fd\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306b\u3001\u6700\u521d\u304b\u3089\u30af\u30ea\u30fc\u30f3\u306aDrupal\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002))\u3002</p> Drupal\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb<pre><code>drush site-install\n</code></pre> <p>\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u51fa\u529b\u304c\u8868\u793a\u3055\u308c\u308b\u306f\u305a\u3067\u3059:</p> drush site-install<pre><code>[drupal-example]cli-drupal:/app$ drush site-install\nYou are about to DROP all tables in your 'drupal' database. Do you want to continue? (y/n): y\nStarting Drupal installation. This takes a while. Consider using the --notify global option.\nInstallation complete.  User name: admin  User password: a7kZJekcqh\nCongratulations, you installed Drupal!\n</code></pre> <p><code>LAGOON_ROUTE</code>\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308bURL\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\u65b0\u3057\u304f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305fDrupal\u30b5\u30a4\u30c8\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u304a\u3081\u3067\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01</p> <p></p>"},{"location":"ja/applications/drupal/step-by-step-getting-drupal-ready-to-run-on-lagoon/#7-import-existing-database-dump","title":"7. \u65e2\u5b58\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c0\u30f3\u30d7\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b","text":"<p>\u65e2\u306b\u65e2\u5b58\u306eDrupal\u30b5\u30a4\u30c8\u3092\u6301\u3063\u3066\u3044\u308b\u5834\u5408\u3001\u305d\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u30ed\u30fc\u30ab\u30eb\u30b5\u30a4\u30c8\u306b\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u305f\u3044\u3068\u601d\u3046\u3067\u3057\u3087\u3046\u3002</p> <p>\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c0\u30f3\u30d7\u3092\u4f5c\u6210\u3059\u308b\u65b9\u6cd5\u306f\u591a\u6570\u3042\u308a\u307e\u3059\u3002\u73fe\u5728\u306e\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u306bDrush\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f7f\u7528\u3067\u304d\u307e\u3059:</p> Drush sql-dump<pre><code>drush sql-dump --result-file=dump.sql\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c0\u30f3\u30d7\u306fdump.sql\u306b\u4fdd\u5b58\u3055\u308c\u307e\u3057\u305f\n</code></pre> <p>\u3053\u308c\u3067\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5168\u4f53\u3092\u542b\u3080<code>dump.sql</code>\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002</p> <p>\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u3092Git\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u3001<code>cli</code>\u306b\u63a5\u7d9a\u3059\u308b\u3068\u3001\u305d\u306e\u4e2d\u306b\u30d5\u30a1\u30a4\u30eb\u304c\u8868\u793a\u3055\u308c\u308b\u306f\u305a\u3067\u3059:</p> dump.sql\u306e\u8868\u793a<pre><code>[drupal-example]cli-drupal:/app$ ls -l dump.sql\n-rw-r--r--    1 root     root          5281 Dec 19 12:46 dump.sql\n</code></pre> <p>\u73fe\u5728\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u524a\u9664\u3057\u3001\u30c0\u30f3\u30d7\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3067\u304d\u307e\u3059\u3002</p> dump.sql\u306e\u30a4\u30f3\u30dd\u30fc\u30c8<pre><code>drush sql-drop\n\ndrush sql-cli &lt; dump.sql\n</code></pre> <p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306eURL\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001\u3059\u3079\u3066\u304c\u6b63\u5e38\u306b\u52d5\u4f5c\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u308c\u3067\u3001Drupal\u30b5\u30a4\u30c8\u304c\u6b63\u5e38\u306b\u6a5f\u80fd\u3057\u3066\u3044\u308b\u306f\u305a\u3067\u3059\uff01</p>"},{"location":"ja/applications/drupal/step-by-step-getting-drupal-ready-to-run-on-lagoon/#8-drupal-files-directory","title":"8. Drupal\u30d5\u30a1\u30a4\u30eb \u30c7\u30a3\u30ec\u30af\u30c8\u30ea","text":"<p>Drupal\u30b5\u30a4\u30c8\u306b\u306f\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3082\u5fc5\u8981\u3067\u3059\u3002\u3053\u306e\u30d5\u30a9\u30eb\u30c0\u5168\u4f53\u306fDocker\u30b3\u30f3\u30c6\u30ca\u5185\u306b\u30de\u30a6\u30f3\u30c8\u3055\u308c\u308b\u305f\u3081\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u6b63\u3057\u3044\u30d5\u30a9\u30eb\u30c0\u306b\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044 (\u304a\u305d\u3089\u304f<code>web/sites/default/files</code>\u3001<code>sites/default/files</code>\u307e\u305f\u306f\u540c\u69d8\u306e\u30d5\u30a9\u30eb\u30c0\u3067\u3059)\u3002\u8a2d\u5b9a\u3057\u305f<code>WEBROOT</code>\u3092\u899a\u3048\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044 - \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3054\u3068\u306b\u7570\u306a\u308b\u5834\u5408\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093</p>"},{"location":"ja/applications/drupal/step-by-step-getting-drupal-ready-to-run-on-lagoon/#done","title":"9. \u5b8c\u4e86","text":"<p>\u30ed\u30fc\u30ab\u30eb\u8a2d\u5b9a\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002Lagoon \u30c1\u30fc\u30e0\u306f\u3001\u7686\u69d8\u306e\u697d\u3057\u3044 Drupaling \u3092\u5fdc\u63f4\u3057\u3066\u3044\u307e\u3059\uff01</p>"},{"location":"ja/applications/drupal/subfolders/","title":"\u30b5\u30d6\u30d5\u30a9\u30eb\u30c0","text":"<p>\u4f8b\u3048\u3070\u3001<code>www.example.com</code>\u306f\u3042\u308bDrupal\u30b5\u30a4\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u63d0\u4f9b\u3057\u3001<code>www.example.com/blog</code>\u306f\u5225\u306eDrupal\u3067\u69cb\u7bc9\u3055\u308c\u305f\u30d6\u30ed\u30b0\u3092\u8aad\u307f\u8fbc\u307f\u307e\u3059\u3002</p> <p>\u3053\u306e\u5834\u5408\u3001\u4e21\u65b9\u306eDrupal\u3092\u5358\u4e00\u306eGit\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u7ba1\u7406\u3057\u3001\u307e\u3068\u3081\u3066\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\u3057\u304b\u3057\u3001\u3053\u306e\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u306f\u5168\u3066\u306e\u30c1\u30fc\u30e0\u306b\u9069\u3057\u3066\u3044\u308b\u308f\u3051\u3067\u306f\u306a\u304f\u3001\u72b6\u6cc1\u306b\u3088\u3063\u3066\u306f\u5225\u3005\u306eGit\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f7f\u7528\u3057\u305f\u65b9\u304c\u826f\u3044\u5834\u5408\u3082\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/subfolders/#_2","title":"\u30eb\u30fc\u30c8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5909\u66f4","text":"<p>\u30eb\u30fc\u30c8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3(\u3053\u306e\u4f8b\u3067\u306f<code>www.example.com</code>\u306eDrupal\u30b5\u30a4\u30c8)\u306f\u3001NGINX\u3092\u30b5\u30d6\u30d5\u30a9\u30eb\u30c0\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3078\u306e\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u3068\u3057\u3066\u8a2d\u5b9a\u3059\u308b\u305f\u3081\u306eNGINX\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u3044\u304f\u3064\u304b\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059:</p>"},{"location":"ja/applications/drupal/subfolders/#location_prependconf","title":"<code>location_prepend.conf</code>","text":"<p>Drupal\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u30eb\u30fc\u30c8\u306b<code>location_prepend.conf</code>\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059:</p> location_prepend.conf<pre><code>resolver 8.8.8.8 valid=30s;\n\nlocation ~ ^/subfolder {\n  # $http_x_forwarded_proto\u304c\u7a7a\u306e\u5834\u5408 (\u4e0a\u6d41\u306e\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u304b\u3089\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408)\n  # \u73fe\u5728\u306e\u30b9\u30ad\u30fc\u30e0\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n  set_if_empty $http_x_forwarded_proto $scheme;\n\n  proxy_set_header      X-Forwarded-For $proxy_add_x_forwarded_for;\n  proxy_set_header      X-Forwarded-Proto $scheme;\n  proxy_set_header      X-Forwarded-Proto $http_x_forwarded_proto;\n  proxy_set_header      X-Lagoon-Forwarded-Host $ \u30db\u30b9\u30c8;\n  # \u5143\u306e\u30db\u30b9\u30c8\u3092\u4e0b\u6d41\u304c\u77e5\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002\n  proxy_set_header      X-REVERSEPROXY $hostname;\n  proxy_set_header      FORWARDED \"\";\n  # Drupal 8\u3067\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\u305f\u3081\u3001FORWARDED\u30d8\u30c3\u30c0\u30fc\u3092\u524a\u9664\u3057\u307e\u3059\u3002\n  proxy_set_header      Proxy \"\";\n  # Drupal 8\u3067\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\u305f\u3081\u3001Proxy\u30d8\u30c3\u30c0\u30fc\u3092\u524a\u9664\u3057\u307e\u3059\u3002\n  proxy_ssl_server_name on;\n\n  # NGINX\u3067DNS\u89e3\u6c7a\u3092\u6b63\u3057\u304f\u52d5\u4f5c\u3055\u305b\u308b\u306b\u306f\u3001\u5909\u6570\u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n  set                   $subfolder_drupal_host \"https://nginx-lagoonproject-${LAGOON_GIT_SAFE_BRANCH}.clustername.com:443\";\n  # LAGOON_GIT_SAFE_BRANCH\u5909\u6570\u306fdocker\u30a8\u30f3\u30c8\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\u6642\u306b\u7f6e\u63db\u3055\u308c\u307e\u3059\u3002\n  proxy_pass            $subfolder_drupal_host;\n  proxy_set_header      Host $proxy_host;\n  # $proxy_host\u306f\u3001NGINX\u304cproxy_pass\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6(\u30b9\u30ad\u30fc\u30e0\u3068\u30dd\u30fc\u30c8\u3092\u9664\u304f\u30db\u30b9\u30c8\u540d)\u3092\u5143\u306b\u81ea\u52d5\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\n  expires off; # \u30d7\u30ed\u30ad\u30b7\u304b\u3089\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u30d8\u30c3\u30c0\u30fc\u3092\u5c0a\u91cd\u3057\u3001\u4e0a\u66f8\u304d\u3057\u306a\u3044\u3088\u3046\u306b\u3057\u307e\u3059\n</code></pre> <p>\u4ee5\u4e0b\u306e\u6587\u5b57\u5217\u3092\u7f6e\u63db\u3057\u3066\u304f\u3060\u3055\u3044:</p> <ul> <li><code>/subfolder</code>\uff1a\u30b5\u30d6\u30d5\u30a9\u30eb\u30c0\u3068\u3057\u3066\u4f7f\u7528\u3059\u308b\u540d\u524d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u4f8b\u3048\u3070\u3001<code>/blog</code>\u3002</li> <li><code>nginx</code>\uff1a\u30b5\u30d6\u30d5\u30a9\u30eb\u30c0\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u53c2\u7167\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u540d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li><code>lagoonproject</code>\uff1a\u30b5\u30d6\u30d5\u30a9\u30eb\u30c0\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306eLagoon\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul>"},{"location":"ja/applications/drupal/subfolders/#n-ginx-dockerfile","title":"N GINX Dockerfile","text":"<p>\u4ee5\u4e0b\u306e\u5185\u5bb9\u3092NGINX Dockerfile(<code>nginx.dockerfile</code>\u307e\u305f\u306f<code>Dockerfile.nginx</code>)\u306b\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044:</p> nginx.dockerfile<pre><code>COPY location_prepend.conf /etc/nginx/conf.d/drupal/location_prepend.conf\nRUN fix-permissions /etc/nginx/conf.d/drupal/*\n</code></pre>"},{"location":"ja/applications/drupal/subfolders/#_3","title":"\u30b5\u30d6\u30d5\u30a9\u30eb\u30c0\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5909\u66f4","text":"<p>\u30eb\u30fc\u30c8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3068\u540c\u69d8\u306b\u3001\u30b5\u30d6\u30d5\u30a9\u30eb\u30c0\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3(\u3053\u306e\u4f8b\u3067\u306f\u3001<code>www.example.com/blog</code>\u306eDrupal\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb)\u306b\u5bfe\u3057\u3066\u3082\u3001\u30b5\u30d6\u30d5\u30a9\u30eb\u30c0\u3067\u52d5\u4f5c\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u8a8d\u8b58\u3055\u305b\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u306b\u306f\u3001\u4ee5\u4e0b\u306e2\u3064\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059:</p>"},{"location":"ja/applications/drupal/subfolders/#location_drupal_append_subfolderconf","title":"<code>location_drupal_append_subfolder.conf</code>","text":"<p>\u30b5\u30d6\u30d5\u30a9\u30eb\u30c0\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306eDrupal\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u3001<code>location_drupal_append_subfolder.conf</code>\u3068\u3044\u3046\u540d\u524d\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059:</p> location_drupal_append_subfolder.conf<pre><code># Drupal\u306f\u3001`subfolder`\u3067\u59cb\u307e\u308b\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u304c\u4ed8\u3044\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u540d\u3092\u6ce8\u5165\u3059\u308b\u3068\u3001\n# \u3059\u3079\u3066\u306eURL\u306b`subfolder`\u3092\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u3068\u3057\u3066\u4ed8\u52a0\u3057\u3066\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3057\u307e\u3059\u3002\nfastcgi_param  SCRIPT_NAME        /subfolder/index.php;\n\n# \u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u7d4c\u7531\u3067\u5b9f\u884c\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u30aa\u30ea\u30b8\u30ca\u30eb\u306eHOST URL\u3092\n# PHP\u306b\u6ce8\u5165\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001Drupal\u306f\u73fe\u5728\u306eHOST\u3067\u306f\u306a\u304f\u3001\n# \u30aa\u30ea\u30b8\u30ca\u30eb\u306eHOST URL\u3092\u7528\u3044\u3066\u3059\u3079\u3066\u306e URL \u3092\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3057\u307e\u3059\u3002\n\n# \u6700\u521d\u306b\u3001HOST\u3092\u901a\u5e38\u306e\u30db\u30b9\u30c8\u5909\u6570\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\nfastcgi_param  HTTP_HOST          $http\n``` _host;\n# \u305d\u308c\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u306f\u3001`X-Lagoon-Forwarded-Host`\u3067\u4e0a\u66f8\u304d\u3057\u307e\u3059\u3002\nfastcgi_param  HTTP_HOST          $http_x_lagoon_forwarded_host if_not_empty;\n</code></pre> <p>\u30b5\u30d6\u30d5\u30a9\u30eb\u30c0\u30fc\u540d\u3067 <code>/subfolder</code>\u3092\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\u4f8b\u3048\u3070\u3001<code>/blog</code>\u306e\u3088\u3046\u306b\u7f6e\u304d\u63db\u3048\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/subfolders/#server_prepend_subfolderconf","title":"<code>server_prepend_subfolder.conf</code>","text":"<p>\u30b5\u30d6\u30d5\u30a9\u30eb\u30c0\u30fc\u3067\u306eDrupal\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u3001<code>server_prepend_subfolder.conf</code>\u3068\u3044\u3046\u540d\u524d\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044:</p> server_prepend_subfolder.conf<pre><code># \u5185\u90e8NGINX\u30ea\u30e9\u30a4\u30c8\u306f`last`\u30d5\u30e9\u30b0\u3092\u4f7f\u3046\u305f\u3081\u3001\n# \u30ea\u30e9\u30a4\u30c8\u306e\u524d\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u306e\u6709\u7121\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n# `last`\u30d5\u30d5\u30e9\u30b0\u306fNGINX\u306b\u5bfe\u3057\u3066\u3001\u3053\u308c\u4ee5\u964d\u306e\u30ea\u30e9\u30a4\u30c8\u51e6\u7406\u3092\u884c\u308f\u306a\u3044\u3088\u3046\u6307\u793a\u3057\u307e\u3059\u3002\n# (\u307e\u305f\u3001`if`\u306f\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u4e00\u90e8\u3067\u3059\u3002)\ninclude /etc/nginx/helpers/010_redirects.conf;\n\n# \u3053\u306e\u30ea\u30e9\u30a4\u30c8\u306f\u30ea\u30af\u30a8\u30b9\u30c8URL\u304b\u3089`/subfolder/`\u3092\u524a\u9664\u3057\u3001\n# \u3042\u305f\u304b\u3082\u6700\u521d\u304b\u3089`/`\u3067\u3042\u3063\u305f\u304b\u306e\u3088\u3046\u306bNGINX\u304c\n# \u51e6\u7406\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n# `last`\u30d5\u30e9\u30b0\u3082\u91cd\u8981\u3067\u3059\u3002\n# \u3053\u308c\u306b\u3088\u308a\u3001\u4ee5\u4e0b\u306e\u30ea\u30e9\u30a4\u30c8\u304c\u6c38\u7d9a\u7684\u306b\u7e70\u308a\u8fd4\u3055\u308c\u308b\u306e\u3092\u9632\u304e\u307e\u3059\u3002\nrewrite ^/subfolder/(.*)          /$1             last;\n\n# NGINX\u306b\u3088\u3063\u3066\u73fe\u5728\u51e6\u7406\u3055\u308c\u3066\u3044\u308b\u30db\u30b9\u30c8\u60c5\u5831\u304c\u4e0a\u66f8\u304d\u3055\u308c\u306a\u3044\u3088\u3046\u3001\n# \u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u306e\u7d76\u5bfe\u30d1\u30b9\u3092\u4f7f\u7528\u3057\u306a\u3044\u3088\u3046\u306b\u3057\u307e\u3059\u3002\nabsolute_redirect off;\n\n# `/subfolder`\u3060\u3051\u304c\u30ea\u30af\u30a8\u30b9\u30c8\u3055\u308c\u305f\u5834\u5408\u3001301\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3067\n# `/subfolder`(Drupal\u306f\u672b\u5c3e\u306e\u30b9\u30e9\u30c3\u30b7\u30e5\u3092\u597d\u307f\u307e\u3059)\u306b\u8ee2\u9001\u3057\u307e\u3059\u3002\nrewrite ^/subfolder               /subfolder/     permanent;\n\n# \u305d\u306e\u4ed6\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u5bfe\u3057\u3066\u306f\u3001301\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u306e\u30d1\u30b9\u306b`/subfolder/`\u3092\u5148\u982d\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\nrewrite ^\\/(.*)                   /subfolder/$1   permanent;\n</code></pre> <p><code>/subfolder</code>\u306f\u3001\u4f7f\u7528\u3059\u308b\u30b5\u30d6\u30d5\u30a9\u30eb\u30c0\u30fc\u306e\u540d\u524d\u3068\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\u4f8b\u3048\u3070\u3001\u30d6\u30ed\u30b0\u7528\u306e\u30b5\u30d6\u30d5\u30a9\u30eb\u30c0\u30fc\u3067\u3042\u308c\u3070 <code>/blog</code>\u3068\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/subfolders/#nginx-dockerfile","title":"NGINX Dockerfile","text":"<p>NGINX Dockerfile\u3082\u7de8\u96c6\u304c\u5fc5\u8981\u3067\u3059\u3002</p> <p>NGINX Dockerfile(\u901a\u5e38\u306f<code>nginx.dockerfile</code> \u307e\u305f\u306f <code>Dockerfile.nginx</code>)\u306b\u4ee5\u4e0b\u306e\u5185\u5bb9\u3092\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044:</p> nginx.dockerfile<pre><code>COPY location_drupal_append_subfolder.conf /etc/nginx/conf.d/drupal/location_drupal_append_subfolder.conf\nCOPY server_prepend_subfolder.conf /etc/nginx/conf.d/drupal/server_prepend_subfolder.conf\nRUN fix-permissions /etc/nginx/conf.d/drupal/*\n</code></pre>"},{"location":"ja/applications/drupal/services/","title":"\u6982\u8981","text":""},{"location":"ja/applications/drupal/services/#mariadbmysql","title":"MariaDB\u306f\u3001\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306eMySQL\u306e\u5f8c\u7d99\u8005\u3067\u3059","text":"<p>Drupal\u3068MariaDB\u306b\u3064\u3044\u3066\u5b66\u3076</p> <p>\u6a19\u6e96\u7684\u306aMariaDB\u30a4\u30e1\u30fc\u30b8\u306b\u95a2\u3059\u308b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3(\u3053\u306eMariaDB-Drupal\u30a4\u30e1\u30fc\u30b8\u306f\u3053\u308c\u3092\u30d9\u30fc\u30b9\u306b\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u3059)</p>"},{"location":"ja/applications/drupal/services/#redis","title":"Redis\u306f\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u30d6\u30ed\u30fc\u30ab\u30fc\u3001\u30ad\u30e5\u30fc\u3068\u3057\u3066\u4f7f\u7528\u3059\u308b\u305f\u3081\u306e\u3001\u9ad8\u901f\u3067\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30a4\u30f3\u30e1\u30e2\u30ea\u30fb\u30ad\u30fc\u30d0\u30ea\u30e5\u30fc\u30fb\u30c7\u30fc\u30bf\u30b9\u30c8\u30a2\u3067\u3059","text":"<p>Drupal\u3068Redis\u306b\u3064\u3044\u3066\u5b66\u3076</p> <p>Redis-persistent\u30a4\u30e1\u30fc\u30b8\u306b\u95a2\u3059\u308b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3</p>"},{"location":"ja/applications/drupal/services/#solr","title":"Solr\u306f\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u691c\u7d22\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3067\u3059","text":"<p>Drupal\u3068Solr\u306b\u3064\u3044\u3066\u5b66\u3076</p> <p>\u6a19\u6e96\u7684\u306aSolr\u30a4\u30e1\u30fc\u30b8\u306b\u95a2\u3059\u308b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3 (\u3053\u306eSolr-Drupal\u30a4\u30e1\u30fc\u30b8\u306f\u3053\u308c\u3092\u30d9\u30fc\u30b9\u306b\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u3059)</p>"},{"location":"ja/applications/drupal/services/#varnishhttphttp","title":"Varnish\u306f\u3001\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u306e\u901f\u5ea6\u3092\u5411\u4e0a\u3055\u305b\u308b\u305f\u3081\u306e\u5f37\u529b\u306a\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306eHTTP\u30a8\u30f3\u30b8\u30f3\u304a\u3088\u3073\u30ea\u30d0\u30fc\u30b9HTTP\u30d7\u30ed\u30ad\u30b7\u3067\u3059","text":"<p>Drupal\u3068Varnish\u306b\u3064\u3044\u3066\u5b66\u3076</p> <p>\u6a19\u6e96\u7684\u306aVarnish\u30a4\u30e1\u30fc\u30b8\u306b\u95a2\u3059\u308b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3 (\u3053\u306eVarnish-Drupal\u30a4\u30e1\u30fc\u30b8\u306f\u3053\u308c\u3092\u30d9\u30fc\u30b9\u306b\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u3059)</p>"},{"location":"ja/applications/drupal/services/mariadb/","title":"MariaDB","text":"<p>Lagoon\u306e <code>mariadb-drupal</code> Docker\u30a4\u30e1\u30fc\u30b8 Dockerfile \u306f\u3001Lagoon\u306eDrupal\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5185\u3067\u4f7f\u7528\u3059\u308b\u305f\u3081\u306b\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3055\u308c\u305f <code>mariadb</code> \u30a4\u30e1\u30fc\u30b8\u3067\u3059\u3002 <code>mariadb</code> \u30a4\u30e1\u30fc\u30b8\u3068\u7570\u306a\u308b\u306e\u306f\u3001\u3044\u304f\u3064\u304b\u306e\u74b0\u5883\u5909\u6570\u306b\u3088\u3063\u3066\u884c\u308f\u308c\u308b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u521d\u671f\u8a2d\u5b9a\u3060\u3051\u3067\u3059:</p> \u74b0\u5883\u5909\u6570 \u30c7\u30d5\u30a9\u30eb\u30c8 \u8aac\u660e <code>MARIADB_DATABASE</code> drupal \u8d77\u52d5\u6642\u306b\u4f5c\u6210\u3055\u308c\u308bDrupal\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 <code>MARIADB_USER</code> drupal \u8d77\u52d5\u6642\u306b\u4f5c\u6210\u3055\u308c\u308b\u30c7\u30d5\u30a9\u30eb\u30c8\u30e6\u30fc\u30b6\u30fc <code>MARIADB_PASSWORD</code> drupal \u8d77\u52d5\u6642\u306b\u4f5c\u6210\u3055\u308c\u308b\u30c7\u30d5\u30a9\u30eb\u30c8\u30e6\u30fc\u30b6\u30fc\u306e\u30d1\u30b9\u30ef\u30fc\u30c9 <p><code>LAGOON_ENVIRONMENT_TYPE</code> \u5909\u6570\u304c <code>production</code> \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306f <code>MARIADB_INNODB_BUFFER_POOL_SIZE=1024</code> \u304a\u3088\u3073 <code>MARIADB_INNODB_LOG_FILE_SIZE=256</code> \u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u6700\u9069\u5316\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/services/mariadb/#mariadb_1","title":"MariaDB \u30ed\u30b0\u306e\u8ffd\u52a0\u8a2d\u5b9a","text":"<p>\u958b\u767a\u306e\u904e\u7a0b\u3067\u3001\u30af\u30a8\u30ea\u30ed\u30b0\u307e\u305f\u306f\u30b9\u30ed\u30fc\u30af\u30a8\u30ea\u30ed\u30b0\u3092\u6709\u52b9\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u305d\u3046\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u74b0\u5883\u5909\u6570 <code>MARIADB_LOG_SLOW</code> \u307e\u305f\u306f <code>MARIADB_LOG_QUERIES</code> \u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u3053\u308c\u306f<code>docker-compose.yml</code>\u3067\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059.</p>"},{"location":"ja/applications/drupal/services/mariadb/#mysql","title":"\u30db\u30b9\u30c8\u304b\u3089MySQL\u30b3\u30f3\u30c6\u30ca\u3078\u306e\u63a5\u7d9a","text":"<p>Sequel Pro\u3001MySQL Workbench\u3001HeidiSQL\u3001DBeaver\u3001\u6a19\u6e96\u7684\u306a<code>mysql-cli</code>\u306a\u3069\u306e\u5916\u90e8\u30c4\u30fc\u30eb\u3092\u4f7f\u3063\u3066\u3001Docker\u30b3\u30f3\u30c6\u30ca\u5185\u306eMySQL\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u63a5\u7d9a\u3057\u305f\u3044\u5834\u5408\u3001IP\u30a2\u30c9\u30ec\u30b9\u3068\u30dd\u30fc\u30c8\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u65b9\u6cd5\u3092\u4ee5\u4e0b\u306b\u793a\u3057\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/services/mariadb/#mysql_1","title":"\u30b3\u30f3\u30c6\u30ca\u304b\u3089\u516c\u958b\u3055\u308c\u305f MySQL \u30dd\u30fc\u30c8\u3092\u53d6\u5f97\u3059\u308b","text":"<p>\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001Docker\u306f\u5404\u30b3\u30f3\u30c6\u30ca\u8d77\u52d5\u6642\u306bMySQL\u306e\u516c\u958b\u30dd\u30fc\u30c8\u3092\u30e9\u30f3\u30c0\u30e0\u306b\u5272\u308a\u5f53\u3066\u307e\u3059\u3002\u3053\u308c\u306f\u30dd\u30fc\u30c8\u306e\u885d\u7a81\u3092\u9632\u3050\u305f\u3081\u306b\u884c\u308f\u308c\u307e\u3059\u3002</p> <p><code>docker</code>\u3092\u4f7f\u3063\u3066\u516c\u958b\u30dd\u30fc\u30c8\u3092\u53d6\u5f97\u3059\u308b\u306b\u306f:</p> <p><code>docker port [container_name]</code>\u3092\u5b9f\u884c</p> \u30dd\u30fc\u30c8\u3092\u53d6\u5f97\u3059\u308b<pre><code>$ docker port drupal_example_mariadb_1\n3306/tcp -&gt; 0.0.0.0:32797\n</code></pre> <p>\u307e\u305f\u306f\u3001Drupal\u30ea\u30dd\u30b8\u30c8\u30ea\u5185\u306e<code>docker-compose</code>\u3092\u4f7f\u7528\u3057\u3066:</p> <p><code>docker-compose port [service_name] [internal_port]</code>\u3092\u5b9f\u884c</p> \u30dd\u30fc\u30c8\u3092\u8a2d\u5b9a\u3059\u308b<pre><code>docker-compose port mariadb 3306\n0.0.0.0:32797\n</code></pre>"},{"location":"ja/applications/drupal/services/mariadb/#_1","title":"\u9759\u7684\u30dd\u30fc\u30c8\u306e\u8a2d\u5b9a(\u975e\u63a8\u5968)","text":"<p>\u958b\u767a\u4e2d\u306b\u5916\u90e8\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c4\u30fc\u30eb\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u3001MySQL\u63a5\u7d9a\u30dd\u30fc\u30c8\u3092\u5e38\u306b\u78ba\u8a8d\u3057\u8a2d\u5b9a\u3059\u308b\u306e\u306f\u9762\u5012\u306b\u306a\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002</p> <p>\u9759\u7684\u30dd\u30fc\u30c8\u3092\u8a2d\u5b9a\u3059\u308b\u306b\u306f\u3001<code>docker-compose.yml</code>\u306e\u30b5\u30fc\u30d3\u30b9\u5b9a\u7fa9\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002</p> docker-compose.yml<pre><code>  mariadb:\n...\nports:\n- \"33772:3306\" # \u30dd\u30fc\u30c83306\u3092\u30db\u30b9\u30c8\u30dd\u30fc\u30c8\u306e33772\u3092\u6307\u5b9a\u3057\u3066\u516c\u958b\u3057\u307e\u3059\u3002\u3053\u308c\u3092\u884c\u3046\u3053\u3068\u3067\u3001\u30dd\u30fc\u30c8\u306e\u885d\u7a81\u3092\u7ba1\u7406\u3059\u308b\u8cac\u4efb\u304c\u3042\u308b\u3053\u3068\u306b\u6ce8\u610f\u3059\u308b\u3053\u3068\u3002\n</code></pre> <p>\u8b66\u544a</p> <p>\u9759\u7684\u30dd\u30fc\u30c8\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u30dd\u30fc\u30c8\u306e\u885d\u7a81\u3092\u7ba1\u7406\u3059\u308b\u8cac\u4efb\u304c\u751f\u3058\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/services/mariadb/#mysql_2","title":"MySQL\u3078\u306e\u63a5\u7d9a","text":"<p>\u3053\u308c\u3089\u306e\u8a73\u7d30\u3092\u4f7f\u7528\u3057\u3066\u3001\u304a\u597d\u307f\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u7ba1\u7406\u30c4\u30fc\u30eb\u306b\u63a5\u7d9a\u3067\u304d\u307e\u3059\u3002</p> Linux OS X IP/\u30db\u30b9\u30c8 \u30b3\u30f3\u30c6\u30ca\u304b\u3089\u306eIP <code>docker.amazee.io</code> \u30dd\u30fc\u30c8 \u30b3\u30f3\u30c6\u30ca\u304b\u3089\u516c\u958b\u3055\u308c\u305f\u30dd\u30fc\u30c8 \u30b3\u30f3\u30c6\u30ca\u304b\u3089\u516c\u958b\u3055\u308c\u305f\u30dd\u30fc\u30c8 \u30e6\u30fc\u30b6\u30fc\u540d <code>drupal</code> <code>drupal</code> \u30d1\u30b9\u30ef\u30fc\u30c9 <code>drupal</code> <code>drupal</code> \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 <code>drupal</code> <code>drupal</code>"},{"location":"ja/applications/drupal/services/nginx/","title":"NGINX","text":"<p>Lagoon\u306e<code>nginx-drupal</code> Docker\u30a4\u30e1\u30fc\u30b8\u3002Drupal\u3068\u9023\u643a\u3059\u308b\u3088\u3046\u306b\u6700\u9069\u5316\u3055\u308c\u3066\u3044\u307e\u3059\u3002Lagoon\u306e<code>nginx</code>\u30a4\u30e1\u30fc\u30b8\u306b\u57fa\u3065\u3044\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/services/nginx/#lagoon-adaptions","title":"Lagoon\u306e\u9069\u5fdc","text":"<p>\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306f\u3001Lagoon\u3067\u4f7f\u7528\u3059\u308b\u305f\u3081\u306b\u6e96\u5099\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u3059\u3067\u306b\u3044\u304f\u3064\u304b\u306e\u3053\u3068\u304c\u884c\u308f\u308c\u3066\u3044\u307e\u3059:</p> <ul> <li>\u30d5\u30a9\u30eb\u30c0\u306e\u6a29\u9650\u306f\u3001<code>fix-permissions</code>\u3067\u81ea\u52d5\u7684\u306b\u9069\u5fdc\u3055\u308c\u308b\u305f\u3081\u3001\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306f\u30e9\u30f3\u30c0\u30e0\u306a\u30e6\u30fc\u30b6\u30fc\u3067\u52d5\u4f5c\u3057\u307e\u3059\u3002</li> <li><code>drupal.conf</code>\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u3067\u304d\u308b\u3060\u3051\u30b7\u30f3\u30d7\u30eb\u3067\u3001\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3057\u3084\u3059\u3044\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306b\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u30e1\u30a4\u30f3\u30bb\u30af\u30b7\u30e7\u30f3(<code>server</code>\u3001<code>location /</code>\u3001<code>location @drupal</code>\u3001<code>location @php</code>)\u306b<code>include</code>\u6307\u793a\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002</li> <li><code>Drupal.conf</code>\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u3055\u3089\u306a\u308b\u60c5\u5831\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002</li> </ul>"},{"location":"ja/applications/drupal/services/nginx/#drupal-drupalconf","title":"\u542b\u307e\u308c\u308bDrupal\u8a2d\u5b9a - <code>drupal.conf</code>","text":"<p>\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306b\u306f\u3001Drupal 7, 8, 9\u306e\u5b8c\u5168\u306aNGINX\u52d5\u4f5c\u8a2d\u5b9a\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u8ffd\u52a0\u6a5f\u80fd\u3082\u542b\u307e\u308c\u3066\u3044\u307e\u3059:</p> <ul> <li><code>humanstxt</code> Drupal\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30b5\u30dd\u30fc\u30c8</li> <li><code>robotstxt</code> Drupal\u30e2\u30b8\u30e5\u30fc\u30eb</li> <li>\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u7528\u306e<code>vagrant</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u7981\u6b62\u3057\u307e\u3059\u3002</li> </ul>"},{"location":"ja/applications/drupal/services/nginx/#drupalconf-customization","title":"<code>Drupal.conf</code>\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba","text":"<p><code>drupal.conf</code>\u30d5\u30a1\u30a4\u30eb\u306f\u3001<code>nginx</code>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092Drupal\u7528\u306b\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3057\u305f\u3082\u306e\u3067\u3059\u3002\u9867\u5ba2\u306b\u3088\u3063\u3066\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u65b9\u6cd5\u306f\u69d8\u3005\u3067\u3059:</p> <ul> <li>\u4fee\u6b63\u304c\u56f0\u96e3 (\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u5834\u5408\u306e\u30b5\u30dd\u30fc\u30c8\u304c\u96e3\u3057\u3044 )</li> <li><code>*.conf</code>\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u7528\u3057\u305f\u7d44\u307f\u8fbc\u307f\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba</li> </ul> <p><code>drupal.conf</code>\u30d5\u30a1\u30a4\u30eb\u306f\u3044\u304f\u3064\u304b\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u306b\u5206\u304b\u308c\u3066\u3044\u307e\u3059\u3002\u79c1\u305f\u3061\u304c\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u306b\u542b\u3081\u305f\u30bb\u30af\u30b7\u30e7\u30f3\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059:</p> <ul> <li><code>server</code></li> <li><code>location /</code></li> <li><code>location @drupal</code></li> <li><code>location @php</code>.</li> </ul> <p>\u3053\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u306b\u306f\u3001\u305d\u308c\u305e\u308c2\u3064\u306e\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u304c\u3042\u308a\u307e\u3059:</p> <ul> <li><code>*_prepend.conf</code></li> <li><code>*_append.conf</code></li> </ul> <p><code>location @drupal</code>\u30bb\u30af\u30b7\u30e7\u30f3\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059:</p> drupal.conf<pre><code>location @drupal {\ninclude /etc/nginx/conf.d/drupal/location_drupal_prepend*.conf;\ninclude        /etc/nginx/fastcgi.conf;\nfastcgi_param  SCRIPT_NAME        /index.php;\nfastcgi_param  SCRIPT_FILENAME    $realpath_root/index.php;\nfastcgi_pass   ${NGINX_FASTCGI_PASS:-php}:9000;\ninclude /etc/nginx/conf.d/drupal/location_drupal_append*.conf;\n}\n</code></pre> <p>\u3053\u306e\u8a2d\u5b9a\u306f\u3001\u304a\u5ba2\u3055\u307e\u304c<code>location_drupal_prepend.conf</code>\u304a\u3088\u3073<code>location_drupal_append.conf</code>\u3068\u3044\u3046\u540d\u524d\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u3092\u8a31\u53ef\u3057\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u306f\u3001\u4ed6\u306e\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8\u306e\u524d\u306b\u633f\u5165\u3057\u305f\u3044\u8a2d\u5b9a\u3068\u3001\u5f8c\u306b\u633f\u5165\u3057\u305f\u3044\u8a2d\u5b9a\u3092\u3059\u3079\u3066\u8a18\u8ff0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p>\u3053\u308c\u3089\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u4e00\u5ea6\u4f5c\u6210\u3055\u308c\u308b\u3068\u3001<code>nginx</code>\u30b3\u30f3\u30c6\u30ca\u5185\u306b\u5fc5\u305a\u5b58\u5728\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u306e\u3067\u3001<code>Dockerfile.nginx</code>\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8ffd\u52a0\u3057\u307e\u3059:</p> dockerfile.nginx<pre><code>COPY location_drupal_prepend.conf /etc/nginx/conf.d/drupal/location_drupal_prepend.conf\nRUN fix-permissions /etc/nginx/conf.d/drupal/location_drupal_prepend.conf\n</code></pre>"},{"location":"ja/applications/drupal/services/nginx/#drupal-core-statistics-module-configuration","title":"Drupal Core Statistics\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u8a2d\u5b9a","text":"<p>\u30b3\u30a2\u306eStatistics\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u7c21\u5358\u306a\u8a2d\u5b9a\u5909\u66f4\u304c\u5fc5\u8981\u306b\u306a\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002</p> <p>\u30c7\u30d5\u30a9\u30eb\u30c8\u306eNGINX\u8a2d\u5b9a\u3067\u306f\u3001\u30c8\u30e9\u30c3\u30ad\u30f3\u30b0\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8<code>/core/modules/statistics/statistics.php</code>\u3078\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u62d2\u5426\u3055\u308c\u307e\u3059(404)</p> <p>\u3053\u308c\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306eNGINX\u8a2d\u5b9a\u306b\u95a2\u9023\u3057\u3066\u3044\u307e\u3059:</p> drupal.conf<pre><code>location ~* ^.+\\.php$ {\n    try_files /dev/null @drupal;\n}\n</code></pre> <p>\u3053\u306e\u554f\u984c\u3092\u89e3\u6c7a\u3059\u308b\u305f\u3081\u306b\u3001\u7279\u5b9a\u306e\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u30eb\u30fc\u30eb\u3092\u5b9a\u7fa9\u3057\u3001\u3053\u308c\u3092\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d7\u30ea\u30da\u30f3\u30c9\u8a2d\u5b9a\u3068\u3057\u3066\u6ce8\u5165\u3057\u307e\u3059:</p> drupal.conf<pre><code>## Allow access to to the statistics endpoint.\nlocation ~* ^(/core/modules/statistics/statistics.php) {\n      try_files /dev/null @php;\n}\n</code></pre> <p>NGINX\u30b3\u30f3\u30c6\u30ca\u306e\u30d3\u30eb\u30c9\u6642\u306b\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> dockerfile.nginx<pre><code># Drupal Statistics\u30e2\u30b8\u30e5\u30fc\u30eb\u306eNGINX\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3059\u308b\nCOPY .lagoon/nginx/location_prepend_allow_statistics.conf /etc/nginx/conf.d/drupal/location_prepend_allow_statistics.conf\n</code></pre>"},{"location":"ja/applications/drupal/services/php-cli/","title":"PHP-cli","text":"<p>Lagoon\u306e<code>php-cli-drupal</code> Docker\u30a4\u30e1\u30fc\u30b8\u306fDrupal\u3068\u9023\u643a\u3059\u308b\u305f\u3081\u306b\u6700\u9069\u5316\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306fLagoon\u306e<code>php-cli</code>\u30a4\u30e1\u30fc\u30b8\u3092\u57fa\u306b\u4f5c\u3089\u308c\u3066\u304a\u308a\u3001Drupal\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u306e\u65e5\u3005\u306e\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u306b\u5fc5\u8981\u306a\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30c4\u30fc\u30eb\u5168\u3066\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002</p> <ul> <li><code>drush</code></li> <li><code>drupal console</code></li> <li><code>drush launcher</code> (Drush\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u30b5\u30a4\u30c8\u304c\u898b\u3064\u304b\u3089\u306a\u3044\u5834\u5408\u3001Drush 8\u306b\u30d5\u30a9\u30fc\u30eb\u30d0\u30c3\u30af\u3057\u307e\u3059)</li> </ul>"},{"location":"ja/applications/drupal/services/php-cli/#supported-versions","title":"\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3","text":"<ul> <li>7.3 (\u4e92\u63db\u6027\u306e\u305f\u3081\u306b\u5229\u7528\u53ef\u80fd\u3067\u3059\u304c\u3001\u516c\u5f0f\u30b5\u30dd\u30fc\u30c8\u306f\u7d42\u4e86) - <code>uselagoon/php-7.3-cli-drupal</code></li> <li>7.4 (\u4e92\u63db\u6027\u306e\u305f\u3081\u306b\u5229\u7528\u53ef\u80fd\u3067\u3059\u304c\u3001\u516c\u5f0f\u30b5\u30dd\u30fc\u30c8\u306f\u7d42\u4e86) - <code>uselagoon/php-7.4-cli-drupal</code></li> <li>8.0 (\u4e92\u63db\u6027\u306e\u305f\u3081\u306b\u5229\u7528\u53ef\u80fd\u3067\u3059\u304c\u3001\u516c\u5f0f\u30b5\u30dd\u30fc\u30c8\u306f\u7d42\u4e86) - <code>uselagoon/php-8.0-cli-drupal</code></li> <li>8.1 Dockerfile - <code>uselagoon/php-8.1-cli-drupal</code></li> <li>8.2 Dockerfile - <code>uselagoon/php-8.2-cli-drupal</code></li> <li>8.3 Dockerfile - <code>uselagoon/php-8.3-cli-drupal</code></li> </ul> <p>\u5168\u3066\u306ePHP\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u305d\u308c\u305e\u308c\u306eDockerfiles\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/services/php-cli/#lagoon-adaptions","title":"Lagoon\u306e\u9069\u5fdc","text":"<p>\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306fLagoon\u3067\u4f7f\u7528\u3055\u308c\u308b\u3053\u3068\u3092\u60f3\u5b9a\u3057\u3066\u6e96\u5099\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u3059\u3067\u306b\u3044\u304f\u3064\u304b\u306e\u3053\u3068\u304c\u884c\u308f\u308c\u3066\u3044\u307e\u3059:</p> <ul> <li>\u30d5\u30a9\u30eb\u30c0\u306e\u6a29\u9650\u306f\u3001<code>fix-permissions</code>\u3067\u81ea\u52d5\u7684\u306b\u9069\u5fdc\u3055\u308c\u308b\u305f\u3081\u3001\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306f\u30e9\u30f3\u30c0\u30e0\u306a\u30e6\u30fc\u30b6\u30fc\u3067\u52d5\u4f5c\u3057\u307e\u3059\u3002</li> </ul>"},{"location":"ja/applications/drupal/services/redis/","title":"Redis","text":"<p>\u5185\u90e8\u30ad\u30e3\u30c3\u30b7\u30f3\u30b0\u306b\u306f\u3001Redis\u306e\u4f7f\u7528\u3092\u63a8\u5968\u3057\u307e\u3059\u3002Redis\u30b5\u30fc\u30d3\u30b9\u3092 <code>docker-compose.yaml</code>\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> docker-compose.yml<pre><code>  redis:\nimage: uselagoon/redis-5\nlabels:\nlagoon.type: redis\n&lt;&lt; : *default-user # \u5b9a\u7fa9\u6e08\u307f\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\nenvironment:\n&lt;&lt; : *default-environment\n</code></pre> <p>\u307e\u305f\u3001Redis\u3092\u8a2d\u5b9a\u3059\u308b\u306b\u306f\u3001\u4ee5\u4e0b\u3092<code>settings.php</code>\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/services/redis/#drupal-7","title":"Drupal 7","text":"settings.php<pre><code>  if(getenv('LAGOON')){\n    $conf['redis_client_interface'] = 'PhpRedis';\n    $conf['redis_client_host'] = 'redis';\n    $conf['lock_inc'] = 'sites/all/modules/contrib/redis/redis.lock.inc';\n    $conf['path_inc'] = 'sites/all/modules/contrib/redis/redis.path.inc';\n    $conf['cache_backends'][] = 'sites/all/modules/contrib/redis/redis.autoload.inc';\n    $conf['cache_default_class'] = 'Redis_Cache';\n    $conf['cache_class_cache_form'] = 'DrupalDatabaseCache';\n    $conf['cache_class_cache_field'] = 'DrupalDatabaseCache';\n  }\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306e\u69cb\u9020\u306b\u3088\u3063\u3066\u306f\u3001\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30d1\u30b9\u3092\u66f4\u65b0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002</p>"},{"location":"ja/applications/drupal/services/redis/#drupal-8","title":"Drupal 8","text":"<p>Drupal 8 \u306e\u8a2d\u5b9a\u306f\u307b\u3068\u3093\u3069\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u306e\u307e\u307e\u3067\u3059\u304c\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b Redis \u306f\u7121\u52b9\u5316\u3055\u308c\u307e\u3059\u3002</p> settings.php<pre><code>if (getenv('LAGOON')){\n  $settings['redis.connection']['interface'] = 'PhpRedis';\n  $settings['redis.connection']['host'] = getenv('REDIS_HOST') ?: 'redis';\n  $settings['redis.connection']['port'] = getenv('REDIS_SERVICE_PORT') ?: '6379';\n  $settings['cache_prefix']['default'] = getenv('LAGOON_PROJECT') . '_' . getenv('LAGOON_GIT_SAFE_BRANCH');\n  // Drupal\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u4e2d\u306b\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u8a2d\u5b9a\u3057\u306a\u3044\u3002\n  if (!drupal_installation_attempted() &amp;&amp; extension_loaded('redis')) {\n    $settings['cache']['default'] = 'cache.backend.redis';\n    // \u305d\u3057\u3066\u3001Redis\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u306a\u304f\u3066\u3082\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\n    $class_loader-&gt;addPsr4('Drupal\\\\redis\\\\', 'modules/contrib/redis/src');\n    $settings['bootstrap_container_definition'] = [\n      'parameters' =&gt; [],\n      'services' =&gt; [\n        'redis.factory' =&gt; [\n          'class' =&gt; 'Drupal\\redis\\ClientFactory',\n        ],\n        'cache.backend.redis' =&gt; [\n          'class' =&gt; 'Drupal\\redis\\Cache\\CacheBackendFactory',\n          'arguments' =&gt; ['@redis.factory', '@cache_tags_provider.container', '@serialization.phpserialize'],\n        ],\n        'cache.container' =&gt; [\n          'class' =&gt; '\\Drupal\\redis\\Cache\\PhpRedis',\n           'factory' =&gt; ['@cache.backend.redis', 'get'],\n          'arguments' =&gt; ['container'],\n        ],\n        'cache_tags_provider.container' =&gt; [\n          'class' =&gt; 'Drupal\\redis\\Cache\\RedisCacheTagsChecksum',\n          'arguments' =&gt; ['@redis.factory'],\n        ],\n        'serialization.phpserialize' =&gt; [\n          'class' =&gt; 'Drupal\\Component\\Serialization\\PhpSerialize',\n        ],\n      ],\n    ];\n  }\n}\n</code></pre>"},{"location":"ja/applications/drupal/services/redis/#_1","title":"\u6c38\u7d9a\u6027","text":"<p>Redis\u306f\u3001\u6c38\u7d9a\u7684\u306a\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3068\u3057\u3066\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002</p> docker-compose.yml<pre><code>redis:\nimage: uselagoon/redis-5-persistent\nlabels:\nlagoon.type: redis-persistent\nenvironment:\n&lt;&lt; : *default-environment\n</code></pre>"},{"location":"ja/applications/drupal/services/redis/#environment-variables","title":"\u74b0\u5883\u5909\u6570","text":"<p>\u74b0\u5883\u5909\u6570\u306f\u3001Redis\u306b\u95a2\u3059\u308b\u4e00\u822c\u7684\u306a\u60c5\u5831\u3092\u4fdd\u5b58\u3059\u308b\u305f\u3081\u306e\u3082\u306e\u3067\u3059\u3002</p> \u74b0\u5883\u5909\u6570 \u30c7\u30d5\u30a9\u30eb\u30c8 \u8aac\u660e <code>LOGLEVEL</code> <code>notice</code> Redis\u306e\u30ed\u30b0\u30ec\u30d9\u30eb <code>DATABASES</code> <code>1</code> \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u6570 <code>MAXMEMORY</code> <code>100mb</code> Redis\u306e\u6700\u5927\u30e1\u30e2\u30ea\u4f7f\u7528\u91cf"},{"location":"ja/applications/drupal/services/redis/#redis_1","title":"Redis\u306e\u30d5\u30a7\u30a4\u30eb\u30aa\u30fc\u30d0\u30fc","text":"<p>Redis\u30b3\u30f3\u30c6\u30ca\u304c\u5229\u7528\u3067\u304d\u306a\u3044\u5834\u5408(\u4f8b\u3048\u3070\u3001\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u4e2d\u306a\u3069)\u306bRedis\u306e\u30d5\u30a7\u30a4\u30eb\u30aa\u30fc\u30d0\u30fc\u3092\u5b9f\u88c5\u3059\u308b\u305f\u3081\u306e\u30b9\u30cb\u30da\u30c3\u30c8\u3092\u4ee5\u4e0b\u306b\u793a\u3057\u307e\u3059\u3002</p> <p>\u4ee5\u4e0b\u3092Drupal\u306e\u30a2\u30af\u30c6\u30a3\u30d6\u306a<code>settings.php</code>\u30d5\u30a1\u30a4\u30eb\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> settings.php<pre><code>if (getenv('LAGOON')) {\n  $contrib_path = is_dir('sites/all/modules/contrib') ? 'sites/all/modules/contrib' : 'sites/all/modules';\n  $redis = DRUPAL_ROOT . '/sites/all/modules/contrib/redis';\n  if (file_exists(\"$redis/redis.module\")) {\n    require_once \"$redis/redis.module\";\n    $conf['redis_client_host'] = getenv('REDIS_HOST') ?: 'redis';\n    $conf['redis_client_port'] = getenv('REDIS_SERVICE_PORT') ?: 6379;\n    $conf['cache_prefix'] = getenv('REDIS_CACHE_PREFIX') ?: getenv('LAGOON_PROJECT') . '_' . getenv('LAGOON_GIT_SAFE_BRANCH');\n    try {\n      // Redis\u306b\u63a5\u7d9a\u304c\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n      $client = Redis_Client::getClient();\n      $response = $client-&gt;ping();\n      if (!$response) {\n      throw new \\Exception('Redis\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3057\u305f\u304c\u3001\u6b63\u3057\u304f\u5fdc\u7b54\u3057\u3066\u3044\u307e\u305b\u3093\u3002');\n      }\n      $conf['redis_client_interface'] = 'PhpRedis';\n      $conf['lock_inc'] = $contrib_path . '/redis/redis.lock.inc';\n      $conf['path_inc'] = $contrib_path . '/redis/redis.path.inc';\n      $conf['cache_backends'][] = $contrib_path . '/redis/redis.autoload.inc';\n      $conf['cache_default_class'] = 'Redis_Cache';\n    } catch (\\Exception $e) {\n      // Redis \u3053\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u306f\u5229\u7528\u3067\u304d\u306a\u3044\u305f\u3081\u3001Redis\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u306e\u8a2d\u5b9a\u3092\u884c\u308f\u305a\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u304c\u4f7f\u7528\u3055\u308c\u306a\u3044\u3088\u3046\u306b\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u6b21\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u518d\u8a66\u884c\u3055\u308c\u307e\u3059\u3002\n      // 'DrupalFakeCache'\u30af\u30e9\u30b9\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\n      if (!class_exists('DrupalFakeCache')) {\n        $conf['cache_backends'][] = 'includes/cache-install.inc';\n      }\n      $conf['cache_default_class'] = 'DrupalFakeCache';\n    }\n  }\n}\n</code></pre>"},{"location":"ja/applications/drupal/services/solr/","title":"Solr","text":""},{"location":"ja/applications/drupal/services/solr/#_1","title":"\u6a19\u6e96\u7684\u306a\u4f7f\u3044\u65b9","text":"<p>Solr 5.5\u30016.6\u3001\u304a\u3088\u3073 7.7\u3067\u306f\u3001search_api_solr Drupal\u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u3088\u3063\u3066\u63d0\u4f9b\u3055\u308c\u308b\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30b9\u30ad\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002\u4f7f\u7528\u3059\u308bSolr\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u4f8b\u306e\u3088\u3046\u306b<code>docker-compose.yml</code>\u30d5\u30a1\u30a4\u30eb\u306b\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/applications/drupal/services/solr/#_2","title":"\u30ab\u30b9\u30bf\u30e0\u30b9\u30ad\u30fc\u30de","text":"<p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067Solr\u306e\u30b9\u30ad\u30fc\u30de\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3092\u5b9f\u88c5\u3059\u308b\u306b\u306f\u3001Lagoon\u304c\u3069\u306e\u3088\u3046\u306b\u6a19\u6e96\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210\u3059\u308b\u304b\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <ul> <li><code>docker-compose.yml</code> \u30d5\u30a1\u30a4\u30eb\u306e <code>solr</code> \u30bb\u30af\u30b7\u30e7\u30f3\u3067\u3001 <code>image: uselagoon/solr:8</code> \u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7f6e\u304d\u63db\u3048\u307e\u3059:</li> </ul> docker-compose.yml<pre><code>  build:\ncontext: .\ndockerfile: solr.dockerfile\n</code></pre> <ul> <li>\u30b9\u30ad\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30fc\u30c9\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u914d\u7f6e\u3057\u307e\u3059\u3002\u901a\u5e38\u3001<code>.lagoon/solr</code>\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002</li> <li><code>solr.dockerfile</code> \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</li> </ul> solr.dockerfile<pre><code>FROM uselagoon/solr:8\n\nCOPY .lagoon/solr /solr-conf/conf\n\nCMD solr-recreate drupal /solr-conf &amp;&amp; solr-foreground\n</code></pre> <p>\u76ee\u6a19\u306f\u3001\u30d3\u30eb\u30c9\u3059\u308b\u30a4\u30e1\u30fc\u30b8\u306e<code>/solr-conf/conf</code>Solr\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3059\u308b\u3053\u3068\u3067\u3059\u3002</p>"},{"location":"ja/applications/drupal/services/solr/#_3","title":"\u30de\u30eb\u30c1\u30b3\u30a2","text":"<p>\u8907\u6570\u306e\u30b3\u30a2\u3092\u5b9f\u88c5\u3059\u308b\u306b\u306f\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306b\u72ec\u81ea\u306eSolr\u30b9\u30ad\u30fc\u30de\u3092\u7528\u610f\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u5fc5\u8981\u306a\u5909\u66f4\u306fDockerfile\u306e<code>CMD</code>\u3060\u3051\u3067\u3001\u5fc5\u8981\u306a\u30b3\u30a2\u3054\u3068\u306b<code>precreate-core corename /solr-conf/ ;</code>\u306e\u30d1\u30bf\u30fc\u30f3\u3092\u7e70\u308a\u8fd4\u3057\u307e\u3059\u3002</p> solr.dockerfile<pre><code>FROM uselagoon/solr:8-drupal\n\nCMD solr-recreate drupal /solr-conf &amp;&amp; solr-recreate more-drupal /solr-conf &amp;&amp; solr-foreground\n</code></pre>"},{"location":"ja/applications/drupal/services/varnish/","title":"Varnish","text":"<p>Drupal\u3092Varnish\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u3068\u4e00\u7dd2\u306b\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002Lagoon\u306fVarnish\u304c\u3059\u3067\u306b\u8a2d\u5b9a\u6e08\u307f\u306eDrupal Varnish config\u3067<code>varnish-drupal</code>Docker\u30a4\u30e1\u30fc\u30b8\u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002</p> <p>\u3053\u306eVarnish config\u306f\u4ee5\u4e0b\u306e\u3053\u3068\u3092\u884c\u3044\u307e\u3059:</p> <ul> <li>Drupal\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u30af\u30c3\u30ad\u30fc\u3092\u7406\u89e3\u3057\u3001\u8a8d\u8a3c\u3055\u308c\u305f\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u5bfe\u3057\u3066Varnish\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u81ea\u52d5\u7684\u306b\u7121\u52b9\u306b\u3057\u307e\u3059\u3002</li> <li>\u3053\u306e\u6a5f\u80fd\u306f\u3001\u30a2\u30bb\u30c3\u30c8(\u753b\u50cf\u3001CSS\u3001JS\u306a\u3069)\u3092\u81ea\u52d5\u7684\u306b 1 \u304b\u6708\u9593\u30ad\u30e3\u30c3\u30b7\u30e5\u3057\u3001\u30d6\u30e9\u30a6\u30b6\u306b\u3082\u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u305b\u308b\u305f\u3081\u306e\u30d8\u30c3\u30c0\u30fc\u3092\u9001\u4fe1\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u8a8d\u8a3c\u3055\u308c\u305f\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u3082\u8a8d\u8a3c\u3055\u308c\u3066\u3044\u306a\u3044\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u3082\u884c\u308f\u308c\u307e\u3059\u3002</li> <li>Drupal 8\u306e\u30d1\u30fc\u30b8\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u4f7f\u7528\u3055\u308c\u308b<code>BAN</code>\u304a\u3088\u3073<code>URIBAN</code>\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002</li> <li>Google Analytics\u306e\u30ea\u30f3\u30af\u304c\u8907\u6570\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\u306e\u3092\u9632\u3050\u305f\u3081\u306b\u3001URL\u30d1\u30e9\u30e1\u30fc\u30bf\u304b\u3089<code>utm_</code>\u3068<code>gclid</code>\u3092\u524a\u9664\u3057\u307e\u3059\u3002</li> <li>\u4ed6\u306b\u3082\u826f\u3044\u3053\u3068\u304c\u305f\u304f\u3055\u3093\u3042\u308a\u307e\u3059 - drupal.vcl\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul>"},{"location":"ja/applications/drupal/services/varnish/#drupal-8","title":"Drupal 8\u3068\u306e\u4f7f\u7528","text":"<p>\u8981\u7d04: examples repo\u306edrupal8-advanced example\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u5fc5\u8981\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u3068Drupal\u306e\u8a2d\u5b9a\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p>\u6ce8\u610f:\u3053\u308c\u3089\u306e\u4f8b\u306e\u591a\u304f\u306f\u3001\u540c\u3058<code>drupal-example-simple</code>\u30ea\u30dd\u30b8\u30c8\u30ea\u5185\u306e\u7570\u306a\u308b\u30d6\u30e9\u30f3\u30c1/\u30cf\u30c3\u30b7\u30e5\u306b\u5b58\u5728\u3057\u307e\u3059\u3002\u5fc5\u305a\u3001\u30b5\u30f3\u30d7\u30eb\u30ea\u30b9\u30c8\u304b\u3089\u6b63\u78ba\u306a\u30d6\u30e9\u30f3\u30c1\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044!</p>"},{"location":"ja/applications/drupal/services/varnish/#purgevarnish-purge","title":"Purge\u3068Varnish Purge\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>Drupal 8\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u30bf\u30b0\u3067Varnish\u3092\u5b8c\u5168\u306b\u4f7f\u7528\u3059\u308b\u306b\u306f\u3001Purge\u3068Varnish Purge\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u306f\u591a\u304f\u306e\u30b5\u30d6\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002\u5c11\u306a\u304f\u3068\u3082\u4ee5\u4e0b\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\uff1a</p> <ul> <li><code>purge</code></li> <li><code>purge_drush</code></li> <li><code>purge_tokens</code></li> <li><code>purge_ui</code></li> <li><code>purge_processor_cron</code></li> <li><code>purge_processor_lateruntime</code></li> <li><code>purge_queuer_coretags</code></li> <li><code>varnish_purger</code></li> <li><code>varnish_purge_tags</code></li> </ul> <p>\u4e00\u5ea6\u306b\u3059\u3079\u3066\u3092\u53d6\u5f97\u3057\u307e\u3059:</p> Purge\u3068Varnish Purge\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb<pre><code>composer require drupal/purge drupal/varnish_purge\n\ndrush en purge purge_drush purge_tokens purge_ui purge_processor_cron purge_processor_lateruntime purge_queuer_coretags varnish_purger varnish_purge_tags\n</code></pre>"},{"location":"ja/applications/drupal/services/varnish/#varnish-purge","title":"Varnish Purge\u306e\u8a2d\u5b9a","text":"<ol> <li><code>Configuration &gt; Development &gt; Performance &gt; Purge</code>\u306b\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\u3002</li> <li><code>Add purger</code>\u304b\u3089\u30d1\u30fc\u30b8\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</li> <li><code>Varnish Bundled Purger</code>\u3092\u9078\u629e\u3057\u307e\u3059(<code>Varnish Purger</code>\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002#Behind the Scenes\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044)</li> <li>\u8ffd\u52a0\u3057\u305f\u3070\u304b\u308a\u306e\u30d1\u30fc\u30b8\u306e\u6a2a\u306b\u3042\u308b\u30c9\u30ed\u30c3\u30d7\u30c0\u30a6\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001<code>Configure</code>\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</li> <li>\u308f\u304b\u308a\u3084\u3059\u3044\u540d\u524d\u3092\u3064\u3051\u3066\u4e0b\u3055\u3044\u3002<code>Lagoon Varnish</code> \u304c\u826f\u3044\u3067\u3057\u3087\u3046\u3002</li> <li> <p>\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059:</p> Varnish Purge\u306e\u8a2d\u5b9a<pre><code> TYPE: \u30bf\u30b0\n\n REQUEST:\n \u30db\u30b9\u30c8\u540d: varnish\n (\u307e\u305f\u306fdocker-compose.yml\u3067Varnish\u304c\u547c\u3070\u308c\u3066\u3044\u308b\u540d\u524d)\n \u30dd\u30fc\u30c8: 8080\n \u30d1\u30b9: /\n \u30ea\u30af\u30a8\u30b9\u30c8\u65b9\u6cd5: BAN\n \u30b9\u30ad\u30fc\u30e0: http\n\n HEADERS:\n \u30d8\u30c3\u30c0\u30fc: Cache-Tags\n \u5024: [invalidations:separated_pipe]\n</code></pre> </li> <li> <p><code>Save configuration</code>\u8a2d\u5b9a\u3092\u4fdd\u5b58\u3057\u307e\u3059\u3002</p> </li> </ol> <p>\u4ee5\u4e0a\u3067\u8a2d\u5b9a\u306f\u5b8c\u4e86\u3067\u3059\uff01\u30ed\u30fc\u30ab\u30eb\u3067\u30c6\u30b9\u30c8\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u6b21\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3092\u8aad\u3093\u3067\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/applications/drupal/services/varnish/#varnishdrupal","title":"Varnish\u7528\u306eDrupal\u306e\u8a2d\u5b9a","text":"<p>\u4ed6\u306b\u3082\u3044\u304f\u3064\u304b\u306e\u8a2d\u5b9a\u304c\u53ef\u80fd\u3067\u3059:</p> <ol> <li><code>drush pmu page_cache</code>\u3092\u4f7f\u7528\u3057\u3066<code>Internal Page Cache</code> Drupal\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\u3053\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u306f\u3001\u5947\u5999\u306a\u4e8c\u91cd\u30ad\u30e3\u30c3\u30b7\u30e5\u304c\u767a\u751f\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u3001Varnish \u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u307f\u304c\u30af\u30ea\u30a2\u3055\u308c\u3001\u5185\u90e8\u30ad\u30e3\u30c3\u30b7\u30e5\u304c\u30af\u30ea\u30a2\u3055\u308c\u306a\u3044\u305f\u3081\u3001\u5909\u66f4\u304c\u30e6\u30fc\u30b6\u30fc\u306b\u975e\u5e38\u306b\u9045\u304f\u53cd\u6620\u3055\u308c\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u307e\u305f\u3001\u5927\u304d\u306a\u30b5\u30a4\u30c8\u3067\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u5927\u91cf\u306b\u4f7f\u7528\u3057\u307e\u3059\u3002</li> <li><code>production.settings.php</code>\u5185\u306e<code>$config['system.performance']['cache']['page']['max_age']</code>\u3092<code>2628000</code>\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001Varnish \u30ad\u30e3\u30c3\u30b7\u30e5\u306f\u30b5\u30a4\u30c8\u3092\u6700\u5927 1 \u30f6\u6708\u9593\u30ad\u30e3\u30c3\u30b7\u30e5\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\u4e00\u898b\u9577\u3044\u3088\u3046\u306b\u601d\u308f\u308c\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001Drupal 8 \u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u30bf\u30b0\u30b7\u30b9\u30c6\u30e0\u306f\u975e\u5e38\u306b\u512a\u79c0\u3067\u3001\u4f55\u3089\u304b\u306e\u5909\u66f4\u304c\u884c\u308f\u308c\u308b\u3068\u3001Varnish \u30ad\u30e3\u30c3\u30b7\u30e5\u304c\u81ea\u52d5\u7684\u306b\u66f4\u65b0\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002</li> </ol>"},{"location":"ja/applications/drupal/services/varnish/#varnish_1","title":"\u30ed\u30fc\u30ab\u30eb\u3067\u306e Varnish \u30c6\u30b9\u30c8","text":"<p>Lagoon\u306e\u30ed\u30fc\u30ab\u30eb\u3067\u306eDrupal\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3067\u306f\u3001\u958b\u767a\u4f5c\u696d\u306e\u59a8\u3052\u306b\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u305f\u3081\u3001Varnish\u3068Drupal\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u306f\u304c\u7121\u52b9\u5316\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u7121\u52b9\u5316\u65b9\u6cd5\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059:</p> <ul> <li><code>docker-compose.yml</code>\u30d5\u30a1\u30a4\u30eb\u5185\u306e\u74b0\u5883\u5909\u6570<code>VARNISH_BYPASS=true</code>\u306b\u3088\u308a\u3001Varnish\u306b\u4e8b\u5b9f\u4e0a\u7121\u52b9\u5316\u3092\u6307\u793a\u3057\u3066\u3044\u307e\u3059\u3002</li> <li>Drupal \u304c\u30ad\u30e3\u30c3\u30b7\u30e5\u30d8\u30c3\u30c0\u30fc\u3092\u9001\u4fe1\u3057\u306a\u3044\u3088\u3046\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059(\u958b\u767a\u74b0\u5883\u3088\u3046\u306e<code>development.settings.php</code>\u30d5\u30a1\u30a4\u30eb\u5185\u306eDrupal\u8a2d\u5b9a<code>$config['system.performance']['cache']['page']['max_age'] = 0</code>\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059)</li> </ul> <p>Varnish\u3092\u30ed\u30fc\u30ab\u30eb\u3067\u30c6\u30b9\u30c8\u3059\u308b\u306b\u306f\u3001<code>docker-compose.yml</code>\u3067\u4ee5\u4e0b\u306e\u5909\u66f4\u3092\u884c\u3044\u307e\u3059:</p> <ul> <li>Varnish\u30b5\u30fc\u30d3\u30b9\u30bb\u30af\u30b7\u30e7\u30f3\u3067<code>VARNISH_BYPASS</code>\u3092<code>false</code>\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002</li> <li><code>x-environment</code>\u30bb\u30af\u30b7\u30e7\u30f3\u3067<code>LAGOON_ENVIRONMENT_TYPE</code>\u3092<code>production</code>\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002</li> <li><code>docker-compose up -d</code>\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u65b0\u3057\u3044\u74b0\u5883\u5909\u6570\u3068\u3068\u3082\u306b\u3059\u3079\u3066\u306e\u30b5\u30fc\u30d3\u30b9\u304c\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002</li> </ul> <p>\u3053\u308c\u3067\u3001Varnish\u3092\u30c6\u30b9\u30c8\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u306f\u305a\u3067\u3059\uff01</p> <p>\u6b21\u306b\u3001ID\u304c<code>1</code>\u3067URL\u304c<code>drupal-example.docker.amazee.io/node/1</code>\u3068\u306a\u308b\u30ce\u30fc\u30c9\u3092\u60f3\u5b9a\u3057\u305f\u77ed\u3044\u4f8b\u3067\u3059\u3002</p> <ol> <li><code>curl -I drupal-example.docker.amazee.io/node/1</code>\u3092\u5b9f\u884c\u3057\u3001\u30d8\u30c3\u30c0\u30fc\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044:<ul> <li><code>X-LAGOON</code> \u306b\u306f <code>varnish</code> \u304c\u542b\u307e\u308c\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u5b9f\u969b\u306bVarnish\u3092\u901a\u3057\u3066\u51e6\u7406\u3055\u308c\u305f\u3053\u3068\u3092\u793a\u3057\u307e\u3059\u3002</li> <li>Varnish\u306f\u304a\u305d\u3089\u304f\u3053\u306e\u30b5\u30a4\u30c8\u3092\u898b\u305f\u3053\u3068\u304c\u306a\u304f\u3001\u6700\u521d\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306fVarnish\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u30a6\u30a9\u30fc\u30e0\u30a2\u30c3\u30d7\u3059\u308b\u305f\u3081\u3001<code>Age:</code>\u306f0\u306e\u307e\u307e\u3067\u3059\u3002</li> <li><code>X-Varnish-Cache</code> \u306f <code>MISS</code> \u306b\u306a\u3063\u3066\u3044\u308c\u3070\u3001Varnish\u304c\u3053\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u6e08\u307f\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u898b\u3064\u3051\u3089\u308c\u306a\u304b\u3063\u305f\u3053\u3068\u3092\u793a\u3057\u307e\u3059\u3002</li> </ul> </li> <li><code>curl -I drupal-example.docker.amazee.io/node/1</code> \u3092\u518d\u5ea6\u5b9f\u884c\u3059\u308b\u3068\u3001\u30d8\u30c3\u30c0\u30fc\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059:<ul> <li><code>Age:</code> \u306f\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u308c\u3066\u304b\u3089\u4f55\u79d2\u7d4c\u3063\u305f\u304b\u3092\u793a\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u901f\u5ea6\u306b\u3088\u308a\u307e\u3059\u304c\u3001\u304a\u305d\u3089\u304f1-30\u306e\u9593\u306e\u5024\u306b\u306a\u308b\u3067\u3057\u3087\u3046\u3002</li> <li><code>X-Varnish-Cache</code> \u306f <code>HIT</code> \u3068\u306a\u308a\u3001Varnish\u304c\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u308c\u305f\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u6b63\u5e38\u306b\u53d6\u5f97\u3057\u3066\u3001\u305d\u308c\u3092\u8fd4\u3057\u305f\u3053\u3068\u3092\u793a\u3057\u3066\u3044\u307e\u3059\u3002</li> </ul> </li> <li>Drupal\u306e <code>node/1</code> \u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u5185\u5bb9\u3092\u5909\u66f4\u3057\u307e\u3059\u3002</li> <li><code>curl -I drupal-example.docker.amazee.io/node/1</code> \u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u30d8\u30c3\u30c0\u30fc\u306f\u6700\u521d\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3068\u540c\u3058\u306b\u306a\u308b\u306f\u305a\u3067\u3059:<ul> <li><code>Age:0</code></li> <li><code>X-Varnish-Cache: MISS</code></li> </ul> </li> </ol>"},{"location":"ja/applications/drupal/services/varnish/#drupalvarnish","title":"Drupal\u3068Varnish\u306e\u821e\u53f0\u88cf","text":"<p>Drupal \u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u3092\u5229\u7528\u3057\u3066\u3044\u305f\u7d4c\u9a13\u304c\u3042\u308b\u65b9\u3084\u3001Drupal 8 \u3068 Varnish \u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3092\u4ee5\u524d\u306b\u884c\u3063\u305f\u3053\u3068\u304c\u3042\u308b\u65b9\u306f\u3001Lagoon \u306e Drupal Varnish \u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306b\u306f\u3044\u304f\u3064\u304b\u306e\u5909\u66f4\u70b9\u304c\u3042\u308b\u3053\u3068\u306b\u6c17\u3065\u3044\u305f\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u4ee5\u4e0b\u3067\u305d\u308c\u3089\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059:</p>"},{"location":"ja/applications/drupal/services/varnish/#varnish-purgervarnish-bundled-purger","title":"<code>Varnish Purger</code>\u306e\u4ee3\u308f\u308a\u306b<code>Varnish Bundled Purger</code>\u3092\u4f7f\u7528\u3059\u308b","text":"<p><code>Varnish Purger</code>\u306f\u3001\u7121\u52b9\u5316\u3059\u308b\u5fc5\u8981\u306e\u3042\u308b\u30ad\u30e3\u30c3\u30b7\u30e5\u30bf\u30b0\u3054\u3068\u306b<code>BAN</code>\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u4fe1\u3057\u307e\u3059\u3002Drupal\u306b\u306f\u591a\u304f\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u30bf\u30b0\u304c\u5b58\u5728\u3059\u308b\u305f\u3081\u3001Varnish\u306b\u5927\u91cf\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u9001\u4fe1\u3055\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u308c\u306b\u5bfe\u3057\u3066\u3001<code>Varnish Bundled Purger</code>\u306f\u3001\u8907\u6570\u306e\u7121\u52b9\u5316\u3092\u30d1\u30a4\u30d7(<code>|</code>)\u3067\u533a\u5207\u3063\u3066\u30011\u3064\u306e<code>BAN</code>\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u307f\u9001\u4fe1\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u3001Varnish\u306e\u30d0\u30f3\u6b63\u898f\u8868\u73fe\u30b7\u30b9\u30c6\u30e0\u3068\u9069\u5408\u3057\u3066\u304a\u308a\u3001\u7d50\u679c\u3068\u3057\u3066\u5c11\u306a\u3044\u30ea\u30af\u30a8\u30b9\u30c8\u3068\u3001Varnish\u5185\u306e\u30d0\u30f3\u30ea\u30b9\u30c8\u30c6\u30fc\u30d6\u30eb\u3082\u5c0f\u3055\u304f\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"ja/applications/drupal/services/varnish/#purge-late-runtime-processor","title":"<code>Purge Late runtime processor</code>\u306e\u4f7f\u3044\u65b9","text":"<p>Drupal 7\u306eVarnish\u30e2\u30b8\u30e5\u30fc\u30eb\u3068\u306f\u7570\u306a\u308a\u3001Drupal 8\u306ePurge\u30e2\u30b8\u30e5\u30fc\u30eb\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u524a\u9664\u65b9\u6cd5\u304c\u5c11\u3057\u7570\u306a\u308a\u307e\u3059\u3002Purge\u30e2\u30b8\u30e5\u30fc\u30eb\u306f\u524a\u9664\u5bfe\u8c61\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u30ad\u30e5\u30fc\u306b\u8ffd\u52a0\u3057\u3001\u305d\u306e\u5f8c\u3055\u307e\u3056\u307e\u306a\u51e6\u7406\u8005\u304c\u30ad\u30e5\u30fc\u3092\u51e6\u7406\u3057\u307e\u3059\u3002Purge\u30e2\u30b8\u30e5\u30fc\u30eb\u306f<code>Cron processor</code>\u3092\u4f7f\u3046\u3053\u3068\u3092\u63a8\u5968\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u308c\u306f Varnish \u30ad\u30e3\u30c3\u30b7\u30e5\u304ccron\u30b8\u30e7\u30d6\u306e\u5b9f\u884c\u6642\u306e\u307f\u524a\u9664\u3055\u308c\u308b\u3053\u3068\u3092\u610f\u5473\u3057\u307e\u3059\u3002\u901a\u5e38\u306ecron\u306f\u304a\u305d\u3089\u304f1\u5206\u3054\u3068\u306a\u3069\u975e\u5e38\u306b\u983b\u7e41\u306b\u306f\u5b9f\u884c\u3055\u308c\u306a\u3044\u305f\u3081\u3001\u53e4\u3044\u30c7\u30fc\u30bf\u304cVarnish\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u6b8b\u3063\u3066\u3057\u307e\u3046\u53ef\u80fd\u6027\u304c\u3042\u308a\u3001\u7de8\u96c6\u8005\u3084\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u6df7\u4e71\u3059\u308b\u4e8b\u614b\u3092\u5f15\u304d\u8d77\u3053\u3059\u304a\u305d\u308c\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>\u4ee3\u308f\u308a\u306b\u3001\u79c1\u305f\u3061\u306f<code>Purge Late runtime processor</code>\u306e\u4f7f\u7528\u3092\u63a8\u5968\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u5404Drupal\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u7d42\u4e86\u6642\u306b\u30ad\u30e5\u30fc\u3092\u51e6\u7406\u3057\u307e\u3059\u3002\u3053\u306e\u5229\u70b9\u306f\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u30bf\u30b0\u304c\u30d1\u30fc\u30b8\u30ad\u30e5\u30fc\u306b\u8ffd\u52a0\u3055\u308c\u305f\u5834\u5408 (\u7de8\u96c6\u8005\u304c Drupal \u30ce\u30fc\u30c9\u3092\u7de8\u96c6\u3057\u305f\u5834\u5408\u306a\u3069)\u3001\u305d\u306e\u30ce\u30fc\u30c9\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u30bf\u30b0\u304c\u76f4\u63a5\u30d1\u30fc\u30b8\u3055\u308c\u308b\u3053\u3068\u3067\u3059\u3002\u3053\u308c\u3068<code>Varnish Bundled Purger</code>\u3092\u7d44\u307f\u5408\u308f\u305b\u308b\u3053\u3068\u3067\u3001Drupal\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u6700\u5f8c\u3060\u3051\u306bVarnish\u306b\u5bfe\u3059\u308b\u5358\u4e00\u306e\u8ffd\u52a0\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u884c\u308f\u308c\u308b\u305f\u3081\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u51e6\u7406\u6642\u9593\u306b\u76ee\u7acb\u3063\u305f\u5f71\u97ff\u306f\u3042\u308a\u307e\u305b\u3093\u3002</p>"},{"location":"ja/applications/drupal/services/varnish/#varnish-ban-lurker","title":"Varnish Ban Lurker\u306e\u5b8c\u5168\u306a\u30b5\u30dd\u30fc\u30c8","text":"<p>Varnish\u306e\u8a2d\u5b9a\u3067\u306f\u3001<code>Ban Lurker</code>\u304c\u5b8c\u5168\u306b\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u3059\u3002Ban Lurker \u306f\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7\u3068 Varnish \u306e\u30b9\u30e0\u30fc\u30ba\u306a\u52d5\u4f5c\u3092\u7dad\u6301\u3059\u308b\u306e\u306b\u5f79\u7acb\u3064\u30c4\u30fc\u30eb\u3067\u3059\u3002Ban Lurker\u306f\u3001Varnish\u306e\u7981\u6b62\u30ea\u30b9\u30c8\u306b\u3042\u308b\u9805\u76ee\u3092\u30ad\u30e3\u30c3\u30b7\u30e5\u5185\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3068\u6bd4\u8f03\u3059\u308b\u5c0f\u3055\u306a\u30c4\u30fc\u30eb\u3067\u3059\u3002Varnish\u306e\u7981\u6b62\u6a5f\u80fd\u306f\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u5185\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u524a\u9664\u5bfe\u8c61\u3068\u3057\u3066\u30de\u30fc\u30af\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002Ban Lurker\u306f\u524a\u9664\u3059\u3079\u304d\u9805\u76ee\u3092\u898b\u3064\u3051\u308b\u3068\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u304b\u3089\u524a\u9664\u3057\u3001\u7981\u6b62\u81ea\u4f53\u3082\u89e3\u9664\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u901a\u5e38\u306f\u7981\u6b62\u3055\u308c\u305a\u306b\u305a\u3063\u3068\u30ad\u30e3\u30c3\u30b7\u30e5\u5bb9\u91cf\u3092\u5360\u6709\u3057\u7d9a\u3051\u308b\u3001\u30a2\u30af\u30bb\u30b9\u983b\u5ea6\u304c\u4f4e\u304f\u6709\u52b9\u671f\u9650\u304c\u975e\u5e38\u306b\u9577\u3044\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u524a\u9664\u3055\u308c\u3001\u66f4\u65b0\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u7981\u6b62\u30ea\u30b9\u30c8\u304c\u5c0f\u3055\u304f\u306a\u308a\u3001Varnish\u306e\u5404\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u5bfe\u3059\u308b\u51e6\u7406\u6642\u9593\u3082\u77ed\u7e2e\u3055\u308c\u307e\u3059\u3002\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u3001Ban Lurker\u306eVarnish\u306e\u516c\u5f0f\u8a18\u4e8b\u3084\u3001\u305d\u306e\u4ed6\u306e\u53c2\u8003\u306b\u306a\u308b\u8a18\u4e8b\u3092\u53c2\u7167\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/applications/drupal/services/varnish/#_1","title":"\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0","text":"<p>Varnish\u304c\u30ad\u30e3\u30c3\u30b7\u30e5\u3057\u3066\u3044\u306a\u3044\uff1f \u305d\u308c\u3068\u3082\u4f55\u304b\u4ed6\u306e\u554f\u984c\u304c\uff1f \u4ee5\u4e0b\u306b\u30c7\u30d0\u30c3\u30b0\u306e\u65b9\u6cd5\u3092\u3044\u304f\u3064\u304b\u7d39\u4ecb\u3057\u307e\u3059:</p> <ul> <li>purge\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30c7\u30d0\u30c3\u30b0\u30ed\u30b0\u3092\u6709\u52b9\u306b\u3059\u308b\u306b\u306f\u3001<code>drush p-debug-en</code>\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u30c7\u30d0\u30c3\u30b0\u60c5\u5831\u306f\u3001Drupal\u30ed\u30b0<code>admin/reports/dblog</code>\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002</li> <li>Drupal\u304c\u9069\u5207\u306a\u30ad\u30e3\u30c3\u30b7\u30e5\u30d8\u30c3\u30c0\u30fc\u3092\u9001\u4fe1\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u6700\u9069\u306a\u30c6\u30b9\u30c8\u65b9\u6cd5\u3068\u3057\u3066\u306f\u3001Lagoon\u304c\u751f\u6210\u3059\u308bVarnish\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u30d0\u30a4\u30d1\u30b9\u3059\u308b\u305f\u3081\u306eURL\u3092\u4f7f\u7528\u3057\u307e\u3059(\u30ed\u30fc\u30ab\u30eb\u306eDrupal\u306e\u4f8b\u3067\u306f\u3001http://nginx-drupal-example.docker.amazee.io\u306b\u306a\u308a\u307e\u3059)\u3002<code>Cache-Control: max-age=900, public</code>\u30d8\u30c3\u30c0\u30fc\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3001<code>900</code>\u304c<code>$config['system.performance']['cache']['page']['max_age']</code>\u3067\u8a2d\u5b9a\u3057\u305f\u3082\u306e\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</li> <li>\u74b0\u5883\u5909\u6570<code>VARNISH_BYPASS</code>\u304c<code>true</code>\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044(<code>docker-compose.yml</code>\u3092\u78ba\u8a8d\u3057\u3001<code>docker-compose up -d varnish</code>\u3092\u5b9f\u884c\u3057\u3066\u74b0\u5883\u5909\u6570\u304c\u6b63\u3057\u304f\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044)\u3002</li> <li>\u3059\u3079\u3066\u304c\u4e0a\u624b\u304f\u3044\u304b\u306a\u3044\u5834\u5408\u3001\u30c6\u30fc\u30d6\u30eb\u3092\u3072\u3063\u304f\u308a\u8fd4\u3059\u524d\u306b (\u256f\u00b0\u25a1\u00b0)\u256f\ufe35 \u253b\u2501\u253b\u3001Lagoon\u30c1\u30fc\u30e0\u306b\u554f\u3044\u5408\u308f\u305b\u304f\u3060\u3055\u3044\u3002\u559c\u3093\u3067\u304a\u624b\u4f1d\u3044\u3057\u307e\u3059\u3002</li> </ul>"},{"location":"ja/community/discord/","title":"Discord\u4e0a\u306eLagoon\u30b3\u30df\u30e5\u30cb\u30c6\u30a3","text":"<p>\u79c1\u305f\u3061\u306e\u516c\u5f0f\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u4f1a\u8b70\u30b9\u30da\u30fc\u30b9\u306f\u3001Lagoon\u306eDiscord\u3067\u3059\u3002</p> <p>\u79c1\u305f\u3061\u306f\u3001\u3053\u306e\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3092\u5168\u3066\u306eLagoon\u30e6\u30fc\u30b6\u30fc\u304c\u5354\u529b\u3057\u3001\u554f\u984c\u3092\u89e3\u6c7a\u3057\u3001\u30a2\u30a4\u30c7\u30a2\u3092\u5171\u6709\u3057\u3001Lagoon\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u8ca2\u732e\u3059\u308b\u5834\u3068\u3057\u3066\u8a2d\u7acb\u3057\u307e\u3057\u305f\u3002\u73fe\u5728\u3001\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306fSlack\u3084\u305d\u306e\u4ed6\u306e\u5834\u6240\u306b\u5206\u6563\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u4e00\u5143\u5316\u3059\u308b\u305f\u3081\u306b\u52aa\u529b\u3057\u3066\u3044\u307e\u3059\u3002\u307e\u305f\u3001\u5168\u3066\u306e\u30e6\u30fc\u30b6\u30fc\u3084\u9867\u5ba2\u304c\u53c2\u52a0\u3057\u3001\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u304b\u3089\u5f97\u3089\u308c\u308b\u5229\u76ca\u3092\u5168\u3066\u306e\u4eba\u304c\u4eab\u53d7\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u3068\u8003\u3048\u3066\u3044\u307e\u3059\u3002</p> <p>\u3053\u306e\u5834\u6240\u306f\u3001\u73fe\u5728\u306e\u30b5\u30dd\u30fc\u30c8\u30c1\u30e3\u30cd\u30eb\u3092\u7f6e\u304d\u63db\u3048\u308b\u3082\u306e\u3067\u306f\u306a\u3044\u3053\u3068\u3092\u5fd8\u308c\u306a\u3044\u3067\u304f\u3060\u3055\u3044 - \u305d\u308c\u3089\u306f\u305d\u306e\u307e\u307e\u7dad\u6301\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u306f\u4ed6\u306e\u30e6\u30fc\u30b6\u30fc\u3084Lagoon\u306e\u30e1\u30f3\u30c6\u30ca\u3068\u7e4b\u304c\u308b\u5834\u6240\u3067\u3059\u3002</p> <p>\u79c1\u305f\u3061\u306f\u5168\u3066\u306e\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u30e1\u30f3\u30d0\u30fc\u306b\u3001\u79c1\u305f\u3061\u306e\u53c2\u52a0\u3068\u30e2\u30c7\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3\u3001\u304a\u3088\u3073\u884c\u52d5\u898f\u7bc4\u3092\u78ba\u8a8d\u3057\u3066\u3044\u305f\u3060\u304f\u3053\u3068\u3092\u304a\u9858\u3044\u3057\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/community/discord/#_1","title":"\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u6642\u9593","text":"<p>\u73fe\u5728\u3001\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306e\u30cb\u30fc\u30ba\u3092\u3088\u308a\u3088\u304f\u7406\u89e3\u3059\u308b\u305f\u3081\u306b\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3092\u8abf\u67fb\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u6642\u9593\u306f\u4e00\u6642\u505c\u6b62\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u3061\u3089\u3067\u30a2\u30f3\u30b1\u30fc\u30c8\u306b\u3054\u8a18\u5165\u304f\u3060\u3055\u3044\u3002</p> <p>Lagoon\u306b\u95a2\u3057\u3066\u4f55\u304b\u624b\u52a9\u3051\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001Discord\u3067\u304a\u554f\u3044\u5408\u308f\u305b\u304f\u3060\u3055\u3044\u3002 \u307e\u305f\u306f\u3001uselagoon@amazee.io\u307e\u3067\u30e1\u30fc\u30eb\u3092\u304a\u9001\u308a\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/community/moderation/","title":"Lagoon\u30e2\u30c7\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3","text":"<p>\u3053\u308c\u3089\u306e\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3\u306f\u3001Drupal Diversity &amp; Inclusion\u306e\u30e2\u30c7\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u6539\u5909\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p>Lagoon\u306e\u7a7a\u9593\u3067\u306f\u3001\u3059\u3079\u3066\u306e\u4eba\u3005\u306b\u5bfe\u3059\u308b\u7406\u89e3\u3001\u5171\u611f\u3001\u500b\u4eba\u7684\u306a\u8a8d\u8b58\u306e\u5411\u4e0a\u3092\u4fc3\u9032\u3059\u308b\u3088\u3046\u52aa\u3081\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u308c\u306b\u306f\u3001\u3042\u306a\u305f\u304c\u500b\u4eba\u7684\u306b\u610f\u898b\u304c\u5408\u308f\u306a\u3044\u304b\u3082\u3057\u308c\u306a\u3044Drupal\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3084\u5e83\u7bc4\u306a\u6280\u8853\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306e\u4eba\u3005\u3082\u542b\u307e\u308c\u307e\u3059\u3002</p> <p>Discord\u304b\u3089\u30ad\u30c3\u30af\u3055\u308c\u305f\u5834\u5408\u3001\u30ad\u30c3\u30af\u3055\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u306f\u3001\u518d\u5165\u5834\u3092\u5e0c\u671b\u3059\u308b\u5834\u5408\u3001\u30ad\u30c3\u30ab\u30fc\u307e\u305f\u306f\u5225\u306e\u30e2\u30c7\u30ec\u30fc\u30bf\u30fc\u306b\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8(PM)\u3092\u9001\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3082\u3057\u3001\u6575\u610f\u3042\u308b\u53cd\u5fdc\u3092\u5f15\u304d\u8d77\u3053\u3059\u3088\u3046\u306a\u610f\u56f3\u7684\u306b\u717d\u52d5\u7684\u3001\u3044\u3058\u3081\u3001\u307e\u305f\u306f\u5acc\u304c\u3089\u305b\u884c\u70ba\u306b\u5f93\u4e8b\u3057\u3066\u3044\u308b\u3068\u898b\u3048\u308b\u6df7\u4e71\u3092\u62db\u304f\u4eba\u304c\u3044\u305f\u5834\u5408\u3001\u4ed6\u306e\u30c1\u30e3\u30cd\u30eb\u30e1\u30f3\u30d0\u30fc\u306b\u3068\u3063\u3066\u30b9\u30c8\u30ec\u30b9\u3068\u306a\u308b\u884c\u70ba\u3092\u307b\u3050\u3059\u3088\u308a\u3082\u3001\u30ad\u30c3\u30af\u3059\u308b\u65b9\u304c\u65e9\u304f\u3066\u7c21\u5358\u3067\u3059\u3002</p> <p>\u30ad\u30c3\u30af\u306f\u7981\u6b62\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u6df7\u4e71\u3092\u62db\u304f\u53ef\u80fd\u6027\u306e\u3042\u308b\u30b3\u30e1\u30f3\u30c8\u3084\u767a\u8a00\u304c\u771f\u5263\u3067\u3001\u4e8c\u8005\u9593\u306e\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u65ad\u7d76\u3059\u308b\u3053\u3068\u3082\u3042\u308a\u307e\u3059\u3002\u30e2\u30c7\u30ec\u30fc\u30bf\u30fc\u3068\u8a71\u3059\u3053\u3068\u306b\u3088\u308a\u3001(\u6f5c\u5728\u7684\u306b)\u6df7\u4e71\u3092\u62db\u304f\u4eba\u306f\u3001\u3088\u308a\u914d\u616e\u6df1\u304f\u3001\u5305\u62ec\u7684\u3067\u3001\u591a\u69d8\u6027\u3092\u610f\u8b58\u3057\u305f\u8a00\u8449\u3092\u4f7f\u7528\u3059\u308b\u3088\u3046\u306b\u6307\u5c0e\u3055\u308c\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u305d\u3057\u3066\u3001\u3088\u308a\u5efa\u8a2d\u7684\u306a\u65b9\u6cd5\u3067\u95a2\u4e0e\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/community/moderation/#_1","title":"\u6bb5\u968e\u7684\u306a\u5bfe\u5fdc","text":"<ol> <li> <p>\u6bb5\u968e\u4e00\u306e\u5bfe\u5fdc</p> <p>\u30e6\u30fc\u30b6\u30fc\u306f\u30c1\u30e3\u30f3\u30cd\u30eb\u306b\u6b53\u8fce\u3055\u308c\u3001\u30b9\u30af\u30ed\u30fc\u30eb\u30d0\u30c3\u30af\u306e\u8aad\u307f\u65b9\u3092\u8aac\u660e\u3055\u308c\u3001\u53c2\u52a0\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30ea\u30f3\u30af\u304c\u63d0\u4f9b\u3055\u308c\u307e\u3059\u3002</p> </li> <li> <p>\u6bb5\u968e\u4e8c\u306e\u5bfe\u5fdc</p> <p>\u30e6\u30fc\u30b6\u30fc\u306b\u306f\u3001\u6295\u7a3f\u3092\u30c8\u30d4\u30c3\u30af\u306b\u6cbf\u3063\u305f\u3082\u306e\u306b\u4fdd\u3064\u3088\u3046\u306b\u3001\u307e\u305f\u306f\u53c2\u52a0\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3\u3092\u5b88\u308b\u3088\u3046\u306b\u3001\u30c1\u30e3\u30f3\u30cd\u30eb\u5185\u3067\u512a\u3057\u304f\u601d\u3044\u51fa\u3055\u305b\u307e\u3059\u3002</p> </li> <li> <p>\u6bb5\u968e\u4e09\u306e\u5bfe\u5fdc</p> <p>\u30e2\u30c7\u30ec\u30fc\u30bf\u30fc\u304b\u3089\u30e6\u30fc\u30b6\u30fc\u306bPM\u304c\u9001\u3089\u308c\u3001\u305d\u306e\u6295\u7a3f\u306b\u554f\u984c\u304c\u3042\u3063\u305f\u7406\u7531\u3068\u3001\u4f55\u3092\u3069\u3046\u9055\u3046\u65b9\u6cd5\u3067\u884c\u3046\u3079\u304d\u304b\u306b\u3064\u3044\u3066\u8aac\u660e\u3055\u308c\u307e\u3059\u3002</p> </li> <li> <p>\u6bb5\u968e\u56db\u306e\u5bfe\u5fdc</p> <p>\u884c\u52d5\u304c\u7d9a\u304f\u5834\u5408\u3001\u30e6\u30fc\u30b6\u30fc\u306fDiscord\u304b\u3089\u5c11\u306a\u304f\u3068\u308224\u6642\u9593\u306f\u8ffd\u653e\u3055\u308c\u307e\u3059\u3002</p> </li> </ol>"},{"location":"ja/community/moderation/#_2","title":"\u6bb5\u968e\u7684\u3067\u306a\u3044\u5bfe\u5fdc:\u7981\u6b62","text":"<p>\u610f\u56f3\u7684\u306b\u6df7\u4e71\u3092\u5f15\u304d\u8d77\u3053\u3059\u500b\u4eba\u306f\u3001\u6bb5\u968e\u7684\u3067\u306f\u306a\u304f\u3001\u8ffd\u653e\u3055\u308c\u307e\u3059\u3002\u7e70\u308a\u8fd4\u3057\u9055\u53cd\u3059\u308b\u3068\u7981\u6b62\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/community/participation/","title":"Lagoon\u53c2\u52a0\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3","text":"<p>\u79c1\u305f\u3061\u306e\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306e\u3059\u3079\u3066\u306e\u30e1\u30f3\u30d0\u30fc\u304c\u3001\u4eee\u60f3\u7684\u306a\u30b9\u30da\u30fc\u30b9\u3067\u3082\u7269\u7406\u7684\u306a\u30b9\u30da\u30fc\u30b9\u3067\u3082\u3001\u79c1\u305f\u3061\u306e\u884c\u52d5\u898f\u7bc4\u3092\u9075\u5b88\u3059\u308b\u3053\u3068\u3092\u304a\u9858\u3044\u3057\u307e\u3059\u3002</p> <p>\u3053\u308c\u3089\u306e\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3\u306f\u3001Drupal Diversity &amp; Inclusion\u306e\u53c2\u52a0\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3\u3092\u53c2\u8003\u306b\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\u3002</p> <ol> <li>\u7a4d\u6975\u7684\u306b\u805e\u304d\u3001\u6ce8\u610f\u6df1\u304f\u8aad\u307f\u3001\u7406\u89e3\u3059\u308b\u3053\u3068\u3002<ul> <li>\u4f1a\u8a71\u306b\u53c2\u52a0\u3059\u308b\u5834\u5408\u306f\u3001\u30d0\u30c3\u30af\u30ed\u30b0\u3092\u8aad\u3093\u3067\u304f\u3060\u3055\u3044\u3002\u4ed6\u306e\u53c2\u52a0\u8005\u304c\u52b9\u679c\u7684\u306b\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u53d6\u308b\u6a5f\u4f1a\u3092\u4e0e\u3048\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u4ed6\u306e\u53c2\u52a0\u8005\u306e\u767a\u8a00\u306e\u80cc\u5f8c\u306b\u306f\u826f\u3044\u610f\u56f3\u304c\u3042\u308b\u3068\u4eee\u5b9a\u3057\u307e\u3059\u3002\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306f\u975e\u5e38\u306b\u591a\u69d8\u3067\u3001\u5168\u4e16\u754c\u304b\u3089\u306e\u53c2\u52a0\u8005\u304c\u3044\u307e\u3059\u3002\u6587\u5316\u7684\u306a\u7279\u6027\u3084\u8a00\u8a9e\u7684\u306a\u7279\u6027\u3092\u7406\u89e3\u3059\u308b\u3053\u3068\u304c\u91cd\u8981\u3067\u3059\u3002</li> <li>\u3053\u306e\u5206\u91ce\u306b\u65b0\u3057\u304f\u53c2\u52a0\u3059\u308b\u4eba\u3082\u591a\u304f\u3044\u307e\u3059\u3002\u5f7c\u3089\u304c\u826f\u3044\u610f\u56f3\u3092\u6301\u3063\u3066\u3044\u308b\u304c\u3001\u307e\u3060\u8a00\u8a9e\u3084\u30a2\u30a4\u30c7\u30a2\u3092\u30de\u30b9\u30bf\u30fc\u3057\u3066\u3044\u306a\u3044\u3068\u4eee\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u79c1\u305f\u3061\u306f\u5f7c\u3089\u3092\u52a9\u3051\u305f\u3044\u3068\u601d\u3063\u3066\u3044\u307e\u3059\uff01</li> </ul> </li> <li>\u4e00\u822c\u5316\u3059\u308b\u306e\u3067\u306f\u306a\u304f\u3001\u81ea\u5206\u81ea\u8eab\u306e\u7d4c\u9a13\u304b\u3089\u8a71\u3059\u3053\u3068\u3002\u4ed6\u4eba\u306e\u7d4c\u9a13\u306e\u4fa1\u5024\u3092\u8a8d\u8b58\u3059\u308b\u3002\u4ed6\u4eba\u306e\u4ee3\u308f\u308a\u306b\u8a71\u3059\u3053\u3068\u306f\u907f\u3051\u3066\u304f\u3060\u3055\u3044\u3002<ul> <li>\u300c\u5f7c\u3089\u300d\u3001\u300c\u79c1\u305f\u3061\u300d\u3001\u300c\u3042\u306a\u305f\u300d\u306e\u4ee3\u308f\u308a\u306b\u300c\u79c1\u300d\u3092\u4f7f\u3063\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u3059\u3079\u3066\u306e\u53c2\u52a0\u8005\u306f\u3001\u4ed6\u306e\u53c2\u52a0\u8005\u304c\u81ea\u5206\u81ea\u8eab\u306e\u30e6\u30cb\u30fc\u30af\u306a\u7d4c\u9a13\u3092\u6301\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u8a8d\u8b58\u3059\u308b\u3079\u304d\u3067\u3059\u3002</li> <li>\u5225\u306e\u53c2\u52a0\u8005\u306e\u7d4c\u9a13\u3092\u7121\u52b9\u306b\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002\u4ee3\u308f\u308a\u306b\u3001\u3042\u306a\u305f\u81ea\u8eab\u306e\u30b9\u30c8\u30fc\u30ea\u30fc\u3084\u7d4c\u9a13\u3092\u5171\u6709\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul> </li> <li>\u8cea\u554f\u3092\u3059\u308b\u3053\u3068\u3067\u3001\u30a2\u30a4\u30c7\u30a2\u3001\u611f\u60c5\u3001\u61f8\u5ff5\u3001\u307e\u305f\u306f\u304a\u4e92\u3044\u306b\u7570\u8b70\u3092\u5531\u3048\u307e\u3059\u3002\u500b\u4eba\u653b\u6483\u306f\u63a7\u3048\u307e\u3059\u3002\u307e\u305a\u306f\u30a2\u30a4\u30c7\u30a2\u306b\u7126\u70b9\u3092\u5f53\u3066\u307e\u3059\u3002<ul> <li>\u8a00\u8449\u306b\u3088\u308b\u7570\u8b70\u3001\u76ae\u8089\u306a\u4fae\u8fb1\u3001\u6027\u5225/\u4eba\u7a2e/\u5730\u57df\u306e\u56fa\u5b9a\u89b3\u5ff5\u306a\u3069\u306f\u907f\u3051\u307e\u3059\u3002</li> </ul> </li> <li>\u81ea\u5206\u306e\u80fd\u529b\u3068\u90fd\u5408\u306b\u5408\u308f\u305b\u3066\u6700\u5927\u9650\u306b\u53c2\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002<ul> <li>\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306e\u6210\u9577\u306f\u3001\u500b\u4eba\u306e\u610f\u898b\u3092\u53d6\u308a\u5165\u308c\u308b\u3053\u3068\u306b\u304b\u304b\u3063\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u30c1\u30e3\u30f3\u30cd\u30eb\u3067\u306f\u3001\u7686\u3055\u3093\u304c\u58f0\u3092\u4e0a\u3052\u3066\u767a\u8a00\u3059\u308b\u3053\u3068\u3092\u671b\u3093\u3067\u3044\u307e\u3059\u3002\u8ca2\u732e\u3067\u304d\u308b\u6642\u9593\u306f\u4eba\u305d\u308c\u305e\u308c\u3067\u3059\u30025 \u5206\u3067\u3082 5 \u6642\u9593\u3067\u3082\u3001\u53c2\u52a0\u3057\u3066\u3044\u305f\u3060\u3051\u308c\u3070\u5e78\u3044\u3067\u3059\u3002</li> <li>\u9759\u304b\u306b\u6f5c\u3093\u3067\u5b66\u3073\u306b\u6765\u308b\u3001\u3064\u307e\u308a\u300c\u6f5c\u3080\u300d\u4eba\u3082\u6b53\u8fce\u3057\u307e\u3059\u304c\u3001\u81ea\u5df1\u7d39\u4ecb\u3092\u3057\u3066\u6328\u62f6\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul> </li> <li>\u5408\u610f\u3059\u308b\u3053\u3068\u304c\u5fc5\u305a\u3057\u3082\u76ee\u6a19\u3067\u306f\u306a\u3044\u3053\u3068\u3092\u53d7\u3051\u5165\u308c\u3066\u304f\u3060\u3055\u3044\u3002<ul> <li>\u6280\u8853\u7684\u306a\u554f\u984c\u306b\u306f\u3001\u3042\u306a\u305f\u306e\u8a2d\u5b9a\u3067\u306f\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u304c\u3001\u3055\u307e\u3056\u307e\u306a\u300c\u6b63\u3057\u3044\u300d\u7b54\u3048\u304c\u3057\u3070\u3057\u3070\u5b58\u5728\u3057\u307e\u3059\u3002</li> </ul> </li> <li>\u8a00\u8a9e\u306e\u9055\u3044\u3084\u610f\u56f3\u3057\u306a\u3044\u610f\u5473\u5408\u3044\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002<ul> <li>\u300c\u30c6\u30ad\u30b9\u30c8\u306f\u96e3\u3057\u3044\u300d - \u30c6\u30ad\u30b9\u30c8\u3067\u52b9\u679c\u7684\u306b\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u3068\u308b\u306e\u306f\u96e3\u3057\u3044\u3053\u3068\u3092\u8a8d\u8b58\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul> </li> <li>\u500b\u4eba\u306e\u30a2\u30a4\u30c7\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u8a8d\u3081\u308b\u3002<ul> <li>\u660e\u793a\u3055\u308c\u305f\u540d\u524d\u3068\u4ee3\u540d\u8a5e\u3092\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u4eba\u7a2e\u3001\u6027\u7684\u6307\u5411\u3001\u969c\u5bb3\u306a\u3069\u306b\u3064\u3044\u3066\u7591\u554f\u3092\u5448\u3055\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002</li> <li>\u8ab0\u304b\u3092\u3069\u306e\u3088\u3046\u306b\u547c\u3076\u3079\u304d\u304b\u308f\u304b\u3089\u306a\u3044\u5834\u5408\u306f\u3001\u63a7\u3048\u3081\u304b\u3064\u656c\u610f\u3092\u6301\u3063\u3066\u5c0b\u306d\u3066\u304f\u3060\u3055\u3044\u3002\u4f8b\u3048\u3070\u3001\u3069\u306e\u4ee3\u540d\u8a5e\u3092\u4f7f\u7528\u3059\u3079\u304d\u304b\u308f\u304b\u3089\u306a\u3044\u5834\u5408\u306f\u3001\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u3063\u3066\u5c0b\u306d\u3066\u304f\u3060\u3055\u3044\u3002\u6b63\u3057\u3044\u4ee3\u540d\u8a5e\u3092\u4f7f\u3046\u3053\u3068\u3067\u4ed6\u4eba\u3092\u5c0a\u91cd\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</li> </ul> </li> <li>\u4e00\u90e8\u306e\u30aa\u30d5\u30c8\u30d4\u30c3\u30af\u306a\u4f1a\u8a71\u306f\u8a31\u5bb9\u3055\u308c\u307e\u3059\u3002<ul> <li>\u30a2\u30ca\u30a6\u30f3\u30b9\u306e\u30af\u30ed\u30b9\u30dd\u30b9\u30c8\u306e\u4e00\u90e8\u3082\u8a31\u5bb9\u3055\u308c\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u884c\u70ba\u306f\u8a31\u3055\u308c\u307e\u305b\u3093:<ul> <li>\u30b9\u30ec\u30c3\u30c9\u306e\u4e57\u3063\u53d6\u308a</li> <li>\u30b9\u30d1\u30e0\u884c\u70ba</li> <li>\u5546\u696d\u7684\u306a\u5e83\u544a</li> <li>\u9732\u9aa8\u306a\u81ea\u5df1\u5ba3\u4f1d</li> <li>\u7279\u306b\u516c\u5f0f\u306e\u4f1a\u8b70\u6642\u9593\u3084\u96c6\u4e2d\u7684\u306a\u4f1a\u8a71\u4e2d\u306b\u30aa\u30d5\u30c8\u30d4\u30c3\u30af\u306b\u9038\u8131\u3059\u308b\u3053\u3068</li> </ul> </li> <li>\u30aa\u30d5\u30c8\u30d4\u30c3\u30af\u306a\u4f1a\u8a71\u3092\u6df1\u3081\u308b\u305f\u3081\u306e\u3088\u308a\u9069\u5207\u306a\u5834\u6240\u3084\u6642\u9593\u3092\u767a\u8868\u3059\u308b\u3053\u3068\u3092\u691c\u8a0e\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u9069\u5207\u306a\u884c\u52d5\u304c\u4f55\u304b\u308f\u304b\u3089\u306a\u3044\u5834\u5408\u306f\u3001\u7ba1\u7406\u8005\u306b\u9023\u7d61\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul> </li> <li>Lagoon\u5185\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u5171\u6709\u3059\u308b\u5834\u5408\u306f\u3001\u660e\u78ba\u306a\u540c\u610f\u306e\u3082\u3068\u3067\u306e\u307f\u884c\u3063\u3066\u304f\u3060\u3055\u3044\u3002\u307e\u305f\u3001\u5171\u6709\u306f\u614e\u91cd\u306b\u8003\u3048\u3066\u884c\u3044\u3001\u53c2\u52a0\u8005\u3092\u5acc\u304c\u3089\u305b\u305f\u308a\u3001\u50b7\u3064\u3051\u308b\u610f\u56f3\u3092\u3082\u3063\u3066\u884c\u308f\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002<ul> <li>\u3053\u306e\u30d5\u30a9\u30fc\u30e9\u30e0\u306f\u516c\u958b\u3055\u308c\u3066\u3044\u308b\u3068\u8003\u3048\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u3053\u306b\u6295\u7a3f\u3055\u308c\u305f\u3082\u306e\u306f\u8ab0\u3067\u3082\u8aad\u3080\u3053\u3068\u304c\u3067\u304d\u3001\u5b9f\u969b\u306b\u8aad\u307e\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u3068\u60f3\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>Lagoon\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u5171\u6709\u3059\u308b\u969b\u306f\u3001\u3059\u3079\u3066\u306e\u53c2\u52a0\u8005\u304b\u3089\u4e8b\u524d\u306b\u8a31\u53ef\u3092\u5f97\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u30b3\u30f3\u30c6\u30f3\u30c4\u304c\u5f15\u7528\u3055\u308c\u305f\u308a\u3001\u8981\u7d04\u3055\u308c\u305f\u308a\u3001\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u304c\u64ae\u3089\u308c\u305f\u308a\u3059\u308b\u5834\u5408\u3067\u3082\u540c\u69d8\u3067\u3059\u3002\u3053\u308c\u306b\u306f\u3001Twitter\u3084\u4ed6\u306e\u516c\u958b\u3055\u308c\u3066\u3044\u308b\u30e1\u30c7\u30a3\u30a2\u3067\u306e\u5171\u6709\u3082\u542b\u307e\u308c\u307e\u3059\u3002 \u30d6\u30ed\u30b0\u6295\u7a3f\u3001\u8a18\u4e8b\u3001\u30dd\u30c3\u30c9\u30ad\u30e3\u30b9\u30c8\u306a\u3069\u3001\u3053\u308c\u3089\u306e\u5834\u6240\u306f\u8b70\u8ad6\u3084\u4f5c\u696d\u9032\u884c\u4e2d\u306e\u5834\u6240\u3067\u3059\u3002\u4f1a\u8a71\u306e\u65ad\u7247\u3092\u524a\u9664\u3059\u308b\u3068\u3001\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u304c\u5931\u308f\u308c\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u7279\u306bLagoon\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u63a8\u9032\u3059\u308b\u76ee\u7684\u304c\u306a\u3044\u5834\u5408\u3001\u8b70\u8ad6\u3092\u6b6a\u3081\u305f\u308a\u3001\u963b\u6b62\u3057\u305f\u308a\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002</li> <li>\u4e0a\u8a18\u3067\u8ff0\u3079\u305f\u901a\u308a\u3001\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u3092\u64ae\u3063\u3066\u30bd\u30fc\u30b7\u30e3\u30eb\u30e1\u30c7\u30a3\u30a2\u3084\u4ed6\u306e\u30d5\u30a9\u30fc\u30e9\u30e0\u306b\u6295\u7a3f\u3059\u308b\u5834\u5408\u3001\u305d\u308c\u3092\u6295\u7a3f\u3057\u305f\u4eba\u304b\u3089\u8a31\u53ef\u3092\u53d6\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u8a31\u53ef\u3092\u53d6\u308b\u969b\u306b\u306f\u3001\u8b58\u5225\u60c5\u5831\u3092\u524a\u9664\u3059\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u542b\u3081\u3066\u304f\u3060\u3055\u3044\u3002\u8b58\u5225\u60c5\u5831\u3092\u524a\u9664\u3057\u305f\u5834\u5408\u3067\u3082\u3001\u8a31\u53ef\u304c\u5fc5\u8981\u3067\u3059\u3002\u3053\u308c\u306b\u306fDiscord\u3001Github\u3001\u305d\u306e\u4ed6\u306eLagoon\u306e\u5a92\u4f53\u304b\u3089\u306e\u5185\u5bb9\u3082\u542b\u307e\u308c\u307e\u3059\u3002</li> <li>\u4f55\u304b\u3092\u5171\u6709\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u305f\u3060\u805e\u3044\u3066\u307f\u3066\u304f\u3060\u3055\u3044\uff01\u300c\u306d\u3048\u3001\u3053\u308c\u3092Twitter\u306b\u30b7\u30a7\u30a2\u3057\u3066\u3082\u3044\u3044\u3067\u3059\u304b\uff1f\u3042\u306a\u305f\u306b\u30af\u30ec\u30b8\u30c3\u30c8\u3092\u4ed8\u3051\u308b\u3053\u3068\u3092\u559c\u3093\u3067\u3044\u307e\u3059\uff01\u300d</li> <li>\u53c2\u52a0\u8005\u304cLagoon\u306e\u30e2\u30c7\u30ec\u30fc\u30bf\u30fc\u306b\u30cf\u30e9\u30b9\u30e1\u30f3\u30c8\u884c\u70ba\u3092\u5831\u544a\u3059\u308b\u305f\u3081\u306b\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u3092\u64ae\u308b\u5fc5\u8981\u304c\u3042\u308b\u5834\u5408\u3001\u8a31\u53ef\u3092\u5f97\u308b\u3053\u3068\u306a\u304f\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u305f\u3060\u3057\u3001\u516c\u306b\u307e\u305f\u306f\u79c1\u7684\u306b\u500b\u4eba\u3092\u6065\u305a\u304b\u3057\u304f\u3059\u308b\u305f\u3081\u306b\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u3092\u64ae\u308b\u3053\u3068\u306f\u8a31\u3055\u308c\u307e\u305b\u3093\u3002\u3053\u308c\u306f\u30cf\u30e9\u30b9\u30e1\u30f3\u30c8\u884c\u70ba\u306e\u5831\u544a\u306b\u306e\u307f\u9069\u7528\u3055\u308c\u307e\u3059\u3002</li> </ul> </li> <li>\u5b89\u5168\u304b\u3064\u9069\u5207\u306a\u5834\u5408\u306b\u306f\u3001\u305d\u306e\u5834\u3067\u304a\u4e92\u3044\u306e\u82e6\u60c5\u3092\u89e3\u6c7a\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u5b89\u5168\u3067\u3042\u308b\u5834\u5408\u3001\u5bfe\u7acb\u304c\u8d77\u3053\u3063\u305f\u5834\u6240\u3067\u660e\u78ba\u5316\u3057\u3001\u95a2\u4e0e\u3057\u3088\u3046\u3068\u52aa\u3081\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\u4f8b\u3048\u3070\u3001Discord\u30c1\u30e3\u30f3\u30cd\u30eb\u3067\u3002<ul> <li>\u5bfe\u7acb\u304c\u30a8\u30b9\u30ab\u30ec\u30fc\u30c8\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u7ba1\u7406\u8005\u3084\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u30de\u30cd\u30fc\u30b8\u30e3\u30fc(Alanna)\u306b\u9023\u7d61\u3059\u308b\u3002</li> <li>\u52a9\u3051\u3092\u6c42\u3081\u308b\u3002</li> <li>\u5bfe\u7acb\u306e\u4e3b\u984c\u304cLagoon\u3068\u306f\u95a2\u4fc2\u306a\u3044\u5834\u5408\u306f\u3001\u305d\u306e\u4f1a\u8a71\u3092\u3088\u308a\u9069\u5207\u306a\u30c1\u30e3\u30f3\u30cd\u30eb\u3078\u79fb\u52d5\u3055\u305b\u308b\u3002</li> </ul> </li> </ol> <p>\u5bfe\u9762\u3067\u306eLagoon\u30b9\u30da\u30fc\u30b9\u306b\u304a\u3051\u308b\u8ffd\u52a0\u7684\u306a\u914d\u616e\u4e8b\u9805</p> <ol> <li>\u30a4\u30d9\u30f3\u30c8\u306e\u884c\u52d5\u898f\u7bc4\u304c\u3042\u308b\u5834\u5408\u306f\u305d\u308c\u306b\u5f93\u3063\u3066\u304f\u3060\u3055\u3044\u3002\u306a\u3044\u5834\u5408\u306f\u3001\u79c1\u305f\u3061\u306e\u884c\u52d5\u898f\u7bc4\u304c\u9069\u7528\u3055\u308c\u307e\u3059\u3002</li> <li>\u4eba\u3005\u3001\u5f7c\u3089\u306e\u79fb\u52d5\u88c5\u7f6e\u3001\u307e\u305f\u306f\u4ed6\u306e\u88dc\u52a9\u6a5f\u5668\u306b\u3001\u305d\u306e\u4eba\u306e\u540c\u610f\u306a\u304f\u89e6\u308c\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002\u3082\u3057\u8ab0\u304b\u304c\u3042\u308b\u7279\u5b9a\u306e\u884c\u52d5\u3092\u6b62\u3081\u308b\u3088\u3046\u306b\u983c\u3093\u3060\u3089\u3001\u3059\u3050\u306b\u6b62\u3081\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u4f55\u304b\u554f\u984c\u304c\u3042\u3063\u305f\u5834\u5408\u306f\u3001\u30a4\u30d9\u30f3\u30c8\u306e\u30b9\u30bf\u30c3\u30d5\u306b\u5831\u544a\u3057\u3066\u304f\u3060\u3055\u3044\u3002 Lagoon\u30c1\u30fc\u30e0\u306e\u30e1\u30f3\u30d0\u30fc\u306b\u95a2\u3059\u308b\u554f\u984c\u306e\u5834\u5408\u306f\u3001uselagoon@amazee.io\u306b\u5831\u544a\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ol> <p>Lagoon\u30c1\u30fc\u30e0\u306f\u3001Lagoon\u306e\u30b9\u30da\u30fc\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8ab0\u3067\u3082\u7d42\u4e86\u3055\u305b\u308b\u6a29\u5229\u3092\u4fdd\u7559\u3057\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/concepts-advanced/","title":"Lagoon\u306e\u9ad8\u5ea6\u306a\u6982\u5ff5","text":"<p>\u3053\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u306f\u3001Lagoon\u306e\u3088\u308a\u9ad8\u5ea6\u306a\u6982\u5ff5\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002Lagoon\u3092\u4f7f\u3046\u306e\u304c\u521d\u3081\u3066\u306e\u65b9\u306f\u3001\u307e\u305aLagoon\u306e\u57fa\u672c\u6982\u5ff5\u304b\u3089\u59cb\u3081\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u5c02\u9580\u7684\u306a\u30b5\u30dd\u30fc\u30c8\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001Lagoon\u306e\u7ba1\u7406\u8005\u306b\u9023\u7d61\u3059\u308b\u304b\u3001\u79c1\u305f\u3061\u306eDiscord\u3067\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306e\u30e1\u30f3\u30d0\u30fc\u3084\u30e1\u30f3\u30c6\u30ca\u30fc\u306b\u9023\u7d61\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/concepts-advanced/backups/","title":"\u30d0\u30c3\u30af\u30a2\u30c3\u30d7","text":"<p>Lagoon\u306f\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30c7\u30fc\u30bf\u3068\u30b3\u30f3\u30c6\u30ca\u306e\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u4e21\u65b9\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u6a5f\u80fd\u3092\u63d0\u4f9b\u3059\u308b\u305f\u3081\u306b\u3001k8up operator\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u30aa\u30da\u30ec\u30fc\u30bf\u306f\u3001\u3053\u308c\u3089\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u30ab\u30bf\u30ed\u30b0\u5316\u3059\u308b\u305f\u3081\u306bRestic\u3092\u5229\u7528\u3057\u3001\u901a\u5e38\u306fAWS S3\u30d0\u30b1\u30c3\u30c8\u306b\u63a5\u7d9a\u3057\u3066\u751f\u6210\u3055\u308c\u305f\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306e\u5b89\u5168\u306a\u30aa\u30d5\u30b5\u30a4\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002</p>"},{"location":"ja/concepts-advanced/backups/#production","title":"production\u74b0\u5883","text":""},{"location":"ja/concepts-advanced/backups/#_2","title":"\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb","text":"<p>\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3068\u30b3\u30f3\u30c6\u30ca\u306e\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067<code>production</code>\u74b0\u5883\u5185\u3067\u591c\u9593\u306b\u884c\u308f\u308c\u307e\u3059\u3002</p> <p>\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306b\u7570\u306a\u308b\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e.lagoon.yml\u30d5\u30a1\u30a4\u30eb\u306e\"Backup Schedule\"\u5909\u6570\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30ec\u30d9\u30eb\u3067\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/concepts-advanced/backups/#_3","title":"\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u4fdd\u6301","text":"<p>production\u74b0\u5883\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u4ee5\u4e0b\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u306b\u5f93\u3063\u3066\u4fdd\u6301\u3055\u308c\u307e\u3059:</p> <ul> <li>\u65e5\u6b21:7</li> <li>\u9031\u6b21:6</li> <li>\u6708\u6b21:1</li> <li>\u6642\u9593\u3054\u3068:0</li> </ul> <p>\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306b\u7570\u306a\u308b\u4fdd\u6301\u671f\u9593\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e.lagoon.yml\u30d5\u30a1\u30a4\u30eb\u306b\u3042\u308b\"Backup Retention\"\u5909\u6570\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30ec\u30d9\u30eb\u3067\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/concepts-advanced/backups/#_4","title":"\u958b\u767a\u74b0\u5883","text":"<p>\u958b\u767a\u74b0\u5883\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306f\u6bce\u6669\u8a66\u307f\u3089\u308c\u307e\u3059\u304c\u3001\u3042\u304f\u307e\u3067\u30d9\u30b9\u30c8\u30a8\u30d5\u30a9\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002</p>"},{"location":"ja/concepts-advanced/backups/#_5","title":"\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306e\u53d6\u5f97","text":"<p>Restic\u306b\u4fdd\u5b58\u3055\u308c\u305f\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306fLagoon\u5185\u3067\u8ffd\u8de1\u3055\u308c\u3001Lagoon UI\u306e\u5404\u74b0\u5883\u306e\u300c\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u300d\u30bf\u30d6\u304b\u3089\u56de\u5fa9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/concepts-advanced/backups/#_6","title":"\u30ab\u30b9\u30bf\u30e0\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u304a\u3088\u3073/\u307e\u305f\u306f\u30ea\u30b9\u30c8\u30a2\u4f4d\u7f6e","text":"<p>Lagoon\u306f\u3001\u5404\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306eLagoon API\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\"\u30ab\u30b9\u30bf\u30e0\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u8a2d\u5b9a\"\u304a\u3088\u3073/\u307e\u305f\u306f\"\u30ab\u30b9\u30bf\u30e0\u30ea\u30b9\u30c8\u30a2\u8a2d\u5b9a\"\u5909\u6570\u3092\u4f7f\u7528\u3057\u3066\u3001\u30ab\u30b9\u30bf\u30e0\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3068\u30ea\u30b9\u30c8\u30a2\u306e\u5834\u6240\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u307e\u3059\u3002</p> <p>\u5371\u967a</p> <p>\u6ce8\u610f\u3057\u3066\u9032\u3081\u3066\u304f\u3060\u3055\u3044:\u3053\u308c\u3089\u306e\u5909\u6570\u3092\u8a2d\u5b9a\u3059\u308b\u3068\u3001\u30af\u30e9\u30b9\u30bf\u30fc\u30ec\u30d9\u30eb\u3067\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u53ef\u80fd\u6027\u306e\u3042\u308b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7/\u30ea\u30b9\u30c8\u30a2\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u5834\u6240\u304c\u4e0a\u66f8\u304d\u3055\u308c\u307e\u3059\u3002\u8a2d\u5b9a\u304c\u9593\u9055\u3063\u3066\u3044\u308b\u3068\u3001\u30d0\u30c3\u30af\u30a2\u30c3\u30d7/\u30ea\u30b9\u30c8\u30a2\u304c\u5931\u6557\u3059\u308b\u539f\u56e0\u3068\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"ja/concepts-advanced/base-images/","title":"\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8","text":""},{"location":"ja/concepts-advanced/base-images/#what-is-a-base-image","title":"\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u3068\u306f\u4f55\u3067\u3059\u304b\uff1f","text":"<p>\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306f\u3001Lagoon\u4e0a\u3067\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u4f7f\u7528\u3067\u304d\u308b\u3001\u307e\u305f\u306f\u4f7f\u7528\u3057\u3066\u3044\u308bDocker\u30a4\u30e1\u30fc\u30b8\u3067\u3059\u3002\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306f\u3001\u76e3\u67fb\u3055\u308c\u3066\u3044\u306a\u3044\u3082\u306e\u304c\u4e0a\u6d41\u304b\u3089\u30b3\u30fc\u30c9\u30d9\u30fc\u30b9/\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u6301\u3061\u8fbc\u307e\u308c\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u65b9\u6cd5\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002\u307e\u305f\u3001\u4f4e\u30ec\u30d9\u30eb\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u304b\u3089\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30ec\u30d9\u30eb\u306e\u30c6\u30fc\u30de\u3068\u30e2\u30b8\u30e5\u30fc\u30eb\u307e\u3067\u3001\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u305f\u74b0\u5883\u4e0a\u3067\u5fc5\u8981\u3068\u306a\u308b\u53ef\u80fd\u6027\u306e\u3042\u308b\u3082\u306e\u304c\u3059\u3079\u3066\u5229\u7528\u53ef\u80fd\u3067\u3042\u308b\u3053\u3068\u3092\u4fdd\u8a3c\u3057\u307e\u3059\u3002</p> <p>\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306f\u3001\u3069\u306e\u30b7\u30b9\u30c6\u30e0\u304c\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u3066\u3044\u308b\u304b\u304c\u308f\u304b\u3063\u3066\u3044\u308b\u5834\u5408\u3001\u6642\u9593\u3068\u30ea\u30bd\u30fc\u30b9\u306e\u7bc0\u7d04\u306b\u5f79\u7acb\u3061\u307e\u3059\u3002\u3064\u307e\u308a\u3001\u5171\u6709\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u305d\u308c\u3089\u3092\u500b\u3005\u306e\u6570\u767e\u306e\u30b5\u30a4\u30c8\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002</p>"},{"location":"ja/concepts-advanced/base-images/#derived-images","title":"\u6d3e\u751f\u30a4\u30e1\u30fc\u30b8","text":"<p>\u6d3e\u751f\u30a4\u30e1\u30fc\u30b8\u3068\u306f\u3001\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u3092\u62e1\u5f35\u3059\u308b\u30a4\u30e1\u30fc\u30b8\u306e\u3053\u3068\u3092\u6307\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001\u3044\u304f\u3064\u304b\u306e\u30d6\u30ed\u30b0\u30b5\u30a4\u30c8\u3092\u4f5c\u308b\u5fc5\u8981\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u79c1\u305f\u3061\u306eDrupal\u30a4\u30e1\u30fc\u30b8\u3092\u53d6\u5f97\u3057\u3001\u30d6\u30ed\u30b0\u30b5\u30a4\u30c8\u306b\u5fc5\u8981\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u3068\u30c6\u30fc\u30de\u3059\u3079\u3066\u3092\u542b\u3081\u3066\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3057\u3001\u305d\u306e\u30d6\u30ed\u30b0\u30a4\u30e1\u30fc\u30b8\u3067\u3059\u3079\u3066\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306f\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u304b\u3089\u6d3e\u751f\u3057\u307e\u3059\u3002</p> <p>\u3059\u3079\u3066\u306e\u6d3e\u751f\u30a4\u30e1\u30fc\u30b8\u306f\u3001<code>composer.json</code>\u30d5\u30a1\u30a4\u30eb(Packagist\u3001Satis\u3001\u307e\u305f\u306fGitHub\u306a\u3069\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u7d4c\u7531\u3067)\u3092\u53d6\u308a\u8fbc\u3080\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u57fa\u672c\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u4f7f\u7528\u3059\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002</p> <p>\u3055\u3089\u306b\u3001\u6d3e\u751f\u30a4\u30e1\u30fc\u30b8\u306b\u306f\u3001<code>/build/pre_composer</code>\u30b9\u30af\u30ea\u30d7\u30c8\u3078\u306e\u547c\u3073\u51fa\u3057\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u304c\u6d3e\u751f\u30a4\u30e1\u30fc\u30b8\u3067\u30b9\u30af\u30ea\u30d7\u30c8\u3001\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u306a\u3069\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001\u6d3e\u751f\u30a4\u30e1\u30fc\u30b8\u3067\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u66f4\u65b0\u307e\u305f\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u3068\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u5b9f\u884c\u3055\u308c\u3001<code>pre_composer</code>\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u305d\u306e\u5f8c\u3001\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u66f4\u65b0\u3057\u307e\u3059\u3002</p>"},{"location":"ja/concepts-advanced/base-images/#anatomy-of-a-base-image","title":"\u3079\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306e\u69cb\u9020","text":"<p>\u60c5\u5831</p> <p>\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u306f\u3001Drupal\u3084Laravel\u306e\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u3092\u4f8b\u306b\u53d6\u308a\u4e0a\u3052\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u5143\u3005Lagoon\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3053\u308c\u3089\u306e\u30c6\u30af\u30ce\u30ed\u30b8\u30fc\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5411\u3051\u306b\u66f8\u304b\u308c\u305f\u3082\u306e\u3067\u3059\u3002\u4ed6\u306e\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306e\u5185\u5bb9\u3082\u30ab\u30d0\u30fc\u3059\u308b\u3088\u3046\u306b\u62e1\u5f35\u3055\u308c\u307e\u3059\u304c\u3001\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306e\u5185\u5bb9\u306b\u95a2\u4fc2\u306a\u304f\u3001\u30d7\u30ed\u30bb\u30b9\u306f\u5909\u308f\u308a\u307e\u305b\u3093\u3002</p> <p>\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306f\u3001Composer\u3067\u7ba1\u7406\u3055\u308c\u3001BitBucket\u3001GitHub\u3001\u307e\u305f\u306fGitLab (\u30c1\u30fc\u30e0\u304c\u4f7f\u7528\u3057\u3066\u3044\u308b\u3082\u306e)\u306b\u30db\u30b9\u30c8\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u5404\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306b\u306f\u72ec\u81ea\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/concepts-advanced/base-images/#metapackages","title":"\u30e1\u30bf\u30d1\u30c3\u30b1\u30fc\u30b8","text":"<p>\u30e1\u30bf\u30d1\u30c3\u30b1\u30fc\u30b8\u306f\u3001\u8907\u6570\u306e\u4ed6\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u5305\u62ec\u3059\u308bComposer\u30d1\u30c3\u30b1\u30fc\u30b8\u3067\u3059\u3002\u3053\u308c\u306b\u306f\u3001\u4f8b\u3048\u3070\u3001Laravel\u3084Drupal\u306e\u30b3\u30a2\u30d5\u30a1\u30a4\u30eb\u3001\u5fc5\u8981\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u3084\u30c6\u30fc\u30de\u306a\u3069\u304c\u542b\u307e\u308c\u307e\u3059\u3002 \u3053\u308c\u306b\u3088\u308a\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f9d\u5b58\u95a2\u4fc2\u306b Laravel \u3084 Drupal \u306a\u3069\u3092\u542b\u3081\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u305b\u3093\u3002</p> <p>\u4ee5\u4e0b\u306f\u3001Laravel\u306e\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u3092 <code>composer.json</code> \u304b\u3089\u4f7f\u7528\u3057\u305f\u4f8b\u3067\u3059:</p> composer.json<pre><code>\"require\": {\n    \"amazeelabs/algm_laravel_baseimage\": \"*\"\n},\n</code></pre> <p>\u79c1\u305f\u3061\u306b\u5fc5\u7528\u306a\u306e\u306fGitHub\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u6307\u3059\u3053\u306e\u30e1\u30bf\u30d1\u30c3\u30b1\u30fc\u30b8\u3060\u3051\u3067\u3059\u3002</p>"},{"location":"ja/concepts-advanced/base-images/#docker-composeyml","title":"<code>docker-compose.yml</code>","text":"<p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4ed6\u306e\u90e8\u5206\u306f <code>docker-compose.yml</code> \u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001Drupal\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u6301\u3063\u3066\u3044\u308b\u5834\u5408\u3001Drupal \u306e\u30a4\u30e1\u30fc\u30b8\u304c\u5fc5\u8981\u3067\u3059\u304c\u3001MariaDB\u3001Solr\u3001Redis\u3001Varnish\u3082\u5fc5\u8981\u3067\u3059\u3002\u3053\u308c\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306fDrupal\u306b\u6700\u9069\u5316\u3055\u308c\u3066\u304a\u308a\u3001\u3059\u3079\u3066<code>docker-compose.yml</code>\u306b\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/concepts-advanced/base-images/#drupal","title":"Drupal","text":"<p>Drupal\u30d9\u30fc\u30b9\u306e\u30a4\u30e1\u30fc\u30b8\u306b\u306f\u3001Drupal\u30b3\u30a2\u306b\u52a0\u3048\u3066\u4ee5\u4e0b\u306e\u30b3\u30f3\u30c8\u30ea\u30d3\u30e5\u30fc\u30c8\u30c4\u30fc\u30eb\u3084\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059:</p> <ul> <li>Drupal Console</li> <li>Drush</li> <li>Configuration installer</li> <li>Redis</li> <li>Poll</li> <li>Search API</li> <li>Search API Solr</li> <li>Varnish Purge</li> <li>Purge</li> <li>Admin Toolbar</li> <li>CDN</li> <li>Password Policy</li> <li>Pathauto</li> <li>Ultimate Cron</li> </ul>"},{"location":"ja/concepts-advanced/base-images/#configuration","title":"\u8a2d\u5b9a","text":"<p>\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306f\u3001Laravel\u3067\u4f7f\u7528\u3055\u308c\u308b\u74b0\u5883\u5909\u6570\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002</p> <p>\u3053\u308c\u3089\u306f\u4ee5\u4e0b\u306e\u5024\u3067\u3059:</p> <ul> <li><code>DB_CONNECTION</code></li> <li><code>DB_HOST</code></li> <li><code>DB_PORT</code></li> <li><code>DB_DATABASE</code></li> <li><code>DB_USERNAME</code></li> <li><code>DB_PASSWORD</code></li> <li><code>REDIS_HOST</code></li> <li><code>REDIS_PASSWORD</code></li> <li><code>REDIS_PORT</code></li> </ul> <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb(\u901a\u5e38\u306f<code>/config</code>\u306b\u4f4d\u7f6e\u3057\u3066\u3044\u307e\u3059)\u304c\u3053\u308c\u3089\u3092\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u4f7f\u7528\u3059\u308b\u3088\u3046\u306b\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/concepts-advanced/base-images/#queues","title":"\u30ad\u30e5\u30fc","text":"<p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u30ad\u30e5\u30fc\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u3001<code>artisan-worker</code>\u30b5\u30fc\u30d3\u30b9\u3092\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306f\u30ef\u30fc\u30ab\u30fc\u30b3\u30f3\u30c6\u30ca\u3067\u3001<code>artisan queue:work</code>\u306e\u5b9f\u884c\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u7121\u52b9\u5316\u3055\u308c\u3066\u3044\u307e\u3059\u3002\uff08<code>docker-compose.yml</code>\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\uff09</p>"},{"location":"ja/concepts-advanced/base-images/#understanding-the-process-of-building-a-base-image","title":"\u30d3\u30eb\u30c9\u30d7\u30ed\u30bb\u30b9\u306e\u7406\u89e3 \u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8","text":"<p>\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u3092\u69cb\u7bc9\u3059\u308b\u30d7\u30ed\u30bb\u30b9\u306b\u306f\u3044\u304f\u3064\u304b\u306e\u90e8\u5206\u304c\u3042\u308a\u307e\u3059\u3002\u4e3b\u8981\u306a\u30b9\u30c6\u30c3\u30d7\u306f\u3059\u3079\u3066Makefile\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002Jenkinsfile\u306b\u306f\u3088\u308a\u30b7\u30f3\u30d7\u30eb\u306a\u30d3\u30e5\u30fc\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u898b\u308b\u3053\u3068\u3067\u3001\u3053\u306e\u30d7\u30ed\u30bb\u30b9\u4e2d\u306b\u4f55\u304c\u8d77\u3053\u308b\u304b\u3092\u3088\u304f\u7406\u89e3\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u307b\u3068\u3093\u3069\u306e\u30b9\u30c6\u30c3\u30d7\u306f\u30ed\u30fc\u30ab\u30eb\u3067\u30c6\u30b9\u30c8\u3067\u304d\u307e\u3059(\u3053\u308c\u306f\u65b0\u3057\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u3092\u69cb\u7bc9\u3059\u308b\u969b\u306b\u91cd\u8981\u3067\u3059)\u3002\u30ed\u30fc\u30ab\u30eb\u3067\u5168\u3066\u3092\u4f5c\u6210\u3057\u3001\u30c6\u30b9\u30c8\u3057\u305f\u5f8c\u306b\u30d7\u30c3\u30b7\u30e5\u3059\u308b\u3068\u3001\u5b9f\u969b\u306e\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306fJenkins\u306b\u3088\u3063\u3066\u69cb\u7bc9\u3055\u308c\u3001Harbor\u306b\u30d7\u30c3\u30b7\u30e5\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/concepts-advanced/base-images/#makefile-and-build-assumptions","title":"Makefile\u3068\u30d3\u30eb\u30c9\u306e\u524d\u63d0\u6761\u4ef6","text":"<p>\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3059\u308b\u5834\u5408\u3001\u30d3\u30eb\u30c9\u3059\u308b\u305f\u3081\u306b\u6700\u4f4e\u9650\u5fc5\u7528\u306a\u74b0\u5883\u5909\u6570\u304c\u3044\u304f\u3064\u304b\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/concepts-advanced/base-images/#base-image-build-variables","title":"\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u30d3\u30eb\u30c9\u5909\u6570","text":"<p>\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u30d3\u30eb\u30c9\u30d7\u30ed\u30bb\u30b9\u306b\u6ce8\u5165\u3055\u308c\u308b\u5909\u6570\u3068\u3001\u305d\u308c\u3092\u898b\u3064\u3051\u308b\u5834\u6240\u3067\u3059\u3002</p> <ul> <li><code>BUILD_NUMBER</code> - \u3053\u308c\u306f\u81ea\u52d5\u7684\u306bJenkins\u306b\u3088\u3063\u3066\u6ce8\u5165\u3055\u308c\u307e\u3059\u3002</li> <li><code>GIT_BRANCH</code> - \u3053\u308c\u306fJenkins\u306e\u30d3\u30eb\u30c9\u30d7\u30ed\u30bb\u30b9\u81ea\u4f53\u306b\u3088\u3063\u3066\u63d0\u4f9b\u3055\u308c\u307e\u3059\u3002\u305d\u306e\u6642\u70b9\u3067\u30d3\u30eb\u30c9\u3055\u308c\u3066\u3044\u308b\u30d6\u30e9\u30f3\u30c1(develop\u3001main\u306a\u3069)\u306b\u4f9d\u5b58\u3057\u307e\u3059\u3002</li> <li><code>DOCKER_REPO</code>/<code>DOCKER_HUB</code> - \u3053\u308c\u306fJenkinsfile\u81ea\u4f53\u5185\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u3066\u751f\u6210\u3055\u308c\u305f\u30a4\u30e1\u30fc\u30b8\u304c\u30d7\u30c3\u30b7\u30e5\u3055\u308c\u308bDocker\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3068\u30cf\u30d6\u3092\u6307\u3057\u3066\u3044\u307e\u3059\u3002</li> <li><code>DOCKER_USERNAME</code>/<code>DOCKER_PASSWORD</code> - \u3053\u308c\u3089\u306f\u3001\u30d3\u30eb\u30c9\u306e\u65e9\u3044\u6bb5\u968e\u3067Docker\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u5b9f\u969b\u306b\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u5909\u6570\u306fJenkins\u306e\u8a8d\u8a3c\u60c5\u5831\u5185\u306b\u4fdd\u5b58\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u3089\u306fJenkinsfile\u81ea\u4f53\u3067\u4f7f\u7528\u3055\u308c\u3001Makefile\u306e\u4e00\u90e8\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u3064\u307e\u308a\u3001Jenkins\u4ee5\u5916\u306e\u5834\u6240(\u30ed\u30fc\u30ab\u30eb\u3067\u30c6\u30b9\u30c8\u3059\u308b\u306a\u3069)\u3067\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3059\u308b\u5834\u5408\u3001<code>docker login</code>\u3092\u624b\u52d5\u3067\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</li> </ul> <p>\u5b9f\u969b\u306b\u306f\u3001\u30ed\u30fc\u30ab\u30eb\u30de\u30b7\u30f3\u3067<code>make</code>\u30bf\u30fc\u30b2\u30c3\u30c8\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u3053\u308c\u3089\u304c\u74b0\u5883\u3067\u5229\u7528\u53ef\u80fd\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u305f\u3044\u3068\u601d\u3046\u3067\u3057\u3087\u3046 - \u305f\u3068\u3048\u3070\u3001\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089make\u3092\u5b9f\u884c\u3059\u308b\u3068\u304d\u306b\u3053\u308c\u3089\u3092\u8a2d\u5b9a\u3059\u308b\u3060\u3051\u3067\u3082\u69cb\u3044\u307e\u305b\u3093:</p> \u30ed\u30fc\u30ab\u30eb\u3067make\u30bf\u30fc\u30b2\u30c3\u30c8\u3092\u8a2d\u5b9a\u3059\u308b<pre><code>GIT_BRANCH=example_branch_name DOCKER_HUB=the_docker_hub_the_images_are_pushed_to DOCKER_REPO=your_docker_repo_here BUILD_NUMBER=&lt;some_integer&gt; make images_remove\n</code></pre>"},{"location":"ja/concepts-advanced/base-images/#makefile-targets","title":"Makefile targets","text":"<p>\u6700\u3082\u91cd\u8981\u306a\u30bf\u30fc\u30b2\u30c3\u30c8\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059:</p> <ul> <li><code>images_build</code> : \u74b0\u5883\u5909\u6570\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001\u753b\u50cf\u3092\u30d3\u30eb\u30c9\u3057\u3066\u30bf\u30b0\u3092\u4ed8\u3051\u3066\u516c\u958b\u3057\u307e\u3059\u3002</li> <li><code>images_publish</code> : \u30d3\u30eb\u30c9\u3055\u308c\u305f\u753b\u50cf\u3092Docker\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u30d7\u30c3\u30b7\u30e5\u3057\u307e\u3059\u3002</li> <li><code>images_start</code> : \u30c6\u30b9\u30c8\u306a\u3069\u306e\u305f\u3081\u306b\u30a4\u30e1\u30fc\u30b8\u3092\u958b\u59cb\u3057\u307e\u3059\u3002</li> <li><code>images_test</code>:\u30a4\u30e1\u30fc\u30b8\u306b\u5bfe\u3057\u3066\u57fa\u672c\u7684\u306a\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</li> <li><code>images_remove</code>:\u30d3\u30eb\u30c9\u74b0\u5883\u5909\u6570\u304c\u4e0e\u3048\u3089\u308c\u308b\u3068\u3001\u4ee5\u524d\u306b\u30d3\u30eb\u30c9\u3055\u308c\u305f\u30a4\u30e1\u30fc\u30b8\u3092\u524a\u9664\u3057\u307e\u3059\u3002</li> </ul>"},{"location":"ja/concepts-advanced/base-images/#example-workflow-for-building-a-new-release-of-a-base-image","title":"\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306e\u65b0\u30ea\u30ea\u30fc\u30b9\u3092\u30d3\u30eb\u30c9\u3059\u308b\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u4f8b","text":"<p>\u30d3\u30eb\u30c9\u30d7\u30ed\u30bb\u30b9\u306b\u306f\u3044\u304f\u3064\u304b\u306e\u30b9\u30c6\u30c3\u30d7\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u307b\u3068\u3093\u3069\u306f\u3001\u69d8\u3005\u306a\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u9593\u3067\u5171\u6709\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u3089\u306f\u4e3b\u306b\u4e0a\u8a18\u3067\u8aac\u660e\u3057\u305fMakefile\u30bf\u30fc\u30b2\u30c3\u30c8\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002</p> <ol> <li>Docker Login - Docker\u306e\u30e6\u30fc\u30b6\u30fc\u540d\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u3001Harbor\u306eURL\u304cDocker\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u6e21\u3055\u308c\u307e\u3059\u3002</li> <li>Docker Build - <code>make images_build</code>\u30b9\u30c6\u30c3\u30d7\u304c\u73fe\u5728\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u4ee5\u4e0b\u306e\u3053\u3068\u304c\u884c\u308f\u308c\u307e\u3059:<ol> <li>\u3059\u3079\u3066\u306e\u74b0\u5883\u5909\u6570\u304c\u30d3\u30eb\u30c9\u306e\u305f\u3081\u306b\u6e96\u5099\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</li> <li><code>docker-compose build</code>\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u73fe\u5728\u306eGit\u30d6\u30e9\u30f3\u30c1\u304b\u3089\u3044\u304f\u3064\u304b\u306e\u65b0\u3057\u3044Docker\u30a4\u30e1\u30fc\u30b8\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002</li> </ol> </li> <li>Image Test - \u3053\u308c\u306b\u3088\u308a<code>make images_test</code>\u30bf\u30fc\u30b2\u30c3\u30c8\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u306f\u30c6\u30b9\u30c8\u3055\u308c\u308b\u30a4\u30e1\u30fc\u30b8\u306b\u3088\u308a\u7570\u306a\u308a\u307e\u3059\u3002\u307b\u3068\u3093\u3069\u306e\u5834\u5408\u3001\u3053\u308c\u306f\u30a4\u30e1\u30fc\u30b8\u3092\u958b\u59cb\u3057\u3001\u4f55\u3089\u304b\u306e\u65b9\u6cd5\u3067\u5bfe\u8a71\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u975e\u5e38\u306b\u76f4\u611f\u7684\u306a\u30c6\u30b9\u30c8\u3067\u3059(Drupal\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u30ea\u30b9\u30c8\u8868\u793a\u306a\u3069)\u3002</li> <li>Docker Push - \u3053\u306e\u30b9\u30c6\u30c3\u30d7\u3067\u306f\u3001<code>images_publish</code>\u306emake\u30bf\u30fc\u30b2\u30c3\u30c8\u306b\u542b\u307e\u308c\u308b\u30ed\u30b8\u30c3\u30af\u304c\u5b9f\u884c\u3055\u308c\u3001\u305d\u306e\u7d50\u679c\u3068\u3057\u3066\u751f\u6210\u3055\u308c\u305f\u30a4\u30e1\u30fc\u30b8\u306b\u30bf\u30b0\u304c\u4ed8\u3051\u3089\u308c\u307e\u3059\u3002 \u30b9\u30c6\u30c3\u30d72\u306eDocker Build\u3067\u305d\u308c\u3089\u3092Harbor\u306b\u30d7\u30c3\u30b7\u30e5\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3064\u3044\u3066\u306f\u3001\u672c\u30ac\u30a4\u30c9\u306e\u4ed6\u306e\u5834\u6240\u3067\u8a73\u3057\u304f\u8aac\u660e\u3055\u308c\u3066\u3044\u307e\u3059\u3002</li> <li>Docker Clean Images - <code>images_remove</code>\u3068\u3044\u3046make\u30bf\u30fc\u30b2\u30c3\u30c8\u3092\u5b9f\u884c\u3057\u3001\u3053\u308c\u3089\u304cHarbor\u306b\u3042\u308b\u305f\u3081\u3001\u65b0\u3057\u304f\u30d3\u30eb\u30c9\u3055\u308c\u305f\u30a4\u30e1\u30fc\u30b8\u3092Docker\u30db\u30b9\u30c8\u304b\u3089\u5358\u7d14\u306b\u524a\u9664\u3057\u307e\u3059\u3002</li> </ol>"},{"location":"ja/concepts-advanced/base-images/#releasing-a-new-version-of-a-base-image","title":"\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306e\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u30ea\u30ea\u30fc\u30b9","text":"<p>\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306e\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30ea\u30ea\u30fc\u30b9\u3059\u308b\u7406\u7531\u306f\u591a\u3005\u3042\u308a\u307e\u3059\u3002Drupal\u3084Laravel\u3001Node.js\u306a\u3069\u306e\u30a4\u30e1\u30fc\u30b8\u3067\u306f\u3001\u6a5f\u80fd\u3084\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u305f\u3081\u306b\u30e2\u30b8\u30e5\u30fc\u30eb\u3084\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u307e\u305f\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u307e\u305f\u3001\u30b3\u30f3\u30c6\u30ca\u306b\u30d0\u30f3\u30c9\u30eb\u3055\u308c\u3066\u3044\u308b\u57fa\u672c\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u66f4\u65b0\u3059\u308b\u3053\u3068\u3082\u3042\u308a\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001PHP\u3084Node.js\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u66f4\u65b0\u3059\u308b\u306a\u3069\u3067\u3059\u3002\u307e\u305f\u3001\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u304c\u30d3\u30eb\u30c9\u3055\u308c\u3066\u3044\u308b\u5b9f\u969b\u306e\u57fa\u672c\u7684\u306a\u30a4\u30e1\u30fc\u30b8\u3092\u66f4\u65b0\u3059\u308b\u3053\u3068\u3082\u3042\u308a\u307e\u3059\u3002</p> <p>\u3042\u306a\u305f\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30d9\u30fc\u30b9\u3068\u306a\u308b\u30a4\u30e1\u30fc\u30b8\u306f\u3001Lagoon\u30c1\u30fc\u30e0\u306b\u3088\u3063\u3066\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b\u30a4\u30e1\u30fc\u30b8\u3067\u3059\u3002\u3053\u308c\u3089\u306e\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306f\u6708\u306b\u4e00\u56de(\u307e\u305f\u306f\u305d\u308c\u4ee5\u4e0a)\u306e\u983b\u5ea6\u3067\u66f4\u65b0\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u3089\u304c\u66f4\u65b0\u3055\u308c\u305f\u3068\u304d\u3001\u3042\u306a\u305f\u306f\u30a2\u30c3\u30d7\u30b9\u30c8\u30ea\u30fc\u30e0\u306e\u30a4\u30e1\u30fc\u30b8\u306b\u30d0\u30f3\u30c9\u30eb\u3055\u308c\u3066\u3044\u308b\u5909\u66f4\u3068\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3092\u53d6\u308a\u5165\u308c\u308b\u305f\u3081\u306b\u3001\u81ea\u5206\u81ea\u8eab\u306e\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306e\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30d3\u30eb\u30c9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>\u3053\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u306f\u3001\u305d\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u793a\u3057\u307e\u3059\u3002 Drupal8\u306e\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306e\u65b0\u30ea\u30ea\u30fc\u30b9\u3092\u66f4\u65b0\u304a\u3088\u3073\u30bf\u30b0\u4ed8\u3051\u3057\u307e\u3059\u3002\u6211\u3005\u306f\u65b0\u3057\u3044\u30e2\u30b8\u30e5\u30fc\u30eb(ClamAV)\u3092\u57fa\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002Drupal\u3067\u30c7\u30e2\u3092\u884c\u3046\u306e\u306f\u3001\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306e\u4e2d\u3067\u6700\u3082\u8a2d\u5b9a\u304c\u8907\u96d1\u3060\u304b\u3089\u3067\u3059\u3002\u3059\u3079\u3066\u306e\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306b\u5171\u901a\u3059\u308b\u624b\u9806\u3092\u4ee5\u4e0b\u306b\u8a18\u8f09\u3057\u307e\u3059\u3002</p>"},{"location":"ja/concepts-advanced/base-images/#step-1-pull-down-the-base-image-locally","title":"\u30b9\u30c6\u30c3\u30d71 - \u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u3092\u30ed\u30fc\u30ab\u30eb\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b","text":"<p>\u3053\u308c\u306f\u5358\u306bGit\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u30ed\u30fc\u30ab\u30eb\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3053\u3068\u3067\u3059\u3002Drupal8\u306e\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306e\u5834\u5408\u3067\u306f\u3001Bitbucket\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u306e\u3067\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059:</p> Clone Git repo.<pre><code>git clone ssh://git@bitbucket.biscrum.com:7999/webpro/drupal8_base_image.git\n</code></pre> <p></p>"},{"location":"ja/concepts-advanced/base-images/#step-2-make-the-changes-to-the-repository","title":"\u30b9\u30c6\u30c3\u30d72 - \u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u5909\u66f4\u3092\u52a0\u3048\u308b","text":"<p>\u60c5\u5831</p> <p>\u3053\u3053\u3067\u793a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u306fDrupal 8\u306e\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306b\u7279\u6709\u306e\u3082\u306e\u3067\u3059\u3002\u3057\u304b\u3057\u3001\u3042\u3089\u3086\u308b\u5909\u66f4(\u30d5\u30a1\u30a4\u30eb\u306e\u8ffd\u52a0\u3001\u57fa\u672c\u7684\u306aDocker\u30a4\u30e1\u30fc\u30b8\u306e\u5909\u66f4\u306a\u3069)\u306f\u3059\u3079\u3066\u306e\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306b\u5bfe\u3057\u3066\u3053\u306e\u30b9\u30c6\u30c3\u30d7\u3067\u884c\u308f\u308c\u307e\u3059\u3002</p> <p>\u6211\u3005\u306e\u4f8b\u3067\u306f\u3001ClamAV\u30e2\u30b8\u30e5\u30fc\u30eb\u3092Drupal 8\u306e\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306b\u8ffd\u52a0\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306b\u306f\u3044\u304f\u3064\u304b\u306e\u30b9\u30c6\u30c3\u30d7\u304c\u95a2\u4e0e\u3057\u307e\u3059\u3002\u6700\u521d\u306f\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u5fc5\u8981\u3068\u3059\u308b\u3053\u3068\u3067\u3001\u3053\u308c\u306b\u3088\u308a\u6211\u3005\u306e<code>composer.json</code>\u30d5\u30a1\u30a4\u30eb\u306b\u8ffd\u52a0\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u306f<code>composer require</code>\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u884c\u308f\u308c\u307e\u3059\u3002</p> <p>\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059: Composer require\u3067\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002<pre><code>composer require drupal/clamav\n</code></pre></p> <p></p> <p>Composer require\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u5b8c\u4e86\u3059\u308b\u3068\u3001\u30d1\u30c3\u30b1\u30fc\u30b8\u306f<code>composer.json</code>\u30d5\u30a1\u30a4\u30eb\u306b\u8868\u793a\u3055\u308c\u308b\u3079\u304d\u3067\u3059\u3002 \u3053\u3053\u3067\u306f\u3001<code>composer.json</code>\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304d\u3001\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30ea\u30b9\u30c8\u3092\u898b\u3066\u3001ClamAV\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u30ea\u30b9\u30c8\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"ja/concepts-advanced/base-images/#step-22-ensure-that-the-required-drupal-module-is-enabled-in-template-based-derived-images","title":"\u30b9\u30c6\u30c3\u30d72.2 - \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d9\u30fc\u30b9\u306e\u6d3e\u751f\u30a4\u30e1\u30fc\u30b8\u3067\u5fc5\u8981\u306aDrupal\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b","text":"<p>\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306b\u8ffd\u52a0\u3055\u308c\u305f\u4efb\u610f\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u306f\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d9\u30fc\u30b9\u306e\u6d3e\u751f\u30a4\u30e1\u30fc\u30b8\u3067\u6709\u52b9\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u30e2\u30b8\u30e5\u30fc\u30eb\u3092Lagoon Bundle\u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3067\u884c\u308f\u308c\u307e\u3059\u3002\u3053\u308c\u306f\u5177\u4f53\u7684\u306b\u306f\u3001<code>dependencies</code>\u30bb\u30af\u30b7\u30e7\u30f3\u306e<code>lagoon_bundle.info.yml</code>\u30d5\u30a1\u30a4\u30eb\u306b\u4f9d\u5b58\u6027\u3068\u3057\u3066\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3092\u8981\u6c42\u3057\u307e\u3059\u3002Lagoon Bundle\u30e2\u30b8\u30e5\u30fc\u30eb\u306f\u3001\u6d3e\u751f\u30a4\u30e1\u30fc\u30b8\u9593\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u5f37\u5236\u3059\u308b\u305f\u3081\u3060\u3051\u306b\u5b58\u5728\u3059\u308b\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u3059\u3002 \u3053\u3053\u3067\u306f\u3001<code>web/modules/contrib/lagoon/lagoon_bundle/lagoon_bundle.info.yml</code>\u3092\u958b\u304d\u3001\u4f9d\u5b58\u95a2\u4fc2\u3068\u3057\u3066<code>clamav:clamav</code>\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> <p></p> <p>\u3053\u308c\u306b\u4f9d\u5b58\u95a2\u4fc2\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3067\u3001\u6d3e\u751f\u3057\u305f\u30a4\u30e1\u30fc\u30b8\u4e0a\u3067Lagoon Bundle\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u6709\u52b9\u306b\u306a\u308b\u305f\u3073\u306b\u3001\u305d\u306e\u4f9d\u5b58\u95a2\u4fc2(\u3053\u306e\u5834\u5408\u3001\u65b0\u305f\u306b\u8ffd\u52a0\u3055\u308c\u305fClamAV\u30e2\u30b8\u30e5\u30fc\u30eb)\u3082\u6709\u52b9\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u6642\u306b<code>lagoon_bundle</code>\u3092\u6d3e\u751f\u30a4\u30e1\u30fc\u30b8\u3067\u6709\u52b9\u306b\u3059\u308b\u30dd\u30b9\u30c8\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u5f37\u5236\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/concepts-advanced/base-images/#step-23-test","title":"\u30b9\u30c6\u30c3\u30d72.3 - \u30c6\u30b9\u30c8","text":"<p>\u3053\u308c\u306f\u3042\u306a\u305f\u304c\u4f55\u3092\u30c6\u30b9\u30c8\u3057\u3066\u3044\u308b\u304b\u306b\u3088\u308a\u307e\u3059\u3002ClamAV\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u8ffd\u52a0\u3059\u308b\u5834\u5408\u3001\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u3067\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3055\u308c\u3001Lagoon Bundle\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u6709\u52b9\u5316\u3055\u308c\u305f\u3068\u304d\u306bClamAV\u3082\u6709\u52b9\u5316\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u305f\u3044\u3067\u3059\u3002 \u3053\u3053\u3067\u306f\u3001\u30e2\u30b8\u30e5\u30fc\u30eb\u304c<code>/app/web/modules/contrib</code>\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> <p></p> <p>\u305d\u3057\u3066\u3001<code>lagoon_bundle</code>\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u6709\u52b9\u5316\u3059\u308b\u3068\u304d\u306b\u3001<code>clamav</code>\u3082\u6709\u52b9\u5316\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306b\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002 Drush\u3067\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u6709\u52b9\u5316\u3059\u308b\u3002<pre><code>drush pm-enable lagoon_bundle -y\n</code></pre></p> <p></p> <p>\u8b66\u544a</p> <p>\u4e0a\u8a18\u306e\u30b3\u30f3\u30c6\u30ca\u3067JWT\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308b\u3067\u3057\u3087\u3046\u3002\u4e0a\u306e\u30c7\u30e2\u3067\u306f\u3053\u306e\u30a8\u30e9\u30fc\u306f\u7121\u8996\u3057\u3066\u304b\u307e\u3044\u307e\u305b\u3093\u3002\u80cc\u666f\u3068\u3057\u3066\u3001\u3042\u306a\u305f\u304c\u4f5c\u696d\u3057\u3066\u3044\u308b\u30b5\u30a4\u30c8\u306bLagoon\u74b0\u5883\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u3001\u3053\u306e\u30a8\u30e9\u30fc\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002</p> <p>\u30c6\u30b9\u30c8\u304c\u7d42\u4e86\u3057\u305f\u306e\u3067\u3001\u30a4\u30e1\u30fc\u30b8\u3092\u30bf\u30b0\u4ed8\u3051\u3057\u3066\u30d3\u30eb\u30c9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/concepts-advanced/base-images/#step-3-tagging-images","title":"\u30b9\u30c6\u30c3\u30d73 - \u30a4\u30e1\u30fc\u30b8\u306e\u30bf\u30b0\u4ed8\u3051","text":"<p>\u30a4\u30e1\u30fc\u30b8\u306f\u3001Git\u30bf\u30b0\u306b\u57fa\u3065\u3044\u3066\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u3055\u308c\u307e\u3059 - \u3053\u308c\u3089\u306f\u6a19\u6e96\u7684\u306a\u30bb\u30de\u30f3\u30c6\u30a3\u30c3\u30af\u30d0\u30fc\u30b8\u30e7\u30cb\u30f3\u30b0(semver)\u306e\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u306b\u5f93\u3046\u3079\u304d\u3067\u3059\u3002\u3059\u3079\u3066\u306e\u30bf\u30b0\u306f vX.Y.Z \u306e\u69cb\u9020\u3092\u6301\u3064\u3079\u304d\u3067\u3042\u308a\u3001X\u3001Y\u3001Z\u306f\u6574\u6570\u3067\u3059(\u6b63\u78ba\u306b\u306fX.Y.Z\u81ea\u4f53\u304c\u30bb\u30de\u30f3\u30c6\u30a3\u30c3\u30af\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u3042\u308a\u3001vX.Y.Z\u306f\u30bf\u30b0\u3067\u3059)\u3002\u3053\u308c\u306f\u30a4\u30e1\u30fc\u30b8\u30bf\u30b0\u3092\u6c7a\u5b9a\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u308b\u306e\u3067\u5fc5\u305a\u5f93\u3046\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>\u3053\u306e\u4f8b\u3067\u306f\u3001ClamAV\u3092\u8ffd\u52a0\u3057\u305f\u3053\u3068\u3092\u793a\u3059Drupal8\u306e\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306e\u65b0\u3057\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30bf\u30b0\u4ed8\u3051\u3057\u307e\u3059\u3002</p>"},{"location":"ja/concepts-advanced/base-images/#here-we-demonstrate-how-to-tag-an-image","title":"\u3053\u3053\u3067\u306f\u3001\u30a4\u30e1\u30fc\u30b8\u306e\u30bf\u30b0\u4ed8\u3051\u65b9\u6cd5\u3092\u793a\u3057\u307e\u3059","text":"<p>\u79c1\u305f\u3061\u306f\u3001<code>git log</code>\u3092\u4f7f\u7528\u3057\u3066\u3001\u901a\u5e38\u306e\u30b3\u30df\u30c3\u30c8\u3084\u30d7\u30c3\u30b7\u30e5\u3068\u540c\u3058\u3088\u3046\u306b\u3001\u5909\u66f4\u3092\u30b3\u30df\u30c3\u30c8(\u3057\u304b\u3057\u30d7\u30c3\u30b7\u30e5\u306f\u3057\u306a\u3044)\u3057\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> <ol> <li>\u307e\u3060\u5909\u66f4\u3092\u30b3\u30df\u30c3\u30c8\u3057\u3066\u3044\u306a\u3051\u308c\u3070\u3001\u30b3\u30df\u30c3\u30c8\u3057\u307e\u3059\u3002</li> <li>\u6b21\u306b\u3001<code>git tag</code>\u3092\u4f7f\u7528\u3057\u3066\u3001\u3069\u306e\u30bf\u30b0\u306b\u3044\u308b\u306e\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</li> <li>\u6b21\u306b\u3001<code>git tag -a v0.0.9 -m \u201cAdds clamAV to base.\u201d</code>\u3092\u4f7f\u7528\u3057\u3066\u30bf\u30b0\u4ed8\u3051\u3057\u307e\u3059\u3002<ol> <li>_git -a, --annotate\u3092\u4f7f\u3046\u3068  \u7121\u7f72\u540d\u306e\u6ce8\u91c8\u4ed8\u304d\u30bf\u30b0\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</li> </ol> </li> <li>\u6b21\u306b\u3001<code>git push --tags</code>\u3067\u30bf\u30b0\u3092\u30d7\u30c3\u30b7\u30e5\u3057\u307e\u3059\u3002</li> <li>\u6700\u5f8c\u306b\u3001<code>git push</code>\u3067\u5168\u3066\u306e\u5909\u66f4\u3092\u30d7\u30c3\u30b7\u30e5\u3057\u307e\u3059\u3002</li> </ol> <p>\u5371\u967a</p> <p>\u30bf\u30b0\u306f\u305d\u308c\u81ea\u4f53\u306e\u30b9\u30c6\u30c3\u30d7\u3067\u660e\u793a\u7684\u306b\u30d7\u30c3\u30b7\u30e5\u3057\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\uff01</p> <p></p>"},{"location":"ja/concepts-advanced/base-images/#how-git-tags-map-to-image-tags","title":"Git\u306e\u30bf\u30b0\u304c\u30a4\u30e1\u30fc\u30b8\u306e\u30bf\u30b0\u306b\u3069\u306e\u3088\u3046\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3055\u308c\u308b\u304b","text":"<p>\u5371\u967a</p> <p>\u30d3\u30eb\u30c9\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u306b\u3088\u308a\u307e\u3059\u304c\u3001\u307b\u307c\u78ba\u5b9f\u306bdevelop\u30d6\u30e9\u30f3\u30c1\u7d4c\u7531\u3067\u5909\u66f4\u3092\u30d7\u30c3\u30b7\u30e5\u3057\u3001\u305d\u308c\u3092main\u30d6\u30e9\u30f3\u30c1\u306b\u30de\u30fc\u30b8\u3059\u308b\u3067\u3057\u3087\u3046\u3002</p> <p>\u3053\u3053\u3067\u899a\u3048\u3066\u304a\u304f\u3079\u304d\u91cd\u8981\u306a\u70b9\u306f\u3001Jenkins\u306e\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306e\u30d3\u30eb\u30c9\u30d7\u30ed\u30bb\u30b9\u306f\u3001\u6700\u65b0\u306e\u30b3\u30df\u30c3\u30c8\u30bf\u30b0\u306b\u57fa\u3065\u3044\u3066\u30a4\u30e1\u30fc\u30b8\u3092\u30bf\u30b0\u4ed8\u3051\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002</p> <p>\u30a4\u30e1\u30fc\u30b8\u306f\u4ee5\u4e0b\u306e\u30eb\u30fc\u30eb\u3067\u30bf\u30b0\u4ed8\u3051\u3055\u308c\u3001\u3053\u308c\u306b\u8a72\u5f53\u3059\u308b\u3082\u306e\u3054\u3068\u306b\u30a4\u30e1\u30fc\u30b8\u304c\u30d3\u30eb\u30c9\u3055\u308c\u307e\u3059:</p> <ol> <li>main\u30d6\u30e9\u30f3\u30c1\u304c\u30d3\u30eb\u30c9\u3055\u308c\u308b\u3068\u3001<code>latest</code>\u3068\u3057\u3066\u30bf\u30b0\u4ed8\u3051\u3055\u308c\u307e\u3059\u3002</li> <li>develop\u30d6\u30e9\u30f3\u30c1\u304c\u30d3\u30eb\u30c9\u3055\u308c\u308b\u3068\u3001<code>development</code>\u3068\u3057\u3066\u30bf\u30b0\u4ed8\u3051\u3055\u308c\u307e\u3059\u3002</li> <li>\u30d3\u30eb\u30c9\u3055\u308c\u308b\u30b3\u30df\u30c3\u30c8\u304c\u30bf\u30b0\u4ed8\u3051\u3055\u308c\u3066\u3044\u308c\u3070\u3001\u305d\u306e\u30d6\u30e9\u30f3\u30c1\u306f\u305d\u306e\u30b3\u30df\u30c3\u30c8\u306e\u30bf\u30b0\u4ed8\u3051\u3067\u30d3\u30eb\u30c9\u3055\u308c\u307e\u3059\u3002<ol> <li>\u4e0a\u3067\u793a\u3057\u305f\u3088\u3046\u306b\u3001\u3053\u308c\u304c\u65b0\u3057\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30ea\u30ea\u30fc\u30b9\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002\u307e\u305f\u3001\u4efb\u610f\u306e\u30bf\u30b0\u3067\u30a2\u30c9\u30db\u30c3\u30af\u306a\u30d3\u30eb\u30c9\u3092\u884c\u3046\u305f\u3081\u306b\u3082\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\u30bf\u30b0\u540d\u306b\u306f\u5341\u5206\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u308c\u3089\u306f\u30bb\u30de\u30f3\u30c6\u30a3\u30c3\u30af\u30d0\u30fc\u30b8\u30e7\u30cb\u30f3\u30b0\u306e\u30bf\u30b0\u3067\u306e\u307f\u30c6\u30b9\u30c8\u3055\u308c\u3066\u3044\u307e\u3059\u3002</li> </ol> </li> </ol>"},{"location":"ja/concepts-advanced/base-images/#step-4-building-the-new-base-images","title":"\u30b9\u30c6\u30c3\u30d74 - \u65b0\u3057\u3044\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306e\u30d3\u30eb\u30c9","text":"<p>\u60c5\u5831</p> <p>\u4e00\u822c\u7684\u306b\u306f\u3001\u81ea\u52d5\u30d3\u30eb\u30c9\u306e\u305f\u3081\u306e\u30c8\u30ea\u30ac\u30fc\u30b9\u30c8\u30e9\u30c6\u30b8\u30fc\u3092\u3053\u3053\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u304c\u3001\u305d\u308c\u306f\u3042\u306a\u305f\u306e\u30cb\u30fc\u30ba\u3084\u8a2d\u5b9a\u306b\u3088\u3063\u3066\u7570\u306a\u308b\u305f\u3081\u3001\u3053\u3053\u3067\u306f\u624b\u52d5\u3067\u30d3\u30eb\u30c9\u3059\u308b\u65b9\u6cd5\u3092\u8aac\u660e\u3057\u307e\u3059\u3002</p> <ol> <li>\u3042\u306a\u305f\u306eLagoon Jenkins\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\u3002</li> <li>\u4f5c\u696d\u4e2d\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8(\u3053\u306e\u5834\u5408\u3001AIOBI Drupal 8 Base)\u3092\u9078\u629e\u3057\u307e\u3059\u3002</li> <li>\u30d3\u30eb\u30c9\u3057\u305f\u3044\u30d6\u30e9\u30f3\u30c1\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</li> <li>\u300cBuild Now\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</li> </ol> <p></p> <p>\u3053\u308c\u306b\u3088\u308a\u3001\u30d3\u30eb\u30c9\u30d7\u30ed\u30bb\u30b9\u304c\u958b\u59cb\u3055\u308c\u3001\u6210\u529f\u3059\u308c\u3070\u65b0\u3057\u3044\u30a4\u30e1\u30fc\u30b8\u3092Harbor\u306b\u30d7\u30c3\u30b7\u30e5\u3057\u307e\u3059\u3002</p> <p>\u30d3\u30eb\u30c9\u304c\u6210\u529f\u3057\u306a\u3044\u5834\u5408\u306f\u3001\u30d3\u30eb\u30c9\u81ea\u4f53\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u30ed\u30b0\u3092\u8aad\u307f\u3001\u3069\u3053\u3067\u5931\u6557\u3057\u305f\u304b\u3092\u7406\u89e3\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p>\u4e0b\u306eHarbor\u304b\u3089\u306e\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u3067\u793a\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u306b\u3001\u79c1\u305f\u3061\u304cJenkins\u3067\u30d3\u30eb\u30c9\u3057\u305f\u3070\u304b\u308a\u306e\u30a4\u30e1\u30fc\u30b8\u306fHarbor\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u3001\u30bf\u30b0\u4ed8\u3051\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u3053\u3067\u306f\u3001\u305d\u308c\u304cv0.0.9\u3068\u30bf\u30b0\u4ed8\u3051\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u305d\u306e\u30bf\u30b0\u306e\u3064\u3044\u305f\u30a4\u30e1\u30fc\u30b8\u304c\u5b58\u5728\u3057\u307e\u3059\u3002\u307e\u305f\u3001\u79c1\u305f\u3061\u306fmain\u30d6\u30e9\u30f3\u30c1\u3092\u30d3\u30eb\u30c9\u3057\u305f\u306e\u3067\u3001\u300clatest\u300d\u30a4\u30e1\u30fc\u30b8\u3082\u30d3\u30eb\u30c9\u3055\u308c\u307e\u3057\u305f\u3002\u3053\u306e\u6bb5\u968e\u3067\u306f\u3001v0.0.9\u3068\u300clatest\u300d\u30a4\u30e1\u30fc\u30b8\u306f\u540c\u4e00\u3067\u3059\u3002</p> <p></p>"},{"location":"ja/concepts-advanced/base-images/#acknowledgement","title":"\u8b1d\u8f9e","text":"<p>\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306e\u69cb\u9020\u306f\u3001\u5b9f\u969b\u306b\u306f\u3001 Denpal\u306e\u30d5\u30a9\u30fc\u30af\u3067\u3059\u3002\u3053\u308c\u306f\u5143\u306eDrupal Composer Template\u306b\u57fa\u3065\u3044\u3066\u3044\u307e\u3059\u304c\u3001Lagoon(\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u74b0\u5883\u307e\u305f\u306f\u30db\u30b9\u30c8\u3055\u308c\u305fLagoon)\u3067\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306a\u3059\u3079\u3066\u3092\u542b\u3093\u3067\u3044\u307e\u3059\u3002</p>"},{"location":"ja/concepts-advanced/environment-idling/","title":"\u74b0\u5883\u30a2\u30a4\u30c9\u30ea\u30f3\u30b0(\u30aa\u30d7\u30b7\u30e7\u30f3)","text":""},{"location":"ja/concepts-advanced/environment-idling/#_2","title":"\u74b0\u5883\u30a2\u30a4\u30c9\u30e9\u30fc\u3068\u306f\u4f55\u3067\u3059\u304b\uff1f","text":"<p>Lagoon\u306f\u3001Aergia\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc(<code>lagoon-remote</code>\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u307e\u3059)\u3092\u5229\u7528\u3057\u3066\u3001\u4e00\u5b9a\u671f\u9593\u4f7f\u7528\u3055\u308c\u3066\u3044\u306a\u3044\u74b0\u5883\u3092\u81ea\u52d5\u7684\u306b\u30a2\u30a4\u30c9\u30eb\u72b6\u614b\u306b\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u3001Kubernetes\u30af\u30e9\u30b9\u30bf\u306e\u8ca0\u8377\u3092\u8efd\u6e1b\u3057\u3001\u5b9f\u969b\u306b\u4f7f\u7528\u4e2d\u306e\u672c\u756a\u74b0\u5883\u3068\u958b\u767a\u74b0\u5883\u306e\u5168\u4f53\u7684\u306a\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u5411\u4e0a\u3055\u305b\u308b\u305f\u3081\u306b\u884c\u308f\u308c\u307e\u3059\u3002</p>"},{"location":"ja/concepts-advanced/environment-idling/#_3","title":"\u74b0\u5883\u306f\u3069\u306e\u3088\u3046\u306b\u3057\u3066\u30a2\u30a4\u30c9\u30eb\u72b6\u614b\u306b\u306a\u308a\u307e\u3059\u304b\uff1f","text":"<p>\u74b0\u5883\u30a2\u30a4\u30c9\u30e9\u30fc\u306b\u306f\u591a\u304f\u306e\u7570\u306a\u308b\u8a2d\u5b9a\u6a5f\u80fd\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u3053\u3067\u306f\u3001\u6a19\u6e96\u7684\u306aLagoon\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u3092\u793a\u3057\u307e\u3059(\u3053\u308c\u3089\u306f\u3042\u306a\u305f\u306eLagoon\u3067\u306f\u5168\u304f\u7570\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u3001Lagoon\u7ba1\u7406\u8005\u306b\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\uff01)</p> <ul> <li>\u30a2\u30a4\u30c9\u30ea\u30f3\u30b0\u306f4\u6642\u9593\u3054\u3068\u306b\u8a66\u307f\u3089\u308c\u307e\u3059\u3002</li> <li>\u672c\u756a\u74b0\u5883\u306f\u6c7a\u3057\u3066\u30a2\u30a4\u30c9\u30eb\u72b6\u614b\u306b\u306a\u308a\u307e\u305b\u3093\u3002</li> <li>CLI\u30dd\u30c3\u30c9\u306f\u3001cron\u30b8\u30e7\u30d6\u304c\u542b\u307e\u308c\u3066\u304a\u3089\u305a\u3001\u30ea\u30e2\u30fc\u30c8\u30b7\u30a7\u30eb\u63a5\u7d9a\u304c\u30a2\u30af\u30c6\u30a3\u30d6\u3067\u306a\u3044\u5834\u5408\u306b\u30a2\u30a4\u30c9\u30eb\u72b6\u614b\u306b\u306a\u308a\u307e\u3059\u3002</li> <li>\u4ed6\u306e\u3059\u3079\u3066\u306e\u30b5\u30fc\u30d3\u30b9\u3068\u30dd\u30c3\u30c9\u306f\u3001\u74b0\u5883\u4e0a\u3067\u904e\u53bb4\u6642\u9593\u306e\u9593\u306b\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u304c\u306a\u304b\u3063\u305f\u5834\u5408\u306b\u30a2\u30a4\u30c9\u30eb\u72b6\u614b\u306b\u306a\u308a\u307e\u3059\u3002</li> <li>\u30a2\u30af\u30c6\u30a3\u30d6\u306a\u30d3\u30eb\u30c9\u304c\u9032\u884c\u4e2d\u3067\u3042\u308c\u3070\u3001\u30a2\u30a4\u30c9\u30ea\u30f3\u30b0\u306f\u884c\u308f\u308c\u307e\u305b\u3093\u3002</li> </ul>"},{"location":"ja/concepts-advanced/environment-idling/#_4","title":"\u74b0\u5883\u306f\u3069\u306e\u3088\u3046\u306b\u3057\u3066\u30a2\u30a4\u30c9\u30eb\u72b6\u614b\u304b\u3089\u89e3\u9664\u3055\u308c\u307e\u3059\u304b\uff1f","text":"<p>Aergia\u306f\u3001\u4efb\u610f\u306e\u74b0\u5883\u304c\u30a2\u30af\u30bb\u30b9\u3055\u308c\u308b\u3068\u81ea\u52d5\u7684\u306b\u30a2\u30a4\u30c9\u30eb\u72b6\u614b\u3092\u89e3\u9664\u3057\u307e\u3059\u3002 \u305d\u306e\u305f\u3081\u3001\u74b0\u5883\u306eURL\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3060\u3051\u3067\u74b0\u5883\u304c\u8d77\u52d5\u3057\u307e\u3059\u3002\u540c\u69d8\u306b\u3001\u74b0\u5883\u3078\u306eSSH\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u958b\u59cb\u3059\u308b\u3068\u3001\u30b5\u30fc\u30d3\u30b9\u3082\u518d\u958b\u3057\u307e\u3059\u3002</p> <p>\u30a2\u30f3\u30a2\u30a4\u30c9\u30ea\u30f3\u30b0\u306f\u6570\u79d2\u304b\u304b\u308a\u307e\u3059\u3002\u306a\u305c\u306a\u3089\u3001Kubernetes\u30af\u30e9\u30b9\u30bf\u306f\u3059\u3079\u3066\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u518d\u8d77\u52d5\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u304b\u3089\u3067\u3059\u3002\u3053\u306e\u9593\u3001\u8a2a\u554f\u8005\u306b\u306f\u3001\u73fe\u5728\u81ea\u5206\u306e\u74b0\u5883\u304c\u8d77\u52d5\u4e2d\u3067\u3042\u308b\u3053\u3068\u3092\u793a\u3059\u5f85\u6a5f\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/concepts-advanced/environment-idling/#idler","title":"Idler\u304c\u79c1\u306e\u74b0\u5883\u3092\u30a2\u30a4\u30c9\u30ea\u30f3\u30b0\u3057\u306a\u3044\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u3059\u304b\uff1f","text":"<p>\u306f\u3044\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8(\u3059\u3079\u3066\u306e\u74b0\u5883\u306b\u5f71\u97ff)\u3068\u74b0\u5883(1\u3064\u306e\u74b0\u5883\u306e\u307f\u3092\u5bfe\u8c61\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u5834\u5408)\u306b<code>autoIdle</code>\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u3042\u308a\u3001\u30a2\u30a4\u30c9\u30ea\u30f3\u30b0\u304c\u884c\u308f\u308c\u308b\u304b\u3069\u3046\u304b\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002<code>1</code>\u306e\u5024\u306f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8/\u74b0\u5883\u304c\u30a2\u30a4\u30c9\u30ea\u30f3\u30b0\u306e\u5bfe\u8c61\u3067\u3042\u308b\u3053\u3068\u3092\u793a\u3057\u307e\u3059\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c<code>0</code>\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u74b0\u5883\u304c<code>0</code>\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u3066\u3082\u3001\u74b0\u5883\u306f\u6c7a\u3057\u3066\u30a2\u30a4\u30c9\u30eb\u72b6\u614b\u306b\u306a\u308a\u307e\u305b\u3093\u3002 \u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u5e38\u306b<code>1</code>(\u30a2\u30a4\u30c9\u30ea\u30f3\u30b0\u304c\u6709\u52b9)\u3067\u3059\u3002</p> <p>\u3053\u308c\u3089\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8/\u74b0\u5883\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u8a2d\u5b9a\u65b9\u6cd5\u304c\u308f\u304b\u3089\u306a\u3044\u5834\u5408\u306f\u3001\u3042\u306a\u305f\u306eLagoon\u7ba1\u7406\u8005\u306b\u76f8\u8ac7\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/concepts-advanced/environment-types/","title":"\u74b0\u5883\u306e\u7a2e\u985e","text":"<p>Lagoon\u306f\u73fe\u5728\u3001<code>production(\u672c\u756a\u74b0\u5883)</code>\u3068<code>development(\u958b\u767a\u74b0\u5883)</code>\u306e2\u3064\u306e\u7570\u306a\u308b\u74b0\u5883\u30bf\u30a4\u30d7\u3092\u533a\u5225\u3057\u3066\u3044\u307e\u3059\u3002</p> <p>Lagoon GraphQL API\u3092\u901a\u3058\u3066\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8a2d\u5b9a\u3059\u308b\u969b\u306b\u306f\u3001<code>productionEnvironment</code>\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002Lagoon\u304c\u5b9f\u884c\u3059\u308b\u3059\u3079\u3066\u306e\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u3067\u3001\u73fe\u5728\u306e\u74b0\u5883\u540d\u304c<code>productionEnvironment</code>\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3082\u306e\u3068\u4e00\u81f4\u3059\u308b\u304b\u3069\u3046\u304b\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\u3082\u3057\u305d\u3046\u3067\u3042\u308c\u3070\u3001Lagoon\u306f\u3053\u306e\u74b0\u5883\u3092<code>production</code>\u74b0\u5883\u3068\u3057\u3066\u30de\u30fc\u30af\u3057\u307e\u3059\u3002\u3053\u308c\u306f2\u3064\u306e\u5834\u6240\u3067\u884c\u308f\u308c\u307e\u3059:</p> <ol> <li>GraphQL API\u81ea\u4f53\u5185\u3002</li> <li>\u3059\u3079\u3066\u306e\u30b3\u30f3\u30c6\u30ca\u5185\u306e<code>LAGOON_ENVIRONMENT_TYPE</code>\u3068\u3044\u3046\u540d\u524d\u306e\u74b0\u5883\u5909\u6570\u3002</li> </ol> <p>\u3053\u306e2\u3064\u3060\u3051\u3067\u3059\u3002Lagoon\u81ea\u4f53\u306f<code>development</code>\u3068<code>production</code>\u306e\u74b0\u5883\u3092\u307e\u3063\u305f\u304f\u540c\u3058\u3088\u3046\u306b\u6271\u3044\u307e\u3059(\u6700\u7d42\u7684\u306b\u306f\u74b0\u5883\u306e\u9055\u3044\u3092\u3067\u304d\u308b\u3060\u3051\u5c11\u306a\u304f\u3059\u308b\u3053\u3068\u3092\u76ee\u6307\u3057\u3066\u3044\u307e\u3059 - \u305d\u308c\u304cLagoon\u306e\u7f8e\u3057\u3055\u3067\u3059)\u3002</p> <p>\u3053\u306e\u60c5\u5831\u3092\u4f7f\u7528\u3059\u308b\u3082\u306e\u304c\u3044\u304f\u3064\u304b\u3042\u308a\u307e\u3059:</p> <ul> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001<code>development</code>\u74b0\u5883\u306f\u30d2\u30c3\u30c8\u304c4\u6642\u9593\u306a\u3044\u5834\u5408\u306b\u4f11\u6b62\u72b6\u614b\u306b\u306a\u308a\u307e\u3059(\u5fc3\u914d\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3001\u81ea\u52d5\u7684\u306b\u8d77\u52d5\u3057\u307e\u3059)\u3002\u307e\u305f\u3001Lagoon\u306e\u7ba1\u7406\u8005\u306b1\u3064\u305a\u3064\u306e\u74b0\u5883\u3067\u81ea\u52d5\u4f11\u6b62\u3092\u7121\u52b9\u306b\u3059\u308b\u3088\u3046\u4f9d\u983c\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\uff01</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u306eDrupal <code>settings.php</code>\u30d5\u30a1\u30a4\u30eb\u306f\u3001<code>development.settings.php</code>\u3068 <code>production.settings.php</code>\u3068\u3044\u3046\u8ffd\u52a0\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u307f\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u74b0\u5883\u30bf\u30a4\u30d7\u3054\u3068\u306b\u7570\u306a\u308b\u8a2d\u5b9a\u3084\u69cb\u6210\u3092\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002</li> <li>\u3082\u3057\u3001\u3042\u306a\u305f\u304c<code>production</code>\u74b0\u5883\u3068\u3057\u3066\u5b9a\u7fa9\u3055\u308c\u305f\u74b0\u5883(\u30a6\u30a7\u30d6\u30d5\u30c3\u30af\u307e\u305f\u306fREST\u7d4c\u7531\u3067)\u3092\u524a\u9664\u3059\u308b\u306a\u3089\u3001Lagoon\u306f\u8aa4\u3063\u3066\u524a\u9664\u3059\u308b\u306e\u3092\u9632\u3050\u305f\u3081\u306b\u62d2\u5426\u3057\u307e\u3059\u3002<code>production</code>\u74b0\u5883\u3092\u524a\u9664\u3059\u308b\u306b\u306f\u3001API\u3067<code>productionEnvironment</code>\u3092\u5909\u66f4\u3059\u308b\u304b\u3001REST API\u306ePOST\u30da\u30a4\u30ed\u30fc\u30c9\u3067<code>forceDeleteProductionEnvironment: true</code>\u3092\u4f7f\u7528\u3059\u308b\u5fc5\u7528\u304c\u3042\u308a\u307e\u3059\u3002</li> <li>Lagoon\u306e\u7ba1\u7406\u8005\u306f\u3001<code>production</code>\u74b0\u5883\u60c5\u5831\u3092\u8ffd\u52a0\u306e\u76ee\u7684\u3067\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001amazee.io\u3067\u306f\u3001\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u306e\u4fa1\u683c\u3092\u8a08\u7b97\u3059\u308b\u305f\u3081\u306b\u3001<code>production</code>\u74b0\u5883\u306e\u30d2\u30c3\u30c8\u6570\u3060\u3051\u3092\u8a08\u7b97\u3057\u3066\u3044\u307e\u3059\u3002</li> </ul>"},{"location":"ja/concepts-advanced/environment-variables/","title":"\u74b0\u5883\u5909\u6570","text":"<p>API\u30c8\u30fc\u30af\u30f3\u3084\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u3092\u74b0\u5883\u5909\u6570\u306b\u4fdd\u5b58\u3059\u308b\u3053\u3068\u306f\u4e00\u822c\u7684\u3067\u3059\u3002</p> <p>\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u306b\u5f93\u3046\u3068\u3001\u3053\u308c\u3089\u306e\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u306f\u74b0\u5883\u3054\u3068\u306b\u7570\u306a\u308a\u307e\u3059\u3002\u79c1\u305f\u3061\u306f\u3001\u5404\u74b0\u5883\u304c\u74b0\u5883\u5909\u6570\u307e\u305f\u306f.<code>env</code>\u30d5\u30a1\u30a4\u30eb\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u5225\u306e\u74b0\u5883\u5909\u6570\u30bb\u30c3\u30c8\u3092\u4f7f\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002</p> <p>\u74b0\u5883\u5909\u6570\u306b\u306fDockerfile\u307e\u305f\u306f\u30e9\u30f3\u30bf\u30a4\u30e0\u6642(API\u74b0\u5883\u5909\u6570\u7d4c\u7531)\u306e\u3044\u305a\u308c\u304b\u3067\u5b9a\u7fa9\u3055\u308c\u308b\u5834\u5408\u304c\u3042\u308b\u305f\u3081\u512a\u5148\u9806\u4f4d\u304c\u3042\u308a\u3001\u3088\u308a\u4f4e\u3044\u6570\u5b57\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u74b0\u5883\u5909\u6570\u304c\u512a\u5148\u3055\u308c\u307e\u3059\u3002</p> <ol> <li>\u74b0\u5883\u5909\u6570(Lagoon API\u7d4c\u7531\u3067\u5b9a\u7fa9) - \u74b0\u5883\u56fa\u6709\u3002</li> <li>\u74b0\u5883\u5909\u6570(Lagoon API\u7d4c\u7531\u3067\u5b9a\u7fa9) - \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5168\u4f53\u3002</li> <li>Dockerfile\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u74b0\u5883\u5909\u6570(<code>ENV</code>\u30b3\u30de\u30f3\u30c9)\u3002</li> <li><code>.lagoon.env.</code>\u306e<code>$LAGOON_GIT_BRANCH</code>\u307e\u305f\u306f<code>.lagoon.env.</code>\u306e<code>$LAGOON_GIT_SAFE_BRANCH</code>\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u74b0\u5883\u5909\u6570(\u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3057\u3001<code>$LAGOON_GIT_BRANCH</code>\u3068<code>$LAGOON_GIT_SAFE_BRANCH</code>\u304c\u3053\u306eDocker\u30a4\u30e1\u30fc\u30b8\u304c\u30d3\u30eb\u30c9\u3055\u308c\u305f\u30d6\u30e9\u30f3\u30c1\u306e\u540d\u524d\u3068\u4e00\u81f4\u3059\u308b\u540d\u524d\u3067\u3042\u308b\u5834\u5408\u3001\u3053\u308c\u3089\u306e\u5024\u3092\u3053\u306e\u7279\u5b9a\u306e\u30d6\u30e9\u30f3\u30c1\u306e\u5909\u6570\u306b\u4e0a\u66f8\u304d\u3057\u307e\u3059\u3002\uff09</li> <li><code>.lagoon.env</code>\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u74b0\u5883\u5909\u6570(\u5b58\u5728\u3059\u308b\u5834\u5408)\u3001\u3053\u308c\u3092\u5168\u3066\u306e\u30d6\u30e9\u30f3\u30c1\u306e\u5909\u6570\u306e\u4e0a\u66f8\u304d\u306b\u4f7f\u7528\u3057\u307e\u3059\u3002</li> <li><code>.env</code>\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u74b0\u5883\u5909\u6570\u3002</li> <li><code>.env.defaults</code>\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u74b0\u5883\u5909\u6570\u3002</li> </ol> <p><code>.lagoon.env.</code>\u306e<code>$LAGOON_GIT_BRANCH</code>\u3001<code>.lagoon.env.</code>\u306e<code>$LAGOON_GIT_SAFE_BRANCH</code>\u3001<code>.env</code>\u3001\u305d\u3057\u3066 <code>.env.defaults</code>\u306f\u3001\u5168\u3066\u3001\u5404\u30b3\u30f3\u30c6\u30ca\u81ea\u4f53\u306b\u3088\u3063\u3066\u30a8\u30f3\u30c8\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u4e00\u90e8\u3068\u3057\u3066\u5b9f\u884c\u3055\u308c\u308b\u969b\u306b\u30bd\u30fc\u30b9\u5316\u3055\u308c\u307e\u3059\u3002\u305d\u308c\u3089\u306fLagoon\u3067\u306f\u306a\u304f\u3001\u30b3\u30f3\u30c6\u30ca\u306e<code>ENTRYPOINT</code>\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u3088\u3063\u3066\u8aad\u307f\u8fbc\u307e\u308c\u3001\u30b3\u30f3\u30c6\u30ca\u306e\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u305d\u308c\u3089\u3092\u63a2\u3057\u307e\u3059\u3002\u74b0\u5883\u5909\u6570\u304c\u671f\u5f85\u901a\u308a\u306b\u8868\u793a\u3055\u308c\u306a\u3044\u5834\u5408\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u306b\u4ed6\u306e\u5834\u6240\u3092\u6307\u3059<code>WORKDIR</code>\u8a2d\u5b9a\u304c\u3042\u308b\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/concepts-advanced/environment-variables/#environment-variables-lagoon-api","title":"\u74b0\u5883\u5909\u6570 - Lagoon API","text":"<p>Git\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u4fdd\u5b58\u3057\u305f\u304f\u306a\u3044\u5909\u6570(\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30ad\u30fc\u3084API\u30ad\u30fc\u306a\u3069)\u306b\u3064\u3044\u3066\u306f\u3001Lagoon API\u306e\u74b0\u5883\u5909\u6570\u30b7\u30b9\u30c6\u30e0\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u5909\u6570\u306f\u3001\u8ab0\u304b\u304c\u30ed\u30fc\u30ab\u30eb\u306e\u958b\u767a\u74b0\u5883\u3084\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u4e0a\u306b\u6301\u3063\u3066\u3044\u308b\u3068\u3001\u5371\u967a\u306b\u3055\u3089\u3055\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>Lagoon API\u3067\u306f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5168\u4f53\u307e\u305f\u306f\u74b0\u5883\u56fa\u6709\u306e\u5909\u6570\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3055\u3089\u306b\u3001\u30b9\u30b3\u30fc\u30d7\u9650\u5b9a\u306e\u30d3\u30eb\u30c9\u6642\u307e\u305f\u306f\u30e9\u30f3\u30bf\u30a4\u30e0\u306b\u5bfe\u3057\u3066\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u3089\u306f\u3059\u3079\u3066Lagoon GraphQL API\u3092\u901a\u3058\u3066\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002GraphQL API\u306e\u4f7f\u7528\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u3001GraphQL API\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u8a73\u3057\u304f\u8aac\u660e\u3057\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/concepts-advanced/environment-variables/#runtime-environment-variables-lagoon-api","title":"\u30e9\u30f3\u30bf\u30a4\u30e0\u74b0\u5883\u5909\u6570 - LagoonAPI","text":"<p>\u30e9\u30f3\u30bf\u30a4\u30e0\u74b0\u5883\u5909\u6570\u306f\u81ea\u52d5\u7684\u306b\u3059\u3079\u3066\u306e\u30b3\u30f3\u30c6\u30ca\u3067\u5229\u7528\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u304c\u3001\u74b0\u5883\u304c\u518d\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u305f\u5f8c\u306b\u306e\u307f\u8ffd\u52a0\u307e\u305f\u306f\u66f4\u65b0\u3055\u308c\u307e\u3059\u3002</p> <p>\u3053\u308c\u306f\u3001ID <code>463</code>\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7528\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5168\u4f53\u306e\u30e9\u30f3\u30bf\u30a4\u30e0\u5909\u6570(\u3059\u3079\u3066\u306e\u74b0\u5883\u3067\u5229\u7528\u53ef\u80fd)\u3092\u5b9a\u7fa9\u3057\u307e\u3059:</p> \u30e9\u30f3\u30bf\u30a4\u30e0\u5909\u6570\u306e\u8ffd\u52a0<pre><code>mutation addRuntimeEnv {\naddEnvVariable(\ninput:{\ntype:PROJECT,\ntypeId:463,\nscope:RUNTIME,\nname:\"MYVARIABLENAME\",\nvalue:\"MyVariableValue\"\n}\n) {\nid\n}\n}\n</code></pre> <p>\u3053\u308c\u306f\u3001\u74b0\u5883ID <code>546</code>\u7279\u6709\u306e\u30e9\u30f3\u30bf\u30a4\u30e0\u5909\u6570(\u7279\u5b9a\u306e\u74b0\u5883\u306e\u307f\u3067\u5229\u7528\u53ef\u80fd)\u3092\u5b9a\u7fa9\u3057\u307e\u3059:</p> \u74b0\u5883ID\u306e\u5b9a\u7fa9<pre><code>mutation addRuntimeEnv {\naddEnvVariable(\ninput:{\ntype:ENVIRONMENT,\ntypeId:546,\nscope:RUNTIME,\nname:\"MYVARIABLENAME\",\nvalue:\"MyVariableValue\"\n}\n) {\nid\n}\n}\n</code></pre>"},{"location":"ja/concepts-advanced/environment-variables/#build-time-environment-variables-lagoon-api","title":"\u30d3\u30eb\u30c9\u6642\u306e\u74b0\u5883\u5909\u6570 LagoonAPI","text":"<p>\u30d3\u30eb\u30c9\u6642\u306e\u74b0\u5883\u5909\u6570\u306f\u30d3\u30eb\u30c9\u4e2d\u306b\u306e\u307f\u5229\u7528\u53ef\u80fd\u3067\u3042\u308a\u3001Dockerfiles\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f7f\u7528\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059:</p> \u30d3\u30eb\u30c9\u6642\u306e\u74b0\u5883\u5909\u6570\u306e\u4f7f\u7528<pre><code>ARG MYVARIABLENAME\n</code></pre> <p>\u901a\u5e38\u3001<code>ARG</code>\u306f<code>FROM</code>\u306e\u5f8c\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002ARG\u3068FROM\u306b\u3064\u3044\u3066\u306edocker\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8aad\u3080\u3002</p> <p>\u3053\u308c\u306f\u3001ID <code>463</code>\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5168\u4f53\u306e\u30d3\u30eb\u30c9\u6642\u5909\u6570(\u3059\u3079\u3066\u306e\u74b0\u5883\u3067\u5229\u7528\u53ef\u80fd)\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002</p> \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5168\u4f53\u306e\u30d3\u30eb\u30c9\u6642\u5909\u6570\u3092\u5b9a\u7fa9\u3059\u308b<pre><code>mutation addBuildtimeEnv {\naddEnvVariable(\ninput:{\ntype:PROJECT,\ntypeId:463,\nscope:BUILD,\nname:\"MYVARIABLENAME\",\nvalue:\"MyVariableValue\"}\n) {\nid\n}\n}\n</code></pre> <p>\u3053\u308c\u306f\u3001\u74b0\u5883ID <code>546</code>\u7279\u6709\u306e\u30d3\u30eb\u30c9\u6642\u5909\u6570\u3092\u5b9a\u7fa9\u3057\u307e\u3059(\u305d\u306e\u7279\u5b9a\u306e\u74b0\u5883\u5185\u3060\u3051\u3067\u5229\u7528\u53ef\u80fd)\u3002</p> \u74b0\u5883ID\u3092\u5b9a\u7fa9\u3059\u308b<pre><code>mutation addBuildtimeEnv {\naddEnvVariable(input:{type:ENVIRONMENT, typeId:546, scope:BUILD, name:\"MYVARIABLENAME\", value:\"MyVariableValue\"}) {\nid\n}\n}\n</code></pre> <p>\u30b3\u30f3\u30c6\u30ca\u30ec\u30b8\u30b9\u30c8\u30ea\u306e\u74b0\u5883\u5909\u6570\u306f\u3001\u30d3\u30eb\u30c9\u4e2d\u306b\u306e\u307f\u5229\u7528\u53ef\u80fd\u3067\u3001\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ec\u30b8\u30b9\u30c8\u30ea\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u304d\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u3089\u306f\u3001Specials \u00bb <code>container-registries</code>\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u4fdd\u5b58\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u3089\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30ec\u30d9\u30eb\u307e\u305f\u306f\u74b0\u5883\u30ec\u30d9\u30eb\u3067\u9069\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p>\u3053\u308c\u306f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5168\u4f53\u3092\u5b9a\u7fa9\u3057\u307e\u3059 \u30d7\u30ed\u30b8\u30a7\u30af\u30c8ID <code>463</code>\u306e\u305f\u3081\u306e\u30b3\u30f3\u30c6\u30ca\u30ec\u30b8\u30b9\u30c8\u30ea\u5909\u6570(\u3059\u3079\u3066\u306e\u74b0\u5883\u3067\u5229\u7528\u53ef\u80fd):</p> \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5168\u4f53\u306e\u30b3\u30f3\u30c6\u30ca\u30ec\u30b8\u30b9\u30c8\u30ea\u5909\u6570\u3092\u5b9a\u7fa9\u3059\u308b<pre><code>mutation addContainerRegistryEnv {\naddEnvVariable(\ninput:{\ntype:PROJECT,\ntypeId:463,\nscope:CONTAINER_REGISTRY,\nname:\"MY_OWN_REGISTRY_PASSWORD\",\nvalue:\"MySecretPassword\"})\n) {\nid\n}\n}\n</code></pre> <p>\u3053\u308c\u306f\u3001\u74b0\u5883ID <code>546</code>\u7279\u6709\u306e\u30b3\u30f3\u30c6\u30ca\u30ec\u30b8\u30b9\u30c8\u30ea\u5909\u6570\u3092\u5b9a\u7fa9\u3057\u307e\u3059(\u305d\u306e\u7279\u5b9a\u306e\u74b0\u5883\u5185\u3067\u306e\u307f\u5229\u7528\u53ef\u80fd):</p> \u74b0\u5883ID\u3092\u5b9a\u7fa9\u3059\u308b<pre><code>mutation addContainerRegistryEnv {\naddEnvVariable(\ninput:{\ntype:ENVIRONMENT,\ntypeId:546,\nscope:CONTAINER_REGISTRY,\nname:\"MY_OWN_REGISTRY_PASSWORD\",\nvalue:\"MySecretPassword\"}\n) {\nid\n}\n}\n</code></pre>"},{"location":"ja/concepts-advanced/environment-variables/#global-environment-variables-lagoon-api","title":"\u30b0\u30ed\u30fc\u30d0\u30eb\u74b0\u5883\u5909\u6570 - Lagoon API","text":"<p>\u30b0\u30ed\u30fc\u30d0\u30eb\u74b0\u5883\u5909\u6570\u306f\u3001\u30d3\u30eb\u30c9\u306b\u3088\u3063\u3066\u6d88\u8cbb\u3055\u308c\u308b\u305f\u3081\u306e\u30d3\u30eb\u30c9\u6642\u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u3001\u307e\u305f\u5b9f\u884c\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u5185\u3067\u5229\u7528\u53ef\u80fd\u306a\u30e9\u30f3\u30bf\u30a4\u30e0\u5909\u6570\u3068\u3057\u3066\u5229\u7528\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/concepts-advanced/environment-variables/#environment-files-existing-directly-in-the-git-repo","title":"Git\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u76f4\u63a5\u5b58\u5728\u3059\u308b\u74b0\u5883\u30d5\u30a1\u30a4\u30eb","text":"<p>Git\u30ea\u30dd\u30b8\u30c8\u30ea\u5185\u306b\u5b89\u5168\u306b\u4fdd\u5b58\u3067\u304d\u308b\u74b0\u5883\u5909\u6570\u304c\u3042\u308b\u5834\u5408\u3001\u305d\u308c\u3089\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u76f4\u63a5\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059 \u3002\u3053\u308c\u3089\u306e\u5909\u6570\u306f\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u74b0\u5883\u3067\u3082\u5229\u7528\u53ef\u80fd\u3067\u3042\u308a\u3001\u3088\u308a\u79fb\u690d\u6027\u304c\u9ad8\u304f\u306a\u308a\u307e\u3059\u3002</p> <p>\u74b0\u5883\u30d5\u30a1\u30a4\u30eb\u306e\u69cb\u6587\u306f\u6b21\u306e\u3068\u304a\u308a\u3067\u3059:</p> myenvironment.env<pre><code>MYVARIABLENAME=\"MyVariableValue\"\nMVARIABLENUMBER=4242\nDB_USER=$DB_USERNAME # DB_USERNAME\u306e\u5024\u3067DB_USER\u3092\u518d\u5b9a\u7fa9\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304cLagoon\u63d0\u4f9b\u306e\u5909\u6570\u306b\u5bfe\u3057\u3066\u5225\u306e\u5909\u6570\u540d\u3092\u671f\u5f85\u3057\u3066\u3044\u308b\u5834\u5408\u306a\u3069\u3067\u3059\u3002\n</code></pre>"},{"location":"ja/concepts-advanced/environment-variables/#lagoonenvbranchname","title":"<code>.lagoon.env.$BRANCHNAME</code>","text":"<p>\u74b0\u5883\u3054\u3068\u306b\u7570\u306a\u308b\u74b0\u5883\u5909\u6570\u3092\u5b9a\u7fa9\u3057\u305f\u3044\u5834\u5408\u306f\u3001<code>.lagoon.env.$BRANCHNAME</code>\u3092\u4f5c\u6210\u3067\u304d\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001\u30e1\u30a4\u30f3\u30d6\u30e9\u30f3\u30c1\u306e\u5834\u5408\u306f<code>.lagoon.env.main</code>\u3067\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u74b0\u5883\u9593\u3067\u306e\u74b0\u5883\u5909\u6570\u306e\u533a\u5225\u304c\u5bb9\u6613\u306b\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"ja/concepts-advanced/environment-variables/#env-and-envdefaults","title":"<code>.env</code> and <code>.env.defaults</code>","text":"<p><code>.env</code>\u3068<code>.env.defaults</code>\u306f\u3001\u4ed6\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306e\u74b0\u5883\u5909\u6570\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3068\u3057\u3066\u6a5f\u80fd\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u74b0\u5883\u7528\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u5229\u7528\u3057\u307e\u3059(Workflows\u53c2\u7167)\u3002</p>"},{"location":"ja/concepts-advanced/environment-variables/#special-environment-variables","title":"\u7279\u5225\u306a\u74b0\u5883\u5909\u6570","text":""},{"location":"ja/concepts-advanced/environment-variables/#php_error_reporting","title":"<code>PHP_ERROR_REPORTING</code>","text":"<p>\u3053\u306e\u5909\u6570\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001PHP\u304c\u4f7f\u7528\u3059\u308b\u30ed\u30b0\u30ec\u30d9\u30eb\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001<code>production</code>\u74b0\u5883\u304b\u958b\u767a\u74b0\u5883\u304b\u306b\u3088\u3063\u3066\u52d5\u7684\u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002</p> <p><code>production</code>\u74b0\u5883\u3067\u306f\u3001\u3053\u306e\u5024\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067<code>E_ALL &amp; ~E_DEPRECATED &amp; ~E_STRICT &amp; ~E_NOTICE</code>\u306b\u306a\u308a\u307e\u3059\u3002</p> <p>\u958b\u767a\u74b0\u5883\u3067\u306f\u3001\u3053\u306e\u5024\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067<code>E_ALL &amp; ~E_DEPRECATED &amp; ~E_STRICT</code>\u306b\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"ja/concepts-advanced/feature-flags/","title":"\u30d5\u30a3\u30fc\u30c1\u30e3\u30fc\u30d5\u30e9\u30b0","text":"<p>Lagoon\u306e\u4e00\u90e8\u306e\u6a5f\u80fd\u306f\u3001\u30d5\u30a3\u30fc\u30c1\u30e3\u30fc\u30d5\u30e9\u30b0\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u5236\u5fa1\u3067\u304d\u307e\u3059\u3002 \u3053\u308c\u306f\u3001\u65b0\u3057\u3044\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u6a5f\u80fd\u3092\u5236\u5fa1\u3055\u308c\u305f\u65b9\u6cd5\u3067\u5c55\u958b\u3059\u308b\u305f\u3081\u306e\u30e6\u30fc\u30b6\u30fc\u3068\u7ba1\u7406\u8005\u3092\u652f\u63f4\u3059\u308b\u3088\u3046\u306b\u8a2d\u8a08\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/concepts-advanced/feature-flags/#environment-variables","title":"\u74b0\u5883\u5909\u6570","text":"<p>\u4ee5\u4e0b\u306e\u74b0\u5883\u5909\u6570\u306f\u3001\u30d5\u30a3\u30fc\u30c1\u30e3\u30fc\u30d5\u30e9\u30b0\u3092\u5207\u308a\u66ff\u3048\u308b\u305f\u3081\u306b\u74b0\u5883\u307e\u305f\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> \u74b0\u5883\u5909\u6570\u540d \u30a2\u30af\u30c6\u30a3\u30d6\u30b9\u30b3\u30fc\u30d7 \u5c0e\u5165\u3055\u308c\u305f\u30d0\u30fc\u30b8\u30e7\u30f3 \u524a\u9664\u3055\u308c\u305f\u30d0\u30fc\u30b8\u30e7\u30f3 \u30c7\u30d5\u30a9\u30eb\u30c8\u5024 \u8aac\u660e <code>LAGOON_FEATURE_FLAG_ROOTLESS_WORKLOAD</code> <code>global</code> 2.2.0 - <code>\u7121\u52b9</code> \u3053\u306e\u74b0\u5883\u307e\u305f\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30dd\u30c3\u30c9\u306b\u975eroot\u30dd\u30c3\u30c9\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u8a2d\u5b9a\u3059\u308b\u306b\u306f\u3001<code>enabled</code>\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u3053\u306e\u30d5\u30e9\u30b0\u306f\u6700\u7d42\u7684\u306b\u5ec3\u6b62\u3055\u308c\u3001\u305d\u306e\u6642\u70b9\u3067\u975eroot\u30ef\u30fc\u30af\u30ed\u30fc\u30c9\u304c\u5f37\u5236\u3055\u308c\u307e\u3059\u3002 <code>LAGOON_FEATURE_FLAG_ISOLATION_NETWORK_POLICY</code> <code>global</code> 2.2.0 - <code>\u7121\u52b9</code> \u30c7\u30d7\u30ed\u30a4\u6642\u306b\u5404\u74b0\u5883\u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u540d\u524d\u7a7a\u9593\u5206\u96e2\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30dd\u30ea\u30b7\u30fc\u3092\u8ffd\u52a0\u3059\u308b\u306b\u306f\u3001<code>enabled</code>\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u3053\u306e\u30d5\u30e9\u30b0\u306f\u6700\u7d42\u7684\u306b\u5ec3\u6b62\u3055\u308c\u3001\u305d\u306e\u6642\u70b9\u3067\u540d\u524d\u7a7a\u9593\u5206\u96e2\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30dd\u30ea\u30b7\u30fc\u304c\u5f37\u5236\u3055\u308c\u307e\u3059\u3002\u6ce8: \u3053\u306e\u6a5f\u80fd\u3092\u6709\u52b9\u306b\u3057\u3066\u304b\u3089\u7121\u52b9\u306b\u3059\u308b\u3068\u3001\u65e2\u5b58\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306f\u524a\u9664\u3055\u308c\u307e\u305b\u3093\u3002 \u4ee5\u524d\u306e\u30c7\u30d7\u30ed\u30a4\u304b\u3089\u306e\u30dd\u30ea\u30b7\u30fc\u524a\u9664\u3055\u308c\u307e\u305b\u3093\u3002\u3053\u308c\u3089\u306f\u624b\u52d5\u3067\u524a\u9664\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002"},{"location":"ja/concepts-advanced/feature-flags/#_2","title":"\u30af\u30e9\u30b9\u30bf\u30fc\u30ec\u30d9\u30eb\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb","text":"<p>\u6a5f\u80fd\u30d5\u30e9\u30b0\u306f\u30af\u30e9\u30b9\u30bf\u30fc\u30ec\u30d9\u30eb\u3067\u3082\u5236\u5fa1\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u308b<code>lagoon-build-deploy</code>\u30c1\u30e3\u30fc\u30c8\u304c\u3042\u308a\u307e\u3059\u3002 \u5404\u6a5f\u80fd\u30d5\u30e9\u30b0\u306b\u306f\u3001\u8a2d\u5b9a\u3067\u304d\u308b\u5024\u304c<code>default</code>\u3068<code>force</code>\u306e2\u7a2e\u985e\u3042\u308a\u307e\u3059\u3002</p> <ul> <li><code>default</code>\u306f\u30af\u30e9\u30b9\u30bf\u30fc\u306b\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u74b0\u5883\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30dd\u30ea\u30b7\u30fc\u3092\u5236\u5fa1\u3057\u307e\u3059\u304c\u3001\u4e0a\u8a18\u306e\u74b0\u5883\u5909\u6570\u306b\u3088\u3063\u3066\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30ec\u30d9\u30eb\u307e\u305f\u306f\u74b0\u5883\u30ec\u30d9\u30eb\u3067\u4e0a\u66f8\u304d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</li> <li><code>force</code>\u3082\u30af\u30e9\u30b9\u30bf\u30fc\u306b\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u74b0\u5883\u306e\u30dd\u30ea\u30b7\u30fc\u3092\u5236\u5fa1\u3057\u307e\u3059\u304c\u3001\u4e0a\u8a18\u306e\u74b0\u5883\u5909\u6570\u306b\u3088\u3063\u3066\u4e0a\u66f8\u304d\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002</li> </ul>"},{"location":"ja/concepts-advanced/service-types/","title":"\u30b5\u30fc\u30d3\u30b9\u30bf\u30a4\u30d7","text":"<p>\u4ee5\u4e0b\u306b\u793a\u3059\u306e\u306f\u3001<code>docker-compose.yml</code> \u30d5\u30a1\u30a4\u30eb\u5185\u306e <code>lagoon.type</code> \u3092\u901a\u3058\u3066\u5b9a\u7fa9\u3067\u304d\u308b\u3059\u3079\u3066\u306e\u30b5\u30fc\u30d3\u30b9\u30bf\u30a4\u30d7\u3067\u3059\u3002</p> <p>\u8b66\u544a</p> <p>\u4e00\u5ea6 <code>lagoon.type</code> \u304c\u5b9a\u7fa9\u3055\u308c\u3001\u74b0\u5883\u304c\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u3068\u3001\u7570\u306a\u308b\u30bf\u30a4\u30d7\u306b\u5909\u66f4\u3059\u308b\u3053\u3068\u306f\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u304a\u3089\u305a\u3001\u74b0\u5883\u304c\u58ca\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/concepts-advanced/service-types/#basic","title":"<code>basic</code>","text":"<p>\u57fa\u672c\u7684\u306a\u30b3\u30f3\u30c6\u30ca\u3067\u3001\u65e2\u5b58\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304c\u306a\u3044\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u307b\u3068\u3093\u3069\u306b\u9069\u3057\u3066\u3044\u307e\u3059\u3002\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u30dd\u30fc\u30c8\u306f\u30e9\u30d9\u30eb\u3092\u4f7f\u7528\u3057\u3066\u5909\u66f4\u3067\u304d\u307e\u3059\u3002\u81ea\u52d5\u751f\u6210\u3055\u308c\u305f\u30eb\u30fc\u30c8\u304c\u5fc5\u8981\u3067\u306a\u3044\u5834\u5408(\u4f8b:\u5185\u90e8\u5411\u3051\u30b5\u30fc\u30d3\u30b9\u306e\u5834\u5408)\u3001docker-compose.yml \u5185\u3067 <code>lagoon.autogeneratedroute: false</code> \u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002</p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf <code>3000</code>\u3067TCP\u63a5\u7d9a <code>3000</code> \u306f\u3044 \u3044\u3044\u3048 <code>lagoon.service.port</code>, <code>lagoon.autogeneratedroute</code>"},{"location":"ja/concepts-advanced/service-types/#basic-persistent","title":"<code>basic-persistent</code>","text":"<p><code>basic</code>\u3068\u540c\u3058\u3067\u3059\u304c\u3001\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u751f\u6210\u3057\u3001<code>lagoon.persistent</code> \u3092\u3067\u30de\u30a6\u30f3\u30c8\u306e\u4f4d\u5024\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002</p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf <code>3000</code>\u3067TCP\u63a5\u7d9a <code>3000</code> \u306f\u3044 \u306f\u3044 <code>lagoon.service.port</code>, <code>lagoon.autogeneratedroute</code>, <code>lagoon.persistent</code>, <code>lagoon.persistent.name</code>, <code>lagoon.persistent.size</code>, <code>lagoon.persistent.class</code>"},{"location":"ja/concepts-advanced/service-types/#cli","title":"<code>cli</code>","text":"<p>PHP\u3001Node.js\u306a\u3069\u3001\u4efb\u610f\u306eCLI\u30b3\u30f3\u30c6\u30ca\u306b\u4f7f\u7528\u3057\u307e\u3059\u3002 <code>/var/run/secrets/lagoon/sshkey/ssh-privatekey</code>\u306b\u30de\u30a6\u30f3\u30c8\u3055\u308c\u3066\u3044\u308b\u9867\u5ba2\u306eSSH\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ad\u30fc\u304c\u81ea\u52d5\u7684\u306b\u53d6\u5f97\u3055\u308c\u307e\u3059\u3002</p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u305d\u306e\u4ed6\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf - \u3044\u3044\u3048 \u3044\u3044\u3048 \u3044\u3044\u3048 -"},{"location":"ja/concepts-advanced/service-types/#cli-persistent","title":"<code>cli-persistent</code>","text":"<p><code>cli</code>\u3068\u540c\u3058\u3067\u3059\u304c\u3001<code>lagoon.persistent.name</code>\u306f\u6c38\u7d9a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u6301\u3064\u30b5\u30fc\u30d3\u30b9\u306e\u540d\u524d\u3092\u6307\u5b9a\u3055\u308c\u308b\u3053\u3068\u3092\u671f\u5f85\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306f\u5b9a\u7fa9\u3055\u308c\u305f<code>lagoon.persistent</code>\u30e9\u30d9\u30eb\u306e\u4e0b\u306b\u30de\u30a6\u30f3\u30c8\u3055\u308c\u307e\u3059\u3002\u81ea\u8eab\u306e\u6c38\u7d9a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u751f\u6210\u305b\u305a\u3001\u5225\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u6c38\u7d9a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\u305f\u3081\u3060\u3051\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002</p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u305d\u306e\u4ed6\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf - \u3044\u3044\u3048 \u3044\u3044\u3048 \u306f\u3044 <code>lagoon.persistent.name</code>, <code>lagoon.persistent</code>"},{"location":"ja/concepts-advanced/service-types/#elasticsearch","title":"<code>elasticsearch</code>","text":"<p>Elasticsearch\u30b3\u30f3\u30c6\u30ca\u306f\u3001<code>/usr/share/el</code>\u306e\u4e0b\u306b\u6c38\u7d9a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u81ea\u52d5\u751f\u6210\u3057\u307e\u3059\u3002 <code>elasticsearch/data</code></p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf <code>localhost:9200/_cluster/health?local=true</code> \u3067HTTP\u901a\u4fe1 9200 \u306a\u3057 \u306f\u3044 <code>lagoon.persistent.size</code>"},{"location":"ja/concepts-advanced/service-types/#kibana","title":"<code>kibana</code>","text":"<p>Kibana\u30b3\u30f3\u30c6\u30ca\u3002</p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf <code>5601</code>\u3067TCP\u63a5\u7d9a <code>5601</code> \u306f\u3044 \u306a\u3057 -"},{"location":"ja/concepts-advanced/service-types/#logstash","title":"<code>logstash</code>","text":"<p>Logstash\u30b3\u30f3\u30c6\u30ca\u3002</p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf <code>9600</code>\u3067TCP\u63a5\u7d9a <code>9600</code> \u306a\u3057 \u306a\u3057 -"},{"location":"ja/concepts-advanced/service-types/#mariadb","title":"<code>mariadb</code>","text":"<p>Lagoon\u306b<code>mariadb-single</code>\u3068<code>mariadb-dbaas</code>\u306e\u3069\u3061\u3089\u304b\u3092\u81ea\u52d5\u7684\u306b\u6c7a\u5b9a\u3055\u305b\u308b\u30e1\u30bf\u30b5\u30fc\u30d3\u30b9\u3002</p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf - - - - -"},{"location":"ja/concepts-advanced/service-types/#mariadb-single","title":"<code>mariadb-single</code>","text":"<p>MariaDB\u30b3\u30f3\u30c6\u30ca\u3002<code>/lagoon/mysql-backup.sh 127.0.0.1</code>\u3092\u5b9f\u884c\u3059\u308b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306ecron\u30b8\u30e7\u30d6\u309224\u6642\u9593\u3054\u3068\u306b\u4f5c\u6210\u3057\u307e\u3059\u3002</p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf <code>3306</code>\u3067TCP\u63a5\u7d9a <code>3306</code> \u306a\u3057 \u306f\u3044 <code>lagoon.persistent.size</code>"},{"location":"ja/concepts-advanced/service-types/#mariadb-dbaas","title":"<code>mariadb-dbaas</code>","text":"<p>DBaaS\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u3092\u4ecb\u3057\u305f\u5171\u6709MariaDB\u30b5\u30fc\u30d0\u30fc\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002</p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf \u4e0d\u8981 <code>3306</code> \u306a\u3057 - -"},{"location":"ja/concepts-advanced/service-types/#mongo","title":"<code>mongo</code>","text":"<p>Lagoon\u306b<code>mongo-single</code>\u3068<code>mongo-dbaas</code>\u306e\u3069\u3061\u3089\u304b\u3092\u81ea\u52d5\u7684\u306b\u6c7a\u5b9a\u3055\u305b\u308b\u30e1\u30bf\u30b5\u30fc\u30d3\u30b9\u3002</p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf - - - - -"},{"location":"ja/concepts-advanced/service-types/#mongo-single","title":"<code>mongo-single</code>","text":"<p>MongoDB\u30b3\u30f3\u30c6\u30ca\u3001<code>/data/db</code>\u306b\u30de\u30a6\u30f3\u30c8\u3055\u308c\u305f\u6700\u5c0f1GB\u306e\u6c38\u7d9a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u751f\u6210\u3057\u307e\u3059\u3002</p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf <code>27017</code>\u3067TCP\u63a5\u7d9a <code>27017</code> \u306a\u3057 \u306f\u3044 <code>lagoon.persistent.size</code>"},{"location":"ja/concepts-advanced/service-types/#mongo-dbaas","title":"<code>mongo-dbaas</code>","text":"<p>DBaaS\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u3092\u4ecb\u3057\u305f\u5171\u6709MongoDB\u30b5\u30fc\u30d0\u30fc\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002</p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf \u4e0d\u8981 <code>27017</code> \u3044\u3044\u3048 - -"},{"location":"ja/concepts-advanced/service-types/#nginx","title":"<code>nginx</code>","text":"<p>NGINX\u30b3\u30f3\u30c6\u30ca\u3002\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u306f\u3042\u308a\u307e\u305b\u3093\u3002</p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf <code>localhost:50000/nginx_status</code> <code>8080</code> \u306f\u3044 \u3044\u3044\u3048 <code>lagoon.autogeneratedroute</code>"},{"location":"ja/concepts-advanced/service-types/#nginx-php","title":"<code>nginx-php</code>","text":"<p><code>nginx</code>\u3068\u540c\u3058\u3067\u3059\u304c\u3001\u8ffd\u52a0\u3067<code>php</code>\u30b3\u30f3\u30c6\u30ca\u304c\u3042\u308a\u307e\u3059\u3002</p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf NGINX: <code>localhost:50000/nginx_status</code>, PHP: <code>/usr/sbin/check_fcgi</code> <code>8080</code> \u306f\u3044 \u3044\u3044\u3048 <code>lagoon.autogeneratedroute</code>"},{"location":"ja/concepts-advanced/service-types/#nginx-php-persistent","title":"<code>nginx-php-persistent</code>","text":"<p><code>nginx-php</code>\u3068\u540c\u69d8\u3002\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u751f\u6210\u3057\u3001<code>lagoon.persistent</code> \u3067\u30de\u30a6\u30f3\u30c8\u306e\u4f4d\u7f6e\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002</p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf NGINX: <code>localhost:50000/nginx_status</code>, PHP: <code>/usr/sbin/check_fcgi</code> http\u306e<code>8080</code> \u306f\u3044 \u306f\u3044 <code>lagoon.autogeneratedroute</code>, <code>lagoon.persistent</code>, <code>lagoon.persistent.name</code>, <code>lagoon.persistent.size</code>, <code>lagoon.persistent.class</code>"},{"location":"ja/concepts-advanced/service-types/#node","title":"<code>node</code>","text":"<p>Node.js \u30b3\u30f3\u30c6\u30ca\u3002\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u306f\u3042\u308a\u307e\u305b\u3093\u3002</p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf <code>3000</code>\u3067TCP\u63a5\u7d9a <code>3000</code> \u306f\u3044 \u306a\u3057 <code>lagoon.autogeneratedroute</code>"},{"location":"ja/concepts-advanced/service-types/#node-persistent","title":"<code>node-persistent</code>","text":"<p><code>node</code>\u3068\u540c\u69d8\u3002\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u751f\u6210\u3057\u3001<code>lagoon.persistent</code>\u3067\u30de\u30a6\u30f3\u30c8\u306e\u4f4d\u7f6e\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002</p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf <code>3000</code>\u3067TCP\u63a5\u7d9a <code>3000</code> \u306f\u3044 \u306f\u3044 <code>lagoon.autogeneratedroute</code>, <code>lagoon.persistent</code>, <code>lagoon.persistent.name</code>, <code>lagoon.persistent.size</code>, <code>lagoon.persistent.class</code>"},{"location":"ja/concepts-advanced/service-types/#none","title":"<code>none</code>","text":"<p>Lagoon\u306b\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u5b8c\u5168\u306b\u7121\u8996\u3059\u308b\u3088\u3046\u6307\u793a\u3057\u307e\u3059\u3002</p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf - - - - -"},{"location":"ja/concepts-advanced/service-types/#opensearch","title":"<code>opensearch</code>","text":"<p>OpenSearch\u30b3\u30f3\u30c6\u30ca\u3001<code>/usr/share/opensearch/data</code>\u4ee5\u4e0b\u306b\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u81ea\u52d5\u751f\u6210\u3057\u307e\u3059\u3002</p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf <code>localhost:920</code>\u3067\u306eHTTP 0/_cluster/health?local=true<code>| 9200 | \u3044\u3044\u3048 | \u306f\u3044 |</code>lagoon.persistent.size`"},{"location":"ja/concepts-advanced/service-types/#postgres","title":"<code>postgres</code>","text":"<p>Lagoon\u306b<code>postgres-single</code>\u3068<code>postgres-dbaas</code>\u306e\u3069\u3061\u3089\u304b\u3092\u81ea\u52d5\u7684\u306b\u6c7a\u5b9a\u306b\u6c7a\u5b9a\u3055\u305b\u308b\u30e1\u30bf\u30b5\u30fc\u30d3\u30b9\u3002</p> \u5065\u5eb7\u30c1\u30a7\u30c3\u30af \u9732\u51fa\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf - - - - -"},{"location":"ja/concepts-advanced/service-types/#postgres-single","title":"<code>postgres-single</code>","text":"<p>Postgres\u30b3\u30f3\u30c6\u30ca\u3002\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u7528\u306ecron\u30b8\u30e7\u30d6\u3092\u4f5c\u6210\u3057\u300124\u6642\u9593\u3054\u3068\u306b<code>/lagoon/postgres-backup.sh localhost</code>\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> \u5065\u5eb7\u30c1\u30a7\u30c3\u30af \u9732\u51fa\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf <code>5432</code>\u3067TCP\u63a5\u7d9a <code>5432</code> \u3044\u3044\u3048 \u306f\u3044 <code>lagoon.persistent.size</code>"},{"location":"ja/concepts-advanced/service-types/#postgres-dbaas","title":"<code>postgres-dbaas</code>","text":"<p>DBaaS Operator\u7d4c\u7531\u3067\u5171\u6709PostgreSQL\u30b5\u30fc\u30d0\u3092\u5229\u7528\u3057\u307e\u3059\u3002</p> \u5065\u5eb7\u30c1\u30a7\u30c3\u30af \u9732\u51fa\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf \u4e0d\u8981 <code>5432</code> \u3044\u3044\u3048 - -"},{"location":"ja/concepts-advanced/service-types/#python","title":"<code>python</code>","text":"<p>Python\u30b3\u30f3\u30c6\u30ca\u3002\u6c38\u7d9a\u30b9\u30c8\u30ec\u30fc\u30b8\u306f\u3042\u308a\u307e\u305b\u3093\u3002</p> \u5065\u5eb7\u30c1\u30a7\u30c3\u30af \u9732\u51fa\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf <code>8800</code>\u3067HTTP\u63a5\u7d9a <code>8800</code> \u306f\u3044 \u3044\u3044\u3048 <code>lagoon.autogeneratedroute</code>"},{"location":"ja/concepts-advanced/service-types/#python-persistent","title":"<code>python-persistent</code>","text":"<p>\u6c38\u7d9a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u5099\u3048\u305fPython\u30b3\u30f3\u30c6\u30ca\u3002</p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf <code>8800</code>\u3067HTTP\u63a5\u7d9a <code>8800</code> \u306f\u3044 \u306f\u3044 <code>lagoon.autogeneratedroute</code>"},{"location":"ja/concepts-advanced/service-types/#redis","title":"<code>redis</code>","text":"<p>Redis\u30b3\u30f3\u30c6\u30ca\u3002</p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf <code>6379</code>\u3067TCP\u63a5\u7d9a <code>6379</code> \u3044\u3044\u3048 \u3044\u3044\u3048 -"},{"location":"ja/concepts-advanced/service-types/#redis-persistent","title":"<code>redis-persistent</code>","text":"<p><code>/data</code>\u4ee5\u4e0b\u306b\u30de\u30a6\u30f3\u30c8\u3055\u308c\u305f\u81ea\u52d5\u751f\u6210\u306e\u6c38\u7d9a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u5099\u3048\u305fRedis\u30b3\u30f3\u30c6\u30ca\u3002</p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf <code>6379</code>\u3067TCP\u63a5\u7d9a <code>6379</code> \u3044\u3044\u3048 \u306f\u3044 <code>lagoon.persistent.size</code>"},{"location":"ja/concepts-advanced/service-types/#solr","title":"<code>solr</code>","text":"<p><code>/var/solr</code>\u4ee5\u4e0b\u306b\u30de\u30a6\u30f3\u30c8\u3055\u308c\u305f\u81ea\u52d5\u751f\u6210\u306e\u6c38\u7d9a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u5099\u3048\u305fSolr\u30b3\u30f3\u30c6\u30ca\u3002</p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf <code>8983</code>\u3067TCP\u63a5\u7d9a <code>8983</code> \u3044\u3044\u3048 \u306f\u3044 <code>lagoon.persistent.size</code>"},{"location":"ja/concepts-advanced/service-types/#varnish","title":"<code>varnish</code>","text":"<p>Varnish\u30b3\u30f3\u30c6\u30ca\u3002</p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u3055\u308c\u305f\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf HTTP\u30ea\u30af\u30a8\u30b9\u30c8 <code>localhost:8080/varnish_status</code> <code>8080</code> \u306f\u3044 \u3044\u3044\u3048 <code>lagoon.autogeneratedroute</code>"},{"location":"ja/concepts-advanced/service-types/#varnish-persistent","title":"<code>varnish-persistent</code>","text":"<p><code>/var/cache/varnish</code> \u4e0b\u306b\u30de\u30a6\u30f3\u30c8\u3055\u308c\u305f\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u6301\u3064Varnish\u30b3\u30f3\u30c6\u30ca\u3002</p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u3055\u308c\u305f\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf HTTP\u30ea\u30af\u30a8\u30b9\u30c8 <code>localhost:8080/varnish_status</code> <code>8080</code> \u306f\u3044 \u306f\u3044 <code>lagoon.autogeneratedroute</code>, <code>lagoon.persistent.size</code>"},{"location":"ja/concepts-advanced/service-types/#worker","title":"<code>worker</code>","text":"<p>\u4efb\u610f\u306e\u7a2e\u985e\u306e\u30ef\u30fc\u30ab\u30fc\u30b3\u30f3\u30c6\u30ca(\u30ad\u30e5\u30fc\u30ef\u30fc\u30ab\u30fc\u306a\u3069)\u3067\u3001\u516c\u958b\u30b5\u30fc\u30d3\u30b9\u30dd\u30fc\u30c8\u304c\u306a\u3044\u5834\u5408\u306b\u4f7f\u7528\u3057\u307e\u3059\u3002</p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u3055\u308c\u305f\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u8ffd\u52a0\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf - \u3044\u3044\u3048 \u3044\u3044\u3048 \u3044\u3044\u3048 -"},{"location":"ja/concepts-advanced/service-types/#worker-persistent","title":"<code>worker-persistent</code>","text":"<p><code>worker</code>\u3068\u540c\u3058\u3067\u3059\u304c\u3001<code>lagoon.persistent.name</code>\u304c\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u6301\u3064\u30b5\u30fc\u30d3\u30b9\u306e\u540d\u524d\u3092\u4e0e\u3048\u3089\u308c\u308b\u3053\u3068\u3092\u671f\u5f85\u3057\u3001\u5b9a\u7fa9\u3055\u308c\u305f<code>lagoon.persistent</code>\u30e9\u30d9\u30eb\u306e\u4e0b\u306b\u30de\u30a6\u30f3\u30c8\u3055\u308c\u307e\u3059\u3002\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u81ea\u8eab\u306e\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u751f\u6210\u3059\u308b\u3053\u3068\u306a\u304f\u3001\u4ed6\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\u305f\u3081\u306b\u306e\u307f\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002</p> \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af \u516c\u958b\u30dd\u30fc\u30c8 \u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8 \u30b9\u30c8\u30ec\u30fc\u30b8 \u305d\u306e\u4ed6\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf - \u3044\u3044\u3048 \u3044\u3044\u3048 \u306f\u3044 <code>lagoon.persistent.name</code>, <code>lagoon.persistent</code>"},{"location":"ja/concepts-advanced/workflows/","title":"\u30ef\u30fc\u30af\u30d5\u30ed\u30fc","text":"<p>Lagoon\u306f\u3001\u53ef\u80fd\u306a\u9650\u308a\u591a\u69d8\u306a\u958b\u767a\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u307e\u3059\u3002\u7279\u306b\u3001\u30c1\u30fc\u30e0\u306b\u5bfe\u3057\u3066\u7279\u5b9a\u306e\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u3092\u5f37\u5236\u3059\u308b\u3053\u3068\u306a\u304f\u3001\u5404\u958b\u767a\u30c1\u30fc\u30e0\u304c\u81ea\u5206\u305f\u3061\u306e\u30b3\u30fc\u30c9\u3092\u3069\u306e\u3088\u3046\u306b\u958b\u767a\u3057\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u304b\u3092\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/concepts-advanced/workflows/#fixed-branches","title":"\u56fa\u5b9a\u30d6\u30e9\u30f3\u30c1","text":"<p>\u6700\u3082\u76f4\u63a5\u7684\u306a\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u306f\u3001\u3044\u304f\u3064\u304b\u306e\u56fa\u5b9a\u30d6\u30e9\u30f3\u30c1\u306b\u57fa\u3065\u3044\u305f\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u3067\u3059:</p> <p>Lagoon\u304c\u30c7\u30d7\u30ed\u30a4\u3059\u3079\u304d\u30d6\u30e9\u30f3\u30c1(\u4f8b\u3048\u3070 <code>develop</code>\u3001<code>staging</code>\u3001<code>main</code>\u306a\u3069\u3001\u3053\u308c\u3089\u306f\u6b63\u898f\u8868\u73fe\u3067 <code>^(develop|staging|main)$</code>\u3068\u306a\u308a\u307e\u3059)\u3092\u5b9a\u7fa9\u3057\u3001\u305d\u308c\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u305d\u308c\u3067\u5b8c\u4e86\u3067\u3059\uff01</p> <p>\u65b0\u3057\u3044\u6a5f\u80fd\u3092\u30c6\u30b9\u30c8\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u30ed\u30fc\u30ab\u30eb\u3067\u8a2d\u5b9a\u3057\u305f\u30d6\u30e9\u30f3\u30c1\u306b\u305d\u308c\u3089\u3092\u30de\u30fc\u30b8\u3057\u3066\u30d7\u30c3\u30b7\u30e5\u3057\u3001Lagoon\u304c\u305d\u306e\u6a5f\u80fd\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002\u554f\u984c\u304c\u306a\u3051\u308c\u3070\u3001\u305d\u306e\u30d6\u30e9\u30f3\u30c1\u3092\u3042\u306a\u305f\u306e\u672c\u756a\u30d6\u30e9\u30f3\u30c1\u306b\u30de\u30fc\u30b8\u3057\u3066\u30d7\u30c3\u30b7\u30e5\u3057\u307e\u3059\u3002</p>"},{"location":"ja/concepts-advanced/workflows/#feature-branches","title":"\u30d5\u30a3\u30fc\u30c1\u30e3\u30fc\u30d6\u30e9\u30f3\u30c1","text":"<p>\u3082\u3046\u5c11\u3057\u9ad8\u5ea6\u306a\u3082\u306e\u306b\u306a\u308b\u3068\u3001\u30d5\u30a3\u30fc\u30c1\u30e3\u30fc\u30d6\u30e9\u30f3\u30c1\u304c\u3042\u308a\u307e\u3059\u3002Lagoon\u306f\u3001\u30c7\u30d7\u30ed\u30a4\u3057\u305f\u3044\u30d6\u30e9\u30f3\u30c1\u3092\u6b63\u898f\u8868\u73fe\u3067\u5b9a\u7fa9\u3059\u308b\u80fd\u529b\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u4e0a\u8a18\u306e\u6b63\u898f\u8868\u73fe\u3092\u3053\u306e\u3088\u3046\u306b\u62e1\u5f35\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059:<code>^feature\\/|^(staging|main)$</code>\u3002\u3053\u308c\u306b\u3088\u308a\u3001Lagoon\u306f<code>feature/</code>\u3067\u59cb\u307e\u308b\u3059\u3079\u3066\u306e\u30d6\u30e9\u30f3\u30c1\u3001\u304a\u3088\u3073<code>staging</code>\u3068<code>main</code>\u3068\u3044\u3046\u540d\u524d\u306e\u30d6\u30e9\u30f3\u30c1\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3088\u3046\u6307\u793a\u3057\u307e\u3059\u3002\u79c1\u305f\u3061\u306e\u958b\u767a\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093:</p> <ul> <li>\u65b0\u3057\u3044\u30d6\u30e9\u30f3\u30c1\u3092\u4f5c\u6210\u3059\u308b <code>main</code>\u304b\u3089<code>feature/myfeature</code>\u3092\u547c\u3073\u51fa\u3057\u3001<code>feature/myfeature</code>\u3092\u30d7\u30c3\u30b7\u30e5\u3057\u307e\u3059\u3002</li> <li>Lagoon\u306f\u3001<code>feature/myfeature</code>\u30d6\u30e9\u30f3\u30c1\u3092\u65b0\u3057\u3044\u74b0\u5883\u3068\u3057\u3066\u30c7\u30d7\u30ed\u30a4\u3057\u3001\u4ed6\u306e\u6a5f\u80fd\u3068\u306f\u72ec\u7acb\u3057\u3066\u6a5f\u80fd\u3092\u30c6\u30b9\u30c8\u3067\u304d\u307e\u3059\u3002</li> <li><code>feature/myfeature</code>\u3092<code>main</code>\u30d6\u30e9\u30f3\u30c1\u306b\u30de\u30fc\u30b8\u3059\u308b\u3068\u3001\u305d\u308c\u306f\u3042\u306a\u305f\u306e\u672c\u756a\u74b0\u5883\u306b\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u307e\u3059\u3002</li> </ul> <p>\u3082\u3057\u3054\u5e0c\u671b\u3067\u3042\u308c\u3070\u3001<code>feature/myfeature</code>\u3084\u4ed6\u306e\u30d5\u30a3\u30fc\u30c1\u30e3\u30fc\u30d6\u30e9\u30f3\u30c1\u3092\u6700\u521d\u306b<code>staging</code>\u306b\u30de\u30fc\u30b8\u3057\u3066\u3001\u8907\u6570\u306e\u6a5f\u80fd\u3092\u4e00\u7dd2\u306b\u30c6\u30b9\u30c8\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\u305d\u306e\u5f8c\u3001main\u306b\u30de\u30fc\u30b8\u3067\u304d\u307e\u3059\u3002</p> <p>\u3053\u306e\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u306f\u3001Git\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30d6\u30e9\u30f3\u30c1\u306e\u6574\u7406\u3068\u30af\u30ea\u30fc\u30f3\u3055\u304c\u975e\u5e38\u306b\u91cd\u8981\u3067\u3059\u3002\u5404\u30d5\u30a3\u30fc\u30c1\u30e3\u30fc\u30d6\u30e9\u30f3\u30c1\u306f\u81ea\u8eab\u306eLagoon\u74b0\u5883\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u3001\u975e\u5e38\u306b\u901f\u304f\u5927\u91cf\u306e\u74b0\u5883\u3092\u751f\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u3001\u305d\u308c\u3089\u5168\u3066\u304c\u30ea\u30bd\u30fc\u30b9\u3092\u6d88\u8cbb\u3057\u307e\u3059\u3002\u672a\u4f7f\u7528\u306e\u30d6\u30e9\u30f3\u30c1\u306f\u5fc5\u305a\u30de\u30fc\u30b8\u3059\u308b\u304b\u524a\u9664\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u3053\u306e\u305f\u3081\u3001\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u30d9\u30fc\u30b9\u306e\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u3092\u8003\u3048\u308b\u3053\u3068\u304c\u7406\u306b\u304b\u306a\u3063\u3066\u3044\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002</p>"},{"location":"ja/concepts-advanced/workflows/#pull-requests","title":"\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8","text":"<p>\u3055\u3089\u306b\u9ad8\u5ea6\u306a\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u306f\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u3088\u308b\u3082\u306e\u3067\u3059\u3002\u3053\u306e\u3088\u3046\u306a\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u306f\u3001\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8(\u307e\u305f\u306f\u30de\u30fc\u30b8\u30ea\u30af\u30a8\u30b9\u30c8\u3068\u3082\u547c\u3070\u308c\u307e\u3059)\u3092\u30b5\u30dd\u30fc\u30c8\u3059\u308bGit\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u306e\u30b5\u30dd\u30fc\u30c8\u304c\u5fc5\u8981\u3067\u3059\u3002\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u30d9\u30fc\u30b9\u306e\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u306e\u30a2\u30a4\u30c7\u30a2\u306f\u3001\u30d3\u30eb\u30c9\u4e2d\u306bLagoon\u304c\u30de\u30fc\u30b8\u3092\u884c\u3063\u3066\u304f\u308c\u308b\u306e\u3067\u3001\u5b9f\u969b\u306b\u30de\u30fc\u30b8\u3059\u308b\u5fc5\u8981\u306f\u306a\u304f\u3001\u30bf\u30fc\u30b2\u30c3\u30c8\u30d6\u30e9\u30f3\u30c1\u3068\u4e00\u7dd2\u306b\u6a5f\u80fd\u3092\u30c6\u30b9\u30c8\u3067\u304d\u308b\u3068\u3044\u3046\u30a2\u30a4\u30c7\u30a2\u306e\u80cc\u666f\u306b\u3042\u308a\u307e\u3059\u3002</p> <p>\u79c1\u305f\u3061\u306e\u4f8b\u3067\u306f\u3001Lagoon\u3092\u8a2d\u5b9a\u3057\u3066\u3001\u30d6\u30e9\u30f3\u30c1<code>^(staging|main)$</code>\u3068\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u3092<code>.*</code> (\u3059\u3079\u3066\u306e\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b)\u306b\u30c7\u30d7\u30ed\u30a4\u3055\u305b\u307e\u3059\u3002 \u3053\u308c\u3067\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059:</p> <ol> <li><code>main</code>\u304b\u3089\u65b0\u3057\u3044\u30d6\u30e9\u30f3\u30c1<code>feature/myfeature</code>\u3092\u4f5c\u6210\u3057\u3001<code>feature/myfeature</code>\u3092\u30d7\u30c3\u30b7\u30e5\u3057\u307e\u3059(\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u30d6\u30e9\u30f3\u30c1\u306f<code>staging</code>\u3068<code>main</code>\u306e\u307f\u306e\u305f\u3081\u3001\u4eca\u306f\u30c7\u30d7\u30ed\u30a4\u306f\u884c\u308f\u308c\u307e\u305b\u3093)\u3002</li> <li>\u3042\u306a\u305f\u306eGit\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u3067<code>feature/myfeature</code>\u304b\u3089<code>main</code>\u3078\u306e\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</li> <li>Lagoon\u306f\u4eca\u3001<code>feature/myfeature</code>\u30d6\u30e9\u30f3\u30c1\u3092<code>main</code>\u30d6\u30e9\u30f3\u30c1\u306e\u4e0a\u306b\u30de\u30fc\u30b8\u3057\u3001\u305d\u306e\u7d50\u679c\u306e\u30b3\u30fc\u30c9\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002</li> <li>\u3053\u308c\u3067\u3001<code>feature/myfeature</code>\u30d6\u30e9\u30f3\u30c1\u306e\u6a5f\u80fd\u3092\u30c6\u30b9\u30c8\u3067\u304d\u307e\u3059\u3002\u307e\u308b\u3067<code>main</code>\u306b\u30de\u30fc\u30b8\u3055\u308c\u305f\u304b\u306e\u3088\u3046\u306b\u3001<code>feature/myfeature</code>\u30d6\u30e9\u30f3\u30c1\u3092\u4f5c\u6210\u3057\u3066\u304b\u3089<code>main</code>\u3067\u8d77\u3053\u3063\u305f\u3059\u3079\u3066\u306e\u5909\u66f4\u304c\u305d\u3053\u306b\u3042\u308a\u307e\u3059\u306e\u3067\u3001<code>main</code>\u30d6\u30e9\u30f3\u30c1\u306e\u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3068\u5fc3\u914d\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002<ol> <li>\u30de\u30fc\u30b8\u306e\u7af6\u5408\u304c\u3042\u308b\u5834\u5408\u3001\u30d3\u30eb\u30c9\u304c\u5931\u6557\u3057\u3001Lagoon\u306f\u505c\u6b62\u3057\u3066\u3042\u306a\u305f\u306b\u901a\u77e5\u3057\u307e\u3059\u3002</li> </ol> </li> <li>\u3042\u306a\u305f\u304c\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u30c6\u30b9\u30c8\u3092\u7d42\u3048\u305f\u5f8c \u30ea\u30af\u30a8\u30b9\u30c8\u30d6\u30e9\u30f3\u30c1\u3067\u306f\u3001Git\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u306b\u623b\u3063\u3066\u5b9f\u969b\u306b\u30b3\u30fc\u30c9\u3092<code>main</code>\u306b\u30de\u30fc\u30b8\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001<code>main</code>\u306e\u30c7\u30d7\u30ed\u30a4\u304c\u30c8\u30ea\u30ac\u30fc\u3055\u308c\u307e\u3059\u3002</li> <li>\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u30de\u30fc\u30b8\u3055\u308c\u308b\u3068\u3001\u81ea\u52d5\u7684\u306b\u30af\u30ed\u30fc\u30ba\u3055\u308c\u3001Lagoon\u306f\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u74b0\u5883\u3092\u81ea\u52d5\u7684\u306b\u524a\u9664\u3057\u307e\u3059\u3002</li> </ol> <p>\u4e00\u90e8\u306e\u30c1\u30fc\u30e0\u3067\u306f\u3001\u5171\u6709\u306e<code>staging</code>\u30d6\u30e9\u30f3\u30c1\u306b\u5bfe\u3057\u3066\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u4f5c\u6210\u3057\u3001\u305d\u306e\u5f8c\u3001\u5225\u306e\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u4ecb\u3057\u3066<code>staging</code>\u30d6\u30e9\u30f3\u30c1\u3092<code>main</code>\u30d6\u30e9\u30f3\u30c1\u306b\u30de\u30fc\u30b8\u3059\u308b\u3053\u3068\u3092\u9078\u629e\u3059\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u3053\u308c\u306f\u3001\u4f7f\u7528\u3057\u3066\u3044\u308bGit\u306e\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u306e\u7a2e\u985e\u306b\u3088\u308a\u307e\u3059\u3002</p> <p>\u307e\u305f\u3001Lagoon\u3067\u306f\u3001\u30bf\u30a4\u30c8\u30eb\u306b\u7279\u5b9a\u306e\u30c6\u30ad\u30b9\u30c8\u304c\u3042\u308b\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u307f\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u6b63\u898f\u8868\u73fe\u3068\u3057\u3066\u5b9a\u7fa9\u3055\u308c\u305f<code>[BUILD]</code>\u306f\u3001\u30bf\u30a4\u30c8\u30eb\u304c<code>[BUILD] My Pull Request</code>\u306e\u3088\u3046\u306a\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u307f\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u3001\u30bf\u30a4\u30c8\u30eb\u304c<code>My other Pull Request</code>\u306e\u3088\u3046\u306a\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u306f\u81ea\u52d5\u7684\u306b\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u307e\u305b\u3093\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u74b0\u5883\u306e\u6570\u3092\u5c11\u306a\u304f\u4fdd\u3064\u3053\u3068\u304c\u3067\u304d\u3001\u307e\u3060\u74b0\u5883\u304c\u5fc5\u8981\u3067\u306a\u3044\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u4fdd\u6301\u3059\u308b\u3053\u3068\u53ef\u80fd\u306b\u3057\u307e\u3059\u3002</p>"},{"location":"ja/concepts-advanced/workflows/#automatic-database-sync-for-pull-requests","title":"\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u81ea\u52d5\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540c\u671f","text":"<p>\u81ea\u52d5\u7684\u306a\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u74b0\u5883\u306f\u7d20\u6674\u3089\u3057\u3044\u3053\u3068\u3067\u3059\u3002\u3057\u304b\u3057\u3001\u305d\u308c\u3089\u306e\u74b0\u5883\u304c\u4f5c\u6210\u3055\u308c\u305f\u3068\u304d\u306b\u5225\u306e\u74b0\u5883\u304b\u3089\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304c\u540c\u671f\u3055\u308c\u308b\u3068\u4fbf\u5229\u3060\u308d\u3046\u3068\u3082\u601d\u3044\u307e\u3059\u3002Lagoon\u306f\u305d\u308c\u3092\u6271\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\uff01</p> <p>\u6b21\u306e\u4f8b\u306f\u3001\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u74b0\u5883\u306e\u6700\u521d\u306e\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u3067\u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u540c\u671f\u3057\u307e\u3059:</p> .lagoon.yml<pre><code>tasks:\npost-rollout:\n- run:\nname: IF no Drupal installed &amp; Pullrequest = Sync database from staging\ncommand: |\nif [[ -n ${LAGOON_PR_BASE_BRANCH} ]] &amp;&amp; tables=$(drush sqlq 'show tables;') &amp;&amp; [ -z \"$tables\" ]; then\ndrush -y sql-sync @staging default\nfi\nservice: cli\nshell: bash\n</code></pre>"},{"location":"ja/concepts-advanced/workflows/#promotion","title":"\u30d7\u30ed\u30e2\u30fc\u30b7\u30e7\u30f3","text":"<p>\u74b0\u5883\u306b\u30b3\u30fc\u30c9\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u5225\u306e\u65b9\u6cd5\u306f\u3001\u30d7\u30ed\u30e2\u30fc\u30b7\u30e7\u30f3\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u3067\u3059\u3002</p> <p>\u30d7\u30ed\u30e2\u30fc\u30b7\u30e7\u30f3\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u306e\u8003\u3048\u65b9\u306f\u3001\u4f8b\u3068\u3057\u3066\u3053\u3053\u304b\u3089\u6765\u3066\u3044\u307e\u3059\u3002</p> <p><code>staging</code>\u30d6\u30e9\u30f3\u30c1\u3092<code>main</code>\u30d6\u30e9\u30f3\u30c1\u306b\u30de\u30fc\u30b8\u3057\u3001<code>main</code>\u306b\u5909\u66f4\u304c\u306a\u3051\u308c\u3070\u3001\u3064\u307e\u308a<code>main</code>\u3068<code>staging</code>\u304cGit\u3067\u307e\u3063\u305f\u304f\u540c\u3058\u30b3\u30fc\u30c9\u3092\u6301\u3063\u3066\u3044\u308b\u5834\u5408\u3067\u3082\u3001\u7d50\u679c\u3068\u3057\u3066\u5f97\u3089\u308c\u308bDocker\u30a4\u30e1\u30fc\u30b8\u304c\u308f\u305a\u304b\u306b\u7570\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u6700\u5f8c\u306e<code>staging</code>\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u3068\u73fe\u5728\u306e<code>main</code>\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u306e\u9593\u306b\u3001\u3044\u304f\u3064\u304b\u306e\u4e0a\u6d41Docker\u30a4\u30e1\u30fc\u30b8\u304c\u5909\u66f4\u3055\u308c\u305f\u304b\u3001\u307e\u305f\u306f\u3055\u307e\u3056\u307e\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u306b\u3088\u3063\u3066\u30ed\u30fc\u30c9\u3055\u308c\u305f\u4f9d\u5b58\u95a2\u4fc2\u304c\u5909\u66f4\u3055\u308c\u305f\u53ef\u80fd\u6027\u304c\u3042\u308b\u305f\u3081\u3067\u3059\u3002\u3053\u308c\u306f\u975e\u5e38\u306b\u5c0f\u3055\u3044\u78ba\u7387\u3067\u3059\u304c\u5b58\u5728\u3057\u307e\u3059\u3002</p> <p>\u305d\u306e\u305f\u3081\u3001 \u3053\u306e\u72b6\u6cc1\u3067\u306fLagoon\u306f\u4e00\u3064\u306e\u74b0\u5883\u304b\u3089\u5225\u306e\u74b0\u5883\u3078\u306eLagoon\u30a4\u30e1\u30fc\u30b8\u306e\u30d7\u30ed\u30e2\u30fc\u30b7\u30e7\u30f3\u3068\u3044\u3046\u6982\u5ff5\u3092\u7406\u89e3\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306f\u57fa\u672c\u7684\u306b\u3001\u3059\u3067\u306b\u69cb\u7bc9\u3055\u308c\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u305fDocker\u30a4\u30e1\u30fc\u30b8\u3092\u4e00\u3064\u306e\u74b0\u5883\u304b\u3089\u53d6\u308a\u51fa\u3057\u3001\u305d\u308c\u3089\u306e\u307e\u3063\u305f\u304f\u540c\u3058Docker\u30a4\u30e1\u30fc\u30b8\u3092\u5225\u306e\u74b0\u5883\u3067\u4f7f\u7528\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u3092\u610f\u5473\u3057\u307e\u3059\u3002</p> <p>\u79c1\u305f\u3061\u306e\u4f8b\u3067\u306f\u3001<code>main</code>\u74b0\u5883\u304b\u3089<code>production</code>\u74b0\u5883\u3078Docker\u30a4\u30e1\u30fc\u30b8\u3092\u30d7\u30ed\u30e2\u30fc\u30c8\u3057\u305f\u3044\u3068\u601d\u3063\u3066\u3044\u307e\u3059:</p> <ul> <li>\u6700\u521d\u306b\u3001<code>main</code>\u3068\u3044\u3046\u540d\u524d\u306e\u901a\u5e38\u306e\u30c7\u30d7\u30ed\u30a4\u74b0\u5883\u304c\u5fc5\u8981\u3067\u3059\u3002\u74b0\u5883\u304c\u6b63\u5e38\u306b\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u307e\u305f\u3001Git\u30ea\u30dd\u30b8\u30c8\u30ea\u306b<code>production</code>\u3068\u3044\u3046\u540d\u524d\u306e\u30d6\u30e9\u30f3\u30c1\u304c\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u308c\u304c\u3042\u308b\u3068\u3001\u4eba\u3005\u304c\u3053\u306e\u30d6\u30e9\u30f3\u30c1\u306b\u30d7\u30c3\u30b7\u30e5\u3059\u308b\u306a\u3069\u3001\u5947\u5999\u306a\u6df7\u4e71\u3092\u5f15\u304d\u8d77\u3053\u3059\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002</li> <li>\u6b21\u306b\u3001lagoon cli\u3092\u4f7f\u7528\u3057\u3066\u30d7\u30ed\u30e2\u30fc\u30b7\u30e7\u30f3\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u3092\u30c8\u30ea\u30ac\u30fc\u3057\u307e\u3059:</li> </ul> \u30d7\u30ed\u30e2\u30fc\u30b7\u30e7\u30f3\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u3092\u30c8\u30ea\u30ac\u30fc\u3059\u308b<pre><code>lagoon deploy promote --project=\"myproject\" --source=\"main\" --destination=\"production\"\n</code></pre> <p>\u3053\u308c\u306f\u3001\u30bd\u30fc\u30b9<code>main</code>\u304b\u3089\u30c7\u30b9\u30c6\u30a3\u30cd\u30fc\u30b7\u30e7\u30f3<code>production</code>\u3078\u306e\u30d7\u30ed\u30e2\u30fc\u30b7\u30e7\u30f3\u3092\u5e0c\u671b\u3059\u308b\u3053\u3068\u3092Lagoon\u306b\u4f1d\u3048\u307e\u3059\u3002</p> <p>Lagoon\u306f\u6b21\u306e\u3053\u3068\u3092\u884c\u3044\u307e\u3059:</p> <ul> <li><code>.lagoon.yml</code>\u3068<code>docker-compose.yml</code>\u30d5\u30a1\u30a4\u30eb\u3092\u30ed\u30fc\u30c9\u3059\u308b\u305f\u3081\u306b\u3001Git\u30d6\u30e9\u30f3\u30c1<code>main</code>\u3092\u30c1\u30a7\u30c3\u30af\u30a2\u30a6\u30c8\u3057\u307e\u3059(Lagoon\u304c \u5b8c\u5168\u306b\u52d5\u4f5c\u3059\u308b\u306b\u306f\u3053\u308c\u3089\u304c\u307e\u3060\u5fc5\u8981\u3067\u3059)\u3002</li> <li><code>docker-compose.yml</code>\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u30b5\u30fc\u30d3\u30b9\u306b\u5bfe\u3057\u3066\u3001\u3059\u3079\u3066\u306eKubernetes/OpenShift\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u304c\u3001\u74b0\u5883\u5909\u6570\u3068\u3057\u3066<code>LAGOON_GIT_BRANCH=production</code>\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002</li> <li><code>main</code>\u74b0\u5883\u304b\u3089\u6700\u65b0\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u30b3\u30d4\u30fc\u3057\u3001\u305d\u308c\u3089\u3092\u4f7f\u7528\u3057\u307e\u3059(\u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3057\u305f\u308a\u3001\u4e0a\u6d41\u304b\u3089\u30bf\u30b0\u4ed8\u3051\u3057\u305f\u308a\u3059\u308b\u4ee3\u308f\u308a\u306b)\u3002</li> <li>\u901a\u5e38\u306e\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u306e\u3088\u3046\u306b\u3001\u3059\u3079\u3066\u306e\u30dd\u30b9\u30c8\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</li> </ul> <p>\u4ed6\u306e\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u3068\u540c\u69d8\u306b\u3001\u6210\u529f\u307e\u305f\u306f\u5931\u6557\u306e\u901a\u77e5\u3092\u53d7\u3051\u53d6\u308a\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/","title":"Lagoon\u306e\u57fa\u672c\u7684\u306a\u6982\u5ff5","text":"<p>\u3053\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u306f\u3001Lagoon\u306e\u57fa\u672c\u7684\u306a\u6982\u5ff5\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\u3059\u3067\u306b\u3053\u308c\u3089\u306b\u3064\u3044\u3066\u7406\u89e3\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001Lagoon\u306e\u9ad8\u5ea6\u306a\u6982\u5ff5\u306b\u9032\u3093\u3067\u304f\u3060\u3055\u3044\u3002</p> <p>\u3082\u3057\u52a9\u3051\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001\u3042\u306a\u305f\u306eLagoon\u7ba1\u7406\u8005\u306b\u9023\u7d61\u3059\u308b\u304b\u3001\u79c1\u305f\u3061\u306eDiscord\u3067\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3084\u30e1\u30f3\u30c6\u30ca\u30fc\u3078\u3054\u9023\u7d61\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/concepts-basics/build-and-deploy-process/","title":"\u30d3\u30eb\u30c9\u3068\u30c7\u30d7\u30ed\u30a4\u30d7\u30ed\u30bb\u30b9","text":"<p>\u3053\u306e\u6587\u66f8\u3067\u306f\u3001Lagoon\u306e\u30d3\u30eb\u30c9\u3068\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u4e2d\u306b\u5b9f\u969b\u306b\u4f55\u304c\u8d77\u3053\u308b\u304b\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\u5b9f\u969b\u306e\u30d7\u30ed\u30bb\u30b9\u304b\u3089\u5927\u5e45\u306b\u5358\u7d14\u5316\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001Lagoon\u304c\u65b0\u3057\u3044\u30b3\u30fc\u30c9\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u305f\u3073\u306b\u4f55\u304c\u884c\u308f\u308c\u3066\u3044\u308b\u304b\u3092\u7406\u89e3\u3059\u308b\u306e\u306b\u5f79\u7acb\u3061\u307e\u3059\u3002</p> <p>\u4ee5\u4e0b\u306e\u30d3\u30c7\u30aa\u3092\u898b\u3066\u3001\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u30d7\u30ed\u30bb\u30b9\u306e\u8a73\u7d30\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/concepts-basics/build-and-deploy-process/#1-openshiftkubernetes","title":"1. \u74b0\u5883\u306e\u305f\u3081\u306eOpenShift\u30d7\u30ed\u30b8\u30a7\u30af\u30c8/Kubernetes\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u306e\u8a2d\u5b9a","text":"<p>\u307e\u305a\u3001Lagoon\u306f\u6307\u5b9a\u3055\u308c\u305f\u74b0\u5883\u306eOpenShift\u30d7\u30ed\u30b8\u30a7\u30af\u30c8/Kubernetes\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u304c\u5b58\u5728\u3057\u3066\u6b63\u3057\u304f\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u5fc5\u8981\u306a\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u304c\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3001\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u4f5c\u6210\u3057\u3001\u74b0\u5883\u5909\u6570\u3092<code>lagoon-env</code>\u3068\u3044\u3046ConfigMap\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u74b0\u5883\u306e\u30bf\u30a4\u30d7\u3084\u540d\u524d\u3001Lagoon\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u540d\u524d\u306a\u3069\u306e\u60c5\u5831\u3067\u6e80\u305f\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/build-and-deploy-process/#2-git","title":"2. Git\u306e\u30c1\u30a7\u30c3\u30af\u30a2\u30a6\u30c8\u3068\u30de\u30fc\u30b8","text":"<p>\u6b21\u306b\u3001Lagoon\u306fGit\u304b\u3089\u30b3\u30fc\u30c9\u3092\u30c1\u30a7\u30c3\u30af\u30a2\u30a6\u30c8\u3057\u307e\u3059\u3002<code>.lagoon.yml</code>\u3001<code>docker-compose.yml</code>\u3001\u304a\u3088\u3073<code>.env</code>\u3092\u8aad\u307f\u53d6\u308b\u305f\u3081\u3060\u3051\u3067\u306a\u304f\u3001Docker\u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3059\u308b\u305f\u3081\u306b\u3082\u3053\u308c\u304c\u5fc5\u8981\u3067\u3059\u3002</p> <p>\u6ce8\u610f\u70b9\u3068\u3057\u3066\u3001Lagoon\u306f\u30d6\u30e9\u30f3\u30c1/PR\u304cLagoon\u3067\u8a2d\u5b9a\u3055\u308c\u305f\u30d6\u30e9\u30f3\u30c1\u306e\u6b63\u898f\u8868\u73fe\u3068\u4e00\u81f4\u3059\u308b\u5834\u5408\u306b\u306e\u307f\u3001\u3053\u308c\u3089\u306e\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u51e6\u7406\u3057\u307e\u3059\u3002\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u304c\u3069\u306e\u3088\u3046\u306b\u30c8\u30ea\u30ac\u30fc\u3055\u308c\u305f\u304b\u306b\u57fa\u3065\u3044\u3066\u3001\u7570\u306a\u308b\u3053\u3068\u304c\u8d77\u3053\u308a\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/build-and-deploy-process/#webhook","title":"\u30d6\u30e9\u30f3\u30c1Webhook\u30d7\u30c3\u30b7\u30e5","text":"<p>\u30c7\u30d7\u30ed\u30a4\u304cGit webhook\u7d4c\u7531\u3067\u81ea\u52d5\u7684\u306b\u30c8\u30ea\u30ac\u30fc\u3055\u308c\u3001\u5358\u4e00\u306e\u30d6\u30e9\u30f3\u30c1\u5411\u3051\u3067\u3042\u308b\u5834\u5408\u3001Lagoon\u306fwebhook\u30da\u30a4\u30ed\u30fc\u30c9\u306b\u542b\u307e\u308c\u308bGit SHA\u3092\u30c1\u30a7\u30c3\u30af\u30a2\u30a6\u30c8\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u30d7\u30c3\u30b7\u30e5\u3055\u308c\u305f\u5404Git SHA\u3054\u3068\u306b\u30c7\u30d7\u30ed\u30a4\u304c\u30c8\u30ea\u30ac\u30fc\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/build-and-deploy-process/#rest","title":"\u30d6\u30e9\u30f3\u30c1REST\u30c8\u30ea\u30ac\u30fc","text":"<p>REST API\u7d4c\u7531(UI\u307e\u305f\u306fGraphQL\u7d4c\u7531)\u3067\u624b\u52d5\u3067\u30d6\u30e9\u30f3\u30c1\u30c7\u30d7\u30ed\u30a4\u3092\u30c8\u30ea\u30ac\u30fc\u3057\u3001POST\u30da\u30a4\u30ed\u30fc\u30c9\u3067<code>SHA</code>\u3092\u5b9a\u7fa9\u3057\u306a\u3044\u5834\u5408\u3001Lagoon\u306f\u305d\u306e\u30d6\u30e9\u30f3\u30c1\u306e\u6700\u65b0\u306e\u30b3\u30df\u30c3\u30c8\u3092\u5358\u306b\u30c1\u30a7\u30c3\u30af\u30a2\u30a6\u30c8\u3057\u3001\u305d\u308c\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/build-and-deploy-process/#_2","title":"\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8","text":"<p>\u30c7\u30d7\u30ed\u30a4\u304c\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8(PR)\u30c7\u30d7\u30ed\u30a4\u3067\u3042\u308b\u5834\u5408\u3001Lagoon\u306f\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u30d9\u30fc\u30b9\u3068HEAD\u30d6\u30e9\u30f3\u30c1\u304a\u3088\u3073SHA\u3092\u30ed\u30fc\u30c9\u3057\u3001\u6b21\u306e\u3053\u3068\u3092\u884c\u3044\u307e\u3059:</p> <ul> <li>PR\u304c\u6307\u3057\u3066\u3044\u308b\u30d6\u30e9\u30f3\u30c1(\u30d9\u30fc\u30b9\u30d6\u30e9\u30f3\u30c1)\u3092\u30c1\u30a7\u30c3\u30af\u30a2\u30a6\u30c8\u3057\u307e\u3059\u3002</li> <li>PR\u304c\u8d77\u6e90\u3068\u306a\u308b\u30d6\u30e9\u30f3\u30c1(<code>HEAD</code>\u30d6\u30e9\u30f3\u30c1)\u3092\u30d9\u30fc\u30b9\u30d6\u30e9\u30f3\u30c1\u306e\u4e0a\u306b\u30de\u30fc\u30b8\u3057\u307e\u3059\u3002</li> <li>\u3088\u308a\u5177\u4f53\u7684\u306b\u306f:<ul> <li>Lagoon\u306f\u3001Webhook\u3067\u9001\u4fe1\u3055\u308c\u305f\u7279\u5b9a\u306eSHA\u3092\u30c1\u30a7\u30c3\u30af\u30a2\u30a6\u30c8\u3057\u3066\u30de\u30fc\u30b8\u3057\u307e\u3059\u3002\u3053\u308c\u3089\u306eSHA\u306f\u30d6\u30e9\u30f3\u30c1\u30d8\u30c3\u30c9\u3092\u6307\u3057\u3066\u3044\u308b\u5834\u5408\u3082\u3042\u308c\u3070\u3001 \u305d\u3046\u3067\u306a\u3044\u5834\u5408 \u3082\u3042\u308a\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001GitHub\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u65b0\u3057\u3044\u30d7\u30c3\u30b7\u30e5\u3092\u884c\u3046\u3068\u3001\u30d9\u30fc\u30b9\u30d6\u30e9\u30f3\u30c1\u306eSHA\u304c\u73fe\u5728\u306e\u30d9\u30fc\u30b9\u30d6\u30e9\u30f3\u30c1HEAD\u3092\u6307\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002</li> </ul> </li> </ul> <p>\u30de\u30fc\u30b8\u304c\u5931\u6557\u3057\u305f\u5834\u5408\u3001Lagoon\u3082\u505c\u6b62\u3057\u3001\u305d\u306e\u3053\u3068\u3092\u304a\u77e5\u3089\u305b\u3057\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/build-and-deploy-process/#3","title":"3. \u30a4\u30e1\u30fc\u30b8\u306e\u30d3\u30eb\u30c9","text":"<p><code>docker-compose.yml</code>\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u5404\u30b5\u30fc\u30d3\u30b9\u306b\u3064\u3044\u3066\u3001Lagoon\u306f\u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u30d3\u30eb\u30c9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u5834\u5408\u3001\u3053\u306e\u6642\u70b9\u3067\u30d3\u30eb\u30c9\u304c\u884c\u308f\u308c\u307e\u3059\u3002\u30d3\u30eb\u30c9\u306e\u9806\u5e8f\u306f\u3001<code>docker-compose.yml</code>\u3067\u306e\u8a2d\u5b9a\u9806\u306b\u57fa\u3065\u3044\u3066\u3044\u307e\u3059\u3002\u3044\u304f\u3064\u304b\u306e\u30d3\u30eb\u30c9\u5f15\u6570\u304c\u6ce8\u5165\u3055\u308c\u307e\u3059\u3002</p> <ul> <li><code>LAGOON_GIT_SHA</code></li> <li><code>LAGOON_GIT_BRANCH</code></li> <li><code>LAGOON_PROJECT</code></li> <li><code>LAGOON_BUILD_TYPE</code> ( <code>pullrequest</code>\u3001<code>branch</code>\u3001\u307e\u305f\u306f <code>promote</code> \u306e\u3044\u305a\u308c\u304b)</li> <li><code>LAGOON_SSH_PRIVATE_KEY</code> - \u30bd\u30fc\u30b9\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u30af\u30ed\u30fc\u30f3\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u308bSSH\u306e\u79d8\u5bc6\u9375\u3067\u3059\u3002\u30d3\u30eb\u30c9\u5f15\u6570\u3092\u5b9f\u969b\u306e\u9375\u306b\u5909\u63db\u3059\u308b\u306b\u306f\u3001<code>RUN /lagoon/entrypoints/05-ssh-key.sh</code>\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u3053\u306e\u9375\u306f<code>/home/.ssh/key</code>\u306b\u3042\u308a\u3001SSH\u3068Git\u304c\u81ea\u52d5\u7684\u306b\u4f7f\u7528\u3057\u307e\u3059\u3002\u5b89\u5168\u306e\u305f\u3081\u3001<code>RUN rm /home/.ssh/key</code>\u3092\u4f7f\u7528\u3057\u3066\u9375\u3092\u518d\u5ea6\u524a\u9664\u3057\u307e\u3059\u3002</li> <li><code>LAGOON_GIT_SOURCE_REPOSITORY</code> - \u30bd\u30fc\u30b9\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u5b8c\u5168\u306aGit URL\u3067\u3059</li> </ul> <p>\u307e\u305f\u3001\u3053\u308c\u304c\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u30d3\u30eb\u30c9\u3067\u3042\u308b\u5834\u5408\u306f\u4ee5\u4e0b\u3068\u306a\u308a\u307e\u3059\u3002</p> <ul> <li><code>LAGOON_PR_HEAD_BRANCH</code></li> <li><code>LAGOON_PR_HEAD_SHA</code></li> <li><code>LAGOON_PR_BASE_BRANCH</code></li> <li><code>LAGOON_PR_BASE_SHA</code></li> <li><code>LAGOON_PR_TITLE</code></li> </ul> <p>\u307e\u305f\u3001\u3059\u3067\u306b\u69cb\u7bc9\u3055\u308c\u305f\u5404\u30a4\u30e1\u30fc\u30b8\u306e\u540d\u524d\u3082\u6ce8\u5165\u3055\u308c\u307e\u3059\u3002\u3042\u306a\u305f\u306e<code>docker-compose.yml</code>\u304c\u6700\u521d\u306b<code>cli</code>\u30a4\u30e1\u30fc\u30b8\u3092\u69cb\u7bc9\u3057\u3001\u6b21\u306b<code>nginx</code>\u30a4\u30e1\u30fc\u30b8\u3092\u69cb\u7bc9\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001<code>nginx</code>\u30a4\u30e1\u30fc\u30b8\u306e\u540d\u524d\u306f<code>NGINX_IMAGE</code>\u3068\u3057\u3066\u6ce8\u5165\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/build-and-deploy-process/#4-kubernetesopenshift","title":"4. Kubernetes\u307e\u305f\u306fOpenShift\u306e\u30b5\u30fc\u30d3\u30b9\u3068\u30eb\u30fc\u30c8\u3092\u8a2d\u5b9a\u3059\u308b","text":"<p>\u6b21\u306b\u3001Lagoon\u306f\u3001\u30b5\u30fc\u30d3\u30b9\u30bf\u30a4\u30d7\u304b\u3089\u5b9a\u7fa9\u3055\u308c\u308b\u3059\u3079\u3066\u306e\u30b5\u30fc\u30d3\u30b9\u3068\u30eb\u30fc\u30c8\u3001\u304a\u3088\u3073<code>.lagoon.yml</code>\u3067\u5b9a\u7fa9\u3057\u305f\u8ffd\u52a0\u53ef\u80fd\u306a\u306e\u30ab\u30b9\u30bf\u30e0\u30eb\u30fc\u30c8\u3092Kubernetes\u307e\u305f\u306fOpenShift\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002</p> <p>\u3053\u306e\u30b9\u30c6\u30c3\u30d7\u3067\u306f\u3001<code>LAGOON_ROUTES</code>\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u3059\u3079\u3066\u306e\u30eb\u30fc\u30c8\u3092\u30ab\u30f3\u30de\u533a\u5207\u308a\u306eURL\u3068\u3057\u3066\u516c\u958b\u3057\u307e\u3059\u3002\u307e\u305f\u3001\u4ee5\u4e0b\u306e\u9806\u5e8f\u30671\u3064\u306e\u30eb\u30fc\u30c8\u3092\"main\"\u30eb\u30fc\u30c8\u3068\u3057\u3066\u5b9a\u7fa9\u3057\u307e\u3059:</p> <ol> <li>\u30ab\u30b9\u30bf\u30e0\u30eb\u30fc\u30c8\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u5834\u5408:<code>.lagoon.yml</code>\u3067\u6700\u521d\u306b\u5b9a\u7fa9\u3055\u308c\u305f\u30ab\u30b9\u30bf\u30e0\u30eb\u30fc\u30c8</li> <li><code>docker-compose.yml</code>\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u30b5\u30fc\u30d3\u30b9\u304b\u3089\u81ea\u52d5\u751f\u6210\u3055\u308c\u305f\u6700\u521d\u306e\u30eb\u30fc\u30c8</li> <li>\u306a\u3057</li> </ol> <p>\"main\"\u30eb\u30fc\u30c8\u306f<code>LAGOON_ROUTE</code>\u74b0\u5883\u5909\u6570\u3092\u4ecb\u3057\u3066\u6ce8\u5165\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/build-and-deploy-process/#5","title":"5. \u30a4\u30e1\u30fc\u30b8\u306e\u30d7\u30c3\u30b7\u30e5\u3068\u30bf\u30b0\u4ed8\u3051","text":"<p>\u3053\u308c\u3067\u3001\u4ee5\u524d\u306b\u30d3\u30eb\u30c9\u3057\u305fDocker\u30a4\u30e1\u30fc\u30b8\u3092\u5185\u90e8\u306eDocker\u30a4\u30e1\u30fc\u30b8\u30ec\u30b8\u30b9\u30c8\u30ea\u306b\u30d7\u30c3\u30b7\u30e5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p><code>docker-compose.yml</code>\u3067\u30d3\u30eb\u30c9\u3059\u308bDockerfile\u3092\u6307\u5b9a\u305b\u305a\u306b\u30a4\u30e1\u30fc\u30b8\u306e\u307f\u3092\u6307\u5b9a\u3057\u305f\u30b5\u30fc\u30d3\u30b9\u306b\u3064\u3044\u3066\u3082\u3001\u30bf\u30b0\u4ed8\u3051\u304c\u884c\u308f\u308c\u3001\u5185\u90e8Docker\u30a4\u30e1\u30fc\u30b8\u30ec\u30b8\u30b9\u30c8\u30ea\u306b\u8a8d\u8b58\u3055\u308c\u308b\u305f\u3081\u3001\u3053\u308c\u3089\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u30b3\u30f3\u30c6\u30ca\u3067\u4f7f\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/build-and-deploy-process/#6","title":"6. \u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8","text":"<p>Lagoon\u306f\u3001\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\uff08PVC\uff09\u3092\u5fc5\u8981\u3068\u3057\u3066\u8981\u6c42\u3057\u305f\u5404\u30b5\u30fc\u30d3\u30b9\u306e\u305f\u3081\u306b\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/build-and-deploy-process/#7-cron","title":"7. Cron\u30b8\u30e7\u30d6","text":"<p>MariaDB\u306e\u3088\u3046\u306bcron\u30b8\u30e7\u30d6\u3092\u8981\u6c42\u3059\u308b\u5404\u30b5\u30fc\u30d3\u30b9\u3001\u304a\u3088\u3073.lagoon.yml\u306b\u5b9a\u7fa9\u3055\u308c\u305f\u30ab\u30b9\u30bf\u30e0cron\u30b8\u30e7\u30d6\u3054\u3068\u306b\u3001Lagoon\u306fcron\u30b8\u30e7\u30d6\u74b0\u5883\u5909\u6570\u3092\u751f\u6210\u3057\u3001\u305d\u308c\u3089\u306f\u5f8c\u3067\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u306b\u6ce8\u5165\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/build-and-deploy-process/#8","title":"8. \u5b9a\u7fa9\u6e08\u307f\u306e\u30d7\u30ec\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u30bf\u30b9\u30af\u306e\u5b9f\u884c","text":"<p>\u6b21\u306bLagoon\u306f<code>.lagoon.yml</code>\u30d5\u30a1\u30a4\u30eb\u3067\u5b9a\u7fa9\u3055\u308c\u305f<code>pre-rollout</code>\u306e\u30bf\u30b9\u30af\u3092\u78ba\u8a8d\u3057\u3001\u305d\u308c\u3089\u3092\u5b9a\u7fa9\u3055\u308c\u305f\u30b5\u30fc\u30d3\u30b9\u3054\u3068\u306b1\u3064\u305a\u3064\u5b9f\u884c\u3057\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30bf\u30b9\u30af\u306f\u73fe\u5728\u5b9f\u884c\u4e2d\u306e\u30dd\u30c3\u30c9\u3067\u5b9f\u884c\u3055\u308c\u308b\u305f\u3081\u3001\u6700\u65b0\u306e\u30b3\u30df\u30c3\u30c8\u306b\u306e\u307f\u5b58\u5728\u3059\u308b\u6a5f\u80fd\u3084\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002\u307e\u305f\u3001\u6700\u521d\u306e\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u3067\u306f\u5b9f\u884c\u3055\u308c\u307e\u305b\u3093\u3002</p> <p>\u3053\u308c\u3089\u306e\u30bf\u30b9\u30af\u306e\u3044\u305a\u308c\u304b\u304c\u5931\u6557\u3057\u305f\u5834\u5408\u3001Lagoon\u306f\u76f4\u3061\u306b\u505c\u6b62\u3057\u901a\u77e5\u3057\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u306f\u9032\u884c\u3057\u307e\u305b\u3093\u3002</p>"},{"location":"ja/concepts-basics/build-and-deploy-process/#9-deploymentconfigsstatefulsetsdaemonsets","title":"9. DeploymentConfigs\u3001Statefulsets\u3001Daemonsets","text":"<p>\u3053\u308c\u304c\u304a\u305d\u3089\u304f\u6700\u3082\u91cd\u8981\u306a\u30b9\u30c6\u30c3\u30d7\u3067\u3059\u3002\u5b9a\u7fa9\u3055\u308c\u305f\u30b5\u30fc\u30d3\u30b9\u30bf\u30a4\u30d7\u306b\u57fa\u3065\u3044\u3066\u3001Lagoon\u306f[ Deployment\u3001Statefulset \u307e\u305f\u306f Daemonsets \u3092\u30b5\u30fc\u30d3\u30b9\u7528\u306b\u4f7f\u7528\u3057\u307e\u3059\u3002 (Deployment\u306fOpenShift\u306e DeploymentConfigs \u3068\u540c\u7b49\u3067\u3059)</p> <p>\u3053\u308c\u306b\u306f\u3001\u4ee5\u524d\u306b\u53ce\u96c6\u3057\u305f\u60c5\u5831\u3001cron\u30b8\u30e7\u30d6\u3001\u6c38\u7d9a\u7684\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u4f4d\u7f6e\u3001\u30d7\u30c3\u30b7\u30e5\u3055\u308c\u305f\u30a4\u30e1\u30fc\u30b8\u306a\u3069\u5168\u3066\u304c\u542b\u307e\u308c\u307e\u3059\u3002</p> <p>\u3053\u308c\u3089\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\u306f\u3001\u74b0\u5883\u5909\u6570\u304c\u5909\u66f4\u3055\u308c\u305f\u308a\u3001\u30a4\u30e1\u30fc\u30b8\u304c\u5909\u66f4\u3055\u308c\u305f\u308a\u3057\u305f\u5834\u5408\u306a\u3069\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066Kubernetes\u3084OpenShift\u304c\u30dd\u30c3\u30c9\u306e\u65b0\u3057\u3044\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u3092\u81ea\u52d5\u7684\u306b\u30c8\u30ea\u30ac\u30fc\u3059\u308b\u3053\u3068\u3082\u5f15\u304d\u8d77\u3053\u3057\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u5909\u66f4\u304c\u306a\u3044\u5834\u5408\u306f\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u306f\u884c\u308f\u308c\u307e\u305b\u3093\u3002\u3053\u308c\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306ePHP\u30b3\u30fc\u30c9\u306e\u307f\u3092\u66f4\u65b0\u3057\u305f\u5834\u5408\u3001Varnish\u3001Solr\u3001MariaDB\u3001Redis\u306a\u3069\u306e\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u304c\u3042\u306a\u305f\u306e\u30b3\u30fc\u30c9\u3092\u542b\u307e\u306a\u3044\u4ed6\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u3092\u610f\u5473\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u5168\u3066\u304c\u975e\u5e38\u306b\u9ad8\u901f\u306b\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/build-and-deploy-process/#10","title":"10. \u3059\u3079\u3066\u306e\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u304c\u5b8c\u4e86\u3059\u308b\u306e\u3092\u5f85\u3064","text":"<p>\u3053\u3053\u3067Lagoon\u306f\u5f85\u6a5f\u3057\u307e\u3059\uff01\u65b0\u3057\u3044\u30dd\u30c3\u30c9\u306e\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u304c\u3059\u3079\u3066\u5b8c\u4e86\u3057\u3001\u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\u304c\u6210\u529f\u3059\u308b\u306e\u3092\u5f85\u3061\u307e\u3059\u3002</p> <p>\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u3084\u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\u306e\u3044\u305a\u308c\u304b\u304c\u5931\u6557\u3057\u305f\u5834\u5408\u3001\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u306f\u3053\u3053\u3067\u505c\u6b62\u3055\u308c\u3001Slack\u306a\u3069\u306e\u5b9a\u7fa9\u6e08\u307f\u306e\u901a\u77e5\u30b7\u30b9\u30c6\u30e0\u3092\u901a\u3058\u3066\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u304c\u5931\u6557\u3057\u305f\u3053\u3068\u304c\u901a\u77e5\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/build-and-deploy-process/#11","title":"11. \u5b9a\u7fa9\u3055\u308c\u305f\u30dd\u30b9\u30c8\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u30bf\u30b9\u30af\u306e\u5b9f\u884c","text":"<p>\u6b21\u306b\u3001Lagoon\u306f<code>.lagoon.yml</code>\u30d5\u30a1\u30a4\u30eb\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066<code>post-rollout</code>\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u30bf\u30b9\u30af\u3092\u63a2\u3057\u3001\u5b9a\u7fa9\u3055\u308c\u305f\u30b5\u30fc\u30d3\u30b9\u3067\u305d\u308c\u3089\u3092\u4e00\u3064\u305a\u3064\u5b9f\u884c\u3057\u307e\u3059\u3002</p> <p>\u3053\u308c\u3089\u306e\u3044\u305a\u308c\u304b\u304c\u5931\u6557\u3057\u305f\u5834\u5408\u3001Lagoon\u306f\u76f4\u3061\u306b\u505c\u6b62\u3057\u3001\u3042\u306a\u305f\u306b\u901a\u77e5\u3057\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/build-and-deploy-process/#12","title":"12. \u6210\u529f","text":"<p>\u5168\u3066\u304c\u9806\u8abf\u306b\u9032\u307f\u3001\u4f55\u3082\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u306a\u304b\u3063\u305f\u5834\u5408\u3001Lagoon\u306f\u3053\u306e\u30d3\u30eb\u30c9\u3092\u6210\u529f\u3068\u30de\u30fc\u30af\u3057\u3001\u5b9a\u7fa9\u3055\u308c\u305f\u901a\u77e5\u3092\u4ecb\u3057\u3066\u3042\u306a\u305f\u306b\u901a\u77e5\u3057\u307e\u3059\u3002\u2705</p>"},{"location":"ja/concepts-basics/docker-compose-yml/","title":"docker-compose.yml","text":"<p><code>docker-compose.yml</code>\u30d5\u30a1\u30a4\u30eb\u306fLagoon\u304c\u4ee5\u4e0b\u306e\u76ee\u7684\u306e\u305f\u3081\u306b\u5229\u7528\u3057\u307e\u3059:</p> <ul> <li>\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3079\u304d\u30b5\u30fc\u30d3\u30b9/\u30b3\u30f3\u30c6\u30ca\u3092\u77e5\u308b</li> <li>\u30b3\u30f3\u30c6\u30ca\u306e\u30a4\u30e1\u30fc\u30b8\u304c\u3069\u306e\u3088\u3046\u306b\u30d3\u30eb\u30c9\u3055\u308c\u308b\u304b\u3092\u5b9a\u7fa9\u3059\u308b</li> <li>\u6c38\u7d9a\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u3088\u3046\u306a\u8ffd\u52a0\u306e\u8a2d\u5b9a\u3092\u5b9a\u7fa9\u3059\u308b</li> </ul> <p>Docker Compose(\u30c4\u30fc\u30eb)\u306fYAML\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u306e\u691c\u8a3c\u306b\u975e\u5e38\u306b\u53b3\u683c\u3067\u3042\u308b\u305f\u3081\u3001\u30b5\u30fc\u30d3\u30b9\u5b9a\u7fa9\u306e<code>labels</code>\u5185\u3067\u306e\u307f\u8a2d\u5b9a\u3092\u884c\u3046\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002</p> <p>\u8b66\u544a</p> <p>Lagoon\u306f<code>docker-compose.yml</code>\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u30e9\u30d9\u30eb\u3001\u30b5\u30fc\u30d3\u30b9\u540d\u3001\u30a4\u30e1\u30fc\u30b8\u540d\u3001\u30d3\u30eb\u30c9\u5b9a\u7fa9\u306e\u307f\u3092\u8aad\u307f\u53d6\u308a\u307e\u3059\u3002\u30dd\u30fc\u30c8\u3001\u74b0\u5883\u5909\u6570\u3001\u30dc\u30ea\u30e5\u30fc\u30e0\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3001\u30ea\u30f3\u30af\u3001\u30e6\u30fc\u30b6\u30fc\u306a\u3069\u306e\u5b9a\u7fa9\u306f\u7121\u8996\u3055\u308c\u307e\u3059\u3002</p> <p>\u3053\u308c\u306f\u610f\u56f3\u7684\u306a\u3082\u306e\u3067\u3001<code>docker-compose</code>\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u306a\u305f\u306e\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u306e\u8a2d\u5b9a\u3092\u5b9a\u7fa9\u3059\u308b\u305f\u3081\u306e\u3082\u306e\u3067\u3059\u3002Lagoon\u306f<code>lagoon.type</code>\u304b\u3089\u3042\u306a\u305f\u304c\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u3044\u308b\u30b5\u30fc\u30d3\u30b9\u306e\u30bf\u30a4\u30d7\u3092\u5b66\u3073\u3001\u305d\u306e\u30b5\u30fc\u30d3\u30b9\u304c\u5fc5\u8981\u3068\u3059\u308b\u30dd\u30fc\u30c8\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3001\u305d\u306e\u4ed6\u306e\u8ffd\u52a0\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u77e5\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p>\u4ee5\u4e0b\u306b\u3001Drupal\u7528\u306e<code>docker-compose.yml</code>\u30d5\u30a1\u30a4\u30eb\u306e\u7c21\u5358\u306a\u4f8b\u3092\u793a\u3057\u307e\u3059:</p> docker-compose.yml<pre><code>version: '2.3'\nx-lagoon-project:\n# Lagoon\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d(\u3053\u308c\u3092\u7de8\u96c6\u3059\u308b\u969b\u306f`&amp;lagoon-project`\u3092\u6b8b\u3057\u3066\u304f\u3060\u3055\u3044)\n&amp;lagoon-project drupal-example\nx-volumes:\n&amp;default-volumes\n# Docker\u30b3\u30f3\u30c6\u30ca\u306b\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u30de\u30a6\u30f3\u30c8\u3057\u305f\u3044\u3059\u3079\u3066\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u5b9a\u7fa9\u3057\u307e\u3059\nvolumes:\n- .:/app:delegated\nx-environment:\n&amp;default-environment\nLAGOON_PROJECT: *lagoon-project\n# \u30ed\u30fc\u30ab\u30eb\u3067\u4f7f\u7528\u3059\u308b\u30eb\u30fc\u30c8\u3002pygmy\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u3053\u306e\u30eb\u30fc\u30c8\u306f *\u5fc5\u305a* .docker.amazee.io\u3067\u7d42\u308f\u308b\u3088\u3046\u306b\u3057\u3066\u304f\u3060\u3055\u3044\nLAGOON_ROUTE: http://drupal-example.docker.amazee.io\n# \u672c\u756a\u74b0\u5883\u3068\u540c\u69d8\u306e\u52d5\u4f5c\u3092\u3055\u305b\u305f\u3044\u5834\u5408\u306f\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u89e3\u9664\u3057\u3066\u304f\u3060\u3055\u3044\n#LAGOON_ENVIRONMENT_TYPE: production\n# Xdebug\u3092\u6709\u52b9\u306b\u3057\u3001`docker-compose up -d`\u3067\u518d\u8d77\u52d5\u3057\u305f\u3044\u5834\u5408\u306f\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u89e3\u9664\u3057\u3066\u304f\u3060\u3055\u3044\n#XDEBUG_ENABLE: \"true\"\nx-user:\n&amp;default-user\n# \u30b3\u30f3\u30c6\u30ca\u304c\u5b9f\u884c\u3055\u308c\u308b\u3079\u304d\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30e6\u30fc\u30b6\u30fc\u3002Linux\u4e0a\u3067ID `1000`\u4ee5\u5916\u306e\u30e6\u30fc\u30b6\u30fc\u3067\u5b9f\u884c\u3059\u308b\u5834\u5408\u306f\u3053\u308c\u3092\u5909\u66f4\u3057\u307e\u3059\nuser: '1000'\nservices:\nnginx:\nbuild:\ncontext: .\ndockerfile: nginx.dockerfile\nlabels:\nlagoon.type: nginx-php-persistent # (1)\nlagoon.persistent: /app/web/sites/default/files/\nphp:\nbuild:\ncontext: .\ndockerfile: php.dockerfile\nlabels:\nlagoon.type: nginx-php-persistent # (2)\nlagoon.name: nginx\nlagoon.persistent: /app/web/sites/default/files/\nmariadb:\nimage: uselagoon/mariadb-10.11-drupal\nlabels:\nlagoon.type: mariadb\n</code></pre> <ol> <li>\u3053\u3053\u3067\u30de\u30eb\u30c1\u30b3\u30f3\u30c6\u30ca\u30dd\u30c3\u30c9\u306b\u6ce8\u76ee\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u3053\u3053\u3067\u30de\u30eb\u30c1\u30b3\u30f3\u30c6\u30ca\u30dd\u30c3\u30c9\u306b\u6ce8\u76ee\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ol>"},{"location":"ja/concepts-basics/docker-compose-yml/#basic-settings","title":"\u57fa\u672c\u8a2d\u5b9a","text":"<p><code>x-lagoon-project</code>:</p> <p>\u3053\u308c\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30de\u30b7\u30f3\u540d\u3067\u3001\u3053\u3053\u3067\u5b9a\u7fa9\u3057\u307e\u3059\u3002\"drupal-example\"\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002</p> <p><code>x-volumes</code>:</p> <p>\u3053\u308c\u306fLagoon\u306b\u30b3\u30f3\u30c6\u30ca\u306b\u30de\u30a6\u30f3\u30c8\u3059\u308b\u3082\u306e\u3092\u6307\u793a\u3057\u307e\u3059\u3002\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f<code>/app</code>\u306b\u5b58\u5728\u3057\u307e\u3059\u304c\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u3053\u308c\u3092\u8ffd\u52a0\u307e\u305f\u306f\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p><code>x-environment</code>:</p> <ol> <li>\u3053\u3053\u3067\u30ed\u30fc\u30ab\u30eb\u958b\u767aURL\u3092\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002pygmy\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u3001<code>.docker.amazee.io</code>\u3067\u7d42\u308f\u3089\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002</li> <li>\u5b8c\u5168\u306b\u672c\u756a\u74b0\u5883\u306b\u4f3c\u305b\u305f\u3044\u5834\u5408\u306f\u3001<code>LAGOON_ENVIRONMENT_TYPE: production</code> \u306e\u30b3\u30e1\u30f3\u30c8\u3092\u5916\u3057\u307e\u3059\u3002</li> <li>Xdebug\u3092\u6709\u52b9\u306b\u3057\u305f\u3044\u5834\u5408\u306f\u3001<code>DEBUG_ENABLE: \"true\"</code> \u306e\u30b3\u30e1\u30f3\u30c8\u3092\u5916\u3057\u307e\u3059\u3002</li> </ol> <p><code>x-user</code>:</p> <p>Linux\u3092\u4f7f\u7528\u3057\u3066\u3044\u3066\u3001<code>1000</code>\u4ee5\u5916\u306e\u30e6\u30fc\u30b6\u30fc\u3067\u5b9f\u884c\u3057\u305f\u3044\u5834\u5408\u3092\u9664\u304d\u3001\u3053\u308c\u3092\u5909\u66f4\u3059\u308b\u5fc5\u8981\u306f\u307b\u3068\u3093\u3069\u3042\u308a\u307e\u305b\u3093\u3002</p>"},{"location":"ja/concepts-basics/docker-compose-yml/#services","title":"<code>services</code>","text":"<p>\u3053\u3053\u3067\u30c7\u30d7\u30ed\u30a4\u3057\u305f\u3044\u3059\u3079\u3066\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002 \u6b8b\u5ff5\u306a\u304c\u3089\u3001 Docker Compose\u306f\u305d\u308c\u3089\u3092\u30b5\u30fc\u30d3\u30b9\u3068\u547c\u3073\u307e\u3059\u304c\u3001\u5b9f\u969b\u306b\u306f\u30b3\u30f3\u30c6\u30ca\u3067\u3059\u3002\u3053\u308c\u304b\u3089\u306f\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u5168\u4f53\u3067\u30b5\u30fc\u30d3\u30b9\u3068\u547c\u3076\u3053\u3068\u306b\u3057\u307e\u3059\u3002</p> <p>\u305d\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u540d\u524d(\u4e0a\u8a18\u306e\u4f8b\u3067\u306f <code>nginx</code>\u3001<code>php</code>\u3001<code>mariadb</code>)\u306f\u3001Lagoon\u306b\u3088\u3063\u3066\u751f\u6210\u3055\u308c\u308bKubernetes\u306e\u30dd\u30c3\u30c9\u306e\u540d\u524d(\u307e\u305f\u5225\u306e\u7528\u8a9e\u3068\u3057\u3066\u30b5\u30fc\u30d3\u30b9\u3068\u547c\u3073\u307e\u3059)\u3068\u3057\u3066\u4f7f\u7528\u3055\u308c\u3001\u3055\u3089\u306b\u5b9a\u7fa9\u3055\u308c\u305f<code>lagoon.type</code>\u306b\u57fa\u3065\u3044\u3066\u4f5c\u6210\u3055\u308c\u308bKubernetes\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u540d\u524d\u3068\u3057\u3066\u3082\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u306b\u306f\u3001\u30b5\u30fc\u30d3\u30b9\u3001\u30eb\u30fc\u30c8\u3001\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u306a\u3069\u304c\u542b\u307e\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>\u30b5\u30fc\u30d3\u30b9\u540d\u306fRFC 1035\u306eDNS\u30e9\u30d9\u30eb\u6a19\u6e96\u306b\u6e96\u62e0\u3057\u3066\u3044\u308b\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u30b5\u30fc\u30d3\u30b9\u540d\u306f\u4ee5\u4e0b\u306e\u8981\u4ef6\u3092\u6e80\u305f\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059:</p> <ul> <li>\u6700\u592763\u6587\u5b57\u3092\u542b\u3080</li> <li>\u5c0f\u6587\u5b57\u306e\u82f1\u6570\u5b57\u307e\u305f\u306f'-'\u306e\u307f\u3092\u542b\u3080</li> <li>\u82f1\u5b57\u3067\u59cb\u307e\u308b</li> <li>\u82f1\u6570\u5b57\u3067\u7d42\u308f\u308b</li> </ul> <p>\u8b66\u544a</p> <p>\u4e00\u5ea6\u30b5\u30fc\u30d3\u30b9\u306e\u540d\u524d\u3092\u8a2d\u5b9a\u3057\u305f\u3089\u3001\u4fee\u6b63\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002\u4fee\u6b63\u3059\u308b\u3068\u3001\u30b3\u30f3\u30c6\u30ca\u5185\u3067\u69d8\u3005\u306a\u554f\u984c\u304c\u767a\u751f\u3057\u3001\u4e0d\u6574\u5408\u304c\u767a\u751f\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/docker-compose-yml/#docker-images","title":"Docker\u30a4\u30e1\u30fc\u30b8","text":""},{"location":"ja/concepts-basics/docker-compose-yml/#build","title":"<code>build</code>","text":"<p>\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u3054\u3068\u306bLagoon\u304c\u3042\u306a\u305f\u306e\u30b5\u30fc\u30d3\u30b9\u306eDockerfile\u3092\u30d3\u30eb\u30c9\u3057\u3066\u307b\u3057\u3044\u5834\u5408\u3001\u3053\u3053\u3067\u5b9a\u7fa9\u3067\u304d\u307e\u3059:</p> <p><code>build</code></p> <ul> <li><code>context</code><ul> <li><code>docker build</code> \u30b3\u30de\u30f3\u30c9\u306b\u6e21\u3059\u3079\u304d\u30d3\u30eb\u30c9\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30d1\u30b9</li> </ul> </li> <li><code>dockerfile:</code><ul> <li>\u30d3\u30eb\u30c9\u3059\u308b\u3079\u304dDockerfile\u306e\u5834\u6240\u3068\u540d\u524d</li> </ul> </li> </ul> <p>\u8b66\u544a</p> <p>Lagoon\u306f\u77ed\u7e2e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u305b\u3093\u3002<code>build: &lt;Dockerfile&gt;</code>\u306e\u5b9a\u7fa9\u304c\u898b\u3064\u304b\u3063\u305f\u5834\u5408\u3001\u51e6\u7406\u306f\u5931\u6557\u3057\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/docker-compose-yml/#image","title":"<code>image</code>","text":"<p>Dockerfile\u3092\u30d3\u30eb\u30c9\u3059\u308b\u5fc5\u8981\u304c\u306a\u304f\u3001\u65e2\u5b58\u306eDockerfile\u3092\u4f7f\u7528\u3057\u305f\u3044\u5834\u5408\u306f\u3001<code>image</code>\u3067\u5b9a\u7fa9\u3057\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/docker-compose-yml/#types","title":"\u30bf\u30a4\u30d7","text":"<p>Lagoon\u306f\u3001Kubernetes\u3084OpenShift\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u6b63\u3057\u304f\u8a2d\u5b9a\u3059\u308b\u305f\u3081\u306b\u3001\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u306e\u30bf\u30a4\u30d7\u3092\u77e5\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>\u3053\u308c\u306f<code>lagoon.type</code>\u30e9\u30d9\u30eb\u3092\u901a\u3058\u3066\u884c\u308f\u308c\u307e\u3059\u3002\u9078\u629e\u3067\u304d\u308b\u30bf\u30a4\u30d7\u306f\u591a\u6570\u3042\u308a\u307e\u3059\u3002\u3059\u3079\u3066\u306e\u30bf\u30a4\u30d7\u3068\u8ffd\u52a0\u8a2d\u5b9a\u306e\u53ef\u80fd\u6027\u3092\u898b\u308b\u306b\u306f\u3001\u30b5\u30fc\u30d3\u30b9\u30bf\u30a4\u30d7\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/concepts-basics/docker-compose-yml/#skipignore-containers","title":"\u30b3\u30f3\u30c6\u30ca\u306e\u30b9\u30ad\u30c3\u30d7/\u7121\u8996","text":"<p>\u305f\u3068\u3048\u3070\u3001\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u6642\u306b\u306e\u307f\u30b3\u30f3\u30c6\u30ca\u304c\u5fc5\u8981\u306a\u5834\u5408\u306a\u3069\u3001Lagoon\u306b\u30b5\u30fc\u30d3\u30b9\u3092\u5b8c\u5168\u306b\u7121\u8996\u3055\u305b\u305f\u3044\u5834\u5408\u306f\u3001\u305d\u306e\u30bf\u30a4\u30d7\u306b<code>none</code>\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/docker-compose-yml/#persistent-storage","title":"\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8","text":"<p>\u4e00\u90e8\u306e\u30b3\u30f3\u30c6\u30ca\u306b\u306f\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u304c\u5fc5\u8981\u3067\u3059\u3002Lagoon\u3067\u306f\u3001\u5404\u30b3\u30f3\u30c6\u30ca\u304c\u6700\u59271\u3064\u306e\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30b3\u30f3\u30c6\u30ca\u306b\u63a5\u7d9a\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\u30b3\u30f3\u30c6\u30ca\u306b\u81ea\u8eab\u306e\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u8981\u6c42\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d(\u305d\u308c\u3092\u4ed6\u306e\u30b3\u30f3\u30c6\u30ca\u306b\u30de\u30a6\u30f3\u30c8\u3055\u305b\u308b\u3053\u3068\u3082\u53ef\u80fd)\u3001\u307e\u305f\u3001\u30b3\u30f3\u30c6\u30ca\u306b\u4ed6\u306e\u30b3\u30f3\u30c6\u30ca\u304c\u4f5c\u6210\u3057\u305f\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\u3088\u3046\u6307\u793a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002</p> <p>\u591a\u304f\u306e\u5834\u5408\u3001Lagoon\u306f\u305d\u306e\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u304c\u3069\u3053\u306b\u914d\u7f6e\u3059\u3079\u304d\u304b\u3092\u77e5\u3063\u3066\u3044\u307e\u3059\u3002\u305f\u3068\u3048\u3070\u3001 \u4f8b\u3048\u3070\u3001MariaDB\u30b3\u30f3\u30c6\u30ca\u306e\u5834\u5408\u3001Lagoon\u306f\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092<code>/var/lib/mysql</code>\u306b\u914d\u7f6e\u3059\u3079\u304d\u3068\u77e5\u3063\u3066\u304a\u308a\u3001\u305d\u308c\u3092\u5b9a\u7fa9\u3059\u308b\u305f\u3081\u306e\u8ffd\u52a0\u306e\u8a2d\u5b9a\u306a\u3057\u306b\u81ea\u52d5\u7684\u306b\u305d\u3053\u306b\u914d\u7f6e\u3057\u307e\u3059\u3002\u305f\u3060\u3057\u3001\u4e00\u90e8\u306e\u72b6\u6cc1\u3067\u306f\u3001Lagoon\u306f\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u3069\u3053\u306b\u914d\u7f6e\u3059\u3079\u304d\u304b\u3092\u77e5\u308b\u305f\u3081\u306b\u3042\u306a\u305f\u306e\u52a9\u3051\u304c\u5fc5\u8981\u3067\u3059\u3002</p> <ul> <li><code>lagoon.persistent</code> - \u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u30de\u30a6\u30f3\u30c8\u3059\u3079\u304d\u7d76\u5bfe\u30d1\u30b9(\u4e0a\u8a18\u306e\u4f8b\u3067\u306f<code>/app/web/sites/default/files/</code>\u3092\u4f7f\u7528\u3057\u3066\u304a\u308a\u3001\u3053\u308c\u306fDrupal\u304c\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u671f\u5f85\u3059\u308b\u30d1\u30b9\u3067\u3059)\u3002</li> <li><code>lagoon.persistent.name</code> - Lagoon\u306b\u305d\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u65b0\u3057\u3044\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u4f5c\u6210\u3057\u306a\u3044\u3088\u3046\u306b\u6307\u793a\u3057\u3001\u4ee3\u308f\u308a\u306b\u4ed6\u306e\u30b5\u30fc\u30d3\u30b9\u3067\u5b9a\u7fa9\u6e08\u307f\u306e\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u306b\u30de\u30a6\u30f3\u30c8\u3057\u307e\u3059\u3002</li> <li><code>lagoon.persistent.size</code> - \u5fc5\u8981\u306a\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u30b5\u30a4\u30ba(Lagoon\u306f\u901a\u5e38\u3001\u6700\u5c0f5G\u306e\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002\u3082\u3057\u3082\u3063\u3068\u5fc5\u8981\u306a\u3089\u3001\u3053\u3053\u3067\u5b9a\u7fa9\u3057\u3066\u304f\u3060\u3055\u3044)\u3002</li> <li><code>lagoon.persistent.class</code> - \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306fLagoon\u306f\u81ea\u52d5\u7684\u306b\u9069\u5207\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u30af\u30e9\u30b9(MySQL\u306eSSD\u3001Nginx\u306e\u5927\u91cf\u30b9\u30c8\u30ec\u30fc\u30b8\u306a\u3069)\u3092\u30b5\u30fc\u30d3\u30b9\u306b\u5272\u308a\u5f53\u3066\u307e\u3059\u3002\u3053\u308c\u3092\u4e0a\u66f8\u304d\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u3053\u3053\u3067\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306f\u3001Lagoon\u304c\u52d5\u4f5c\u3059\u308bKubernetes/OpenShift\u306e\u30a4\u30f3\u30d5\u30e9\u57fa\u76e4\u306b\u5927\u304d\u304f\u4f9d\u5b58\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3064\u3044\u3066\u306fLagoon\u306e\u7ba1\u7406\u8005\u306b\u554f\u3044\u5408\u308f\u305b\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul>"},{"location":"ja/concepts-basics/docker-compose-yml/#auto-generated-routes","title":"\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u30eb\u30fc\u30c8","text":"<p>docker-compose.yml\u30d5\u30a1\u30a4\u30eb\u306f\u3001\u30b5\u30fc\u30d3\u30b9\u3054\u3068\u306b\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u30eb\u30fc\u30c8\u3092\u6709\u52b9\u307e\u305f\u306f\u7121\u52b9\u306b\u3059\u308b\u3053\u3068\u3082\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002</p> <ul> <li><code>lagoon.autogeneratedroute: false</code> \u30e9\u30d9\u30eb\u3092\u4f7f\u7528\u3059\u308b\u3068\u3001\u305d\u306e\u30b5\u30fc\u30d3\u30b9\u306b\u5bfe\u3057\u3066\u81ea\u52d5\u7684\u306b\u751f\u6210\u3055\u308c\u308b\u30eb\u30fc\u30c8\u304c\u505c\u6b62\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u30eb\u30fc\u30c8\u3092\u6301\u3064\u3059\u3079\u3066\u306e\u30b5\u30fc\u30d3\u30b9\u306b\u9069\u7528\u3067\u304d\u307e\u3059\u304c\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30b5\u30fc\u30d3\u30b9\u306a\u3069\u306e\u8ffd\u52a0\u306e\u5185\u90e8\u5411\u3051\u30b5\u30fc\u30d3\u30b9\u3092\u4f5c\u6210\u3059\u308b\u969b\u306b<code>basic</code>\u304a\u3088\u3073<code>basic-persistent</code>\u30b5\u30fc\u30d3\u30b9\u30bf\u30a4\u30d7\u3067\u7279\u306b\u4fbf\u5229\u3067\u3059\u3002\u9006\u3082\u307e\u305f\u540c\u69d8\u306b\u3001.lagoon.yml\u30d5\u30a1\u30a4\u30eb\u304c\u305d\u308c\u3089\u3092\u7121\u52b9\u306b\u3059\u308b\u3068\u304d\u306b\u3001\u30b5\u30fc\u30d3\u30b9\u306b\u5bfe\u3057\u3066\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u30eb\u30fc\u30c8\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002</li> </ul>"},{"location":"ja/concepts-basics/docker-compose-yml/#multi-container-pods","title":"\u30de\u30eb\u30c1\u30b3\u30f3\u30c6\u30ca\u30fc\u30dd\u30c3\u30c9","text":"<p>Kubernetes\u3068OpenShift\u306f\u5358\u7d14\u306a\u30b3\u30f3\u30c6\u30ca\u30fc\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u305b\u3093\u3002\u4ee3\u308f\u308a\u306b\u3001\u305d\u308c\u305e\u308c\u304c1\u3064\u4ee5\u4e0a\u306e\u30b3\u30f3\u30c6\u30ca\u30fc\u3092\u6301\u3064\u30dd\u30c3\u30c9\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002\u901a\u5e38\u3001Lagoon\u306f\u5b9a\u7fa9\u3055\u308c\u305f<code>docker-compose</code>\u30b5\u30fc\u30d3\u30b9\u3054\u3068\u306b\u30b3\u30f3\u30c6\u30ca\u30fc\u304c\u5185\u90e8\u306b\u3042\u308b\u5358\u4e00\u306e\u30dd\u30c3\u30c9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u3042\u308b\u30b1\u30fc\u30b9\u3067\u306f\u3001\u3053\u308c\u3089\u306e\u30b3\u30f3\u30c6\u30ca\u30fc\u304c\u4e92\u3044\u306b\u975e\u5e38\u306b\u4f9d\u5b58\u3057\u3066\u3044\u3066\u3001\u5e38\u306b\u4e00\u7dd2\u306b\u3044\u308b\u3079\u304d\u3067\u3042\u308b\u305f\u3081\u3001\u5358\u4e00\u306e\u30dd\u30c3\u30c9\u5185\u306b2\u3064\u306e\u30b3\u30f3\u30c6\u30ca\u30fc\u3092\u914d\u7f6e\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u306e\u3088\u3046\u306a\u72b6\u6cc1\u306e\u4e00\u4f8b\u306f\u3001PHP\u30b3\u30f3\u30c6\u30ca\u3068NGINX\u30b3\u30f3\u30c6\u30ca\u304cDrupal\u306e\u3088\u3046\u306a\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306ePHP\u30b3\u30fc\u30c9\u3092\u542b\u3080\u5834\u5408\u3067\u3059\u3002</p> <p>\u3053\u308c\u3089\u306e\u30b1\u30fc\u30b9\u3067\u306f\u3001\u3069\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u4e00\u7dd2\u306b\u3059\u3079\u304d\u304b\u3092Lagoon\u306b\u4f1d\u3048\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3001\u6b21\u306e\u3088\u3046\u306b\u884c\u3044\u307e\u3059(\u79c1\u305f\u3061\u304c\u30b3\u30f3\u30c6\u30ca\u3092<code>docker-compose</code>\u306e\u305f\u3081\u306b<code>services</code>\u3068\u547c\u3093\u3067\u3044\u308b\u3053\u3068\u3092\u899a\u3048\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044):</p> <ol> <li>\u4e21\u65b9\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u3001\u4e8c\u3064\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u671f\u5f85\u3059\u308b<code>lagoon.type</code>\u3067\u5b9a\u7fa9\u3057\u307e\u3059(\u3053\u306e\u4f8b\u3067\u306f\u3001<code>nginx</code>\u3068<code>php</code>\u30b5\u30fc\u30d3\u30b9\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b<code>nginx-php-persistent</code>\u3067\u3059)\u3002</li> <li>\u7b2c2\u756a\u76ee\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u7b2c1\u756a\u76ee\u306e\u30b5\u30fc\u30d3\u30b9\u306b\u30ea\u30f3\u30af\u3057\u3001\u7b2c2\u756a\u76ee\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u30e9\u30d9\u30eb<code>lagoon.name</code>\u306b\u3066\u7b2c1\u756a\u76ee\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u6307\u5b9a\u3057\u307e\u3059(\u3053\u306e\u4f8b\u3067\u306f\u3001<code>lagoon.name: nginx</code>\u3068\u6307\u5b9a\u3057\u307e\u3059)\u3002</li> </ol> <p>\u3053\u308c\u306b\u3088\u308a\u3001Lagoon\u306f<code>nginx</code>\u3068<code>php</code>\u30b3\u30f3\u30c6\u30ca\u3092<code>nginx</code>\u3068\u547c\u3070\u308c\u308b1\u3064\u306e\u30dd\u30c3\u30c9\u306b\u7d44\u307f\u5408\u308f\u305b\u308b\u3053\u3068\u3092\u8a8d\u8b58\u3057\u307e\u3059\u3002</p> <p>\u8b66\u544a</p> <p>\u4e00\u5ea6\u30b5\u30fc\u30d3\u30b9\u306e<code>lagooon.name</code>\u3092\u8a2d\u5b9a\u3057\u305f\u3089\u3001\u4fee\u6b63\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002\u3053\u308c\u306f\u3042\u306a\u305f\u306e\u30b3\u30f3\u30c6\u30ca\u3067\u6df7\u4e71\u3092\u5f15\u304d\u8d77\u3053\u3057\u3001\u4e0d\u6574\u5408\u3092\u5f15\u304d\u8d77\u3053\u3059\u539f\u56e0\u3068\u306a\u308a\u307e\u3059\u3002</p> <p>Lagoon\u306f\u30012\u3064\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u3046\u3061\u3069\u308c\u304c\u5b9f\u969b\u306e\u500b\u3005\u306e\u30b5\u30fc\u30d3\u30b9\u30bf\u30a4\u30d7\uff08\u3053\u306e\u5834\u5408\u3001<code>nginx</code>\u304a\u3088\u3073<code>php</code>\uff09\u3067\u3042\u308b\u304b\u3092\u7406\u89e3\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3092\u884c\u3046\u305f\u3081\u306b\u3001\u30bf\u30a4\u30d7\u306b\u3088\u3063\u3066\u4e0e\u3048\u3089\u308c\u305f\u540d\u524d\u3068\u540c\u3058\u540d\u524d\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u691c\u7d22\u3057\u307e\u3059\u3002\u3057\u305f\u304c\u3063\u3066\u3001<code>nginx-php-persistent</code>\u306f<code>docker-compose.yml</code>\u5185\u306b<code>nginx</code>\u3068\u3044\u3046\u540d\u524d\u306e\u30b5\u30fc\u30d3\u30b9\u3068<code>php</code>\u3068\u3044\u3046\u540d\u524d\u306e\u30b5\u30fc\u30d3\u30b9\u304c1\u3064\u305a\u3064\u5b58\u5728\u3059\u308b\u3053\u3068\u3092\u671f\u5f85\u3057\u307e\u3059\u3002\u4f55\u3089\u304b\u306e\u7406\u7531\u3067\u30b5\u30fc\u30d3\u30b9\u306b\u7570\u306a\u308b\u540d\u524d\u3092\u4f7f\u7528\u3057\u305f\u3044\u5834\u5408\u3001\u307e\u305f\u306f<code>nginx-php-persistent</code>\u30bf\u30a4\u30d7\u306e\u30dd\u30c3\u30c9\u3092\u8907\u6570\u5fc5\u8981\u3068\u3059\u308b\u5834\u5408\u306b\u306f\u3001\u5b9f\u969b\u306e\u30b5\u30fc\u30d3\u30b9\u30bf\u30a4\u30d7\u3092\u5b9a\u7fa9\u3059\u308b\u305f\u3081\u306b<code>lagoon.deployment.servicetype</code>\u3068\u3044\u3046\u8ffd\u52a0\u306e\u30e9\u30d9\u30eb\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p>\u4f8b:</p> docker-compose.yml<pre><code>nginx:\nbuild:\ncontext: .\ndockerfile: nginx.dockerfile\nlabels:\nlagoon.type: nginx-php-persistent\nlagoon.persistent: /app/web/sites/default/files/\nlagoon.name: nginx # \u3053\u308c\u304c\u306a\u3044\u5834\u5408\u3001Lagoon\u306f\u30b3\u30f3\u30c6\u30ca\u540d\u3001\u3064\u307e\u308a\u3053\u306e\u5834\u5408\u306fnginx\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\nlagoon.deployment.servicetype: nginx\nphp:\nbuild:\ncontext: .\ndockerfile: php.dockerfile\nlabels:\nlagoon.type: nginx-php-persistent\nlagoon.persistent: /app/web/sites/default/files/\nlagoon.name: nginx # \u3053\u306e\u30b5\u30fc\u30d3\u30b9\u3092Lagoon\u306eNGINX\u30dd\u30c3\u30c9\u306e\u4e00\u90e8\u306b\u3057\u307e\u3059\u3002\nlagoon.deployment.servicetype: php\n</code></pre> <p>\u4e0a\u8a18\u306e\u4f8b\u3067\u306f\u3001\u30b5\u30fc\u30d3\u30b9\u540d\u306f<code>nginx</code>\u3068<code>php</code>\u3067\u3059(\u597d\u304d\u306a\u540d\u524d\u3092\u3064\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059)\u3002<code>lagoon.name</code>\u306fLagoon\u306b\u3069\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u4e00\u7dd2\u306e\u30dd\u30c3\u30c9\u306b\u3059\u3079\u304d\u3092\u4f1d\u3048\u307e\u3059 - \u540c\u3058\u540d\u524d\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u3059\u3079\u3066\u4e00\u7dd2\u306e\u30dd\u30c3\u30c9\u3067\u52d5\u4f5c\u3057\u307e\u3059\u3002</p> <p>Lagoon\u306f\u3069\u306e\u30b5\u30fc\u30d3\u30b9\u304c<code>nginx</code>\u3001<code>php</code>\u3067\u3042\u308b\u304b\u3092\u8a8d\u8b58\u3059\u308b\u305f\u3081\u306b\u3001<code>lagoon.deployment.servicetype: nginx</code>\u304a\u3088\u3073<code>lagoon.deployment.servicetype: php</code>\u3068\u5b9a\u7fa9\u3057\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/docker-compose-yml/#helm-templates-kubernetes-only","title":"Helm\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8 (Kubernetes\u306e\u307f)","text":"<p>Lagoon\u306fKubernetes\u3067\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u4f5c\u6210\u306bHelm\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u3053\u308c\u3092\u884c\u3046\u305f\u3081\u306b\u3001\u4e00\u9023\u306e\u30c1\u30e3\u30fc\u30c8\u304c<code>build-deploy-tool</code>\u30a4\u30e1\u30fc\u30b8\u306b\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/docker-compose-yml/#custom-rollout-monitor-types","title":"\u30ab\u30b9\u30bf\u30e0\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u30e2\u30cb\u30bf\u30fc\u30bf\u30a4\u30d7","text":"<p>\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001Lagoon\u306f\u30ab\u30b9\u30bf\u30e0\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u304cKubernetes\u307e\u305f\u306fOpenshift\u5185\u306e<code>DeploymentConfig</code>\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4ecb\u3057\u3066\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u3055\u308c\u308b\u3053\u3068\u3092\u671f\u5f85\u3057\u3066\u3044\u307e\u3059\u3002\u305d\u308c\u306b\u57fa\u3065\u3044\u3066\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u3092\u76e3\u8996\u3057\u307e\u3059\u3002\u5834\u5408\u306b\u3088\u3063\u3066\u306f\u3001\u30ab\u30b9\u30bf\u30e0\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u30b5\u30fc\u30d3\u30b9\u304c\u7570\u306a\u308b\u76e3\u8996\u65b9\u6cd5\u3092\u5fc5\u8981\u3068\u3059\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u306f<code>lagoon.rollout</code>\u3092\u901a\u3058\u3066\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059:</p> <ul> <li><code>deploymentconfig</code> - \u3053\u308c\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u3059\u3002\u30b5\u30fc\u30d3\u30b9\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u4e2d\u306e<code>DeploymentConfig</code>\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u671f\u5f85\u3057\u307e\u3059\u3002 </li> <li><code>daemonset</code> - \u30b5\u30fc\u30d3\u30b9\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u5185\u306e<code>Daemonset</code>\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u671f\u5f85\u3057\u307e\u3059\u3002</li> <li><code>false</code> - \u3069\u306e\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u3082\u76e3\u8996\u305b\u305a\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304c\u9069\u7528\u3055\u308c\u3001\u30a8\u30e9\u30fc\u3092\u6295\u3052\u306a\u3044\u5834\u5408\u306b\u306e\u307f\u6e80\u8db3\u3057\u307e\u3059\u3002</li> </ul> <p>\u307e\u305f\u3001\u7279\u5b9a\u306e\u74b0\u5883\u306e\u307f\u306b\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u3092\u4e0a\u66f8\u304d\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306f<code>.lagoon.yml</code>\u3067\u884c\u3044\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/docker-compose-yml/#docker-compose-v2-compatibility","title":"Docker Compose v2\u4e92\u63db\u6027","text":"<p>\u30d0\u30b0</p> <p>\u30ed\u30fc\u30ab\u30eb\u3067Docker Compose V2\u306e\u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u3068\u3001\u4e00\u90e8\u306e\u65e2\u77e5\u306e\u554f\u984c\u304c\u767a\u751f\u3059\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059 - \u3053\u308c\u3089\u306e\u554f\u984c\u306f\u5f8c\u306e\u30ea\u30ea\u30fc\u30b9(v2.17.3\u4ee5\u964d)\u3067\u89e3\u6c7a\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p>\u3053\u308c\u3089\u306e\u30a8\u30e9\u30fc\u306e\u89e3\u6c7a\u7b56\u306f\u901a\u5e38\u3001\u4f7f\u7528\u3057\u3066\u3044\u308bDocker Compose\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u66f4\u65b0\u3059\u308b\u304b(\u307e\u305f\u306f\u65b0\u3057\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b)\u3001\u3042\u308b\u3044\u306f\u4f7f\u7528\u3057\u3066\u3044\u308bDocker Desktop\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3059\u308b\u3053\u3068\u3067\u3059\u3002 Docker Desktop\u306e\u30ea\u30ea\u30fc\u30b9\u30ce\u30fc\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u8a73\u3057\u304f\u306f</p> depends_on\u306e\u30a8\u30e9\u30fc\u3092\u793a\u3059Docker Compose\u51fa\u529b<pre><code>Failed to solve with frontend dockerfile.v0: failed to create LLB definition: pull access denied, repository does not exist or may require authorization\n\n\u307e\u305f\u306f\n\nFailed to solve: drupal9-base-cli: pull access denied, repository does not exist or may require authorization: server message: insufficient_scope: authorization failed`\n</code></pre> <ul> <li>\u3053\u308c\u3089\u306fDocker Compose v2.13.0\u3067\u89e3\u6c7a\u3055\u308c\u307e\u3059\u3002</li> <li>\u3053\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u3001\u30d3\u30eb\u30c9\u304c\u3001\u307e\u3060\u30d3\u30eb\u30c9\u3055\u308c\u3066\u3044\u306a\u3044Docker\u30a4\u30e1\u30fc\u30b8\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3088\u3046\u3068\u3057\u305f\u3053\u3068\u3092\u610f\u5473\u3057\u307e\u3059\u3002BuildKit\u306f\u4e26\u5217\u306b\u30d3\u30eb\u30c9\u3059\u308b\u305f\u3081\u3001\u3082\u3057\u3082\u3046\u4e00\u3064\u306eDocker\u30a4\u30e1\u30fc\u30b8\u3092\u7d99\u627f\u3059\u308b\u3082\u306e\u304c\u3042\u308b\u5834\u5408(Drupal\u306eCLI\u306e\u3088\u3046\u306b)\u306f\u3053\u306e\u4e8b\u8c61\u304c\u767a\u751f\u3057\u307e\u3059\u3002</li> <li>\u30de\u30eb\u30c1\u30b9\u30c6\u30fc\u30b8\u30d3\u30eb\u30c9\u3068\u3057\u3066\u518d\u8a2d\u5b9a\u3059\u308b\u305f\u3081\u306b\u3001\u30d3\u30eb\u30c9\u5185\u306etarget\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002</li> <li>\u3059\u3067\u306b\u65b0\u3057\u3044Docker Compose\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u3053\u306e\u30a8\u30e9\u30fc\u306f\u3001docker-container\u30d3\u30eb\u30c9\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092buildx\u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u306b\u3057\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002<code>docker buildx ls</code>\u304cdocker-container\u30d9\u30fc\u30b9\u306e\u3082\u306e\u3067\u306f\u306a\u304f\u3001docker builder\u3092\u30c7\u30d5\u30a9\u30eb\u30c8\u3068\u3057\u3066\u8868\u793a\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002Docker buildx\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u3053\u3061\u3089\u3067\u3059.</li> </ul> volumes_from\u30a8\u30e9\u30fc\u3092\u793a\u3059Docker Compose\u51fa\u529b<pre><code>no such service: container:amazeeio-ssh-agent\n</code></pre> <ul> <li>\u3053\u306e\u554f\u984c\u306fDocker Compose v2.17.3\u3067\u89e3\u6c7a\u3055\u308c\u3066\u3044\u307e\u3059\u3002</li> <li>\u3053\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u3001\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u30b3\u30f3\u30c6\u30ca\u3078\u306eSSH\u30a2\u30af\u30bb\u30b9\u3092\u63d0\u4f9b\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u304c\u3001\u3042\u306a\u305f\u306eDocker Compose\u30b9\u30bf\u30c3\u30af\u306e\u5916\u90e8\u3067\u5b9f\u884c\u3055\u308c\u3001\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\u3053\u3068\u3092\u610f\u5473\u3057\u307e\u3059\u3002</li> <li>\u3042\u306a\u305f\u306e\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u304b\u3089SSH\u30a2\u30af\u30bb\u30b9\u304c\u5fc5\u8981\u306a\u3044\u5834\u5408\u3001<code>docker-compose.yml</code>\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u3053\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3092\u524a\u9664\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002</li> </ul>"},{"location":"ja/concepts-basics/docker-compose-yml/#buildkit-and-lagoon","title":"BuildKit\u3068Lagoon","text":"<p>BuildKit\u306f\u3001\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u52b9\u7387\u7684\u3067\u8868\u73fe\u529b\u8c4a\u304b\u3067\u7e70\u308a\u8fd4\u3057\u5229\u7528\u53ef\u80fd\u306a\u65b9\u6cd5\u3067\u30d3\u30eb\u30c9\u6210\u679c\u7269\u306b\u5909\u63db\u3059\u308b\u305f\u3081\u306e\u30c4\u30fc\u30eb\u30ad\u30c3\u30c8\u3067\u3059\u3002</p> <p>Lagoon v2.11.0\u306e\u30ea\u30ea\u30fc\u30b9\u306b\u3088\u308a\u3001Lagoon\u306f\u3088\u308a\u9ad8\u5ea6\u306aBuildKit\u30d9\u30fc\u30b9\u306edocker-compose\u30d3\u30eb\u30c9\u3092\u30b5\u30dd\u30fc\u30c8\u3059\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u307e\u305f\u306f\u74b0\u5883\u3067BuildKit\u3092\u6709\u52b9\u306b\u3059\u308b\u306b\u306f\u3001Lagoon\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u307e\u305f\u306f\u74b0\u5883\u306b<code>DOCKER_BUILDKIT=1</code>\u3092\u30d3\u30eb\u30c9\u6642\u306e\u5909\u6570\u3068\u3057\u3066\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/concepts-basics/docker-compose-yml/#docker-compose-errors-in-lagoon-builds","title":"Lagoon\u30d3\u30eb\u30c9\u3067\u306eDocker Compose\u30a8\u30e9\u30fc","text":"<p>Docker Compose\u3067\u4e00\u822c\u7684\u306a\u30d3\u30eb\u30c9\u30a8\u30e9\u30fc\u306e\u89e3\u6c7a\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u3001Lagoon\u30d3\u30eb\u30c9\u30a8\u30e9\u30fc\u30da\u30fc\u30b8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/concepts-basics/docker-compose-yml/#common-docker-compose-issues","title":"\u3088\u304f\u3042\u308bDocker Compose\u306e\u554f\u984c","text":"<p>\u3053\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u306f\u3001\u4e00\u822c\u7684\u306aDocker Compose\u306e\u30a8\u30e9\u30fc\u3068\u305d\u306e\u5bfe\u51e6\u65b9\u6cd5\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\u3053\u308c\u3089\u306f\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u3067\u767a\u751f\u3059\u308b\u304b\u3001\u307e\u305f\u306fLagoon\u30d3\u30eb\u30c9\u30a8\u30e9\u30fc\u3068\u8b66\u544a\u3068\u3057\u3066\u767a\u751f\u3059\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002</p>"},{"location":"ja/concepts-basics/docker-compose-yml/#dual-mapping-keys","title":"\u4e8c\u91cd\u30de\u30c3\u30d4\u30f3\u30b0\u30ad\u30fc","text":"\u30de\u30c3\u30d4\u30f3\u30b0\u30ad\u30fc\u306e\u30a8\u30e9\u30fc\u3092\u793a\u3059Docker Compose\u306e\u51fa\u529b<pre><code>ERR: yaml: unmarshal errors: line 22: mapping key \"&lt;&lt;\" already defined at line 21\n</code></pre> <p>Lagoon\u306e\u521d\u671f\u30ea\u30ea\u30fc\u30b9\u3067\u306f\u3001\u30dc\u30ea\u30e5\u30fc\u30e0\u3068\u30e6\u30fc\u30b6\u30fc\u30b3\u30fc\u30c9\u3092\u63d0\u4f9b\u3059\u308b\u305f\u3081\u306b\u3001\u30b5\u30fc\u30d3\u30b9\u306bYAML\u30a8\u30a4\u30ea\u30a2\u30b9\u306e\u30da\u30a2\u304c\u6dfb\u4ed8\u3055\u308c\u3066\u3044\u307e\u3057\u305f\u3002Docker Compose\u306e\u65b0\u3057\u3044\u30ea\u30ea\u30fc\u30b9\u3067\u306f\u3001\u3053\u308c\u3092\u30a8\u30e9\u30fc\u3068\u3057\u3066\u5831\u544a\u3057\u307e\u3059\u3002\u3059\u3079\u3066\u306e\u4f8b\u304c\u73fe\u5728\u66f4\u65b0\u3055\u308c\u3066\u3044\u308b\u3082\u306e\u306e\u3001\u66f4\u65b0\u304c\u5fc5\u8981\u306a\u53e4\u3044\u30b3\u30fc\u30c9\u30d9\u30fc\u30b9\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002</p> <p>\u3053\u306e\u30a8\u30e9\u30fc\u306f\u3001Docker Compose\u304c\u914d\u5217\u306b\u4f55\u3092\u633f\u5165\u3057\u3066\u3044\u308b\u306e\u304b\u5206\u304b\u3089\u306a\u3044\u305f\u3081\u3001\u91cd\u8907\u3057\u3066\u3044\u308b\u3068\u4eee\u5b9a\u3057\u3066\u767a\u751f\u3057\u307e\u3059\u3002</p> <p>\u3042\u306a\u305f\u306e<code>docker-compose.yml</code>\u304c\u3053\u306e(\u307e\u305f\u306f\u985e\u4f3c\u306e)\u30b3\u30fc\u30c9\u30d6\u30ed\u30c3\u30af\u3092\u4e00\u3064\u4ee5\u4e0a\u542b\u3093\u3067\u3044\u308b\u5834\u5408\u3001\u3042\u306a\u305f\u306f\u5f71\u97ff\u3092\u53d7\u3051\u307e\u3059\u3002</p> \u4e8c\u91cd\u30de\u30c3\u30d4\u30f3\u30b0\u30ad\u30fc\u3092\u542b\u3080Docker Compose\u306e\u30a8\u30e9\u30fc<pre><code>...\n&lt;&lt; : [*default-volumes]\n&lt;&lt; : [*default-user]\n...\n</code></pre> <p>\u4fee\u6b63\u7248\u3067\u306f\u3001\u4e21\u65b9\u306e\u30a8\u30a4\u30ea\u30a2\u30b9\u30921\u3064\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u30ad\u30fc\u306b\u7d71\u5408\u3057\u307e\u3059\u3002\u3059\u3079\u3066\u306e\u7b87\u6240\u3092\u5bfe\u51e6\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> Docker Compose\u306b\u304a\u3051\u308b\u8907\u6570\u306e\u30a8\u30a4\u30ea\u30a2\u30b9\u30de\u30c3\u30d4\u30f3\u30b0\u30ad\u30fc\u306e\u6b63\u3057\u3044\u633f\u5165\u65b9\u6cd5<pre><code>...\n&lt;&lt; : [*default-volumes, *default-user]\n...\n</code></pre>"},{"location":"ja/concepts-basics/lagoon-yml/","title":".lagoon.yml","text":"<p><code>.lagoon.yml</code> \u30d5\u30a1\u30a4\u30eb\u306f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8a2d\u5b9a\u3059\u308b\u305f\u3081\u306e\u4e2d\u5fc3\u3068\u306a\u308b\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002\u4ee5\u4e0b\u306e\u64cd\u4f5c\u3092\u884c\u3046\u305f\u3081\u306e\u8a2d\u5b9a\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059:</p> <ul> <li>\u30b5\u30a4\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u30eb\u30fc\u30c8\u3092\u5b9a\u7fa9\u3059\u308b</li> <li>\u30d7\u30ea\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u30bf\u30b9\u30af\u3092\u5b9a\u7fa9\u3059\u308b</li> <li>\u30dd\u30b9\u30c8\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u30bf\u30b9\u30af\u3092\u5b9a\u7fa9\u3059\u308b</li> <li>SSL\u8a3c\u660e\u66f8\u3092\u8a2d\u5b9a\u3059\u308b</li> <li>\u74b0\u5883\u306e\u305f\u3081\u306ecron\u30b8\u30e7\u30d6\u3092\u8ffd\u52a0\u3059\u308b</li> </ul> <p><code>.lagoon.yml</code> \u30d5\u30a1\u30a4\u30eb\u306f\u3001Git\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30eb\u30fc\u30c8\u306b\u914d\u7f6e\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/lagoon-yml/#_1","title":"\u6c4e\u7528\u7684\u306a\u8a2d\u5b9a","text":""},{"location":"ja/concepts-basics/lagoon-yml/#docker-compose-yaml","title":"<code>docker-compose-yaml</code>","text":"<p>\u3053\u306e\u8a2d\u5b9a\u306f\u3001\u30d3\u30eb\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u3069\u306eDocker Compose YAML\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u7528\u3059\u308b\u3079\u304d\u304b\u3092\u6307\u793a\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u3069\u306e\u30b5\u30fc\u30d3\u30b9\u3068\u30b3\u30f3\u30c6\u30ca\u304c\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u3079\u304d\u304b\u3092\u628a\u63e1\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3068\u3057\u3066 <code>docker-compose.yml</code> \u3092\u6307\u3057\u307e\u3059\u304c\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u7279\u5b9a\u306eLagoon Docker Compose YAML\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/lagoon-yml/#environment_variablesgit_sha","title":"<code>environment_variables.git_sha</code>","text":"<p>\u3053\u306e\u8a2d\u5b9a\u306f\u3001\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u305fGit SHA\u3092\u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3053\u308c\u306f\u7121\u52b9\u3067\u3059\u3002\u5024\u3092 <code>true</code> \u306b\u8a2d\u5b9a\u3059\u308b\u3068\u3001SHA\u304c\u74b0\u5883\u5909\u6570 <code>LAGOON_GIT_SHA</code> \u3068\u3057\u3066\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/lagoon-yml/#routes","title":"\u30eb\u30fc\u30c8","text":"<p>\u30eb\u30fc\u30c8\u306f\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u3092\u30b5\u30fc\u30d3\u30b9\u3078\u8ee2\u9001\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059 \u3002\u74b0\u5883\u5185\u306e\u5404\u30b5\u30fc\u30d3\u30b9\u306b\u306f\u30eb\u30fc\u30c8\u304c\u3042\u308a\u3001\u30c9\u30e1\u30a4\u30f3\u540d\u306f\u624b\u52d5\u307e\u305f\u306f\u81ea\u52d5\u3067\u5b9a\u7fa9\u3055\u308c\u307e\u3059\u3002\u30c8\u30c3\u30d7\u30ec\u30d9\u30eb\u306e <code>routes</code> \u30bb\u30af\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\u306f\u3001\u3059\u3079\u3066\u306e\u74b0\u5883\u306e\u3059\u3079\u3066\u306e\u30eb\u30fc\u30c8\u306b\u5bfe\u3057\u3066\u9069\u7528\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/lagoon-yml/#routesautogenerate","title":"<code>routes.autogenerate</code>","text":"<p>\u30eb\u30fc\u30c8\u3092\u81ea\u52d5\u7684\u306b\u4f5c\u6210\u3059\u308b\u3088\u3046\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002\u624b\u52d5\u30eb\u30fc\u30c8\u306f\u74b0\u5883\u3054\u3068\u306b\u5b9a\u7fa9\u3055\u308c\u307e\u3059\u3002</p> <ul> <li><code>enabled</code>: \u81ea\u52d5\u751f\u6210\u3055\u308c\u305f\u30eb\u30fc\u30c8\u3092\u7121\u52b9\u306b\u3059\u308b\u306b\u306f\u3001<code>false</code>\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f<code>true</code>\u3067\u3059\u3002</li> <li><code>allowPullrequests</code>: \u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u305f\u3081\u306b <code>enabled: false</code>\u3092\u4e0a\u66f8\u304d\u3059\u308b\u306b\u306f\u3001<code>true</code>\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002.lagoon.yml<pre><code>routes:\nautogenerate:\nenabled: false\nallowPullrequests: true\n</code></pre> </li> </ul> <ul> <li><code>insecure</code>: HTTP\u63a5\u7d9a\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f<code>Allow</code>\u3067\u3059\u3002<ul> <li><code>Allow</code>: \u30eb\u30fc\u30c8\u306fHTTP\u3068HTTPS\u306e\u4e21\u65b9\u306b\u5fdc\u7b54\u3057\u307e\u3059\u3002</li> <li><code>Redirect</code>: \u30eb\u30fc\u30c8\u306f\u4efb\u610f\u306eHTTP\u30ea\u30af\u30a8\u30b9\u30c8\u3092HTTPS\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3057\u307e\u3059\u3002</li> </ul> </li> </ul> <ul> <li> <p><code>prefixes</code>: \u5404\u74b0\u5883\u306e\u81ea\u52d5\u751f\u6210\u3055\u308c\u305f\u30eb\u30fc\u30c8\u306e\u30d7\u30ec\u30d5\u30a3\u30af\u30b9\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u8a00\u8a9e\u30d7\u30ec\u30d5\u30a3\u30af\u30b9\u30c9\u30e1\u30a4\u30f3\u3084Drupal\u306e<code>domain</code>\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u7528\u3057\u305f\u30de\u30eb\u30c1\u30c9\u30e1\u30a4\u30f3\u30b5\u30a4\u30c8\u306a\u3069\u306b\u4fbf\u5229\u3067\u3059\u3002</p> .lagoon.yml<pre><code>  routes:\nautogenerate:\nprefixes:\n- www\n- de\n- fr\n- it\n</code></pre> </li> </ul>"},{"location":"ja/concepts-basics/lagoon-yml/#tasks","title":"\u30bf\u30b9\u30af","text":"<p>\u5b9a\u7fa9\u53ef\u80fd\u306a\u30bf\u30b9\u30af\u306b\u306f\u8907\u6570\u306e\u7a2e\u985e\u304c\u3042\u308a\u3001\u305d\u308c\u3089\u306f\u30d3\u30eb\u30c9\u30d5\u30ed\u30fc\u306e\u4e2d\u306e\u3069\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u5b9f\u884c\u3055\u308c\u308b\u304b\u304c\u7570\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/lagoon-yml/#pre-rollout-tasks-pre_rolloutirun","title":"\u30d7\u30ea\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u30bf\u30b9\u30af - <code>pre_rollout.[i].run</code>","text":"<p>\u3059\u3079\u3066\u306e\u30a4\u30e1\u30fc\u30b8\u304c\u6b63\u5e38\u306b\u30d3\u30eb\u30c9\u3055\u308c\u305f\u5f8c\u3001\u304b\u3064\u3001\u4ee5\u4e0b\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u306e\u524d\u306b\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3057\u3066\u5b9f\u884c\u3059\u308b\u30bf\u30b9\u30af\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <ul> <li>\u65b0\u898f\u306b\u30d3\u30eb\u30c9\u3055\u308c\u305f\u30a4\u30e1\u30fc\u30b8\u3067\u5b9f\u884c\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u304c\u66f4\u65b0\u3055\u308c\u308b</li> <li>\u65e2\u5b58\u306e\u74b0\u5883\u306b\u4ed6\u306e\u5909\u66f4\u304c\u52a0\u3048\u3089\u308c\u308b</li> </ul> <p>\u3053\u306e\u6a5f\u80fd\u3092\u5229\u7528\u3059\u308b\u3068\u3001\u305f\u3068\u3048\u3070\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u66f4\u65b0\u3059\u308b\u524d\u306b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c0\u30f3\u30d7\u3092\u4f5c\u6210\u3059\u308b\u306a\u3069\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u306e\u6a5f\u80fd\u306f\u3001\u30c7\u30d7\u30ed\u30a4\u306b\u554f\u984c\u304c\u767a\u751f\u3057\u305f\u5834\u5408\u306e\u30ed\u30fc\u30eb\u30d0\u30c3\u30af\u3092\u5bb9\u6613\u306b\u3057\u307e\u3059\u3002</p> <p>\u60c5\u5831</p> <p>\u30d7\u30ea\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u30bf\u30b9\u30af\u306f\u3001\u66f4\u65b0\u524d\u306e\u65e2\u5b58\u306e\u30dd\u30c3\u30c9\u5185\u3067\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\u3064\u307e\u308a:</p> <ul> <li>\u6700\u5f8c\u306e\u30c7\u30d7\u30ed\u30a4\u4ee5\u964d\u306bDockerfile\u306b\u52a0\u3048\u3089\u308c\u305f\u5909\u66f4\u306f\u3001\u30d7\u30ea\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u30bf\u30b9\u30af\u304c\u5b9f\u884c\u3055\u308c\u308b\u3068\u304d\u306b\u306f\u53cd\u6620\u3055\u308c\u307e\u305b\u3093\u3002</li> <li>\u65e2\u5b58\u306e\u30b3\u30f3\u30c6\u30ca\u304c\u306a\u3044\u5834\u5408(\u4f8b\u3048\u3070\u3001\u65b0\u3057\u3044\u74b0\u5883\u306e\u521d\u671f\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u6642\u306a\u3069)\u3001\u30d7\u30ea\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u30bf\u30b9\u30af\u306f\u30b9\u30ad\u30c3\u30d7\u3055\u308c\u307e\u3059\u3002</li> </ul>"},{"location":"ja/concepts-basics/lagoon-yml/#post-rollout-tasks-post_rolloutirun","title":"\u30dd\u30b9\u30c8\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u30bf\u30b9\u30af - <code>post_rollout.[i].run</code>","text":"<p>\u4ee5\u4e0b\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u306e\u5f8c\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3057\u3066\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u30bf\u30b9\u30af\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <ul> <li>\u5168\u3066\u306e\u30a4\u30e1\u30fc\u30b8\u304c\u6b63\u5e38\u306b\u30d3\u30eb\u30c9\u3055\u308c\u308b</li> <li>\u5168\u3066\u306e\u30b3\u30f3\u30c6\u30ca\u304c\u65b0\u3057\u3044\u30a4\u30e1\u30fc\u30b8\u3067\u66f4\u65b0\u3055\u308c\u308b</li> <li><code>readiness</code>\u30c1\u30a7\u30c3\u30af\u3092\u901a\u904e\u3057\u3001\u5168\u3066\u306e\u30b3\u30f3\u30c6\u30ca\u304c\u7a3c\u50cd\u3059\u308b</li> </ul> <p>\u30dd\u30b9\u30c8\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u30bf\u30b9\u30af\u306e\u4e00\u822c\u7684\u306a\u4f7f\u7528\u4f8b\u306b\u306f\u3001<code>drush updb</code>\u3001<code>drush cim</code>\u306e\u5b9f\u884c\u3084\u3001\u3055\u307e\u3056\u307e\u306a\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u30af\u30ea\u30a2\u306a\u3069\u304c\u542b\u307e\u308c\u307e\u3059\u3002</p> <ul> <li><code>name</code><ul> <li>\u540d\u524d\u306f\u3001\u30ed\u30b0\u5185\u306e\u5404\u30bf\u30b9\u30af\u3092\u8b58\u5225\u3059\u308b\u305f\u3081\u306e\u4efb\u610f\u306e\u30e9\u30d9\u30eb\u3067\u3059\u3002</li> </ul> </li> <li><code>command</code><ul> <li>\u3053\u3053\u3067\u306f\u3001\u5b9f\u884c\u3059\u308b\u3079\u304d\u30b3\u30de\u30f3\u30c9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u3053\u308c\u3089\u306f\u3001\u5404\u30b3\u30f3\u30c6\u30ca\u306eWORKDIR\u3067\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002Lagoon\u306e\u30a4\u30e1\u30fc\u30b8\u306e\u5834\u5408\u3001\u3053\u308c\u306f<code>/app</code>\u3067\u3059\u3002\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b\u7279\u5b9a\u306e\u5834\u6240\u306b<code>cd</code>\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u3053\u308c\u3092\u5ff5\u982d\u306b\u7f6e\u3044\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul> </li> <li><code>service</code><ul> <li>\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002Drupal\u306e\u4f8b\u306b\u5f93\u3063\u3066\u3044\u308b\u5834\u5408\u3001\u3053\u308c\u306fCLI\u30b3\u30f3\u30c6\u30ca\u306b\u306a\u308a\u307e\u3059\u3002\u306a\u305c\u306a\u3089\u3001\u3042\u306a\u305f\u306e\u30b5\u30a4\u30c8\u306e\u30b3\u30fc\u30c9\u3001\u30d5\u30a1\u30a4\u30eb\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3078\u306e\u63a5\u7d9a\u304c\u3059\u3079\u3066\u542b\u307e\u308c\u3066\u3044\u308b\u304b\u3089\u3067\u3059\u3002\u901a\u5e38\u3001\u3053\u308c\u3092\u5909\u66f4\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002</li> </ul> </li> <li><code>container</code><ul> <li>\u30b5\u30fc\u30d3\u30b9\u304c\u8907\u6570\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u6301\u3063\u3066\u3044\u308b\u5834\u5408(\u4f8b:<code>nginx-php</code>)\u3001\u30dd\u30c3\u30c9\u5185\u3067\u63a5\u7d9a\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059(\u4f8b:<code>nginx</code>\u30dd\u30c3\u30c9\u5185\u306e<code>php</code>\u30b3\u30f3\u30c6\u30ca)\u3002</li> </ul> </li> <li><code>shell</code><ul> <li>\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3059\u308b\u30b7\u30a7\u30eb\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f<code>sh</code>\u304c\u4f7f\u7528\u3055\u308c\u307e\u3059\u304c\u3001\u30b3\u30f3\u30c6\u30ca\u304c\u4ed6\u306e\u30b7\u30a7\u30eb(<code>bash</code>\u306a\u3069)\u3092\u6301\u3063\u3066\u3044\u308b\u5834\u5408\u306f<code>sh</code>\u4ee5\u5916\u306e\u30b7\u30a7\u30eb\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u30dd\u30b9\u30c8\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u5185\u3067if/else\u3092\u4f7f\u3063\u305f\u5c0f\u3055\u306abash\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3057\u305f\u3044\u5834\u5408\u306b\u4fbf\u5229\u3067\u3059\u3002\u8907\u6570\u884c\u306b\u308f\u305f\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8a18\u8ff0\u3059\u308b\u65b9\u6cd5\u3092\u5b66\u3076\u306b\u306f\u4ee5\u4e0b\u306e\u4f8b\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul> </li> <li><code>when</code><ul> <li>\u30bf\u30b9\u30af\u306e\u6761\u4ef6\u4ed8\u304d\u5b9f\u884c\u3092\u53ef\u80fd\u306b\u3057\u307e\u3059\u3002\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3059\u308b\u304b\u6c7a\u5b9a\u3059\u308b\u305f\u3081\u306b\u3001true/false\u306b\u8a55\u4fa1\u3055\u308c\u308b\u5f0f\u3067\u3042\u308b\u3053\u3068\u3092\u671f\u5f85\u3055\u308c\u307e\u3059\u3002</li> </ul> </li> </ul> <p>\u6ce8: \u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u4e2d\u306bpre/post-rollout\u30bf\u30b9\u30af\u3092\u4e00\u6642\u7684\u306b\u7121\u52b9\u306b\u3057\u305f\u3044\u5834\u5408\u306f\u3001API\u3067\u4ee5\u4e0b\u306e\u74b0\u5883\u5909\u6570\u3092\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30ec\u30d9\u30eb\u307e\u305f\u306f\u74b0\u5883\u306b\u8a2d\u5b9a\u3057\u307e\u3059\uff08\u74b0\u5883\u5909\u6570\u306e\u8a2d\u5b9a\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u3053\u3053\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\uff09\u3002</p> <ul> <li><code>LAGOON_PREROLLOUT_DISABLED=true</code></li> <li><code>LAGOON_POSTROLLOUT_DISABLED=true</code></li> </ul>"},{"location":"ja/concepts-basics/lagoon-yml/#example-post-rollout-tasks","title":"post-rollout\u30bf\u30b9\u30af\u306e\u4f8b","text":"<p>\u4ee5\u4e0b\u306f\u3044\u304f\u3064\u304b\u306e\u6709\u7528\u306apost-rollout\u30bf\u30b9\u30af\u306e\u4f8b\u3067\u3059\u3002</p> <p>Drupal\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306b\u306e\u307f\u5b9f\u884c\u3059\u308b\u30bf\u30b9\u30af:</p> .lagoon.yml<pre><code>- run:\n  name: IF no Drupal installed\n  command: | # (1)\nif tables=$(drush sqlq \"show tables like 'node';\") &amp;&amp; [ -z \"$tables\" ]; then\n#### whatever you like\nfi\nservice: cli\n  shell: bash\n</code></pre> <p>\u30d6\u30e9\u30f3\u30c1\u540d\u306b\u57fa\u3065\u3044\u3066\u5b9f\u884c\u3059\u308b\u30bf\u30b9\u30af:</p> .lagoon.yml<pre><code>- run:\nname: Different tasks based on branch name\ncommand: |\n### Runs if current branch is not 'production'\nservice: cli\nwhen: LAGOON_GIT_BRANCH != \"production\"\n</code></pre> <p>\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c:</p> .lagoon.yml<pre><code>- run:\nname: Run Script\ncommand: './scripts/script.sh'\nservice: cli\n</code></pre> <p>\u30dd\u30c3\u30c9\u5185\u306e\u7279\u5b9a\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u5bfe\u8c61\u306b\u3059\u308b:</p> .lagoon.yml<pre><code>- run:\nname: show php env variables\ncommand: env\nservice: nginx\ncontainer: php\n</code></pre> <p>Drupal &amp; Drush 9: \u30de\u30b9\u30bf\u30fc\u74b0\u5883\u304b\u3089\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3068\u30d5\u30a1\u30a4\u30eb\u3092\u540c\u671f:</p> .lagoon.yml<pre><code>- run:\n    name: Sync DB and Files from master if we are not on master\n    command: |\n# Only if we don't have a database yet\nif tables=$(drush sqlq 'show tables;') &amp;&amp; [ -z \"$tables\" ]; then\ndrush sql-sync @lagoon.master @self # (1)\ndrush rsync @lagoon.master:%files @self:%files -- --omit-dir-times --no-perms --no-group --no-owner --chmod=ugo=rwX\n      fi\nservice: cli\n    when: LAGOON_ENVIRONMENT_TYPE != \"production\"\n</code></pre> <ol> <li>\u3053\u3053\u3067\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u9069\u3057\u305f\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ol>"},{"location":"ja/concepts-basics/lagoon-yml/#backup-retention","title":"\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306e\u4fdd\u6301\u671f\u9593 ( #backup-retention }","text":""},{"location":"ja/concepts-basics/lagoon-yml/#backup-retentionproductionmonthly","title":"<code>backup-retention.production.monthly</code>","text":"<p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306eproduction\u74b0\u5883\u306e\u6708\u6b21\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306e\u4fdd\u6301\u6570\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</p> <p>\u3053\u306e\u5024\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306f <code>0</code> \u3067\u3059\u3002</p>"},{"location":"ja/concepts-basics/lagoon-yml/#backup-retentionproductionweekly","title":"<code>backup-retention.production.weekly</code>","text":"<p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306eproduction\u74b0\u5883\u306e\u9031\u6b21\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306e\u4fdd\u6301\u6570\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</p> <p>\u3053\u306e\u5024\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306f <code>6</code> \u3067\u3059\u3002</p>"},{"location":"ja/concepts-basics/lagoon-yml/#backup-retentionproductiondaily","title":"<code>backup-retention.production.daily</code>","text":"<p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306eproduction\u74b0\u5883\u306e\u65e5\u6b21\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306e\u4fdd\u6301\u6570\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</p> <p>\u3053\u306e\u5024\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306f <code>7</code> \u3067\u3059\u3002</p>"},{"location":"ja/concepts-basics/lagoon-yml/#backup-retentionproductionhourly","title":"<code>backup-retention.production.hourly</code>","text":"<p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306eproduction\u74b0\u5883\u306e\u6bce\u6642\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306e\u4fdd\u6301\u6570\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</p> <p>\u3053\u306e\u5024\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306f <code>0</code> \u3067\u3059\u3002</p>"},{"location":"ja/concepts-basics/lagoon-yml/#backup-schedule","title":"\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb","text":""},{"location":"ja/concepts-basics/lagoon-yml/#backup-scheduleproduction","title":"<code>backup-schedule.production</code>","text":"<p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u305f\u3060\u3057\u3001<code>Minute</code> \u30d6\u30ed\u30c3\u30af\u306f <code>M</code> \u3067\u306a\u3051\u308c\u3070\u306a\u3089\u305a\u3001\u4ed6\u306e\u5024\u306f Lagoon \u30d3\u30eb\u30c9\u306b\u5931\u6557\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001Lagoon\u306f\u3053\u308c\u3089\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u4f55\u5206\u306b\u884c\u3046\u304b\u30e9\u30f3\u30c0\u30e0\u306b\u9078\u629e\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u3001\u30e6\u30fc\u30b6\u30fc\u306f\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u306e\u6b8b\u308a\u306e\u90e8\u5206\u3092\u6642\u9593\u5358\u4f4d\u3067\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002</p> <p>\u3053\u306e\u5024\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u3001\u30b0\u30ed\u30fc\u30d0\u30eb\u30c7\u30d5\u30a9\u30eb\u30c8\u306f <code>M H(22-2) * * *</code> \u3067\u3059\u3002</p> <p>\u30bf\u30a4\u30e0\u30be\u30fc\u30f3:</p> <p>\u30d0\u30c3\u30af\u30a2\u30c3\u30d7 \u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3067\u306f\u3001\u30af\u30e9\u30b9\u30bf\u30fc\u306e\u30ed\u30fc\u30ab\u30eb \u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u304c\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/lagoon-yml/#environments","title":"\u74b0\u5883","text":"<p>\u74b0\u5883\u540d\u306f\u3001\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u305f\u30d6\u30e9\u30f3\u30c1\u540d\u3084\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u540d\u3068\u4e00\u81f4\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u5404\u74b0\u5883\u3067\u7570\u306a\u308b\u8a2d\u5b9a\u3092\u6301\u3064\u3053\u3068\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\u79c1\u305f\u3061\u306e\u4f8b\u3067\u306f\u3001<code>main</code>\u3068<code>staging</code>\u74b0\u5883\u306b\u9069\u7528\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/lagoon-yml/#environmentsnameroutes","title":"<code>environments.[name].routes</code>","text":"<p>\u624b\u52d5\u30eb\u30fc\u30c8\u306f\u3001\u30b5\u30fc\u30d3\u30b9\u3078\u306e\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u3092\u6307\u793a\u3059\u308b\u305f\u3081\u306b\u74b0\u5883\u3054\u3068\u306b\u8a2d\u5b9a\u3055\u308c\u305f\u30c9\u30e1\u30a4\u30f3\u540d\u3067\u3059\u3002\u3059\u3079\u3066\u306e\u74b0\u5883\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u81ea\u52d5\u751f\u6210\u3055\u308c\u305f\u30eb\u30fc\u30c8\u3092\u53d6\u5f97\u3059\u308b\u305f\u3081\u3001\u624b\u52d5\u30eb\u30fc\u30c8\u306f\u901a\u5e38\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u306e\u30e1\u30a4\u30f3\u30c9\u30e1\u30a4\u30f3(<code>www.example.com</code>\u306a\u3069)\u3092\u4f7f\u7528\u3057\u3066\u672c\u756a\u74b0\u5883\u3067\u306e\u307f\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002</p> <p>\u30d2\u30f3\u30c8</p> <p>Lagoon\u306f\u624b\u52d5\u30eb\u30fc\u30c8\u3092\u5236\u5fa1\u3067\u304d\u306a\u3044\u306e\u3067\u3001DNS\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u3067DNS\u30ec\u30b3\u30fc\u30c9\u304c\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u81ea\u52d5\u30eb\u30fc\u30c8\u3092\u6307\u3059<code>CNAME</code>\u30ec\u30b3\u30fc\u30c9\u3092\u8a2d\u5b9a\u3067\u304d\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>\u74b0\u5883\u306e\u6b21\u306e\u6700\u521d\u306e\u8981\u7d20\u306f\u30bf\u30fc\u30b2\u30c3\u30c8\u30b5\u30fc\u30d3\u30b9\u3067\u3042\u308a\u3001\u79c1\u305f\u3061\u306e\u4f8b\u3067\u306f<code>nginx</code>\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002 \u3053\u308c\u306f\u79c1\u305f\u3061\u304c\u3069\u306e\u30b5\u30fc\u30d3\u30b9\u306b\u5165\u3063\u3066\u304f\u308b\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u308b\u304b\u3092\u8b58\u5225\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002</p> <p>\u6700\u3082\u5358\u7d14\u306a\u30eb\u30fc\u30c8\u306f <code>example.com</code>\u3067\u3001\u3053\u308c\u306f\u79c1\u305f\u3061\u306e\u4f8b\u306e<code>.lagoon.yml</code>\u3067\u78ba\u8a8d  \u3067\u304d\u307e\u3059 - \u8ffd\u52a0\u306e\u8a2d\u5b9a\u304c\u306a\u3044\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u3042\u306a\u305f\u304c\u30eb\u30fc\u30c8\u306b\u5bfe\u3057\u3066Let's Encrypt\u8a3c\u660e\u66f8\u3092\u671b\u3093\u3067\u3044\u308b\u3068\u4eee\u5b9a\u3057\u3001HTTPS\u304b\u3089HTTP\u3078\u306e\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u306f\u3042\u308a\u307e\u305b\u3093\u3002</p> <p>\u4ee5\u4e0b\u306e<code>\"www.example.com\"</code>\u306e\u4f8b\u3067\u306f\u3001\u3055\u3089\u306b3\u3064\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059(\u307e\u305f\u3001\u30eb\u30fc\u30c8\u306e\u7d42\u308f\u308a\u306b\u3042\u308b<code>:</code>\u3068\u3001\u30eb\u30fc\u30c8\u304c<code>\"</code>\u3067\u56f2\u307e\u308c\u3066\u3044\u308b\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3001\u3053\u308c\u306f\u91cd\u8981\u3067\u3059\uff01):</p> .lagoon.yml<pre><code>- \"www.example.com\":\ntls-acme: true\ninsecure: Redirect\nhstsEnabled: true\n</code></pre>"},{"location":"ja/concepts-basics/lagoon-yml/#ssl-configuration-tls-acme","title":"SSL\u8a2d\u5b9a <code>tls-acme</code>","text":"<p>\u8b66\u544a</p> <p><code>tls-acme: true</code>\u304b\u3089<code>tls-acme: false</code>\u306b\u5207\u308a\u66ff\u3048\u308b\u3068\u3001\u3053\u306e\u30eb\u30fc\u30c8\u306b\u5bfe\u3057\u3066\u4ee5\u524d\u306b\u751f\u6210\u3055\u308c\u305f\u8a3c\u660e\u66f8\u304c\u3059\u3079\u3066\u524a\u9664\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u5916\u90e8\u306eCDN\u3092\u4f7f\u7528\u3057\u3066\u3044\u3066\u8a3c\u660e\u66f8\u306e\u30d4\u30f3\u7559\u3081\u3092\u884c\u3063\u3066\u3044\u308b\u5834\u5408\u3001\u4e88\u671f\u3057\u306a\u3044\u6319\u52d5\u3092\u5f15\u304d\u8d77\u3053\u3059\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002</p> <ul> <li><code>tls-acme</code>:Let's Encrypt\u3092\u901a\u3058\u305f\u81ea\u52d5TLS\u8a3c\u660e\u66f8\u751f\u6210\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f<code>true</code>\u3067\u3001\u81ea\u52d5\u8a3c\u660e\u66f8\u3092\u7121\u52b9\u306b\u3059\u308b\u306b\u306f<code>false</code>\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002</li> <li><code>insecure</code>:HTTP\u63a5\u7d9a\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f<code>Allow</code>\u3067\u3059\u3002<ul> <li><code>Allow</code>:\u30eb\u30fc\u30c8\u306fHTTP\u3068HTTPS\u306b\u5fdc\u7b54\u3057\u307e\u3059\u3002</li> <li><code>Redirect</code>:\u30eb\u30fc\u30c8\u306f\u3059\u3079\u3066\u306eHTTP\u30ea\u30af\u30a8\u30b9\u30c8\u3092HTTPS\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3057\u307e\u3059\u3002</li> </ul> </li> <li><code>hstsEnabled</code>: <code>Strict-Transport-Security</code>\u30d8\u30c3\u30c0\u30fc\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f   <code>false</code>\u3067\u3059\u3002</li> <li><code>hstsMaxAge</code>: <code>max-age</code>\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f <code>31536000</code> (1   \u5e74)\u3067\u3059\u3002</li> <li><code>hstsPreload</code>: <code>preload</code>\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f <code>false</code>\u3067\u3059\u3002</li> <li><code>hstsIncludeSubdomains</code>: <code>includeSubDomains</code>\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f   <code>false</code>\u3067\u3059\u3002</li> </ul> <p>\u60c5\u5831</p> <p>\u8a3c\u660e\u66f8\u8a8d\u8a3c\u6a5f\u95a2(CA)\u306b\u3088\u3063\u3066\u7f72\u540d\u3055\u308c\u305fSSL\u8a3c\u660e\u66f8\u304b\u3089Let's Encrypt\u8a3c\u660e\u66f8\u306b\u5207\u308a\u66ff\u3048\u308b\u4e88\u5b9a\u306e\u5834\u5408\u3001\u79fb\u884c\u3092\u76e3\u8996\u3059\u308b\u305f\u3081\u306bLagoon\u7ba1\u7406\u8005\u306b\u9023\u7d61\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/lagoon-yml/#monitoring-a-specific-path","title":"\u7279\u5b9a\u306e\u30d1\u30b9\u306e\u76e3\u8996","text":"<p>UptimeRobot\u304c\u3042\u306a\u305f\u306e\u30af\u30e9\u30b9\u30bf\u30fc(Kubernetes\u307e\u305f\u306fOpenShift)\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001Lagoon\u306f\u5404\u30eb\u30fc\u30c8/\u30a4\u30f3\u30b0\u30ec\u30b9\u306bannotation\u3092\u8a2d\u5b9a\u3057\u3066<code>stakater/IngressControllerMonitor</code>\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30a2\u30af\u30b7\u30e7\u30f3\u306f\u30eb\u30fc\u30c8\u306e\u30db\u30fc\u30e0\u30da\u30fc\u30b8\u3092\u76e3\u8996\u3059\u308b\u3053\u3068\u3067\u3059\u3002\u7279\u5b9a\u306e\u30eb\u30fc\u30c8\u3092\u76e3\u8996\u3057\u305f\u3044\u5834\u5408\u3001\u30eb\u30fc\u30c8\u4ed5\u69d8\u306b<code>monitoring-path</code>\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3067\u3053\u308c\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3067\u304d\u307e\u3059\u3002\u4e00\u822c\u7684\u306a\u4f7f\u7528\u6cd5\u306f\u3001\u30ad\u30e3\u30c3\u30b7\u30f3\u30b0\u3092\u30d0\u30a4\u30d1\u30b9\u3059\u308b\u76e3\u8996\u7528\u306e\u30d1\u30b9\u3092\u8a2d\u5b9a\u3057\u3001\u30b5\u30a4\u30c8\u306e\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u306e\u76e3\u8996\u3092\u53ef\u80fd\u306b\u3059\u308b\u3053\u3068\u3067\u3059\u3002</p> .lagoon.yml<pre><code>- \"www.example.com\":\nmonitoring-path: \"/bypass-cache\"\n</code></pre>"},{"location":"ja/concepts-basics/lagoon-yml/#ingress-annotations","title":"Ingress annotations","text":"<p>\u8b66\u544a</p> <p>\u30eb\u30fc\u30c8/Ingress\u306eannotations\u306f\u3001nginx-ingress\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3092\u5b9f\u884c\u3059\u308b\u30af\u30e9\u30b9\u30bf\u30fc\u306b\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u307f\u304c\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u304c\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u306fLagoon\u7ba1\u7406\u8005\u306b\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <ul> <li><code>annotations</code>\u306f\u3001nginx-ingress\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u304c\u30b5\u30dd\u30fc\u30c8\u3059\u308bannotations\u306eYAML\u30de\u30c3\u30d7\u3067\u3059\u3002\u3053\u308c\u306f\u7279\u306b\u3001\u7c21\u5358\u306a\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3084\u4ed6\u306e\u8a2d\u5b9a\u306b\u4fbf\u5229\u3067\u3059\u3002</li> </ul>"},{"location":"ja/concepts-basics/lagoon-yml/#restrictions","title":"\u5236\u9650\u4e8b\u9805","text":"<p>Lagoon\u3067\u306f\u3001\u4e00\u90e8\u306eannotations\u304c\u7981\u6b62\u3055\u308c\u3066\u3044\u308b\u304b\u3001\u307e\u305f\u306f\u90e8\u5206\u7684\u306b\u5236\u9650\u3055\u308c\u3066\u3044\u307e\u3059\u3002 \u4ee5\u4e0b\u306e\u8868\u306f\u3001\u3053\u308c\u3089\u306e\u30eb\u30fc\u30eb\u3092\u8aac\u660e\u3057\u3066\u3044\u307e\u3059\u3002</p> <p>\u3042\u306a\u305f\u306e<code>.lagoon.yml</code>\u304c\u3053\u308c\u3089\u306eannotations\u306e\u3044\u305a\u308c\u304b\u3092\u542b\u3093\u3067\u3044\u308b\u5834\u5408\u3001\u30d3\u30eb\u30c9\u304c\u5931\u6557\u3059\u308b\u539f\u56e0\u3068\u306a\u308a\u307e\u3059\u3002</p> \u6ce8\u91c8 \u30ce\u30fc\u30c8 <code>nginx.ingress.kubernetes.io/auth-snippet</code> \u7981\u6b62 <code>nginx.ingress.kubernetes.io/configuration-snippet</code> <code>rewrite</code>\u3001<code>add_header</code>\u3001<code>set_real_ip</code>\u3001\u304a\u3088\u3073 <code>more_set_headers</code> \u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u306b\u5236\u9650\u3055\u308c\u3066\u3044\u307e\u3059\u3002 <code>nginx.ingress.kubernetes.io/modsecurity-snippet</code> \u7981\u6b62 <code>nginx.ingress.kubernetes.io/server-snippet</code> <code>rewrite</code>\u3001<code>add_header</code>\u3001<code>set_real_ip</code>\u3001\u304a\u3088\u3073 <code>more_set_headers</code> \u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u306b\u5236\u9650\u3055\u308c\u3066\u3044\u307e\u3059\u3002 <code>nginx.ingress.kubernetes.io/stream-snippet</code> \u7981\u6b62 <code>nginx.ingress.kubernetes.io/use-regex</code> \u7981\u6b62"},{"location":"ja/concepts-basics/lagoon-yml/#ingress-annotations-redirects","title":"Ingress\u306eannotations\u30ea\u30c0\u30a4\u30ec\u30af\u30c8","text":"<p>\u3053\u306e\u4f8b\u3067\u306f\u3001<code>example.ch</code>\u3078\u306e\u4efb\u610f\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u3001\u30d5\u30a9\u30eb\u30c0\u30fc\u3084\u30af\u30a8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4fdd\u6301\u3057\u305f\u307e\u307e <code>https://www.example.ch</code>\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3055\u308c\u307e\u3059(<code>example.com/folder?query</code> -&gt; <code>https://www.example.ch/folder?query</code>)\u3002</p> .lagoon.yml<pre><code>- \"example.ch\":\nannotations:\nnginx.ingress.kubernetes.io/permanent-redirect: https://www.example.ch$request_uri\n- www.example.ch\n</code></pre> <p>Lagoon\u306b\u30db\u30b9\u30c8\u3055\u308c\u3066\u3044\u306a\u3044\u4ed6\u306e\u4efb\u610f\u306eURL\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002 \u4ee5\u4e0b\u306f<code>example.de</code>\u3078\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092<code>https://www.google.com</code>\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3057\u307e\u3059\u3002</p> .lagoon.yml<pre><code>- \"example.de\":\nannotations:\nnginx.ingress.kubernetes.io/permanent-redirect: https://www.google.com\n</code></pre>"},{"location":"ja/concepts-basics/lagoon-yml/#trusted-reverse-proxies","title":"\u4fe1\u983c\u3055\u308c\u308b\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7","text":"<p>\u8b66\u544a</p> <p>Kubernetes\u306f\u5358\u4e00\u306e<code>nginx.ingress.kubernetes.io/server-snippet</code>\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e\u307f\u3092\u51e6\u7406\u3057\u307e\u3059\u3002\u975e\u672c\u756a\u74b0\u5883\u306e\u30eb\u30fc\u30c8\u3067\u3053\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u306f\u3001<code>add_header X-Robots-Tag \"noindex, nofollow\";</code>\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3082\u30b5\u30fc\u30d0\u30fc\u30b9\u30cb\u30da\u30c3\u30c8\u306e\u4e00\u90e8\u3068\u3057\u3066\u542b\u3081\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u308c\u306f\u3001\u958b\u767a\u74b0\u5883\u3067\u30ed\u30dc\u30c3\u30c8\u304c\u30af\u30ed\u30fc\u30eb\u3059\u308b\u306e\u3092\u9632\u3050\u305f\u3081\u306b\u5fc5\u8981\u3067\u3059\u3002ingress\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u958b\u767a\u74b0\u5883\u3067\u3053\u308c\u3092\u9632\u3050\u305f\u3081\u306b\u8a2d\u5b9a\u3055\u308c\u305f\u30c7\u30d5\u30a9\u30eb\u30c8\u306eserver-snippet\u306f\u3001<code>.lagoon.yml</code>\u306b\u8a2d\u5b9a\u3055\u308c\u305f<code>server-snippets</code>\u306b\u3088\u3063\u3066\u4e0a\u66f8\u304d\u3055\u308c\u307e\u3059\u3002</p> <p>\u4e00\u90e8\u306e\u8a2d\u5b9a\u3067\u306f\u3001\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7(CDN\u306a\u3069)\u304cKubernetes\u30af\u30e9\u30b9\u30bf\u306e\u524d\u306b\u914d\u7f6e\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u8a2d\u5b9a\u3067\u306f\u3001\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u306eIP\u304c\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e<code>REMOTE_ADDR</code> <code>HTTP_X_REAL_IP</code> <code>HTTP_X_FORWARDED_FOR</code>\u30d8\u30c3\u30c0\u30fc\u30d5\u30a3\u30fc\u30eb\u30c9\u3068\u3057\u3066\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u30ea\u30af\u30a8\u30b9\u30bf\u30fc\u306e\u30aa\u30ea\u30b8\u30ca\u30ebIP\u306f<code>HTTP_X_ORIGINAL_FORWARDED_FOR</code>\u30d8\u30c3\u30c0\u30fc\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002</p> <p>\u3042\u306a\u305f\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u30aa\u30ea\u30b8\u30ca\u30eb\u306e\u30ea\u30af\u30a8\u30b9\u30c8IP\u3092\u5fc5\u8981\u3068\u3059\u308b\u5834\u5408\u3001 <code>REMOTE_ADDR</code> <code>HTTP_X_FORWARDED_FOR</code> <code>HTTP_X_REAL_IP</code> \u30d8\u30c3\u30c0\u30fc\u306b\u5143\u306eIP\u304c\u8868\u793a\u3055\u308c\u308b\u3088\u3046\u306b\u3059\u308b\u306b\u306f\u3001\u4fe1\u983c\u3059\u308b\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u306eIP\u3092\u30a4\u30f3\u30b0\u30ec\u30b9\u306b\u4f1d\u3048\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059:</p> .lagoon.yml<pre><code>- \"example.ch\":\nannotations:\nnginx.ingress.kubernetes.io/server-snippet: |\nset_real_ip_from 1.2.3.4/32;\n</code></pre> <p>\u3053\u306e\u4f8b\u3067\u306f\u3001CIDR <code>1.2.3.4/32</code>(\u3053\u306e\u5834\u5408\u306fIP <code>1.2.3.4</code>)\u3092\u4fe1\u983c\u3057\u307e\u3059\u3002\u3057\u305f\u304c\u3063\u3066\u3001IP <code>1.2.3.4</code> \u304b\u3089Kubernetes\u30af\u30e9\u30b9\u30bf\u30fc\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u9001\u4fe1\u3055\u308c\u308b\u3068\u3001<code>X-Forwarded-For</code> \u30d8\u30c3\u30c0\u30fc\u304c\u5206\u6790\u3055\u308c\u3001\u305d\u306e\u5185\u5bb9\u304c <code>REMOTE_ADDR</code> <code>HTTP_X_REAL_IP</code> <code>HTTP_X_FORWARDED_FOR</code> \u30d8\u30c3\u30c0\u30fc\u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/lagoon-yml/#environmentsnametypes","title":"<code>Environments.[name].types</code>","text":"<p>Lagoon\u306e\u30d3\u30eb\u30c9\u30d7\u30ed\u30bb\u30b9\u306f\u3001<code>docker-compose.yml</code>\u30d5\u30a1\u30a4\u30eb\u304b\u3089<code>lagoon.type</code>\u30e9\u30d9\u30eb\u3092\u8abf\u3079\u3066\u3001\u3069\u306e\u7a2e\u985e\u306e\u30b5\u30fc\u30d3\u30b9\u304c\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u3079\u304d\u304b\u3092\u5b66\u7fd2\u3057\u307e\u3059(<code>docker-compose.yml</code>\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u8a73\u3057\u304f\u8aad\u3080\u3053\u3068\u304c\u3067\u304d\u307e\u3059)\u3002</p> <p>\u5834\u5408\u306b\u3088\u3063\u3066\u306f\u3001\u5168\u74b0\u5883\u3067\u306f\u306a\u304f\u3001\u5358\u4e00\u306e\u74b0\u5883\u3060\u3051\u3067type\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u305f\u3044\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u3082\u3057\u3001\u30b5\u30fc\u30d3\u30b9\u30d6\u30ed\u30fc\u30ab\u30fc/\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u306b\u5171\u6709\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3055\u305b\u308b\u306e\u3067\u306f\u306a\u304f\u3001\u958b\u767a\u74b0\u5883\u3067\u30b9\u30bf\u30f3\u30c9\u30a2\u30ed\u30f3\u306eMariaDB\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u624b\u9806\u306b\u5f93\u3063\u3066\u304f\u3060\u3055\u3044\u3002</p> <p><code>service-name: service-type</code></p> <ul> <li><code>service-name</code>\u306f\u3001<code>docker-compose.yml</code>\u304b\u3089\u4e0a\u66f8\u304d\u3057\u305f\u3044\u30b5\u30fc\u30d3\u30b9\u306e\u540d\u524d\u3067\u3059</li> <li><code>service-type</code>\u306f\u3001\u4e0a\u66f8\u304d\u305f\u3044\u30b5\u30fc\u30d3\u30b9\u30bf\u30a4\u30d7\u3067\u3059</li> </ul> <p>MariaDB_Galera\u306e\u8a2d\u5b9a\u4f8b:</p> .lagoon.yml<pre><code>environments:\ndevelop:\ntypes:\nmariadb: mariadb-single\n</code></pre>"},{"location":"ja/concepts-basics/lagoon-yml/#environmentsnametemplates","title":"<code>environments.[name].templates</code>","text":"<p>Lagoon\u306e\u30d3\u30eb\u30c9\u30d7\u30ed\u30bb\u30b9\u306f\u3001<code>docker-compose.yml</code>\u30d5\u30a1\u30a4\u30eb\u304b\u3089<code>lagoon.template</code>\u30e9\u30d9\u30eb\u3092\u8abf\u3079\u3066\u3001\u30b5\u30fc\u30d3\u30b9\u304c\u30ab\u30b9\u30bf\u30e0\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u5fc5\u8981\u3068\u3059\u308b\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059(<code>docker-compose.yml</code>\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u8a73\u3057\u304f\u8aad\u3080\u3053\u3068\u304c\u3067\u304d\u307e\u3059)\u3002</p> <p>\u5834\u5408\u306b\u3088\u3063\u3066\u306f\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u3059\u3079\u3066\u306e\u74b0\u5883\u3067\u306f\u306a\u304f\u3001\u7279\u5b9a\u306e\u74b0\u5883\u3060\u3051\u3067\u4e0a\u66f8\u304d\u3057\u305f\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059:</p> <p><code>service-name: template-file</code></p> <ul> <li><code>service-name</code>\u306f\u3001<code>docker-compose.yml</code>\u304b\u3089\u4e0a\u66f8\u304d\u3057\u305f\u3044\u30b5\u30fc\u30d3\u30b9\u306e\u540d\u524d\u3067\u3059\u3002</li> <li><code>template-file</code>\u306f\u3001\u3053\u306e\u74b0\u5883\u3067\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u306b\u4f7f\u7528\u3059\u308b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u30d1\u30b9\u3068\u540d\u524d\u3067\u3059\u3002</li> </ul>"},{"location":"ja/concepts-basics/lagoon-yml/#example-template-override","title":"\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u4e0a\u66f8\u304d\u306e\u4f8b","text":".lagoon.yml<pre><code>environments:\nmain:\ntemplates:\nmariadb: mariadb.main.deployment.yml\n</code></pre>"},{"location":"ja/concepts-basics/lagoon-yml/#environments-name-rollouts","title":"<code>environments.[name].rollouts</code>","text":"<p>Lagoon\u306e\u30d3\u30eb\u30c9\u30d7\u30ed\u30bb\u30b9 <code>lagoon.rollout</code>\u30e9\u30d9\u30eb\u3092<code>docker-compose.yml</code>\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u8abf\u3079\u3066\u3001\u30b5\u30fc\u30d3\u30b9\u304c\u7279\u5225\u306a\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u30bf\u30a4\u30d7\u3092\u5fc5\u8981\u3068\u3059\u308b\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059(<code>docker-compose.yml</code>\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u8a73\u3057\u304f\u8aad\u3080\u3053\u3068\u304c\u3067\u304d\u307e\u3059)\u3002</p> <p>\u5834\u5408\u306b\u3088\u3063\u3066\u306f\u3001\u7279\u306b\u74b0\u5883\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30bf\u30a4\u30d7\u3092\u4e0a\u66f8\u304d\u3057\u305f\u5834\u5408\u306b\u306f\u3001\u5358\u4e00\u306e\u74b0\u5883\u3060\u3051\u3067\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u30bf\u30a4\u30d7\u3092\u4e0a\u66f8\u304d\u3057\u305f\u3044\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002</p> <p><code>service-name: rollout-type</code></p> <ul> <li><code>service-name</code>\u306f\u3001\u4e0a\u66f8\u304d\u3057\u305f\u3044<code>docker-compose.yml</code>\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u540d\u524d\u3067\u3059\u3002</li> <li><code>rollout-type</code>\u306f\u3001\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u306e\u30bf\u30a4\u30d7\u3067\u3059\u3002\u53ef\u80fd\u306a\u5024\u306b\u3064\u3044\u3066\u306f\u3001<code>docker-compose.yml</code>\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul>"},{"location":"ja/concepts-basics/lagoon-yml/#custom-rollout-type-example","title":"\u30ab\u30b9\u30bf\u30e0\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u30bf\u30a4\u30d7\u306e\u4f8b","text":".lagoon.yml<pre><code>environments:\nmain:\nrollouts:\nmariadb: statefulset\n</code></pre>"},{"location":"ja/concepts-basics/lagoon-yml/#environmentsnameautogenerateroutes","title":"<code>environments.[name].autogenerateRoutes</code>","text":"<p>\u30eb\u30fc\u30c8\u306e\u81ea\u52d5\u751f\u6210\u304c\u7121\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u5834\u5408\u3067\u3082\u3001\u74b0\u5883\u3054\u3068\u306b\u81ea\u52d5\u751f\u6210\u30eb\u30fc\u30c8\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> .lagoon.yml<pre><code>routes:\nautogenerate:\nenabled: false\nenvironments:\ndevelop:\nautogenerateRoutes: true\n</code></pre>"},{"location":"ja/concepts-basics/lagoon-yml/#environmentsnamecronjobs","title":"<code>environments.[name].cronjobs</code>","text":"<p>Cron\u30b8\u30e7\u30d6\u306f\u3001\u901a\u5e38\u3001\u3059\u3079\u3066\u306e\u74b0\u5883\u3067\u540c\u3058\u3082\u306e\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u306f\u671b\u307e\u3057\u304f\u306a\u3044\u305f\u3081\u3001\u5404\u74b0\u5883\u3067\u660e\u793a\u7684\u306b\u5b9a\u7fa9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u5b9a\u7fa9\u3057\u305f\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u306b\u3088\u308a\u3001Cron\u30b8\u30e7\u30d6\u306fKubernetes\u30cd\u30a4\u30c6\u30a3\u30d6\u306e<code>CronJob</code>\u3068\u3057\u3066\u3001\u307e\u305f\u306f\u5b9a\u7fa9\u3057\u305f\u30b5\u30fc\u30d3\u30b9\u306ecrontab\u3092\u4ecb\u3057\u305fin-pod cron\u30b8\u30e7\u30d6\u3068\u3057\u3066\u5b9f\u884c\u3055\u308c\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/lagoon-yml/#cron-job-example","title":"Cron\u30b8\u30e7\u30d6\u306e\u4f8b","text":".lagoon.yml<pre><code>cronjobs:\n- name: Hourly Drupal Cron\nschedule: \"M * * * *\" # 1\u6642\u9593\u3054\u3068, \u4f55\u5206\u306a\u306e\u304b\u306f\u30e9\u30f3\u30c0\u30e0.\ncommand: drush cron\nservice: cli\n- name: Nightly Drupal Cron\nschedule: \"M 0 * * *\" # 1\u65e5\u3054\u3068, \u4f55\u5206\u306a\u306e\u304b\u306f\u300100:00\u304b\u308900:59\u306e\u9593\u306e\u30e9\u30f3\u30c0\u30e0.\ncommand: drush cron\nservice: cli\n</code></pre> <ul> <li><code>name</code>: \u4ed6\u306ecron\u30b8\u30e7\u30d6\u3068\u533a\u5225\u3057\u3001\u76ee\u7684\u3092\u7279\u5b9a\u3059\u308b\u305f\u3081\u306e\u4efb\u610f\u306e\u540d\u524d</li> <li> <p><code>schedule</code>: cron\u30b8\u30e7\u30d6\u306e\u5b9f\u884c\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3002Lagoon\u306f\u3001crontab\u5f62\u5f0f\u306e\u62e1\u5f35\u7248\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u69cb\u6587\u304c\u308f\u304b\u3089\u306a\u3044\u5834\u5408\u306f\u3001crontab generator\u3092\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <ul> <li>\u5206\u306b<code>M</code>\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001cron\u30b8\u30e7\u30d6\u306f \u30e9\u30f3\u30c0\u30e0\u306a\u5206(\u6bce\u6642\u9593\u540c\u3058\u5206)\u306b1\u6642\u9593\u3054\u3068\u306b\u5b9f\u884c\u3059\u308b\u304b\u3001<code>M/15</code>\u3092\u6307\u5b9a\u3057\u306615\u5206\u3054\u3068\u306b\u5b9f\u884c\u3059\u308b\u304c\u3001\u6642\u9593\u304b\u3089\u306e\u30e9\u30f3\u30c0\u30e0\u306a\u30aa\u30d5\u30bb\u30c3\u30c8(<code>6,21,36,51</code>\u306e\u3088\u3046\u306a)\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\u3053\u306e\u6a5f\u80fd\u3092\u4f7f\u7528\u3057\u3066cron\u30b8\u30e7\u30d6\u3092\u5206\u6563\u3055\u305b\u308b\u3053\u3068\u306f\u3001\u3059\u3079\u3066\u306e\u30b8\u30e7\u30d6\u3092\u5206<code>0</code>\u3067\u4e00\u6589\u306b\u5b9f\u884c\u3059\u308b\u3088\u308a\u3082\u826f\u3044\u65b9\u6cd5\u3067\u3059\u3002</li> <li><code>H</code>\u3092\u6642\u9593\u306b\u6307\u5b9a\u3059\u308b\u3068\u3001cron\u30b8\u30e7\u30d6\u306f\u30e9\u30f3\u30c0\u30e0\u306a\u6642\u9593(\u6bce\u65e5\u540c\u3058\u6642\u9593)\u306b1\u65e51\u56de\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\u307e\u305f\u3001<code>H(2-4)</code>\u3092\u6307\u5b9a\u3059\u308b\u3068\u30012\u6642\u304b\u30894\u6642\u306e\u9593\u306b1\u65e51\u56de\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002</li> </ul> </li> </ul> <p>\u30bf\u30a4\u30e0\u30be\u30fc\u30f3:</p> <ul> <li>cron\u30b8\u30e7\u30d6\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u306fUTC\u3067\u3059\u3002</li> <li>\u30cd\u30a4\u30c6\u30a3\u30d6\u306ecron\u30b8\u30e7\u30d6\u306f\u30ce\u30fc\u30c9\u306e\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u3092\u4f7f\u7528\u3057\u3001\u305d\u308c\u306fUTC\u3067\u3059\u3002</li> <li>In-pod\u306ecron\u30b8\u30e7\u30d6\u306f\u5b9a\u7fa9\u3055\u308c\u305f\u30b5\u30fc\u30d3\u30b9\u306e\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u3092\u4f7f\u7528\u3057\u3001UTC\u4ee5\u5916\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</li> </ul> <ul> <li><code>command</code>:\u5b9f\u884c\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u30b5\u30fc\u30d3\u30b9\u306e<code>WORKDIR</code>\u3067\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002Lagoon\u30a4\u30e1\u30fc\u30b8\u306e\u5834\u5408\u3001\u3053\u308c\u306f<code>/app</code>\u3067\u3059\u3002</li> </ul> <p>\u8b66\u544a</p> <p>Cron\u30b8\u30e7\u30d6\u306f\u3001crontab\u3092\u4ecb\u3057\u3066Pod\u5185\u3067\u5b9f\u884c\u3055\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u3001\u8907\u6570\u884c\u306e\u30b3\u30de\u30f3\u30c9\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u8907\u96d1\u306a\u307e\u305f\u306f\u8907\u6570\u884c\u306ecron\u30b3\u30de\u30f3\u30c9\u304c\u5fc5\u8981\u306a\u5834\u5408\u3001\u30b3\u30de\u30f3\u30c9\u3068\u3057\u3066\u4f7f\u7528\u53ef\u80fd\u306a\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u7528\u610f\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u30d7\u30ea\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u307e\u305f\u306f\u30dd\u30b9\u30c8\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8 \u30bf\u30b9\u30af \u304c\u6a5f\u80fd\u3059\u308b\u304b\u3069\u3046\u304b\u691c\u8a0e\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u5371\u967a</p> <p>Cron\u30b8\u30e7\u30d6\u306fKubernetes\u306e\u30dd\u30c3\u30c9\u3067\u5b9f\u884c\u3055\u308c\u307e\u3059\u304c\u3001\u30dd\u30c3\u30c9\u306e\u518d\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0\u306b\u3088\u308a\u4e2d\u65ad\u3055\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002   \u305d\u306e\u305f\u3081\u3001cron\u30b8\u30e7\u30d6\u3092\u4f5c\u6210\u3059\u308b\u969b\u306b\u306f\u3001\u6b21\u306ecron\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u3067\u30b3\u30de\u30f3\u30c9\u3092\u5b89\u5168\u306b\u4e2d\u65ad\u3057\u3001\u518d\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <ul> <li><code>service</code>:\u30b3\u30de\u30f3\u30c9\u3092\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u3069\u306e\u30b5\u30fc\u30d3\u30b9\u3067\u5b9f\u884c\u3059\u308b\u304b\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u307b\u3068\u3093\u3069\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u306f\u3001\u3053\u308c\u306f<code>cli</code>\u30b5\u30fc\u30d3\u30b9\u3067\u3042\u308b\u3079\u304d\u3067\u3059\u3002</li> </ul>"},{"location":"ja/concepts-basics/lagoon-yml/#polysite","title":"\u30dd\u30ea\u30b5\u30a4\u30c8 { #polysite )","text":"<p>Lagoon\u3067\u306f\u3001\u540c\u3058Git\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8907\u6570\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u8ffd\u52a0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u3001\u3053\u308c\u3092\u30dd\u30ea\u30b5\u30a4\u30c8\u3068\u547c\u3073\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u540c\u3058\u30b3\u30fc\u30c9\u30d9\u30fc\u30b9\u3092\u5b9f\u884c\u3057\u306a\u304c\u3089\u3001\u7570\u306a\u308b\u72ec\u7acb\u3057\u305f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3068\u6c38\u7d9a\u7684\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u8a31\u53ef\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 <code>.lagoon.yml</code>\u3067\u306f\u3001\u73fe\u5728\u3001\u30dd\u30ea\u30b5\u30a4\u30c8\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u305f\u3081\u306e\u30ab\u30b9\u30bf\u30e0\u30eb\u30fc\u30c8\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u306e\u307f\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\u6a19\u6e96\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3068\u306e\u4e3b\u306a\u9055\u3044\u306f\u3001<code>environments</code>\u304c\u4e8c\u6b21\u5143\u8981\u7d20\u3068\u306a\u308a\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u304c\u6700\u4e0a\u4f4d\u8981\u7d20\u3068\u306a\u308b\u3053\u3068\u3067\u3059\u3002</p> <p>\u3053\u308c\u3092\u5229\u7528\u3059\u308b\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u624b\u9806\u3092\u8e0f\u3080\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059:</p> <ol> <li>Lagoon\u306b2\u3064(\u4ee5\u4e0a)\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u3001\u305d\u308c\u305e\u308c\u306b\u540c\u3058Git URL\u3068\u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u30d6\u30e9\u30f3\u30c1\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u3042\u306a\u305f\u306e.lagoon.yml\u306b\u5f93\u3063\u3066\u547d\u540d\u3055\u308c\u307e\u3059(\u4f8b:<code>poly-project1</code> \u3068 <code>poly-project2</code>)</li> <li>\u5404\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30c7\u30d7\u30ed\u30a4\u30ad\u30fc\u3092Git\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002</li> <li>(\u3082\u3057\u5fc5\u8981\u306a\u3089)\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30a6\u30a7\u30d6\u30d5\u30c3\u30af\u3092\u8a2d\u5b9a\u3057\u307e\u3059 - \u305d\u306e\u5f8c\u3001\u30d7\u30c3\u30b7\u30e5/\u30c7\u30d7\u30ed\u30a4\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\u30ea\u30dd\u30b8\u30c8\u30ea\u3078\u306e\u30d7\u30c3\u30b7\u30e5\u306f\u3001\u305d\u306eGit URL\u306b\u5bfe\u3059\u308b\u3059\u3079\u3066\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8/\u30d6\u30e9\u30f3\u30c1\u3092\u540c\u6642\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002</li> </ol>"},{"location":"ja/concepts-basics/lagoon-yml/#polysite-example","title":"Polysite\u306e\u4f8b","text":".lagoon.yml<pre><code>poly-project1:\nenvironments:\nmain:\nroutes:\n- nginx:\n- project1.com\npoly-project2:\nenvironments:\nmain:\nroutes:\n- nginx:\n- project2.com\n</code></pre>"},{"location":"ja/concepts-basics/lagoon-yml/#specials","title":"\u7279\u5225\u306a\u9805\u76ee","text":""},{"location":"ja/concepts-basics/lagoon-yml/#api","title":"<code>api</code>","text":"\u60c5\u5831 <p>amazee.io\u306b\u30db\u30b9\u30c8\u3055\u308c\u305fLagoon\u3067\u76f4\u63a5\u52d5\u4f5c\u3059\u308b\u5834\u5408\u3001\u3053\u306e\u30ad\u30fc\u306f\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002</p> <p><code>api</code>\u30ad\u30fc\u3092\u4f7f\u7528\u3059\u308b\u3068\u3001Lagoon CLI\u3068<code>drush</code>\u304cLagoon GraphQL API\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3059\u308b\u5225\u306eURL\u3092\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306f\u30b9\u30ad\u30fc\u30e0\u4ed8\u304d\u306e\u5b8c\u5168\u306aURL\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u4f8b:<code>http://localhost:3000</code> \u3053\u308c\u306f\u901a\u5e38\u5909\u66f4\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001Lagoon\u306e\u7ba1\u7406\u8005\u304c\u305d\u3046\u3059\u308b\u3088\u3046\u6307\u793a\u3059\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/lagoon-yml/#ssh","title":"<code>ssh</code>","text":"\u60c5\u5831 <p>amazee.io\u306b\u30db\u30b9\u30c8\u3055\u308c\u305fLagoon\u3067\u76f4\u63a5\u52d5\u4f5c\u3059\u308b\u5834\u5408\u3001\u3053\u306e\u30ad\u30fc\u306f\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002</p> <p><code>ssh</code>\u30ad\u30fc\u3092\u4f7f\u7528\u3059\u308b\u3068\u3001Lagoon CLI\u3068<code>drush</code>\u304cLagoon\u30ea\u30e2\u30fc\u30c8\u30b7\u30a7\u30eb\u30b5\u30fc\u30d3\u30b9\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3059\u308b\u5225\u306eSSH\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306f\u30b3\u30ed\u30f3\u3067\u533a\u5207\u3089\u308c\u305f\u30db\u30b9\u30c8\u540d\u3068\u30dd\u30fc\u30c8\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u4f8b:<code>localhost:2020</code> \u3053\u308c\u306f\u901a\u5e38\u5909\u66f4\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001Lagoon\u306e\u7ba1\u7406\u8005\u304c\u305d\u3046\u3059\u308b\u3088\u3046\u6307\u793a\u3059\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/lagoon-yml/#container-registries","title":"<code>container-registries</code>","text":"<p><code>container-registries</code> \u30d6\u30ed\u30c3\u30af\u3067\u306f\u3001\u30ab\u30b9\u30bf\u30e0\u307e\u305f\u306f\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u306a\u30a4\u30e1\u30fc\u30b8\u3092\u30d7\u30eb\u3059\u308b\u305f\u3081\u306e\u72ec\u81ea\u306e\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30b3\u30f3\u30c6\u30ca\u30ec\u30b8\u30b9\u30c8\u30ea\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p>\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30b3\u30f3\u30c6\u30ca\u30ec\u30b8\u30b9\u30c8\u30ea\u3092\u4f7f\u7528\u3059\u308b\u306b\u306f\u3001<code>username</code>\u3001<code>password</code>\u3001\u304a\u3088\u3073\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u30ec\u30b8\u30b9\u30c8\u30ea\u306e <code>url</code> \u304c\u5fc5\u8981\u3067\u3059\u3002YAML\u3067 <code>url</code> \u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067Docker Hub\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u307e\u305f\u3001\u30b3\u30f3\u30c6\u30ca\u30ec\u30b8\u30b9\u30c8\u30ea\u30a8\u30f3\u30c8\u30ea\u306b\u8aac\u660e\u3092\u8ffd\u52a0\u3057\u3066\u3001\u60c5\u5831\u3092\u63d0\u4f9b\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002\u3044\u304f\u3064\u304b\u306e\u4f8b\u3092\u4ee5\u4e0b\u306b\u793a\u3057\u307e\u3059</p> <p>\u30ec\u30b8\u30b9\u30c8\u30ea\u30e6\u30fc\u30b6\u30fc\u306b\u4f7f\u7528\u3059\u308b\u30e6\u30fc\u30b6\u30fc\u540d\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5b9a\u7fa9\u3059\u308b\u65b9\u6cd5\u306f2\u3064\u3042\u308a\u307e\u3059\u3002</p> <ul> <li>API\u3067\u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u5b9a\u7fa9\u3059\u308b</li> <li>.lagoon.yml\u30d5\u30a1\u30a4\u30eb\u306b\u30cf\u30fc\u30c9\u30b3\u30fc\u30c9\u3059\u308b\uff08\u305f\u3060\u3057\u3001\u3053\u308c\u306f\u63a8\u5968\u3057\u307e\u305b\u3093\uff09</li> </ul>"},{"location":"ja/concepts-basics/lagoon-yml/#environment-variables-method","title":"\u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u5b9a\u7fa9\u3059\u308b\u65b9\u6cd5","text":"<p>\u307e\u305a\u3001.lagoon.yml\u306b\u30b3\u30f3\u30c6\u30ca\u30ec\u30b8\u30b9\u30c8\u30ea\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u306f\u30e6\u30fc\u30b6\u30fc\u540d\u3084\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5b9a\u7fa9\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u30ab\u30b9\u30bf\u30e0\u30ec\u30b8\u30b9\u30c8\u30ea\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u3067\u3082\u3001URL\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u4f8b\u3048\u3070\u6b21\u306e\u3088\u3046\u306b\u5b9a\u7fa9\u3057\u307e\u3059:</p> .lagoon.yml<pre><code>container-registries:\ndocker-hub:\ndescription: \"\u30c7\u30d5\u30a9\u30eb\u30c8\u306edocker.io\u30ec\u30b8\u30b9\u30c8\u30ea\u7528\u306e\u30e6\u30fc\u30b6\u30fc\u540d\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u74b0\u5883\u5909\u6570\u304b\u3089\u53d6\u5f97\u3055\u308c\u307e\u3059\"\nmy-custom-registry:\ndescription: \"\u30ab\u30b9\u30bf\u30e0\u30ec\u30b8\u30b9\u30c8\u30ea\u7528\u306e\u30e6\u30fc\u30b6\u30fc\u540d\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u74b0\u5883\u5909\u6570\u304b\u3089\u53d6\u5f97\u3055\u308c\u307e\u3059\"\nurl: my.own.registry.com\nanother-custom-registry:\ndescription: \"\u4ed6\u306e\u30ec\u30b8\u30b9\u30c8\u30ea\u7528\u306e\u30e6\u30fc\u30b6\u30fc\u540d\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u74b0\u5883\u5909\u6570\u304b\u3089\u53d6\u5f97\u3055\u308c\u307e\u3059\"\nusername: myotheruser\nurl: my.other.registry.com\n</code></pre> <p>.lagoon.yml\u306b\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u5b9a\u7fa9\u3059\u308b\u5834\u5408\u3001\u95a2\u9023\u3059\u308b\u5909\u6570\u3092\u8ffd\u52a0\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u305f\u3060\u3057\u3001\u5909\u6570\u3092\u8ffd\u52a0\u3059\u308b\u5834\u5408\u3001\u305d\u306e\u5909\u6570\u306e\u5024\u304c\u512a\u5148\u3055\u308c\u307e\u3059\u3002</p> <p>\u6b21\u306b\u3001Lagoon API\u3067<code>container_registry</code>\u30bf\u30a4\u30d7\u306e\u74b0\u5883\u5909\u6570\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <ul> <li>lagoon add variable -p &lt;\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d&gt; -N &lt;\u30ec\u30b8\u30b9\u30c8\u30ea\u30e6\u30fc\u30b6\u30fc\u306e\u5909\u6570\u540d&gt; -V &lt;\u30e6\u30fc\u30b6\u30fc&gt; -S container_registry</li> <li>lagoon add variable -p &lt;\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d&gt; -N &lt;\u30ec\u30b8\u30b9\u30c8\u30ea\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u5909\u6570\u540d&gt; -V &lt;\u30d1\u30b9\u30ef\u30fc\u30c9&gt; -S container_registry</li> <li>(\u8a73\u3057\u304f\u306f\u74b0\u5883\u5909\u6570\u3092\u53c2\u7167)</li> </ul> <p>\u5909\u6570\u306e\u540d\u524d\u306f.lagoon.yml\u30d5\u30a1\u30a4\u30eb\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u30ec\u30b8\u30b9\u30c8\u30ea\u306e\u540d\u524d\u3068\u4e00\u81f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u6b21\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\uff1a</p> <ul> <li>\u5927\u6587\u5b57\u3067\u8a18\u8ff0\u3059\u308b</li> <li>\u30cf\u30a4\u30d5\u30f3\uff08-\uff09\u3092\u30a2\u30f3\u30c0\u30fc\u30b9\u30b3\u30a2\uff08_\uff09\u306b\u7f6e\u304d\u63db\u3048\u308b</li> <li>\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u306bREGISTRY_\u3092\u4ed8\u3051\u308b</li> <li>\u30b5\u30d5\u30a3\u30c3\u30af\u30b9\u306b_USERNAME\u307e\u305f\u306f_PASSWORD\u3092\u4ed8\u3051\u308b</li> </ul> <p>\u3044\u304f\u3064\u304b\u306e\u4f8b\u3092\u793a\u3057\u307e\u3059\uff1a</p> <ul> <li><code>dockerhub</code>\u306f<code>REGISTRY_DOCKERHUB_USERNAME</code>\u304a\u3088\u3073<code>REGISTRY_DOCKERHUB_PASSWORD</code>\u306b\u306a\u308a\u307e\u3059\u3002</li> <li><code>docker-hub</code>\u306f<code>REGISTRY_DOCKER_HUB_USERNAME</code>\u304a\u3088\u3073<code>REGISTRY_DOCKER_HUB_PASSWORD</code>\u306b\u306a\u308a\u307e\u3059\u3002</li> <li><code>my-custom-registry</code>\u306f<code>REGISTRY_MY_CUSTOM_REGISTRY_USERNAME</code>\u304a\u3088\u3073<code>REGISTRY_MY_CUSTOM_REGISTRY_PASSWORD</code>\u306b\u306a\u308a\u307e\u3059\u3002</li> <li>\u30cf\u30a4\u30d5\u30f3\u304c\u542b\u307e\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u3001\u5c0f\u6587\u5b57\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\uff08\u4f8b\uff1a<code>REGISTRY_dockerhub_USERNAME</code>\uff09\u3082\u52d5\u4f5c\u3059\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u5e38\u306b\u5927\u6587\u5b57\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u512a\u5148\u3055\u308c\u307e\u3059\u3002</li> </ul> Legacy method of defining registry password <p>\u4ee5\u524d\u306f\u3001\u74b0\u5883\u5909\u6570\u3092\u4f7f\u7528\u3057\u3066\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5b9a\u7fa9\u3059\u308b\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3057\u305f\u3002\u3053\u306e\u5834\u5408\u3001\u5909\u6570\u540d\u306f<code>.lagoon.yml</code>\u30d5\u30a1\u30a4\u30eb\u3067\u6b21\u306e\u3088\u3046\u306b\u5b9a\u7fa9\u3055\u308c\u307e\u3059\uff1a .lagoon.yml<pre><code>container-registries:\ndocker-hub:\nusername: dockerhubuser\npassword: MY_DOCKER_HUB_PASSWORD\n</code></pre></p> <p>\u30e6\u30fc\u30b6\u30fc\u540d\u3082\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u63d0\u4f9b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u5909\u6570\u3067\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u5b9a\u7fa9\u3059\u308b\u5834\u5408\u306f\u305d\u306e\u9650\u308a\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002</p> <p>\u5909\u6570\u306f\u6b21\u306e\u3088\u3046\u306bAPI\u306b\u8ffd\u52a0\u3067\u304d\u307e\u3059\uff1a</p> <ul> <li>lagoon add variable -p &lt;\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d&gt; -N MY_DOCKER_HUB_PASSWORD -V &lt;\u30d1\u30b9\u30ef\u30fc\u30c9&gt; -S container_registry</li> </ul> <p>\u3053\u306e\u65b9\u6cd5\u306f\u5f15\u304d\u7d9a\u304d\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u307e\u3059\u304c\u3001\u5c06\u6765\u7684\u306b\u975e\u63a8\u5968\u3068\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\u30e6\u30fc\u30b6\u30fc\u304c\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u65b9\u6cd5\u306b\u5909\u66f4\u3059\u308b\u6642\u9593\u3092\u78ba\u4fdd\u3059\u308b\u305f\u3081\u306b\u3001\u30d3\u30eb\u30c9\u5185\u3067\u8b66\u544a\u304c\u8868\u793a\u3055\u308c\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002</p> <p>\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u5909\u6570\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u30ab\u30b9\u30bf\u30e0\u540d\u306e\u5909\u6570\u306e\u4ee3\u308f\u308a\u306b\u305d\u308c\u304c\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/lagoon-yml/#hardcoded-values-method","title":"\u30cf\u30fc\u30c9\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024\u306e\u65b9\u6cd5","text":"<p>\u63a8\u5968\u3055\u308c\u307e\u305b\u3093\u304c\u3001<code>.lagoon.yml</code> \u30d5\u30a1\u30a4\u30eb\u306b\u76f4\u63a5\u30d7\u30ec\u30fc\u30f3\u30c6\u30ad\u30b9\u30c8\u3068\u3057\u3066\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059:</p> .lagoon.yml<pre><code>container-registries:\ndocker-hub:\ndescription: \"\u30c7\u30d5\u30a9\u30eb\u30c8\u306edocker.io\u30ec\u30b8\u30b9\u30c8\u30ea\u306e\u8a8d\u8a3c\u60c5\u5831\"\nusername: dockerhubuser\npassword: MySecretPassword\nmy-custom-registry:\ndescription: \"\u81ea\u5206\u306e\u30ec\u30b8\u30b9\u30c8\u30ea\u306e\u8a8d\u8a3c\u60c5\u5831\"\nurl: my.own.registry.com\nusername: mycustomuser\npassword: MyCustomSecretPassword\n</code></pre>"},{"location":"ja/concepts-basics/lagoon-yml/#consuming-a-custom-or-private-container-registry-image","title":"\u30ab\u30b9\u30bf\u30e0\u307e\u305f\u306f\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u306a\u30b3\u30f3\u30c6\u30ca\u30ec\u30b8\u30b9\u30c8\u30ea\u30a4\u30e1\u30fc\u30b8\u306e\u4f7f\u7528","text":"<p>\u30ab\u30b9\u30bf\u30e0\u307e\u305f\u306f\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u306a\u30b3\u30f3\u30c6\u30ca\u30ec\u30b8\u30b9\u30c8\u30ea\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u7528\u3059\u308b\u306b\u306f\u3001<code>docker-compose.yml</code> \u30d5\u30a1\u30a4\u30eb\u5185\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u66f4\u65b0\u3057\u3066\u3001\u30a4\u30e1\u30fc\u30b8\u3092\u5b9a\u7fa9\u3059\u308b\u4ee3\u308f\u308a\u306b\u30d3\u30eb\u30c9\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u4f7f\u7528\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059:</p> .docker-compose.yml<pre><code>services:\nmariadb:\nbuild:\ncontext: .\ndockerfile: Dockerfile.mariadb\n</code></pre> <p><code>docker-compose.yml</code> \u30d5\u30a1\u30a4\u30eb\u304c\u30d3\u30eb\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3088\u3046\u306b\u66f4\u65b0\u3055\u308c\u305f\u3089\u3001 <code>Dockerfile.&lt;service&gt;</code> \u3092\u4f5c\u6210\u3057\u3001\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30a4\u30e1\u30fc\u30b8\u3092 <code>FROM &lt;repo&gt;/&lt;name&gt;:&lt;tag&gt;</code> \u3068\u3057\u3066\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> .lagoon.yml<pre><code>FROM dockerhubuser/my-private-database:tag\n</code></pre>"},{"location":"ja/concepts-basics/lagoon-yml/#example-lagoonyml","title":"<code>.lagoon.yml</code> \u306e\u4f8b","text":"<p>\u3053\u308c\u306f\u5168\u3066\u306e\u53ef\u80fd\u306a\u8a2d\u5b9a\u3092\u793a\u3057\u305f <code>.lagoon.yml</code> \u306e\u4f8b\u3067\u3059\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u5408\u308f\u305b\u3066\u8abf\u6574\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> .lagoon.yml<pre><code>docker-compose-yaml: docker-compose.yml\nenvironment_variables:\ngit_sha: 'true'\ntasks:\npre-rollout:\n- run:\nname: drush sql-dump\ncommand: mkdir -p /app/web/sites/default/files/private/ &amp;&amp; drush sql-dump --ordered-dump --gzip --result-file=/app/web/sites/default/files/private/pre-deploy-dump.sql.gz\nservice: cli\npost-rollout:\n- run:\nname: drush cim\ncommand: drush -y cim\nservice: cli\nshell: bash\n- run:\nname: drush cr\ncommand: drush -y cr\nservice: cli\nroutes:\nautogenerate:\ninsecure: Redirect\nenvironments:\nmain:\nroutes:\n- nginx:\n- example.com\n- example.net\n- \"www.example.com\":\ntls-acme: true\ninsecure: Redirect\nhstsEnabled: true\n- \"example.ch\":\nannotations:\nnginx.ingress.kubernetes.io/permanent-redirect: https://www.example.ch$request_uri\n- www.example.ch\ntypes:\nmariadb: mariadb\ntemplates:\nmariadb: mariadb.main.deployment.yml\nrollouts:\nmariadb: statefulset\ncronjobs:\n- name: drush cron\nschedule: \"M * * * *\" # This will run the cron once per hour.\ncommand: drush cron\nservice: cli\nstaging:\ncronjobs:\n- name: drush cron\nschedule: \"M * * * *\" # This will run the cron once per hour.\ncommand: drush cron\nservice: cli\nfeature/feature-branch:\ncronjobs:\n- name: drush cron\nschedule: \"H * * * *\" # This will run the cron once per hour.\ncommand: drush cron\nservice: cli\n</code></pre>"},{"location":"ja/concepts-basics/lagoon-yml/#deprecated","title":"\u975e\u63a8\u5968","text":"<p>\u3053\u308c\u3089\u306e\u8a2d\u5b9a\u306f\u975e\u63a8\u5968\u3068\u306a\u308a\u3001\u3042\u306a\u305f\u306e <code>.lagoon.yml</code> \u304b\u3089\u524a\u9664\u3059\u308b\u3079\u304d\u3067\u3059\u3002</p> <ul> <li><code>routes.autogenerate.insecure</code><p><code>None</code> \u30aa\u30d7\u30b7\u30e7\u30f3\u306f <code>Redirect</code> \u3068\u540c\u7b49\u3067\u3059\u3002</p> </li> </ul> <ul> <li><code>environments.[name].monitoring_urls</code></li> <li><code>environments.[name].routes.[service].[route].hsts</code></li> <li><code>environments.[name].routes.[service].[route].insecure</code><p><code>None</code> \u30aa\u30d7\u30b7\u30e7\u30f3\u306f <code>Redirect</code> \u3068\u540c\u7b49\u3067\u3059\u3002</p> </li> </ul>"},{"location":"ja/concepts-basics/building-blocks/deploy-targets/","title":"\u30c7\u30d7\u30ed\u30a4\u30bf\u30fc\u30b2\u30c3\u30c8","text":"<p>\u30c7\u30d7\u30ed\u30a4\u30bf\u30fc\u30b2\u30c3\u30c8 \u306f\u3001Lagoon\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u3069\u306e\u30af\u30e9\u30b9\u30bf\u30fc\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u304b\u3092\u6307\u793a\u3057\u307e\u3059\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306f\u4e00\u3064\u307e\u305f\u306f\u305d\u308c\u4ee5\u4e0a\u306e\u30c7\u30d7\u30ed\u30a4\u30bf\u30fc\u30b2\u30c3\u30c8\u3092\u6301\u3064\u3053\u3068\u304c\u3067\u304d\u3001\u4f8b\u3048\u3070\u3001\u4e00\u3064\u306f\u672c\u756a\u7528\u3001\u3082\u3046\u4e00\u3064\u306f\u30c6\u30b9\u30c8\u7528\u3068\u3044\u3063\u305f\u5177\u4f53\u7684\u306a\u4f7f\u3044\u5206\u3051\u304c\u53ef\u80fd\u3067\u3059\u3002\u30c7\u30d7\u30ed\u30a4\u30bf\u30fc\u30b2\u30c3\u30c8\u306f\u3001\u5b9a\u7fa9\u3055\u308c\u305f\u30d6\u30e9\u30f3\u30c1\u306e\u81ea\u52d5\u30c7\u30d7\u30ed\u30a4\u3084\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u3078\u306e\u5bfe\u5fdc\u306a\u3069\u3001\u3055\u307e\u3056\u307e\u306a\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002</p> <p>\u30c7\u30d7\u30ed\u30a4\u30bf\u30fc\u30b2\u30c3\u30c8\u306b\u3064\u3044\u3066\u8a73\u3057\u304f\u8aad\u3080\u3002</p>"},{"location":"ja/concepts-basics/building-blocks/groups/","title":"\u30b0\u30eb\u30fc\u30d7","text":"<p>\u30b0\u30eb\u30fc\u30d7 \u306f\u30ed\u30fc\u30eb\u3092\u6301\u3064\u30e6\u30fc\u30b6\u30fc\u3067\u69cb\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u7d44\u7e54\u306f1\u3064\u4ee5\u4e0a\u306e\u30b0\u30eb\u30fc\u30d7\u3092\u6301\u3064\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u5404\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u306f1\u3064\u4ee5\u4e0a\u306e\u30b0\u30eb\u30fc\u30d7\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u307e\u3059\u3002\u30b0\u30eb\u30fc\u30d7\u306f\u8907\u6570\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u5272\u308a\u5f53\u3066\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30b0\u30eb\u30fc\u30d7\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3068\u306f\u72ec\u7acb\u3057\u3066\u4f5c\u6210\u3055\u308c\u3001\u305d\u306e\u5f8c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u307e\u3059\u3002</p> <p>\u7d44\u7e54\u306b\u306f\u3001\u5272\u308a\u5f53\u3066\u3089\u308c\u308b\u30b0\u30eb\u30fc\u30d7\u306e\u6570\u3092\u5236\u9650\u3059\u308b\u30af\u30a9\u30fc\u30bf\u304c\u3042\u308a\u307e\u3059\u3002\u30af\u30a9\u30fc\u30bf\u3092\u5909\u66f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u3042\u306a\u305f\u306eLagoon\u7ba1\u7406\u8005\u306b\u9023\u7d61\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/concepts-basics/building-blocks/notifications/","title":"\u901a\u77e5","text":"<p>\u901a\u77e5 \u306f\u3001Lagoon\u304c\u30e6\u30fc\u30b6\u30fc\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u9032\u884c\u72b6\u6cc1\u3092\u4f1d\u3048\u308b\u65b9\u6cd5\u3067\u3059\u3002\u901a\u77e5\u306b\u306f\u3044\u304f\u3064\u304b\u306e\u7a2e\u985e\u304c\u3042\u308a\u307e\u3059:</p> <ul> <li>Slack</li> <li>RocketChat</li> <li>\u30e1\u30fc\u30eb</li> <li>Webhook</li> <li>Microsoft Teams</li> </ul> <p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306f\u4e00\u3064\u307e\u305f\u306f\u8907\u6570\u306e\u901a\u77e5\u3092\u6301\u3064\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u7d44\u7e54\u306f\u3001\u3059\u3079\u3066\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3059\u308b\u901a\u77e5\u306e\u5272\u308a\u5f53\u3066\u67a0\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002\u901a\u77e5\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3068\u306f\u72ec\u7acb\u3057\u3066\u4f5c\u6210\u3055\u308c\u3001\u305d\u306e\u5f8c\u4e00\u3064\u307e\u305f\u306f\u8907\u6570\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u5272\u308a\u5f53\u3066\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p>Lagoon UI\u3067\u901a\u77e5\u3092\u30b9\u30c6\u30c3\u30d7\u30d0\u30a4\u30b9\u30c6\u30c3\u30d7\u3067\u8ffd\u52a0\u3059\u308b\u65b9\u6cd5\u3092\u5b66\u3076.</p> <p>API\u3092\u901a\u3058\u3066\u901a\u77e5\u3092\u8ffd\u52a0\u3059\u308b\u65b9\u6cd5\u3092\u5b66\u3076.</p>"},{"location":"ja/concepts-basics/building-blocks/organizations/","title":"\u7d44\u7e54","text":"<p>\u7d44\u7e54 \u306f\u3001\u4e00\u3064\u4ee5\u4e0a\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3001\u30b0\u30eb\u30fc\u30d7\u3001\u30e6\u30fc\u30b6\u30fc\u3001\u901a\u77e5\u3092\u542b\u3080\u3053\u3068\u304c\u3067\u304d\u308b\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3067\u3059\u3002\u7d44\u7e54\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u5236\u5fa1\u3057\u3001\u30b0\u30eb\u30fc\u30d7\u306e\u4f5c\u6210\u3001\u30e6\u30fc\u30b6\u30fc\u306e\u8ffd\u52a0\u3068\u524a\u9664\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3078\u306e\u30b0\u30eb\u30fc\u30d7\u306e\u5272\u308a\u5f53\u3066\u3092\u5bb9\u6613\u306b\u3057\u307e\u3059\u3002</p> <p>Organizations\u306f\u3001\u69cb\u9020\u306e\u5c64\u3092\u8ffd\u52a0\u3057\u3066\u73fe\u5b9f\u3092\u6a21\u5023\u3059\u308b\u306e\u306b\u5f79\u7acb\u3061\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001\u7279\u5b9a\u306e\u30b5\u30a4\u30c8\u3067\u4f5c\u696d\u3059\u308b\u30c1\u30fc\u30e0\u3092\u53cd\u6620\u3059\u308b\u305f\u3081\u306b\u3001\u7d44\u7e54\u3092\u4f5c\u6210\u3059\u308b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u3067\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u305d\u306e\u7d44\u7e54\u306b\u306f\u3001\u305d\u306e\u30b5\u30a4\u30c8\u3092\u69cb\u6210\u3059\u308b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3084\u3001 \u958b\u767a\u8005\u3068 \u547c\u3070\u308c\u308b\u30b0\u30eb\u30fc\u30d7\u306e\u30e6\u30fc\u30b6\u30fc\u3068\u3057\u3066\u30b5\u30a4\u30c8\u4f5c\u696d\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3059\u3079\u3066\u306e\u4eba\u3005\u3001\u305d\u3057\u3066\u30b5\u30a4\u30c8\u3084\u554f\u984c\u3092\u95b2\u89a7\u3059\u308b\u305f\u3081\u3060\u3051\u306bLagoon\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u5225\u306e\u30b0\u30eb\u30fc\u30d7\uff08 \u95b2\u89a7\u8005 \u3068\u547c\u3070\u308c\u308b\uff09\u304c\u542b\u307e\u308c\u3001\u305d\u308c\u305e\u308c\u9069\u5207\u306a\u30ed\u30fc\u30eb\u3092\u6301\u3061\u307e\u3059\u3002</p> <p>\u7d44\u7e54\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3001\u30b0\u30eb\u30fc\u30d7\u3001\u901a\u77e5\u3001\u74b0\u5883\u306e\u6570\u3092\u5236\u9650\u3059\u308b\u305f\u3081\u306e\u30af\u30a9\u30fc\u30bf\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u30af\u30a9\u30fc\u30bf\u3092\u5909\u66f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u3042\u306a\u305f\u306eLagoon\u7ba1\u7406\u8005\u306b\u9023\u7d61\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u7d44\u7e54\u3068\u306e\u3084\u308a\u3068\u308a\u306b\u3064\u3044\u3066\u3082\u3063\u3068\u5b66\u3076.</p>"},{"location":"ja/concepts-basics/building-blocks/projects/","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8","text":"<p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8 \u306f\u3001Lagoon\u4e0a\u3067\u52d5\u4f5c\u3059\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u3059\u3002\u7d44\u7e54\u306f1\u3064\u4ee5\u4e0a\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u6301\u3064\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u306f\u30011\u4eba\u4ee5\u4e0a\u306e\u30e6\u30fc\u30b6\u30fc\u3001\u901a\u77e5\u3001\u305d\u3057\u3066\u5c11\u306a\u304f\u3068\u30821\u3064\u306e\u30c7\u30d7\u30ed\u30a4\u30bf\u30fc\u30b2\u30c3\u30c8\u304c\u542b\u307e\u308c\u307e\u3059\u3002\u7d44\u7e54\u306f\u3001\u4f5c\u6210\u3067\u304d\u308b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u91cf\u3092\u5236\u9650\u3059\u308b\u305f\u3081\u306e\u30af\u30a9\u30fc\u30bf\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/concepts-basics/building-blocks/roles/","title":"\u30ed\u30fc\u30eb","text":"<p>\u30ed\u30fc\u30eb \u306f\u30e6\u30fc\u30b6\u30fc\u304c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306e\u3082\u306e\u3067\u3059\u3002\u30e6\u30fc\u30b6\u30fc\u306f\u30b0\u30eb\u30fc\u30d7\u3084\u7d44\u7e54\u3067\u30ed\u30fc\u30eb\u3092\u4e0e\u3048\u3089\u308c\u307e\u3059\u3002</p> <p>\u30b0\u30eb\u30fc\u30d7\u306e\u30e1\u30f3\u30d0\u30fc\u306b\u306f\u4ee5\u4e0b\u306e\u30ed\u30fc\u30eb\u3092\u4e0e\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059:</p> <ul> <li>\u30b2\u30b9\u30c8</li> <li>\u30ec\u30dd\u30fc\u30bf\u30fc</li> <li>\u958b\u767a\u8005</li> <li>\u30e1\u30f3\u30c6\u30ca\u30fc</li> <li>\u30aa\u30fc\u30ca\u30fc</li> </ul> <p>\u3053\u308c\u3089\u306e\u30ed\u30fc\u30eb\u3068\u305d\u306e\u6a29\u9650\u306b\u3064\u3044\u3066\u306f\u3001\u3053\u3053\u3067\u8a73\u3057\u304f\u8aac\u660e\u3055\u308c\u3066\u3044\u307e\u3059:\u30ed\u30fc\u30eb\u30d9\u30fc\u30b9\u306e\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u3002</p> <p>\u7d44\u7e54\u306e\u30e1\u30f3\u30d0\u30fc\u306b\u306f\u4ee5\u4e0b\u306e\u30ed\u30fc\u30eb\u3092\u4e0e\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059:</p> <ul> <li>\u7d44\u7e54\u306e\u30aa\u30fc\u30ca\u30fc</li> <li>\u7d44\u7e54\u306e\u30d3\u30e5\u30fc\u30a2</li> </ul> <p>\u30af\u30a9\u30fc\u30bf\u306e\u5909\u66f4</p> <p>\u30af\u30a9\u30fc\u30bf\u3092\u5909\u66f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u3042\u306a\u305f\u306eLagoon\u7ba1\u7406\u8005\u306b\u9023\u7d61\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u7d44\u7e54\u306e\u30aa\u30fc\u30ca\u30fc \u306f\u3001\u30af\u30a9\u30fc\u30bf\u306e\u5909\u66f4\u3092\u9664\u304f\u3001\u7d44\u7e54\u306e\u7ba1\u7406\u306b\u95a2\u9023\u3059\u308b\u3059\u3079\u3066\u306e\u4e8b\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u5f7c\u3089\u306f\u30e6\u30fc\u30b6\u30fc\u3001\u30b0\u30eb\u30fc\u30d7\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3001\u30c7\u30d7\u30ed\u30a4\u30bf\u30fc\u30b2\u30c3\u30c8\u3001\u901a\u77e5\u306e\u8ffd\u52a0\u3084\u524a\u9664\u304c\u3067\u304d\u307e\u3059\u3002</p> <p>\u7d44\u7e54\u306e\u95b2\u89a7\u8005 \u306f\u3001\u7d44\u7e54\u3092\u95b2\u89a7\u3059\u308b\u3060\u3051\u306e\u8aad\u307f\u53d6\u308a\u5c02\u7528\u306e\u30ed\u30fc\u30eb\u3067\u3042\u308a\u3001\u5909\u66f4\u3084\u8ffd\u52a0\u306f\u3067\u304d\u307e\u305b\u3093\u3002\u5f7c\u3089\u306f\u7d44\u7e54\u5185\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3001\u30b0\u30eb\u30fc\u30d7\u3001\u30e6\u30fc\u30b6\u30fc\u3001\u901a\u77e5\u3092\u95b2\u89a7\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u304c\u3001\u5909\u66f4\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002</p> <p>\u30aa\u30fc\u30ca\u30fc\u307e\u305f\u306f\u30d3\u30e5\u30fc\u30a2\u3068\u3057\u3066\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u30e6\u30fc\u30b6\u30fc\u306f\u3001\u7d44\u7e54\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002</p>"},{"location":"ja/concepts-basics/building-blocks/users/","title":"\u30e6\u30fc\u30b6\u30fc","text":"<p>\u30e6\u30fc\u30b6\u30fc \u306f\u3001Lagoon\u30b7\u30b9\u30c6\u30e0\u3068\u3084\u308a\u53d6\u308a\u3059\u308b\u305f\u3081\u306eLagoon\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u3059\u3002\u30e6\u30fc\u30b6\u30fc\u306f\u4e00\u3064\u307e\u305f\u306f\u8907\u6570\u306e\u7d44\u7e54\u3084\u30b0\u30eb\u30fc\u30d7\u306b\u6240\u5c5e\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u3001\u5404\u30b0\u30eb\u30fc\u30d7\u306f\u3055\u307e\u3056\u307e\u306a\u8a31\u53ef\u3092\u4ed8\u4e0e\u3059\u308b\u7570\u306a\u308b\u30ed\u30fc\u30eb\u3092\u6301\u3064\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u7d44\u7e54\u3001\u30b0\u30eb\u30fc\u30d7\u3001\u304a\u3088\u3073\u30ed\u30fc\u30eb\u306f\u3001\u30e6\u30fc\u30b6\u30fc\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u3092\u4ed8\u4e0e\u3057\u307e\u3059\u3002</p> <p>\u30e6\u30fc\u30b6\u30fc\u306e\u30ed\u30fc\u30eb\u306b\u3064\u3044\u3066\u8a73\u3057\u304f\u8aad\u3080\u3002</p>"},{"location":"ja/contributing-to-lagoon/api-debugging/","title":"API\u30c7\u30d0\u30c3\u30b0","text":"<p>1 . <code>services/api/package.json</code>\u306b\u3042\u308b<code>dev</code>\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u4ee5\u4e0b\u3092\u542b\u3080\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059:</p> services/api/package.json<pre><code>node --inspect=0.0.0.0:9229\n</code></pre> <p>2 . <code>docker-compose.yml</code>\u3092\u66f4\u65b0\u3057\u3066\u3001<code>dist</code>\u30d5\u30a9\u30eb\u30c0\u3092\u30de\u30c3\u30d7\u3057\u3001<code>9229</code>\u30dd\u30fc\u30c8\u3092\u516c\u958b\u3057\u307e\u3059:</p> docker-compose.yml<pre><code>  api:\nimage: ${IMAGE_REPO:-lagoon}/api\ncommand: yarn run dev\nvolumes:\n- ./services/api/src:/app/services/api/src\n- ./services/api/dist:/app/services/api/dist\ndepends_on:\n- api-db\n- local-api-data-watcher-pusher\n- keycloak\nports:\n- '3000:3000'\n- '9229:9229'\n</code></pre> <p>3 . \u6b21\u306e\u5185\u5bb9\u3092<code>.vscode/launch.json</code>\u306b\u8ffd\u52a0\u3057\u307e\u3059:</p> .vscode/launch.json<pre><code>{\n// IntelliSense\u3092\u4f7f\u7528\u3057\u3066\u53ef\u80fd\u306a\u5c5e\u6027\u306b\u3064\u3044\u3066\u5b66\u7fd2\u3057\u307e\u3059\u3002\n// \u65e2\u5b58\u306e\u5c5e\u6027\u306e\u8aac\u660e\u3092\u8868\u793a\u3059\u308b\u306b\u306f\u3001\u30db\u30d0\u30fc\u3057\u307e\u3059\u3002\n// \u8a73\u7d30\u60c5\u5831\u306f\u3001\u6b21\u306eURL\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044:https://go.microsoft.com/fwlink/?linkid=830387.\n\"version\": \"0.2.0\",\n\"configurations\": [\n{\n\"name\": \"Docker: Attach to Node\",\n\"type\": \"node\",\n\"request\": \"attach\",\n\"port\": 9229,\n\"address\": \"localhost\",\n\"outFiles\": [\"${workspaceRoot}/app/services/api/dist/**/*.js\"],\n\"localRoot\": \"${ \"workspaceFolder}/services/api\",\n      \"remoteRoot\": \"/app/services/api\",\n      \"sourceMaps\": true,\n      \"protocol\": \"inspector\"\n    }\n  ]\n}\n4 . \u30b3\u30f3\u30c6\u30ca\u306e\u518d\u69cb\u7bc9/\u518d\u8d77\u52d5:\n```bash title=\"\u30b3\u30f3\u30c6\u30ca\u306e\u518d\u8d77\u52d5\"\nrm build/api &amp;&amp; make build/api &amp;&amp; docker-compose restart api\n</code></pre> <p>5 . VScode\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002</p>"},{"location":"ja/contributing-to-lagoon/developing-lagoon/","title":"Lagoon\u306e\u958b\u767a","text":"<p>Lagoon\u306e\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u306f\u3001\u73fe\u5728\u3001\u30ed\u30fc\u30ab\u30eb\u306eKubernetes\u30af\u30e9\u30b9\u30bf\u30fc\u307e\u305f\u306fDocker Compose(\u30d5\u30a9\u30fc\u30eb\u30d0\u30c3\u30af\u3068\u3057\u3066)\u3092\u7d4c\u7531\u3057\u3066\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p>\u6ce8\u610f:</p> <p>\u30d5\u30eb\u306eLagoon\u30b9\u30bf\u30c3\u30af\u306f\u3001\u73fe\u5728ARM\u30d9\u30fc\u30b9\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3(M1/M2 Apple Silicon\u30d9\u30fc\u30b9\u306e\u30de\u30b7\u30f3\u306a\u3069)\u3068\u4e92\u63db\u6027\u306e\u306a\u3044\u4e0a\u6d41\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u4f9d\u5b58\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u305f\u3081\u3001\u3053\u308c\u3089\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u4e0a\u3067<code>lagoon-core</code>\u307e\u305f\u306f<code>lagoon-remote</code>\u3092\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u307e\u305f\u306f\u958b\u767a\u3059\u308b\u3053\u3068\u306f\u73fe\u5728\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u8a73\u7d30\u306fhttps://github.com/uselagoon/lagoon/issues/3189 \u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/contributing-to-lagoon/developing-lagoon/#docker","title":"Docker","text":"<p>Docker\u306f\u3001\u30ed\u30fc\u30ab\u30eb\u3067Lagoon\u3092\u30d3\u30eb\u30c9\u304a\u3088\u3073\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/contributing-to-lagoon/developing-lagoon/#dockerdocker-compose","title":"Docker\u3068Docker Compose\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>Docker\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u3001\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002</p> <p>Docker Compose\u306f\u3001Docker for Mac\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002Linux\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u3064\u3044\u3066\u306f\u3053\u3061\u3089\u306e\u624b\u9806\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/contributing-to-lagoon/developing-lagoon/#docker_1","title":"Docker\u306e\u8a2d\u5b9a","text":"<p>Docker\u306e\u30bb\u30ad\u30e5\u30a2\u3067\u306a\u3044\u30ec\u30b8\u30b9\u30c8\u30ea\u3092\u66f4\u65b0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u306e\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u3053\u3061\u3089\u3092\u8aad\u3093\u3067\u304f\u3060\u3055\u3044\u3002\u518d\u8a2d\u5b9a\u3092\u907f\u3051\u308b\u305f\u3081\u3001\u5168\u3066\u306e\u30ed\u30fc\u30ab\u30ebIPv4\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30a2\u30c9\u30ec\u30b9\u30b9\u30da\u30fc\u30b9\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3092\u304a\u3059\u3059\u3081\u3057\u307e\u3059\u3002 Kubernetes\u3068Docker Compose\u3002\u305f\u3068\u3048\u3070\u3001<code>\"insecure-registries\" : [\"172.16.0.0/12\",\"192.168.0.0/16\"],</code></p>"},{"location":"ja/contributing-to-lagoon/developing-lagoon/#docker_2","title":"\u5341\u5206\u306aDocker\u30ea\u30bd\u30fc\u30b9\u306e\u5272\u308a\u5f53\u3066","text":"<p>\u30ed\u30fc\u30ab\u30eb\u30de\u30b7\u30f3\u4e0a\u3067Lagoon\u3001Kubernetes\u3001\u307e\u305f\u306fDocker\u30af\u30e9\u30b9\u30bf\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u591a\u304f\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u6d88\u8cbb\u3057\u307e\u3059\u3002Docker\u30db\u30b9\u30c8\u306b\u306f\u6700\u4f4e\u3067\u30828\u3064\u306eCPU\u30b3\u30a2\u306812GB\u306eRAM\u3092\u5272\u308a\u5f53\u3066\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002</p>"},{"location":"ja/contributing-to-lagoon/developing-lagoon/#lagoon_1","title":"\u30ed\u30fc\u30ab\u30eb\u3067Lagoon\u3092\u30d3\u30eb\u30c9\u3059\u308b","text":"<p>\u8b66\u544a</p> <p>Lagoon\u3092\u3053\u306e\u65b9\u6cd5\u3067\u30d3\u30eb\u30c9\u3092\u8003\u3048\u308b\u306e\u306f\u3001\u305d\u308c\u306b\u6a5f\u80fd\u3084\u6a5f\u80fd\u3092\u958b\u767a\u3057\u305f\u3044\u3001\u307e\u305f\u306f\u5185\u90e8\u30d7\u30ed\u30bb\u30b9\u3092\u30c7\u30d0\u30c3\u30b0\u3057\u305f\u3044\u5834\u5408\u3060\u3051\u3067\u3059\u3002\u307e\u305f\u3001\u30d3\u30eb\u30c9\u305b\u305a\u306bLagoon\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u65b9\u6cd5(\u3064\u307e\u308a\u3001\u516c\u958b\u3055\u308c\u305f\u30ea\u30ea\u30fc\u30b9\u3092\u4f7f\u7528\u3059\u308b\u65b9\u6cd5)\u306e\u6307\u793a\u3082\u63d0\u4f9b\u3057\u307e\u3059\u3002</p> <p>\u79c1\u305f\u3061\u306f\u3001\u5fc5\u8981\u306aDocker\u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3057\u3001Kubernetes\u3092\u8a2d\u5b9a\u3057\u3001\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b<code>make</code>(Makefile\u3092\u53c2\u7167)\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002</p> <p>\u79c1\u305f\u3061\u306f\u3001\u307b\u3068\u3093\u3069\u306e\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u30b7\u30ca\u30ea\u30aa\u3092\u30ab\u30d0\u30fc\u3059\u308b\u305f\u3081\u306b\u3001Makefile\u306b\u3044\u304f\u3064\u304b\u306e\u30eb\u30fc\u30c1\u30f3\u3092\u63d0\u4f9b\u3057\u307e\u3057\u305f\u3002\u3053\u3053\u3067\u306f\u3001\u5b8c\u5168\u306a\u30d7\u30ed\u30bb\u30b9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p>"},{"location":"ja/contributing-to-lagoon/developing-lagoon/#_1","title":"\u30a4\u30e1\u30fc\u30b8\u306e\u30d3\u30eb\u30c9","text":"<ol> <li>\u3053\u3053\u3067\u306e<code>-j8</code>\u306f\u3001make\u306b\u30d3\u30eb\u30c9\u3092\u901f\u3081\u308b\u305f\u3081\u306b\u4e26\u5217\u30678\u3064\u306e\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u6307\u793a\u3057\u307e\u3059\u3002\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u8abf\u6574\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u3067<code>SCAN_IMAGES=false</code>\u3092\u8a2d\u5b9a\u3057\u3066\u3001\u30d3\u30eb\u30c9\u3057\u305f\u30a4\u30e1\u30fc\u30b8\u3092\u30b9\u30ad\u30e3\u30f3\u3057\u306a\u3044\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002 \u8106\u5f31\u6027\u3002\u3053\u308c\u3092true\u306b\u8a2d\u5b9a\u3059\u308b\u3068\u3001\u30b9\u30ad\u30e3\u30f3\u7d50\u679c\u3092\u542b\u3080<code>scan.txt</code>\u30d5\u30a1\u30a4\u30eb\u304c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8\u306b\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002</li> </ol> \u30a4\u30e1\u30fc\u30b8\u306e\u30d3\u30eb\u30c9<pre><code>make -j8 build\n</code></pre> <ol> <li>Makefile\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u3067Lagoon\u306e\u30c6\u30b9\u30c8\u30eb\u30fc\u30c6\u30a3\u30f3\u3092\u958b\u59cb\u3057\u307e\u3059(\u3059\u3079\u3066\u306e\u30c6\u30b9\u30c8)\u3002</li> </ol> \u30c6\u30b9\u30c8\u958b\u59cb<pre><code>make kind/test\n</code></pre> <p>\u8b66\u544a</p> <p>\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b\u8a2d\u5b9a\u3055\u308c\u305f\u30c6\u30b9\u30c8\u304c\u591a\u6570\u3042\u308a\u307e\u3059 - \u6a5f\u80fd\u3092\u78ba\u4fdd\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u6700\u4f4e\u9650\u306e\u30ed\u30fc\u30ab\u30eb\u3067\u306e\u30c6\u30b9\u30c8\u306e\u307f\u3092\u8003\u616e\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u308c\u306f\u3001Makefile\u306e<code>TESTS</code>\u5909\u6570\u304b\u3089\u30c6\u30b9\u30c8\u3092\u6307\u5b9a\u3057\u305f\u308a\u524a\u9664\u3057\u305f\u308a\u3059\u308b\u3053\u3068\u3067\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p>\u3053\u306e\u30d7\u30ed\u30bb\u30b9\u3067\u306f\u6b21\u306e\u3053\u3068\u304c\u884c\u308f\u308c\u307e\u3059:</p> <ol> <li>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u30c4\u30fc\u30eb\u306e\u6b63\u3057\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059 - <code>kind</code>\u3001<code>kubectl</code>\u3001<code>helm</code>\u3001<code>jq</code>\u3002</li> <li>Lagoon\u304c\u6a5f\u80fd\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306aHelm\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u66f4\u65b0\u3057\u307e\u3059\u3002</li> <li>\u524d\u306e\u30b9\u30c6\u30c3\u30d7\u3067\u6b63\u3057\u3044\u30a4\u30e1\u30fc\u30b8\u304c\u3059\u3079\u3066\u30d3\u30eb\u30c9\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</li> <li>\u30ed\u30fc\u30ab\u30eb\u306eKinD\u30af\u30e9\u30b9\u30bf\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u30ed\u30fc\u30ab\u30eb\u306eDocker\u30b3\u30f3\u30c6\u30ca\u306b\u5b8c\u5168\u306b\u7a3c\u50cd\u3059\u308bKubernetes\u30af\u30e9\u30b9\u30bf\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002\u3053\u306e\u30af\u30e9\u30b9\u30bf\u306f\u3001\u30d3\u30eb\u30c9\u3057\u305fLagoon\u30a4\u30e1\u30fc\u30b8\u3092\u30d7\u30c3\u30b7\u30e5\u3059\u308b\u305f\u3081\u306b\u63d0\u4f9b\u3055\u308c\u305f\u30a4\u30e1\u30fc\u30b8\u30ec\u30b8\u30b9\u30c8\u30ea\u3068\u901a\u4fe1\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u307e\u305f\u3001\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u306e\u305f\u3081\u306b\u30db\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3082\u8a31\u53ef\u3055\u308c\u3066\u3044\u307e\u3059\u3002</li> <li>Lagoon\u3092 https://github.com/uselagoon/lagoon-charts (\u5fc5\u8981\u306b\u5fdc\u3058\u3066Makefile\u306e<code>CHARTS_TREEISH</code>\u5909\u6570\u3092\u4f7f\u7528\u3057\u3066\u30d6\u30e9\u30f3\u30c1\u3092\u5236\u5fa1\u3057\u3066\u304f\u3060\u3055\u3044).</li> <li>Harbor Image\u30ec\u30b8\u30b9\u30c8\u30ea\u3092KinD\u30af\u30e9\u30b9\u30bf\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001\u305d\u306e\u30a4\u30f3\u30b0\u30ec\u30b9\u3068\u30a2\u30af\u30bb\u30b9\u3092\u9069\u5207\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002</li> <li>Docker\u306f\u30d3\u30eb\u30c9\u3057\u305fLagoon\u306e\u30a4\u30e1\u30fc\u30b8\u3092Harbor\u30a4\u30e1\u30fc\u30b8\u30ec\u30b8\u30b9\u30c8\u30ea\u306b\u30d7\u30c3\u30b7\u30e5\u3057\u307e\u3059\u3002</li> <li>\u6b21\u306b\u3001lagoon-charts\u306eMakefile\u3092\u4f7f\u7528\u3057\u3066\u3001\u6b8b\u308a\u306e\u8a2d\u5b9a\u624b\u9806\u3092\u9032\u884c\u3057\u307e\u3059\u3002</li> <li>\u9069\u5207\u306a\u30a4\u30f3\u30b0\u30ec\u30b9\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059 - NGINX Ingress Controller\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002</li> <li>\u7279\u5b9a\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u8981\u6c42\u3092\u51e6\u7406\u3059\u308b\u30ed\u30fc\u30ab\u30ebNFS\u30b5\u30fc\u30d0\u30fc\u30d7\u30ed\u30d3\u30b8\u30e7\u30ca\u30fc\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059 - Read-Write-Many\u64cd\u4f5c(RWX)\u3092\u51e6\u7406\u3059\u308b\u3082\u306e\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002</li> <li>\u305d\u306e\u5f8c\u3001Lagoon Core\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3001\u30af\u30e9\u30b9\u30bf\u30fc\u30ed\u30fc\u30ab\u30eb\u30a4\u30e1\u30fc\u30b8\u30ec\u30b8\u30b9\u30c8\u30ea\u306b\u30d7\u30c3\u30b7\u30e5\u3055\u308c\u305f\u30ed\u30fc\u30ab\u30eb\u3067\u30d3\u30eb\u30c9\u3055\u308c\u305f\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u7528\u3057\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a2d\u5b9a\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u30ed\u30fc\u30ab\u30eb\u30c6\u30b9\u30c8\u306b\u5fc5\u8981\u3068\u3055\u308c\u306a\u3044\u4e00\u90e8\u306e\u30b5\u30fc\u30d3\u30b9\u304c\u9664\u5916\u3055\u308c\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u3001API\u3068Keycloak\u304c\u30aa\u30f3\u30e9\u30a4\u30f3\u306b\u306a\u308b\u306e\u3092\u5f85\u3061\u307e\u3059\u3002</li> <li>DBaaS\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059 - MariaDB\u3001PostgreSQL\u3001MongoDB\u3002\u3053\u306e\u30b9\u30c6\u30c3\u30d7\u3067\u306f\u3001\u30b9\u30bf\u30f3\u30c9\u30a2\u30ed\u30f3\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304c\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3055\u308c\u3001 \u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u4e2d\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3068\u3001\u30af\u30e9\u30a6\u30c9\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc(\u4f8b\u3048\u3070\u3001Cloud SQL\u3001RDS\u3001Azure Database\u306a\u3069)\u7d4c\u7531\u3067\u5229\u7528\u53ef\u80fd\u306a\u30de\u30cd\u30fc\u30b8\u30c9\u30b5\u30fc\u30d3\u30b9\u3092\u30a8\u30df\u30e5\u30ec\u30fc\u30c8\u3057\u307e\u3059\u3002</li> <li>\u6b21\u306bLagoon Remote\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3001Lagoon Core\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3001\u30ed\u30fc\u30ab\u30eb\u30b9\u30c8\u30ec\u30fc\u30b8\u3068\u901a\u4fe1\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u3053\u308c\u304c\u5b8c\u4e86\u3059\u308b\u306e\u3092\u5f85\u3063\u3066\u304b\u3089\u7d9a\u884c\u3057\u307e\u3059\u3002</li> <li>\u30c6\u30b9\u30c8\u3092\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3059\u308b\u305f\u3081\u306b\u3001Lagoon Test\u30c1\u30e3\u30fc\u30c8\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u30c6\u30b9\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u30db\u30b9\u30c8\u3059\u308b\u30ed\u30fc\u30ab\u30eb\u306eGit\u30b5\u30fc\u30d0\u30fc\u304c\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3055\u308c\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30c6\u30b9\u30c8\u30e6\u30fc\u30b6\u30fc\u3001\u30a2\u30ab\u30a6\u30f3\u30c8\u3001\u8a2d\u5b9a\u3067Lagoon API\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304c\u4e8b\u524d\u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\u305d\u308c\u304b\u3089\u3001\u30c6\u30b9\u30c8\u3092\u958b\u59cb\u3059\u308b\u524d\u306b\u6e96\u5099\u30c1\u30a7\u30c3\u30af\u3092\u884c\u3044\u307e\u3059\u3002</li> <li>Lagoon\u306f\u3001Makefile\u306eTESTS\u5909\u6570\u3067\u6307\u5b9a\u3055\u308c\u305f\u3059\u3079\u3066\u306e\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u5404\u30c6\u30b9\u30c8\u306f\u81ea\u8eab\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3068\u74b0\u5883\u3092\u4f5c\u6210\u3057\u3001\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u305f\u5f8c\u306b\u74b0\u5883\u3068\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u524a\u9664\u3057\u307e\u3059\u3002\u30c6\u30b9\u30c8\u306e\u5b9f\u884c\u7d50\u679c\u306f<code>lagoon-test-suite-*</code>\u30dd\u30c3\u30c9\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u30ed\u30b0\u306b\u51fa\u529b\u3055\u308c\u3001\u30b3\u30f3\u30c6\u30ca\u3054\u3068\u306b1\u3064\u306e\u30c6\u30b9\u30c8\u3092\u53c2\u7167\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</li> </ol> <p>\u7406\u60f3\u7684\u306b\u306f\u3001\u3059\u3079\u3066\u306e\u30c6\u30b9\u30c8\u304c\u901a\u904e\u3057\u3001\u3059\u3079\u3066\u7d42\u4e86\u3057\u307e\u3059\uff01</p>"},{"location":"ja/contributing-to-lagoon/developing-lagoon/#_2","title":"\u30c6\u30b9\u30c8\u306e\u9032\u884c\u72b6\u6cc1\u3068\u30ed\u30fc\u30ab\u30eb\u30af\u30e9\u30b9\u30bf\u30fc\u306e\u8868\u793a","text":"<p>\u30c6\u30b9\u30c8\u30eb\u30fc\u30c1\u30f3\u306f\u30ed\u30fc\u30ab\u30eb\u306eKubeconfig\u30d5\u30a1\u30a4\u30eb(\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30eb\u30fc\u30c8\u306b<code>kubeconfig.kind.lagoon</code>\u3068\u3044\u3046\u540d\u524d\u3067)\u3092\u4f5c\u6210\u3057\u3001Kubernetes\u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3001\u30d3\u30e5\u30fc\u30ef\u3001CLI\u3068\u3068\u3082\u306b\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u30ed\u30fc\u30ab\u30eb\u30af\u30e9\u30b9\u30bf\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306e\u30c4\u30fc\u30eb\u3067\u3059\u3002\u79c1\u305f\u3061\u306f\u3001Lens\u3001Octant\u3001kubectl\u3001Portainer\u3068\u3044\u3063\u305f\u30c4\u30fc\u30eb\u3092\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u306b\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002Lagoon Core\u3001Remote\u3001Tests\u306f\u3059\u3079\u3066<code>Lagoon</code>\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u3067\u30d3\u30eb\u30c9\u3055\u308c\u3001\u5404\u74b0\u5883\u306f\u81ea\u8eab\u306e\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u3092\u4f5c\u6210\u3057\u3066\u5b9f\u884c\u3059\u308b\u305f\u3081\u3001\u78ba\u8a8d\u3059\u308b\u969b\u306b\u306f\u6b63\u3057\u3044\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u30ed\u30fc\u30ab\u30eb\u30af\u30e9\u30b9\u30bf\u3068kubectl\u3092\u4f7f\u7528\u3059\u308b\u306b\u306f\u3001\u6b63\u3057\u3044Kubeconfig\u3092\u4f7f\u7528\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u3059\u3079\u3066\u306e\u30b3\u30de\u30f3\u30c9\u3067\u884c\u3046\u3053\u3068\u3082\u3001\u597d\u307f\u306e\u30c4\u30fc\u30eb\u306b\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059:</p> kubeconfig.kind.lagoon<pre><code>KUBECONFIG=./kubeconfig.kind.lagoon kubectl get pods -n lagoon\n</code></pre> <p>\u30ed\u30fc\u30ab\u30eb\u306eLagoon\u3092\u30d3\u30eb\u30c9\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u308bHelm\u30c1\u30e3\u30fc\u30c8\u306f\u3001\u30ed\u30fc\u30ab\u30eb\u306e\u30d5\u30a9\u30eb\u30c0\u306b\u30af\u30ed\u30fc\u30f3\u3055\u308c\u3001<code>lagoon-charts.kind.lagoon</code>\u306b\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u3053\u3067\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u5f8c\u3067\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u7c21\u5358\u306a\u5909\u66f4\u306e\u65b9\u6cd5\u3092\u8aac\u660e\u3057\u307e\u3059\u3002</p>"},{"location":"ja/contributing-to-lagoon/developing-lagoon/#lagoon_2","title":"\u30ed\u30fc\u30ab\u30ebLagoon\u30af\u30e9\u30b9\u30bf\u3068\u5bfe\u8a71\u3059\u308b","text":"<p>Makefile\u306b\u306f\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305fLagoon\u3068\u306e\u5bfe\u8a71\u3092\u7c21\u5358\u306b\u3059\u308b\u3044\u304f\u3064\u304b\u306e\u30eb\u30fc\u30c1\u30f3\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059:</p> Create local ports<pre><code>make kind/port-forwards\n</code></pre> <p>\u3053\u308c\u306b\u3088\u308a\u3001UI\u3092\u516c\u958b\u3059\u308b\u305f\u3081\u306e\u30ed\u30fc\u30ab\u30eb\u30dd\u30fc\u30c8\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002 6060)\u3001API (7070)\u3001\u305d\u3057\u3066 Keycloak (8080)\u3067\u3059\u3002\u3053\u308c\u306f <code>stdout</code>\u306b\u30ed\u30b0\u3092\u51fa\u529b\u3059\u308b\u305f\u3081\u3001\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb/\u30a6\u30a3\u30f3\u30c9\u30a6\u3067\u5b9f\u884c\u3059\u3079\u304d\u3067\u3057\u3087\u3046\u3002</p> \u7ba1\u7406\u8005\u306e\u8cc7\u683c\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b<pre><code>make kind/get-admin-creds\n</code></pre> <p>\u3053\u308c\u306b\u3088\u308a\u3001Lagoon\u3068\u3084\u308a\u53d6\u308a\u3059\u308b\u305f\u3081\u306e\u5fc5\u8981\u306a\u8cc7\u683c\u60c5\u5831\u304c\u53d6\u5f97\u3055\u308c\u307e\u3059\u3002</p> <ul> <li>JWT\u306f\u3001\u30ed\u30fc\u30ab\u30eb\u306eGraphQL\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3067bearer\u30c8\u30fc\u30af\u30f3\u3068\u3057\u3066\u4f7f\u7528\u3059\u308b\u305f\u3081\u306e\u7ba1\u7406\u8005\u30b9\u30b3\u30fc\u30d7\u306e\u30c8\u30fc\u30af\u30f3\u3067\u3059\u3002\u8a73\u7d30\u306fGraphQL\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002</li> <li>Keycloak\u306e\"admin\"\u30e6\u30fc\u30b6\u30fc\u7528\u306e\u30c8\u30fc\u30af\u30f3\u304c\u3042\u308a\u3001\u3059\u3079\u3066\u306e\u30e6\u30fc\u30b6\u30fc\u3001\u30b0\u30eb\u30fc\u30d7\u3001\u30ed\u30fc\u30eb\u306a\u3069\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002</li> <li>Lagoon\u306e\"lagoonadmin\"\u30e6\u30fc\u30b6\u30fc\u7528\u306e\u30c8\u30fc\u30af\u30f3\u3082\u3042\u308a\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30b0\u30eb\u30fc\u30d7\u3001\u6a29\u9650\u306a\u3069\u3092\u5272\u308a\u5f53\u3066\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</li> </ul> \u30a4\u30e1\u30fc\u30b8\u306e\u518d\u30d7\u30c3\u30b7\u30e5<pre><code>make kind/dev\n</code></pre> <p>\u3053\u308c\u306b\u3088\u308a\u3001<code>KIND_SERVICES</code>\u306b\u30ea\u30b9\u30c8\u3055\u308c\u305f\u30a4\u30e1\u30fc\u30b8\u304c\u6b63\u3057\u3044\u30bf\u30b0\u3067\u518d\u30d7\u30c3\u30b7\u30e5\u3055\u308c\u3001lagoon-core\u30c1\u30e3\u30fc\u30c8\u304c\u518d\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u306fLagoon\u306e\u30b5\u30fc\u30d3\u30b9\u306b\u5bfe\u3059\u308b\u5c0f\u3055\u306a\u5909\u66f4\u3092\u30c6\u30b9\u30c8\u3059\u308b\u306e\u306b\u4fbf\u5229\u3067\u3059\u304c\u3001\"\u30e9\u30a4\u30d6\"\u958b\u767a\u306f\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u307e\u305a\u3053\u308c\u3089\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u30ed\u30fc\u30ab\u30eb\u3067\u518d\u69cb\u7bc9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u4f8b:<code>rm build/api &amp;&amp; make build/api</code>.</p> typescript\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u30d3\u30eb\u30c9\u3059\u308b<pre><code>make kind/local-dev-patch\n</code></pre> <p>\u3053\u308c\u306b\u3088\u308a\u3001\u30ed\u30fc\u30ab\u30eb\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305fNode.js\u3092\u4f7f\u7528\u3057\u3066typescript\u306e\u30b5\u30fc\u30d3\u30b9\u304c\u30d3\u30eb\u30c9\u3055\u308c\u307e\u3059(\u3053\u308c\u306f &gt;16.0)\u3002\u305d\u306e\u5f8c\u3001\u6b21\u306e\u64cd\u4f5c\u3092\u884c\u3044\u307e\u3059:</p> <ul> <li>Lagoon\u30b5\u30fc\u30d3\u30b9\u304b\u3089\u306e<code>dist</code>\u30d5\u30a9\u30eb\u30c0\u3092Kubernetes\u306e\u6b63\u3057\u3044lagoon-core\u30dd\u30c3\u30c9\u306b\u30de\u30a6\u30f3\u30c8\u3057\u307e\u3059</li> <li>\u30b3\u30fc\u30c9\u306e\u5909\u66f4\u3092\u76e3\u8996\u3059\u308b<code>nodemon</code>\u304c\u52d5\u4f5c\u3057\u3066\u3044\u308b\u30b5\u30fc\u30d3\u30b9\u3068\u5171\u306blagoon-core\u30c1\u30e3\u30fc\u30c8\u3092\u518d\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059</li> <li>\u3053\u308c\u306b\u3088\u308a\u3001Lagoon \u3067\u306e\u30e9\u30a4\u30d6\u958b\u767a\u304c\u5bb9\u6613\u306b\u306a\u308a\u307e\u3059\u3002</li> <li>Kubernetes\u306e\u30dd\u30c3\u30c9\u306b\u5909\u66f4\u304c\u53cd\u6620\u3055\u308c\u308b\u305f\u3081\u306b\u306f\u3001\u6642\u6298\u518d\u30c7\u30d7\u30ed\u30a4\u304c\u5fc5\u8981\u306a\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u7570\u306a\u308b\u30d6\u30e9\u30f3\u30c1\u3092<code>git clean -dfx</code>\u3067\u518d\u30d3\u30eb\u30c9\u3059\u308b\u5834\u5408\u306f\u3001\u305d\u306e\u30b5\u30fc\u30d3\u30b9\u304b\u3089\u306e\u30d3\u30eb\u30c9\u6210\u679c\u7269\u3092\u30af\u30ea\u30fc\u30f3\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u306a\u304a\u3001dist\u30d5\u30a9\u30eb\u30c0\u306fGit\u306b\u3088\u3063\u3066\u7121\u8996\u3055\u308c\u307e\u3059\u3002</li> </ul> \u30ed\u30ae\u30f3\u30b0\u3092\u958b\u59cb<pre><code>make kind/local-dev-logging\n</code></pre> <p>\u3053\u308c\u306b\u3088\u308a\u3001\u30ed\u30fc\u30ab\u30eb\u306eDocker\u306b\u72ec\u7acb\u3057\u305fOpenDistro for Elasticsearch\u30af\u30e9\u30b9\u30bf\u304c\u4f5c\u6210\u3055\u308c\u3001Lagoon\u304c\u3059\u3079\u3066\u306e\u30ed\u30b0(Lagoon\u304a\u3088\u3073\u30d7\u30ed\u30b8\u30a7\u30af\u30c8)\u3092\u305d\u308c\u306b\u9001\u4fe1\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u8a2d\u5b9a\u306flagoon-logging\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> \u30c6\u30b9\u30c8\u3092\u518d\u5b9f\u884c<pre><code>make kind/retest\n# OR\nmake kind/retest TESTS='[features-kubernetes]'\n</code></pre> <p>\u3053\u308c\u306b\u3088\u308a\u3001\u65e2\u5b58\u306e\u30af\u30e9\u30b9\u30bf\u306b\u5bfe\u3059\u308b\u4e00\u9023\u306e\u30c6\u30b9\u30c8(<code>TESTS</code>\u5909\u6570\u3067\u5b9a\u7fa9)\u304c\u518d\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\u30c6\u30b9\u30c8\u7528\u306e\u30a4\u30e1\u30fc\u30b8(tests\u3001local-git\u3001data-watcher-pusher)\u304c\u518d\u30d7\u30c3\u30b7\u30e5\u3055\u308c\u307e\u3059\u3002\u30c6\u30b9\u30c8\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002 TESTS\u5909\u6570\u3092\u30a4\u30f3\u30e9\u30a4\u30f3\u3067\u6e21\u3057\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002</p> <p>\u30c6\u30b9\u30c8\u8a2d\u5b9a\u3092\u66f4\u65b0\u3059\u308b\u5834\u5408\u3001\u30c6\u30b9\u30c8\u30a4\u30e1\u30fc\u30b8\u3092\u518d\u30d3\u30eb\u30c9\u3057\u3066\u30d7\u30c3\u30b7\u30e5\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001<code>rm build/tests &amp;&amp; make build/tests &amp;&amp; make kind/push-images IMAGES='tests' &amp;&amp; make kind/retest TESTS='[api]'</code></p> Push all images<pre><code>make kind/push-images\n# OR\nmake kind/push-images IMAGES='tests local-git'\n</code></pre> <p>\u3053\u308c\u306b\u3088\u308a\u3001\u3059\u3079\u3066\u306e\u30a4\u30e1\u30fc\u30b8\u304c\u30a4\u30e1\u30fc\u30b8\u30ec\u30b8\u30b9\u30c8\u30ea\u306b\u30d7\u30c3\u30b7\u30e5\u3055\u308c\u307e\u3059\u3002<code>IMAGES</code>\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001\u7279\u5b9a\u306e\u30a4\u30e1\u30fc\u30b8\u306b\u30bf\u30b0\u3092\u4ed8\u3051\u3066\u30d7\u30c3\u30b7\u30e5\u3057\u307e\u3059\u3002</p> Remove cluster<pre><code>make kind/clean\n</code></pre> <p>\u3053\u308c\u306b\u3088\u308a\u3001\u30ed\u30fc\u30ab\u30eb\u306eDocker\u304b\u3089KinD Lagoon\u30af\u30e9\u30b9\u30bf\u304c\u524a\u9664\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/contributing-to-lagoon/developing-lagoon/#ansible","title":"Ansible","text":"<p>Lagoon\u30c6\u30b9\u30c8\u3067\u306f\u3001Ansible\u3092\u7528\u3044\u3066\u30c6\u30b9\u30c8\u30b9\u30a4\u30fc\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u7279\u5b9a\u306e\u6a5f\u80fd\u306e\u30c6\u30b9\u30c8\u7bc4\u56f2\u306f\u3001\u305d\u308c\u305e\u308c\u306e\u30eb\u30fc\u30c1\u30f3\u306b\u5206\u5272\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u30ed\u30fc\u30ab\u30eb\u3067\u958b\u767a\u4f5c\u696d\u3092\u884c\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u5b9f\u884c\u3059\u308b\u30c6\u30b9\u30c8\u3092\u9078\u629e\u3057\u3001Makefile\u5185\u306e<code>$TESTS</code>\u5909\u6570\u3092\u66f4\u65b0\u3057\u3066\u3001\u540c\u6642\u306b\u5b9f\u884c\u3055\u308c\u308b\u30c6\u30b9\u30c8\u3092\u6e1b\u3089\u3057\u307e\u3059\u3002</p> <p>\u3053\u308c\u3089\u306e\u30c6\u30b9\u30c8\u306e\u8a2d\u5b9a\u306f3\u3064\u306e\u30b5\u30fc\u30d3\u30b9\u3067\u4fdd\u6301\u3055\u308c\u3066\u3044\u307e\u3059:</p> <ul> <li><code>tests</code>\u306fAnsible\u30c6\u30b9\u30c8\u30b5\u30fc\u30d3\u30b9\u305d\u306e\u3082\u306e\u3067\u3059\u3002\u30ed\u30fc\u30ab\u30eb\u306e\u30c6\u30b9\u30c8\u30eb\u30fc\u30c1\u30f3\u3067\u306f\u3001\u5404\u500b\u3005\u306e\u30c6\u30b9\u30c8\u3092\u30c6\u30b9\u30c8\u30b9\u30a4\u30fc\u30c8\u306e\u30dd\u30c3\u30c9\u5185\u306e\u5225\u3005\u306e\u30b3\u30f3\u30c6\u30ca\u3068\u3057\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002\u3053\u308c\u3089\u306f\u4ee5\u4e0b\u306b\u30ea\u30b9\u30c8\u3055\u308c\u3066\u3044\u307e\u3059\u3002</li> <li><code>local-git</code>\u306f\u30af\u30e9\u30b9\u30bf\u5185\u3067\u30db\u30b9\u30c8\u3055\u308c\u308bGit\u30b5\u30fc\u30d0\u3067\u3001\u305d\u308c\u304c\u4fdd\u6301\u3057\u3066\u3044\u307e\u3059 \u30c6\u30b9\u30c8\u306e\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u3002Ansible\u306f\u30c6\u30b9\u30c8\u306e\u9593\u306b\u3053\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u30d7\u30eb\u3068\u30d7\u30c3\u30b7\u30e5\u3092\u884c\u3044\u307e\u3059\u3002</li> <li><code>api-data-watcher-pusher</code>\u306f\u3001\u5fc5\u8981\u306aKubernetes\u8a2d\u5b9a\u3001\u30c6\u30b9\u30c8\u30e6\u30fc\u30b6\u30fc\u30a2\u30ab\u30a6\u30f3\u30c8\u3068SSH\u30ad\u30fc\u3001\u5fc5\u8981\u306a\u30b0\u30eb\u30fc\u30d7\u3068\u901a\u77e5\u3092\u30ed\u30fc\u30ab\u30ebLagoon\u306b\u4e8b\u524d\u306b\u914d\u7f6e\u3059\u308b\u305f\u3081\u306eGraphQL\u5909\u7570\u306e\u30bb\u30c3\u30c8\u3067\u3059\u3002 \u3053\u308c\u306f\u5b9f\u884c\u3054\u3068\u306b\u30ed\u30fc\u30ab\u30eb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3068\u74b0\u5883\u3092\u6d88\u53bb\u3059\u308b\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul> <p>Kubernetes\u306b\u95a2\u9023\u3059\u308b\u500b\u3005\u306e\u30eb\u30fc\u30c1\u30f3\u306f\u6b21\u306e\u3068\u304a\u308a\u3067\u3059:</p> <ul> <li><code>active-standby-kubernetes</code>\u306fKubernetes\u3067\u306e\u30a2\u30af\u30c6\u30a3\u30d6/\u30b9\u30bf\u30f3\u30d0\u30a4\u3092\u78ba\u8a8d\u3059\u308b\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</li> <li><code>api</code>\u306fAPI - \u30d6\u30e9\u30f3\u30c1/PR\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u3001\u6607\u9032\u306e\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</li> <li><code>bitbucket</code>\u3001<code>gitlab</code>\u3001<code>github</code>\u306f\u7279\u5b9a\u306eSCM\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u306e\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</li> <li><code>drupal-php74</code>\u306f\u5358\u4e00\u30dd\u30c3\u30c9\u306eMariaDB\u3001MariaDB DBaaS\u3001\u304a\u3088\u3073Drupal 8/9\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7528\u306eDrush\u7279\u5316\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059(<code>drupal-php73</code>\u306fDrush\u30c6\u30b9\u30c8\u3092\u884c\u3044\u307e\u305b\u3093)\u3002</li> <li><code>drupal-postgres</code>\u306f\u3001Drupal 8\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7528\u306e\u5358\u4e00\u30dd\u30c3\u30c9\u306ePostgreSQL\u3068PostgreSQL DBaaS\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</li> <li><code>elasticsearch</code>\u306fElasticsearch\u5358\u4e00\u30dd\u30c3\u30c9\u3078\u306e\u30b7\u30f3\u30d7\u30eb\u306aNGINX\u30d7\u30ed\u30ad\u30b7\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</li> <li><code>features-variables</code>\u306fLagoon\u5185\u306e\u5909\u6570\u3092\u5229\u7528\u3059\u308b\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</li> <li><code>features-kubernetes</code>\u306fKubernetes\u306b\u7279\u5316\u3057\u305f\u6a19\u6e96\u7684\u306aLagoon\u30c6\u30b9\u30c8\u306e\u7bc4\u56f2\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</li> <li><code>features-kubernetes-2</code>\u306f\u3088\u308a\u9ad8\u5ea6\u306akub\u3092\u5b9f\u884c\u3057\u307e\u3059 * \u30a8\u30f3\u30c0\u30fc\u30f3\u7279\u6709\u306e\u30c6\u30b9\u30c8 - \u8907\u6570\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3068\u30b5\u30d6\u30d5\u30a9\u30eb\u30c0\u8a2d\u5b9a\u3092\u30ab\u30d0\u30fc\u3002</li> <li><code>nginx</code>\u3001<code>node</code>\u3001<code>python</code>\u306f\u3001\u305d\u308c\u305e\u308c\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30bf\u30a4\u30d7\u306b\u5bfe\u3057\u3066\u57fa\u672c\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</li> <li><code>node-mongodb</code>\u306f\u3001\u5358\u4e00\u30dd\u30c3\u30c9\u306eMongoDB\u30c6\u30b9\u30c8\u3068Node.js\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u5bfe\u3059\u308bMongoDB DBaaS\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</li> </ul>"},{"location":"ja/contributing-to-lagoon/developing-lagoon/#_3","title":"\u30ed\u30fc\u30ab\u30eb\u958b\u767a","text":"<p>\u307b\u3068\u3093\u3069\u306e\u30b5\u30fc\u30d3\u30b9\u306fNode.js\u3067\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u591a\u304f\u304c\u540c\u69d8\u306eNode.js\u30b3\u30fc\u30c9\u3068Node.js\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u5171\u6709\u3057\u3066\u3044\u308b\u305f\u3081\u3001Yarn\u3068\u3044\u3046\u6a5f\u80fd\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306fYarn workspaces\u3068\u547c\u3070\u308c\u307e\u3059\u3002Yarn workspaces\u306f\u3001\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b<code>package.json</code>\u304c\u5fc5\u8981\u3067\u3059\u3002</p> <p>\u30b5\u30fc\u30d3\u30b9\u306e\u958b\u767a\u306f\u3001Docker\u5185\u3067\u76f4\u63a5\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u305d\u308c\u305e\u308c\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u30b3\u30f3\u30c6\u30ca\u306f\u3001\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304c\u5b9f\u884c\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u306b\u30de\u30a6\u30f3\u30c8\u3055\u308c\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059(<code>docker-compose.yml</code>\u3092\u53c2\u7167)\u3002Node.js\u81ea\u4f53\u304c<code>nodemon</code>\u3092\u4ecb\u3057\u3066\u30b3\u30fc\u30c9\u3092\u76e3\u8996\u3057\u3001\u5909\u66f4\u304c\u3042\u308b\u3068Node.js\u30d7\u30ed\u30bb\u30b9\u3092\u81ea\u52d5\u7684\u306b\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002</p>"},{"location":"ja/contributing-to-lagoon/developing-lagoon/#lagoon-commons","title":"lagoon-commons","text":"<p>\u30b5\u30fc\u30d3\u30b9\u306f\u591a\u304f\u306eNode.js\u30d1\u30c3\u30b1\u30fc\u30b8\u3060\u3051\u3067\u306a\u304f\u3001\u5b9f\u969b\u306e\u30ab\u30b9\u30bf\u30e0\u30b3\u30fc\u30c9\u3082\u5171\u6709\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u30b3\u30fc\u30c9\u306f<code>node-packages/lagoon-commons</code>\u5185\u306b\u3042\u308a\u3001\u81ea\u52d5\u7684\u306b\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3055\u308c\u307e\u3059\u3002 Yarn\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\u306b\u3088\u3063\u3066\u7ba1\u7406\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3055\u3089\u306b\u3001\u30b5\u30fc\u30d3\u30b9\u306e<code>nodemon</code>\u306f\u3001<code>node-packages</code>\u306e\u5909\u66f4\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3001\u30ce\u30fc\u30c9\u30d7\u30ed\u30bb\u30b9\u3092\u81ea\u52d5\u7684\u306b\u518d\u8d77\u52d5\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/contributing-to-lagoon/developing-lagoon/#_4","title":"\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0","text":""},{"location":"ja/contributing-to-lagoon/developing-lagoon/#nodejsdocker","title":"Node.js\u30d9\u30fc\u30b9\u306e\u30b5\u30fc\u30d3\u30b9\u306eDocker\u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3067\u304d\u306a\u3044","text":"<p>\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30a4\u30e1\u30fc\u30b8\u3092\u518d\u30d3\u30eb\u30c9\u3057\u3066\u304f\u3060\u3055\u3044:</p> \u30a4\u30e1\u30fc\u30b8\u306e\u518d\u69cb\u7bc9<pre><code>    make clean\n    make build\n</code></pre>"},{"location":"ja/contributing-to-lagoon/developing-lagoon/#nodejsnode_modules","title":"Node.js\u30d9\u30fc\u30b9\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9/\u5b9f\u884c\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u3001<code>node_modules</code>\u306e\u5185\u5bb9\u304c\u4e0d\u8db3\u3057\u3066\u3044\u308b\u3068\u3044\u3046\u30a8\u30e9\u30fc\u304c\u51fa\u308b","text":"<p>\u4e00\u90e8\u306e\u30b5\u30fc\u30d3\u30b9\u304c<code>yarn</code>\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\u306b\u3088\u3063\u3066\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b\u5171\u901a\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u6301\u3063\u3066\u3044\u308b\u305f\u3081\u3001Lagoon\u306e\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067<code>yarn</code>\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/contributing-to-lagoon/developing-lagoon/#nipio","title":"<code>nip.io</code>\u30c9\u30e1\u30a4\u30f3\u306e\u89e3\u6c7a\u3067\u30a8\u30e9\u30fc\u304c\u51fa\u308b","text":"\u30a8\u30e9\u30fc<pre><code>Error response from daemon: Get https://registry.172.18.0.2.nip.io:32080/v2/: dial tcp: lookup registry.172.18.0.2.nip.io: no such host\n</code></pre> <p>\u3053\u308c\u306f\u3001\u30ed\u30fc\u30ab\u30eb\u306e\u30ea\u30be\u30eb\u30d0\u304c\u7d50\u679c\u304b\u3089\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8IP\u3092\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3059\u308b\u5834\u5408\u306b\u767a\u751f\u3059\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3092\u56de\u907f\u3059\u308b\u305f\u3081\u306b\u3001<code>/etc/resolv.conf</code>\u3092\u7de8\u96c6\u3057\u3066\u3001\u7d50\u679c\u3092\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3057\u306a\u3044\u516c\u958b\u30ea\u30be\u30eb\u30d0\u3092\u4f7f\u7528\u3059\u308b\u3088\u3046\u306b\u3001\u4e0a\u90e8\u306b<code>nameserver 8.8.8.8</code>\u306e\u3088\u3046\u306a\u884c\u3092\u8ffd\u52a0\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/contributing-to-lagoon/developing-lagoon/#_5","title":"\u4f8b\u793a\u7684\u306a\u30ef\u30fc\u30af\u30d5\u30ed\u30fc","text":"<p>\u3053\u3053\u3067\u306f\u3001\u958b\u767a\u306e\u30b7\u30ca\u30ea\u30aa\u3068\u7269\u4e8b\u3092\u9032\u3081\u308b\u305f\u3081\u306e\u6709\u7528\u306a\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u3092\u3044\u304f\u3064\u304b\u7d39\u4ecb\u3057\u307e\u3059\u3002</p>"},{"location":"ja/contributing-to-lagoon/developing-lagoon/#1","title":"\u30c6\u30b9\u30c8\u306e\u8ffd\u52a0 1. \u4e0a\u8a18\u306e\u6700\u521d\u306e\u624b\u9806\u3092\u7e70\u308a\u8fd4\u3057\u307e\u3059\u3002","text":"<ol> <li><code>tests/tests/features-variables.yaml</code>\u3092\u7de8\u96c6\u3057\u3001\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</li> <li><code>tests</code>\u30a4\u30e1\u30fc\u30b8\u3092\u518d\u69cb\u7bc9\u3057\u307e\u3059\u3002</li> </ol> \u30c6\u30b9\u30c8\u306e\u69cb\u7bc9<pre><code>rm build/tests\nmake -j8 build/tests\n</code></pre> <ol> <li>\u65b0\u3057\u3044<code>tests</code>\u30a4\u30e1\u30fc\u30b8\u3092\u30af\u30e9\u30b9\u30bf\u30ec\u30b8\u30b9\u30c8\u30ea\u306b\u30d7\u30c3\u30b7\u30e5\u3057\u307e\u3059\u3002</li> </ol> \u30c6\u30b9\u30c8\u30a4\u30e1\u30fc\u30b8\u3092\u30d7\u30c3\u30b7\u30e5<pre><code>make kind/push-images IMAGES=tests\n</code></pre> <ol> <li>\u30c6\u30b9\u30c8\u3092\u518d\u5b9f\u884c\u3057\u307e\u3059\u3002</li> </ol> \u30c6\u30b9\u30c8\u3092\u518d\u5b9f\u884c<pre><code>make kind/retest TESTS='[features-variables]'\n</code></pre>"},{"location":"ja/contributing-to-lagoon/documentation/","title":"Lagoon\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u3078\u306e\u8ca2\u732e","text":"<p>\u7686\u3055\u3093\u304b\u3089\u3044\u305f\u3060\u3051\u308b\u3082\u306e\u306f\u4f55\u3067\u3082\u5927\u3044\u306b\u8a55\u4fa1\u3057\u307e\u3059\uff01</p> <p>\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u306e\u4f5c\u6210\u3068\u95b2\u89a7\u3092\u975e\u5e38\u306b\u7c21\u5358\u306b\u3057\u3066\u304a\u308a\u3001\u30c1\u30fc\u30e0\u306f\u5e38\u306b\u30ec\u30d3\u30e5\u30fc\u3084\u30d2\u30f3\u30c8\u3092\u63d0\u4f9b\u3059\u308b\u305f\u3081\u306b\u6e96\u5099\u304c\u3067\u304d\u3066\u3044\u307e\u3059\u3002</p> <p>\u79c1\u305f\u3061\u306f\u512a\u308c\u305fMaterial\u30c6\u30fc\u30de\u3068\u5171\u306bmkdocs\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/contributing-to-lagoon/documentation/#_1","title":"\u30ed\u30fc\u30ab\u30eb\u3067\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u306e\u95b2\u89a7\u3068\u66f4\u65b0","text":"<p>Lagoon\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30eb\u30fc\u30c8\u304b\u3089(Docker\u304c\u5fc5\u8981\u3067\u3059)\u3001\u4ee5\u4e0b\u3092\u5b9f\u884c\u3057\u307e\u3059:</p> Get local docs up and running.<pre><code>docker run --rm -it -p 127.0.0.1:8000:8000 -v ${PWD}:/docs ghcr.io/amazeeio/mkdocs-material\n</code></pre> <p>\u3053\u308c\u306b\u3088\u308a\u3001\u4efb\u610f\u306e\u66f4\u65b0\u3067\u30e9\u30a4\u30d6\u30ea\u30ed\u30fc\u30c9\u304c\u8a2d\u5b9a\u3055\u308c\u305f\u958b\u767a\u30b5\u30fc\u30d0\u30fc\u304c http://127.0.0.1:8000\u3067\u8d77\u52d5\u3057\u307e\u3059\u3002</p> <p>\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3055\u308c\u305fDocker\u30a4\u30e1\u30fc\u30b8\u306b\u306f\u3001\u5fc5\u8981\u306a\u3059\u3079\u3066\u306e\u62e1\u5f35\u6a5f\u80fd\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002</p> <p>\u3042\u308b\u3044\u306f\u3001<code>mkdocs</code>\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3059\u308b\u306b\u306f\u3001mkdocs\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001\u5fc5\u8981\u306a\u3059\u3079\u3066\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> Install mkdocs<pre><code>pip3 install -r docs/requirements.txt\nmkdocs serve\n</code></pre>"},{"location":"ja/contributing-to-lagoon/documentation/#_2","title":"\u30af\u30e9\u30a6\u30c9\u3067\u306e\u7de8\u96c6","text":"<p>\u5404\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u30da\u30fc\u30b8\u306b\u306f\u3001\u53f3\u4e0a\u306b\"\u7de8\u96c6\"\u306e\u925b\u7b46\u30a2\u30a4\u30b3\u30f3\u304c\u3042\u308a\u3001\u305d\u308c\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u6b63\u3057\u3044\u30da\u30fc\u30b8\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002 Git\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u3066\u3002</p> <p>\u3053\u3061\u3089\u3067\u3082\u304a\u6c17\u8efd\u306b\u8ca2\u732e\u3057\u3066\u3044\u305f\u3060\u3051\u307e\u3059\u3002\u7d44\u307f\u8fbc\u307f\u306egithub.dev web\u30d9\u30fc\u30b9\u306e\u30a8\u30c7\u30a3\u30bf\u30fc\u3092\u3044\u3064\u3067\u3082\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\u57fa\u672c\u7684\u306a\u30de\u30fc\u30af\u30c0\u30a6\u30f3\u306e\u30d7\u30ec\u30d3\u30e5\u30fc\u304c\u3042\u308a\u307e\u3059\u304c\u3001mkdocs\u306e\u7d20\u6674\u3089\u3057\u3055\u306f\u3042\u308a\u307e\u305b\u3093\u3002</p>"},{"location":"ja/contributing-to-lagoon/documentation/#_3","title":"\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u306e\u30c7\u30d7\u30ed\u30a4\u65b9\u6cd5","text":"<p>\u79c1\u305f\u3061\u306fDeploy MkDocs GitHub\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u3066\u3001\u3059\u3079\u3066\u306e\u30e1\u30a4\u30f3\u30d6\u30e9\u30f3\u30c1\u306e\u30d7\u30c3\u30b7\u30e5\u3092\u30d3\u30eb\u30c9\u3057\u3001<code>gh-pages</code> \u30d6\u30e9\u30f3\u30c1\u306e\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u3092\u30c8\u30ea\u30ac\u30fc\u3057\u307e\u3059\u3002</p>"},{"location":"ja/contributing-to-lagoon/releasing/","title":"Lagoon\u306e\u30ea\u30ea\u30fc\u30b9","text":"<p>Lagoon\u306b\u306f\u591a\u304f\u306e\u52d5\u7684\u306a\u90e8\u5206\u304c\u3042\u308b\u305f\u3081\u3001\u30ea\u30ea\u30fc\u30b9\u306f\u304b\u306a\u308a\u8907\u96d1\u3067\u3059\uff01</p>"},{"location":"ja/contributing-to-lagoon/releasing/#lagoon-core-","title":"Lagoon-core - \u30bf\u30b0\u3068\u30c6\u30b9\u30c8","text":"<ol> <li>\u6b21\u306e\u5168\u3066\u306e\u7279\u5b9a\u3055\u308c\u305f\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u30e1\u30a4\u30f3\u30d6\u30e9\u30f3\u30c1\u306b\u30de\u30fc\u30b8\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059:<ul> <li>uselagoon/lagoon</li> <li>uselagoon/build-deploy-tool</li> <li>uselagoon/lagoon-ui</li> </ul> </li> <li>\u78ba\u8a8d\u304c\u7d42\u308f\u3063\u305f\u3089\u3001\u6b21\u306e\u30bf\u30b0(\u30de\u30a4\u30ca\u30fc\u307e\u305f\u306f\u30d1\u30c3\u30c1)\u3092\u30e1\u30a4\u30f3\u30d6\u30e9\u30f3\u30c1\u306b\u30d7\u30c3\u30b7\u30e5\u3057\u307e\u3059\u3002\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306fv2.MINOR.PATCH\u3068\u3057\u3001semver\u306b\u5f93\u3044\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001Jenkins\u30d3\u30eb\u30c9\u304c\u30c8\u30ea\u30ac\u30fc\u3055\u308c\u3001https://ci.lagoon.sh/blue/organizations/jenkins/lagoon/branches \u3067\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</li> <li>\u3053\u308c\u304c\u30d3\u30eb\u30c9\u4e2d\u306e\u9593\u3001<code>lagoon-ui</code> \u3068 <code>build-deploy-tool</code> \u306e\u9069\u5207\u306a\u30b3\u30df\u30c3\u30c8\u306b\u8efd\u91cf\u30bf\u30b0\u3092\u30d7\u30c3\u30b7\u30e5\u3057\u307e\u3059\u3002\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306f core-v2.MINOR.PATCH \u3068\u3057\u307e\u3059\u3002build-deploy-tool\u306b\u306f\u4ed6\u306e\u30bf\u30b0\u3084\u30ea\u30ea\u30fc\u30b9\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001lagoon-ui\u306b\u306f\u72ec\u81ea\u306esemver\u30ea\u30ea\u30fc\u30b9\u304c\u3042\u308a\u3001\u3053\u308c\u306f\u305d\u306e\u6a5f\u80fd\u306b\u57fa\u3065\u3044\u3066\u3044\u307e\u3059\u3002</li> <li>Jenkins\u3067\u306e\u30d3\u30eb\u30c9\u304c\u6210\u529f\u3057\u305f\u3089\u3001https://github.com/uselagoon/lagoon-charts \u306b\u79fb\u52d5\u3057\u3066\u3001\u30c1\u30e3\u30fc\u30c8\u30ea\u30ea\u30fc\u30b9\u306e\u6e96\u5099\u3092\u3057\u307e\u3059\u3002</li> <li> <p><code>lagoon-core</code> \u3068 <code>lagoon-test</code> \u30c1\u30e3\u30fc\u30c8\u306echart.yaml\u3067\u3001\u66f4\u65b0\u3057\u307e\u3059\u3002 \u4ee5\u4e0b\u306e\u30d5\u30a3\u30fc\u30eb\u30c9:</p> <ul> <li>\u30d0\u30fc\u30b8\u30e7\u30f3: \u3053\u308c\u306f\u30c1\u30e3\u30fc\u30c8\u306e\u6b21\u306e\u300c\u30de\u30a4\u30ca\u30fc\u300d\u30ea\u30ea\u30fc\u30b9\u3067\u3001\u901a\u5e38\u306f\u5bfe\u5fdc\u3059\u308blagoon-core\u30ea\u30ea\u30fc\u30b9\u306e\u305f\u3081\u306e\u30de\u30a4\u30ca\u30fc\u3092\u4f7f\u7528\u3057\u307e\u3059</li> <li>appVersion: \u3053\u308c\u306f\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305flagoon-core\u306e\u5b9f\u969b\u306e\u30bf\u30b0\u3067\u3059</li> <li>artifacthub.io/changes: \u5fc5\u8981\u306a\u306e\u306f\u4ee5\u4e0b\u306e\u30b9\u30cb\u30da\u30c3\u30c8\u306e2\u884c\u3067\u3001\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u308b\u5b9f\u969b\u306eappVersion\u306b\u5408\u308f\u305b\u3066\u5909\u66f4\u3055\u308c\u307e\u3059\u3002</li> </ul> <p>sample chart.yml snippets<pre><code># \u3053\u308c\u306f\u30c1\u30e3\u30fc\u30c8\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u3059\u3002\u3053\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u306f\u3001\u30a2\u30d7\u30ea\n# \u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u542b\u3080\u3001\u30c1\u30e3\u30fc\u30c8\u3068\u305d\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u5909\u66f4\u3092\u52a0\u3048\u308b\u305f\u3073\u306b\u5897\u3084\u3059\u3079\u304d\u3067\u3059\u3002\n# \u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u30bb\u30de\u30f3\u30c6\u30a3\u30c3\u30af\u30d0\u30fc\u30b8\u30e7\u30cb\u30f3\u30b0(https://semver.org/)\u306b\u5f93\u3046\u3053\u3068\u304c\u671f\u5f85\u3055\u308c\u307e\u3059\u3002\nversion: 1.28.0\n# \u3053\u308c\u306f\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u3067\u3059\u3002\u3053\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\n# \u756a\u53f7\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u5909\u66f4\u3092\u52a0\u3048\u308b\u305f\u3073\u306b\u5897\u52a0\u3055\u305b\u308b\u3079\u304d\u3067\u3059\u3002\n# \u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u30bb\u30de\u30f3\u30c6\u30a3\u30c3\u30af\u30d0\u30fc\u30b8\u30e7\u30cb\u30f3\u30b0\u306b\u5f93\u3046\u3053\u3068\u304c\u671f\u5f85\u3055\u308c\u307e\u305b\u3093\u3002\u305d\u308c\u3089\u306f\n# \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u4f7f\u7528\u3057\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u53cd\u6620\u3059\u308b\u3079\u304d\u3067\u3059\u3002\nappVersion: v2.14.2\n# \u3053\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u306f\u3001artifacthub.io\u306e\u30c1\u30a7\u30f3\u30b8\u30ed\u30b0\u3092\u53ce\u96c6\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\n# \u305d\u308c\u306f\u5404\u30ea\u30ea\u30fc\u30b9\u3054\u3068\u306b\u65b0\u305f\u306b\u958b\u59cb\u3055\u308c\u308b\u3079\u304d\u3067\u3059\n# \u6709\u52b9\u306a\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u7a2e\u985e\u306f\u3001\u8ffd\u52a0\u3001\u5909\u66f4\u3001\u975e\u63a8\u5968\u3001\u524a\u9664\u3001\u4fee\u6b63\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u304c\u3042\u308a\u307e\u3059\nannotations:\nartifacthub.io/changes: |\n- \u7a2e\u985e: \u5909\u66f4\n\u8aac\u660e: Lagoon appVersion\u3092v2.14.2\u306b\u66f4\u65b0\n</code></pre> lagoon-core\u30ea\u30ea\u30fc\u30b9\u306e\u7d50\u679c\u3001lagoon-core\u3068lagoon-test\u306e\u30c1\u30e3\u30fc\u30c8\u306e\u307f\u304c\u66f4\u65b0\u3055\u308c\u307e\u3059\u3002\u4ed6\u306b\u5909\u66f4\u304c\u3042\u308b\u5834\u5408\u306f\u3001lagoon-remote\u306e\u30d7\u30ed\u30bb\u30b9\u306b\u5f93\u3063\u3066\u304f\u3060\u3055\u3044\u3002</p> </li> <li> <p>\u3053\u306e\u30c1\u30e3\u30fc\u30c8\u30ea\u30ea\u30fc\u30b9\u306ePR\u3092\u4f5c\u6210\u3057\u3001Github Actions\u30b9\u30a4\u30fc\u30c8\u304c\u4e00\u9023\u306e\u30c6\u30b9\u30c8\u3092\u5b9f\u65bd\u3057\u307e\u3059:</p> <ul> <li>Lint\u3068\u30c6\u30b9\u30c8\u30c1\u30e3\u30fc\u30c8 - \u30de\u30c8\u30ea\u30af\u30b9: \u73fe\u5728\u30c6\u30b9\u30c8\u3055\u308c\u3066\u3044\u308bKubernetes\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u5bfe\u3057\u3066lint\u3068\u30c1\u30e3\u30fc\u30c8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u884c\u3044\u307e\u3059</li> <li>Lint\u3068\u30c6\u30b9\u30c8\u30c1\u30e3\u30fc\u30c8 - current: \u4ee5\u524d/\u5c06\u6765\u306eKubernetes\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u5bfe\u3057\u3066lint\u3068\u30c1\u30e3\u30fc\u30c8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u884c\u3044\u307e\u3059</li> <li>Lagoon tests: \u30ea\u30ea\u30fc\u30b9\u306b\u5bfe\u3057\u3066ansible\u30c6\u30b9\u30c8\u306e\u5168\u30b7\u30ea\u30fc\u30ba\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</li> </ul> <p>\u901a\u5e38\u3001lint\u3068\u30c6\u30b9\u30c8\u30c1\u30e3\u30fc\u30c8\u306e\u5931\u6557\u306f\u3088\u304f\u8aac\u660e\u3055\u308c\u3066\u3044\u307e\u3059(\u30c1\u30e3\u30fc\u30c8\u8a2d\u5b9a\u306e\u6b20\u843d/\u8aa4\u8a2d\u5b9a)\u3002\u5358\u4e00\u306eLagoon\u30c6\u30b9\u30c8\u304c\u5931\u6557\u3059\u308b\u5834\u5408\u306f\u3001\u518d\u5b9f\u884c\u3059\u308b\u3060\u3051\u3067\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u8907\u6570\u306e\u5931\u6557\u304c\u767a\u751f\u3057\u305f\u5834\u5408\u306f\u3001\u8abf\u67fb\u304c\u5fc5\u8981\u3067\u3059\u3002</p> </li> </ol> <p>\u3053\u308c\u3089\u306e\u30c6\u30b9\u30c8\u304c\u3059\u3079\u3066\u6210\u529f\u3057\u305f\u5f8c\u3001\u30ea\u30ea\u30fc\u30b9\u306e\u4f5c\u6210\u3092\u9032\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059:</p>"},{"location":"ja/contributing-to-lagoon/releasing/#lagoon-core-_1","title":"Lagoon-core - \u30ea\u30ea\u30fc\u30b9\u3068\u30ea\u30ea\u30fc\u30b9\u30ce\u30fc\u30c8","text":"<ol> <li>uselagoon/lagoon \u3067\u3001\u5148\u307b\u3069\u30d7\u30c3\u30b7\u30e5\u3057\u305f\u30bf\u30b0\u304b\u3089\u30ea\u30ea\u30fc\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\"\u30ea\u30ea\u30fc\u30b9\u306e\u751f\u6210 \"notes\"\u30dc\u30bf\u30f3\u3092\u4f7f\u3063\u3066\u5909\u66f4\u5c65\u6b74\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u30ea\u30ea\u30fc\u30b9\u306b\u542b\u3081\u308b\u5185\u5bb9\u306b\u3064\u3044\u3066\u306f\u3001\u4ee5\u524d\u306e\u30ea\u30ea\u30fc\u30b9\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u307e\u305f\u3001lagoon-images\u306e\u30ea\u30f3\u30af\u306f\u5e38\u306b\u6700\u65b0\u306e\u30ea\u30ea\u30fc\u30b9\u7248\u3068\u306a\u308a\u307e\u3059\u3002\u30c1\u30e3\u30fc\u30c8\u3001lagoon-ui\u3001build-deploy-tool\u3078\u306e\u30ea\u30f3\u30af\u306f\u3059\u3079\u3066\u4eca\u3059\u3050\u57cb\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u304c\u3001\u30ea\u30f3\u30af\u306f\u4eca\u5f8c\u306e\u30b9\u30c6\u30c3\u30d7\u304c\u5b8c\u4e86\u3059\u308b\u307e\u3067\u52d5\u4f5c\u3057\u307e\u305b\u3093\u3002\u3053\u308c\u3092\u6700\u65b0\u306e\u30ea\u30ea\u30fc\u30b9\u3068\u3057\u3066\u30de\u30fc\u30af\u3057\u3001\u30ea\u30ea\u30fc\u30b9\u3092\u516c\u958b\u3057\u307e\u3059\u3002</li> <li>uselagoon/build-deploy-tool \u3067\u3001\u5148\u307b\u3069\u30d7\u30c3\u30b7\u30e5\u3057\u305f\u30bf\u30b0\u304b\u3089\u30ea\u30ea\u30fc\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\"\u30ea\u30ea\u30fc\u30b9\u30ce\u30fc\u30c8\u3092\u751f\u6210\"\u30dc\u30bf\u30f3\u3092\u4f7f\u7528\u3057\u3066\u5909\u66f4\u5c65\u6b74\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u6700\u5f8c\u306ecore-v2.X\u30bf\u30b0\u304c\u4f7f\u7528\u3055\u308c\u3001\u4ed6\u306e\u30bf\u30b0\u306f\u4f7f\u7528\u3055\u308c\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u30ea\u30ea\u30fc\u30b9\u306b\u542b\u3081\u308b\u5185\u5bb9\u306b\u3064\u3044\u3066\u306f\u3001\u4ee5\u524d\u306e\u30ea\u30ea\u30fc\u30b9\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u308c\u3092\u6700\u65b0\u306e\u30ea\u30ea\u30fc\u30b9\u3068\u3057\u3066\u30de\u30fc\u30af\u3057\u3001\u30ea\u30ea\u30fc\u30b9\u3092\u516c\u958b\u3057\u307e\u3059\u3002</li> <li>uselagoon/lagoon-ui \u3067\u3001\u5148\u307b\u3069\u30d7\u30c3\u30b7\u30e5\u3057\u305f\u30bf\u30b0\u304b\u3089\u30ea\u30ea\u30fc\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\"\u30ea\u30ea\u30fc\u30b9\u30ce\u30fc\u30c8\u3092\u751f\u6210\"\u30dc\u30bf\u30f3\u3092\u4f7f\u7528\u3057\u3066\u5909\u66f4\u5c65\u6b74\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u6700\u5f8c\u306ecore-v2.X\u30bf\u30b0\u304c\u4f7f\u7528\u3055\u308c\u3001\u4ed6\u306e\u30bf\u30b0\u306f\u4f7f\u7528\u3055\u308c\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u30ea\u30ea\u30fc\u30b9\u306b\u542b\u3081\u308b\u5185\u5bb9\u306b\u3064\u3044\u3066\u306f\u3001\u4ee5\u524d\u306e\u30ea\u30ea\u30fc\u30b9\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u308c\u3092\u6700\u65b0\u306e\u30ea\u30ea\u30fc\u30b9\u3068\u3057\u3066\u30de\u30fc\u30af\u3057\u3001\u30ea\u30ea\u30fc\u30b9\u3092\u516c\u958b\u3057\u307e\u3059\u3002</li> <li>uselagoon/lagoon-charts \u3067 \u6210\u529f\u3057\u305fPR\u3092\u30de\u30fc\u30b8\u3059\u308b\u3068\u3001lagoon-core\u3068lagoon-test\u306e\u30ea\u30ea\u30fc\u30b9\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\u7d50\u679c\u3068\u3057\u3066\u5f97\u3089\u308c\u305flagoon-core\u30c1\u30e3\u30fc\u30c8\u30ea\u30ea\u30fc\u30b9\u3092\u7de8\u96c6\u3057\u3001\u30bf\u30a4\u30c8\u30eb\u3068\u30c6\u30ad\u30b9\u30c8\u30dc\u30c3\u30af\u30b9\u306b\u5bfe\u5fdc\u3059\u308blagoon\u30ea\u30ea\u30fc\u30b9\u3092\u8a18\u8f09\u3057\u307e\u3059\u3002\u4ee5\u524d\u306e\u30ea\u30ea\u30fc\u30b9\u3068\u540c\u69d8\u306b\u3057\u307e\u3059\u3002</li> </ol>"},{"location":"ja/contributing-to-lagoon/releasing/#lagoon-","title":"Lagoon\u30ea\u30e2\u30fc\u30c8 - \u30ea\u30ea\u30fc\u30b9\u3068\u30ea\u30ea\u30fc\u30b9\u30ce\u30fc\u30c8","text":"<p>Lagoon remote\u306fLagoon Core\u3068\u306f\u5225\u306e\u30ea\u30ea\u30fc\u30b9\u30b5\u30a4\u30af\u30eb\u3092\u6301\u3061\u3001\u305d\u306e\u305f\u3081\u3001\u4f9d\u5b58\u95a2\u4fc2\u306e\u3042\u308b\u30b5\u30d6\u30c1\u30e3\u30fc\u30c8\u3084\u30b5\u30fc\u30d3\u30b9\u304c\u66f4\u65b0\u3055\u308c\u308b\u305f\u3073\u306b\u30ea\u30ea\u30fc\u30b9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/contributing-to-lagoon/tests/","title":"\u30c6\u30b9\u30c8","text":"<p>\u79c1\u305f\u3061\u306e\u3059\u3079\u3066\u306e\u30c6\u30b9\u30c8\u306fAnsible\u3067\u66f8\u304b\u308c\u3066\u304a\u308a\u3001\u4e3b\u306b\u4ee5\u4e0b\u306e\u30a2\u30d7\u30ed\u30fc\u30c1\u306b\u5f93\u3063\u3066\u3044\u307e\u3059:</p> <ol> <li>\u65b0\u3057\u3044Git\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</li> <li>\u30d5\u30a1\u30a4\u30eb\u306e\u30ea\u30b9\u30c8(<code>tests/files</code>\u5185)\u304b\u3089\u4e00\u90e8\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3057\u3001\u3053\u306eGit\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u30b3\u30df\u30c3\u30c8\u3057\u307e\u3059\u3002</li> <li>\u3053\u306eGit\u30ea\u30dd\u30b8\u30c8\u30ea\u3092Git\u30b5\u30fc\u30d0\u30fc(\u30ed\u30fc\u30ab\u30eb\u307e\u305f\u306fGitHub\u4e0a)\u306b\u30d7\u30c3\u30b7\u30e5\u3057\u307e\u3059\u3002</li> <li>\u30c8\u30ea\u30ac\u30fc\u30b5\u30fc\u30d3\u30b9(\u4f8b\u3048\u3070\u3001\u5b9f\u969b\u306b\u9001\u4fe1\u3055\u308c\u308b\u30a6\u30a7\u30d6\u30d5\u30c3\u30af\u3068\u540c\u3058\u30a6\u30a7\u30d6\u30d5\u30c3\u30af\u30cf\u30f3\u30c9\u30e9\u30fc\u3078\u306e\u30a6\u30a7\u30d6\u30d5\u30c3\u30af)\u306b\u30c8\u30ea\u30ac\u30fc\u3092\u9001\u4fe1\u3057\u307e\u3059\u3002</li> <li>\u30c6\u30b9\u30c8\u304c\u4f55\u304b\u304c\u8d77\u3053\u308b\u3053\u3068\u3092\u671f\u5f85\u3059\u308bURL\u3092\u76e3\u8996\u3092\u958b\u59cb\u3057\u307e\u3059(\u4f8b\u3048\u3070\u3001Git\u30d6\u30e9\u30f3\u30c1\u3092HTML\u30c6\u30ad\u30b9\u30c8\u3068\u3057\u3066\u6301\u3064Node.js\u30a2\u30d7\u30ea\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u306a\u3069)\u3002</li> <li>URL\u306e\u7d50\u679c\u3068\u671f\u5f85\u3055\u308c\u308b\u7d50\u679c\u3092\u6bd4\u8f03\u3057\u307e\u3059\u3002</li> </ol> <p>Lagoon\u306f\u4e3b\u306b3\u3064\u306e\u7570\u306a\u308b\u65b9\u6cd5\u3067\u30c6\u30b9\u30c8\u3055\u308c\u3066\u3044\u307e\u3059:</p>"},{"location":"ja/contributing-to-lagoon/tests/#1","title":"1. \u30ed\u30fc\u30ab\u30eb\u3067","text":"<p>\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u4e2d\u306b\u30c6\u30b9\u30c8\u3059\u308b\u6700\u5584\u306e\u65b9\u6cd5\u306f\u30ed\u30fc\u30ab\u30eb\u3067\u306e\u30c6\u30b9\u30c8\u3067\u3059\u3002\u3059\u3079\u3066\u306e\u30c6\u30b9\u30c8\u306f<code>make</code>\u3092\u4ecb\u3057\u3066\u958b\u59cb\u3055\u308c\u307e\u3059\u3002Make\u306f\u5fc5\u8981\u306a\u3059\u3079\u3066\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002</p> Make tests<pre><code>make tests\n</code></pre> <p>\u3053\u308c\u306b\u3088\u308a\u3001\u5b9a\u7fa9\u3055\u308c\u305f\u3059\u3079\u3066\u306e\u30c6\u30b9\u30c8\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\u30c6\u30b9\u30c8\u306e\u4e00\u90e8\u3060\u3051\u3092\u5b9f\u884c\u3057\u305f\u3044\u5834\u5408\u306f\u3001<code>make tests-list</code>\u3092\u5b9f\u884c\u3057\u3066\u3059\u3079\u3066\u306e\u5b58\u5728\u3059\u308b\u30c6\u30b9\u30c8\u3092\u8868\u793a\u3057\u3001\u305d\u308c\u305e\u308c\u3092\u500b\u5225\u306b\u5b9f\u884c\u3057\u307e\u3059\u3002</p> <p>\u305f\u3068\u3048\u3070\u3001<code>make tests/node</code>\u306fNode.js Docker\u30a4\u30e1\u30fc\u30b8\u306e\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> <p>\u3067 \u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u306e\u5185\u90e8\u3067\u4f55\u304c\u8d77\u3053\u3063\u3066\u3044\u308b\u306e\u304b\u3092\u5b9f\u969b\u306b\u898b\u308b\u305f\u3081\u306b\u306f\u3001<code>make logs</code>\u3092\u4f7f\u7528\u3067\u304d\u307e\u3059:</p> Make logs<pre><code>make logs\n</code></pre> <p>\u307e\u305f\u306f\u7279\u5b9a\u306e\u30b5\u30fc\u30d3\u30b9\u3060\u3051\u3092\u8868\u793a\u3059\u308b\u306b\u306f:</p> Make logs<pre><code>make logs service=webhook-handler\n</code></pre>"},{"location":"ja/contributing-to-lagoon/tests/#2","title":"2. \u81ea\u52d5\u5316\u3055\u308c\u305f\u7d71\u5408\u30c6\u30b9\u30c8","text":"<p>Lagoon\u306b\u5bfe\u3057\u3066\u4f5c\u6210\u3055\u308c\u305f\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u3001\u5c02\u7528\u306eJenkins\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u5b8c\u5168\u306b\u81ea\u52d5\u5316\u3055\u308c\u305f\u7d71\u5408\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u3066\u3044\u307e\u3059:https://ci.lagoon.sh\u3002\u3053\u308c\u306f<code>.Jenkinsfile</code>\u5185\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u304a\u308a\u3001\u958b\u304b\u308c\u305f\u3059\u3079\u3066\u306e\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u5bfe\u3057\u3066\u81ea\u52d5\u3067\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002</p> <p>\u3053\u308c\u306b\u3088\u308a\u3001\u3059\u3079\u3066\u306e\u30a4\u30e1\u30fc\u30b8\u304c\u30d3\u30eb\u30c9\u3055\u308c\u3001Kubernetes\u30af\u30e9\u30b9\u30bf\u304c\u8d77\u52d5\u3057\u3001\u4e00\u9023\u306e\u30c6\u30b9\u30c8\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002</p> <p>\u30c6\u30b9\u30c8\u306f\u3053\u3053\u3067\u898b\u3064\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059:</p> <ul> <li>https://ci.lagoon.sh/blue/organizations/jenkins/lagoon/activity</li> </ul>"},{"location":"ja/docker-images/commons/","title":"Commons","text":"<p>Lagoon <code>commons</code> Docker\u30a4\u30e1\u30fc\u30b8\u3002\u516c\u5f0f\u306eAlpine\u30a4\u30e1\u30fc\u30b8\u3092\u30d9\u30fc\u30b9\u306b\u3057\u3066\u3044\u307e\u3059\u3002</p> <p>\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u81ea\u4f53\u306f\u6a5f\u80fd\u3092\u6301\u3061\u307e\u305b\u3093\u3002\u4ee3\u308f\u308a\u306b\u3001\u4ed6\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3059\u308b\u305f\u3081\u306e\u57fa\u672c\u30a4\u30e1\u30fc\u30b8\u3068\u3057\u3066\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002Lagoon\u5185\u306e\u3059\u3079\u3066\u306ealpine\u30d9\u30fc\u30b9\u306e\u30a4\u30e1\u30fc\u30b8\u306f\u3001commons\u304b\u3089\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u7d99\u627f\u3057\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/docker-images/commons/#_1","title":"\u30c4\u30fc\u30eb","text":"<ul> <li><code>docker-sleep</code> - \u6a19\u6e96\u5316\u3055\u308c\u305f1\u6642\u9593\u306e\u30b9\u30ea\u30fc\u30d7\u6a5f\u80fd</li> <li><code>fix-permissions</code> - \u6307\u5b9a\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u81ea\u52d5\u7684\u306b\u5168\u30b0\u30eb\u30fc\u30d7\u306e\u8aad\u307f\u66f8\u304d\u53ef\u80fd\u306b\u5909\u66f4</li> <li><code>wait-for</code> - \u30b5\u30fc\u30d3\u30b9\u304c\u6b63\u3057\u3044\u9806\u5e8f\u3067\u8d77\u52d5\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u5c0f\u3055\u306a\u30b9\u30af\u30ea\u30d7\u30c8 - https://github.com/eficode/wait-for \u3092\u57fa\u306b\u3057\u3066\u3044\u307e\u3059</li> <li><code>entrypoint-readiness</code> - \u9577\u6642\u9593\u5b9f\u884c\u3055\u308c\u308b\u30a8\u30f3\u30c8\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\u304c\u5b8c\u4e86\u3057\u305f\u3053\u3068\u3092\u78ba\u8a8d</li> <li><code>entrypoints</code> - /lagoon/entrypoints/* \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306e\u3059\u3079\u3066\u306e\u30a8\u30f3\u30c8\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\u3092\u30a2\u30eb\u30d5\u30a1\u30d9\u30c3\u30c8\u9806/\u6570\u5024\u9806\u306b\u8aad\u307f\u8fbc\u3080\u30b9\u30af\u30ea\u30d7\u30c8</li> </ul>"},{"location":"ja/docker-images/commons/#_2","title":"\u30a8\u30f3\u30c8\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8","text":"<p>\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30a8\u30f3\u30c8\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\u306e\u4e00\u89a7\u306fhttps://github.com/uselagoon/lagoon-images/tree/main/images/commons/lagoon/entrypoints\u306b\u3042\u308a\u307e\u3059\u3002\u4ee5\u964d\u306e\u4e0b\u6d41\u30a4\u30e1\u30fc\u30b8\u3082\u3001<code>/lagoon</code>\u914d\u4e0b\u306b\u30a8\u30f3\u30c8\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\u3092\u8ffd\u52a0\u3067\u304d\u3001\u6700\u7d42\u7684\u306a\u30a4\u30e1\u30fc\u30b8\u3067\u5b9f\u884c\u3055\u307e\u3059\u3002</p>"},{"location":"ja/docker-images/mariadb/","title":"MariaDB","text":"<p>MariaDB\u306f\u3001MySQL\u306e\u5f8c\u7d99\u306e\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u3067\u3059\u3002</p> <p>Lagoon\u306e <code>MariaDB</code> \u30a4\u30e1\u30fc\u30b8\u306eDockerfile\u306f\u3001\u516c\u5f0f\u306eAlpine\u30a4\u30e1\u30fc\u30b8\u3067\u63d0\u4f9b\u3055\u308c\u308b <code>mariadb</code> \u3068 <code>mariadb-client</code> \u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30d9\u30fc\u30b9\u306b\u3057\u3066\u3044\u307e\u3059\u3002</p> <p>\u3053\u306eDockerfile\u306f\u3001\u30b9\u30bf\u30f3\u30c9\u30a2\u30ed\u30f3\u306eMariaDB\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30b5\u30fc\u30d0\u30fc\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002</p> <ul> <li>10.4 Dockerfile (Alpine 3.12 \u306f2022\u5e745\u6708\u307e\u3067\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/mariadb-10.4</code></li> <li>10.5 Dockerfile (Alpine 3.14 \u306f2023\u5e745\u6708\u307e\u3067\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/mariadb-10.5</code></li> <li>10.6 Dockerfile (Alpine 3.16 \u306f2024\u5e745\u6708\u307e\u3067\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/mariadb-10.6</code></li> <li>10.11 Dockerfile (Alpine 3.18 \u306f2025\u5e745\u6708\u307e\u3067\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/mariadb-10.11</code></li> </ul> <p>\u60c5\u5831</p> <p>\u3053\u308c\u3089\u306e\u30a4\u30e1\u30fc\u30b8\u306f\u3001\u516c\u5f0f\u306eMariaDB\u30a4\u30e1\u30fc\u30b8\u304b\u3089\u69cb\u7bc9\u3055\u308c\u3066\u3044\u306a\u3044\u305f\u3081\u3001\u30b5\u30dd\u30fc\u30c8\u30b5\u30a4\u30af\u30eb\u304c\u7570\u306a\u308a\u3001\u57fa\u76e4\u3068\u306a\u308bAlpine\u30a4\u30e1\u30fc\u30b8\u304c\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u671f\u9593\u306e\u307f\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u304c\u63d0\u4f9b\u3055\u308c\u307e\u3059\u3002\u8a73\u7d30\u306fhttps://alpinelinux.org/releases/\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u5b9f\u969b\u306b\u306f\u307b\u3068\u3093\u3069\u306e\u5834\u5408\u3001MariaDB\u30b3\u30f3\u30c6\u30ca\u3092\u30ed\u30fc\u30ab\u30eb\u3067\u306e\u307f\u5b9f\u884c\u3057\u3001\u672c\u756a\u74b0\u5883\u3067\u306fDBaaS\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u304c\u63d0\u4f9b\u3059\u308bManaged Cloud Databases\u3092\u5229\u7528\u3057\u307e\u3059\u3002</p>"},{"location":"ja/docker-images/mariadb/#lagoon-adaptions","title":"Lagoon\u306e\u9069\u5fdc","text":"<p>MariaDB\u30b3\u30f3\u30c6\u30ca\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u516c\u958b\u30dd\u30fc\u30c8\u306f\u30dd\u30fc\u30c8<code>3306</code>\u3067\u3059\u3002</p> <p>Lagoon\u304cMariaDB\u30b3\u30f3\u30c6\u30ca\u306e\u5b9f\u884c\u65b9\u6cd5\u3092\u6700\u9069\u306b\u9078\u629e\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u306b\u306f\u3001<code>lagoon.type: mariadb</code>\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001DBaaS\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u306f\u3001\u30af\u30e9\u30b9\u30bf\u30fc\u5185\u3067\u5229\u7528\u53ef\u80fd\u306a\u5834\u5408\u3001\u30af\u30e9\u30a6\u30c9\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3067\u304d\u307e\u3059\u3002\u30b3\u30f3\u30c6\u30ca\u5185\u3067MariaDB\u3092\u78ba\u5b9f\u306b\u5b9f\u884c\u3057\u305f\u3044\u5834\u5408\u306f\u3001<code>lagoon.type: mariadb-single</code>\u3092\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002MariaDB\u30b3\u30f3\u30c6\u30ca\u306b\u5bfe\u3057\u3066\u306f\u3001\u6c38\u7d9a\u30b9\u30c8\u30ec\u30fc\u30b8\u304c\u5e38\u306b<code>/var/lib/mysql</code>\u306b\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3055\u308c\u307e\u3059\u3002</p> <p>\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306fLagoon\u3067\u4f7f\u7528\u3055\u308c\u308b\u3053\u3068\u3092\u60f3\u5b9a\u3057\u3066\u6e96\u5099\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u3059\u3067\u306b\u3044\u304f\u3064\u304b\u306e\u3053\u3068\u304c\u884c\u308f\u308c\u3066\u3044\u307e\u3059:</p> <ul> <li>\u30d5\u30a9\u30eb\u30c0\u306e\u6a29\u9650\u306f\u3001<code>fix-permissions</code>\u3067\u81ea\u52d5\u7684\u306b\u9069\u5fdc\u3055\u308c\u308b\u305f\u3081\u3001\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306f\u30e9\u30f3\u30c0\u30e0\u306a\u30e6\u30fc\u30b6\u30fc\u3067\u52d5\u4f5c\u3057\u307e\u3059\u3002</li> <li><code>readiness-probe.sh</code> \u30b9\u30af\u30ea\u30d7\u30c8\u3001MariaDB \u30b3\u30f3\u30c6\u30ca\u306e\u6e96\u5099\u5b8c\u4e86\u72b6\u614b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</li> </ul>"},{"location":"ja/docker-images/mariadb/#docker-composeyml-snippet","title":"<code>docker-compose.yml</code> \u30b9\u30cb\u30da\u30c3\u30c8","text":"docker-compose.yml<pre><code>    mariadb:\nimage: uselagoon/mariadb-10.6-drupal:latest\nlabels:\n# Lagoon\u306bMariaDB\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3067\u3042\u308b\u3053\u3068\u3092\u4f1d\u3048\u308b\nlagoon.type: mariadb\nports:\n# \u30dd\u30fc\u30c83306\u3092\u30e9\u30f3\u30c0\u30e0\u306a\u30ed\u30fc\u30ab\u30eb\u30dd\u30fc\u30c8\u3067\u516c\u958b\u3057\u3001`docker-compose port mariadb 3306`\u3067\u305d\u308c\u3092\u898b\u3064\u3051\u308b\n- \"3306\"\nvolumes:\n# MariaDB\u7528\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30d1\u30b9\u306b\u540d\u524d\u4ed8\u304d\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\n- db:/var/lib/mysql\n</code></pre>"},{"location":"ja/docker-images/mariadb/#included-tools","title":"\u30c4\u30fc\u30eb","text":"<ul> <li><code>mysqltuner.pl</code> - \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u8abf\u6574\u306b\u4fbf\u5229\u306aPerl\u30b9\u30af\u30ea\u30d7\u30c8\u3002</li> <li><code>mysql-backup.sh</code> - \u958b\u767a\u74b0\u5883\u3067 MySQL \u306e\u65e5\u6b21\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u81ea\u52d5\u5316\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3002</li> <li><code>pwgen</code> - \u30e9\u30f3\u30c0\u30e0\u3067\u8907\u96d1\u306a\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u751f\u6210\u3059\u308b\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u3002</li> </ul>"},{"location":"ja/docker-images/mariadb/#included-mycnf-configuration-file","title":"<code>my.cnf</code> \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb","text":"<p>\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306b\u306f\u3001Lagoon\u3067\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306b\u6700\u9069\u5316\u3055\u308c\u305f \u30c7\u30d5\u30a9\u30eb\u30c8 \u306eMariaDB\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u4ed8\u5c5e\u3057\u3066\u3044\u307e\u3059\u3002\u4e00\u90e8\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u74b0\u5883\u5909\u6570\u3067\u8a2d\u5b9a\u53ef\u80fd\u3067\u3059\u3002</p>"},{"location":"ja/docker-images/mariadb/#environment-variables","title":"\u74b0\u5883\u5909\u6570","text":"\u74b0\u5883\u5909\u6570\u540d \u30c7\u30d5\u30a9\u30eb\u30c8 \u8aac\u660e MARIADB_DATABASE lagoon \u8d77\u52d5\u6642\u306b\u4f5c\u6210\u3055\u308c\u308b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d MARIADB_USER lagoon \u8d77\u52d5\u6642\u306b\u4f5c\u6210\u3055\u308c\u308b\u30c7\u30d5\u30a9\u30eb\u30c8\u30e6\u30fc\u30b6\u30fc MARIADB_PASSWORD lagoon \u8d77\u52d5\u6642\u306b\u4f5c\u6210\u3055\u308c\u308b\u30c7\u30d5\u30a9\u30eb\u30c8\u30e6\u30fc\u30b6\u30fc\u306e\u30d1\u30b9\u30ef\u30fc\u30c9 MARIADB_ROOT_PASSWORD Lag00n MariaDB\u306e\u30eb\u30fc\u30c8\u30e6\u30fc\u30b6\u30fc\u306e\u30d1\u30b9\u30ef\u30fc\u30c9 MARIADB_CHARSET utf8mb4 \u30b5\u30fc\u30d0\u30fc\u306e\u6587\u5b57\u30bb\u30c3\u30c8\u3092\u8a2d\u5b9a\u3059\u308b MARIADB_COLLATION utf8mb4_bin \u30b5\u30fc\u30d0\u30fc\u306e\u7167\u5408\u9806\u5e8f\u3092\u8a2d\u5b9a\u3059\u308b MARIADB_MAX_ALLOWED_PACKET 64M <code>max_allowed_packet</code>\u306e\u30b5\u30a4\u30ba\u3092\u8a2d\u5b9a\u3059\u308b MARIADB_INNODB_BUFFER_POOL_SIZE 256M MariaDB InnoDB\u30d0\u30c3\u30d5\u30a1\u30d7\u30fc\u30eb\u306e\u30b5\u30a4\u30ba\u3092\u8a2d\u5b9a\u3057\u307e\u3059 MARIADB_INNODB_BUFFER_POOL_INSTANCES 1 InnoDB\u30d0\u30c3\u30d5\u30a1\u30d7\u30fc\u30eb\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u6570 MARIADB_INNODB_LOG_FILE_SIZE 64M InnoDB\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u306e\u30b5\u30a4\u30ba MARIADB_LOG_SLOW (\u8a2d\u5b9a\u306a\u3057) \u9045\u3044\u30af\u30a8\u30ea\u306e\u4fdd\u5b58\u3092\u5236\u5fa1\u3059\u308b\u5909\u6570 MARIADB_LOG_QUERIES (\u8a2d\u5b9a\u306a\u3057) \u3059\u3079\u3066\u306e\u30af\u30a8\u30ea\u306e\u4fdd\u5b58\u3092\u5236\u5fa1\u3059\u308b\u5909\u6570 BACKUPS_DIR /var/lib/mysql/backup \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30d1\u30b9 MARIADB_DATA_DIR /var/lib/mysql MariaDB\u306e\u30c7\u30fc\u30bf\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u30d1\u30b9\u3002\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3001\u3053\u306e\u5024\u3092\u5909\u66f4\u3059\u308b\u3068\u30c7\u30fc\u30bf\u640d\u5931\u304c\u767a\u751f\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\uff01 MARIADB_COPY_DATA_DIR_SOURCE (\u8a2d\u5b9a\u306a\u3057) Mariadb\u306e\u30a8\u30f3\u30c8\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u3001\u8a2d\u5b9a\u3055\u308c\u305f<code>ARIADB_DATA_DIR</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30c7\u30fc\u30bf\u3092\u30b3\u30d4\u30fc\u3059\u308b\u969b\u306b\u4f7f\u7528\u3059\u308b\u30d1\u30b9\u306b\u3064\u3044\u3066\u30bb\u30eb\u540d\u3057\u307e\u3059\u3002\u3053\u306e\u30d1\u30b9\u3092\u5229\u7528\u3057\u3066\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u3042\u3089\u304b\u3058\u3081MariaDB\u306b\u6295\u5165\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u305f\u3060\u3057\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u306fSQL\u30d5\u30a1\u30a4\u30eb\u3067\u306f\u306a\u304f\u3001\u5b9f\u969b\u306eMariaDB\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u306e\u5b58\u5728\u3092\u524d\u63d0\u3068\u3057\u3066\u3044\u307e\u3059\u3002 \u3055\u3089\u306b\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u3001\u30b3\u30d4\u30fc\u5148\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u65e2\u5b58\u306eMySQL\u30c7\u30fc\u30bf\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306b\u306e\u307f\u3001\u30c7\u30fc\u30bf\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <p><code>LAGOON_ENVIRONMENT_TYPE</code> \u5909\u6570\u304c <code>production</code> \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306f <code>MARIADB_INNODB_BUFFER_POOL_SIZE=1024</code> \u304a\u3088\u3073 <code>MARIADB_INNODB_LOG_FILE_SIZE=256</code> \u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u6700\u9069\u5316\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/docker-images/mongodb/","title":"MongoDB","text":"<p>MongoDB\u306f\u3001\u6c4e\u7528\u7684\u306a\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u578b\u5206\u6563\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3067\u3042\u308a\u3001\u73fe\u4ee3\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u8005\u3084\u30af\u30e9\u30a6\u30c9\u6642\u4ee3\u306e\u30cb\u30fc\u30ba\u306b\u5408\u308f\u305b\u3066\u69cb\u7bc9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u30c7\u30fc\u30bf\u306f JSON\u306e\u3088\u3046\u306a\u5f62\u5f0f\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u4fdd\u5b58\u3055\u308c\u307e\u3059</p> <ul> <li>\u51fa\u5178: mongodb.com</li> </ul>"},{"location":"ja/docker-images/mongodb/#supported-versions","title":"\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3","text":"<p>4.0 Dockerfile - <code>uselagoon/mongo-4</code></p> <p>\u3053\u306eDockerfile\u306f\u3001\u30b9\u30bf\u30f3\u30c9\u30a2\u30ed\u30f3\u306eMongoDB\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30b5\u30fc\u30d0\u30fc\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/docker-images/mongodb/#lagoon-adaptions","title":"Lagoon\u306e\u9069\u5fdc","text":"<p>\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306fLagoon\u3067\u4f7f\u7528\u3055\u308c\u308b\u3053\u3068\u3092\u60f3\u5b9a\u3057\u3066\u6e96\u5099\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u3059\u3067\u306b\u3044\u304f\u3064\u304b\u306e\u3053\u3068\u304c\u884c\u308f\u308c\u3066\u3044\u307e\u3059:</p> <ul> <li>\u30d5\u30a9\u30eb\u30c0\u306e\u6a29\u9650\u306f\u3001<code>fix-permissions</code>\u3067\u81ea\u52d5\u7684\u306b\u9069\u5fdc\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u30e9\u30f3\u30c0\u30e0\u306a\u30e6\u30fc\u30b6\u30fc\u3067\u3082\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u3001Kubernetes\u3084OpenShift\u3067\u3082\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002</li> </ul>"},{"location":"ja/docker-images/mysql/","title":"MySQL","text":"<p>MySQL\u306f\u4eba\u6c17\u306e\u3042\u308b\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30ca\u30eb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0(RDBMS)\u3067\u3059\u3002</p> <p>Lagoon\u306e <code>MySQl</code> \u30a4\u30e1\u30fc\u30b8\u306eDockerfile\u306f\u3001\u516c\u5f0f\u306e\u30a2\u30c3\u30d7\u30b9\u30c8\u30ea\u30fc\u30e0docker \u30a4\u30e1\u30fc\u30b8<code>mysql</code>(Oracle Linux variant)\u3092\u30d9\u30fc\u30b9\u306b\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p>\u3053\u306eDockerfile\u306f\u3001\u30b9\u30bf\u30f3\u30c9\u30a2\u30ed\u30f3\u306eMariaDB\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30b5\u30fc\u30d0\u30fc\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002</p> <ul> <li>8.0 Dockerfile (2026\u5e744\u6708\u307e\u3067\u5ef6\u9577\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/mysql-8.0</code></li> <li>8.4 Dockerfile (2032\u5e744\u6708\u307e\u3067\u5ef6\u9577\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/mysql-8.4</code></li> </ul> <p>\u60c5\u5831</p> <p>\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306fMariaDB\u30a4\u30e1\u30fc\u30b8\u306e\u5b8c\u5168\u306a\u4ee3\u66ff\u54c1\u3068\u3057\u3066\u4f5c\u3089\u308c\u305f\u3082\u306e\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u305d\u306e\u305f\u3081\u3001\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u74b0\u5883\u3067\u52d5\u4f5c\u3055\u305b\u308b\u306b\u306f\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u304c\u5fc5\u8981\u306a\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/docker-images/mysql/#lagoon-adaptions","title":"Lagoon\u306e\u9069\u5fdc","text":"<p>MySQL\u30b3\u30f3\u30c6\u30ca\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u516c\u958b\u30dd\u30fc\u30c8\u306f\u30dd\u30fc\u30c8<code>3306</code>\u3067\u3059\u3002</p> <p>Lagoon\u304cMySQL\u30b3\u30f3\u30c6\u30ca\u306e\u5b9f\u884c\u65b9\u6cd5\u3092\u6700\u9069\u306b\u9078\u629e\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u306b\u306f\u3001<code>lagoon.type: mariadb</code>\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001DBaaS\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u306f\u3001\u30af\u30e9\u30b9\u30bf\u30fc\u5185\u3067\u5229\u7528\u53ef\u80fd\u306a\u5834\u5408\u3001\u30af\u30e9\u30a6\u30c9\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3067\u304d\u307e\u3059\u3002\u30b3\u30f3\u30c6\u30ca\u5185\u3067MySQL\u3092\u78ba\u5b9f\u306b\u5b9f\u884c\u3057\u305f\u3044\u5834\u5408\u306f\u3001<code>lagoon.type: mariadb-single</code>\u3092\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002MySQL\u30b3\u30f3\u30c6\u30ca\u306b\u5bfe\u3057\u3066\u306f\u3001\u6c38\u7d9a\u30b9\u30c8\u30ec\u30fc\u30b8\u304c\u5e38\u306b<code>/var/lib/mysql</code>\u306b\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3055\u308c\u307e\u3059\u3002</p> <p>\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306fLagoon\u3067\u4f7f\u7528\u3055\u308c\u308b\u3053\u3068\u3092\u60f3\u5b9a\u3057\u3066\u6e96\u5099\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u3059\u3067\u306b\u3044\u304f\u3064\u304b\u306e\u3053\u3068\u304c\u884c\u308f\u308c\u3066\u3044\u307e\u3059:</p> <ul> <li>\u30d5\u30a9\u30eb\u30c0\u306e\u6a29\u9650\u306f\u3001<code>fix-permissions</code>\u3067\u81ea\u52d5\u7684\u306b\u9069\u5fdc\u3055\u308c\u308b\u305f\u3081\u3001\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306f\u30e9\u30f3\u30c0\u30e0\u306a\u30e6\u30fc\u30b6\u30fc\u3067\u52d5\u4f5c\u3057\u307e\u3059\u3002</li> <li><code>readiness-probe.sh</code> \u30b9\u30af\u30ea\u30d7\u30c8\u3001MariaDB \u30b3\u30f3\u30c6\u30ca\u306e\u6e96\u5099\u5b8c\u4e86\u72b6\u614b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</li> </ul>"},{"location":"ja/docker-images/mysql/#docker-composeyml-snippet-for-non-drupal-projects","title":"\u975eDrupal\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7528\u306e<code>docker-compose.yml</code> \u30b9\u30cb\u30da\u30c3\u30c8","text":"docker-compose.yml<pre><code>    mariadb:\nimage: uselagoon/mysql-8.4:latest\nlabels:\n# Lagoon\u306bMariaDB\u4e92\u63db\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3067\u3042\u308b\u3053\u3068\u3092\u4f1d\u3048\u308b\nlagoon.type: mariadb\nports:\n# \u30dd\u30fc\u30c83306\u3092\u30e9\u30f3\u30c0\u30e0\u306a\u30ed\u30fc\u30ab\u30eb\u30dd\u30fc\u30c8\u3067\u516c\u958b\u3057\u3001`docker-compose port mysql 3306`\u3067\u305d\u308c\u3092\u898b\u3064\u3051\u308b\n- \"3306\"\nvolumes:\n# MySQL\u7528\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30d1\u30b9\u306b\u540d\u524d\u4ed8\u304d\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\n- db:/var/lib/mysql\n</code></pre>"},{"location":"ja/docker-images/mysql/#docker-composeyml-snippet-for-drupal-projects","title":"Drupal\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7528\u306e<code>docker-compose.yml</code> \u30b9\u30cb\u30da\u30c3\u30c8","text":"docker-compose.yml<pre><code>    mariadb:\nimage: uselagoon/mysql-8.4:latest\nlabels:\n# Lagoon\u306bMariaDB\u4e92\u63db\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3067\u3042\u308b\u3053\u3068\u3092\u4f1d\u3048\u308b\nlagoon.type: mariadb\nports:\n# \u30dd\u30fc\u30c83306\u3092\u30e9\u30f3\u30c0\u30e0\u306a\u30ed\u30fc\u30ab\u30eb\u30dd\u30fc\u30c8\u3067\u516c\u958b\u3057\u3001`docker-compose port mysql 3306`\u3067\u305d\u308c\u3092\u898b\u3064\u3051\u308b\n- \"3306\"\nenvironment:\n# Lagoon\u3067Drupal\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u671f\u5f85\u3059\u308b\u8a8d\u8a3c\u60c5\u5831\u3068\u4e00\u81f4\u3059\u308b\u3088\u3046\u306b\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a8d\u8a3c\u60c5\u5831\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u307e\u3059\u3002\n- MYSQL_DATABASE=drupal\n- MYSQL_USER=drupal\n- MYSQL_PASSWORD=drupal\nvolumes:\n# MySQL\u7528\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30d1\u30b9\u306b\u540d\u524d\u4ed8\u304d\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\n- db:/var/lib/mysql\n</code></pre>"},{"location":"ja/docker-images/mysql/#included-tools","title":"\u30c4\u30fc\u30eb","text":"<ul> <li><code>mysqltuner.pl</code> - \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u8abf\u6574\u306b\u4fbf\u5229\u306aPerl\u30b9\u30af\u30ea\u30d7\u30c8\u3002</li> <li><code>mysql-backup.sh</code> - \u958b\u767a\u74b0\u5883\u3067 MySQL \u306e\u65e5\u6b21\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u81ea\u52d5\u5316\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3002</li> <li><code>pwgen</code> - \u30e9\u30f3\u30c0\u30e0\u3067\u8907\u96d1\u306a\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u751f\u6210\u3059\u308b\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u3002</li> </ul>"},{"location":"ja/docker-images/mysql/#included-mycnf-configuration-file","title":"<code>my.cnf</code> \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb","text":"<p>\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306b\u306f\u3001Lagoon\u3067\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306b\u6700\u9069\u5316\u3055\u308c\u305f \u30c7\u30d5\u30a9\u30eb\u30c8 \u306eMariaDB\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002\u4e00\u90e8\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u74b0\u5883\u5909\u6570\u3067\u8a2d\u5b9a\u53ef\u80fd\u3067\u3059\u3002</p>"},{"location":"ja/docker-images/mysql/#environment-variables","title":"\u74b0\u5883\u5909\u6570","text":"\u74b0\u5883\u5909\u6570\u540d \u30c7\u30d5\u30a9\u30eb\u30c8 \u8aac\u660e MYSQL_DATABASE lagoon \u8d77\u52d5\u6642\u306b\u4f5c\u6210\u3055\u308c\u308b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d MYSQL_USER lagoon \u8d77\u52d5\u6642\u306b\u4f5c\u6210\u3055\u308c\u308b\u30c7\u30d5\u30a9\u30eb\u30c8\u30e6\u30fc\u30b6\u30fc MYSQL_PASSWORD lagoon \u8d77\u52d5\u6642\u306b\u4f5c\u6210\u3055\u308c\u308b\u30c7\u30d5\u30a9\u30eb\u30c8\u30e6\u30fc\u30b6\u30fc\u306e\u30d1\u30b9\u30ef\u30fc\u30c9 MYSQL_ROOT_PASSWORD Lag00n MariaDB\u306e\u30eb\u30fc\u30c8\u30e6\u30fc\u30b6\u30fc\u306e\u30d1\u30b9\u30ef\u30fc\u30c9 MYSQL_CHARSET utf8mb4 \u30b5\u30fc\u30d0\u30fc\u306e\u6587\u5b57\u30bb\u30c3\u30c8\u3092\u8a2d\u5b9a\u3059\u308b MYSQL_COLLATION utf8mb4_bin \u30b5\u30fc\u30d0\u30fc\u306e\u7167\u5408\u9806\u5e8f\u3092\u8a2d\u5b9a\u3059\u308b MYSQL_MAX_ALLOWED_PACKET 64M <code>max_allowed_packet</code>\u306e\u30b5\u30a4\u30ba\u3092\u8a2d\u5b9a\u3059\u308b MYSQL_INNODB_BUFFER_POOL_SIZE 256M MySQL InnoDB\u30d0\u30c3\u30d5\u30a1\u30d7\u30fc\u30eb\u306e\u30b5\u30a4\u30ba\u3092\u8a2d\u5b9a\u3057\u307e\u3059 MYSQL_INNODB_BUFFER_POOL_INSTANCES 1 InnoDB\u30d0\u30c3\u30d5\u30a1\u30d7\u30fc\u30eb\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u6570 MYSQL_INNODB_LOG_FILE_SIZE 64M InnoDB\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u306e\u30b5\u30a4\u30ba MYSQL_LOG_SLOW (\u8a2d\u5b9a\u306a\u3057) \u9045\u3044\u30af\u30a8\u30ea\u306e\u4fdd\u5b58\u3092\u5236\u5fa1\u3059\u308b\u5909\u6570 MYSQL_LOG_QUERIES (\u8a2d\u5b9a\u306a\u3057) \u3059\u3079\u3066\u306e\u30af\u30a8\u30ea\u306e\u4fdd\u5b58\u3092\u5236\u5fa1\u3059\u308b\u5909\u6570 BACKUPS_DIR /var/lib/mysql/backup \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30d1\u30b9 MYSQL_DATA_DIR /var/lib/mysql MySQL\u306e\u30c7\u30fc\u30bf\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u30d1\u30b9\u3002\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3001\u3053\u306e\u5024\u3092\u5909\u66f4\u3059\u308b\u3068\u30c7\u30fc\u30bf\u640d\u5931\u304c\u767a\u751f\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\uff01 MARIADB_COPY_DATA_DIR_SOURCE (\u8a2d\u5b9a\u306a\u3057) MySQL\u306e\u30a8\u30f3\u30c8\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u3001\u8a2d\u5b9a\u3055\u308c\u305f<code>MYSQL_DATA_DIR</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30c7\u30fc\u30bf\u3092\u30b3\u30d4\u30fc\u3059\u308b\u969b\u306b\u4f7f\u7528\u3059\u308b\u30d1\u30b9\u306b\u3064\u3044\u3066\u30bb\u30eb\u540d\u3057\u307e\u3059\u3002\u3053\u306e\u30d1\u30b9\u3092\u5229\u7528\u3057\u3066\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u3042\u3089\u304b\u3058\u3081MySQL\u306b\u6295\u5165\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u305f\u3060\u3057\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u306fSQL\u30d5\u30a1\u30a4\u30eb\u3067\u306f\u306a\u304f\u3001\u5b9f\u969b\u306eMySQL\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u306e\u5b58\u5728\u3092\u524d\u63d0\u3068\u3057\u3066\u3044\u307e\u3059\u3002 \u3055\u3089\u306b\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u3001\u30b3\u30d4\u30fc\u5148\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u65e2\u5b58\u306eMySQL\u30c7\u30fc\u30bf\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306b\u306e\u307f\u3001\u30c7\u30fc\u30bf\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <p><code>LAGOON_ENVIRONMENT_TYPE</code> \u5909\u6570\u304c <code>production</code> \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306f <code>MYSQL_INNODB_BUFFER_POOL_SIZE=1024</code> \u304a\u3088\u3073 <code>MYSQL_INNODB_LOG_FILE_SIZE=256</code> \u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u6700\u9069\u5316\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/docker-images/nginx/","title":"NGINX","text":"<p>Lagoon\u306e <code>nginx</code> \u30a4\u30e1\u30fc\u30b8Dockerfile\u3067\u3059\u3002\u516c\u5f0f\u306e<code>openresty/openresty</code> \u30a4\u30e1\u30fc\u30b8\u3092\u30d9\u30fc\u30b9\u306b\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p>\u3053\u306eDockerfile\u306f\u3001Lagoon\u5185\u306e\u3042\u3089\u3086\u308b\u30a6\u30a7\u30d6\u30b5\u30fc\u30d0\u30fc\u306e\u30d9\u30fc\u30b9\u3068\u3057\u3066\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/docker-images/nginx/#lagoon","title":"Lagoon\u306e\u8abf\u6574\u4e8b\u9805","text":"<p>NGINX\u30b3\u30f3\u30c6\u30ca\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u516c\u958b\u30dd\u30fc\u30c8\u306f <code>8080</code> \u30dd\u30fc\u30c8\u3067\u3059\u3002</p> <p>\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306fLagoon\u3067\u4f7f\u7528\u3055\u308c\u308b\u3053\u3068\u3092\u60f3\u5b9a\u3057\u3066\u6e96\u5099\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u3059\u3067\u306b\u3044\u304f\u3064\u304b\u306e\u3053\u3068\u304c\u884c\u308f\u308c\u3066\u3044\u307e\u3059:</p> <ul> <li>\u30d5\u30a9\u30eb\u30c0\u306e\u6a29\u9650\u306f\u3001<code>fix-permissions</code>\u3067\u81ea\u52d5\u7684\u306b\u9069\u5fdc\u3055\u308c\u308b\u305f\u3081\u3001\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306f\u30e9\u30f3\u30c0\u30e0\u306a\u30e6\u30fc\u30b6\u30fc\u3067\u52d5\u4f5c\u3057\u307e\u3059\u3002</li> <li><code>/etc/nginx/*</code> \u5185\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u30a8\u30f3\u30c8\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\u306b\u3088\u3063\u3066 <code>envplate</code> \u3092\u901a\u3058\u3066\u51e6\u7406\u3055\u308c\u307e\u3059\u3002</li> </ul>"},{"location":"ja/docker-images/nginx/#nginx-static-filesconf","title":"<code>NGINX</code> \u8a2d\u5b9a(<code>static-files.conf</code>)","text":"<p>\u8b66\u544a</p> <p>\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f <code>NGINX</code> \u306f\u9759\u7684\u30d5\u30a1\u30a4\u30eb\u306e\u307f\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3084PHP\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304c\u5fc5\u8981\u306a\u3044\u9759\u7684\u30b5\u30a4\u30c8\u306b\u4f7f\u7528\u3067\u304d\u307e\u3059:\u4f8b\u3048\u3070\u3001\u9759\u7684\u30b5\u30a4\u30c8\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u30fc\u306e Hugo\u3001Jekyll\u3001Gatsby \u306a\u3069\u3067\u3059\u3002</p> <p>PHP\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001<code>php-fpm</code>\u30a4\u30e1\u30fc\u30b8\u3092\u53c2\u7167\u3057\u3001<code>nginx</code>\u3068<code>php-fpm</code>\u3092\u4e00\u7dd2\u306b\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u30d3\u30eb\u30c9\u30d7\u30ed\u30bb\u30b9\u4e2d\u306b\u30d3\u30eb\u30c9\u3057\u3001<code>nginx</code>\u30b3\u30f3\u30c6\u30ca\u306b\u6295\u5165\u3057\u307e\u3059\u3002</p>"},{"location":"ja/docker-images/nginx/#_1","title":"\u30d8\u30eb\u30d1\u30fc","text":""},{"location":"ja/docker-images/nginx/#redirects-mapconf","title":"<code>redirects-map.conf</code>","text":"<p>\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u306b\u3001<code>redirects-map.conf</code>\u30d5\u30a1\u30a4\u30eb\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u3092\u4f7f\u7528\u3057\u3066\u3001\u30de\u30fc\u30b1\u30c6\u30a3\u30f3\u30b0\u30c9\u30e1\u30a4\u30f3\u3092\u30b5\u30d6\u30b5\u30a4\u30c8\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3057\u305f\u308a\u3001www\u306a\u3057\u3092www\u4ed8\u304d\u306b\u3059\u308b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u304c\u591a\u3044\u5834\u5408\u306f\u3001\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u6027\u3092\u5411\u4e0a\u3055\u305b\u308b\u305f\u3081\u306b<code>redirects-map.conf</code>\u3092\u30b3\u30fc\u30c9\u306e\u96a3\u306b\u4fdd\u5b58\u3059\u308b\u3053\u3068\u3092\u63a8\u5968\u3057\u307e\u3059\u3002</p> <p>\u6ce8\u610f:</p> <p>\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u304c\u5c11\u306a\u3044\u5834\u5408\u306f\u3001<code>nginx.dockerfile</code>\u306e<code>RUN</code>\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\u4fbf\u5229\u306a\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>\u4ee5\u4e0b\u306f\u3001<code>www.example.com</code>\u3092<code>example.com</code>\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3057\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u4fdd\u6301\u3059\u308b\u65b9\u6cd5\u3092\u793a\u3059\u4f8b\u3067\u3059:</p> Redirect<pre><code>RUN echo \"~^www.example.com http://example.com\\$request_uri;\" &gt;&gt; /etc/nginx/redirects-map.conf\n</code></pre> <p>\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u306e\u7a2e\u985e\u306e\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u3001<code>redirects-map.conf</code>\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p><code>redirects-map.conf</code>\u3092\u914d\u7f6e\u3057\u305f\u3089\u3001\u30d3\u30eb\u30c9\u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u53d6\u308a\u8fbc\u3080\u305f\u3081\u306b\u3001<code>nginx.dockerfile</code>\u306b\u3082\u305d\u308c\u3092\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> nginx.dockerfile<pre><code>COPY redirects-map.conf /etc/nginx/redirects-map.conf\n</code></pre>"},{"location":"ja/docker-images/nginx/#_2","title":"\u30d9\u30fc\u30b7\u30c3\u30af\u8a8d\u8a3c","text":"<p><code>BASIC_AUTH_USERNAME</code>\u304a\u3088\u3073 <code>BASIC_AUTH_PASSWORD</code> \u74b0\u5883\u5909\u6570\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u30d9\u30fc\u30b7\u30c3\u30af\u8a8d\u8a3c\u306f\u81ea\u52d5\u7684\u306b\u6709\u52b9\u306b\u306a\u308a\u307e\u3059\u3002</p> <p>\u8b66\u544a</p> <p>\u30d9\u30fc\u30b7\u30c3\u30af\u8a8d\u8a3c\u306e\u81ea\u52d5\u8a2d\u5b9a\u306f\u3001\u5229\u4fbf\u6027\u306e\u305f\u3081\u306b\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u3084\u6a5f\u5bc6\u30c7\u30fc\u30bf\u3092\u4fdd\u8b77\u3059\u308b\u305f\u3081\u306e\u5b89\u5168\u306a\u65b9\u6cd5\u3068\u306f\u307f\u306a\u3055\u308c\u307e\u305b\u3093\u3002</p>"},{"location":"ja/docker-images/nginx/#environment-variables","title":"\u74b0\u5883\u5909\u6570","text":"<p>\u3044\u304f\u3064\u304b\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u74b0\u5883\u5909\u6570\u3092\u4f7f\u7528\u3057\u3066\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002</p> \u74b0\u5883\u5909\u6570 \u30c7\u30d5\u30a9\u30eb\u30c8 \u8aac\u660e BASIC_AUTH restricted \u30d9\u30fc\u30b7\u30c3\u30af\u8a8d\u8a3c\u3092\u7121\u52b9\u306b\u3059\u308b\u306b\u306f <code>off</code> \u306b\u8a2d\u5b9a\u3057\u307e\u3059 BASIC_AUTH_USERNAME (\u8a2d\u5b9a\u306a\u3057) \u30d9\u30fc\u30b7\u30c3\u30af\u8a8d\u8a3c\u306e\u30e6\u30fc\u30b6\u30fc\u30cd\u30fc\u30e0 BASIC_AUTH_PASSWORD (\u8a2d\u5b9a\u306a\u3057) \u30d9\u30fc\u30b7\u30c3\u30af\u8a8d\u8a3c\u306e\u30d1\u30b9\u30ef\u30fc\u30c9(\u975e\u6697\u53f7\u5316) FAST_HEALTH_CHECK (\u8a2d\u5b9a\u306a\u3057) \u7279\u5b9a\u306e\u30e6\u30fc\u30b6\u30fc\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8(StatusCake\u3001Pingdom\u3001Site25x7\u3001Uptime\u3001nagios)\u304b\u3089\u306eGET\u30ea\u30af\u30a8\u30b9\u30c8\u306f\u3001\u8efd\u91cf\u306aLagoon\u30b5\u30fc\u30d3\u30b9\u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b\u306b\u306f\u3001<code>true</code>\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002"},{"location":"ja/docker-images/nodejs/","title":"Node.js","text":"<p>Lagoon\u306e <code>Node.js</code> Docker\u30a4\u30e1\u30fc\u30b8\u3067\u3059\u3002\u516c\u5f0f\u306eNode Alpine\u30a4\u30e1\u30fc\u30b8\u3092\u30d9\u30fc\u30b9\u306b\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/docker-images/nodejs/#supported-versions","title":"\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3","text":"<p>Node.js\u306e\u30a4\u30e1\u30fc\u30b8\u306f2\u3064\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u3042\u308a\u307e\u3059\u3002\u901a\u5e38\u306e<code>node:version</code>\u30a4\u30e1\u30fc\u30b8\u3068<code>node:version-builder</code>\u3067\u3059\u3002</p> <p><code>node:version-builder</code>\u306b\u306f\u3001Node.js\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30d3\u30eb\u30c9\u3059\u308b\u969b\u306b\u5fc5\u8981\u306a\u8ffd\u52a0\u30c4\u30fc\u30eb(\u30d3\u30eb\u30c9\u30e9\u30a4\u30d6\u30e9\u30ea\u3001npm\u3001Yarn\u306a\u3069)\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002\u8a73\u7d30\u306a\u30ea\u30b9\u30c8\u306b\u3064\u3044\u3066\u306f\u3001Dockerfile\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <ul> <li>12 (\u4e92\u63db\u6027\u306e\u305f\u3081\u306e\u307f\u5229\u7528\u53ef\u80fd\u3001\u516c\u5f0f\u30b5\u30dd\u30fc\u30c8\u306f\u7d42\u4e86\u3057\u3066\u3044\u307e\u3059) - <code>uselagoon/node-12</code></li> <li>14 (\u4e92\u63db\u6027\u306e\u305f\u3081\u306e\u307f\u5229\u7528\u53ef\u80fd\u3001\u516c\u5f0f\u30b5\u30dd\u30fc\u30c8\u306f\u7d42\u4e86\u3057\u3066\u3044\u307e\u3059) - <code>uselagoon/node-14</code></li> <li>16 (\u4e92\u63db\u6027\u306e\u305f\u3081\u306e\u307f\u5229\u7528\u53ef\u80fd\u3001\u516c\u5f0f\u30b5\u30dd\u30fc\u30c8\u306f\u7d42\u4e86\u3057\u3066\u3044\u307e\u3059) - <code>uselagoon/node-16</code></li> <li>18 Dockerfile (2025\u5e744\u6708\u307e\u3067\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/node-18</code></li> <li>20 Dockerfile (2026\u5e744\u6708\u307e\u3067\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/node-20</code></li> <li>22 Dockerfile (2027\u5e744\u6708\u307e\u3067\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/node-22</code></li> </ul> <p>\u30d2\u30f3\u30c8</p> <p>Lagoon\u306f\u3001\u516c\u5f0f\u306b\u30a2\u30ca\u30a6\u30f3\u30b9\u3055\u308c\u305f\u7d42\u4e86\u65e5(EOL)\u306e\u5f8c\u306b\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u3001EOL\u306b\u9054\u3057\u305fNode.js\u30a4\u30e1\u30fc\u30b8\u306e\u66f4\u65b0\u3092\u505c\u6b62\u3057\u307e\u3059\u3002\u8a73\u7d30\u306fhttps://nodejs.org/en/about/releases/\u3092\u53c2\u7167\u3057\u3066\u4e0b\u3055\u3044\u3002</p>"},{"location":"ja/docker-images/nodejs/#lagoon-adaptions","title":"Lagoon\u306e\u9069\u5fdc","text":"<p>Node.js\u30b3\u30f3\u30c6\u30ca\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u516c\u958b\u30dd\u30fc\u30c8\u306f\u30dd\u30fc\u30c8<code>3000</code>\u3067\u3059\u3002</p> <p>Lagoon\u3067\u306f\u3001<code>lagoon.type: node-persistent</code>\u3092\u4f7f\u7528\u3057\u3066\u3001\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002\u8a73\u7d30\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u4e0b\u3055\u3044\u3002</p> <p>\u6c38\u7d9a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u8a2d\u5b9a\u3059\u308b\u306b\u306f\u3001<code>docker-compose.yml</code>\u30d5\u30a1\u30a4\u30eb\u3067\u4ee5\u4e0b\u306e\u30e9\u30d9\u30eb\u3092\u4f7f\u7528\u3057\u307e\u3059:</p> <ul> <li><code>lagoon.persistent</code> = \u30b3\u30f3\u30c6\u30ca\u5185\u306e\u6c38\u7d9a\u30b9\u30c8\u30ec\u30fc\u30b8\u3068\u3057\u3066\u4f7f\u7528\u3059\u308b\u30d1\u30b9\u3092\u5b9a\u7fa9\u3057\u307e\u3059 - \u4f8b\u3048\u3070\u3001/app/files</li> <li><code>lagoon.persistent.size</code> = Lagoon\u306b\u5bfe\u3057\u3001\u3053\u306e\u30d1\u30b9\u306b\u5272\u308a\u5f53\u3066\u308b\u30b9\u30c8\u30ec\u30fc\u30b8\u5bb9\u91cf\u3092\u6307\u5b9a\u3057\u307e\u3059</li> <li>\u540c\u3058\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u5171\u6709\u3059\u308b\u8907\u6570\u306e\u30b5\u30fc\u30d3\u30b9\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u3053\u308c\u3092\u4f7f\u7528\u3057\u307e\u3059 <code>lagoon.persistent.name</code> = (\u30aa\u30d7\u30b7\u30e7\u30f3)\u8907\u6570\u306e\u30b5\u30fc\u30d3\u30b9\u304c\u540c\u3058\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u5171\u6709\u3059\u308b\u5834\u5408\u3001\u5225\u306e\u540d\u524d\u4ed8\u304d\u30b5\u30fc\u30d3\u30b9\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u4f7f\u7528\u3059\u308b\u3088\u3046\u306bLagoon\u306b\u6307\u793a\u3057\u307e\u3059\u3002</li> </ul>"},{"location":"ja/docker-images/nodejs/#docker-composeyml-snippet","title":"<code>docker-compose.yml</code> \u30b9\u30cb\u30da\u30c3\u30c8","text":"docker-compose.yml<pre><code>    node:\nbuild:\n# \u30eb\u30fc\u30c8\u30d5\u30a9\u30eb\u30c0\u306b\u3042\u308bDockerfile\u304b\u3089\u30d3\u30eb\u30c9\u3092\u8a2d\u5b9a\u3057\u307e\u3059\ncontext: .\ndockerfile: Dockerfile\nlabels:\n# Lagoon\u306b\u5bfe\u3057\u3066\u3001Node.js\u30b5\u30fc\u30d3\u30b9\u3067\u3042\u308b\u3053\u3068\u3001/app/files\u306b500MB\u306e\u6c38\u7d9a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\nlagoon.type: node-persistent\nlagoon.persistent: /app/files\nlagoon.persistent.size: 500Mi\n\u30dd\u30fc\u30c8:\n# \u30ed\u30fc\u30ab\u30eb\u958b\u767a\u306e\u307f\u9069\u7528\u3055\u308c\u308b\u8a2d\u5b9a\u3067\u3059\n# \u30dd\u30fc\u30c83000\u3092\u30e9\u30f3\u30c0\u30e0\u306a\u30ed\u30fc\u30ab\u30eb\u30dd\u30fc\u30c8\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3057\u3001\n# `docker-compose port node 3000`\u3067\u30dd\u30fc\u30c8\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n- \"3000\"\n\u30dc\u30ea\u30e5\u30fc\u30e0:\n# \u30ed\u30fc\u30ab\u30eb\u958b\u767a\u306e\u307f\u9069\u7528\u3055\u308c\u308b\u8a2d\u5b9a\u3067\u3059\n# files\u3068\u3044\u3046\u540d\u524d\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u5b9a\u7fa9\u3055\u308c\u305f\u30d1\u30b9\u306b\u3092\u30de\u30a6\u30f3\u30c8\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u672c\u756a\u74b0\u5883\u3068\u540c\u3058\u72b6\u614b\u3092\u518d\u73fe\u3059\u308b\u305f\u3081\u306b\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u74b0\u5883\u3067\u5229\u7528\u3055\u308c\u307e\u3059\u3002\n- files:/app/files\n</code></pre>"},{"location":"ja/docker-images/opensearch/","title":"OpenSearch","text":"<p>OpenSearch\u306f\u3001\u30c7\u30fc\u30bf\u3092\u7c21\u5358\u306b\u53d6\u308a\u8fbc\u307f\u3001\u691c\u7d22\u3001\u53ef\u8996\u5316\u3001\u5206\u6790\u3059\u308b\u305f\u3081\u306e\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u4e3b\u5c0e\u306eApache2.0\u30e9\u30a4\u30bb\u30f3\u30b9\u3092\u63a1\u7528\u3057\u305f\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u691c\u7d22\u304a\u3088\u3073\u5206\u6790\u30b9\u30a4\u30fc\u30c8\u3067\u3059\u3002</p> <ul> <li>\u51fa\u5178: https://opensearch.org/</li> </ul>"},{"location":"ja/docker-images/opensearch/#supported-versions","title":"\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3","text":"<ul> <li>2 Dockerfile - <code>uselagoon/opensearch-2</code></li> </ul>"},{"location":"ja/docker-images/opensearch/#environment-variables","title":"\u74b0\u5883\u5909\u6570","text":"<p>OpenSearch \u306e\u4e00\u90e8\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u3001\u74b0\u5883\u5909\u6570\u3092\u4f7f\u7528\u3057\u3066\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002</p> \u74b0\u5883\u5909\u6570 \u30c7\u30d5\u30a9\u30eb\u30c8\u5024 \u8aac\u660e OPENSEARCH_JAVA_OPTS -Xms512m -Xmx512m OpenSearch\u30b3\u30f3\u30c6\u30ca\u306e\u30e1\u30e2\u30ea\u4f7f\u7528\u91cf\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u4e21\u65b9\u306e\u5024\u306f\u540c\u3058\u5024\u3067\u306a\u3051\u308c\u3070\u3001OpenSearch\u306f\u6b63\u5e38\u306b\u8d77\u52d5\u3057\u307e\u305b\u3093\u3002"},{"location":"ja/docker-images/opensearch/#_1","title":"\u65e2\u77e5\u306e\u554f\u984c","text":"<p>Linux\u30d9\u30fc\u30b9\u306e\u30b7\u30b9\u30c6\u30e0\u3067\u306f\u3001<code>vm.max_map_count</code>\u8a2d\u5b9a\u304c\u4f4e\u3044\u305f\u3081\u306b\u3001OpenSearch\u30b3\u30f3\u30c6\u30ca\u306e\u8d77\u52d5\u304c\u5931\u6557\u3059\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002</p> <p><code>bash title=\"\u30a8\u30e9\u30fc\" opensearch_1  | ERROR: [1] bootstrap checks failed opensearch_1  | [1]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]</code></p> <p>\u3053\u306e\u554f\u984c\u306e\u89e3\u6c7a\u7b56\u306f\u3053\u3053\u3067\u898b\u3064\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059.</p>"},{"location":"ja/docker-images/php-cli/","title":"PHP-CLI","text":"<p>Lagoon\u306e <code>php-cli</code> Docker\u30a4\u30e1\u30fc\u30b8\u3067\u3059\u3002Lagoon\u306e <code>php-fpm</code>\u30a4\u30e1\u30fc\u30b8\u3092\u30d9\u30fc\u30b9\u306b\u3001\u65e5\u5e38\u7684\u306a\u64cd\u4f5c\u306b\u5fc5\u8981\u306a\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30c4\u30fc\u30eb\u304c\u3059\u3079\u3066\u63c3\u3063\u3066\u3044\u307e\u3059\u3002</p> <p><code>cli</code>\u30a4\u30e1\u30fc\u30b8\u304b\u3089\u8d77\u52d5\u3055\u308c\u305f\u30b3\u30f3\u30c6\u30ca(\u307e\u305f\u306f\u30dd\u30c3\u30c9)\u306fComposer\u3084Node.js\u30d9\u30fc\u30b9\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30b3\u30fc\u30c9\u30d3\u30eb\u30c9\u3092\u62c5\u5f53\u3057\u307e\u3059\u3002</p> <p>\u307e\u305f\u3001MariaDB\u3068PostgreSQL\u4e21\u65b9\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9<code>cli</code>\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002</p> <p>\u60c5\u5831</p> <p>\u3053\u306eDockerfile\u306f\u3001Lagoon\u5185\u3067\u306e\u3042\u3089\u3086\u308b<code>cli</code>\u30cb\u30fc\u30ba\u306e\u57fa\u76e4\u3068\u3057\u3066\u4f7f\u7528\u3055\u308c\u308b\u3053\u3068\u3092\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/docker-images/php-cli/#supported-versions","title":"\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3","text":"<ul> <li>7.3 (\u4e92\u63db\u6027\u306e\u305f\u3081\u306e\u307f\u5229\u7528\u53ef\u80fd\u3001\u516c\u5f0f\u30b5\u30dd\u30fc\u30c8\u306f\u7d42\u4e86\u3057\u3066\u3044\u307e\u3059) - <code>uselagoon/php-7.3-cli</code></li> <li>7.4 (\u4e92\u63db\u6027\u306e\u305f\u3081\u306e\u307f\u5229\u7528\u53ef\u80fd\u3001\u516c\u5f0f\u30b5\u30dd\u30fc\u30c8\u306f\u7d42\u4e86\u3057\u3066\u3044\u307e\u3059) - <code>uselagoon/php-7.4-cli</code></li> <li>8.0 (\u4e92\u63db\u6027\u306e\u305f\u3081\u306e\u307f\u5229\u7528\u53ef\u80fd\u3001\u516c\u5f0f\u30b5\u30dd\u30fc\u30c8\u306f\u7d42\u4e86\u3057\u3066\u3044\u307e\u3059) - <code>uselagoon/php-8.0-cli</code></li> <li>8.1 Dockerfile (2024\u5e7411\u6708\u307e\u3067\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/php-8.1-cli</code></li> <li>8.2 Dockerfile (2025\u5e7412\u6708\u307e\u3067\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/php-8.2-cli</code></li> <li>8.3 Dockerfile (2026\u5e7412\u6708\u307e\u3067\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/php-8.3-cli</code></li> </ul> <p>\u3059\u3079\u3066\u306ePHP\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u3001\u305d\u308c\u305e\u308c\u306eDockerfiles\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002</p>"},{"location":"ja/docker-images/php-cli/#lagoon-adaptions","title":"Lagoon\u306e\u9069\u5fdc","text":"<p>\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306fLagoon\u3067\u4f7f\u7528\u3055\u308c\u308b\u3053\u3068\u3092\u60f3\u5b9a\u3057\u3066\u6e96\u5099\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u3059\u3067\u306b\u3044\u304f\u3064\u304b\u306e\u3053\u3068\u304c\u884c\u308f\u308c\u3066\u3044\u307e\u3059:</p> <ul> <li>\u30d5\u30a9\u30eb\u30c0\u306e\u6a29\u9650\u306f\u3001<code>fix-permissions</code>\u3067\u81ea\u52d5\u7684\u306b\u9069\u5fdc\u3055\u308c\u308b\u305f\u3081\u3001\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306f\u30e9\u30f3\u30c0\u30e0\u306a\u30e6\u30fc\u30b6\u30fc\u3067\u52d5\u4f5c\u3057\u307e\u3059\u3002</li> <li><code>COMPOSER_ALLOW_SUPERUSER=1</code>\u306f\u3001root\u3068\u3057\u3066Composer\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u306b\u95a2\u3059\u308b\u8b66\u544a\u3092\u524a\u9664\u3057\u307e\u3059\u3002</li> <li><code>80-shell-timeout.sh</code>\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u304cKubernetes\u74b0\u5883\u3067\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u3001\u30a2\u30a4\u30c9\u30eb\u72b6\u614b\u306e<code>cli</code>\u30dd\u30c3\u30c9\u306b\u5bfe\u3057\u306610\u5206\u306e\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002</li> <li><code>cli</code>\u30b3\u30f3\u30c6\u30ca\u306f\u3001Lagoon\u306b\u3088\u3063\u3066\u6ce8\u5165\u3055\u308c\u308b\u304b\u3001<code>SSH_PRIVATE_KEY</code>\u74b0\u5883\u5909\u6570\u3067\u5b9a\u7fa9\u3055\u308c\u305fSSH\u30ad\u30fc\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002</li> </ul>"},{"location":"ja/docker-images/php-cli/#cli","title":"CLI\u30c4\u30fc\u30eb","text":"<p>\u7d44\u307f\u8fbc\u307e\u308c\u3066\u3044\u308bCLI\u30c4\u30fc\u30eb\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059:</p> <ul> <li><code>composer</code>\u30d0\u30fc\u30b8\u30e7\u30f31.9.0 ( <code>COMPOSER_VERSION</code>\u304a\u3088\u3073<code>COMPOSER_HASH_SHA256</code>\u7d4c\u7531\u3067\u5909\u66f4\u53ef\u80fd)</li> <li><code>node.js</code>\u30d0\u30fc\u30b8\u30e7\u30f317 (2022\u5e743\u6708\u73fe\u5728)</li> <li><code>npm</code></li> <li><code>yarn</code></li> <li><code>mariadb-client</code></li> <li><code>postgres ql-client</code></li> </ul>"},{"location":"ja/docker-images/php-cli/#nodejs","title":"Node.js\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u5909\u66f4","text":"<p>\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306b\u306f<code>nodejs-current</code>\u30d1\u30c3\u30b1\u30fc\u30b8(2022\u5e743\u6708\u6642\u70b9\u3067v17)\u304c\u642d\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u5225\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001\u73fe\u5728\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u524a\u9664\u3057\u3066\u76ee\u7684\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001Node.js 16\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u306b\u306f\u3001Dockerfile\u3092\u6b21\u306e\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3059\u3002</p> Node.js\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u66f4\u65b0<pre><code>RUN apk del nodejs-current \\\n&amp;&amp; apk add --no-cache nodejs=~16\n</code></pre>"},{"location":"ja/docker-images/php-cli/#environment-variables","title":"\u74b0\u5883\u5909\u6570","text":"<p>\u3044\u304f\u3064\u304b\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u74b0\u5883\u5909\u6570\u3067\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002php-fpm\u74b0\u5883\u5909\u6570\u3082\u9069\u7528\u3055\u308c\u307e\u3059\u3002</p> \u540d\u524d \u30c7\u30d5\u30a9\u30eb\u30c8 \u8aac\u660e MARIADB_MAX_ALLOWED_PACKET 64M MySql\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u6700\u5927\u8a31\u5bb9\u30d1\u30b1\u30c3\u30c8\u30b5\u30a4\u30ba\u3092\u5236\u5fa1\u3057\u307e\u3059\u3002"},{"location":"ja/docker-images/php-fpm/","title":"PHP-FPM","text":"<p>Lagoon\u306e <code>php-fpm</code> Docker\u30a4\u30e1\u30fc\u30b8\u3067\u3059\u3002\u516c\u5f0f\u306ePHP Alpine\u30a4\u30e1\u30fc\u30b8\u3092\u30d9\u30fc\u30b9\u306b\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p>PHP-FPM(FastCGI Process Manager)\u306f\u3001FastCGI \u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u5229\u7528\u3057\u305f PHP \u306e\u5b9f\u88c5\u306e\u3072\u3068\u3064\u3067\u3001\u69d8\u3005\u306a\u898f\u6a21\u306e\u30b5\u30a4\u30c8\u3001\u7279\u306b\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u304c\u591a\u3044\u30b5\u30a4\u30c8\u5411\u3051\u306b\u4fbf\u5229\u306a\u8ffd\u52a0\u6a5f\u80fd\u3092\u5099\u3048\u3066\u3044\u307e\u3059\u3002</p> <ul> <li>\u51fa\u5178: https://php-fpm.org/</li> </ul> <p>FastCGI\u306f\u3001\u30b5\u30fc\u30d0\u30fc\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u6642\u9593\u306e\u304b\u304b\u308b\u30b3\u30fc\u30c9\u3092\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u30ed\u30fc\u30c9\u3055\u308c\u308b\u6bce\u5ea6\u3067\u306f\u306a\u304f\u3001\u4e00\u5ea6\u3060\u3051\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u4ed5\u7d44\u307f\u3067\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9\u3092\u524a\u6e1b\u3057\u307e\u3059\u3002</p> <p>\u60c5\u5831</p> <p>Dockerfile\u306f\u3001Lagoon\u5185\u3067<code>PHP</code>\u3092\u5229\u7528\u3059\u308b\u305f\u3081\u306e\u30d9\u30fc\u30b9\u3068\u3057\u3066\u4f7f\u7528\u3059\u308b\u60f3\u5b9a\u3067\u3059\u3002\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u81ea\u4f53\u304c\u30a6\u30a7\u30d6\u30b5\u30fc\u30d0\u30fc\u3092\u4f5c\u6210\u3059\u308b\u306e\u3067\u306f\u306a\u304f\u3001<code>php-fpm</code>\u306b\u3088\u308bFastCGI\u30ea\u30b9\u30ca\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002<code>php-fpm</code>\u30d7\u30fc\u30eb\u306e\u8a2d\u5b9a\u3092\u8abf\u6574\u3059\u308b\u5fc5\u8981\u304c\u751f\u3058\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002</p>"},{"location":"ja/docker-images/php-fpm/#supported-versions","title":"\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3","text":"<ul> <li>7.3 (\u4e92\u63db\u6027\u306e\u305f\u3081\u306e\u307f\u5229\u7528\u53ef\u80fd\u3001\u516c\u5f0f\u30b5\u30dd\u30fc\u30c8\u306f\u7d42\u4e86\u3057\u3066\u3044\u307e\u3059) - <code>uselagoon/php-7.3-fpm</code></li> <li>7.4 (\u4e92\u63db\u6027\u306e\u305f\u3081\u306e\u307f\u5229\u7528\u53ef\u80fd\u3001\u516c\u5f0f\u30b5\u30dd\u30fc\u30c8\u306f\u7d42\u4e86\u3057\u3066\u3044\u307e\u3059) - <code>uselagoon/php-7.4-fpm</code></li> <li>8.0 (\u4e92\u63db\u6027\u306e\u305f\u3081\u306e\u307f\u5229\u7528\u53ef\u80fd\u3001\u516c\u5f0f\u30b5\u30dd\u30fc\u30c8\u306f\u7d42\u4e86\u3057\u3066\u3044\u307e\u3059) - <code>uselagoon/php-8.0-fpm</code></li> <li>8.1 Dockerfile (2024\u5e7411\u6708\u307e\u3067\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/php-8.1-fpm</code></li> <li>8.2 Dockerfile (2025\u5e7412\u6708\u307e\u3067\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/php-8.2-fpm</code></li> <li>8.3 Dockerfile (2026\u5e7412\u6708\u307e\u3067\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/php-8.3-fpm</code></li> </ul> <p>\u3059\u3079\u3066\u306ePHP\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u305d\u308c\u305e\u308c\u306eDockerfiles\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002</p> <p>\u30d2\u30f3\u30c8</p> <p>Lagoon\u306f\u3001\u516c\u5f0f\u306b\u30a2\u30ca\u30a6\u30f3\u30b9\u3055\u308c\u305f\u7d42\u4e86\u65e5(EOL)\u306e\u5f8c\u306b\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u3001EOL\u306b\u9054\u3057\u305fPHP\u30a4\u30e1\u30fc\u30b8\u306e\u66f4\u65b0\u3092\u505c\u6b62\u3057\u307e\u3059\u3002\u8a73\u7d30\u306fhttps://www.php.net/supported-versions.php\u3092\u53c2\u7167\u3057\u3066\u4e0b\u3055\u3044\u3002</p>"},{"location":"ja/docker-images/php-fpm/#lagoon-adaptions","title":"Lagoon\u306e\u9069\u5fdc","text":"<p>\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306fLagoon\u3067\u4f7f\u7528\u3055\u308c\u308b\u3053\u3068\u3092\u60f3\u5b9a\u3057\u3066\u6e96\u5099\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u3059\u3067\u306b\u3044\u304f\u3064\u304b\u306e\u3053\u3068\u304c\u884c\u308f\u308c\u3066\u3044\u307e\u3059:</p> <ul> <li>\u30d5\u30a9\u30eb\u30c0\u306e\u6a29\u9650\u306f\u3001<code>fix-permissions</code>\u3067\u81ea\u52d5\u7684\u306b\u9069\u5fdc\u3055\u308c\u308b\u305f\u3081\u3001\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306f\u30e9\u30f3\u30c0\u30e0\u306a\u30e6\u30fc\u30b6\u30fc\u3067\u52d5\u4f5c\u3057\u307e\u3059\u3002</li> <li><code>/usr/local/etc/php/php.ini</code> \u304a\u3088\u3073 <code>/usr/local/etc/php-fpm.conf</code>\u30d5\u30a1\u30a4\u30eb\u3001<code>/usr/local/etc/php-f pm.d/</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306e\u5168\u3066\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u30a8\u30f3\u30c8\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\u3092\u901a\u3057\u3066<code>envplate</code>\u3067\u51e6\u7406\u3055\u308c\u307e\u3059\u3002</li> <li>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b <code>PHP</code> \u62e1\u5f35\u6a5f\u80fd\u306b\u3064\u3044\u3066\u306f\u3001Dockerfile\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u3055\u3089\u306a\u308b\u62e1\u5f35\u6a5f\u80fd\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u306b\u306f\u3001\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u3082\u3068\u306bDockerfile\u3092\u62e1\u5f35\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u62e1\u5f35\u6a5f\u80fd\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306f\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8How to install more PHP extensions.\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul>"},{"location":"ja/docker-images/php-fpm/#php","title":"PHP\u8a2d\u5b9a","text":"<p><code>PHP</code> \u8a2d\u5b9a\u306b\u306f\u3001<code>PHP</code>\u30d7\u30fc\u30eb\u8a2d\u5b9a\u306e\u4f5c\u6210\u3092\u5bb9\u6613\u306b\u3059\u308b\u305f\u3081\u306e\u9069\u5207\u306a\u5024\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u4ee5\u4e0b\u306f\u305d\u306e\u4e00\u90e8\u306e\u30ea\u30b9\u30c8\u3067\u3059\u3002\u8a73\u7d30\u306f<code>/usr/local/etc/php.ini</code>\u3001<code>/usr/local/etc/php-fpm.conf</code> \u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044:</p> \u5024 \u8a73\u7d30 <code>max_execution_time = 900</code> <code>PHP_MAX_EXECUTION_TIME</code> \u3067\u5909\u66f4\u53ef\u80fd <code>realpath_cache_size = 256k</code> \u5927\u898f\u6a21\u306aPHP\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u6271\u3046\u305f\u3081\u306e\u8a2d\u5b9a <code>memory_limit = 400M</code> \u5927\u898f\u6a21\u306aPHP\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u6271\u3046\u305f\u3081\u306e\u8a2d\u5b9a(<code>PHP_MEMORY_LIMIT</code> \u3067\u5909\u66f4\u53ef\u80fd) <code>opcache.memory_consumption = 265</code> \u5927\u898f\u6a21\u306aPHP\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u6271\u3046\u305f\u3081\u306e\u8a2d\u5b9a <code>opcache.enable_file_override = 1</code> \u3068 <code>opcache.huge_code_pages = 1</code> \u3088\u308a\u9ad8\u901f\u306aPHP\u306e\u305f\u3081\u306e\u8a2d\u5b9a <code>display_errors = Off</code> \u3068 <code>display_startup_errors = Off</code> \u5b9f\u7528\u7684\u306aproduction\u8a2d\u5b9a (<code>PHP_DISPLAY_ERRORS</code> \u304a\u3088\u3073 <code>PHP_DISPLAY_STARTUP_ERRORS</code> \u3067\u5909\u66f4\u53ef\u80fd)\u3002 <code>upload_max_filesize = 2048M</code> \u5927\u5bb9\u91cf\u30d5\u30a1\u30a4\u30eb\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306e\u305f\u3081\u306e\u8a2d\u5b9a <code>apc.shm_size = 32m</code> \u3068 <code>apc.enabled = 1</code> <code>PHP_APC_SHM_SIZE</code> \u304a\u3088\u3073 <code>PHP_APC_ENABLED</code> \u3067\u5909\u66f4\u53ef\u80fd <p>\u307e\u305f\u3001<code>php-fpm</code>\u306e\u30a8\u30e9\u30fc\u30ed\u30b0\u306f <code>stderr</code>\u306b\u8a18\u9332\u3055\u308c\u307e\u3059\u3002</p> <p>\ud83d\udca1 \u3053\u308c\u3089\u306e\u8a2d\u5b9a\u306e\u3044\u305a\u308c\u3082\u6c17\u306b\u5165\u3089\u306a\u3044\u5834\u5408\u306f\u3001\u6b21\u306e3\u3064\u306e\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059:</p> <ol> <li>\u8a2d\u5b9a\u5024\u304c\u74b0\u5883\u5909\u6570\u3067\u5909\u66f4\u3067\u304d\u308b\u5834\u5408\u306f\u3001\u74b0\u5883\u5909\u6570\u3092\u4f7f\u3063\u3066\u304f\u3060\u3055\u3044(\u3053\u308c\u304c\u63a8\u5968\u3055\u308c\u308b\u65b9\u6cd5\u3067\u3059\u3002\u74b0\u5883\u5909\u6570\u306e\u8868 \u306e\u8a73\u7d30\u306f\u4ee5\u4e0b\u306e\u8868\u306b\u307e\u3068\u3081\u3066\u3042\u308a\u307e\u3059\u306e\u3067\u3001\u53c2\u7167\u304f\u3060\u3055\u3044\u3002)</li> <li>\u4ee5\u4e0b\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3042\u308b<code>php_admin_value</code>\u304a\u3088\u3073<code>php_admin_flag</code>\u3092\u4f7f\u3063\u3066\u3001\u72ec\u81ea\u306e\u30ab\u30b9\u30bf\u30e0<code>fpm-pool</code>\u8a2d\u5b9a\u3092\u4f5c\u6210\u3057\u3001\u305d\u308c\u3092\u9069\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002<ul> <li>\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u3001<code>PHP \u3092 Apache \u30e2\u30b8\u30e5\u30fc\u30eb\u3068\u3057\u3066\u5b9f\u884c\u3059\u308b\u305f\u3081\u306e\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8</code> \u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306fApache\u30e2\u30b8\u30e5\u30fc\u30eb\u3068\u3057\u3066\u306ePHP\u5b9f\u884c\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u3066\u3044\u307e\u3059\u304c\u3001<code>php-fpm</code> \u306b\u3082\u5f53\u3066\u306f\u307e\u308a\u307e\u3059\u3002 \u91cd\u8981:<ul> <li>\u72ec\u81ea\u306e <code>php-fpm</code> \u30d7\u30fc\u30eb\u3092\u9069\u7528\u3057\u305f\u3044\u5834\u5408\u306f\u3001<code>/usr/local/etc/php-fpm.d/www.conf</code>\u30d5\u30a1\u30a4\u30eb\u3092\u81ea\u5206\u306e\u8a2d\u5b9a\u3067\u4e0a\u66f8\u304d\u3059\u308b\u304b\u3001\u5225\u306e\u540d\u524d\u3092\u4ed8\u3051\u305f\u3044\u5834\u5408\u306f\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u306e\u64cd\u4f5c\u3092\u884c\u308f\u306a\u3044\u3068\u3001\u6700\u521d\u304b\u3089\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u30d7\u30fc\u30eb\u304c\u8d77\u52d5\u3057\u307e\u3059\u3002</li> <li><code>PHP_INI_SYSTEM</code>\u5909\u66f4\u53ef\u80fd\u30e2\u30fc\u30c9\u306ePHP\u306e\u8a2d\u5b9a\u5024\u306f\u3001<code>fpm-pool</code>\u8a2d\u5b9a\u3067\u306f\u5909\u66f4\u3067\u304d\u307e\u305b\u3093\u3002\u3053\u3046\u3044\u3063\u305f\u8a2d\u5b9a\u5024\u306f\u3001\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u74b0\u5883\u5909\u6570\u3092\u4f7f\u3046\u304b\u3001\u307e\u305f\u306f:</li> <li>\u72ec\u81ea\u306e<code>php.ini</code>\u307e\u305f\u306f<code>php-fpm.conf</code>\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059(\u3053\u306e\u65b9\u6cd5\u306f\u63a8\u5968\u3055\u308c\u307e\u305b\u3093)</li> </ul> </li> </ul> </li> </ol>"},{"location":"ja/docker-images/php-fpm/#fpm-pool","title":"\u30c7\u30d5\u30a9\u30eb\u30c8\u306efpm-pool","text":"<p>\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306f\u3001<code>fpm-pool</code>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb(<code>php-fpm.d/www.conf</code>)\u304c\u542b\u307e\u308c\u3066\u304a\u308a\u3001\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f<code>fpm-pool</code>\u3092\u4f5c\u6210\u3057\u3001\u30dd\u30fc\u30c89000\u3067\u30ea\u30c3\u30b9\u30f3\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u307b\u3068\u3093\u3069\u306ePHP\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30cb\u30fc\u30ba\u3092\u6700\u521d\u304b\u3089\u30ab\u30d0\u30fc\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u3067\u3059\u3002\u3082\u3061\u308d\u3093\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u72ec\u81ea\u306e\u8a2d\u5b9a\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002</p> <p>\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u306e\u8aac\u660e:</p> <ul> <li>IPv4\u3068IPv6\u3067\u30dd\u30fc\u30c89000\u3067\u30ea\u30c3\u30b9\u30f3\u3057\u307e\u3059\u3002</li> <li>pm <code>dynamic</code>\u3092\u4f7f\u7528\u3057\u30012\u304b\u308950\u307e\u3067\u306e\u5b50\u30d7\u30ed\u30bb\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</li> <li>\u30e1\u30e2\u30ea\u30ea\u30fc\u30af\u3092\u9632\u3050\u305f\u3081\u306b\u3001500\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u5f8c\u306b<code>php-fpm</code>\u30d7\u30fc\u30eb\u306e\u5b50\u30d7\u30ed\u30bb\u30b9\u3092\u518d\u751f\u6210\u3057\u307e\u3059\u3002</li> <li><code>/ping</code>\u3078\u306efastcgi\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u5bfe\u3057\u3066<code>pong</code>\u3067\u5fdc\u7b54\u3057\u307e\u3059(\u30d7\u30fc\u30eb\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u306e\u81ea\u52d5\u30c6\u30b9\u30c8\u306b\u4fbf\u5229)\u3002</li> <li><code>catch_workers_output = yes</code>\u306b\u3088\u308a\u3001PHP\u306e\u30a8\u30e9\u30fc\u3092\u78ba\u8a8d\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3002</li> <li><code>clear_env = no</code>\u306b\u3088\u308a\u3001\u901a\u5e38\u306e Docker \u74b0\u5883\u5909\u6570\u3092\u4f7f\u3063\u3066 PHP \u74b0\u5883\u5909\u6570\u3092\u6ce8\u5165\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b</li> </ul>"},{"location":"ja/docker-images/php-fpm/#environment-variables","title":"\u74b0\u5883\u5909\u6570","text":"<p>\u4e00\u90e8\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u74b0\u5883\u5909\u6570\u3067\u8a2d\u5b9a\u53ef\u80fd\u3067\u3059\u3002</p> \u74b0\u5883\u5909\u6570 \u30c7\u30d5\u30a9\u30eb\u30c8 \u8aac\u660e NEWRELIC_ENABLED false NewRelic\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002\u6709\u52b9\u306b\u3059\u308b\u306b\u306f<code>NEWRELIC_LICENSE</code>\u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3059\u3002 NEWRELIC_LICENSE (\u8a2d\u5b9a\u306a\u3057) \u4f7f\u7528\u3059\u308bNewRelic\u306e\u30e9\u30a4\u30bb\u30f3\u30b9\u3002\u91cd\u8981:NewRelic\u3092\u6709\u52b9\u306b\u3059\u308b\u306b\u306f<code>NEWRELIC_ENABLED</code>\u3092<code>true</code>\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 NEWRELIC_BROWSER_MONITORING_ENABLED true NewRelic\u30d6\u30e9\u30a6\u30b6\u76e3\u8996\u7528\u306eJavaScript\u30d5\u30e9\u30b0\u30e1\u30f3\u30c8\u306e\u81ea\u52d5\u633f\u5165\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002\u91cd\u8981:NewRelic\u3092\u6709\u52b9\u306b\u3059\u308b\u306b\u306f<code>NEWRELIC_ENABLED</code>\u3092<code>true</code>\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 NEWRELIC_DISTRIBUTED_TRACING_ENABLED false \u5206\u6563\u30c8\u30ec\u30fc\u30b9\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002\u91cd\u8981:NewRelic\u3092\u6709\u52b9\u306b\u3059\u308b\u306b\u306f\u3001<code>NEWRELIC_ENABLED</code>\u3092<code>true</code>\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 PHP_APC_ENABLED 1 APC\u3092\u7121\u52b9\u306b\u3059\u308b\u306b\u306f<code>0</code>\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002 PHP_APC_SHM_SIZE 32m \u5404\u5171\u6709\u30e1\u30e2\u30ea\u30bb\u30b0\u30e1\u30f3\u30c8\u306e\u30b5\u30a4\u30ba\u3002 PHP_DISPLAY_ERRORS Off \u30a8\u30e9\u30fc\u3092\u8868\u793a\u3055\u308c\u308b\u304b\u975e\u8868\u793a\u306b\u3059\u308b\u304b\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u8a73\u7d30\u306f\u3001php.net\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002 PHP_DISPLAY_STARTUP_ERRORS Off \u8d77\u52d5\u6642\u306e\u30a8\u30e9\u30fc\u3092\u8868\u793a\u3059\u308b\u304b\u975e\u8868\u793a\u3059\u308b\u304b\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u8a73\u7d30\u306f\u3001php.net\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002 PHP_ERROR_REPORTING Production <code>E_ALL &amp; ~E _DEPRECATED &amp; ~E_STRICT</code> Development: <code>E_ALL &amp; ~E_DEPRECATED &amp; ~E_STRICT &amp; ~E_NOTICE</code> PHP\u306b\u4f7f\u7528\u3055\u308c\u308bdesired logging\u30ec\u30d9\u30eb\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u8a73\u7d30\u306f\u3001php.net\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002 PHP_FPM_PM_MAX_CHILDREN 50 \u5b50\u30d7\u30ed\u30bb\u30b9\u306e\u6700\u5927\u6570\u3002\u8a73\u7d30\u306f\u3001php.net\u3092\u53c2\u7167\u3002 PHP_FPM_PM_MAX_REQUESTS 500 \u5404\u5b50\u30d7\u30ed\u30bb\u30b9\u304c\u518d\u751f\u6210\u3055\u308c\u308b\u524d\u306b\u5b9f\u884c\u3059\u308b\u3079\u304d\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u6570\u3002\u8a73\u7d30\u306f\u3001php.net\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002 PHP_FPM_PM_MAX_SPARE_SERVERS 2 \u30a2\u30a4\u30c9\u30eb\u72b6\u614b\u306e\u30b5\u30fc\u30d0\u30fc\u30d7\u30ed\u30bb\u30b9\u306e\u6700\u5927\u8a31\u5bb9\u6570\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u8a73\u7d30\u306f\u3001php.net\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002 PHP_FPM_PM_MIN_SPARE_SERVERS 2 \u30a2\u30a4\u30c9\u30eb\u72b6\u614b\u306e\u30b5\u30fc\u30d0\u30fc\u30d7\u30ed\u30bb\u30b9\u306e\u6700\u5c0f\u8a31\u5bb9\u6570\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u8a73\u7d30\u306f\u3001php.net\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002 PHP_FPM_PM_PROCESS_IDLE_TIMEOUT 60s \u30a2\u30a4\u30c9\u30eb\u72b6\u614b\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u7d42\u4e86\u3055\u308c\u308b\u307e\u3067\u306e\u79d2\u6570\u3002\u8a73\u7d30\u306f\u3001php.net\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002 PHP_FPM_PM_START_SERVERS 2 \u8d77\u52d5\u6642\u306b\u4f5c\u6210\u3055\u308c\u308b\u5b50\u30d7\u30ed\u30bb\u30b9\u306e\u6570\u3002\u8a73\u7d30\u306f\u3001php.net\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002 PHP_MAX_EXECUTION_TIME 900 \u5404\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u6700\u5927\u5b9f\u884c\u6642\u9593(\u79d2)\u3002\u8a73\u7d30\u306f\u3001php.net\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002 PHP_MAX_FILE_UPLOADS 20 \u540c\u6642\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3067\u304d\u308b\u30d5\u30a1\u30a4\u30eb\u306e\u6700\u5927\u6570\u3002\u8a73\u7d30\u306f\u3001php.net\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002 PHP_MAX_INPUT_VARS 2000 \u53d7\u3051\u5165\u308c\u53ef\u80fd\u306a\u5165\u529b\u5909\u6570\u306e\u6570\u3002\u8a73\u7d30\u306f\u3001php.net\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002 PHP_MEMORY_LIMIT 400M \u30b9\u30af\u30ea\u30d7\u30c8\u304c\u6d88\u8cbb\u3067\u304d\u308b\u30e1\u30e2\u30ea\u306e\u6700\u5927\u91cf\u3002\u8a73\u7d30\u306f\u3001php.net\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002 XDEBUG_ENABLE (\u8a2d\u5b9a\u306a\u3057) <code>xdebug</code> \u62e1\u5f35\u6a5f\u80fd\u3092\u6709\u52b9\u306b\u3059\u308b\u306b\u306f\u3001<code>true</code>\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002 BLACKFIRE_ENABLED (\u8a2d\u5b9a\u306a\u3057) <code>blackfire</code> \u62e1\u5f35\u6a5f\u80fd\u3092\u6709\u52b9\u306b\u3059\u308b\u306b\u306f <code>true</code> \u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002 BLACKFIRE_SERVER_ID (\u8a2d\u5b9a\u306a\u3057) Blackfire.io\u304c\u63d0\u4f9b\u3059\u308bBlackfire\u30b5\u30fc\u30d0\u30fcID\u3002<code>BLACKFIRE_ENABLED</code>\u3092<code>true</code>\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 BLACKFIRE_SERVER_TOKEN (\u8a2d\u5b9a\u306a\u3057) Blackfire.io\u304c\u63d0\u4f9b\u3059\u308bBlackfire\u30b5\u30fc\u30d0\u30fc\u30c8\u30fc\u30af\u30f3\u3002<code>BLACKFIRE_ENABLED</code>\u3092<code>true</code>\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 BLACKFIRE_LOG_LEVEL 3 blackfire\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306e\u30ed\u30b0\u30ec\u30d9\u30eb\u3092\u5909\u66f4\u3057\u307e\u3059\u3002\u5229\u7528\u53ef\u80fd\u306a\u5024:<code>\u30ed\u30b0\u306e\u5197\u9577\u6027\u30ec\u30d9\u30eb (4: \u30c7\u30d0\u30c3\u30b0, 3: \u60c5\u5831, 2: \u8b66\u544a, 1: \u30a8\u30e9\u30fc)</code> \u8a73\u7d30\u306f\u3001blackfire.io\u3092\u53c2\u7167\u3057\u3066\u4e0b\u3055\u3044\u3002"},{"location":"ja/docker-images/postgres/","title":"PostgreSQL","text":"<p>Lagoon PostgreSQL Docker\u30a4\u30e1\u30fc\u30b8\u3002\u516c\u5f0fPostgreSQL Alpine\u30a4\u30e1\u30fc\u30b8\u3092\u30d9\u30fc\u30b9\u306b\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/docker-images/postgres/#supported-versions","title":"\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3","text":"<ul> <li>11 (\u4e92\u63db\u6027\u306e\u305f\u3081\u3060\u3051\u306b\u5229\u7528\u53ef\u80fd\u3001\u516c\u5f0f\u306b\u306f\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u305b\u3093) - <code>uselagoon/postgres-11</code></li> <li>12 Dockerfile (2024\u5e7411\u6708\u307e\u3067\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/postgres-12</code></li> <li>13 Dockerfile (2025\u5e7411\u6708\u307e\u3067\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/postgres-13</code></li> <li>14 Dockerfile (2026\u5e7411\u6708\u307e\u3067\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/postgres-14</code></li> <li>15 Dockerfile (2027\u5e7411\u6708\u307e\u3067\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/postgres-15</code></li> <li>16 Dockerfile (2028\u5e7411\u6708\u307e\u3067\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/postgres-16</code></li> </ul> <p>\u30d2\u30f3\u30c8</p> <p>Lagoon\u306f\u3001\u516c\u5f0f\u306b\u30a2\u30ca\u30a6\u30f3\u30b9\u3055\u308c\u305f\u7d42\u4e86\u65e5(EOL)\u306e\u5f8c\u306b\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u3001EOL\u306b\u9054\u3057\u305fPostgreSQL\u30a4\u30e1\u30fc\u30b8\u306e\u66f4\u65b0\u3092\u505c\u6b62\u3057\u307e\u3059\u3002\u8a73\u7d30\u306fhttps://www.postgresql.org/support/versioning\u3092\u53c2\u7167\u3057\u3066\u4e0b\u3055\u3044\u3002</p>"},{"location":"ja/docker-images/postgres/#lagoon-adaptions","title":"Lagoon\u306e\u9069\u5fdc","text":"<p>Postgres\u30b3\u30f3\u30c6\u30ca\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u516c\u958b\u30dd\u30fc\u30c8\u306f\u30dd\u30fc\u30c8<code>5432</code>\u3067\u3059\u3002</p> <p>Lagoon\u304cPostgres\u30b3\u30f3\u30c6\u30ca\u306e\u5b9f\u884c\u65b9\u6cd5\u3092\u6700\u9069\u306b\u9078\u629e\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u306b\u306f\u3001<code>lagoon.type: postgres</code>\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001DBaaS\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u306f\u3001\u30af\u30e9\u30b9\u30bf\u30fc\u5185\u3067\u5229\u7528\u53ef\u80fd\u306a\u5834\u5408\u3001\u30af\u30e9\u30a6\u30c9\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3067\u304d\u307e\u3059\u3002\u30b3\u30f3\u30c6\u30ca\u5185\u3067Postgres\u3092\u78ba\u5b9f\u306b\u5b9f\u884c\u3057\u305f\u3044\u5834\u5408\u306f\u3001<code>lagoon.type: postgres-single</code>\u3092\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002Postgres\u30b3\u30f3\u30c6\u30ca\u306b\u5bfe\u3057\u3066\u306f\u3001\u6c38\u7d9a\u30b9\u30c8\u30ec\u30fc\u30b8\u304c\u5e38\u306b<code>/var/lib/postgresql/data</code>\u306b\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/docker-images/postgres/#docker-composeyml-snippet","title":"<code>docker-compose.yml</code> \u30b9\u30cb\u30da\u30c3\u30c8","text":"docker-compose.yml<pre><code>postgres:\nimage: uselagoon/postgres-14-drupal:latest\nlabels:\n# Lagoon\u306bPostgres\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3067\u3042\u308b\u3053\u3068\u3092\u4f1d\u3048\u308b\nlagoon.type: postgres\nports:\n# \u30dd\u30fc\u30c85432\u3092\u30e9\u30f3\u30c0\u30e0\u306a\u30ed\u30fc\u30ab\u30eb\u30dd\u30fc\u30c8\u3067\u516c\u958b\u3057\u3001\n# `docker-compose port postgres 5432`\u3067\u898b\u3064\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u308b\n- \"5432\"\nvolumes:\n# Postgres\u7528\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30d1\u30b9\u306b\u540d\u524d\u4ed8\u304d\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\n- db:/var/lib/postgresql/data\n</code></pre>"},{"location":"ja/docker-images/postgres/#_1","title":"\u30d2\u30f3\u30c8\uff06\u30b3\u30c4","text":"<p>\u30b3\u30f3\u30c6\u30ca\u8d77\u52d5\u76f4\u5f8c\u306b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u521d\u671f\u5316\u3059\u308b\u305f\u3081\u306eSQL\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8\u304c\u3042\u308b\u5834\u5408\u3001\u305d\u308c\u3089\u306e<code>.sql</code>\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30f3\u30c6\u30ca\u306e<code>docker-entrypoint-initdb.d</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u914d\u7f6e\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u3042\u308b <code>.sql</code> \u30d5\u30a1\u30a4\u30eb\u306f\u3001PostgreSQL\u30b3\u30f3\u30c6\u30ca\u306e\u8d77\u52d5\u6642\u306b\u81ea\u52d5\u7684\u306b\u5b9f\u884c\u3055\u308c\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u521d\u671f\u5316\u51e6\u7406\u306e\u4e00\u90e8\u3068\u3057\u3066\u52d5\u4f5c\u3057\u307e\u3059\u3002</p> <p>\u8b66\u544a</p> <p>\u3053\u308c\u3089\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u3001\u7a7a\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3067\u30b3\u30f3\u30c6\u30ca\u304c\u8d77\u52d5\u3055\u308c\u305f\u5834\u5408\u306b\u306e\u307f\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\u65e2\u5b58\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u5bfe\u3057\u3066\u306f\u52d5\u4f5c\u3057\u307e\u305b\u3093\u3002</p>"},{"location":"ja/docker-images/python/","title":"Python","text":"<p>Lagoon <code>python</code> Docker image\u3002\u3053\u308c\u306f\u516c\u5f0f\u306ePython Alpine\u30a4\u30e1\u30fc\u30b8\u3092\u30d9\u30fc\u30b9\u306b\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/docker-images/python/#supported-versions","title":"\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3","text":"<ul> <li>2.7 (\u4e92\u63db\u6027\u306e\u305f\u3081\u306e\u307f\u5229\u7528\u53ef\u80fd\u3001\u516c\u5f0f\u30b5\u30dd\u30fc\u30c8\u306f\u7d42\u4e86\u3057\u3066\u3044\u307e\u3059) - <code>uselagoon/python-2.7</code></li> <li>3.7 (\u4e92\u63db\u6027\u306e\u305f\u3081\u306e\u307f\u5229\u7528\u53ef\u80fd\u3001\u516c\u5f0f\u30b5\u30dd\u30fc\u30c8\u306f\u7d42\u4e86\u3057\u3066\u3044\u307e\u3059) - <code>uselagoon/python-3.7</code></li> <li>3.8 Dockerfile (2024\u5e7410\u6708\u307e\u3067\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/python-3.8</code></li> <li>3.9 Dockerfile (2025\u5e7410\u6708\u307e\u3067\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/python-3.9</code></li> <li>3.10 Dockerfile (2026\u5e7410\u6708\u307e\u3067\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/python-3.10</code></li> <li>3.11 Dockerfile (2027\u5e7410\u6708\u307e\u3067\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/python-3.11</code></li> <li>3.12 Dockerfile (2028\u5e7410\u6708\u307e\u3067\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b5\u30dd\u30fc\u30c8)- <code>uselagoon/python-3.12</code></li> </ul> <p>\u30d2\u30f3\u30c8</p> <p>Lagoon\u306f\u3001\u516c\u5f0f\u306b\u30a2\u30ca\u30a6\u30f3\u30b9\u3055\u308c\u305f\u7d42\u4e86\u65e5(EOL)\u306e\u5f8c\u306b\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u3001EOL\u306b\u9054\u3057\u305fPython\u30a4\u30e1\u30fc\u30b8\u306e\u66f4\u65b0\u3092\u505c\u6b62\u3057\u307e\u3059\u3002\u8a73\u7d30\u306fhttps://devguide.python.org/versions/#versions\u3092\u53c2\u7167\u3057\u3066\u4e0b\u3055\u3044\u3002</p>"},{"location":"ja/docker-images/python/#lagoon-adaptions","title":"Lagoon\u306e\u9069\u5fdc","text":"<p>Python\u30b3\u30f3\u30c6\u30ca\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u516c\u958b\u30dd\u30fc\u30c8\u306f\u30dd\u30fc\u30c8<code>8800</code>\u3067\u3059\u3002</p> <p>Lagoon\u3067\u306f\u3001<code>lagoon.type: python-persistent</code>\u3092\u4f7f\u7528\u3057\u3066\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u8a2d\u5b9a\u53ef\u80fd\u3067\u3059\u3002\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u304f\u3060\u3055\u3044\u3002</p> <p>\u6c38\u7d9a\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u8a2d\u5b9a\u3059\u308b\u306b\u306f\u3001<code>docker-compose.yml</code>\u30d5\u30a1\u30a4\u30eb\u3067\u4ee5\u4e0b\u306e\u30e9\u30d9\u30eb\u3092\u4f7f\u7528\u3057\u307e\u3059: <code>lagoon.persistent</code> = \u30b3\u30f3\u30c6\u30ca\u5185\u306e\u6c38\u7d9a\u30b9\u30c8\u30ec\u30fc\u30b8\u3068\u3057\u3066\u4f7f\u7528\u3059\u308b\u30d1\u30b9\u3092\u5b9a\u7fa9\u3057\u307e\u3059 - \u4f8b\u3048\u3070/app/files <code>lagoon.persistent.size</code> = Lagoon\u306b\u5bfe\u3057\u3066\u3001\u3053\u306e\u30d1\u30b9\u306b\u5272\u308a\u5f53\u3066\u308b\u30b9\u30c8\u30ec\u30fc\u30b8\u5bb9\u91cf\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</p> <p>\u540c\u3058\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u5171\u6709\u3059\u308b\u8907\u6570\u306e\u30b5\u30fc\u30d3\u30b9\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u3053\u308c\u3092\u4f7f\u7528\u3057\u307e\u3059 <code>lagoon.persistent.name</code> =(\u30aa\u30d7\u30b7\u30e7\u30f3)\u8907\u6570\u306e\u30b5\u30fc\u30d3\u30b9\u304c\u540c\u3058\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u5171\u6709\u3059\u308b\u5834\u5408\u3001\u5225\u306e\u540d\u524d\u4ed8\u304d\u30b5\u30fc\u30d3\u30b9\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u4f7f\u7528\u3059\u308b\u3088\u3046\u306bLagoon\u306b\u6307\u793a\u3057\u307e\u3059\u3002</p>"},{"location":"ja/docker-images/python/#docker-composeyml-snippet","title":"<code>docker-compose.yml</code> \u30b9\u30cb\u30da\u30c3\u30c8","text":"docker-compose.yml<pre><code>python:\nbuild:\n# \u30eb\u30fc\u30c8\u30d5\u30a9\u30eb\u30c0\u306b\u3042\u308bDockerfile\u3092\u4f7f\u7528\u3057\u3066\u30d3\u30eb\u30c9\u3092\u884c\u3046\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\ncontext: .\ndockerfile: Dockerfile\nlabels:\n# Lagoon\u306b\u5bfe\u3057\u3001Python\u30b5\u30fc\u30d3\u30b9\u3067\u3042\u308b\u3053\u3068\u3068\u3001/app/files\u306b500MB\u306e\u6c38\u7d9a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\nlagoon.type: python-persistent\nlagoon.persistent: /app/files\nlagoon.persistent.size: 500Mi\nports:\n# \u30ed\u30fc\u30ab\u30eb\u958b\u767a\u306e\u307f\u9069\u7528\u3055\u308c\u308b\u8a2d\u5b9a\u3067\u3059\n# \u30dd\u30fc\u30c88800\u3092\u30e9\u30f3\u30c0\u30e0\u306a\u30ed\u30fc\u30ab\u30eb\u30dd\u30fc\u30c8\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3057\u3001\n# `docker compose port node 8800`\u3067\u30dd\u30fc\u30c8\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n- \"8800\"\nvolumes:\n# \u30ed\u30fc\u30ab\u30eb\u958b\u767a\u306e\u307f\u9069\u7528\u3055\u308c\u308b\u8a2d\u5b9a\u3067\u3059\n# files\u3068\u3044\u3046\u540d\u524d\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u5b9a\u7fa9\u3055\u308c\u305f\u30d1\u30b9\u306b\u3092\u30de\u30a6\u30f3\u30c8\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u672c\u756a\u74b0\u5883\u3068\u540c\u3058\u72b6\u614b\u3092\u518d\u73fe\u3059\u308b\u305f\u3081\u306b\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u74b0\u5883\u3067\u5229\u7528\u3055\u308c\u307e\u3059\u3002\n- files:/app/files\n</code></pre>"},{"location":"ja/docker-images/rabbitmq/","title":"RabbitMQ","text":"<p>Lagoon RabbitMQ Dockerfile\u3067\u3001\u7ba1\u7406\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u307e\u3059\u3002docker-hub\u306b\u3042\u308b\u516c\u5f0f\u306e<code>rabbitmq:3-management</code>\u30a4\u30e1\u30fc\u30b8\u3092\u30d9\u30fc\u30b9\u306b\u3057\u3066\u3044\u307e\u3059\u3002</p> <p>\u3053\u306eDockerfile\u306f\u3001\u30b9\u30bf\u30f3\u30c9\u30a2\u30ed\u30f3\u306eRabbitMQ\u30ad\u30e5\u30fc\u30d6\u30ed\u30fc\u30ab\u30fc\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u305f\u3081\u3060\u3051\u3067\u306a\u304f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u9ad8\u53ef\u7528\u6027\u30ad\u30e5\u30fc\u30b5\u30dd\u30fc\u30c8(\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u30ad\u30e5\u30fc)\u3092\u5099\u3048\u305f\u30af\u30e9\u30b9\u30bf\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u305f\u3081\u306e\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u3068\u3057\u3066\u3082\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002</p> <p>\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001RabbitMQ\u30d6\u30ed\u30fc\u30ab\u30fc\u306f\u30b7\u30f3\u30b0\u30eb\u30ce\u30fc\u30c9\u3067\u8d77\u52d5\u3057\u307e\u3059\u3002\u30af\u30e9\u30b9\u30bf\u3092\u8d77\u52d5\u3059\u308b\u5834\u5408\u306f\u3001<code>rabbitmq</code>\u30a4\u30e1\u30fc\u30b8\u306b\u52a0\u3048\u3066<code>rabbitmq_peer_discovery_k8s</code>\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u7d44\u307f\u8fbc\u307e\u308c\u305f<code>rabbitmq-cluster</code> Docker\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u7528\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/docker-images/rabbitmq/#_1","title":"\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u308b\u30d0\u30fc\u30b8\u30e7\u30f3","text":"<ul> <li>3.10 Dockerfile (2023\u5e747\u6708\u307e\u3067\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/rabbitmq</code></li> </ul>"},{"location":"ja/docker-images/rabbitmq/#lagoon-adaptions","title":"Lagoon\u306e\u9069\u5fdc","text":"<p>\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306fLagoon\u3067\u4f7f\u7528\u3055\u308c\u308b\u3053\u3068\u3092\u60f3\u5b9a\u3057\u3066\u6e96\u5099\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u3059\u3067\u306b\u3044\u304f\u3064\u304b\u306e\u3053\u3068\u304c\u884c\u308f\u308c\u3066\u3044\u307e\u3059:</p> <ul> <li>\u30d5\u30a9\u30eb\u30c0\u306e\u6a29\u9650\u306f\u3001<code>fix-permissions</code>\u3067\u81ea\u52d5\u7684\u306b\u9069\u5fdc\u3055\u308c\u308b\u305f\u3081\u3001\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306f\u30e9\u30f3\u30c0\u30e0\u306a\u30e6\u30fc\u30b6\u30fc\u3067\u52d5\u4f5c\u3057\u307e\u3059\u3002</li> <li><code>/etc/rabbitmq/definitions.json</code>\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u30a8\u30f3\u30c8\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\u3092\u6301\u3064<code>envplate</code>\u3092\u901a\u3057\u3066\u51e6\u7406\u3055\u308c\u307e\u3059\u3002</li> </ul>"},{"location":"ja/docker-images/rabbitmq/#rabbitmqdefinitionsjson","title":"RabbitMQ\u30c7\u30d5\u30a9\u30eb\u30c8\u30b9\u30ad\u30fc\u30de(definitions.json)","text":"<ul> <li>\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u30ad\u30e5\u30fc\u306e\u30b5\u30dd\u30fc\u30c8\u3059\u308b\u306b\u306f\u3001\u5c11\u306a\u304f\u3068\u3082\u4e00\u3064\u306e<code>policy</code>\u304c\u5fc5\u8981\u3067\u3059\u3002</li> <li><code>definitions.json</code>\u30b9\u30ad\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u306b\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u306e\u5b9f\u884c\u3001<code>virtualhost</code>(<code>vhost</code>)\u3001\u7ba1\u7406UI\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306e<code>username</code>\u3001<code>password</code>\u3001<code>permissions</code>\u3001<code>policies</code>\u3092\u8a2d\u5b9a\u3059\u308b\u305f\u3081\u306e\u6700\u5c0f\u9650\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002</li> </ul> <p>\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u8d77\u52d5\u6642\u306b<code>lagoon-ha</code>\u3068\u3044\u3046\u540d\u524d\u306e\u30dd\u30ea\u30b7\u30fc\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u304c\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u74b0\u5883\u5909\u6570\u3067\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u30ad\u30e5\u30fc\u540d\u306e\u30d1\u30bf\u30fc\u30f3\u306b\u4e00\u81f4\u3057\u306a\u3044\u305f\u3081\u3001\u30a2\u30af\u30c6\u30a3\u30d6\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002</p> definitions.json<pre><code>\"policies\":[\n{\"vhost\":\"${RABBITMQ_DEFAULT_VHOST}\",\"name\":\"lagoon-ha\",\"pattern\":\"${RABBITMQ_DEFAULT_HA_PATTERN}\", \"definition\":{\"ha-mode\":\"exactly\",\"ha-params\":2,\"ha-sync-mode\":\"automatic\",\"ha-sync-batch-size\":5}}\n]\n</code></pre> <p>\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001<code>ha-mode</code>\u306f<code>exactly</code>\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u304a\u308a\u3001\u30ad\u30e5\u30fc(mirrors)\u306e\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u30ce\u30fc\u30c9\u306e\u6b63\u78ba\u306a\u6570\u3092\u5236\u5fa1\u3057\u307e\u3059\u3002\u30ce\u30fc\u30c9\u306e\u6570\u306f <code>ha-params</code> \u3067\u5236\u5fa1\u3055\u308c\u307e\u3059\u3002</p> <p>\u8a73\u7d30\u306a\u60c5\u5831\u3084\u30ab\u30b9\u30bf\u30e0\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u306f\u3001\u516c\u5f0f\u306e RabbitMQ \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/docker-images/rabbitmq/#environment-variables","title":"\u74b0\u5883\u5909\u6570","text":"<p>\u3044\u304f\u3064\u304b\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u74b0\u5883\u5909\u6570\u3067\u8a2d\u5b9a\u53ef\u80fd\u3067\u3059\u3002</p> \u74b0\u5883\u5909\u6570 \u30c7\u30d5\u30a9\u30eb\u30c8 \u8aac\u660e RABBITMQ_DEFAULT_USER guest \u7ba1\u7406UI\u3078\u306e\u30a2\u30af\u30bb\u30b9\u7528\u306e\u30e6\u30fc\u30b6\u540d RABBITMQ_DEFAULT_PASS guest \u7ba1\u7406UI\u3078\u306e\u30a2\u30af\u30bb\u30b9\u7528\u306e\u30d1\u30b9\u30ef\u30fc\u30c9 RABBITMQ_DEFAULT_VHOST / RabbitMQ\u306e\u30e1\u30a4\u30f3\u306e\u4eee\u60f3\u30db\u30b9\u30c8 RABBITMQ_DEFAULT_HA_PATTERN ^$ \u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u3055\u308c\u305f\u30ad\u30e5\u30fc\u3092\u4e00\u81f4\u3055\u305b\u308b\u305f\u3081\u306e\u6b63\u898f\u8868\u73fe"},{"location":"ja/docker-images/redis/","title":"Redis","text":"<p>Lagoon <code>Redis</code>\u30a4\u30e1\u30fc\u30b8Dockerfile \u306f\u3001\u516c\u5f0f <code>redis:alpine</code>\u30a4\u30e1\u30fc\u30b8\u3092\u30d9\u30fc\u30b9\u306b\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p>\u3053\u306eDockerfile\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u30b9\u30bf\u30f3\u30c9\u30a2\u30ed\u30f3\u306eRedis ephemeral \u30b5\u30fc\u30d0\u30fc\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/docker-images/redis/#supported-versions","title":"\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3","text":"<ul> <li>5 (\u4e92\u63db\u6027\u306e\u305f\u3081\u306e\u307f\u5229\u7528\u53ef\u80fd\u3001\u516c\u5f0f\u30b5\u30dd\u30fc\u30c8\u306f\u7d42\u4e86\u3057\u3066\u3044\u307e\u3059) - <code>uselagoon/redis-5</code>\u307e\u305f\u306f<code>uselagoon/redis-5-persistent</code></li> <li>6 Dockerfile - <code>uselagoon/redis-6</code>\u307e\u305f\u306f<code>uselagoon/redis-6-persistent</code></li> <li>7 Dockerfile - <code>uselagoon/redis-7</code>\u307e\u305f\u306f<code>uselagoon/redis-7-persistent</code></li> </ul>"},{"location":"ja/docker-images/redis/#_1","title":"\u4f7f\u7528\u65b9\u6cd5","text":"<p>Redis\u30a4\u30e1\u30fc\u30b8\u306b\u306f\u3001Ephemeral(\u4e00\u6642\u7684)\u3068Persistent(\u6c38\u7d9a\u7684)\u306e2\u7a2e\u985e\u306e\u30bf\u30a4\u30d7\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/docker-images/redis/#ephemeral","title":"Ephemeral(\u4e00\u6642\u7684)","text":"<p>Ephemeral\u30a4\u30e1\u30fc\u30b8\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u4e00\u6642\u7684\u306a\u30ad\u30e3\u30c3\u30b7\u30e5\u3068\u3057\u3066\u4f7f\u7528\u3055\u308c\u308b\u3053\u3068\u3092\u60f3\u5b9a\u3057\u3066\u304a\u308a\u3001\u30b3\u30f3\u30c6\u30ca\u3092\u518d\u8d77\u52d5\u3057\u3066\u3082\u30c7\u30fc\u30bf\u306f\u4fdd\u6301\u3055\u308c\u307e\u305b\u3093\u3002</p> <p>\u30e1\u30e2\u30ea\u5185(RAM)\u30ad\u30e3\u30c3\u30b7\u30e5\u3068\u3057\u3066\u4f7f\u7528\u3059\u308b\u5834\u5408\u3001\u5927\u304d\u306a\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u6271\u3046\u5834\u5408\u306f\u3001\u6700\u521d\u306b\u8abf\u6574\u3057\u305f\u3044\u306e\u304c<code>MAXMEMORY</code>\u5909\u6570\u3067\u3059\u3002\u3053\u306e\u5909\u6570\u306f\u3001Redis\u304c\u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u308c\u305f\u30a2\u30a4\u30c6\u30e0\u3092\u4fdd\u5b58\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3059\u308b\u30e1\u30e2\u30ea(RAM)\u306e\u6700\u5927\u91cf\u3092\u5236\u5fa1\u3057\u307e\u3059\u3002</p>"},{"location":"ja/docker-images/redis/#persistent","title":"Persistent (\u6c38\u7d9a\u7684)","text":"<p>Persistent\u306aRedis\u30a4\u30e1\u30fc\u30b8\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u3092\u518d\u8d77\u52d5\u3057\u3066\u3082\u30c7\u30fc\u30bf\u3092\u4fdd\u6301\u3057\u3001\u30ad\u30e5\u30fc\u3084\u6c38\u7d9a\u5316\u304c\u5fc5\u8981\u306a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u306b\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002</p> <p>Redis\u30b3\u30f3\u30c6\u30ca\u304c\u518d\u8d77\u52d5\u3057\u3066\u30c7\u30a3\u30b9\u30af\u304b\u3089\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u8fbc\u3080\u9593\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u4e88\u671f\u3057\u306a\u3044\u526f\u4f5c\u7528\u304c\u751f\u3058\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u305f\u3081\u3001\u901a\u5e38\u306f\u30e1\u30e2\u30ea\u5185\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u30b7\u30ca\u30ea\u30aa\u3067Persistent Redis\u3092\u4f7f\u7528\u3059\u308b\u3088\u3046\u306b\u306f\u304a\u52e7\u3081\u3057\u307e\u305b\u3093\u3002</p>"},{"location":"ja/docker-images/redis/#lagoon-adaptions","title":"Lagoon\u306e\u9069\u5fdc","text":"<p>\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306fLagoon\u3067\u4f7f\u7528\u3055\u308c\u308b\u3053\u3068\u3092\u60f3\u5b9a\u3057\u3066\u6e96\u5099\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u3059\u3067\u306b\u3044\u304f\u3064\u304b\u306e\u3053\u3068\u304c\u884c\u308f\u308c\u3066\u3044\u307e\u3059:</p> <ul> <li>\u30d5\u30a9\u30eb\u30c0\u306e\u6a29\u9650\u306f\u3001<code>fix-permissions</code>\u3067\u81ea\u52d5\u7684\u306b\u9069\u5fdc\u3055\u308c\u308b\u305f\u3081\u3001\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306f\u30e9\u30f3\u30c0\u30e0\u306a\u30e6\u30fc\u30b6\u30fc\u3067\u52d5\u4f5c\u3057\u307e\u3059\u3002</li> <li><code>/etc/redis/*</code>\u5185\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u30a8\u30f3\u30c8\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\u3092\u901a\u3057\u3066<code>envplate</code>\u3092\u4f7f\u7528\u3057\u3066\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u5316\u3055\u308c\u3066\u3044\u307e\u3059\u3002</li> </ul>"},{"location":"ja/docker-images/redis/#redisconf","title":"<code>redis.conf</code> \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb","text":"<p>\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306b\u306f\u3001Lagoon\u3067\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306b\u6700\u9069\u5316\u3055\u308c\u305f \u30c7\u30d5\u30a9\u30eb\u30c8 \u306eRedis\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/docker-images/redis/#environment-variables","title":"\u74b0\u5883\u5909\u6570","text":"<p>\u4e00\u90e8\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u74b0\u5883\u5909\u6570\u3067\u8a2d\u5b9a\u53ef\u80fd\u3067\u3059\u3002</p> \u74b0\u5883\u5909\u6570 \u30c7\u30d5\u30a9\u30eb\u30c8 \u8aac\u660e \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 -1 \u8d77\u52d5\u6642\u306b\u4f5c\u6210\u3055\u308c\u308b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u6570(-1\u306f\u7121\u5236\u9650) \u30ed\u30b0\u30ec\u30d9\u30eb \u901a\u77e5 \u30ed\u30b0\u306e\u30ec\u30d9\u30eb\u3092\u5b9a\u7fa9\u3057\u307e\u3059 \u6700\u5927\u30e1\u30e2\u30ea\u4f7f\u7528\u91cf 100mb \u6700\u5927\u30e1\u30e2\u30ea\u5bb9\u91cf \u6700\u5927\u30e1\u30e2\u30ea\u30dd\u30ea\u30b7\u30fc allkeys-lru Redis\u304c\u6700\u5927\u30e1\u30e2\u30ea\u4f7f\u7528\u91cf\u306b\u9054\u3057\u305f\u3068\u304d\u306b\u30ad\u30fc\u3092\u8ffd\u3044\u51fa\u3059\u305f\u3081\u306e\u30dd\u30ea\u30b7\u30fc REDIS_PASSWORD \u7121\u52b9 \u8a8d\u8a3c\u6a5f\u80fd\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002"},{"location":"ja/docker-images/redis/#_2","title":"\u30ab\u30b9\u30bf\u30e0\u8a2d\u5b9a","text":"<p>\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306b\u57fa\u3065\u3044\u3066\u3001\u30ab\u30b9\u30bf\u30e0\u8a2d\u5b9a\u3092\u542b\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 Redis\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u8a73\u7d30\u306a\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3064\u3044\u3066\u306f\u3001\u3053\u3061\u3089\u3092\u53c2\u7167\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/docker-images/redis/#redis_1","title":"Redis \u6c38\u7d9a\u5316","text":"<p>Lagoon\u306e <code>redis</code>\u30a4\u30e1\u30fc\u30b8\u3092\u30d9\u30fc\u30b9\u306b\u3057\u305fLagoon\u306e <code>redis-persistent</code> Docker\u30a4\u30e1\u30fc\u30b8\u306f\u3001Redis\u30b5\u30fc\u30d3\u30b9\u3092<code>persistent</code>\u30e2\u30fc\u30c9\u3067\u4f7f\u7528\u3059\u308b\u5834\u5408(\u3064\u307e\u308a\u3001\u30ad\u30fc\u304c\u30c7\u30a3\u30b9\u30af\u306b\u4fdd\u5b58\u3055\u308c\u308b\u6c38\u7d9a\u5316\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408)\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002</p> <p><code>redis</code>\u3068\u306e\u9055\u3044\u306f\u3001<code>FLAVOR</code>\u74b0\u5883\u5909\u6570\u306e\u307f\u3067\u3059\u3002\u3053\u308c\u306f\u3001\u4f7f\u7528\u3055\u308c\u308bredis\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u5fdc\u3058\u3066\u3001\u305d\u308c\u305e\u308c\u306eRedis\u8a2d\u5b9a\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002</p>"},{"location":"ja/docker-images/redis/#_3","title":"\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0","text":"<p>Lagoon\u306eRedis\u30a4\u30e1\u30fc\u30b8\u306b\u306f\u3059\u3079\u3066<code>redis-cli</code>\u30b3\u30de\u30f3\u30c9\u304c\u4e8b\u524d\u306b\u30ed\u30fc\u30c9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u3092\u4f7f\u7528\u3057\u3066\u3001Redis \u30b5\u30fc\u30d3\u30b9\u306b\u60c5\u5831\u3092\u554f\u3044\u5408\u308f\u305b\u305f\u308a\u3001\u8a2d\u5b9a\u5024\u3092\u52d5\u7684\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u3092\u4f7f\u7528\u3059\u308b\u306b\u306f\u3001\u3053\u3053\u306e\u624b\u9806\u3092\u4f7f\u7528\u3057\u3066\u3001<code>pod</code>\u5024\u3068\u3057\u3066<code>redis</code>\u3092\u6307\u5b9a\u3057\u3066Redis\u30dd\u30c3\u30c9\u306bSSH\u3067\u63a5\u7d9a\u3057\u3001\u63a5\u7d9a\u3057\u305f\u3089\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089\u5b9f\u884c\u3059\u308b\u3060\u3051\u3067\u3059\u3002</p>"},{"location":"ja/docker-images/redis/#_4","title":"\u6700\u5927\u30e1\u30e2\u30ea\u30dd\u30ea\u30b7\u30fc","text":"<p>\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001Lagoon<code>redis</code>\u30a4\u30e1\u30fc\u30b8\u306f<code>allkeys-lru</code>\u30dd\u30ea\u30b7\u30fc\u3092\u4f7f\u7528\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u30dd\u30ea\u30b7\u30fc\u306f\u3001Redis\u30b5\u30fc\u30d3\u30b9\u304c<code>maxmemory</code>\u5236\u9650\u306b\u9054\u3057\u305f\u5834\u5408\u3001\u6700\u5f8c\u306b\u4f7f\u7528\u3055\u308c\u305f\u30ad\u30fc\u304b\u3089\u9806\u306b\u3001Redis\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u4efb\u610f\u306e\u30ad\u30fc\u3092\u8ffd\u3044\u51fa\u3059\u3053\u3068\u3092\u8a31\u53ef\u3057\u307e\u3059\u3002</p> <p>\u4e00\u822c\u7684\u306a\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u306f\u3001Drupal\u304cRedis\u306b\u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u308c\u305f\u5404\u30ad\u30fc\u306b<code>TTL</code>\u5024\u3092\u8a2d\u5b9a\u3057\u306a\u3044\u5834\u5408\u304c\u3042\u308b\u305f\u3081\u3001\u3053\u308c\u304c\u7406\u60f3\u7684\u306a\u8a2d\u5b9a\u3067\u3059\u3002<code>maxmemory-policy</code>\u304c<code>volatile-lru</code>\u306e\u3088\u3046\u306a\u3082\u306e\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u3066\u3001Drupal\u304c\u3053\u308c\u3089\u306e<code>TTL</code>\u30bf\u30b0\u3092\u63d0\u4f9b\u3057\u306a\u3044\u5834\u5408\u3001Redis\u30b3\u30f3\u30c6\u30ca\u304c\u3044\u3063\u3071\u3044\u306b\u306a\u308a\u3001\u4efb\u610f\u306e\u30ad\u30fc\u306e\u8ffd\u3044\u51fa\u3057\u304c\u5b8c\u5168\u306b\u3067\u304d\u306a\u304f\u306a\u308a\u3001\u65b0\u3057\u3044\u30ad\u30e3\u30c3\u30b7\u30e5\u30ad\u30fc\u306e\u53d7\u3051\u5165\u308c\u3082\u5b8c\u5168\u306b\u505c\u6b62\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002</p> <p>Redis\u306emaxmemory\u30dd\u30ea\u30b7\u30fc\u306b\u3064\u3044\u3066\u306e\u8a73\u7d30\u60c5\u5831\u306f\u3001Redis\u306e\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u4e0b\u3055\u3044\u3002</p> <p>\u6ce8\u610f\u3057\u3066\u9032\u3081\u3066\u304f\u3060\u3055\u3044</p> <p>\u3053\u306e\u8a2d\u5b9a\u3092\u5909\u66f4\u3059\u308b\u3068\u3001Redis\u304c\u5b8c\u5168\u306b\u3044\u3063\u3071\u3044\u306b\u306a\u308a\u3001\u7d50\u679c\u3068\u3057\u3066\u969c\u5bb3\u304c\u767a\u751f\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/docker-images/redis/#redismaxmemory","title":"Redis\u306e<code>maxmemory</code>\u5024\u306e\u8abf\u6574","text":"<p>Redis\u306b\u5272\u308a\u5f53\u3066\u308b\u6700\u9069\u306a\u30e1\u30e2\u30ea\u91cf\u3092\u898b\u3064\u3051\u308b\u306e\u306f\u3001\u306a\u304b\u306a\u304b\u96e3\u3057\u3044\u4f5c\u696d\u3067\u3059\u3002Redis\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u30e1\u30e2\u30ea\u30b5\u30a4\u30ba\u3092\u8abf\u6574\u3059\u308b\u524d\u306b\u3001\u901a\u5e38\u901a\u308a\u306e\u4f7f\u7528\u3067\u3001\u5c11\u306a\u304f\u3068\u30821\u65e5\u9593\u306f\u901a\u5e38\u901a\u308a\u306b\u5b9f\u884c\u3055\u305b\u308b\u306e\u304c\u8ce2\u660e\u3067\u3059\u3002</p> <p>\u3053\u308c\u3089\u306e\u30e1\u30e2\u30ea\u5024\u3092\u8abf\u6574\u3059\u308b\u969b\u306b\u3001\u3044\u304f\u3064\u304b\u306e\u9ad8\u30ec\u30d9\u30eb\u306a\u30dd\u30a4\u30f3\u30c8\u304c\u3042\u308a\u307e\u3059\uff1a</p> <ul> <li>\u6700\u521d\u306b\u78ba\u8a8d\u3059\u308b\u3079\u304d\u3053\u3068\u306f \u73fe\u5728Redis\u304c\u4f7f\u7528\u3057\u3066\u3044\u308b\u30e1\u30e2\u30ea\u306e\u5272\u5408\u3067\u3059\u3002<ul> <li>\u3053\u306e\u5272\u5408\u304c<code>50\uff05</code>\u672a\u6e80\u306e\u5834\u5408\u306f\u3001<code>maxmemory</code>\u306e\u5024\u309225\uff05\u6e1b\u3089\u3059\u3053\u3068\u3092\u691c\u8a0e\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u3053\u306e\u5272\u5408\u304c<code>50\uff05</code>\u304b\u3089<code>75\uff05</code>\u306e\u9593\u3067\u3042\u308c\u3070\u3001\u554f\u984c\u306a\u304f\u7a3c\u50cd\u3057\u3066\u3044\u307e\u3059\u3002</li> <li>\u3053\u306e\u5024\u304c<code>75\uff05</code>\u3092\u8d85\u3048\u308b\u5834\u5408\u3001<code>maxmemory</code>\u3092\u5897\u3084\u3059\u5fc5\u8981\u304c\u3042\u308b\u304b\u3069\u3046\u304b\u3001\u4ed6\u306e\u5909\u6570\u3092\u78ba\u8a8d\u3059\u308b\u4fa1\u5024\u304c\u3042\u308a\u307e\u3059\u3002</li> </ul> </li> <li>Redis\u306e\u30e1\u30e2\u30ea\u4f7f\u7528\u7387\u304c\u9ad8\u3044\u3068\u5224\u65ad\u3057\u305f\u5834\u5408\u3001\u6b21\u306b\u30ad\u30fc\u306e\u8ffd\u3044\u51fa\u3057\u56de\u6570\u3092\u78ba\u8a8d\u3057\u3066\u4e0b\u3055\u3044\u3002<ul> <li>\u30ad\u30fc\u306e\u8ffd\u3044\u51fa\u3057\u56de\u6570\u304c\u591a\u304f\u3001\u30e1\u30e2\u30ea\u4f7f\u7528\u7387\u304c<code>95\uff05</code>\u3092\u8d85\u3048\u3066\u3044\u308b\u5834\u5408\u306f\u3001Redis\u306e<code>maxmemory</code>\u8a2d\u5b9a\u3092\u9ad8\u304f\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3053\u3068\u3092\u793a\u3057\u3066\u3044\u307e\u3059\u3002</li> <li>\u30ad\u30fc\u306e\u8ffd\u3044\u51fa\u3057\u56de\u6570\u304c\u591a\u304f\u306a\u3044\u3088\u3046\u3067\u3001\u5fdc\u7b54\u6642\u9593\u304c\u59a5\u5f53\u306a\u5834\u5408\u306f\u3001\u5358\u306b Redis \u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u30e1\u30e2\u30ea\u3092\u60f3\u5b9a\u901a\u308a\u306b\u7ba1\u7406\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u793a\u3057\u3066\u3044\u307e\u3059\u3002</li> </ul> </li> </ul>"},{"location":"ja/docker-images/redis/#_5","title":"\u30b3\u30de\u30f3\u30c9\u4f8b","text":"<p>\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u3001Redis\u30b5\u30fc\u30d3\u30b9\u306b\u95a2\u3059\u308b\u60c5\u5831\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059:</p> <ul> <li>Redis\u30b5\u30fc\u30d3\u30b9\u306b\u95a2\u3059\u308b\u3059\u3079\u3066\u306e\u60c5\u5831\u3092\u8868\u793a:<code>redis-cli info</code></li> <li>\u30b5\u30fc\u30d3\u30b9\u306e\u30e1\u30e2\u30ea\u60c5\u5831\u3092\u8868\u793a:<code>redis-cli info memory</code></li> <li>\u30b5\u30fc\u30d3\u30b9\u306e\u30ad\u30fc\u30b9\u30da\u30fc\u30b9\u60c5\u5831\u3092\u8868\u793a:<code>redis-cli info keyspace</code></li> <li>\u30b5\u30fc\u30d3\u30b9\u306e\u7d71\u8a08\u60c5\u5831\u3092\u8868\u793a:<code>redis-cli info stats</code></li> </ul> <p>Redis\u30b5\u30fc\u30d3\u30b9\u306e\u5024\u3092\u3001Redis\u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u305b\u305a\u306b\u52d5\u7684\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002 \u305f\u3060\u3057\u3001\u3053\u308c\u3089\u306e\u52d5\u7684\u306b\u8a2d\u5b9a\u3055\u308c\u305f\u5024\u306f\u3001\u30dd\u30c3\u30c9\u304c\u518d\u8d77\u52d5\u3057\u305f\u5834\u5408 (\u30c7\u30d7\u30ed\u30a4\u3001\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u3001\u307e\u305f\u306f\u5358\u306b\u30ce\u30fc\u30c9\u9593\u3067\u30b7\u30e3\u30c3\u30d5\u30eb\u3055\u308c\u305f\u5834\u5408\u306b\u767a\u751f\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059) \u306b\u306f\u6c38\u7d9a\u5316\u3055\u308c\u306a\u3044\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <ul> <li><code>maxmemory</code>\u8a2d\u5b9a\u5024\u3092\u52d5\u7684\u306b<code>500mb</code>\u306b\u8a2d\u5b9a: <code>config set maxmemory 500mb</code></li> <li><code>maxmemory-policy</code>\u8a2d\u5b9a\u5024\u3092\u52d5\u7684\u306b<code>volatile-lru</code>\u306b\u8a2d\u5b9a: <code>config set maxmemory-policy volatile-lru</code></li> </ul>"},{"location":"ja/docker-images/ruby/","title":"Ruby","text":"<p>Lagoon <code>ruby</code> Docker\u30a4\u30e1\u30fc\u30b8\u3002\u516c\u5f0f\u306ePython Alpine\u30a4\u30e1\u30fc\u30b8\u3092\u30d9\u30fc\u30b9\u306b\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/docker-images/ruby/#supported-versions","title":"\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3","text":"<ul> <li>3.0 (\u4e92\u63db\u6027\u306e\u305f\u3081\u3060\u3051\u306b\u5229\u7528\u53ef\u80fd\u3001\u516c\u5f0f\u306b\u306f\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u305b\u3093) - <code>uselagoon/ruby-3.0</code></li> <li>3.1 Dockerfile (2025\u5e743\u6708\u307e\u3067\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/ruby-3.1</code></li> <li>3.2 Dockerfile (2026\u5e743\u6708\u307e\u3067\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/ruby-3.2</code></li> <li>3.3 Dockerfile (2027\u5e743\u6708\u307e\u3067\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b5\u30dd\u30fc\u30c8) - <code>uselagoon/ruby-3.3</code></li> </ul> <p>\u30d2\u30f3\u30c8</p> <p>Lagoon\u306f\u3001\u516c\u5f0f\u306b\u30a2\u30ca\u30a6\u30f3\u30b9\u3055\u308c\u305f\u7d42\u4e86\u65e5(EOL)\u306e\u5f8c\u306b\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u3001EOL\u306b\u9054\u3057\u305fRuby\u30a4\u30e1\u30fc\u30b8\u306e\u66f4\u65b0\u3092\u505c\u6b62\u3057\u307e\u3059\u3002\u8a73\u7d30\u306fhttps://www.ruby-lang.org/en/downloads/releases/\u3092\u53c2\u7167\u3057\u3066\u4e0b\u3055\u3044\u3002</p>"},{"location":"ja/docker-images/ruby/#lagoon-adaptions","title":"Lagoon\u306e\u9069\u5fdc","text":"<p>ruby\u30b3\u30f3\u30c6\u30ca\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u516c\u958b\u30dd\u30fc\u30c8\u306f\u30dd\u30fc\u30c8<code>3000</code>\u3067\u3059\u3002</p> <p>Lagoon\u306b\u306fRuby\u30b5\u30fc\u30d3\u30b9\u5c02\u7528\u306e\u4e8b\u524d\u5b9a\u7fa9\u3055\u308c\u305f\u578b\u306f\u3042\u308a\u307e\u305b\u3093\u3002<code>lagoon.type: generic</code>\u3092\u4f7f\u7528\u3057\u3066\u69cb\u6210\u3057\u3001lagoon.port: 3000 \u3067\u30dd\u30fc\u30c8\u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/docker-images/ruby/#docker-composeyml-snippet","title":"<code>docker-compose.yml</code> \u30b9\u30cb\u30da\u30c3\u30c8","text":"docker-compose.yml<pre><code>ruby:\nbuild:\n# \u30eb\u30fc\u30c8\u30d5\u30a9\u30eb\u30c0\u306b\u3042\u308bDockerfile\u3092\u4f7f\u7528\u3057\u3066\u30d3\u30eb\u30c9\u3092\u884c\u3046\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\ncontext: .\ndockerfile: Dockerfile\nlabels:\n# Lagoon\u306b\u3053\u308c\u304c\u4e00\u822c\u7684\u306a\u30b5\u30fc\u30d3\u30b9\u3067\u3001\u30dd\u30fc\u30c83000\u3092\u516c\u958b\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u4f1d\u3048\u307e\u3059\nlagoon.type: generic\nlagoon.port: 3000\nports:\n# \u30ed\u30fc\u30ab\u30eb\u958b\u767a\u306e\u307f\u9069\u7528\u3055\u308c\u308b\u8a2d\u5b9a\u3067\u3059\n# \u30dd\u30fc\u30c83000\u3092\u30e9\u30f3\u30c0\u30e0\u306a\u30ed\u30fc\u30ab\u30eb\u30dd\u30fc\u30c8\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3057\u3001\n# `docker-compose port node 3000`\u3067\u30dd\u30fc\u30c8\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n- \"3000\"\n</code></pre>"},{"location":"ja/docker-images/solr/","title":"Solr","text":"<p>Lagoon <code>Solr</code>\u30a4\u30e1\u30fc\u30b8\u306eDockerfile\u3002\u516c\u5f0f\u306e<code>solr:&lt;version&gt;-alpine</code>\u30a4\u30e1\u30fc\u30b8\u3092\u30d9\u30fc\u30b9\u306b\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p>\u3053\u306eDockerfile\u306f\u3001\u521d\u671f\u30b3\u30a2<code>mycore</code>\u3092\u6301\u3064\u30b9\u30bf\u30f3\u30c9\u30a2\u30ed\u30f3\u306eSolr\u30b5\u30fc\u30d0\u30fc\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/docker-images/solr/#supported-versions","title":"\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3","text":"<ul> <li>5.5 (\u4e92\u63db\u6027\u306e\u305f\u3081\u306e\u307f\u5229\u7528\u53ef\u80fd\u3001\u516c\u5f0f\u30b5\u30dd\u30fc\u30c8\u306f\u7d42\u4e86\u3057\u3066\u3044\u307e\u3059)</li> <li>6.6 (\u4e92\u63db\u6027\u306e\u305f\u3081\u306e\u307f\u5229\u7528\u53ef\u80fd\u3001\u516c\u5f0f\u30b5\u30dd\u30fc\u30c8\u306f\u7d42\u4e86\u3057\u3066\u3044\u307e\u3059)</li> <li>7.7 (\u4e92\u63db\u6027\u306e\u305f\u3081\u306e\u307f\u5229\u7528\u53ef\u80fd\u3001\u516c\u5f0f\u30b5\u30dd\u30fc\u30c8\u306f\u7d42\u4e86\u3057\u3066\u3044\u307e\u3059)</li> <li>7 (\u4e92\u63db\u6027\u306e\u305f\u3081\u306e\u307f\u5229\u7528\u53ef\u80fd\u3001\u516c\u5f0f\u30b5\u30dd\u30fc\u30c8\u306f\u7d42\u4e86\u3057\u3066\u3044\u307e\u3059) - <code>uselagoon/solr-7</code></li> <li>8 Dockerfile - <code>uselagoon/solr-8</code></li> <li>9 Dockerfile - <code>uselagoon/solr-9</code></li> </ul>"},{"location":"ja/docker-images/solr/#lagoon-adaptions","title":"Lagoon\u306e\u9069\u5fdc","text":"<p>\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306fLagoon\u3067\u4f7f\u7528\u3055\u308c\u308b\u3053\u3068\u3092\u60f3\u5b9a\u3057\u3066\u6e96\u5099\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u3059\u3067\u306b\u3044\u304f\u3064\u304b\u306e\u3053\u3068\u304c\u884c\u308f\u308c\u3066\u3044\u307e\u3059:</p> <ul> <li>\u30d5\u30a9\u30eb\u30c0\u306e\u6a29\u9650\u306f\u3001<code>fix-permissions</code>\u3067\u81ea\u52d5\u7684\u306b\u9069\u5fdc\u3055\u308c\u308b\u305f\u3081\u3001\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306f\u30e9\u30f3\u30c0\u30e0\u306a\u30e6\u30fc\u30b6\u30fc\u3067\u52d5\u4f5c\u3057\u307e\u3059\u3002</li> <li><code>10-solr-port.sh</code>\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u3001<code>Solr</code>\u30dd\u30fc\u30c8\u306e\u4fee\u6b63\u3068\u78ba\u8a8d\u3092\u884c\u3044\u307e\u3059\u3002</li> <li><code>20-solr-datadir.sh</code>\u306f\u3001<code>Solr</code>\u306e\u8a2d\u5b9a\u304cLagoon\u306b\u9069\u5408\u3057\u3066\u3044\u308b\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u3053\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30d1\u30b9\u3092\u8a2d\u5b9a\u3057\u3001\u6b63\u3057\u3044\u30ed\u30c3\u30af\u30bf\u30a4\u30d7\u3092\u69cb\u6210\u3057\u307e\u3059\u3002</li> </ul>"},{"location":"ja/docker-images/solr/#environment-variables","title":"\u74b0\u5883\u5909\u6570","text":"<p>\u4e00\u90e8\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u74b0\u5883\u5909\u6570\u3092\u901a\u3058\u3066\u8a2d\u5b9a\u53ef\u80fd\u3067\u3059\u3002</p> \u74b0\u5883\u5909\u6570 \u30c7\u30d5\u30a9\u30eb\u30c8 \u8aac\u660e SOLR_JAVA_MEM 512M \u30c7\u30d5\u30a9\u30eb\u30c8\u306eJava HEAP\u30b5\u30a4\u30ba(\u4f8b. <code>SOLR_JAVA_MEM=\"-Xms10g -Xmx10g\"</code>) SOLR_DATA_DIR /var/solr Solr\u30c7\u30fc\u30bf\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u30d1\u30b9\u3002\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3001\u3053\u308c\u3092\u5909\u66f4\u3059\u308b\u3068\u30c7\u30fc\u30bf\u304c\u5931\u308f\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\uff01 SOLR_COPY_DATA_DIR_SOURCE (\u8a2d\u5b9a\u306a\u3057) \u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u5b9a\u7fa9\u6e08\u307f\u306e<code>SOLR_DATA_DIR</code>\u306b\u30b3\u30d4\u30fc\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3059\u308b\u30d1\u30b9\u3067\u3059\u3002\u65e2\u5b58\u306e\u30b3\u30a2\u3092\u4f7f\u3063\u3066 Solr \u3092\u4e8b\u524d\u306b\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u30b9\u30af\u30ea\u30d7\u30c8\u306f\u5b9f\u969b\u306e Solr \u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u306e\u5b58\u5728\u3092\u524d\u63d0\u3068\u3057\u3066\u3044\u307e\u3059\u3002\u30b3\u30d4\u30fc\u306f\u3001\u5b9b\u5148\u306b Solr \u30b3\u30a2\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306e\u307f\u884c\u308f\u308c\u307e\u3059\u3002"},{"location":"ja/docker-images/varnish/","title":"Varnish","text":"<p>Lagoon\u306e <code>Varnish</code>\u30a4\u30e1\u30fc\u30b8Dockerfile\u3067\u3059\u3002 \u516c\u5f0f <code>Varnish</code>\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30d9\u30fc\u30b9\u306b\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/docker-images/varnish/#supported-versions","title":"\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3","text":"<ul> <li>5(\u4e92\u63db\u6027\u306e\u305f\u3081\u306e\u307f\u5229\u7528\u53ef\u80fd\u3001\u516c\u5f0f\u30b5\u30dd\u30fc\u30c8\u306f\u7d42\u4e86\u3057\u3066\u3044\u307e\u3059)- <code>uselagoon/varnish-5</code></li> <li>6.0 LTS Dockerfile - <code>uselagoon/varnish-6</code></li> <li>7 Dockerfile - <code>uselagoon/varnish-7</code></li> </ul>"},{"location":"ja/docker-images/varnish/#included-varnish-modules","title":"Varnish\u30e2\u30b8\u30e5\u30fc\u30eb","text":"<ul> <li><code>vbox-dynamic</code> - DNS \u30eb\u30c3\u30af\u30a2\u30c3\u30d7\u3068 SRV \u30ec\u30b3\u30fc\u30c9\u304b\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u691c\u51fa\u306b\u3088\u308b\u30c0\u30a4\u30ca\u30df\u30c3\u30af\u30d0\u30c3\u30af\u30a8\u30f3\u30c9</li> <li><code>vbox-bodyaccess</code> - \u30ea\u30af\u30a8\u30b9\u30c8\u30dc\u30c7\u30a3\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b Varnish <code>vmod</code></li> </ul>"},{"location":"ja/docker-images/varnish/#lagoon-adaptions","title":"Lagoon\u306e\u9069\u5fdc","text":"<p>\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306fLagoon\u3067\u4f7f\u7528\u3055\u308c\u308b\u3053\u3068\u3092\u60f3\u5b9a\u3057\u3066\u6e96\u5099\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u3059\u3067\u306b\u3044\u304f\u3064\u304b\u306e\u3053\u3068\u304c\u884c\u308f\u308c\u3066\u3044\u307e\u3059:</p> <ul> <li>\u30d5\u30a9\u30eb\u30c0\u306e\u6a29\u9650\u306f\u3001<code>fix-permissions</code>\u3067\u81ea\u52d5\u7684\u306b\u9069\u5fdc\u3055\u308c\u308b\u305f\u3081\u3001\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306f\u30e9\u30f3\u30c0\u30e0\u306a\u30e6\u30fc\u30b6\u30fc\u3067\u52d5\u4f5c\u3057\u307e\u3059\u3002</li> </ul>"},{"location":"ja/docker-images/varnish/#included-defaultvcl-configuration-file","title":"<code>default.vcl</code> \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb","text":"<p>\u3053\u306e\u30a4\u30e1\u30fc\u30b8\u306b\u306f\u3001Lagoon\u3067\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306b\u6700\u9069\u5316\u3055\u308c\u305f\u30c7\u30d5\u30a9\u30eb\u30c8\u306e<code>vcl</code>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002\u3044\u304f\u3064\u304b\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u74b0\u5883\u5909\u6570\u3067\u8a2d\u5b9a\u53ef\u80fd\u3067\u3059(\u74b0\u5883\u5909\u6570\u3092\u53c2\u7167\u3057\u3066\u4e0b\u3055\u3044)\u3002</p>"},{"location":"ja/docker-images/varnish/#environment-variables","title":"\u74b0\u5883\u5909\u6570","text":"<p>\u3044\u304f\u3064\u304b\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u74b0\u5883\u5909\u6570\u3067\u8a2d\u5b9a\u53ef\u80fd\u3067\u3059\u3002</p> \u74b0\u5883\u5909\u6570 \u30c7\u30d5\u30a9\u30eb\u30c8 \u8aac\u660e VARNISH_BACKEND_HOST NGINX \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u30db\u30b9\u30c8 VARNISH_BACKEND_PORT 8080 \u30c7\u30d5\u30a9\u30eb\u30c8\u306eVarnish\u30dd\u30fc\u30c8 VARNISH_SECRET lagoon_default_secret \u7ba1\u7406\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u308bVarnish\u30b7\u30fc\u30af\u30ec\u30c3\u30c8 LIBVMOD_DYNAMIC_VERSION 5.2 <code>vmod-dynamic</code>\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30d0\u30fc\u30b8\u30e7\u30f3 LIBVMOD_BODYACCESS_VERSION 5.0 <code>vmod-bodyaccess</code>\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30d0\u30fc\u30b8\u30e7\u30f3 HTTP_RESP_HDR_LEN 8k \u4efb\u610f\u306eHTTP\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u30ec\u30b9\u30dd\u30f3\u30b9\u30d8\u30c3\u30c0\u306e\u6700\u5927\u9577 HTTP_RESP_SIZE 32k \u51e6\u7406\u53ef\u80fd\u306aHTTP\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u6700\u5927\u30d0\u30a4\u30c8\u6570 NUKE_LIMIT 150 \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30dc\u30c7\u30a3\u306e\u305f\u3081\u306e\u7a7a\u304d\u3092\u4f5c\u308b\u305f\u3081\u306b\u524a\u9664\u3092\u8a66\u307f\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u6700\u5927\u6570 CACHE_TYPE malloc varnish\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u30bf\u30a4\u30d7 CACHE_SIZE 100M \u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30a4\u30ba LISTEN 8080 \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u30b5\u30fc\u30d0\u30fc\u30dd\u30fc\u30c8 MANAGEMENT_LISTEN 6082 \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u7ba1\u7406\u30ea\u30b9\u30cb\u30f3\u30b0\u30dd\u30fc\u30c8"},{"location":"ja/installing-lagoon/add-group/","title":"\u30b0\u30eb\u30fc\u30d7\u3092\u8ffd\u52a0","text":"\u30b0\u30eb\u30fc\u30d7\u3092\u8ffd\u52a0<pre><code>  lagoon add group -N groupname\n</code></pre>"},{"location":"ja/installing-lagoon/add-project/","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8ffd\u52a0","text":""},{"location":"ja/installing-lagoon/add-project/#lagoon","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092Lagoon\u306b\u8ffd\u52a0\u3059\u308b","text":"<ol> <li> <p>\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059:</p> \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8ffd\u52a0<pre><code>lagoon add project \\\n--gitUrl &lt;YOUR-GITHUB-REPO-URL&gt; \\\n--openshift 1 \\\n--productionEnvironment &lt;YOUR-PROD-ENV&gt; \\\n--branches &lt;THE-BRANCHES-YOU-WANT-TO-DEPLOY&gt; \\\n--project &lt;YOUR-PROJECT-NAME&gt;\n</code></pre> <ul> <li><code>--openshift</code>\u306e\u5024\u306f\u3001\u3042\u306a\u305f\u306eKubernetes\u30af\u30e9\u30b9\u30bf\u306eID\u3067\u3059\u3002</li> <li>\u672c\u756a\u74b0\u5883\u306f\u3001\u672c\u756a\u74b0\u5883\u3068\u3057\u3066\u4f7f\u7528\u3057\u305f\u3044\u30d6\u30e9\u30f3\u30c1\u306e\u540d\u524d\u3067\u3042\u308b\u3079\u304d\u3067\u3059\u3002</li> <li>\u30c7\u30d7\u30ed\u30a4\u3057\u305f\u3044\u30d6\u30e9\u30f3\u30c1\u306f\u3001\u6b21\u306e\u3088\u3046\u306b\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059:<code>\u201c^(main|develop)$\u201d</code></li> <li>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u540d\u524d\u306f\u4f55\u3067\u3082\u826f\u3044 - \u201c\u4f1a\u793e\u306e\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8,\u201d \u201c\u4f8b,\u201d \u306a\u3069\u3067\u3059\u3002</li> </ul> </li> <li> <p>Lagoon UI\u306b\u79fb\u52d5\u3057\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u30ea\u30b9\u30c8\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u306f\u305a\u3067\u3059\uff01</p> </li> </ol>"},{"location":"ja/installing-lagoon/add-project/#git","title":"\u30c7\u30d7\u30ed\u30a4\u30ad\u30fc\u3092Git\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u8ffd\u52a0\u3059\u308b","text":"<p>Lagoon\u306f\u5404\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30c7\u30d7\u30ed\u30a4\u30ad\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u3053\u308c\u3092Git\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c7\u30d7\u30ed\u30a4\u30ad\u30fc\u3068\u3057\u3066\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3067\u3001Lagoon\u304c\u30b3\u30fc\u30c9\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <ol> <li> <p>\u30c7\u30d7\u30ed\u30a4\u30ad\u30fc\u3092\u53d6\u5f97\u3059\u308b\u305f\u3081\u306b\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059:</p> \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30ad\u30fc\u306e\u53d6\u5f97<pre><code>lagoon get project-key --project &lt;YOUR-PROJECT-NAME&gt;\n</code></pre> </li> <li> <p>\u30ad\u30fc\u3092\u30b3\u30d4\u30fc\u3057\u3001Git\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c7\u30d7\u30ed\u30a4\u30ad\u30fc\u3068\u3057\u3066\u4fdd\u5b58\u3057\u307e\u3059\u3002</p> </li> </ol> <p>GitHub GitLab Bitbucket</p>"},{"location":"ja/installing-lagoon/add-project/#gitwebhooks","title":"Git\u30ea\u30dd\u30b8\u30c8\u30ea\u306bwebhooks\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u8ffd\u52a0\u3059\u308b","text":"<p>Lagoon\u304c\u30b3\u30fc\u30c9\u306e\u66f4\u65b0\u6642\u306b\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u308b\u3088\u3046\u306b\u3001Git\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u63a5\u7d9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <ol> <li> <p>Lagoon\u30af\u30e9\u30b9\u30bf\u306ewebhook\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092Git\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> <ul> <li>\u30da\u30a4\u30ed\u30fc\u30c9URL: <code>&lt;LAGOON-WEBHOOK-INGRESS&gt;</code></li> <li>\u30b3\u30f3\u30c6\u30f3\u30c4\u30bf\u30a4\u30d7: JSON</li> <li>\u30a2\u30af\u30c6\u30a3\u30d6: \u30a2\u30af\u30c6\u30a3\u30d6(\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u6709\u52b9/\u7121\u52b9\u3092\u5207\u308a\u66ff\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059)</li> <li>\u30a4\u30d9\u30f3\u30c8: \u95a2\u9023\u3059\u308b\u30a4\u30d9\u30f3\u30c8\u3092\u9078\u629e\u3059\u308b\u304b\u3001\u5168\u3066\u3092\u9078\u629e\u3057\u307e\u3059\u3002\u901a\u5e38\u306f\u30d7\u30c3\u30b7\u30e5\u3001\u30d6\u30e9\u30f3\u30c1\u306e\u4f5c\u6210/\u524a\u9664\u304c\u5fc5\u8981\u3067\u3059</li> </ul> </li> </ol> <p>GitHub GitLab Bitbucket</p>"},{"location":"ja/installing-lagoon/create-user/","title":"Lagoon\u30e6\u30fc\u30b6\u30fc\u306e\u4f5c\u6210","text":"<ol> <li> <p>Lagoon CLI\u3092\u4f7f\u3063\u3066\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\u3057\u307e\u3059:</p> \u30e6\u30fc\u30b6\u30fc\u306e\u8ffd\u52a0<pre><code>lagoon add user --email user@example.com --firstName MyFirstName --lastName MyLastName\n</code></pre> </li> <li> <p>\u3042\u306a\u305f\u306e\u30e1\u30fc\u30eb\u306b\u79fb\u52d5\u3057\u3001\u30e1\u30fc\u30eb\u5185\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> </li> <li>\u6307\u793a\u306b\u5f93\u3063\u3066\u4f5c\u6210\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u3067Lagoon UI\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002</li> <li>\u30e6\u30fc\u30b6\u30fc\u306eSSH\u516c\u958b\u9375\u3092\u8a2d\u5b9a\u304b\u3089\u8ffd\u52a0\u3057\u307e\u3059\u3002</li> </ol>"},{"location":"ja/installing-lagoon/deploy-project/","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b","text":"<ol> <li> <p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u305f\u3081\u306e\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059:</p> \u30c7\u30d7\u30ed\u30a4<pre><code>lagoon deploy branch -p &lt;\u3042\u306a\u305f\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d&gt; -b &lt;\u3042\u306a\u305f\u306e\u30d6\u30e9\u30f3\u30c1\u540d&gt;\n</code></pre> </li> <li> <p>Lagoon\u306eUI\u306b\u79fb\u52d5\u3057\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u78ba\u8a8d\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044 - \u3053\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u74b0\u5883\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u306f\u305a\u3067\u3059\uff01</p> </li> <li>\u30af\u30e9\u30b9\u30bf\u5185\u306ePods\u30ea\u30b9\u30c8\u3092\u78ba\u8a8d\u3057\u3001Git\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u30af\u30ed\u30fc\u30f3\u3057\u305f\u308a\u3001\u30b5\u30fc\u30d3\u30b9\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u305f\u308a\u3059\u308b\u30d3\u30eb\u30c9Pod\u304c\u898b\u3048\u308b\u306f\u305a\u3067\u3059\u3002\u5168\u3066\u306epods\u3092\u898b\u308b<pre><code>kubectl get pods --all-namespaces | grep lagoon-build\n</code></pre> </li> </ol>"},{"location":"ja/installing-lagoon/gitlab/","title":"GitLab","text":"<p>*\u307b\u3068\u3093\u3069\u306e*\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u306f\u5fc5\u8981\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u3053\u308c\u306fLagoon\u3068GitLab\u3092\u30e6\u30fc\u30b6\u30fc\u304a\u3088\u3073\u30b0\u30eb\u30fc\u30d7\u8a8d\u8a3c\u306e\u305f\u3081\u306b\u7d71\u5408\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <ol> <li>\u7ba1\u7406\u8005\u6a29\u9650\u3092\u6301\u3064\u30e6\u30fc\u30b6\u30fc\u306eGitLab\u3067\u30d1\u30fc\u30bd\u30ca\u30eb\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</li> <li><code>your-gitlab.com/admin/hooks</code> \u306e\u4e0b\u306b\u30b7\u30b9\u30c6\u30e0\u30d5\u30c3\u30af\u3092\u4f5c\u6210\u3057\u3001<code>webhookhandler.lagoon.example.com</code> \u306b\u30dd\u30a4\u30f3\u30c8\u3057\u3001\u30e9\u30f3\u30c0\u30e0\u306a\u79d8\u5bc6\u306e\u30c8\u30fc\u30af\u30f3\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002<ol> <li>\u300c\u30ea\u30dd\u30b8\u30c8\u30ea\u66f4\u65b0\u30a4\u30d9\u30f3\u30c8\u300d\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002</li> </ol> </li> <li> <p><code>lagoon-core-values.yml</code>\u3092\u66f4\u65b0\u3057\u307e\u3059:</p> lagoon-core-values.yml<pre><code>api:\nadditionalEnvs:\nGITLAB_API_HOST: &lt;&lt;GitLab\u306eURL \u4f8b: https://your-gitlab.com&gt;&gt;\nGITLAB_API_TOKEN: &lt;&lt; API\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u6301\u3064\u30d1\u30fc\u30bd\u30ca\u30eb\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3 &gt;&gt;\nGITLAB_SYSTEM_HOOK_TOKEN: &lt;&lt; \u30b7\u30b9\u30c6\u30e0\u30d5\u30c3\u30af\u79d8\u5bc6\u30c8\u30fc\u30af\u30f3 &gt;&gt;\nwebhook-haondler:\nadditionalEnvs:\nGITLAB_API_HOST: &lt;&lt;GitLab\u306eURL \u4f8b: https://your-gitlab.com&gt;&gt;\nGITLAB_API_TOKEN: &lt;&lt; API\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u6301\u3064\u30d1\u30fc\u30bd\u30ca\u30eb\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3 &gt;&gt;\nGITLAB_SYSTEM_HOOK_TOKEN: &lt;&lt; \u30b7\u30b9\u30c6\u30e0\u30d5\u30c3\u30af\u79d8\u5bc6\u30c8\u30fc\u30af\u30f3 &gt;&gt;\nwebhooks2tasks:\nadditionalEnvs:\nGITLAB_API_HOST: &lt;&lt;GitLab\u306eURL \u4f8b: https://your-gitlab.com&gt;&gt;\nGITLAB_API_TOKEN: &lt;&lt; Personal API\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u6301\u3064\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3 &gt;&gt;\nGITLAB_SYSTEM_HOOK_TOKEN: &lt;&lt; \u30b7\u30b9\u30c6\u30e0\u30d5\u30c3\u30af\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30c8\u30fc\u30af\u30f3 &gt;&gt;\n</code></pre> </li> <li> <p><code>lagoon-core</code> helmchart\u3092Helm\u3067\u66f4\u65b0\u3057\u307e\u3059\u3002</p> </li> <li>\u3059\u3067\u306bKeycloak\u306b\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u305d\u308c\u3089\u3092\u524a\u9664\u3057\u307e\u3059\u3002</li> <li>API\u30dd\u30c3\u30c9\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059:GitLab\u3068\u540c\u671f<pre><code>  yarn sync:gitlab:all\n</code></pre> </li> </ol>"},{"location":"ja/installing-lagoon/install-harbor/","title":"Harbor\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<ol> <li> <p>Helm\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\u3057\u307e\u3059:</p> Helm\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0<pre><code>helm repo add harbor https://helm.goharbor.io\n</code></pre> </li> <li> <p>\u3042\u306a\u305f\u306e\u7279\u5b9a\u306e\u72b6\u6cc1\u306b\u6700\u9069\u306aHarbor\u306e\u8a2d\u5b9a\u3092\u8003\u616e\u3057\u3066\u304f\u3060\u3055\u3044 - \u8a73\u7d30\u306a\u63a8\u5968\u4e8b\u9805\u306b\u3064\u3044\u3066\u306f\u5f7c\u3089\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044:</p> <ol> <li>\u753b\u50cf\u306eblob(<code>imageChartStorage</code>)\u306b\u306fS3\u4e92\u63db\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u4f7f\u7528\u3092\u63a8\u5968\u3057\u307e\u3059\u3002</li> <li>Postgres\u30b5\u30fc\u30d3\u30b9(<code>database.type</code>)\u306b\u306f\u30de\u30cd\u30fc\u30b8\u30c9\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u4f7f\u7528\u3092\u63a8\u5968\u3057\u307e\u3059\u3002</li> <li>\u9ad8\u8ca0\u8377\u30b7\u30ca\u30ea\u30aa\u3067\u306f\u3001\u30de\u30cd\u30fc\u30b8\u30c9Redis\u30b5\u30fc\u30d3\u30b9(<code>redis.type</code>)\u306e\u4f7f\u7528\u3092\u63a8\u5968\u3057\u307e\u3059\u3002</li> </ol> </li> <li> <p>\u8a2d\u5b9a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306b<code>harbor-values.yml</code>\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u30d7\u30ed\u30ad\u30b7\u30d0\u30c3\u30d5\u30a1\u30ea\u30f3\u30b0\u306e\u6ce8\u91c8\u306f\u5927\u304d\u306a\u753b\u50cf\u306e\u30d7\u30c3\u30b7\u30e5\u306b\u5f79\u7acb\u3061\u307e\u3059:</p> harbor-values.yml<pre><code>expose:\ningress:\nannotations:\nkubernetes.io/tls-acme: \"true\"\nnginx.ingress.kubernetes.io/proxy-buffering: \"off\"\nnginx.ingress.kubernetes.io/proxy-request-buffering: \"off\"\nhosts:\ncore: harbor.lagoon.example.com\ntls:\nenabled: true\ncertSource: secret\nsecret:\nsecretName: harbor-harbor-ingress\nexternalURL: https://harbor.lagoon.example.com\nharborAdminPassword: &lt;\u3042\u306a\u305f\u306eHarbor\u7ba1\u7406\u8005\u30d1\u30b9\u30ef\u30fc\u30c9&gt;\nchartmuseum:\nenabled: false\nclair:\nenabled: false\nnotary:\nenabled: false\ntrivy:\nenabled: false\njobservice:\njobLogger: stdout\n</code></pre> </li> <li> <p>\u73fe\u5728\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308bHarbor\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u8981\u4ef6\u3092\u78ba\u8a8d\u3057\u306a\u304c\u3089\u3001Harbor\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002</p> Harbor\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb<pre><code>helm upgrade --install --create-namespace \\\n--namespace harbor --wait \\\n-f harbor-values.yml \\\nharbor harbor/harbor\n</code></pre> </li> <li> <p><code>harbor.yml</code>\u3067\u8a2d\u5b9a\u3057\u305fURL\u3067Harbor\u3092\u8a2a\u308c\u307e\u3059\u3002</p> <ol> <li>\u30e6\u30fc\u30b6\u30fc\u540d:admin</li> <li>\u30d1\u30b9\u30ef\u30fc\u30c9:</li> </ol> Harbor\u306e\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u53d6\u5f97<pre><code>kubectl -n harbor get secret harbor-core -o jsonpath=\"{.data.HARBOR_ADMIN_PASSWORD}\" | base64 --decode\n</code></pre> </li> <li> <p>\u6b21\u306e\u30b9\u30c6\u30c3\u30d7\u306eLagoon Remote <code>values.yml</code>\u3068<code>harbor-values.yml</code>\u306b\u4e0a\u8a18\u306eHarbor\u306e\u8cc7\u683c\u60c5\u5831\u3092\u8ffd\u52a0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> </li> </ol>"},{"location":"ja/installing-lagoon/install-lagoon-remote/","title":"Lagoon Remote\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u6b21\u306b\u3001Lagoon Remote\u3092Lagoon\u540d\u524d\u7a7a\u9593\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002RabbitMQ\u30b5\u30fc\u30d3\u30b9\u304c\u30d6\u30ed\u30fc\u30ab\u30fc\u3068\u306a\u308a\u307e\u3059\u3002</p> <ol> <li> <p>\u524d\u306e\u4e8c\u3064\u306e\u30d5\u30a1\u30a4\u30eb\u3068\u540c\u69d8\u306b\u3001\u8a2d\u5b9a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b<code>lagoon-remote-values.yml</code>\u3092\u4f5c\u6210\u3057\u3001\u5024\u3092\u66f4\u65b0\u3057\u307e\u3059\u3002</p> <ul> <li>rabbitMQPassword</li> </ul> RabbitMQ password\u3092\u53d6\u5f97<pre><code>kubectl -n lagoon-core get secret lagoon-core-broker -o jsonpath=\"{.data.RABBITMQ_PASSWORD}\" | base64 --decode\n</code></pre> <ul> <li>rabbitMQHostname</li> </ul> lagoon-remote-values.yml<pre><code>lagoon-core-broker.lagoon-core.svc.local\n</code></pre> <ul> <li>taskSSHHost</li> </ul> SSH Host\u3092\u66f4\u65b0<pre><code>kubectl get service lagoon-core-broker-amqp-ext \\\n-o custom-columns=\"NAME:.metadata.name,IP ADDRESS:.status.loadBalancer.ingress[*].ip,HOSTNAME:.status.loadBalancer.ingress[*].hostname\"\n</code></pre> <ul> <li>harbor-password</li> </ul> Harbor secret\u3092\u53d6\u5f97<pre><code>kubectl -n harbor get secret harbor-harbor-core -o jsonpath=\"{.data.HARBOR_ADMIN_PASSWORD}\" | base64 --decode\n</code></pre> </li> <li> <p>Harbor\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u30b9\u30c6\u30c3\u30d7\u304b\u3089Harbor\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> lagoon-remote-values.yml<pre><code>lagoon-build-deploy:\nenabled: true\nextraArgs:\n- \"--enable-harbor=true\"\n- \"--harbor-url=https://harbor.lagoon.example.com\"\n- \"--harbor-api=https://harbor.lagoon.example.com/api/\"\n- \"--harbor-username=admin\"\n- \"--harbor-password=&lt;from harbor-harbor-core secret&gt;\"\nrabbitMQUsername: lagoon\nrabbitMQPassword: &lt;from lagoon-core-broker secret&gt;\nrabbitMQHostname: lagoon-core-broker.lagoon-core.svc.cluster.local\nlagoonTargetName: &lt;name of lagoon remote, can be anything&gt;\ntaskSSHHost: &lt;IP of ssh service loadbalancer&gt;\ntaskSSHPort: \"22\"\ntaskAPIHost: \"api.lagoon.example.com\"\ndbaas-operator:\nenabled: true\nmariadbProviders:\nproduction:\nenvironment: production\nhostname: 172.17.0.1.nip.io\nreadReplicaHostnames:\n- 172.17.0.1.nip.io\npassword: password\nport: '3306'\nuser: root\ndevelopment:\nenvironment: development\nhostname: 172.17.0.1.nip.io\nreadReplicaHostnames:\n- 172.17.0.1.nip.io\npassword: password\nport: '3306'\nuser: root\n</code></pre> </li> <li> <p>ssh-core service account</p> </li> <li> <p>Lagoon Remote\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b:</p> Lagoon remote\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb<pre><code>helm upgrade --install --create-namespace \\\n--namespace lagoon \\\n-f lagoon-remote-values.yml \\\nlagoon-remote lagoon/lagoon-remote\n</code></pre> </li> </ol>"},{"location":"ja/installing-lagoon/lagoon-backups/","title":"Lagoon\u30d0\u30c3\u30af\u30a2\u30c3\u30d7","text":"<p>Lagoon\u306f\u3001K8up\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059:https://k8up.io\u3002Lagoon\u306fK8up\u3068\u5bc6\u63a5\u306b\u7d71\u5408\u3055\u308c\u3066\u3044\u308b\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u3080\u3057\u308d\u3001Lagoon\u306f\u305d\u306e\u30ea\u30bd\u30fc\u30b9\u3092K8up\u304c\u81ea\u52d5\u7684\u306b\u767a\u898b\u3057\u3066\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3067\u304d\u308b\u3088\u3046\u306b\u4f5c\u6210\u3067\u304d\u307e\u3059\u3002</p> <p>Lagoon\u306fK8up 1.x\u3068\u5e83\u7bc4\u306b\u30c6\u30b9\u30c8\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u307e\u30602.x\u3068\u306f\u4e92\u63db\u6027\u304c\u3042\u308a\u307e\u305b\u3093\u30021.1.0\u30c1\u30e3\u30fc\u30c8\u30d0\u30fc\u30b8\u30e7\u30f3(\u30a2\u30d7\u30ea\u30d0\u30fc\u30b8\u30e7\u30f3v1.2.0)\u306e\u4f7f\u7528\u3092\u63a8\u5968\u3057\u307e\u3059\u3002</p> <ol> <li> <p>\u30dd\u30ea\u30b7\u30fc\u3092\u6301\u3064\u65b0\u3057\u3044AWS\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> example K8up IAM user<pre><code>{\n\"Version\":\"2012-10-17\",\n\"Statement\":[\n{\n\"Sid\":\"VisualEditor0\",\n\"Effect\":\"Allow\",\n\"Action\":[\n\"s3:ListAllMyBuckets\",\n\"s3:CreateBucket\",\n\"s3:GetBucketLocation\"\n],\n\"Resource\":\"*\"\n},\n{\n\"Sid\":\"VisualEditor1\",\n\"Effect\":\"Allow\",\n\"Action\":\"s3:ListBucket\",\n\"Resource\":\"arn:aws:s3:::baas-*\"\n},\n{\n\"Sid\":\"VisualEditor2\",\n\"Effect\":\"Allow\",\n\"Action\":[\n\"s3:PutObject\",\n\"s3:GetObject\",\n\"s3:AbortMultipartUpload\",\n\"s3:DeleteObject\",\n\"s3:ListMultipartUploadParts\"\n],\n\"Resource\":\"arn:aws:s3:::baas-*/*\"\n}\n]\n}\n</code></pre> </li> <li> <p>\u3042\u306a\u305f\u306e\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u306b\u5408\u308f\u305b\u3066<code>k8up-values.yml</code>\u3092\u4f5c\u6210\u3057\u307e\u3059:</p> k8up-values.yml<pre><code>k8up:\nenvVars:\n- name: BACKUP_GLOBALS3ENDPOINT\nvalue: 'https://s3.eu-west-1.amazonaws.com'\n- name: BACKUP_GLOBALS3BUCKET\nvalue: ''\n- name: BACKUP_GLOBALKEEPJOBS\nvalue: '1'\n- name: BACKUP_GLOBALSTATSURL\nvalue: 'https://backup.lagoon.example.com'\n- name: BACKUP_GLOBALACCESSKEYID\nvalue: ''\n- name: BACKUP_GLOBALSECRETACCESSKEY\nvalue: ''\n- name: BACKUP_BACKOFFLIMIT\nvalue: '2'\n- name: BACKUP_GLOBALRESTORES3BUCKET\nvalue: ''\n- name: BACKUP_GLOBALRESTORES3ENDPOINT\nvalue: 'https://s3.eu-west-1.amazonaws.com'\n- name: BACKUP_GLOBALRESTORES3ACCESSKEYID\nvalue: ''\n- name: BACKUP_GLOBALRESTORES3SECRETACCESSKEY\nvalue: ''\ntimezone: Europe/Zurich\n</code></pre> </li> <li> <p>K8up\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb:</p> K8up\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u30b9\u30c6\u30c3\u30d71<pre><code>helm repo add appuio https://charts.appuio.ch\n</code></pre> K8up\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u30b9\u30c6\u30c3\u30d7 2<pre><code>kubectl apply -f https://github.com/vshn/k8up/releases/download/v1.2.0/k8up-crd.yaml\n</code></pre> K8up\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b9\u30c6\u30c3\u30d73<pre><code>helm upgrade --install --create-namespace \\\n--namespace k8up \\\n-f k8up-values.yaml \\\n--version 1.1.0 \\\nk8up appuio/k8up\n</code></pre> </li> <li> <p><code>lagoon-core-values.yml</code>\u3092\u66f4\u65b0\u3057\u307e\u3059:</p> lagoon-core-values.yml<pre><code>s3BAASAccessKeyID: &lt;&lt;Access Key ID for restore bucket&gt;&gt;\ns3BAASSecretAccessKey: &lt;&lt;Access Key Secret for restore bucket&gt;&gt;\n</code></pre> </li> <li> <p><code>lagoon-core</code>\u3092\u518d\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002</p> </li> </ol>"},{"location":"ja/installing-lagoon/lagoon-cli/","title":"Lagoon CLI\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<ol> <li>\u3042\u306a\u305f\u306e\u30aa\u30da\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u30b7\u30b9\u30c6\u30e0\u306b\u5bfe\u5fdc\u3059\u308b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u3001https://github.com/uselagoon/lagoon-cli#install\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002macOS\u3068Linux\u3067\u306f\u3001Homebrew\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002<ol> <li><code>brew tap uselagoon/lagoon-cli</code></li> <li><code>brew install lagoon</code></li> </ol> </li> <li> <p>CLI\u306fLagoon\u3068\u3069\u306e\u3088\u3046\u306b\u901a\u4fe1\u3059\u308b\u304b\u3092\u77e5\u308b\u5fc5\u8981\u304c\u3042\u308b\u305f\u3081\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059:</p> Lagoon config<pre><code>    lagoon config add \\\n--graphql https://YOUR-API-URL/graphql \\\n--ui https://YOUR-UI-URL \\\n--hostname YOUR.SSH.IP \\\n--lagoon YOUR-LAGOON-NAME \\\n--port 22\n</code></pre> </li> <li> <p>SSH\u30ad\u30fc\u3067\u8a8d\u8a3c\u3057\u3066Lagoon\u306b\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\u3002</p> <ol> <li>Lagoon UI(URL\u306f<code>values.yml</code>\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059)\u306b\u79fb\u52d5\u3057\u3001\u8a2d\u5b9a\u306b\u9032\u307f\u307e\u3059\u3002</li> <li>\u516c\u958bSSH\u30ad\u30fc\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</li> <li> <p>amazee.io\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u3092\u4f7f\u7528\u3057\u3088\u3046\u3068\u3059\u308b\u306e\u3092\u9632\u3050\u305f\u3081\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306eLagoon\u3092_\u3042\u306a\u305f\u306e_ Lagoon\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059:</p> Lagoon config<pre><code>    lagoon config default --lagoon &lt;YOUR-LAGOON-NAME&gt;\n</code></pre> </li> </ol> </li> <li> <p><code>lagoon login</code>\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002Lagoon\u306fSSH\u306b\u63a5\u7d9a\u3057\u3001\u516c\u958b/\u79d8\u5bc6\u30ad\u30fc\u30da\u30a2\u306b\u5bfe\u3057\u3066\u8a8d\u8a3c\u3092\u884c\u3044\u3001\u30e6\u30fc\u30b6\u30fc\u540d\u306e\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002</p> </li> <li> <p><code>lagoon whoami</code>\u3092\u901a\u3058\u3066\u691c\u8a3c\u3057\u307e\u3059\u3002\u305d\u308c\u304c \u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u307e\u3059\u3002</p> </li> </ol> <p>\u60c5\u5831</p> <p>\u4e00\u822c\u7684\u306b\u306fLagoon\u7ba1\u7406\u8005\u30ed\u30fc\u30eb\u306e\u4f7f\u7528\u3092\u63a8\u5968\u3057\u3066\u3044\u307e\u305b\u3093\u304c\u3001\u6700\u521d\u306b\u59cb\u3081\u308b\u305f\u3081\u306b\u306f\u7ba1\u7406\u8005\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u7406\u60f3\u7684\u306b\u306f\u3001\u7ba1\u7406\u8005\u3067\u306f_\u306a\u3044_\u5225\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u3059\u3050\u306b\u4f5c\u6210\u3057\u3066\u4f5c\u696d\u3092\u884c\u3044\u307e\u3059\u3002</p>"},{"location":"ja/installing-lagoon/lagoon-core/","title":"Lagoon Core\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":""},{"location":"ja/installing-lagoon/lagoon-core/#install-the-helm-chart","title":"Helm\u30c1\u30e3\u30fc\u30c8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<ol> <li> <p>Lagoon Charts\u30ea\u30dd\u30b8\u30c8\u30ea\u3092Helm\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u8ffd\u52a0\u3057\u307e\u3059:</p> Lagoon Charts\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8ffd\u52a0<pre><code>helm repo add lagoon https://uselagoon.github.io/lagoon-charts/\n</code></pre> </li> <li> <p>\u4f5c\u6210\u3059\u308b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002<code>values.yml</code>\u30d5\u30a1\u30a4\u30eb\u3092\u53c2\u7167\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3067\u3053\u306e\u30d1\u30b9\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> </li> <li>\u4f5c\u6210\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b<code>values.yml</code>\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8URL\u3092\u66f4\u65b0\u3057\u307e\u3059(\u305d\u308c\u3089\u3092<code>api.lagoon.example.com</code>\u304b\u3089\u3042\u306a\u305f\u306e\u5024\u306b\u5909\u66f4\u3057\u307e\u3059)\u3002    \u4f8b: https://github.com/uselagoon/lagoon-charts/blob/main/charts/lagoon-core/ci/linter-values.yaml</li> <li> <p>\u6b21\u306b\u3001<code>values.yml</code>\u3092\u6307\u5b9a\u3057\u3066<code>helm upgrade --install</code>\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059:</p> values.yml\u3092\u4f7f\u7528\u3057\u3066Helm\u3092\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9<pre><code>helm upgrade --install --create-namespace --namespace lagoon-core -f values.yml lagoon-core lagoon/lagoon-core`\n</code></pre> </li> <li> <p>Lagoon Core\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3057\u305f\uff01</p> </li> </ol> <p>\u8b66\u544a</p> <p>\u6642\u3005\u3001Docker Hub\u306e\u30d7\u30eb\u5236\u9650\u306b\u906d\u9047\u3057\u307e\u3059\u3002\u3053\u308c\u304c\u7d9a\u304f\u5834\u5408\u306f\u3001\u79c1\u305f\u3061\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u4ed6\u306e\u5834\u6240\u306b\u79fb\u52d5\u3059\u308b\u3053\u3068\u3092\u691c\u8a0e\u3057\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/installing-lagoon/lagoon-core/#configure-keycloak","title":"Keycloak \u3092\u69cb\u6210\u3059\u308b","text":"<p>Keycloak \u306e <code>values.yml</code> \u3067\u5b9a\u7fa9\u3057\u305f URL \u3067 Keycloak \u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306b\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\u3002</p> <ol> <li>\u300c\u7ba1\u7406\u30b3\u30f3\u30bd\u30fc\u30eb\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059</li> <li>\u30e6\u30fc\u30b6\u30fc\u540d: <code>admin</code></li> <li>\u30d1\u30b9\u30ef\u30fc\u30c9: <code>lagoon-core-keycloak</code> \u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3001\u30ad\u30fc\u5024 <code>KEYCLOAK_ADMIN_PASSWORD</code> \u3092\u4f7f\u7528\u3057\u307e\u3059</li> <li>\u6b21\u306e\u3088\u3046\u306b\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u53d6\u5f97\u3057\u307e\u3059: \u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u53d6\u5f97<pre><code>kubectl -n lagoon-core get secret lagoon-core-keycloak -o jsonpath=\"{.data.KEYCLOAK_ADMIN_PASSWORD}\" | base64 --decode\n</code></pre></li> <li> <p>\u53f3\u4e0a\u306e \u30e6\u30fc\u30b6\u30fc \u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p>1. \u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u7ba1\u7406 \u306b\u79fb\u52d5\u3057\u307e\u3059\u3002</p> <p>2. \u4f5c\u6210\u3057\u305f\u7ba1\u7406\u8005\u30a2\u30ab\u30a6\u30f3\u30c8\u306e \u30e1\u30fc\u30eb \u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> <p>3. \u4fdd\u5b58\u3057\u307e\u3059\u3002</p> </li> <li> <p>Realm Lagoon -&gt; Realm Settings -&gt; Email \u306b\u79fb\u52d5\u3057\u307e\u3059\u3002</p> <p>1. Keycloak \u306e\u30e1\u30fc\u30eb \u30b5\u30fc\u30d0\u30fc\u3092\u8a2d\u5b9a\u3057\u3001\u300cTest connection\u300d\u30dc\u30bf\u30f3\u3067\u63a5\u7d9a\u3092\u30c6\u30b9\u30c8\u3057\u307e\u3059\u3002</p> </li> <li> <p>Realm Lagoon -&gt; Realm Settings -&gt; Login \u306b\u79fb\u52d5\u3057\u307e\u3059\u3002</p> <p>1. \u300cForgot Password\u300d\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002</p> <p>2. \u4fdd\u5b58\u3057\u307e\u3059\u3002</p> </li> </ol>"},{"location":"ja/installing-lagoon/lagoon-core/#log-in-to-the-ui","title":"UI \u306b\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002","text":"<p>\u3053\u308c\u3067\u3001UI \u306e <code>values.yml</code> \u3067\u5b9a\u7fa9\u3057\u305f URL \u3067 Lagoon UI \u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u306f\u305a\u3067\u3059\u3002</p> <ol> <li>\u30e6\u30fc\u30b6\u30fc\u540d: <code>lagoonadmin</code></li> <li>\u30b7\u30fc\u30af\u30ec\u30c3\u30c8: <code>lagoon-core-keycloak</code> \u30b7\u30fc\u30af\u30ec\u30c3\u30c8 \u30ad\u30fc\u5024: <code>LAGOON-CORE-KEYCLOAK</code> \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002</li> <li>\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002     \u79d8\u5bc6\u3092\u53d6\u5f97\u3059\u308b<pre><code>    kubectl -n lagoon-core get secret lagoon-core-keycloak -o jsonpath=\"{.data.KEYCLOAK_LAGOON_ADMIN_PASSWORD}\" | base64 --decode\n</code></pre></li> </ol>"},{"location":"ja/installing-lagoon/lagoon-files/","title":"Lagoon\u30d5\u30a1\u30a4\u30eb","text":"<p>Lagoon\u30d5\u30a1\u30a4\u30eb\u306f\u3001\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306a\u3069\u306e\u30bf\u30b9\u30af\u306e\u30d5\u30a1\u30a4\u30eb\u51fa\u529b\u3092\u4fdd\u5b58\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u3001S3\u4e92\u63db\u30b9\u30c8\u30ec\u30fc\u30b8\u306b\u30db\u30b9\u30c8\u3067\u304d\u307e\u3059\u3002</p> <ol> <li> <p>\u30dd\u30ea\u30b7\u30fc\u3092\u6301\u3064\u65b0\u3057\u3044AWS\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059:</p> \u4f8b:\u30d5\u30a1\u30a4\u30ebIAM\u30e6\u30fc\u30b6\u30fc<pre><code>{\n\"Version\":\"2012-10-17\",\n\"Statement\":[\n{\n\"Effect\":\"Allow\",\n\"Action\":[\n\"s3:ListBucket\",\n\"s3:GetBucketLocation\",\n\"s3:ListBucketMultipartUploads\"\n],\n\"Resource\":\"arn:aws:s3:::S3_BUCKET_NAME\"\n},\n{\n\"Effect\":\"Allow\",\n\"Action\":[\n\"s3:PutObject\",\n\"s3:GetObject\",\n\"s3:DeleteObject\",\n\"s3:ListMultipartUploadParts\",\n\"s3:AbortMultipartUpload\"\n],\n\"Resource\":\"arn:aws:s3:::S3_BUCKET_NAME/*\"\n}\n]\n}\n</code></pre> </li> <li> <p><code>lagoon-core-values.yml</code>\u3092\u66f4\u65b0\u3057\u307e\u3059:</p> lagoon-core-values.yml<pre><code>s3FilesAccessKeyID: &lt;&lt;\u30a2\u30af\u30bb\u30b9\u30ad\u30fcID&gt;&gt;\ns3FilesBucket: &lt;&lt;Lagoon\u30d5\u30a1\u30a4\u30eb\u7528\u306e\u30d0\u30b1\u30c3\u30c8\u540d&gt;&gt;\ns3FilesHost: &lt;&lt;S3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8(\u4f8b:\"https://s3.eu-west-1.amazonaws.com\")&gt;&gt;\ns3FilesSecretAccessKey: &lt;&lt;\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\u30b7\u30fc\u30af\u30ec\u30c3\u30c8&gt;&gt;\ns3FilesRegion: &lt;&lt;S3\u30ea\u30fc\u30b8\u30e7\u30f3&gt;&gt;\n</code></pre> </li> <li> <p>\u3082\u3057\u3082\u3042\u306a\u305f\u304c <code>lagoon-core</code>\u306e\u524d\u306b<code>ingress-nginx</code>\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u63d0\u6848\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u3088\u308a\u5927\u304d\u306a\u30d5\u30a1\u30a4\u30eb\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059:</p> lagoon-core-values.yml<pre><code>controller:\nconfig:\nclient-body-timeout: '600' # \u6700\u5927600\u79d2\u306e\u30d5\u30a1\u30a4\u30eb\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\nproxy-send-timeout: '1800' # \u6700\u592730\u5206\u306e\u63a5\u7d9a - \u30a6\u30a7\u30d6\u30bd\u30b1\u30c3\u30c8\u306b\u5fc5\u8981\nproxy-read-timeout: '1800' # \u6700\u592730\u5206\u306e\u63a5\u7d9a - \u30a6\u30a7\u30d6\u30bd\u30b1\u30c3\u30c8\u306b\u5fc5\u8981\nproxy-body-size: 1024m # 1GB\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\nproxy-buffer-size: 64k # \u5927\u304d\u306a\u30d0\u30c3\u30d5\u30a1\n</code></pre> </li> </ol>"},{"location":"ja/installing-lagoon/lagoon-logging/","title":"Lagoon\u30ed\u30ae\u30f3\u30b0","text":"<p>Lagoon\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3001\u30b3\u30f3\u30c6\u30ca\u3001\u30eb\u30fc\u30bf\u30fc\u306e\u30ed\u30b0\u3092\u4fdd\u5b58\u3059\u308b\u305f\u3081\u306bOpenSearch\u3068\u7d71\u5408\u3057\u307e\u3059\u3002Lagoon\u30ed\u30ae\u30f3\u30b0\u306f\u3001Lagoon\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304b\u3089\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3001\u30eb\u30fc\u30bf\u30fc\u3001\u30b3\u30f3\u30c6\u30ca\u306e\u30ed\u30b0\u3092\u53ce\u96c6\u3057\u3001\u305d\u308c\u3089\u3092\u30ed\u30b0\u96c6\u7d04\u5668\u306b\u9001\u4fe1\u3057\u307e\u3059\u3002\u305d\u308c\u306f\u5404<code>lagoon-remote</code> \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>\u3055\u3089\u306b\u3001\u305d\u308c\u306f<code>lagoon-core</code>\u30b5\u30fc\u30d3\u30b9\u304b\u3089\u30ed\u30b0\u3092\u53ce\u96c6\u3059\u308b\u305f\u3081\u306b<code>lagoon-core</code>\u30af\u30e9\u30b9\u30bf\u30fc\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3079\u304d\u3067\u3059\u3002\u3053\u308c\u306f<code>LagoonLogs</code>\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p>\u30ed\u30ae\u30f3\u30b0\u6982\u8981:Lucid Chart</p> <p>\u53c2\u7167:Logging\u3002</p> <p>Lagoon\u30ed\u30ae\u30f3\u30b0\u306b\u3064\u3044\u3066\u8a73\u3057\u304f\u306f\u3053\u3061\u3089\u3092\u3054\u89a7\u304f\u3060\u3055\u3044:https://github.com/uselagoon/lagoon-charts/tree/main/charts/lagoon-logging</p> <ol> <li> <p><code>lagoon-logging-values.yaml</code>\u3092\u4f5c\u6210\u3057\u307e\u3059:</p> lagoon-logging-values.yaml<pre><code>tls:\ncaCert: |\n&lt;&lt; content of ca.pem from Logs-Concentrator&gt;&gt;\nclientCert: |\n&lt;&lt; content of client.pem from Logs-Concentrator&gt;&gt;\nclientKey: |\n&lt;&lt; content of client-key.pem from Logs-Concentrator&gt;&gt;\nforward:\nusername: &lt;&lt;Username for Lagoon Remote 1&gt;&gt;\npassword: &lt;&lt;Password for Lagoon Remote 1&gt;&gt;\nhost: &lt;&lt;ExternalIP of Logs-Concentrator Service LoadBalancer&gt;&gt;\nhostName: &lt;&lt;Hostname in Server Cert of Logs-Concentrator&gt;&gt;\nhostPort: '24224'\nselfHostname: &lt;&lt;Hostname in Client Cert of Logs-Concentrator&gt;&gt;\nsharedKey: &lt;&lt;Generated ForwardSharedKey of Logs-Concentrator&gt;&gt;\ntlsVerifyHostname: false\nclusterName: &lt;&lt;Short Cluster Identifier&gt;&gt;\nlogsDispatcher:\nserviceMonitor:\nenabled: false\nlogging-operator:\nmonitoring:\nserviceMonitor:\nenabled: false\nlagoonLogs:\nenabled: true\nrabbitMQHost: lagoon-core-broker.lagoon-core.svc.cluster.local\nrabbitMQUser: lagoon\nrabbitMQPassword: &lt;&lt;RabbitMQ Lagoon Password&gt;&gt;\nexcludeNamespaces: {}\n</code></pre> </li> <li> <p><code>lagoon-logging</code>\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059:</p> Install lagoon-logging<pre><code>helm repo add banzaicloud-stable https://kubernetes-charts.banzaicloud.com\n\nhelm upgrade --install --create-namespace \\\n--namespace lagoon-logging \\\n-f lagoon-logging-values.yaml \\\nlagoon-logging lagoon/lagoon-logging\n</code></pre> </li> </ol>"},{"location":"ja/installing-lagoon/lagoon-logging/#logging-nginx-in-gress","title":"Logging NGINX In gress\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9","text":"<p><code>lagoon-logging</code>\u5185\u306e<code>ingress-nginx</code>\u304b\u3089\u30ed\u30b0\u304c\u5fc5\u8981\u306a\u5834\u5408:</p> <ol> <li>ingress\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306f<code>ingress-nginx</code>\u3068\u3044\u3046\u540d\u524d\u7a7a\u9593\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093</li> <li> <p>\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u3092<code>ingress-nginx</code>\u306b\u8ffd\u52a0\u3057\u307e\u3059:</p> ingress-nginx log-format-upstream<pre><code>controller:\nconfig:\nlog-format-upstream: &gt;-\n{\n\"time\": \"$time_iso8601\",\n\"remote_addr\": \"$remote_addr\",\n\"x-forwarded-for\": \"$http_x_forwarded_for\",\n\"true-client-ip\": \"$http_true_client_ip\",\n\"req_id\": \"$req_id\",\n\"remote_user\": \"$remote_user\",\n\"bytes_sent\": $bytes_sent,\n\"request_time\": $request_time,\n\"status\": \"$status\",\n\"host\": \"$host\",\n\"request_proto\": \"$server_protocol\",\n\"request_uri\": \"$uri\",\n\"request_query\": \"$args\",\n\"request_length\": $request_length,\n\"request_time\": $request_time,\n\"request_method\": \"$request_method\",\n\"http_referer\": \"$http_referer\",\n\"http_user_agent\": \"$http_user_agent\",\n\"namespace\": \"$namespace\",\n\"ingress_name\": \"$ingress_name\",\n\"service_name\": \"$service_name\",\n\"service_port\": \"$service_port\"\n}\n</code></pre> </li> <li> <p>\u3042\u306a\u305f\u306e\u30ed\u30b0\u304c\u6d41\u308c\u59cb\u3081\u308b\u306f\u305a\u3067\u3059\uff01</p> </li> </ol>"},{"location":"ja/installing-lagoon/logs-concentrator/","title":"\u30ed\u30b0\u96c6\u7d04\u5668","text":"<p>\u30ed\u30b0\u96c6\u7d04\u5668\u306f\u3001Lagoon\u30af\u30e9\u30b9\u30bf\u304b\u3089\u9001\u4fe1\u3055\u308c\u308b\u30ed\u30b0\u3092\u53ce\u96c6\u3057\u3001\u305d\u308c\u3089\u306b\u8ffd\u52a0\u306e\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u4ed8\u52a0\u3057\u3066\u304b\u3089Elasticsearch\u306b\u633f\u5165\u3057\u307e\u3059\u3002</p> <ol> <li>ReadMe\u306b\u5f93\u3063\u3066\u8a3c\u660e\u66f8\u3092\u4f5c\u6210\u3057\u307e\u3059:https://github.com/uselagoon/lagoon-charts/tree/main/charts/lagoon-logs-concentrator</li> <li> <p><code>logs-concentrator-values.yml</code>\u3092\u4f5c\u6210\u3057\u307e\u3059:</p> logs-concentrator-values.yml<pre><code>tls:\ncaCert: |\n&lt;&lt;ca.pem\u306e\u5185\u5bb9&gt;&gt;\nserverCert: |\n&lt;&lt;server.pem\u306e\u5185\u5bb9\nserverKey: |\n&lt;&lt;server-key.pem\u306e\u5185\u5bb9&gt;&gt;\nelasticsearchHost: elasticsearch-opendistro-es-client-service.elasticsearch.svc.cluster.local\nelasticsearchAdminPassword: &lt;&lt;ElasticSearch\u7ba1\u7406\u8005\u30d1\u30b9\u30ef\u30fc\u30c9&gt;&gt;\nforwardSharedKey: &lt;&lt;\u30e9\u30f3\u30c0\u30e0\u306a32\u6587\u5b57\u306e\u30d1\u30b9\u30ef\u30fc\u30c9&gt;&gt;\nusers:\n- username: &lt;&lt;Lagoon\u30ea\u30e2\u30fc\u30c81\u306e\u30e6\u30fc\u30b6\u30fc\u540d&gt;&gt;\npassword: &lt;&lt;Lagoon\u30ea\u30e2\u30fc\u30c81\u306e\u30e9\u30f3\u30c0\u30e0\u30d1\u30b9\u30ef\u30fc\u30c9&gt;&gt;\nservice:\ntype: LoadBalancer\nserviceMonitor:\nenabled: false\n</code></pre> </li> <li> <p>\u30ed\u30b0\u96c6\u7d04\u5668\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059:</p> <p>Install logs-concentrator<pre><code>helm upgrade --install --create-namespace ```\n--namespace lagoon-logs-concentrator \\\n-f logs-concentrator-values.yaml \\\nlagoon-logs-concentrator lagoon/lagoon-logs-concentrator\n</code></pre> \u3053\u306e\u30c6\u30ad\u30b9\u30c8\u306f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u30b3\u30fc\u30c9\u3067\u3042\u308a\u3001\u7279\u5b9a\u306e\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u306b\u4f9d\u5b58\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u7ffb\u8a33\u306f\u9069\u7528\u3055\u308c\u307e\u305b\u3093\u3002</p> </li> </ol>"},{"location":"ja/installing-lagoon/opendistro/","title":"OpenDistro","text":"<p>OpenDistro\u30af\u30e9\u30b9\u30bf\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u306b\u306f\u3001Lagoon\u304c\u305d\u308c\u3068\u5b89\u5168\u306b\u901a\u4fe1\u3067\u304d\u308b\u3088\u3046\u306bTLS\u3068\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3044\u304f\u3064\u304b\u306eJSON\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059 - \u3053\u308c\u3089\u3092\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30d7\u30ed\u30bb\u30b9\u5168\u4f53\u3092\u901a\u3058\u3066\u4f5c\u6210\u3057\u3066\u304d\u305f\u5024\u306e\u30d5\u30a1\u30a4\u30eb\u3068\u540c\u3058\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u7f6e\u3044\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>OpenDistro Helm\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\u8a73\u7d30\u306fhttps://opendistro.github.io/for-elasticsearch-docs/docs/install/helm/\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/installing-lagoon/opendistro/#_1","title":"\u30ad\u30fc\u3068\u8a3c\u660e\u66f8\u306e\u4f5c\u6210","text":"<ol> <li>\u8a3c\u660e\u66f8\u306e\u751f\u6210</li> </ol> <p>\u6ce8\u610f:</p> <p>CFSSL\u306fCloudFlare\u306ePKI/TLS\u30b9\u30a4\u30b9\u30a2\u30fc\u30df\u30fc\u30ca\u30a4\u30d5\u3067\u3059\u3002\u3053\u308c\u306f\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30c4\u30fc\u30eb\u3067\u3042\u308a\u3001TLS\u8a3c\u660e\u66f8\u306e\u7f72\u540d\u3001\u691c\u8a3c\u3001\u30d0\u30f3\u30c9\u30eb\u5316\u3092\u884c\u3046HTTP API\u30b5\u30fc\u30d0\u3067\u3059\u3002\u30d3\u30eb\u30c9\u306b\u306fGo 1.12+\u304c\u5fc5\u8981\u3067\u3059\u3002</p> <p>1. CFSSL\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059: https://github.com/cloudflare/cfssl    2. CA\u3092\u751f\u6210\u3057\u307e\u3059\u3002\u6b21\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u5fc5\u8981\u3067\u3059:</p> ca-csr.json<pre><code>{\n\"CN\": \"ca.elasticsearch.svc.cluster.local\",\n\"hosts\": [\n\"ca.elasticsearch.svc.cluster.local\"\n],\n\"key\": {\n\"algo\": \"ecdsa\",\n\"size\": 256\n},\n\"ca\": {\n\"expiry\": \"87600h\"\n}\n}\n</code></pre> <ol> <li> <p>\u6b21\u306e2\u3064\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059 :</p> \u8a3c\u660e\u66f8\u306e\u751f\u6210<pre><code>cfssl gencert -initca ca-csr.json | cfssljson -bare ca -\nrm ca.csr\n</code></pre> <p><code>ca-key.pem</code>\u3068<code>ca.pem</code>\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u304c\u3042\u306a\u305f\u306eCA\u30ad\u30fc\u3068\u81ea\u5df1\u7f72\u540d\u8a3c\u660e\u66f8\u3067\u3059\u3002</p> </li> <li> <p>\u6b21\u306b\u3001\u30ce\u30fc\u30c9\u306e\u30d4\u30fc\u30ea\u30f3\u30b0\u8a3c\u660e\u66f8\u3092\u751f\u6210\u3057\u307e\u3059\u3002\u6b21\u306e2\u3064\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u5fc5\u8981\u3067\u3059:</p> ca-config.json<pre><code>{\n\"signing\": {\n\"default\": {\n\"expiry\": \"87600h\"\n},\n\"profiles\": {\n\"peer\": {\n\"expiry\": \"87600h\",\n\"usages\": [\n\"signing\",\n\"key encipherment\",\n\"server auth\",\n\"client auth\"\n]\n},\n\"client\": {\n\"expiry\": \"87600h\",\n\"usages\": [\n\"signing\",\n\"key encipherment\",\n\"client auth\"\n]\n}\n}\n}\n}\n</code></pre> node.json<pre><code>{\n\"hosts\": [\n\"node.elasticsearch.svc.cluster.local\"\n],\n\"CN\": \"node.elasticsearch.svc.cluster.local\",\n\"key\": {\n\"algo\": \"ecdsa\",\n\"size\": 256\n}\n}\n</code></pre> </li> <li> <p>\u6b21\u306e2\u3064\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059:</p> \u8a3c\u660e\u66f8\u30ad\u30fc\u306e\u751f\u6210<pre><code>cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=peer node.json | cfssljson -bare node\nrm node.csr\n</code></pre> <p><code>node.pem</code>\u3068<code>node-key.pem</code>\u304c\u5f97\u3089\u308c\u307e\u3059\u3002\u3053\u308c\u304cES\u30af\u30e9\u30b9\u30bf\u30fc\u306e\u30ce\u30fc\u30c9\u3067\u4f7f\u7528\u3055\u308c\u308b\u30d4\u30a2\u8a3c\u660e\u66f8\u306b\u306a\u308a\u307e\u3059\u3002</p> </li> <li> <p>\u6b21\u306b\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u30ad\u30fc\u3092Java\u304c\u30b5\u30dd\u30fc\u30c8\u3059\u308b\u5f62\u5f0f\u306b\u5909\u63db\u3057\u307e\u3059:</p> \u30ad\u30fc\u5f62\u5f0f\u306e\u5909\u63db<pre><code>openssl pkey -in node-key.pem -out node-key.pkcs8\n</code></pre> </li> <li> <p>\u6b21\u306b\u3001\u7ba1\u7406\u8005\u8a3c\u660e\u66f8\u3092\u751f\u6210\u3057\u307e\u3059\u3002\u6b21\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u5fc5\u8981\u3067\u3059:</p> admin.json<pre><code>{\n\"CN\": \"admin.elasticsearch.svc.cluster.local\",\n\"key\": {\n\"algo\": \"ecdsa\",\n\"size\": 256\n}\n}\n</code></pre> </li> <li> <p>\u6b21\u306e2\u3064\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059:</p> \u7ba1\u7406\u8005\u8a3c\u660e\u66f8\u30ad\u30fc\u306e\u751f\u6210<pre><code>cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=client admin.json | cfssljson -bare admin\nrm admin.csr\n</code></pre> <p><code>admin.pem</code>\u3068<code>admin-key.pem</code>\u304c\u5f97\u3089\u308c\u307e\u3059\u3002\u3053\u308c\u304copendistro-security\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u7ba1\u7406\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u308b\u8a3c\u660e\u66f8\u306b\u306a\u308a\u307e\u3059\u3002</p> </li> <li> <p>\u6b21\u306b\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u30ad\u30fc\u3092Java\u304c\u30b5\u30dd\u30fc\u30c8\u3059\u308b\u5f62\u5f0f\u306b\u5909\u63db\u3057\u307e\u3059:</p> \u30ad\u30fc\u5f62\u5f0f\u306e\u5909\u63db<pre><code>openssl pkey -in admin-key.pem -out admin-key.pkcs8\n</code></pre> </li> </ol>"},{"location":"ja/installing-lagoon/opendistro/#opendistro_1","title":"OpenDistro\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u30ad\u30fc\u3068\u8a3c\u660e\u66f8\u3092\u624b\u306b\u5165\u308c\u305f\u306e\u3067\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u7d9a\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <ol> <li> <p>\u30cf\u30c3\u30b7\u30e5\u5316\u3055\u308c\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u751f\u6210\u3057\u307e\u3059\u3002</p> <ol> <li><code>elasticsearch-secrets-values.yaml</code>\u306b\u306f2\u3064\u306e\u30cf\u30c3\u30b7\u30e5\u5316\u3055\u308c\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u5fc5\u8981\u3067\u3059\u3002\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u305d\u308c\u3089\u3092\u4f5c\u6210\u3057\u307e\u3059(2\u56de\u5b9f\u884c\u3057\u3001\u30e9\u30f3\u30c0\u30e0\u306a\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3001\u30d7\u30ec\u30fc\u30f3\u30c6\u30ad\u30b9\u30c8\u3068\u30cf\u30c3\u30b7\u30e5\u5316\u3055\u308c\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u4e21\u65b9\u3092\u4fdd\u5b58\u3057\u307e\u3059)\u3002</li> </ol> \u30cf\u30c3\u30b7\u30e5\u5316\u3055\u308c\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u751f\u6210<pre><code>docker run --rm -it docker.io/amazon/opendistro-for-elasticsearch:1.12.0 sh -c \"chmod +x /usr/share/elasticsearch/plugins/opendistro_security/tools/hash.sh; /usr/share/elasticsearch/plugins/opendistro_security/tools/hash.sh\"\n</code></pre> </li> <li> <p>secrets\u3092\u4f5c\u6210\u3057\u307e\u3059:</p> <ol> <li><code>elasticsearch-secrets-values.yaml</code>\u3092\u4f5c\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u306egist\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044:https://gist.github.com/Schnitzel/43f483dfe0b23ca0dddd939b12bb4b0b</li> </ol> </li> <li> <p>\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067secrets\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059:</p> secrets\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb<pre><code>helm repo add incubator https://charts.helm.sh/incubator`\nhelm upgrade --namespace elasticsearch --create-namespace --install elasticsearch-secrets incubator/raw --values elasticsearch-secrets-values.yaml `\n</code></pre> </li> <li> <p>\u3042\u306a\u305f\u306f\u5fc5\u8981\u3068\u3059\u308b\u3067\u3057\u3087\u3046 <code>elasticsearch-values.yaml</code>\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u4f8b\u3068\u3057\u3066\u3053\u306egist\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044:(\u3059\u3079\u3066\u306e&lt;\\&gt;\u306b\u5024\u3092\u57cb\u3081\u3066\u304f\u3060\u3055\u3044)https://gist.github.com/Schnitzel/1e386654b6abf75bf4d66a544db4aa6a <li> <p>Elasticsearch\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb:</p> Elasticsearch\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb<pre><code>helm upgrade --namespace elasticsearch --create-namespace --install elasticsearch opendistro-es-X.Y.Z.tgz --values elasticsearch-values.yaml\n</code></pre> </li> <li> <p>Elasticsearch\u5185\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u6b21\u306e\u3088\u3046\u306b\u8a2d\u5b9a:</p> \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u8a2d\u5b9a<pre><code>kubectl exec -n elasticsearch -it elasticsearch-opendistro-es-master-0 -- bash\nchmod +x /usr/share/elasticsearch/plugins/opendistro_security/tools/securityadmin.sh\n/usr/share/elasticsearch/plugins/opendistro_security/tools/securityadmin.sh -nhnv -cacert /usr/share/elasticsearch/config/admin-root-ca.pem -cert /usr/share/elasticsearch/config/admin-crt.pem -key /usr/share/elasticsearch/config/admin-key.pem -cd /usr/share/elasticsearch/plugins/opendistro_security/securityconfig/\n</code></pre> </li> <li> <p><code>lagoon-core-values.yaml</code>\u3092\u6b21\u306e\u3088\u3046\u306b\u66f4\u65b0:</p> lagoon-core-values.yaml<pre><code>elasticsearchURL: http://elasticsearch-opendistro-es-client-service.elasticsearch.svc.cluster.local:9200\nkibanaURL: https://&lt;&lt;Kibana Public URL&gt;&gt;\nlogsDBAdminPassword: \"&lt;&lt;PlainText Elasticsearch Admin Password&gt;&gt;\"\n</code></pre> </li> <li> <p>\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8Lagoon Core:</p> Rollout Lagoon Core<pre><code>helm upgrade --install --create-namespace --namespace lagoon-core -f values.yaml lagoon-core lagoon/lagoon-core\n</code></pre> </li> <li> <p>\u3059\u3079\u3066\u306eLagoon\u30b0\u30eb\u30fc\u30d7\u3092Opendistro Elasticsearch\u3068\u540c\u671f\u3055\u305b\u308b</p> Sync groups<pre><code>kubectl -n lagoon-core exec -it deploy/lagoon-core-api -- sh\nyarn run sync:opendistro-security\n</code></pre> </li>"},{"location":"ja/installing-lagoon/querying-graphql/","title":"GraphQL\u3067\u306e\u30af\u30a8\u30ea","text":"<ol> <li> <p>GraphQL\u30af\u30a8\u30ea\u306e\u9001\u53d7\u4fe1\u306b\u306f\u30a2\u30d7\u30ea\u304c\u5fc5\u8981\u3067\u3059\u3002GraphiQL\u3092\u63a8\u5968\u3057\u307e\u3059\u3002</p> <ol> <li>Homebrew\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u3001<code>brew install --cask graphiql</code>\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059\u3002</li> </ol> </li> <li> <p>Lagoon Core\u306bKubernetes\u30af\u30e9\u30b9\u30bf\u306b\u3064\u3044\u3066\u901a\u77e5\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002GraphQL\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306f\u6b21\u306e\u3068\u304a\u308a\u3067\u3059:<code>https://&lt;YOUR-API-URL&gt;/graphql</code></p> </li> <li> <p>HTTP\u30d8\u30c3\u30c0\u30fc\u3092\u7de8\u96c6\u306b\u79fb\u52d5\u3057\u3001\u30d8\u30c3\u30c0\u30fc\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> <ol> <li>\u30d8\u30c3\u30c0\u30fc\u540d:<code>Authorization</code></li> <li>\u5024:<code>Bearer YOUR-TOKEN-HERE</code></li> <li>\u30db\u30fc\u30e0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bLagoon CLI\u304c<code>.lagoon.yml</code>\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u30c8\u30fc\u30af\u30f3\u3092\u30b3\u30d4\u30fc\u3057\u3066\u3001\u3053\u3053\u3067\u306e\u5024\u306b\u4f7f\u7528\u3057\u307e\u3059\u3002</li> <li>\u4fdd\u5b58\u3002</li> </ol> </li> <li> <p>\u3053\u308c\u3067\u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3059\u308b\u6e96\u5099\u304c\u6574\u3044\u307e\u3057\u305f\u3002\u6b21\u306e\u30c6\u30b9\u30c8\u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3057\u3066\u3001\u3059\u3079\u3066\u304c\u6b63\u3057\u304f\u52d5\u4f5c\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059:</p> Get all projects<pre><code>query allProjects {allProjects {name } }\n</code></pre> </li> <li> <p>\u3053\u308c\u306b\u3088\u308a\u3001\u6b21\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u5f97\u3089\u308c\u308b\u306f\u305a\u3067\u3059:</p> API Response<pre><code>  {\n    \"data\": {\n      \"allProjects\": []\n    }\n  }\n</code></pre> <p>\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u306eGraphQL\u306b\u3064\u3044\u3066\u306e\u30da\u30fc\u30b8\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002</p> </li> <li> <p>\u6b63\u3057\u3044\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u5f97\u3089\u308c\u305f\u3089\u3001\u5909\u7570\u3092\u8ffd\u52a0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <ol> <li> <p>\u6b21\u306e\u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3057\u307e\u3059:</p> \u7a81\u7136\u5909\u7570\u3092\u8ffd\u52a0<pre><code>mutation addKubernetes {\naddKubernetes(input:\n{\nname: \"&lt;TARGET-NAME-FROM-REMOTE-VALUES.yml&gt;\",\nconsoleUrl: \"&lt;URL-OF-K8S-CLUSTER&gt;\",\ntoken: \"xxxxxx\u201d\nrouterPattern: \"${environment}.${project}.lagoon.example.com\"\n}){id}\n}\n</code></pre> <ol> <li><code>name</code>: <code>lagoon-remote-values.yml</code>\u304b\u3089\u53d6\u5f97</li> <li><code>consoleUrl</code>: Kubernetes\u30af\u30e9\u30b9\u30bf\u306eAPI\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3002<code>values.yml</code>\u304b\u3089\u53d6\u5f97</li> <li> <p><code>token</code>: <code>ssh-core</code>\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u7528\u306e\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97</p> \u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97<pre><code>kubectl -n lagoon get secret/lagoon-remote-ssh-core-token -o json | jq -r '.data.token | @base64d'\n</code></pre> </li> </ol> </li> </ol> </li> </ol> <p>\u60c5\u5831</p> <p>GraphQL\u306e\u8a8d\u8a3c\u30c8\u30fc\u30af\u30f3\u306e\u6709\u52b9\u671f\u9650\u306f\u975e\u5e38\u306b\u77ed\u3044\u305f\u3081\u3001\u65b0\u3057\u3044\u30c8\u30fc\u30af\u30f3\u3092\u751f\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002<code>lagoon login</code>\u3092\u5b9f\u884c\u3057\u3001\u65b0\u3057\u3044\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97\u3059\u308b\u305f\u3081\u306b<code>.lagoon.yml</code>\u30d5\u30a1\u30a4\u30eb\u3092cat\u30b3\u30de\u30f3\u30c9\u3067\u8868\u793a\u3057\u3001HTTP\u30d8\u30c3\u30c0\u30fc\u306e\u53e4\u3044\u30c8\u30fc\u30af\u30f3\u3092\u65b0\u3057\u3044\u3082\u306e\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/installing-lagoon/requirements/","title":"\u65e2\u5b58\u306eKubernetes\u30af\u30e9\u30b9\u30bf\u30fc\u3078\u306eLagoon\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":""},{"location":"ja/installing-lagoon/requirements/#requirements","title":"\u5fc5\u8981\u6761\u4ef6","text":"<ul> <li>Kubernetes 1.23+(Kubernetes 1.21\u3082\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u30011.23\u3092\u63a8\u5968\u3057\u307e\u3059)</li> <li>Helm\u3001Helm Charts\u3001kubectl\u306b\u7cbe\u901a\u3057\u3066\u3044\u308b\u3053\u3068\u3002</li> <li>Ingress\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3001\u6211\u3005\u306fingress-nginx\u3092\u63a8\u5968\u3057\u3001ingress-nginx\u540d\u524d\u7a7a\u9593\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068</li> <li>Cert manager(TLS\u7528) - letsencrypt\u306e\u4f7f\u7528\u3092\u5f37\u304f\u63a8\u5968\u3057\u307e\u3059</li> <li>StorageClasses(\u30c7\u30d5\u30a9\u30eb\u30c8\u3068\u3057\u3066RWO\u3001\u6c38\u7d9a\u30bf\u30a4\u30d7\u7528\u306bRWM)</li> </ul> <p>\u6ce8\u610f:</p> <p>\u3053\u308c\u306f\u591a\u304f\u306e\u30b9\u30c6\u30c3\u30d7\u304c\u5fc5\u8981\u3067\u3042\u308b\u3053\u3068\u3092\u8a8d\u8b58\u3057\u3066\u304a\u308a\u3001\u4eca\u5f8c\u3059\u3050\u306b\u884c\u3046\u4e88\u5b9a\u306e\u30ed\u30fc\u30c9\u30de\u30c3\u30d7\u306b\u306f\u3001\u3053\u306e\u30d7\u30ed\u30bb\u30b9\u306e\u30b9\u30c6\u30c3\u30d7\u6570\u3092\u6e1b\u3089\u3059\u3053\u3068\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/installing-lagoon/requirements/#specific-requirements-as-of-january-2023","title":"\u7279\u5b9a\u306e\u8981\u4ef6 (2023\u5e741\u6708\u73fe\u5728)","text":""},{"location":"ja/installing-lagoon/requirements/#kubernetes","title":"Kubernetes","text":"<p>Lagoon\u306fKubernetes\u30d0\u30fc\u30b8\u30e7\u30f31.21\u4ee5\u964d\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\u79c1\u305f\u3061\u306f\u7a4d\u6975\u7684\u306bKubernetes 1.24\u306b\u5bfe\u3057\u3066\u30c6\u30b9\u30c8\u3068\u958b\u767a\u3092\u884c\u3063\u3066\u304a\u308a\u3001\u5b9a\u671f\u7684\u306b1.21\u30011.22\u30011.25\u306b\u5bfe\u3057\u3066\u3082\u30c6\u30b9\u30c8\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002</p> <p>\u6b21\u306e\u5927\u898f\u6a21\u306a\u7834\u58ca\u7684\u5909\u66f4\u306fKubernetes 1.25\u306b\u3042\u308a\u3001\u6211\u3005\u306f\u3053\u308c\u3089\u3092\u4e8b\u524d\u306b\u628a\u63e1\u3059\u308b\u52aa\u529b\u3092\u3057\u307e\u3059\u304c\u3001\u3053\u308c\u306f\u6700\u4f4e\u30b5\u30dd\u30fc\u30c8\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u4e0a\u6607\u3092\u5fc5\u8981\u3068\u3059\u308b\u3067\u3057\u3087\u3046\u3002 Lagoon\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3002</p>"},{"location":"ja/installing-lagoon/requirements/#ingress-nginx","title":"ingress-nginx","text":"<p>Lagoon\u306f\u73fe\u5728\u3001\u5358\u4e00\u306e <code>ingress-nginx</code> \u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306e\u307f\u306b\u5bfe\u5fdc\u3057\u3066\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u904e\u53bb\u306b\u306f <code>IngressClass</code> \u306e\u5b9a\u7fa9\u306f\u5fc5\u8981\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002</p> <p>\u6700\u8fd1\u306e <code>ingress-nginx</code> \u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc(\u30d0\u30fc\u30b8\u30e7\u30f34\u4ee5\u964d\u3001Kubernetes 1.22\u304c\u5fc5\u8981)\u3092\u4f7f\u7528\u3059\u308b\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u4f7f\u7528\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002<code>ingress-nginx</code> \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u5f93\u3063\u3066\u304f\u3060\u3055\u3044\u3002</p> <ul> <li><code>nginx-ingress</code> \u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3068\u3057\u3066\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059 - Helm\u306e\u5024\u3067 <code>.controller.ingressClassResource.default: true</code> \u3092\u8a2d\u5b9a\u3057\u307e\u3059</li> <li><code>nginx-ingress</code> \u306f <code>IngressClass</code> \u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044Ingress\u3092\u76e3\u8996\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059 - Helm\u306e\u5024\u3067 <code>.controller.watchIngressWithoutClass: true</code> \u3092\u8a2d\u5b9a\u3057\u307e\u3059</li> </ul> <p>\u3053\u308c\u306b\u3088\u308a\u3001\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306f\u65b0\u3057\u3044Ingress\u3092 <code>IngressClass</code> \u3068\u3057\u3066\u81ea\u8eab\u3067\u4f5c\u6210\u3057\u3001<code>IngressClass</code> \u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u65e2\u5b58\u306eIngress\u3092\u51e6\u7406\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002</p> <p>\u4ed6\u306e\u8a2d\u5b9a\u3082\u53ef\u80fd\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u30c6\u30b9\u30c8\u306f\u884c\u308f\u308c\u3066\u3044\u307e\u305b\u3093\u3002</p>"},{"location":"ja/installing-lagoon/requirements/#harbor","title":"Harbor","text":"<p>\u73fe\u5728\u3001Harbor \u306e\u30d0\u30fc\u30b8\u30e7\u30f3 2.1 \u304a\u3088\u3073 2.2+ \u304c\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u30ed\u30dc\u30c3\u30c8 \u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u53d6\u5f97\u3059\u308b\u65b9\u6cd5\u306f 2.2 \u3067\u5909\u66f4\u3055\u308c\u3001Lagoon \u30ea\u30e2\u30fc\u30c8 \u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306f\u3053\u308c\u3089\u306e\u30c8\u30fc\u30af\u30f3\u3092\u51e6\u7406\u3067\u304d\u307e\u3059\u3002\u3064\u307e\u308a\u3001Harbor \u306f <code>lagoon-core</code> \u3067\u306f\u306a\u304f <code>lagoon-build-deploy</code> \u306e\u8cc7\u683c\u60c5\u5831\u3092\u4f7f\u7528\u3057\u3066\u69cb\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>2.6.0 \u4ee5\u964d\u306e Harbor \u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u3001Helm \u30c1\u30e3\u30fc\u30c8 1.10.0 \u4ee5\u4e0a\u3068\u3068\u3082\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002</p>"},{"location":"ja/installing-lagoon/requirements/#k8up-for-backups","title":"\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u7528\u306e k8up","text":"<p>Lagoon \u306b\u306f\u3001K8up \u30d0\u30c3\u30af\u30a2\u30c3\u30d7 \u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u306e\u69cb\u6210\u304c\u7d44\u307f\u8fbc\u307e\u308c\u3066\u3044\u307e\u3059\u3002 Lagoon \u3067\u306f\u3001\u4e8b\u524d\u30d0\u30c3\u30af\u30a2\u30c3\u30d7 \u30dd\u30c3\u30c9\u3001\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3001\u4fdd\u6301\u671f\u9593\u3092\u8a2d\u5b9a\u3057\u3001K8up \u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3068\u5fa9\u5143\u3092\u7ba1\u7406\u3067\u304d\u307e\u3059\u3002\u73fe\u5728\u3001Lagoon \u306f\u3001v2 \u4ee5\u964d\u306e\u540d\u524d\u7a7a\u9593\u306e\u5909\u66f4\u306b\u3088\u308a\u3001K8up \u306e 1.x \u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u307f\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u4fee\u6b63\u306b\u53d6\u308a\u7d44\u3093\u3067\u3044\u307e\u3059\u3002</p> <p>\u30d0\u30b0 k8up v2</p> <p>Lagoon \u306f\u3001\u540d\u524d\u7a7a\u9593\u306e\u5909\u66f4\u306b\u3088\u308a\u3001\u73fe\u5728 K8up v2 \u4ee5\u964d\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u305b\u3093 (\u3053\u3061\u3089)\u3002</p> <p>K8up \u30d0\u30fc\u30b8\u30e7\u30f3 1.2.0 \u3092 Helm Chart 1.1.0 \u3068\u3068\u3082\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002</p>"},{"location":"ja/installing-lagoon/requirements/#storage-provisioners","title":"\u30b9\u30c8\u30ec\u30fc\u30b8\u30d7\u30ed\u30d3\u30b8\u30e7\u30ca\u30fc","text":"<p>Lagoon \u306f\u3001\u307b\u3068\u3093\u3069\u306e\u30ef\u30fc\u30af\u30ed\u30fc\u30c9\u306b\u5bfe\u3057\u3066\u30c7\u30d5\u30a9\u30eb\u30c8\u306e <code>standard</code> <code>StorageClass</code> \u3092\u5229\u7528\u3057\u3001\u307b\u3068\u3093\u3069\u306e Kubernetes \u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306e\u5185\u90e8\u30d7\u30ed\u30d3\u30b8\u30e7\u30ca\u30fc\u3067\u5341\u5206\u3067\u3059\u3002\u3053\u308c\u306f\u3001\u53ef\u80fd\u306a\u5834\u5408\u306f\u52d5\u7684\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3068\u62e1\u5f35\u304c\u53ef\u80fd\u306b\u306a\u308b\u3088\u3046\u306b\u69cb\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>\u307e\u305f\u3001Lagoon\u3067\u306f\u3001\u6c38\u7d9a\u7684\u306a\u30dd\u30c3\u30c9\u30ec\u30d7\u30ea\u30ab(\u30ce\u30fc\u30c9\u9593)\u3092\u30b5\u30dd\u30fc\u30c8\u3059\u308b\u305f\u3081\u306b\u3001'bulk'\u3068\u547c\u3070\u308c\u308b<code>StorageClass</code>\u304c\u5229\u7528\u53ef\u80fd\u3067\u3042\u308b\u3053\u3068\u304c\u5fc5\u8981\u3067\u3059\u3002\u3053\u306e<code>StorageClass</code>\u306f<code>ReadWriteMany</code>(RWX)\u30a2\u30af\u30bb\u30b9\u30e2\u30fc\u30c9\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u304a\u308a\u3001\u53ef\u80fd\u306a\u9650\u308a\u52d5\u7684\u306a\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3068\u62e1\u5f35\u6027\u304c\u3042\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u8a73\u7d30\u306fhttps://kubernetes.io/docs/concepts/storage/persistent-volumes/#access-modes \u3092\u53c2\u7167\u3057\u3001\u4e92\u63db\u6027\u306e\u3042\u308b\u30c9\u30e9\u30a4\u30d0\u306e\u5b8c\u5168\u306a\u30ea\u30b9\u30c8\u306b\u3064\u3044\u3066\u306fproduction drivers list\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u73fe\u5728\u3001\u79c1\u305f\u3061\u306f(\u73fe\u5728\u306f\u5ec3\u6b62\u3055\u308c\u3066\u3044\u308b)EFS Provisioner\u306e\u6307\u793a\u3060\u3051\u3092\u542b\u3081\u3066\u3044\u307e\u3059\u3002\u672c\u756a\u306eEFS CSI driver\u306f\u3001120\u4ee5\u4e0a\u306ePVC\u3092\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3059\u308b\u969b\u306b\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u3002\u79c1\u305f\u3061\u306f\u30a2\u30c3\u30d7\u30b9\u30c8\u30ea\u30fc\u30e0\u3067\u306e\u53ef\u80fd\u306a\u4fee\u6b63\u3092\u3053\u3053\u3068\u3053\u3053\u3067\u5f85\u3063\u3066\u3044\u307e\u3059 - \u3057\u304b\u3057\u3001\u4ed6\u306e\u307b\u3068\u3093\u3069\u306e\u30d7\u30ed\u30d0\u30a4\u30c0\u306eCSI\u30c9\u30e9\u30a4\u30d0\u3082\u52d5\u4f5c\u3059\u308b\u306f\u305a\u3067\u3001NFS\u4e92\u63db\u306e\u30b5\u30fc\u30d0\u3068\u30d7\u30ed\u30d3\u30b8\u30e7\u30ca\u30fc\u3092\u5099\u3048\u305f\u8a2d\u5b9a\u3082\u540c\u69d8\u3067\u3059\u3002</p>"},{"location":"ja/installing-lagoon/requirements/#kubernetes_1","title":"\u3069\u308c\u304f\u3089\u3044 Kubernetes\u306e\u7d4c\u9a13/\u77e5\u8b58\u306f\u5fc5\u8981\u3067\u3059\u304b\uff1f","text":"<p>Lagoon\u306f\u3001\u975e\u5e38\u306b\u9ad8\u5ea6\u306aKubernetes\u3068\u30af\u30e9\u30a6\u30c9\u30cd\u30a4\u30c6\u30a3\u30d6\u306e\u6982\u5ff5\u3092\u4f7f\u7528\u3057\u3066\u304a\u308a\u3001Lagoon\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3084\u8a2d\u5b9a\u306b\u5b8c\u5168\u306a\u719f\u77e5\u304c\u5fc5\u8981\u306a\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u554f\u984c\u306e\u8a3a\u65ad\u3084\u8ca2\u732e\u306f\u3001\u5341\u5206\u306a\u77e5\u8b58\u304c\u306a\u3051\u308c\u3070\u96e3\u3057\u304f\u306a\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002</p> <p>\u6307\u6a19\u3068\u3057\u3066\u3001Certified Kubernetes Administrator\u306e\u30ab\u30ea\u30ad\u30e5\u30e9\u30e0\u306b\u5bfe\u3059\u308b\u5feb\u9069\u3055\u3092\u6700\u4f4e\u9650\u3068\u3057\u3066\u63d0\u6848\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/installing-lagoon/update-lagoon/","title":"\u66f4\u65b0","text":"<ol> <li> <p>Helm\u3092\u4f7f\u7528\u3057\u3066\u6700\u65b0\u306e\u30c1\u30e3\u30fc\u30c8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002</p> \u6700\u65b0\u306e\u30c1\u30e3\u30fc\u30c8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9<pre><code>helm repo update\n</code></pre> </li> <li> <p><code>helm diff</code>\u3092\u4f7f\u3063\u3066\u5909\u66f4\u70b9\u3092\u78ba\u8a8d\u3057\u307e\u3059(https://github.com/databus23/helm-diff)\u3002</p> \u5909\u66f4\u70b9\u3092\u78ba\u8a8d<pre><code>helm diff upgrade --install --create-namespace --namespace lagoon-core \\\n-f values.yml lagoon-core lagoon/lagoon-core\n</code></pre> </li> <li> <p>\u4efb\u610f\u306eHelm\u64cd\u4f5c\u524d\u306b\u3001Lagoon\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u53d6\u308a\u307e\u3059\u3002    \u307e\u305f\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u79fb\u884c\u30b9\u30af\u30ea\u30d7\u30c8\u304cinitContainers\u3067\u5b9f\u884c\u3055\u308c\u308b\u306e\u3092\u652f\u63f4\u3059\u308b\u305f\u3081\u306b\u3001API\u3092\u5358\u4e00\u306e\u30dd\u30c3\u30c9\u306b\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u3059\u308b\u3053\u3068\u3082\u304a\u52e7\u3081\u3057\u307e\u3059\u3002</p> </li> <li> <p>Helm\u3092\u4f7f\u7528\u3057\u3066\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> \u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3092\u5b9f\u884c<pre><code>helm upgrade --install --create-namespace --namespace lagoon-core \\\n-f values.yaml lagoon-core lagoon/lagoon-core\n</code></pre> </li> <li> <p>(Lagoon v2.11.0\u4ee5\u964d\u3001\u3053\u306e\u30b9\u30c6\u30c3\u30d7\u306f\u4e0d\u8981\u306b\u306a\u308a\u307e\u3057\u305f)     Lagoon Core\u3092\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3059\u308b\u5834\u5408\u3001\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u5f8c\u306e\u79fb\u884c\u3092\u884c\u3046\u305f\u3081\u306b<code>rerun_initdb.sh</code>\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> \u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c<pre><code>kubectl --namespace lagoon-core exec -it lagoon-core-api-db-0 -- \\\nsh -c /rerun_initdb.sh\n</code></pre> </li> <li> <p>API\u30dd\u30c3\u30c9\u3092\u5143\u306e\u6570\u306b\u623b\u3057\u3066\u30b9\u30b1\u30fc\u30eb\u30a2\u30c3\u30d7\u3057\u307e\u3059\u3002 \u30ec\u30d9\u30eb\u3002</p> </li> <li> <p>Lagoon Core\u3092\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3057\u3001OpenSearch\u306e\u30b0\u30eb\u30fc\u30d7/\u30e6\u30fc\u30b6\u30fc\u540c\u671f\u3092\u6709\u52b9\u306b\u3057\u3066\u3044\u308b\u5834\u5408\u3001OpenSearch\u306e\u30b0\u30eb\u30fc\u30d7\u3092\u66f4\u65b0\u3059\u308b\u305f\u3081\u306b<code>sync:opendistro-security</code>\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u306e\u30b3\u30de\u30f3\u30c9\u306f\u3001\u5168\u4f53\u306e\u30b0\u30eb\u30fc\u30d7\u69cb\u9020\u306e\u540c\u671f\u306b\u6642\u9593\u304c\u304b\u304b\u308b\u5834\u5408\u3001\u4e00\u5ea6\u306b1\u3064\u306e\u30b0\u30eb\u30fc\u30d7\u3092\u540c\u671f\u3059\u308b\u305f\u3081\u306b<code>GROUP_REGEX=&lt;group-to-sync</code>\u3067\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u3092\u4ed8\u3051\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002</p> \u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5b9f\u884c<pre><code>kubectl --namespace lagoon-core exec -it deploy/lagoon-core-api -- \\\nsh -c yarn sync:opendistro-security\n</code></pre> </li> </ol> <p>\u8ffd\u52a0\u306e\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u306b\u3064\u3044\u3066\u306f\u3001https://github.com/uselagoon/lagoon/releases\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/installing-lagoon/update-lagoon/#database-backups","title":"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7","text":"<p>Lagoon Core\u3092\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3059\u308b\u524d\u306b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3057\u305f\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u624b\u9806\u3067\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u4f5c\u6210\u3057\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u305d\u308c\u3089\u3092\u4f7f\u7528\u3057\u3066\u5fa9\u5143\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u5f8c\u3067\u305d\u308c\u3089\u3092\u524a\u9664\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/installing-lagoon/update-lagoon/#api-db","title":"API DB","text":"API DB\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7<pre><code>kubectl --namespace lagoon-core exec -it lagoon-core-api-db-0 -- \\\nsh -c 'mysqldump --max-allowed-packet=500M --events \\\n    --routines --quick --add-locks --no-autocommit \\\n    --single-transaction infrastructure | gzip -9 &gt; \\\n    /var/lib/mysql/backup/$(date +%Y-%m-%d_%H%M%S).infrastructure.sql.gz'\n</code></pre>"},{"location":"ja/installing-lagoon/update-lagoon/#keycloak-db","title":"Keycloak DB","text":"Keycloak DB\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7<pre><code>kubectl --namespace lagoon-core exec -it lagoon-core-keycloak-db-0 -- \\\nsh -c 'mysqldump --max-allowed-packet=500M --events \\\n    --routines --quick --add-locks --no-autocommit \\\n    --single-transaction keycloak | gzip -9 &gt; \\\n    /var/lib/mysql/backup/$(date +%Y-%m-%d_%H%M%S).keycloak.sql.gz'\n</code></pre>"},{"location":"ja/interacting/graphql-queries/#running-graphql-queries","title":"GraphQL\u30af\u30a8\u30ea\u306e\u5b9f\u884c","text":"<p>Lagoon\u3067\u306e\u76f4\u63a5\u7684\u306aAPI\u306e\u76f8\u4e92\u4f5c\u7528\u306f\u3001GraphQL\u3092\u7d4c\u7531\u3057\u3066\u884c\u308f\u308c\u307e\u3059\u3002</p> <p>API\u3068\u306e\u8a8d\u8a3c\u3092\u884c\u3046\u305f\u3081\u306b\u306f\u3001\u79c1\u305f\u3061\u304c\u7ba1\u7406\u8005\u3068\u3057\u3066GraphQL API\u3092\u4f7f\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308bJWT(JSON Web Token)\u304c\u5fc5\u8981\u3067\u3059\u3002\u3053\u306e\u30c8\u30fc\u30af\u30f3\u3092\u751f\u6210\u3059\u308b\u306b\u306f\u3001Kubernetes UI\u7d4c\u7531\u3001\u307e\u305f\u306fkubectl\u3092\u4f7f\u7528\u3057\u3066<code>storage-calculator</code>\u30dd\u30c3\u30c9\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u958b\u304d\u3001\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059:</p> JWT\u30c8\u30fc\u30af\u30f3\u306e\u751f\u6210<pre><code>./create_jwt.py\n</code></pre> <p>\u3053\u308c\u306b\u3088\u308aJWT\u30c8\u30fc\u30af\u30f3\u3067\u3042\u308b\u9577\u3044\u6587\u5b57\u5217\u304c\u8fd4\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u306f\u30af\u30a8\u30ea\u3092\u9001\u4fe1\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u3068\u306a\u308b\u306e\u3067\u3001\u30e1\u30e2\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u307e\u305f\u3001API\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306eURL\u3082\u5fc5\u8981\u3067\u3059\u3002\u3053\u308c\u306fKubernetes UI\u306e\"Ingresses\"\u306e\u4e0b\u3001\u307e\u305f\u306f\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u306ekubectl\u3092\u7d4c\u7531\u3057\u3066\u898b\u3064\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8URL\u3082\u5fc5\u8981\u306b\u306a\u308b\u306e\u3067\u3001\u30e1\u30e2\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>GraphQL\u30af\u30a8\u30ea\u3092\u4f5c\u6210\u3057\u9001\u4fe1\u3059\u308b\u306b\u306f\u3001\u81ea\u52d5\u88dc\u5b8c\u6a5f\u80fd\u306a\u3069\u3092\u5099\u3048\u305f\u30c7\u30b9\u30af\u30c8\u30c3\u30d7GraphQL\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3067\u3042\u308bGraphiQL.app\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002\u6b21\u306e\u624b\u9806\u306b\u9032\u3080\u306b\u306f\u3001\u3053\u306e\u30a2\u30d7\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u8d77\u52d5\u3057\u307e\u3059\u3002</p> <p>\"GraphQL Endpoint\"\u306e\u4e0b\u306b<code>/graphql</code>\u3092\u672b\u5c3e\u306b\u4ed8\u3051\u305fAPI\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8URL\u3092\u5165\u529b\u3057\u307e\u3059\u3002\u6b21\u306b\"Edit HTTP Headers\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u65b0\u3057\u3044\u30d8\u30c3\u30c0\u30fc\u3092\u8ffd\u52a0\u3057\u307e\u3059:</p> <ul> <li>\"\u30d8\u30c3\u30c0\u30fc\u540d\":<code>Authorization</code></li> <li>\"\u30d8\u30c3\u30c0\u30fc\u5024\":<code>Bearer [JWT\u30c8\u30fc\u30af\u30f3]</code> (\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044 JWT\u30c8\u30fc\u30af\u30f3\u306b\u30b9\u30da\u30fc\u30b9\u304c\u306a\u3044\u3053\u3068(\u30b9\u30da\u30fc\u30b9\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u3068\u52d5\u4f5c\u3057\u307e\u305b\u3093)</li> </ul> <p>ESC\u30ad\u30fc\u3092\u62bc\u3057\u3066HTTP\u30d8\u30c3\u30c0\u30fc\u30aa\u30fc\u30d0\u30fc\u30ec\u30a4\u3092\u9589\u3058\u3001\u6700\u521d\u306eGraphQL\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u4fe1\u3059\u308b\u6e96\u5099\u304c\u3067\u304d\u307e\u3057\u305f\uff01</p> <p></p> <p>\u3053\u308c\u3092\u5de6\u30d1\u30cd\u30eb\u306b\u5165\u529b\u3057\u307e\u3059</p> \u30af\u30a8\u30ea\u306e\u5b9f\u884c<pre><code>query allProjects{\nallProjects {\nname\n}\n}\n</code></pre> <p></p> <p>\u305d\u3057\u3066\u3001\u25b6\ufe0f\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u304b(\u307e\u305f\u306fCTRL+ENTER\u3092\u62bc\u3059)\u3002</p> <p>\u3059\u3079\u3066\u304c\u3046\u307e\u304f\u3044\u3051\u3070\u3001\u6700\u521d\u306eGraphQL\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u3059\u3050\u306b\u53f3\u306e\u30da\u30a4\u30f3\u306b\u8868\u793a\u3055\u308c\u308b\u306f\u305a\u3067\u3059\u3002</p>"},{"location":"ja/interacting/graphql-queries/#creating-the-first-project","title":"\u6700\u521d\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210","text":"<p>Lagoon\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u305f\u3081\u306e\u6700\u521d\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3057\u3087\u3046\uff01\u3053\u308c\u306b\u306f\u3001<code>create-project.gql</code>\u306eGraphQL\u30af\u30a8\u30ea\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u30af\u30a8\u30ea\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002</p> <p>\u5404\u30af\u30a8\u30ea(<code>mutation {</code>\u3067\u59cb\u307e\u308b\u30d6\u30ed\u30c3\u30af)\u306b\u3064\u3044\u3066\u3001TODO\u30b3\u30e1\u30f3\u30c8\u3067\u30de\u30fc\u30af\u3055\u308c\u305f\u7a7a\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u3059\u3079\u3066\u57cb\u3081\u3066\u3001GraphiQL.app\u3067\u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u4ee5\u4e0b\u306e2\u3064\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u305d\u308c\u305e\u308c1\u3064\u305a\u3064\u4f5c\u6210\u3055\u308c\u307e\u3059:</p> <ol> <li><code>kubernetes</code> : Lagoon\u304c\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3079\u304dKubernetes(\u307e\u305f\u306fOpenshift)\u30af\u30e9\u30b9\u30bf\u3002Lagoon\u306f\u81ea\u8eab\u306eKubernetes\u30af\u30e9\u30b9\u30bf\u306b\u3060\u3051\u3067\u306a\u304f\u3001\u4efb\u610f\u306eKubernetes\u306b\u3082\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002 \u4e16\u754c\u4e2d\u306e\u3069\u3053\u3067\u3082\u30af\u30e9\u30b9\u30bf\u30ea\u30f3\u30b0\u3057\u307e\u3059\u3002</li> <li><code>project</code> : \u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308bLagoon\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3001\u30eb\u30fc\u30c8\u306b\u30b3\u30df\u30c3\u30c8\u3055\u308c\u305f <code>.lagoon.yml</code> \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u6301\u3064Git\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u3059\u3002</li> </ol>"},{"location":"ja/interacting/graphql-queries/#allowing-access-to-the-project","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u8a31\u53ef","text":"<p>Lagoon\u3067\u306f\u3001\u5404\u958b\u767a\u8005\u306f\u81ea\u5206\u306eSSH\u30ad\u30fc\u3067\u8a8d\u8a3c\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u4ee5\u4e0b\u3078\u306e\u30a2\u30af\u30bb\u30b9\u304c\u6c7a\u307e\u308a\u307e\u3059:</p> <ol> <li>\u81ea\u5206\u304c\u30a2\u30af\u30bb\u30b9\u6a29\u3092\u6301\u3064\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u898b\u3066\u7de8\u96c6\u3067\u304d\u308bLagoon API\u3002</li> <li>\u81ea\u5206\u304c\u30a2\u30af\u30bb\u30b9\u6a29\u3092\u6301\u3064\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u5b9f\u884c\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u3078\u306e\u30ea\u30e2\u30fc\u30c8\u30b7\u30a7\u30eb\u30a2\u30af\u30bb\u30b9\u3002</li> <li>\u30ea\u30af\u30a8\u30b9\u30c8\u30ed\u30b0\u3001\u30b3\u30f3\u30c6\u30ca\u30ed\u30b0\u3001Lagoon\u30ed\u30b0\u306a\u3069\u3092\u898b\u3064\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u308bLagoon\u306e\u30ed\u30b0\u30b7\u30b9\u30c6\u30e0\u3002</li> </ol> <p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u307e\u305aAPI\u306b\u65b0\u3057\u3044\u30b0\u30eb\u30fc\u30d7\u3092\u8ffd\u52a0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059:</p> API\u306b\u30b0\u30eb\u30fc\u30d7\u3092\u8ffd\u52a0<pre><code>mutation {\naddGroup (\ninput: {\n# TODO: \u65b0\u3057\u3044\u30b0\u30eb\u30fc\u30d7\u306e\u540d\u524d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nname: \"\"\n}\n)     {\nid\nname\n}\n}\n</code></pre> <p>\u6b21\u306b\u3001API\u306b\u65b0\u3057\u3044\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059:</p> API\u306b\u65b0\u898f\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0<pre><code>mutation {\naddUser(\ninput: {\nemail: \"michael.schmid@example.com\"\nfirstName: \"Michael\"\nlastName: \"Schmid\"\ncomment: \"CTO\"\n}\n) {\n# TODO: \u8fd4\u3055\u308c\u305f\u30e6\u30fc\u30b6\u30fcID\u3092\u30e1\u30e2\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\nid\n}\n}\n</code></pre> <p>\u305d\u308c\u304b\u3089\u3001\u305d\u306e API\u306b\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0:</p> API\u306bSSH\u516c\u958b\u9375\u3092\u8ffd\u52a0\u3059\u308b<pre><code>mutation {\naddSshKey(\ninput: {\n# TODO: name\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8a18\u5165\u3057\u3066\u4e0b\u3055\u3044\u3002\n# \u3053\u308c\u306fSSH\u30ad\u30fc\u306e\u975e\u4e00\u610f\u306a\u8b58\u5225\u5b50\u3067\u3059\u3002\nname: \"\"\n# TODO: keyValue\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8a18\u5165\u3057\u3066\u4e0b\u3055\u3044\u3002\n# \u3053\u308c\u306f\u5b9f\u969b\u306eSSH\u516c\u958b\u9375\u3067\u3059(\u6700\u521d\u306e\u30bf\u30a4\u30d7\u3068\u6700\u5f8c\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u9664\u3044\u3066\u3001\u4f8b `AAAAB3NzaC1yc2EAAAADAQ...3QjzIOtdQERGZuMsi0p`)\u3002\nkeyValue: \"\"\n# TODO: keyType\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8a18\u5165\u3057\u3066\u4e0b\u3055\u3044\u3002\n# \u6709\u52b9\u306a\u5024\u306f\u3001SSH_RSA\u3001SSH_ED25519\u3001ECDSA_SHA2_NISTP256/384/521\u306e\u3044\u305a\u308c\u304b\u3067\u3059\u3002\nkeyType: SSH_RSA\nuser: {\n# TODO: userId\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8a18\u5165\u3057\u3066\u4e0b\u3055\u3044\u3002\n# \u3053\u308c\u306faddUser\u30af\u30a8\u30ea\u304b\u3089\u53d6\u5f97\u3057\u305f\u30e6\u30fc\u30b6\u30fcID\u3067\u3059\u3002\nid:\"0\",\nemail:\"michael.schmid@example.com\"\n}\n}\n) {\nid\n}\n}\n</code></pre> <p>\u30ad\u30fc\u3092\u8ffd\u52a0\u3057\u305f\u5f8c\u3001\u30e6\u30fc\u30b6\u30fc\u3092\u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059:</p> \u30e6\u30fc\u30b6\u30fc\u3092\u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0\u3059\u308b<pre><code>mutation {\naddUserToGroup (\ninput: {\nuser: {\n#TODO: \u30e6\u30fc\u30b6\u30fc\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nemail: \"\"\n}\ngroup: {\n#TODO: \u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\u3057\u305f\u3044\u30b0\u30eb\u30fc\u30d7\u306e\u540d\u524d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nname: \"\"\n}\n#TODO: \u30e6\u30fc\u30b6\u30fc\u306e\u5f79\u5272\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002 .\nrole: OWNER\n}\n) {\nid\nname\n}\n}\n</code></pre> <p>\u3053\u308c\u3089\u306e\u30af\u30a8\u30ea\u306e\u4e00\u90e8\u307e\u305f\u306f\u5168\u90e8\u3092\u5b9f\u884c\u3057\u305f\u5f8c\u3001\u30e6\u30fc\u30b6\u30fc\u306fSSH\u7d4c\u7531\u3067\u30c8\u30fc\u30af\u30f3\u3092\u4f5c\u6210\u3057\u305f\u308a\u3001\u30b3\u30f3\u30c6\u30ca\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u308a\u3059\u308b\u6a29\u9650\u304c\u4ed8\u4e0e\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/interacting/graphql-queries/#adding-notifications-to-the-project","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u901a\u77e5\u3092\u8ffd\u52a0\u3059\u308b","text":"<p>\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u4e2d\u306b\u4f55\u304c\u8d77\u3053\u3063\u3066\u3044\u308b\u306e\u304b\u3092\u77e5\u308a\u305f\u3044\u5834\u5408\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u901a\u77e5\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u60c5\u5831\u3092\u63d0\u4f9b\u3057\u307e\u3059:</p> <ul> <li>\u30d7\u30c3\u30b7\u30e5\u901a\u77e5</li> <li>\u30d3\u30eb\u30c9\u958b\u59cb\u60c5\u5831</li> <li>\u30d3\u30eb\u30c9\u6210\u529f\u307e\u305f\u306f\u5931\u6557\u30e1\u30c3\u30bb\u30fc\u30b8</li> <li>\u305d\u306e\u4ed6\u591a\u6570\uff01</li> </ul> <p>\u901a\u77e5\u306f\u3001\u5fc5\u8981\u306a\u60c5\u5831\u306e\u70b9\u3067\u304b\u306a\u308a\u7570\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u305f\u3081\u3001\u5404\u901a\u77e5\u30bf\u30a4\u30d7\u306b\u306f\u72ec\u81ea\u306e\u5909\u7570\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>\u30e6\u30fc\u30b6\u30fc\u3068\u540c\u69d8\u306b\u3001\u307e\u305a\u901a\u77e5\u3092\u8ffd\u52a0\u3057\u307e\u3059:</p> \u901a\u77e5\u3092\u8ffd\u52a0\u3059\u308b<pre><code>mutation {\naddNotificationSlack(\ninput: {\n# TODO: \u540d\u524d\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8a18\u5165\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n# \u3053\u308c\u306f\u901a\u77e5\u306e\u305f\u3081\u306e\u81ea\u8eab\u306e\u8b58\u5225\u5b50\u3067\u3059\u3002\nname: \"\"\n# TODO: \u30c1\u30e3\u30f3\u30cd\u30eb\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8a18\u5165\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n# \u3053\u308c\u306f\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u9001\u4fe1\u3055\u308c\u308b\u30c1\u30e3\u30f3\u30cd\u30eb\u3067\u3059\u3002\nchannel: \"\"\n# TODO: \u30a6\u30a7\u30d6\u30d5\u30c3\u30af\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8a18\u5165\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n# \u3053\u308c\u306f\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u9001\u4fe1\u3055\u308c\u308b\u3079\u304d\u30a6\u30a7\u30d6\u30d5\u30c3\u30af\u306eURL\u3067\u3001\u901a\u5e38\u306f\u30c1\u30e3\u30c3\u30c8\u30b7\u30b9\u30c6\u30e0\u304b\u3089\u63d0\u4f9b\u3055\u308c\u307e\u3059\u3002\nwebhook: \"\"\n}\n) {\nid\n}\n}\n</code></pre> <p>\u901a\u77e5\u304c\u4f5c\u6210\u3055\u308c\u305f\u5f8c\u3001 \u3053\u308c\u3067\u3001\u79c1\u305f\u3061\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u5272\u308a\u5f53\u3066\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059:</p> \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u901a\u77e5\u3092\u5272\u308a\u5f53\u3066\u308b<pre><code>mutation {\naddNotificationToProject(\ninput: {\nnotificationType: SLACK\n# TODO: \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8a18\u5165\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n# \u3053\u308c\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u540d\u524d\u3067\u3059\u3002\nproject: \"\"\n# TODO: \u901a\u77e5\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8a18\u5165\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n# \u3053\u308c\u306f\u901a\u77e5\u306e\u540d\u524d\u3067\u3059\u3002\nnotificationName: \"\"\n# TODO: \u30aa\u30d7\u30b7\u30e7\u30f3\n# \u8208\u5473\u306e\u3042\u308b\u901a\u77e5\u30af\u30e9\u30b9\u306e\u7a2e\u985e\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067DEPLOYMENT\u306b\u306a\u308a\u307e\u3059\ncontentType: DEPLOYMENT/PROBLEM\n# TODO: \u30aa\u30d7\u30b7\u30e7\u30f3\n# contentType PROBLEM\u306b\u95a2\u9023\u3057\u3066\u3001\u6211\u3005\u304c\u901a\u77e5\u3092\u53d7\u3051\u305f\u3044\u554f\u984c\u306e\u7a2e\u985e\u306e\u95be\u5024\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\nnotificationSeverityThreshold: \"NONE/UNKNOWN/NEGLIGIBLE/LOW/MEDIUM/HIGH/CRITICAL\n}\n) {\nid\n}\n}\n</code></pre> <p>\u3053\u308c\u3067\u3001\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u3054\u3068\u306b\u3001\u5b9a\u7fa9\u3057\u305f\u30c1\u30e3\u30f3\u30cd\u30eb\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d7\u3051\u53d6\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/interacting/graphql-queries/#example-graphql-queries","title":"GraphQL\u30af\u30a8\u30ea\u306e\u4f8b","text":""},{"location":"ja/interacting/graphql-queries/#adding-a-new-kubernetes-target","title":"\u65b0\u3057\u3044Kubernetes\u30bf\u30fc\u30b2\u30c3\u30c8\u306e\u8ffd\u52a0","text":"<p>\u6ce8\u610f:</p> <p>Lagoon\u3067\u306f\u3001<code>addKubernetes</code>\u3068<code>addOpenshift</code>\u306e\u3069\u3061\u3089\u3082Kubernetes\u3068OpenShift\u306e\u30bf\u30fc\u30b2\u30c3\u30c8\u306e\u4e21\u65b9\u306b\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u3001\u3069\u3061\u3089\u3082\u4e92\u63db\u6027\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>Lagoon\u304c\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3079\u304d\u30af\u30e9\u30b9\u30bf\u3002</p> Kubernetes\u30bf\u30fc\u30b2\u30c3\u30c8\u306e\u8ffd\u52a0<pre><code>mutation {\naddKubernetes(\ninput: {\n# TODO: \u540d\u524d\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8a18\u5165\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n# \u3053\u308c\u306f\u30af\u30e9\u30b9\u30bf\u306e\u4e00\u610f\u306e\u8b58\u5225\u5b50\u3067\u3059\u3002\nname: \"\"\n# TODO: consoleUrl\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8a18\u5165\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n# \u3053\u308c\u306fKubernetes\u30af\u30e9\u30b9\u30bf\u306eURL\u3067\u3059\nconsoleUrl: \"\"\n# TODO: \u30c8\u30fc\u30af\u30f3\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8a18\u5165\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n# \u3053\u308c\u306f\u3001\u3053\u306e\u30af\u30e9\u30b9\u30bf\u3067\u4f5c\u6210\u3055\u308c\u305f`lagoon`\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30c8\u30fc\u30af\u30f3\u3067\u3059(\u3053\u308c\u306f\u3001Lagoon\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u3082\u4f7f\u7528\u3057\u305f\u306e\u3068\u540c\u3058\u30c8\u30fc\u30af\u30f3\u3067\u3059)\u3002\ntoken: \"\"\n}\n){\nname\nid\n}\n}\n</code></pre>"},{"location":"ja/interacting/graphql-queries/#adding-a-group-to-a-project","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30b0\u30eb\u30fc\u30d7\u3092\u8ffd\u52a0\u3059\u308b","text":"<p>\u3053\u306e\u30af\u30a8\u30ea\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30b0\u30eb\u30fc\u30d7\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\u305d\u306e\u30b0\u30eb\u30fc\u30d7\u306e\u30e6\u30fc\u30b6\u30fc\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\u5f7c\u3089\u306f\u305d\u306e\u30b0\u30eb\u30fc\u30d7\u3067\u306e\u5f79\u5272\u306b\u57fa\u3065\u3044\u3066\u5909\u66f4\u3092\u52a0\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30b0\u30eb\u30fc\u30d7\u3092\u8ffd\u52a0\u3059\u308b<pre><code>mutation {\naddGroupsToProject (\ninput: {\nproject: {\n#TODO: \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u540d\u524d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nname: \"\"\n}\ngroups: {\n#TODO: \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u8ffd\u52a0\u3055\u308c\u308b\u30b0\u30eb\u30fc\u30d7\u306e\u540d\u524d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nname: \"\"\n}\n}\n) {\nid\n}\n}\n</code></pre>"},{"location":"ja/interacting/graphql-queries/#adding-a-new-project","title":"\u65b0\u3057\u3044\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8ffd\u52a0\u3059\u308b","text":"<p>\u3053\u306e\u30af\u30a8\u30ea\u306f\u3001\u65b0\u3057\u3044Lagoon\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u305f\u3081\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u30eb\u30fc\u30c8\u306b\u30b3\u30df\u30c3\u30c8\u3055\u308c\u305f<code>.lagoon.yml</code>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u6301\u3064Git\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u3059\u3002</p> <p>\u3082\u3057 <code>privateKey</code> \u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u3042\u308b\u5834\u5408\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u65b0\u3057\u3044SSH\u30ad\u30fc\u304c\u81ea\u52d5\u7684\u306b\u751f\u6210\u3055\u308c\u307e\u3059\u3002</p> <p>\u5225\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304b\u3089\u30ad\u30fc\u3092\u518d\u5229\u7528\u3057\u305f\u3044\u5834\u5408\u306f\u3001<code>addProject</code> \u30df\u30e5\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u30ad\u30fc\u3092\u63d0\u4f9b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> \u65b0\u3057\u3044\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8ffd\u52a0<pre><code>mutation {\naddProject(\ninput: {\n# TODO: \u540d\u524d\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n# \u3053\u308c\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u3067\u3059\u3002\nname: \"\"\n# TODO: \u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ad\u30fc\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044(\u6539\u884c\u306f '\\n' \u3067\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044)\u3002\n# \u3053\u308c\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ad\u30fc\u3067\u3001Git\u306e\u30b3\u30fc\u30c9\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002\nprivateKey: \"\"\n# TODO: Kubernetes\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n# \u3053\u308c\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u5272\u308a\u5f53\u3066\u308bKubernetes\u307e\u305f\u306fOpenShift\u306eID\u3067\u3059\u3002\nkubernetes: 0\n# TODO: \u540d\u524d\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n# \u3053\u308c\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u3067\u3059\u3002\ngitUrl: \"\"\n# TODO: \u30c7\u30d7\u30ed\u30a4\u3059\u308b\u30d6\u30e9\u30f3\u30c1\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nbranches: \"\"\n# TODO: \u672c\u756a\u74b0\u5883\u3092\u5b9a\u7fa9\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nproductionEnvironment: \"\"\n}\n) {\nname\nkubernetes {\nname\nid\n}\ngitUrl\nbranches\npullrequests\n}\n}\n</code></pre>"},{"location":"ja/interacting/graphql-queries/#list-projects-and-groups","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3068\u30b0\u30eb\u30fc\u30d7\u306e\u30ea\u30b9\u30c8","text":"<p>\u3053\u308c\u306f\u3001\u79c1\u305f\u3061\u306eLagoon\u5185\u306b\u5b58\u5728\u3059\u308b\u3059\u3079\u3066\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3001\u30af\u30e9\u30b9\u30bf\u30fc\u3001\u30b0\u30eb\u30fc\u30d7\u306e\u6982\u8981\u3092\u898b\u308b\u305f\u3081\u306e\u826f\u3044\u30af\u30a8\u30ea\u3067\u3059\u3002</p> \u3059\u3079\u3066\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3001\u30af\u30e9\u30b9\u30bf\u30fc\u3001\u304a\u3088\u3073\u30b0\u30eb\u30fc\u30d7\u306e\u6982\u8981\u3092\u53d6\u5f97<pre><code>query {\nallProjects {\nname\ngitUrl\n}\nallKubernetes {\nname\nid\n}\nallGroups{\nid\nname\nmembers {\n# \u3053\u308c\u306f\u3053\u306e\u30b0\u30eb\u30fc\u30d7\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u8868\u793a\u3057\u307e\u3059\u3002\nuser {\nid\nfirstName\nlastName\n}\nrole\n}\ngroups {\nid\nname\n}\n}\n}\n</code></pre>"},{"location":"ja/interacting/graphql-queries/#single-project","title":"\u5358\u4e00\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8","text":"<p>\u5358\u4e00\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8a73\u3057\u304f\u898b\u308b\u5834\u5408\u3001\u3053\u306e\u30af\u30a8\u30ea\u304c\u975e\u5e38\u306b\u6709\u7528\u3067\u3042\u308b\u3053\u3068\u304c\u8a3c\u660e\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8a73\u3057\u304f\u898b\u308b<pre><code>query {\nprojectByName(\n# TODO: \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nname: \"\"\n) {\nid\nbranches\ngitUrl\npullrequests\nproductionEnvironment\nnotifications(type: SLACK) {\n... on NotificationSlack {\nname\nchannel\nwebhook\nid\n}\n}\nenvironments {\nname\ndeployType\nenvironmentType\n}\nkubernetes {\nid\n}\n}\n}\n</code></pre>"},{"location":"ja/interacting/graphql-queries/#querying-a-project-by-its-git-url","title":"Git URL\u306b\u3088\u308b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30af\u30a8\u30ea","text":"<p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u540d\u524d\u3092\u899a\u3048\u3066\u3044\u306a\u3044\u304c\u3001Git URL\u306f\u77e5\u3063\u3066\u3044\u308b\u5834\u5408\uff1f\u3082\u3046\u63a2\u3059\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3001\u305d\u306e\u305f\u3081\u306eGraphQL\u30af\u30a8\u30ea\u304c\u3042\u308a\u307e\u3059:</p> Git URL\u306b\u3088\u308b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30af\u30a8\u30ea<pre><code>query {\nprojectByGitUrl(gitUrl: \"git@server.com:org/repo ```\n.git\") {\nname\n}\n}\n</code></pre>"},{"location":"ja/interacting/graphql-queries/#updating-objects","title":"\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u66f4\u65b0","text":"<p>Lagoon GraphQL API\u306f\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8868\u793a\u3057\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3060\u3051\u3067\u306a\u304f\u3001\u30d1\u30c3\u30c1\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 \u3092\u4f7f\u7528\u3057\u3066\u65e2\u5b58\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u66f4\u65b0\u3059\u308b\u80fd\u529b\u3082\u3042\u308a\u307e\u3059\u3002</p> <p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5185\u3067\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u30d6\u30e9\u30f3\u30c1\u3092\u66f4\u65b0\u3057\u307e\u3059\u3002</p> \u30c7\u30d7\u30ed\u30a4\u30d6\u30e9\u30f3\u30c1\u306e\u66f4\u65b0\u3002<pre><code>mutation {\nupdateProject(\ninput: { id: 109, patch: { branches: \"^(prod|stage|dev|update)$\" } }\n) {\nid\n}\n}\n</code></pre> <p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5185\u306e\u672c\u756a\u74b0\u5883\u3092\u66f4\u65b0\u3057\u307e\u3059\u3002</p> <p>\u8b66\u544a</p> <p>\u3053\u306e\u5909\u66f4\u3092\u30b3\u30f3\u30c6\u30ca\u306b\u53cd\u6620\u3055\u305b\u308b\u306b\u306f\u3001\u518d\u30c7\u30d7\u30ed\u30a4\u304c\u5fc5\u8981\u3067\u3059\u3002</p> \u672c\u756a\u74b0\u5883\u306e\u66f4\u65b0<pre><code> mutation {\nupdateProject(\ninput: { id: 109, patch: { productionEnvironment: \"main\" } }\n) {\nid\n}\n}\n</code></pre> <p>\u307e\u305f\u3001\u4e00\u5ea6\u306b\u8907\u6570\u306e\u5909\u66f4\u3092\u7d44\u307f\u5408\u308f\u305b\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002</p> \u672c\u756a\u74b0\u5883\u306e\u66f4\u65b0\u3068\u30c7\u30d7\u30ed\u30a4\u30d6\u30e9\u30f3\u30c1\u306e\u8a2d\u5b9a\u3002<pre><code>mutation {\nupdateProject(\ninput: {\nid: 109\npatch: {\nproductionEnvironment: \"main\"\nbranches: \"^(prod|stage|dev|update)$\"\n}\n}\n) {\nid\n}\n}\n</code></pre>"},{"location":"ja/interacting/graphql-queries/#deleting-environments","title":"\u74b0\u5883\u306e\u524a\u9664","text":"<p>Lagoon GraphQL API\u3092\u4f7f\u7528\u3057\u3066\u3001\u74b0\u5883\u3092\u524a\u9664\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002 \u74b0\u5883\u3002\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u3068\u74b0\u5883\u540d\u3092\u77e5\u3063\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> \u74b0\u5883\u3092\u524a\u9664\u3059\u308b<pre><code>mutation {\ndeleteEnvironment(\ninput: {\n# TODO: name\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8a18\u5165\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n# \u3053\u308c\u306f\u74b0\u5883\u540d\u3067\u3059\u3002\nname: \"\"\n# TODO: project\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8a18\u5165\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n# \u3053\u308c\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u3067\u3059\u3002\nproject: \"\"\nexecute:true\n}\n)\n}\n</code></pre>"},{"location":"ja/interacting/graphql-queries/#querying-a-project-to-see-what-groups-and-users-are-assigned","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u30b0\u30eb\u30fc\u30d7\u3068\u30e6\u30fc\u30b6\u30fc\u3092\u78ba\u8a8d\u3059\u308b","text":"<p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u3069\u306e\u30b0\u30eb\u30fc\u30d7\u3068\u30e6\u30fc\u30b6\u30fc\u304c\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u304b\u898b\u305f\u3044\u3067\u3059\u304b\uff1f\u5f7c\u3089\u306e\u5f79\u5272\u306f\u4f55\u304b\u77e5\u308a\u305f\u3044\u3067\u3059\u304b\uff1f\u305d\u306e\u305f\u3081\u306e\u30af\u30a8\u30ea\u304c\u3042\u308a\u307e\u3059\uff01\u4e0b\u8a18\u306e\u30af\u30a8\u30ea\u3092\u4f7f\u7528\u3057\u3066\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u691c\u7d22\u3057\u3001\u305d\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u30b0\u30eb\u30fc\u30d7\u3001\u30e6\u30fc\u30b6\u30fc\u3001\u5f79\u5272\u3092\u8868\u793a\u3067\u304d\u307e\u3059\u3002</p> \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u30b0\u30eb\u30fc\u30d7\u3001\u30e6\u30fc\u30b6\u30fc\u3001\u5f79\u5272\u3092\u30af\u30a8\u30ea\u3059\u308b<pre><code>query search{\nprojectByName(\n#TODO: \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u540d\u524d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nname: \"\"\n) {\nid,\nbranches,\nproductionEnvironment,\npullrequests,\ngitUrl,\nkubernetes {\nid\n},\ngroups{\nid\nname\ngroups {\nid\nname\n}\nmembers {\nrole\nuser {\nid\nemail\n}\n}\n}\n}\n}\n</code></pre>"},{"location":"ja/interacting/graphql-queries/#maintaining-project-metadata","title":"\u7dad\u6301 \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30e1\u30bf\u30c7\u30fc\u30bf","text":"<p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30e1\u30bf\u30c7\u30fc\u30bf\u306f\u3001\u4efb\u610f\u306e\u30ad\u30fc/\u5024\u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u5272\u308a\u5f53\u3066\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306f\u95a2\u9023\u4ed8\u3051\u3089\u308c\u305f\u30e1\u30bf\u30c7\u30fc\u30bf\u306b\u3088\u3063\u3066\u554f\u3044\u5408\u308f\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u7a2e\u985e\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u3001\u307e\u305f\u306f\u5f8c\u3067\u554f\u3044\u5408\u308f\u305b\u308b\u305f\u3081\u306e\u4efb\u610f\u306e\u30ab\u30c6\u30b4\u30ea\u30fc\u306b\u3088\u3063\u3066\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u5206\u985e\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/interacting/graphql-queries/#addupdate-metadata-on-a-project","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u8ffd\u52a0/\u66f4\u65b0\u3059\u308b","text":"<p>\u30e1\u30bf\u30c7\u30fc\u30bf\u306e\u66f4\u65b0\u306f\u30ad\u30fc/\u5024\u306e\u7d44\u307f\u5408\u308f\u305b\u3092\u671f\u5f85\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306f<code>UPSERT</code>\u3068\u3057\u3066\u52d5\u4f5c\u3057\u307e\u3059\u3002\u3064\u307e\u308a\u3001\u65e2\u306b\u30ad\u30fc\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u306f\u5024\u304c\u66f4\u65b0\u3055\u308c\u3001\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306f\u633f\u5165\u3055\u308c\u307e\u3059\u3002</p> <p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3057\u3066\u4efb\u610f\u306e\u6570\u306ek/v\u30da\u30a2\u3092\u4fdd\u5b58\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> \u30e1\u30bf\u30c7\u30fc\u30bf\u306b\u30ad\u30fc/\u5024\u306e\u30da\u30a2\u3092\u8ffd\u52a0\u3059\u308b<pre><code>mutation {\nupdateProjectMetadata(\ninput: { id: 1,  patch: { key: \"type\", value: \"saas\" } }\n) {\nid\nmetadata\n}\n}\n</code></pre>"},{"location":"ja/interacting/graphql-queries/#query-for-projects-by-metadata","title":"\u30e1\u30bf\u30c7\u30fc\u30bf\u306b\u3088\u308b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30af\u30a8\u30ea","text":"<p>\u30af\u30a8\u30ea\u306f<code>key</code>\u306e\u307f(\u4f8b:\u7279\u5b9a\u306e\u30ad\u30fc\u304c\u5b58\u5728\u3059\u308b\u3059\u3079\u3066\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3059)\u307e\u305f\u306f<code>key</code>\u3068<code>value</code>\u306e\u4e21\u65b9(\u30ad\u30fc\u3068\u5024\u306e\u4e21\u65b9\u304c\u4e00\u81f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059)\u306b\u3088\u3063\u3066\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p><code>version</code>\u30bf\u30b0\u3092\u6301\u3064\u3059\u3079\u3066\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8:</p> \u30e1\u30bf\u30c7\u30fc\u30bf\u306b\u3088\u308b\u30af\u30a8\u30ea<pre><code>query projectsByMetadata {\nprojectsByMetadata(metadata: [{key: \"version\"] ) {\nid\nname\n}\n}\n</code></pre> <p>\u7279\u306b\u30d0\u30fc\u30b8\u30e7\u30f3<code>8</code>\u306e<code>version</code>\u30bf\u30b0\u3092\u6301\u3064\u3059\u3079\u3066\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8:</p> \u30e1\u30bf\u30c7\u30fc\u30bf\u306b\u3088\u308b\u30af\u30a8\u30ea<pre><code>query projectsByMetadata {\nprojectsByMetadata(metadata: [{key: \"version\", value: \"8\"] ) {\nid\nname\n}\n}\n</code></pre>"},{"location":"ja/interacting/graphql-queries/#removing-metadata-on-a-project","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u524a\u9664\u3059\u308b","text":"<p>\u30e1\u30bf\u30c7\u30fc\u30bf\u306f\u30ad\u30fc\u3054\u3068\u306b\u524a\u9664\u3067\u304d\u307e\u3059\u3002\u4ed6\u306e\u30e1\u30bf\u30c7\u30fc\u30bf\u30ad\u30fc/\u5024\u306e\u30da\u30a2\u306f\u6b8b\u308a\u307e\u3059\u3002</p> \u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u524a\u9664\u3059\u308b<pre><code>mutation {\nremoveProjectMetadataByKey (\ninput: { id: 1,  key: \"version\" }\n) {\nid\nmetadata\n}\n}\n</code></pre>"},{"location":"ja/interacting/graphql/#graphql-api","title":"GraphQL API\u3078\u306e\u63a5\u7d9a","text":"<p>Lagoon\u3067\u306eAPI\u3068\u306e\u3084\u308a\u3068\u308a\u306fGraphQL\u3092\u901a\u3058\u3066\u884c\u3044\u307e\u3059\u3002API\u306b\u8a8d\u8a3c\u3059\u308b\u305f\u3081\u306b\u306f\u3001JWT(JSON Web Token)\u304c\u5fc5\u8981\u3067\u3001\u3053\u308c\u306b\u3088\u308aSSH\u516c\u958b\u9375\u3092\u901a\u3058\u3066API\u306b\u5bfe\u3059\u308b\u8a8d\u8a3c\u304c\u884c\u308f\u308c\u307e\u3059\u3002</p> <p>\u3053\u306e\u30c8\u30fc\u30af\u30f3\u3092\u751f\u6210\u3059\u308b\u306b\u306f\u3001<code>token</code>\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u3066\u30ea\u30e2\u30fc\u30c8\u30b7\u30a7\u30eb\u3092\u4f7f\u7528\u3057\u307e\u3059:</p> \u30c8\u30fc\u30af\u30f3\u306e\u53d6\u5f97<pre><code>ssh -p [PORT] -t lagoon@[HOST] token\n</code></pre> <p>amazee.io\u306e\u4f8b:</p> amazee.io\u30c8\u30fc\u30af\u30f3\u306e\u53d6\u5f97<pre><code>ssh -p 32222 -t lagoon@ssh.lagoon.amazeeio.cloud token\n</code></pre> <p>\u3053\u308c\u306b\u3088\u308a\u9577\u3044\u6587\u5b57\u5217\u304c\u8fd4\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u304cJWT\u30c8\u30fc\u30af\u30f3\u3067\u3059\u3002</p> <p>\u307e\u305f\u3001API\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306eURL\u3082\u5fc5\u8981\u3067\u3059\u3002\u3053\u308c\u306b\u3064\u3044\u3066\u306fLagoon\u306e\u7ba1\u7406\u8005\u306b\u5c0b\u306d\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>amazee.io\u3067\u306f\u3053\u308c\u306f<code>https://api.lagoon.amazeeio.cloud/graphql</code>\u3067\u3059\u3002</p> <p>\u3055\u3066\u3001GraphQL\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u5fc5\u8981\u3067\u3059\u3002\u6280\u8853\u7684\u306b\u306f\u3053\u308c\u306f\u5358\u306a\u308bHTTP\u3067\u3059\u304c\u3001\u6211\u3005\u306fGraphiQL\u3092\u63a8\u5968\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u7d20\u6575\u306aUI\u3092\u5099\u3048\u3066\u304a\u308a\u3001\u30aa\u30fc\u30c8\u30b3\u30f3\u30d7\u30ea\u30fc\u30c8\u3067GraphQL\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001\u8d77\u52d5\u3057\u307e\u3059\u3002 [GraphiQL App]</p> <p>API\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8URL\u3092\u5165\u529b\u3057\u307e\u3059\u3002\u6b21\u306b\"Edit HTTP Headers\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u65b0\u3057\u3044\u30d8\u30c3\u30c0\u30fc\u3092\u8ffd\u52a0\u3057\u307e\u3059:</p> <ul> <li>\"Header name\": <code>Authorization</code></li> <li>\"Header value\": <code>Bearer [jwt token]</code> ( JWT\u30c8\u30fc\u30af\u30f3\u306b\u30b9\u30da\u30fc\u30b9\u304c\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3001\u305d\u308c\u306f\u52d5\u4f5c\u3057\u307e\u305b\u3093)</li> </ul> <p></p> <p>HTTP\u30d8\u30c3\u30c0\u30fc\u30aa\u30fc\u30d0\u30fc\u30ec\u30a4\u3092\u9589\u3058\u307e\u3059(ESC\u30ad\u30fc\u3092\u62bc\u3057\u307e\u3059)\u3002\u3053\u308c\u3067\u3042\u306a\u305f\u306f\u521d\u3081\u3066\u306eGraphQL\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u884c\u3046\u6e96\u5099\u304c\u6574\u3044\u307e\u3057\u305f\uff01</p> <p>\u5de6\u5074\u306e\u30a6\u30a3\u30f3\u30c9\u30a6\u306b\u6b21\u306e\u5185\u5bb9\u3092\u5165\u529b\u3057\u307e\u3059:</p> \u3059\u3079\u3066\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u53d6\u5f97\u3059\u308b<pre><code>query whatIsThere {\nallProjects {\nid\ngitUrl\nname\nbranches\npullrequests\nproductionEnvironment\nenvironments {\nname\nenvironmentType\n}\n}\n}\n</code></pre> <p>\u305d\u3057\u3066\u3001\u25b6\ufe0f\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u304b(\u307e\u305f\u306fCTRL+ENTER\u3092\u62bc\u3059)\u3002</p> <p></p> <p>\u3059\u3079\u3066\u3046\u307e\u304f\u3044\u3051\u3070\u3001\u521d\u3081\u3066\u306eGraphQL\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u306f\u305a\u3067\u3059\u3002</p>"},{"location":"ja/interacting/graphql/#_1","title":"\u30df\u30e5\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3","text":"<p>Lagoon\u306eGraphQL API\u306f\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8868\u793a\u3057\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3060\u3051\u3067\u306a\u304f\u3001\u65e2\u5b58\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u66f4\u65b0\u3059\u308b\u6a5f\u80fd\u3082\u6301\u3063\u3066\u3044\u307e\u3059\u3002Lagoon\u306e\u3059\u3079\u3066\u306eGraphQL\u306f\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002</p> <p>\u60c5\u5831</p> <p>GraphQL\u306e\u30df\u30e5\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u30af\u30a8\u30ea\u306f\u3001\u30c7\u30fc\u30bf\u30b9\u30c8\u30a2\u306e\u30c7\u30fc\u30bf\u3092\u5909\u66f4\u3057\u3001\u5024\u3092\u8fd4\u3057\u307e\u3059\u3002\u3053\u308c\u3089\u306f\u3001\u30c7\u30fc\u30bf\u306e\u633f\u5165\u3001\u66f4\u65b0\u3001\u524a\u9664\u306b\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\u30df\u30e5\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u306f\u30b9\u30ad\u30fc\u30de\u306e\u4e00\u90e8\u3068\u3057\u3066\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5185\u3067\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u30d6\u30e9\u30f3\u30c1\u3092\u66f4\u65b0\u3057\u307e\u3059:</p> \u30c7\u30d7\u30ed\u30a4\u30d6\u30e9\u30f3\u30c1\u3092\u66f4\u65b0<pre><code>mutation editProjectBranches {\nupdateProject(input:{id:109, patch:{branches:\"^(prod|stage|dev|update)$\"}}) {\nid\n}\n}\n</code></pre> <p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5185\u306e\u88fd\u54c1\u74b0\u5883\u3092\u66f4\u65b0\u3057\u307e\u3059:</p> <p>\u8b66\u544a</p> <p>\u3059\u3079\u3066\u306e\u5909\u66f4\u304c\u30b3\u30f3\u30c6\u30ca\u306b\u53cd\u6620\u3055\u308c\u308b\u3088\u3046\u306b\u3001\u518d\u30c7\u30d7\u30ed\u30a4\u304c\u5fc5\u8981\u3067\u3059\u3002</p> \u88fd\u54c1\u74b0\u5883\u306e\u66f4\u65b0<pre><code>mutation editProjectProductionEnvironment {\nupdateProject(input:{id:109, patch:{productionEnvironment:\"prod\"}}) {\nid\n}\n}\n</code></pre> <p>\u307e\u305f\u3001\u8907\u6570\u306e\u5909\u66f4\u3092\u4e00\u3064\u306e\u30af\u30a8\u30ea\u306b\u307e\u3068\u3081\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059:</p> \u8907\u6570\u306e\u5909\u66f4<pre><code>mutation editProjectProductionEnvironmentAndBranches {\nupdateProject(input:{id:109, patch:{productionEnvironment:\"prod\", branches:\"^(prod|stage|dev|update)$\"}}) {\nid\n}\n}\n</code></pre>"},{"location":"ja/interacting/lagoon-ui/","title":"LagoonUI","text":"<p>Lagoon UI\u306f\u3001Lagoon\u3068\u306e\u6700\u521d\u306e\u63a5\u70b9\u3067\u3059\u3002\u30a2\u30af\u30bb\u30b9\u306b\u95a2\u3059\u308b\u554f\u984c\u304c\u3042\u308b\u5834\u5408\u306f\u3001Lagoon\u7ba1\u7406\u8005\u306b\u9023\u7d61\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>UI\u3092\u4f7f\u7528\u3059\u308b\u3068\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3084\u7d44\u7e54\u306b\u95a2\u3059\u308b\u3055\u307e\u3056\u307e\u306a\u30bf\u30b9\u30af\u3092\u5b8c\u4e86\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u7d44\u7e54\u306b\u3064\u3044\u3066\u306e\u8a73\u7d30\u306f\u3053\u3061\u3089\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\u3001UI\u3067\u7d44\u7e54\u3068\u4f55\u304c\u3067\u304d\u308b\u304b\u306b\u3064\u3044\u3066\u306f\u3053\u3061\u3089\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/interacting/organizations/","title":"UI\u3067\u7d44\u7e54\u3068\u5171\u540c\u4f5c\u696d\u3059\u308b","text":"<p>\u4ee5\u4e0b\u306b\u3001Lagoon UI\u3067\u30b0\u30eb\u30fc\u30d7\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3001\u30e6\u30fc\u30b6\u30fc\u3001\u304a\u3088\u3073\u5f79\u5272\u306b\u95a2\u9023\u3059\u308b\u6709\u7528\u306a\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306e\u30b9\u30c6\u30c3\u30d7\u30d0\u30a4\u30b9\u30c6\u30c3\u30d7\u30ac\u30a4\u30c9\u3092\u793a\u3057\u307e\u3059\u3002</p>"},{"location":"ja/interacting/organizations/#log-in-and-find-organizations","title":"\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u7d44\u7e54\u3092\u63a2\u3059","text":""},{"location":"ja/interacting/organizations/#view-who-has-access-to-a-project","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u3092\u6301\u3064\u4eba\u3092\u78ba\u8a8d\u3059\u308b","text":""},{"location":"ja/interacting/organizations/#add-user-to-group-with-role","title":"\u30e6\u30fc\u30b6\u30fc\u3092\u30ed\u30fc\u30eb\u4ed8\u304d\u306e\u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0\u3059\u308b","text":""},{"location":"ja/interacting/organizations/#remove-a-user-from-a-group","title":"\u30e6\u30fc\u30b6\u30fc\u3092\u30b0\u30eb\u30fc\u30d7\u304b\u3089\u524a\u9664\u3059\u308b","text":""},{"location":"ja/interacting/organizations/#change-a-user-role","title":"\u30e6\u30fc\u30b6\u30fc\u306e\u30ed\u30fc\u30eb\u3092\u5909\u66f4\u3059\u308b","text":""},{"location":"ja/interacting/organizations/#add-an-email-notification-to-a-project","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30e1\u30fc\u30eb\u901a\u77e5\u3092\u8ffd\u52a0\u3059\u308b","text":""},{"location":"ja/interacting/organizations/#add-a-group-to-a-project","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30b0\u30eb\u30fc\u30d7\u3092\u8ffd\u52a0\u3059\u308b","text":""},{"location":"ja/interacting/organizations/#add-a-user-with-organization-owner-privileges","title":"\u7d44\u7e54\u306e\u30aa\u30fc\u30ca\u30fc\u6a29\u9650\u3092\u6301\u3064\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\u3059\u308b","text":""},{"location":"ja/interacting/organizations/#create-a-new-project-add-a-group-and-create-a-production-environment","title":"\u65b0\u3057\u3044\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u3001\u30b0\u30eb\u30fc\u30d7\u3092\u8ffd\u52a0\u3057\u3001\u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u74b0\u5883\u3092\u4f5c\u6210\u3059\u308b","text":""},{"location":"ja/interacting/rbac/","title":"\u30ed\u30fc\u30eb\u30d9\u30fc\u30b9\u306e\u30a2\u30af\u30bb\u30b9\u5236\u5fa1 (RBAC)","text":"<p>Lagoon \u30d0\u30fc\u30b8\u30e7\u30f3 1.0 \u3067\u306f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u65b9\u6cd5\u304c\u5909\u66f4\u3055\u308c\u307e\u3057\u305f\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u306f\u30b0\u30eb\u30fc\u30d7\u7d4c\u7531\u3067\u51e6\u7406\u3055\u308c\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306f 1 \u3064\u307e\u305f\u306f\u8907\u6570\u306e\u30b0\u30eb\u30fc\u30d7\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u307e\u3059\u3002\u30e6\u30fc\u30b6\u30fc\u306f\u30ed\u30fc\u30eb\u3092\u6301\u3064\u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0\u3055\u308c\u307e\u3059\u3002\u30b0\u30eb\u30fc\u30d7\u306f\u30b5\u30d6\u30b0\u30eb\u30fc\u30d7\u5185\u306b\u30cd\u30b9\u30c8\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u5909\u66f4\u306b\u3088\u308a\u3001\u67d4\u8edf\u6027\u304c\u5927\u5e45\u306b\u5411\u4e0a\u3057\u3001Lagoon \u5185\u3067\u5b9f\u969b\u306e\u30c1\u30fc\u30e0\u3092\u518d\u73fe\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"ja/interacting/rbac/#roles","title":"\u5f79\u67c4","text":"<p>\u30e6\u30fc\u30b6\u30fc\u3092\u30b0\u30eb\u30fc\u30d7\u306b\u5272\u308a\u5f53\u3066\u308b\u3068\u304d\u306f\u3001\u3053\u306e\u30b0\u30eb\u30fc\u30d7\u5185\u3067\u305d\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u30b0\u30eb\u30fc\u30d7 \u30ed\u30fc\u30eb\u3092\u63d0\u4f9b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u73fe\u5728\u5b58\u5728\u3059\u308b 5 \u3064\u306e\u30b0\u30eb\u30fc\u30d7 \u30ed\u30fc\u30eb\u306e\u305d\u308c\u305e\u308c\u304c\u3001\u30b0\u30eb\u30fc\u30d7\u3068\u30b0\u30eb\u30fc\u30d7\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3059\u308b\u7570\u306a\u308b\u6a29\u9650\u3092\u30e6\u30fc\u30b6\u30fc\u306b\u4ed8\u4e0e\u3057\u307e\u3059\u3002\u73fe\u5728 Lagoon \u306b\u3042\u308b\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u5168\u4f53\u306e\u30ed\u30fc\u30eb\u3068\u30b0\u30eb\u30fc\u30d7 \u30ed\u30fc\u30eb\u306f\u6b21\u306e\u3068\u304a\u308a\u3067\u3059\u3002</p>"},{"location":"ja/interacting/rbac/#platform-wide-roles","title":"\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u5168\u4f53\u306e\u30ed\u30fc\u30eb","text":""},{"location":"ja/interacting/rbac/#platform-wide-admin","title":"\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u5168\u4f53\u306e\u7ba1\u7406\u8005","text":"<p>\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u5168\u4f53\u306e\u7ba1\u7406\u8005\u306f\u3001Lagoon \u5168\u4f53\u306e\u3059\u3079\u3066\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306b\u306f\u3001\u3059\u3079\u3066\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u524a\u9664\u3059\u308b\u306a\u3069\u306e\u5371\u967a\u306a\u5909\u66f4\u3082\u542b\u307e\u308c\u307e\u3059\u3002\u975e\u5e38\u306b\u614e\u91cd\u306b\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/interacting/rbac/#platform-wide-owner","title":"\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u5168\u4f53\u306e\u6240\u6709\u8005","text":"<p>\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u5168\u4f53\u306e\u30aa\u30fc\u30ca\u30fc\u306f\u3001\u30b0\u30eb\u30fc\u30d7\u30aa\u30fc\u30ca\u30fc\u306e\u5f79\u5272\u3068\u540c\u69d8\u306b\u3059\u3079\u3066\u306eLagoon\u30b0\u30eb\u30fc\u30d7\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\u3059\u3079\u3066\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u304c\u3001\u5404\u30b0\u30eb\u30fc\u30d7\u306b\u30e6\u30fc\u30b6\u30fc\u3092\u5272\u308a\u5f53\u3066\u305f\u304f\u306a\u3044\u5834\u5408\u306b\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/interacting/rbac/#organization-roles","title":"\u7d44\u7e54\u306e\u5f79\u5272","text":""},{"location":"ja/interacting/rbac/#organization-owner","title":"\u7d44\u7e54\u306e\u6240\u6709\u8005","text":"<p>\u7d44\u7e54\u306e\u6240\u6709\u8005\u306e\u30ed\u30fc\u30eb\u306b\u3088\u308a\u3001\u7d44\u7e54\u5185\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3001\u30b0\u30eb\u30fc\u30d7\u3001\u901a\u77e5\u3092\u4f5c\u6210\u304a\u3088\u3073\u524a\u9664\u3067\u304d\u307e\u3059\u3002</p> <p>\u5f7c\u3089\u306f\u30e6\u30fc\u30b6\u30fc\u3092\u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0\u3057\u3001\u305d\u306e\u30b0\u30eb\u30fc\u30d7\u5185\u306e\u30e6\u30fc\u30b6\u30fc\u306e\u30ed\u30fc\u30eb\u3092\u5909\u66f4\u3057\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u30b0\u30eb\u30fc\u30d7\u306b\u95a2\u9023\u4ed8\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u7d44\u7e54\u306e\u30aa\u30fc\u30ca\u30fc\u306f\u8ab0\u304c\u30a2\u30af\u30bb\u30b9\u6a29\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u3092\u660e\u78ba\u306b\u628a\u63e1\u3057\u3001\u30e6\u30fc\u30b6\u30fc\u3092\u8fc5\u901f\u306b\u8ffd\u52a0\u30fb\u524a\u9664\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p>\u7d44\u7e54\u306e\u30aa\u30fc\u30ca\u30fc\u306f\u3001Slack\u3084\u305d\u306e\u4ed6\u306e\u901a\u77e5\u3092\u76f4\u63a5\u4f5c\u6210\u3057\u3001\u305d\u308c\u3089\u306e\u901a\u77e5\u3092Lagoon\u7ba1\u7406\u8005\u306e\u52a9\u3051\u3092\u501f\u308a\u305a\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u95a2\u9023\u4ed8\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002</p> <p>\u7d44\u7e54\u306e\u6240\u6709\u8005\u306f\u3001\u7d44\u7e54\u3092\u7ba1\u7406\u3059\u308b\u305f\u3081\u306b\u4ed6\u306e\u6240\u6709\u8005\u3001\u7ba1\u7406\u8005\u3001\u307e\u305f\u306f\u95b2\u89a7\u8005\u3092\u8ffd\u52a0\u304a\u3088\u3073\u524a\u9664\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002</p> <p>\u6ce8\u610f</p> <p>\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u3053\u306e\u30ed\u30fc\u30eb\u306f\u7d44\u7e54\u306e\u30aa\u30fc\u30ca\u30fc\u304c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5185\u3067\u74b0\u5883\u3092\u4f5c\u6210\u3057\u305f\u308a\u3001\u30c7\u30d7\u30ed\u30a4\u3092\u30c8\u30ea\u30ac\u30fc\u3057\u305f\u308a\u3059\u308b\u3053\u3068\u3092\u8a31\u53ef\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u5f7c\u3089\u306f\u81ea\u5206\u81ea\u8eab\u3092\u3001\u305d\u306e\u6a29\u9650\u3092\u4ed8\u4e0e\u3059\u308b\u30ed\u30fc\u30eb\u3092\u6301\u3064\u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3068\u304d\u3001\u7d44\u7e54\u306e\u30aa\u30fc\u30ca\u30fc\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30b0\u30eb\u30fc\u30d7\u306e\u30aa\u30fc\u30ca\u30fc\u3068\u3057\u3066\u8ffd\u52a0\u3055\u308c\u308b\u3053\u3068\u3092\u9078\u629e\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/interacting/rbac/#organization-admin","title":"\u7d44\u7e54\u7ba1\u7406\u8005","text":"<p>\u7d44\u7e54\u7ba1\u7406\u8005\u306e\u5f79\u5272\u306f\u7d44\u7e54\u6240\u6709\u8005\u3068\u540c\u3058\u3067\u3059\u304c\u3001\u3053\u306e\u5f79\u5272\u3067\u306f\u7d44\u7e54\u306e\u6240\u6709\u8005\u3001\u7ba1\u7406\u8005\u3001\u307e\u305f\u306f\u95b2\u89a7\u8005\u306b\u5909\u66f4\u3092\u52a0\u3048\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002</p>"},{"location":"ja/interacting/rbac/#organization-viewer","title":"\u7d44\u7e54\u306e\u30d3\u30e5\u30fc\u30a2","text":"<p>\u7d44\u7e54\u306e\u30d3\u30e5\u30fc\u30ef\u30fc\u306f\u3001\u81ea\u7d44\u7e54\u5185\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3001\u30b0\u30eb\u30fc\u30d7\u3068\u30e6\u30fc\u30b6\u30fc\u306e\u30a2\u30af\u30bb\u30b9\u3001\u901a\u77e5\u3092\u8868\u793a\u3059\u308b\u30a2\u30af\u30bb\u30b9\u6a29\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/interacting/rbac/#group-roles","title":"\u30b0\u30eb\u30fc\u30d7\u306e\u30ed\u30fc\u30eb","text":""},{"location":"ja/interacting/rbac/#owner","title":"\u30aa\u30fc\u30ca\u30fc","text":"<p>\u30aa\u30fc\u30ca\u30fc\u306e\u30ed\u30fc\u30eb\u306f\u3001\u30b0\u30eb\u30fc\u30d7\u3068\u305d\u306e\u95a2\u9023\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5185\u3067\u5168\u3066\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u5f7c\u3089\u306f\u30b0\u30eb\u30fc\u30d7\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\u3057\u3001\u7ba1\u7406\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u3053\u306e\u30ed\u30fc\u30eb\u306b\u306f\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3001\u306a\u305c\u306a\u3089\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3084\u672c\u756a\u74b0\u5883\u3092\u524a\u9664\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u304b\u3089\u3067\u3059\u3002</p>"},{"location":"ja/interacting/rbac/#maintainer","title":"\u30e1\u30f3\u30c6\u30ca","text":"<p>\u30e1\u30f3\u30c6\u30ca\u306e\u30ed\u30fc\u30eb\u306f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u81ea\u4f53\u3084\u672c\u756a\u74b0\u5883\u3092\u524a\u9664\u3059\u308b\u3053\u3068\u3092\u9664\u3044\u3066\u3001\u30b0\u30eb\u30fc\u30d7\u3068\u305d\u306e\u95a2\u9023\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5185\u3067\u4f55\u3067\u3082\u3067\u304d\u307e\u3059\u3002\u5f7c\u3089\u306f\u30b0\u30eb\u30fc\u30d7\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\u3057\u3001\u7ba1\u7406\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/interacting/rbac/#developer","title":"\u958b\u767a\u8005","text":"<p>\u958b\u767a\u8005\u30ed\u30fc\u30eb\u306f\u958b\u767a\u74b0\u5883\u3078\u306eSSH\u30a2\u30af\u30bb\u30b9\u306e\u307f\u304c\u8a31\u53ef\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u30ed\u30fc\u30eb\u306f\u3001\u672c\u756a\u74b0\u5883\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3001\u66f4\u65b0\u3001\u524a\u9664\u3092\u884c\u3046\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002\u672c\u756a\u74b0\u5883\u3092\u30bd\u30fc\u30b9\u3068\u3057\u3066\u540c\u671f\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u3059\u304c\u3001\u5b9b\u5148\u3068\u3057\u3066\u4f7f\u7528\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002\u307e\u305f\u3001\u30b0\u30eb\u30fc\u30d7\u306e\u30e6\u30fc\u30b6\u30fc\u7ba1\u7406\u3082\u884c\u3048\u307e\u305b\u3093\u3002</p> <p>\u91cd\u8981</p> <p>\u3053\u306e\u30ed\u30fc\u30eb\u306f\u3001Git\u30d7\u30c3\u30b7\u30e5\u306b\u3088\u3063\u3066\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u304c\u30c8\u30ea\u30ac\u30fc\u3055\u308c\u308b\u305f\u3081\u3001\u672c\u756a\u74b0\u5883\u306e\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u3092\u9632\u3050\u3053\u3068\u306f\u3042\u308a\u307e\u305b\u3093\u3002Git\u30b5\u30fc\u30d0\u30fc\u304c\u3053\u308c\u3089\u306e\u30e6\u30fc\u30b6\u30fc\u304c\u672c\u756a\u74b0\u5883\u3068\u3057\u3066\u5b9a\u7fa9\u3055\u308c\u305f\u30d6\u30e9\u30f3\u30c1\u306b\u30d7\u30c3\u30b7\u30e5\u3059\u308b\u306e\u3092\u9632\u3050\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/interacting/rbac/#reporter","title":"\u30ec\u30dd\u30fc\u30bf\u30fc","text":"<p>\u30ec\u30dd\u30fc\u30bf\u30fc\u306e\u30ed\u30fc\u30eb\u306f\u3001\u95b2\u89a7\u30a2\u30af\u30bb\u30b9\u306e\u307f\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002\u5f7c\u3089\u306fSSH\u7d4c\u7531\u3067\u74b0\u5883\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u308a\u3001\u305d\u308c\u3089\u3092\u5909\u66f4\u3057\u305f\u308a\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002\u5f7c\u3089\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u30af\u30ea\u30a2\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u30ed\u30fc\u30eb\u306f\u4e3b\u306b\u3001\u30b9\u30c6\u30fc\u30af\u30db\u30eb\u30c0\u30fc\u304cLagoon UI\u3068\u30ed\u30b0\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/interacting/rbac/#guest","title":"\u30b2\u30b9\u30c8","text":"<p>\u30b2\u30b9\u30c8\u306e\u30ed\u30fc\u30eb\u306f\u3001\u4e0a\u8a18\u306e\u30ec\u30dd\u30fc\u30bf\u30fc\u306e\u30ed\u30fc\u30eb\u3068\u540c\u7b49\u306e\u6a29\u9650\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002</p> <p>\u4ee5\u4e0b\u306f\u305d\u306e\u8868\u3067\u3059\u3002 \u5f7c\u3089\u304c\u6301\u3064\u30ed\u30fc\u30eb\u3068\u30a2\u30af\u30bb\u30b9\u3092\u30ea\u30b9\u30c8\u3057\u307e\u3059:</p>"},{"location":"ja/interacting/rbac/#lagoon-100-rbac-permission-matrix","title":"Lagoon 1.0.0 RBAC \u6a29\u9650\u30de\u30c8\u30ea\u30c3\u30af\u30b9","text":"\u81ea\u5206\u81ea\u8eab\u30b2\u30b9\u30c8\u958b\u767a\u8005\u30e1\u30f3\u30c6\u30ca\u30fc\u30aa\u30fc\u30ca\u30fc\u7d44\u7e54\u30d3\u30e5\u30fc\u30a2\u7d44\u7e54\u30aa\u30fc\u30ca\u30fc\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u5168\u4f53\u306e\u6240\u6709\u8005\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u5168\u4f53\u306e\u7ba1\u7406\u8005 \u540d\u524d \u30ea\u30bd\u30fc\u30b9 \u30b9\u30b3\u30fc\u30d7 \u5c5e\u6027 addSshKey ssh_key add userID updateSshKey ssh_key update userID deleteSshKey ssh_key delete userID getUserSshKeys ssh_key view:user userID updateUser user update userID deleteUser user delete userID \u540d\u524d \u30ea\u30bd\u30fc\u30b9 \u30b9\u30b3\u30fc\u30d7 \u5c5e\u6027 getBackupsByEnvironmentId deployment view projectID getEnvironmentsByProjectId environment view projectID getEnvironmentServicesByEnvironmentId environment view projectID getEnvVarsByEnvironmentId env_var environment:view:development projectID getEnvVarsByEnvironmentId env_var environment:view:production projectID getEnvVarsByProjectId env_var project:view projectID addGroup group add getOpenshiftByProjectId openshift view projectID addProject project add getProjectByEnvironmentId project view projectID getProjectByGitUrl project view projectID getProjectByName project view projectID addRestore restore add projectID updateRestore restore update projectID taskDrushCacheClear task drushCacheClear:development projectID taskDrushCacheClear task drushCacheClear:production projectID taskDrushCron task drushCron:development projectID taskDrushCron task drushCron:production projectID getFilesByTaskId task view projectID getTasksByEnvironmentId task view projectID getTaskByRemoteId task view projectID getTaskById task view projectID addUser user add \u540d\u524d \u30ea\u30bd\u30fc\u30b9 \u30b9\u30b3\u30fc\u30d7 \u5c5e\u6027 addBackup backup add projectID getBackupsByEnvironmentId backup view projectID addEnvVariable (to Environment) env_var environment:add:development projectID deleteEnvVariable (from Environment) env_var environment:delete:development projectID getEnvVarsByEnvironmentId env_var environment:viewValue:development projectID addOrUpdateEnvironment environment addOrUpdate:development projectID updateEnvironment environment update:development projectID deleteEnvironment environment delete:development projectID addDeployment environment deploy:development projectID setEnvironmentServices environment update:development projectID deployEnvironmentLatest environment deploy:development projectID deployEnvironmentBranch environment deploy:development projectID deployEnvironmentPullrequest environment deploy:development projectID deployEnvironmentPromote environment deploy:development projectID userCanSshToEnvironment environment ssh:development projectID getNotificationsByProjectId notification view projectID addTask task add:development projectID taskDrushArchiveDump task drushArchiveDump:development projectID taskDrushArchiveDump task drushArchiveDump:production projectID taskDrushSqlDump task drushSqlDump:development projectID taskDrushSqlDump task drushSqlDump:production projectID taskDrushUserLogin task drushUserLogin:destination:development environmentID taskDrushSqlSync task drushSqlSync:source:development projectID taskDrushSqlSync task drushSqlSync:source:production projectID taskDrushSqlSync task drushSqlSync:destination:development projectID taskDrushRsyncFiles task drushRsync:source:development projectID taskDrushRsyncFiles task drushRsync:source:production projectID taskDrushRsyncFiles task drushRsync:destination:development projectID deleteTask task delete projectID updateTask task update projectID uploadFilesForTask task update projectID deleteFilesForTask task delete projectID getBackupsByEnvironmentId deployment view projectID getEnvironmentsByProjectId environment view projectID getEnvironmentServicesByEnvironmentId environment view projectID getEnvVarsByEnvironmentId env_var environment:view:development projectID getEnvVarsByEnvironmentId env_var environment:view:production projectID getEnvVarsByProjectId env_var project:view projectID addGroup group add getOpenshiftByProjectId openshift view projectID addProject project add getProjectByEnvironmentId project view projectID getProjectByGitUrl project view projectID getProjectByName project view projectID addRestore restore add projectID updateRestore restore update projectID taskDrushCacheClear task drushCacheClear:development projectID taskDrushCacheClear task drushCacheClear:production projectID taskDrushCron task drushCron:development projectID taskDrushCron task drushCron:production projectID getFilesByTaskId task view projectID getTasksByEnvironmentId task view projectID getTaskByRemoteId task view projectID getTaskById task view projectID addUser user add \u540d\u524d \u30ea\u30bd\u30fc\u30b9 \u30b9\u30b3\u30fc\u30d7 \u5c5e\u6027 deleteBackup backup delete projectID addEnvVariable (to Project) env_var project:add projectID addEnvVariable (to Environment) env_var environment:add:production projectID deleteEnvVariable env_var delete projectID deleteEnvVariable (from Project) env_var project:delete projectID deleteEnvVariable (from Environment) env_var environment:delete:production projectID getEnvVarsByProjectId env_var project:viewValue projectID getEnvVarsByEnvironmentId env_var environment:viewValue:production projectID addOrUpdateEnvironment environment addOrUpdate:production projectID updateEnvironment environment update:production projectID addDeployment environment deploy:production projectID deleteDeployment deployment delete projectID updateDeployment deployment update projectID setEnvironmentServices environment update:production projectID deployEnvironmentLatest environment deploy:production projectID deployEnvironmentBranch environment deploy:production projectID deployEnvironmentPullrequest environment deploy:production projectID deployEnvironmentPromote environment deploy:production projectID userCanSshToEnvironment environment ssh:production projectID updateGroup group update groupID deleteGroup group delete groupID addUserToGroup group addUser groupID removeUserFromGroup group removeUser groupID addNotificationToProject project addNotification projectID removeNotificationFromProject project removeNotification projectID updateProject project update projectID addGroupsToProject project addGroup projectID removeGroupsFromProject project removeGroup projectID addTask task add:production projectID taskDrushUserLogin task drushUserLogin:destination:production environmentID taskDrushSqlSync task drushSqlSync:destination:production projectID taskDrushRsyncFiles task drushRsync:destination:production projectID addBackup backup add projectID getBackupsByEnvironmentId backup view projectID addEnvVariable (to Environment) env_var environment:add:development projectID deleteEnvVariable (from Environment) env_var environment:delete:development projectID getEnvVarsByEnvironmentId env_var environment:viewValue:development projectID addOrUpdateEnvironment environment addOrUpdate:development projectID updateEnvironment environment update:development projectID deleteEnvironment environment delete:development projectID addDeployment environment deploy:development projectID setEnvironmentServices environment update:development projectID deployEnvironmentLatest environment deploy:development projectID deployEnvironmentBranch environment deploy:development projectID deployEnvironmentPullrequest environment deploy:development projectID deployEnvironmentPromote environment deploy:development projectID getNotificationsByProjectId notification view projectID addTask task add:development projectID taskDrushArchiveDump task drushArchiveDump:development projectID taskDrushArchiveDump task drushArchiveDump:production projectID taskDrushSqlDump task drushSqlDump:development projectID taskDrushSqlDump task drushSqlDump:production projectID taskDrushUserLogin task drushUserLogin:destination:development environmentID taskDrushSqlSync task drushSqlSync:source:development projectID taskDrushSqlSync task drushSqlSync:source:production projectID taskDrushSqlSync task drushSqlSync:destination:development projectID taskDrushRsyncFiles task drushRsync:source:development projectID taskDrushRsyncFiles task drushRsync:source:production projectID taskDrushRsyncFiles task drushRsync:destination:development projectID deleteTask task delete projectID updateTask task update projectID uploadFilesForTask task update projectID deleteFilesForTask task delete projectID getBackupsByEnvironmentId deployment view projectID getEnvironmentsByProjectId environment view projectID getEnvironmentServicesByEnvironmentId environment view projectID getEnvVarsByEnvironmentId env_var environment:view:development projectID getEnvVarsByEnvironmentId env_var environment:view:production projectID getEnvVarsByProjectId env_var project:view projectID addGroup group add getOpenshiftByProjectId openshift view projectID addProject project add getProjectByEnvironmentId project view projectID getProjectByGitUrl project view projectID getProjectByName project view projectID addRestore restore add projectID updateRestore restore update projectID taskDrushCacheClear task drushCacheClear:development projectID taskDrushCacheClear task drushCacheClear:production projectID taskDrushCron task drushCron:development projectID taskDrushCron task drushCron:production projectID getFilesByTaskId task view projectID getTasksByEnvironmentId task view projectID getTaskByRemoteId task view projectID getTaskById task view projectID addUser user add \u540d\u524d \u30ea\u30bd\u30fc\u30b9 \u30b9\u30b3\u30fc\u30d7 \u5c5e\u6027 deleteEnvironment environment delete:production projectID deleteProject project delete projectID getProjectByEnvironmentId project viewPrivateKey projectID getProjectByGitUrl project viewPrivateKey projectID getProjectByName project viewPrivateKey projectID deleteBackup backup delete projectID addEnvVariable (to Project) env_var project:add projectID addEnvVariable (to Environment) env_var environment:add:production projectID deleteEnvVariable env_var delete projectID deleteEnvVariable (from Project) env_var project:delete projectID deleteEnvVariable (from Environment) env_var environment:delete:production projectID getEnvVarsByProjectId env_var project:viewValue projectID getEnvVarsByEnvironmentId env_var environment:viewValue:production projectID addOrUpdateEnvironment environment addOrUpdate:production projectID updateEnvironment environment update:production projectID addDeployment environment deploy:production projectID deleteDeployment deployment delete projectID updateDeployment deployment update projectID setEnvironmentServices environment update:production projectID deployEnvironmentLatest environment deploy:production projectID deployEnvironmentBranch environment deploy:production projectID deployEnvironmentPullrequest environment deploy:production projectID deployEnvironmentPromote environment deploy:production projectID updateGroup group update groupID deleteGroup group delete groupID addUserToGroup group addUser groupID removeUserFromGroup group removeUser groupID addNotificationToProject project addNotification projectID removeNotificationFromProject project removeNotification projectID updateProject project update projectID addGroupsToProject project addGroup projectID removeGroupsFromProject project removeGroup projectID addTask task add:production projectID taskDrushUserLogin task drushUserLogin:destination:production environmentID taskDrushSqlSync task drushSqlSync:destination:production projectID taskDrushRsyncFiles task drushRsync:destination:production projectID addBackup backup add projectID getBackupsByEnvironmentId backup view projectID addEnvVariable (to Environment) env_var environment:add:development projectID deleteEnvVariable (from Environment) env_var environment:delete:development projectID getEnvVarsByEnvironmentId env_var environment:viewValue:development projectID addOrUpdateEnvironment environment addOrUpdate:development projectID updateEnvironment environment update:development projectID deleteEnvironment environment delete:development projectID addDeployment environment deploy:development projectID setEnvironmentServices environment update:development projectID deployEnvironmentLatest environment deploy:development projectID deployEnvironmentBranch environment deploy:development projectID deployEnvironmentPullrequest environment deploy:development projectID deployEnvironmentPromote environment deploy:development projectID getNotificationsByProjectId notification view projectID addTask task add:development projectID taskDrushArchiveDump task drushArchiveDump:development projectID taskDrushArchiveDump task drushArchiveDump:production projectID taskDrushSqlDump task drushSqlDump:development projectID taskDrushSqlDump task drushSqlDump:production projectID taskDrushUserLogin task drushUserLogin:destination:development environmentID taskDrushSqlSync task drushSqlSync:source:development projectID taskDrushSqlSync task drushSqlSync:source:production projectID taskDrushSqlSync task drushSqlSync:destination:development projectID taskDrushRsyncFiles task drushRsync:source:development projectID taskDrushRsyncFiles task drushRsync:source:production projectID taskDrushRsyncFiles task drushRsync:destination:development projectID deleteTask task delete projectID updateTask task update projectID uploadFilesForTask task update projectID deleteFilesForTask task delete projectID getBackupsByEnvironmentId deployment view projectID getEnvironmentsByProjectId environment view projectID getEnvironmentServicesByEnvironmentId environment view projectID getEnvVarsByEnvironmentId env_var environment:view:development projectID getEnvVarsByEnvironmentId env_var environment:view:production projectID getEnvVarsByProjectId env_var project:view projectID addGroup group add getOpenshiftByProjectId openshift view projectID addProject project add getProjectByEnvironmentId project view projectID getProjectByGitUrl project view projectID getProjectByName project view projectID addRestore restore add projectID updateRestore restore update projectID taskDrushCacheClear task drushCacheClear:development projectID taskDrushCacheClear task drushCacheClear:production projectID taskDrushCron task drushCron:development projectID taskDrushCron task drushCron:production projectID getFilesByTaskId task view projectID getTasksByEnvironmentId task view projectID getTaskByRemoteId task view projectID getTaskById task view projectID addUser user add \u540d\u524d \u30ea\u30bd\u30fc\u30b9 \u30b9\u30b3\u30fc\u30d7 \u5c5e\u6027 getOrganizationById organization view organizationId getProjectByEnvironmentId organization viewProject organizationId getGroupsByOrganizationId organization viewGroup organizationId getUsersByOrganizationId organization viewUsers organizationId getUserByEmailAndOrganizationId organization viewUser organizationId getNotificationsByOrganizationId organization viewNotification organizationId \u540d\u524d \u30ea\u30bd\u30fc\u30b9 \u30b9\u30b3\u30fc\u30d7 \u5c5e\u6027 getOrganizationById organization view organizationId getProjectByEnvironmentId organization viewProject organizationId getGroupsByOrganizationId organization viewGroup organizationId getUsersByOrganizationId organization viewUsers organizationId getUserByEmailAndOrganizationId organization viewUser organizationId getNotificationsByOrganizationId organization viewNotification organizationId addProject organization addProject organizationId updateProject organization updateProject organizationId deleteProject organization deleteProject organizationId addGroup organization addGroup organizationId deleteGroup organization removeGroup organizationId addNotificationSlack organization addNotification organizationId updateNotificationSlack organization updateNotification organizationId deleteNotificationSlack organization removeNotification organizationId addUserToOrganization organization addOwner organizationId addUserToOrganization organization addViewer organizationId updateOrganization organization updateOrganization organizationId \u540d\u524d \u30ea\u30bd\u30fc\u30b9 \u7bc4\u56f2 \u5c5e\u6027 addOrUpdateEnvironmentStorage environment storage addNotificationSlack notification add updateNotificationSlack notification update deleteNotificationSlack notification delete addKubernetes kubernetes add updateKubernetes kubernetes update deleteKubernetes kubernetes delete getAllOpenshifts openshift viewAll getAllProjects project viewAll addSshKey ssh_key add userID updateSshKey ssh_key update userID deleteSshKey ssh_key delete userID getUserSshKeys ssh_key view:user userID updateUser user update userID deleteUser user delete userID deleteEnvironment environment delete:production projectID deleteProject project delete projectID getProjectByEnvironmentId project viewPrivateKey projectID getProjectByGitUrl project viewPrivateKey projectID getProjectByName project viewPrivateKey projectID deleteBackup backup delete projectID addEnvVariable (to Project) env_var project:add projectID addEnvVariable (to Environment) env_var environment:add:production projectID deleteEnvVariable env_var delete projectID deleteEnvVariable (from Project) env_var project:delete projectID deleteEnvVariable (from Environment) env_var environment:delete:production projectID getEnvVarsByProjectId env_var project:viewValue projectID getEnvVarsByEnvironmentId env_var environment:viewValue:production projectID addOrUpdateEnvironment environment addOrUpdate:production projectID updateEnvironment environment update:production projectID allEnvironments environment viewAll getEnvironmentStorageMonthByEnvironmentId environment storage getEnvironmentHoursMonthByEnvironmentId environment storage getEnvironmentHitsMonthByEnvironmentId environment storage addOrUpdateEnvironmentStorage environment storage addDeployment environment deploy:production projectID deleteDeployment deployment delete projectID updateDeployment deployment update projectID setEnvironmentServices environment update:production projectID deployEnvironmentLatest environment deploy:production projectID deployEnvironmentBranch environment deploy:production projectID deployEnvironmentPullrequest environment deploy:production projectID deployEnvironmentPromote environment deploy:production projectID updateGroup group update groupID deleteGroup group delete groupID addUserToGroup group addUser groupID removeUserFromGroup group removeUser groupID addNotificationToProject project addNotification projectID removeNotificationFromProject project removeNotification projectID updateProject project update projectID addGroupsToProject project addGroup projectID removeGroupsFromProject project removeGroup projectID addTask task add:production projectID taskDrushUserLogin task drushUserLogin:destination:production environmentID taskDrushSqlSync task drushSqlSync:destination:production projectID taskDrushRsyncFiles task drushRsync:destination:production projectID addBackup backup add projectID getBackupsByEnvironmentId backup view projectID addEnvVariable (to Environment) env_var environment:add:development projectID deleteEnvVariable (from Environment) env_var environment:delete:development projectID getEnvVarsByEnvironmentId env_var environment:viewValue:development projectID addOrUpdateEnvironment environment addOrUpdate:development projectID updateEnvironment environment update:development projectID deleteEnvironment environment delete:development projectID addDeployment environment deploy:development projectID setEnvironmentServices environment update:development projectID deployEnvironmentLatest environment deploy:development projectID deployEnvironmentBranch environment deploy:development projectID deployEnvironmentPullrequest environment deploy:development projectID deployEnvironmentPromote environment deploy:development projectID getNotificationsByProjectId notification view projectID addTask task add:development projectID taskDrushArchiveDump task drushArchiveDump:development projectID taskDrushArchiveDump task drushArchiveDump:production projectID taskDrushSqlDump task drushSqlDump:development projectID taskDrushSqlDump task drushSqlDump:production projectID taskDrushUserLogin task drushUserLogin:destination:development environmentID taskDrushSqlSync task drushSqlSync:source:development projectID taskDrushSqlSync task drushSqlSync:source:production projectID taskDrushSqlSync task drushSqlSync:destination:development projectID taskDrushRsyncFiles task drushRsync:source:development projectID taskDrushRsyncFiles task drushRsync:source:production projectID taskDrushRsyncFiles task drushRsync:destination:development projectID deleteTask task delete projectID updateTask task update projectID uploadFilesForTask task update projectID deleteFilesForTask task delete projectID getBackupsByEnvironmentId deployment view projectID getEnvironmentsByProjectId environment view projectID getEnvironmentServicesByEnvironmentId environment view projectID getEnvVarsByEnvironmentId env_var environment:view:development projectID getEnvVarsByEnvironmentId env_var environment:view:production projectID getEnvVarsByProjectId env_var project:view projectID addGroup group add getOpenshiftByProjectId openshift view projectID addProject project add getProjectByEnvironmentId project view projectID getProjectByGitUrl project view projectID getProjectByName project view projectID addRestore restore add projectID updateRestore restore update projectID taskDrushCacheClear task drushCacheClear:development projectID taskDrushCacheClear task drushCacheClear:production projectID taskDrushCron task drushCron:development projectID taskDrushCron task drushCron:production projectID getFilesByTaskId task view projectID getTasksByEnvironmentId task view projectID getTaskByRemoteId task view projectID getTaskById task view projectID addUser user add getAllOrganizations organization viewAll addOrganization add viewAll updateOrganization update viewAll deleteOrganization delete viewAll getOrganizationById organization view organizationId getProjectByEnvironmentId organization viewProject organizationId getGroupsByOrganizationId organization viewGroup organizationId getUsersByOrganizationId organization viewUsers organizationId getUserByEmailAndOrganizationId organization viewUser organizationId getNotificationsByOrganizationId organization viewNotification organizationId addProject organization addProject organizationId updateProject organization updateProject organizationId deleteProject organization deleteProject organizationId addGroup organization addGroup organizationId deleteGroup organization removeGroup organizationId addNotificationSlack organization addNotification organizationId updateNotificationSlack organization updateNotification organizationId deleteNotificationSlack organization removeNotification organizationId addUserToOrganization organization addOwner organizationId addUserToOrganization organization addViewer organizationId updateOrganization organization updateOrganization organizationId \u540d\u524d \u30ea\u30bd\u30fc\u30b9 \u30b9\u30b3\u30fc\u30d7 \u5c5e\u6027 getEnvironmentStorageMonthByEnvironmentId environment storage getEnvironmentHoursMonthByEnvironmentId environment storage getEnvironmentHitsMonthByEnvironmentId environment storage getAllOpenshifts openshift viewAll addOrUpdateEnvironmentStorage environment storage addNotificationSlack notification add updateNotificationSlack notification update deleteNotificationSlack notification delete addKubernetes kubernetes add updateKubernetes kubernetes update deleteKubernetes kubernetes delete getAllProjects project viewAll addSshKey ssh_key add userID updateSshKey ssh_key update userID deleteSshKey ssh_key delete userID getUserSshKeys ssh_key view:user userID updateUser user update userID deleteUser user delete userID deleteEnvironment environment delete:production projectID deleteProject project delete projectID getProjectByEnvironmentId project viewPrivateKey projectID getProjectByGitUrl project viewPrivateKey projectID getProjectByName project viewPrivateKey projectID deleteBackup backup delete projectID addEnvVariable (to Project) env_var project:add projectID addEnvVariable (to Environment) env_var environment:add:production projectID deleteEnvVariable env_var delete projectID deleteEnvVariable (from Project) env_var project:delete projectID deleteEnvVariable (from Environment) env_var environment:delete:production projectID getEnvVarsByProjectId env_var project:viewValue projectID getEnvVarsByEnvironmentId env_var environment:viewValue:production projectID addOrUpdateEnvironment environment addOrUpdate:production projectID updateEnvironment environment update:production projectID addDeployment environment deploy:production projectID deleteDeployment deployment delete projectID updateDeployment deployment update projectID setEnvironmentServices environment update:production projectID deployEnvironmentLatest environment deploy:production projectID deployEnvironmentBranch environment deploy:production projectID deployEnvironmentPullrequest environment deploy:production projectID deployEnvironmentPromote environment deploy:production projectID updateGroup group update groupID deleteGroup group delete groupID addUserToGroup group addUser groupID removeUserFromGroup group removeUser groupID addNotificationToProject project addNotification projectID removeNotificationFromProject project removeNotification projectID updateProject project update projectID addGroupsToProject project addGroup projectID removeGroupsFromProject project removeGroup projectID addTask task add:production projectID taskDrushUserLogin task drushUserLogin:destination:production environmentID taskDrushSqlSync task drushSqlSync:destination:production projectID taskDrushRsyncFiles task drushRsync:destination:production projectID addBackup backup add projectID getBackupsByEnvironmentId backup view projectID addEnvVariable (to Environment) env_var environment:add:development projectID deleteEnvVariable (from Environment) env_var environment:delete:development projectID getEnvVarsByEnvironmentId env_var environment:viewValue:development projectID addOrUpdateEnvironment environment addOrUpdate:development projectID updateEnvironment environment update:development projectID deleteEnvironment environment delete:development projectID addDeployment environment deploy:development projectID setEnvironmentServices environment update:development projectID deployEnvironmentLatest environment deploy:development projectID deployEnvironmentBranch environment deploy:development projectID deployEnvironmentPullrequest environment deploy:development projectID deployEnvironmentPromote environment deploy:development projectID getNotificationsByProjectId notification view projectID addTask task add:development projectID taskDrushArchiveDump task drushArchiveDump:development projectID taskDrushArchiveDump task drushArchiveDump:production projectID taskDrushSqlDump task drushSqlDump:development projectID taskDrushSqlDump task drushSqlDump:production projectID taskDrushUserLogin task drushUserLogin:destination:development environmentID taskDrushSqlSync task drushSqlSync:source:development projectID taskDrushSqlSync task drushSqlSync:source:production projectID taskDrushSqlSync task drushSqlSync:destination:development projectID taskDrushRsyncFiles task drushRsync:source:development projectID taskDrushRsyncFiles task drushRsync:source:production projectID taskDrushRsyncFiles task drushRsync:destination:development projectID deleteTask task delete projectID updateTask task update projectID uploadFilesForTask task update projectID deleteFilesForTask task delete projectID getBackupsByEnvironmentId deployment view projectID getEnvironmentsByProjectId environment view projectID getEnvironmentServicesByEnvironmentId environment view projectID getEnvVarsByEnvironmentId env_var environment:view:development projectID getEnvVarsByEnvironmentId env_var environment:view:production projectID getEnvVarsByProjectId env_var project:view projectID addGroup group add getOpenshiftByProjectId openshift view projectID addProject project add getProjectByEnvironmentId project view projectID getProjectByGitUrl project view projectID getProjectByName project view projectID addRestore restore add projectID updateRestore restore update projectID taskDrushCacheClear task drushCacheClear:development projectID taskDrushCacheClear task drushCacheClear:production projectID taskDrushCron task drushCron:development projectID taskDrushCron task drushCron:production projectID getFilesByTaskId task view projectID getTasksByEnvironmentId task view projectID getTaskByRemoteId task view projectID getTaskById task view projectID addUser user add getAllOrganizations organization viewAll addOrganization add viewAll updateOrganization update viewAll deleteOrganization delete viewAll getOrganizationById organization view organizationId getProjectByEnvironmentId organization viewProject organizationId getGroupsByOrganizationId organization viewGroup organizationId getUsersByOrganizationId organization viewUsers organizationId getUserByEmailAndOrganizationId organization viewUser organizationId getNotificationsByOrganizationId organization viewNotification organizationId addProject organization addProject organizationId updateProject organization updateProject organizationId deleteProject organization deleteProject organizationId addGroup organization addGroup organizationId deleteGroup organization removeGroup organizationId addNotificationSlack organization addNotification organizationId updateNotificationSlack organization updateNotification organizationId deleteNotificationSlack organization removeNotification organizationId addUserToOrganization organization addOwner organizationId addUserToOrganization organization addViewer organizationId updateOrganization organization updateOrganization organizationId"},{"location":"ja/interacting/ssh/","title":"SSH","text":"<p>Lagoon\u3067\u306f\u3001SSH\u3092\u901a\u3058\u3066\u5b9f\u884c\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u306b\u63a5\u7d9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30b3\u30f3\u30c6\u30ca\u81ea\u4f53\u306b\u306fSSH\u30b5\u30fc\u30d0\u30fc\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u304c\u3001\u4ee3\u308f\u308a\u306bSSH\u3092\u4f7f\u3063\u3066Lagoon\u306b\u63a5\u7d9a\u3057\u3001\u305d\u3053\u304b\u3089Kubernetes API\u3092\u901a\u3058\u3066\u30ea\u30e2\u30fc\u30c8\u30b7\u30a7\u30eb\u63a5\u7d9a\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p>"},{"location":"ja/interacting/ssh/#ssh_1","title":"SSH\u30a2\u30af\u30bb\u30b9\u306e\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3059\u308b","text":""},{"location":"ja/interacting/ssh/#ssh_2","title":"SSH\u30ad\u30fc\u306e\u751f\u6210","text":"<p>\u540c\u3058\u30ad\u30fc\u3092\u8907\u6570\u306e\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30fc\u9593\u3067\u5171\u6709\u3059\u308b\u306e\u3067\u306f\u306a\u304f\u3001\u5404\u30c7\u30d0\u30a4\u30b9\u3054\u3068\u306b\u5225\u3005\u306eSSH\u30ad\u30fc\u3092\u751f\u6210\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002\u5404\u30b7\u30b9\u30c6\u30e0\u3067\u306eSSH\u30ad\u30fc\u306e\u751f\u6210\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u4ee5\u4e0b\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/interacting/ssh/#osxmac","title":"OSX(Mac)","text":"<p>Mac</p>"},{"location":"ja/interacting/ssh/#linuxubuntu","title":"Linux(Ubuntu)","text":"<p>Linux</p>"},{"location":"ja/interacting/ssh/#ssh_3","title":"SSH\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8","text":""},{"location":"ja/interacting/ssh/#osxmac_1","title":"OSX(Mac)","text":"<p>OSX\u306f\u3001\u8d77\u52d5\u6642\u306b\u8a2d\u5b9a\u3055\u308c\u305fSSH\u30ad\u30fc\u3092\u30ed\u30fc\u30c9\u3059\u308b\u3088\u3046\u306bSSH\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u3053\u308c\u306b\u3088\u308a\u554f\u984c\u304c\u767a\u751f\u3059\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u306e\u6a5f\u80fd\u306e\u8a2d\u5b9a\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u3001\u3053\u3061\u3089\u306e\u30ac\u30a4\u30c9\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044:https://www.backarapper.com/add-ssh-keys-to-ssh-agent-on-startup-in-macos/</p>"},{"location":"ja/interacting/ssh/#linux","title":"Linux","text":"<p>Linux\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u306f\u3001<code>ssh-agent</code>\u306e\u4f7f\u7528\u65b9\u6cd5\u306b\u3088\u308a\u307e\u3059\u3002\u4e00\u822c\u7684\u306a\u30ac\u30a4\u30c9\u306f\u3053\u3053\u306b\u3042\u308a\u307e\u3059:https://www.ssh.com/academy/ssh/agent</p>"},{"location":"ja/interacting/ssh/#windows_1","title":"Windows","text":"<p>\u6700\u8fd1\u3067\u306fWindows\u3067\u306eSSH\u30ad\u30fc\u306e\u30b5\u30dd\u30fc\u30c8\u304c\u5927\u5e45\u306b\u5411\u4e0a\u3057\u3001\u73fe\u5728\u3067\u306f\u30cd\u30a4\u30c6\u30a3\u30d6\u306b\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u3059\u3002Windows 10\u306eSSH\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306e\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u306e\u4fbf\u5229\u306a\u30ac\u30a4\u30c9\u306f\u3053\u3053\u306b\u3042\u308a\u307e\u3059:https://richardballard.co.uk/ssh-keys-on-windows-10/</p>"},{"location":"ja/interacting/ssh/#ssh_4","title":"SSH\u30ad\u30fc\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9","text":""},{"location":"ja/interacting/ssh/#ui","title":"UI\u3092\u901a\u3058\u3066","text":"<p>SSH\u30ad\u30fc\u3092UI\u3092\u901a\u3058\u3066\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3067\u304d\u307e\u3059\u3002\u901a\u5e38\u901a\u308a\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u53f3\u4e0a\u306e\u89d2\u306b\u3042\u308b\u8a2d\u5b9a\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059:</p> <p></p> <p>\u6b21\u306b\u3001SSH\u30ad\u30fc\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3067\u304d\u308b\u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u3001\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u305f\u30ad\u30fc\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u30ad\u30fc\u3092\u30c6\u30ad\u30b9\u30c8\u30dc\u30c3\u30af\u30b9\u306b\u8cbc\u308a\u4ed8\u3051\u3001\u540d\u524d\u3092\u4ed8\u3051\u3066\u300c\u8ffd\u52a0\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\u305d\u308c\u3060\u3051\u3067\u3059\uff01\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u8ffd\u52a0\u306e\u30ad\u30fc\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"ja/interacting/ssh/#_1","title":"\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u7d4c\u7531","text":"<p>\u30e6\u30fc\u30b6\u30fc\u306bSSH\u30ad\u30fc\u3092\u8ffd\u52a0\u3059\u308b\u305f\u3081\u306eLagoon API\u3092GraphQL\u7d4c\u7531\u3067\u4f7f\u7528\u3059\u308b\u4e00\u822c\u7684\u306a\u4f8b\u306f\u3001\u3053\u3061\u3089\u306b\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/interacting/ssh/#ssh_5","title":"\u30dd\u30c3\u30c9\u3078\u306eSSH\u63a5\u7d9a","text":""},{"location":"ja/interacting/ssh/#_2","title":"\u63a5\u7d9a","text":"<p>\u63a5\u7d9a\u306f\u76f4\u63a5\u7684\u3067\u3001\u6b21\u306e\u30d1\u30bf\u30fc\u30f3\u306b\u5f93\u3044\u307e\u3059:</p> SSH<pre><code>ssh -p [PORT] -t [PROJECT-ENVIRONMENT-NAME]@[HOST]\n</code></pre> <ul> <li><code>PORT</code> - \u30ea\u30e2\u30fc\u30c8\u30b7\u30a7\u30eb\u306eSSH\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u30dd\u30fc\u30c8(amazee.io\u306e\u5834\u5408:<code>22</code>)\u3002</li> <li><code>HOST</code> - \u30ea\u30e2\u30fc\u30c8\u30b7\u30a7\u30eb\u306eSSH\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u30db\u30b9\u30c8(amazee.io\u306e\u5834\u5408<code>ssh.example.com</code>)\u3002</li> <li><code>PROJECT-ENVIRONMENT-NAME</code> - \u63a5\u7d9a\u3057\u305f\u3044\u74b0\u5883\u3002\u3053\u308c\u306f\u901a\u5e38<code>PROJECTNAME-ENVIRONMENT</code>\u306e\u30d1\u30bf\u30fc\u30f3\u3067\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002</li> </ul> <p>\u4f8b\u3048\u3070:</p> SSH example<pre><code>ssh -p 22 -t drupal-example-main@ssh.example.com\n</code></pre> <p>\u3053\u308c\u306b\u3088\u308a\u3001<code>main</code>\u74b0\u5883\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8<code>drupal-example</code>\u306b\u63a5\u7d9a\u3057\u307e\u3059\u3002</p>"},{"location":"ja/interacting/ssh/#_3","title":"\u30dd\u30c3\u30c9/\u30b5\u30fc\u30d3\u30b9\u3001\u30b3\u30f3\u30c6\u30ca\u5b9a\u7fa9","text":"<p>\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u30ea\u30e2\u30fc\u30c8\u30b7\u30a7\u30eb\u306f\u30bf\u30a4\u30d7<code>cli</code>\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u30b3\u30f3\u30c6\u30ca\u306b\u63a5\u7d9a\u3057\u3088\u3046\u3068\u3057\u307e\u3059\u3002\u4ed6\u306e\u30dd\u30c3\u30c9/\u30b5\u30fc\u30d3\u30b9\u306b\u63a5\u7d9a\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5b9a\u7fa9\u3067\u304d\u307e\u3059:</p> SSH to another service<pre><code>ssh -p [PORT] -t [\u30d7\u30ed\u30b8\u30a7\u30af\u30c8-\u74b0\u5883\u540d]@[\u30db\u30b9\u30c8] service=[\u30b5\u30fc\u30d3\u30b9\u540d]\n</code></pre> <p>\u3042\u306a\u305f\u306e\u30dd\u30c3\u30c9/\u30b5\u30fc\u30d3\u30b9\u306b\u8907\u6570\u306e\u30b3\u30f3\u30c6\u30ca\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u5834\u5408\u3001Lagoon\u306f\u3042\u306a\u305f\u3092\u6700\u521d\u306b\u5b9a\u7fa9\u3055\u308c\u305f\u30b3\u30f3\u30c6\u30ca\u306b\u63a5\u7d9a\u3057\u307e\u3059\u3002\u307e\u305f\u3001\u63a5\u7d9a\u3057\u305f\u3044\u7279\u5b9a\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059:</p> \u30b3\u30f3\u30c6\u30ca\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002<pre><code>ssh -p [\u30dd\u30fc\u30c8] -t [\u30d7\u30ed\u30b8\u30a7\u30af\u30c8-\u74b0\u5883\u540d]@[\u30db\u30b9\u30c8] service=[\u30b5\u30fc\u30d3\u30b9\u540d] container=[\u30b3\u30f3\u30c6\u30ca\u540d]\n</code></pre> <p>\u4f8b\u3048\u3070\u3001<code>nginx</code>\u30dd\u30c3\u30c9\u5185\u306e<code>php</code>\u30b3\u30f3\u30c6\u30ca\u306b\u63a5\u7d9a\u3059\u308b\u306b\u306f:</p> SSH to php container<pre><code>ssh -p 22 -t drupal-example-main@sssh.example.com service=nginx container=php\n</code></pre>"},{"location":"ja/interacting/ssh/#_4","title":"\u30d5\u30a1\u30a4\u30eb\u306e\u30b3\u30d4\u30fc","text":"<p>\u4e00\u822c\u7684\u306a\u30b1\u30fc\u30b9\u3067\u3001\u30d5\u30a1\u30a4\u30eb\u3092<code>cli</code>\u30dd\u30c3\u30c9\u306b\u30b3\u30d4\u30fc\u3059\u308b\u3053\u3068\u306f\u3001\u901a\u5e38\u306eSSH\u4e92\u63db\u30c4\u30fc\u30eb\u3092\u4f7f\u3063\u3066\u9054\u6210\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/interacting/ssh/#scp","title":"scp","text":"Copy file with scp<pre><code>scp -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -P 22 [\u30ed\u30fc\u30ab\u30eb\u30d1\u30b9] [\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d]-[\u74b0\u5883\u540d]@ssh.example.com:[\u30ea\u30e2\u30fc\u30c8\u30d1\u30b9]\n</code></pre>"},{"location":"ja/interacting/ssh/#rsync","title":"rsync","text":"Copy files with rsync<pre><code>rsync --rsh='ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -p 22' [\u30ed\u30fc\u30ab\u30eb\u30d1\u30b9] [\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d]-[\u74b0\u5883\u540d]@ssh.example.com:[\u30ea\u30e2\u30fc\u30c8\u30d1\u30b9]\n</code></pre>"},{"location":"ja/interacting/ssh/#tar","title":"tar","text":"Bash<pre><code>ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -P 22 [\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d]-[\u74b0\u5883\u540d]@ssh.example.com tar -zcf - [\u30ea\u30e2\u30fc\u30c8\u30d1\u30b9] | tar -zxf - -C /tmp/\n</code></pre>"},{"location":"ja/interacting/ssh/#cli","title":"\u975eCLI\u30dd\u30c3\u30c9/\u30b5\u30fc\u30d3\u30b9\u306e\u6307\u5b9a","text":"<p>\u307e\u308c\u306a\u30b1\u30fc\u30b9\u3067\u3001\u975eCLI\u30b5\u30fc\u30d3\u30b9\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 <code>service=...</code>\u304a\u3088\u3073/\u307e\u305f\u306f<code>container=...</code>\u5f15\u6570\u306f\u30b3\u30d4\u30fc\u30b3\u30de\u30f3\u30c9\u306b\u3042\u308a\u307e\u3059\u3002</p> <p><code>tar</code>\u3092<code>ssh</code>\u63a5\u7d9a\u3092\u901a\u3057\u3066\u30d1\u30a4\u30d7\u3059\u308b\u3053\u3068\u306f\u6700\u3082\u5358\u7d14\u306a\u65b9\u6cd5\u3067\u3001\u901a\u5e38\u306e<code>tar</code>\u30d5\u30e9\u30b0\u3092\u7528\u3044\u3066\u30d5\u30a1\u30a4\u30eb\u3084\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3092\u30b3\u30d4\u30fc\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3067\u304d\u307e\u3059:</p> Bash<pre><code>ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -P 32222 [\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d]-[\u74b0\u5883\u540d]@ssh.example.com service=solr tar -zcf - [\u30ea\u30e2\u30fc\u30c8\u30d1\u30b9] | tar -zxf - -C /tmp/\n</code></pre> <p>\u307e\u305f\u3001Lagoon\u306eSSH\u30b5\u30fc\u30d3\u30b9\u306b\u5fc5\u8981\u306a\u5f62\u3067<code>ssh</code>\u306e\u5f15\u6570\u3092\u4e26\u3079\u66ff\u3048\u308b\u30e9\u30c3\u30d1\u30fc\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u7528\u3044\u3066<code>rsync</code>\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059:</p> Bash<pre><code>#!/usr/bin/env sh\nsvc=$1 user=$3 host=$4\nshift 4\nexec ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -p 22 -l \"$user\" \"$host\" \"$svc\" \"$@\"\n</code></pre> <p>\u305d\u308c\u3092\u5b9f\u884c\u53ef\u80fd\u306a\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8<code>rsh.sh</code>\u306b\u5165\u308c\u3066\u3001<code>rsync</code>\u30b3\u30de\u30f3\u30c9\u3067<code>service=...</code>\u3092\u6307\u5b9a\u3057\u307e\u3059:</p> rsync to non-CLI pod<pre><code>rsync --rsh=\"/path/to/rsh.sh service=cli\" /tmp/foo [\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d]-[\u74b0\u5883\u540d]@sssh.example.com:/tmp/foo\n</code></pre> <p>\u3053\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u3001<code>container=...</code>\u5f15\u6570\u3082\u51e6\u7406\u3059\u308b\u3088\u3046\u306b\u8abf\u6574\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/installing-lagoon/efs-provisioner/","title":"EFS\u30d7\u30ed\u30d3\u30b8\u30e7\u30ca\u30fc","text":"<p>\u60c5\u5831</p> <p>\u3053\u308c\u306fAWS\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u306e\u307f\u9069\u7528\u3055\u308c\u307e\u3059\u3002</p> <ol> <li> <p>Helm\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\u3057\u307e\u3059:</p> Helm\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0<pre><code>helm repo add stable https://charts.helm.sh/stable\n</code></pre> </li> <li> <p>\u8a2d\u5b9a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b<code>efs-provisioner-values.yml</code>\u3092\u4f5c\u6210\u3057\u3001\u5024\u3092\u66f4\u65b0\u3057\u307e\u3059:</p> efs-provisioner-values.yml<pre><code>efsProvisioner:\nefsFileSystemId: &lt;efsFileSystemId&gt;\nawsRegion: &lt;awsRegion&gt;\npath: /\nprovisionerName: example.com/aws-efs\nstorageClass:\nname: bulk\nisDefault: false\nreclaimPolicy: Delete\nmountOptions: []\nglobal:\ndeployEnv: prod\n</code></pre> </li> <li> <p>EFS\u30d7\u30ed\u30d3\u30b8\u30e7\u30ca\u30fc\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059:</p> EFS\u30d7\u30ed\u30d3\u30b8\u30e7\u30ca\u30fc\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb<pre><code>helm upgrade --install --create-namespace \\\n--namespace efs-provisioner --wait \\\n-f efs-provisioner-values.yaml \\\nefs-provisioner stable/efs-provisioner\n</code></pre> </li> </ol>"},{"location":"ja/lagoonizing/","title":"\u65e2\u5b58\u306e\u30b5\u30a4\u30c8\u3092Lagoonizing","text":"<p>\u300cLagoonizing\u300d\u3068\u306f\u3001\u65e2\u5b58\u306e\u30b5\u30a4\u30c8\u3092Lagoon\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306b\u9069\u5fdc\u3055\u305b\u308b\u3053\u3068\u3067\u3001\u901a\u5e38\u306f\u96e3\u3057\u304f\u306a\u3044\u4f5c\u696d\u3067\u3059\uff08\u305f\u3060\u3057\u3001\u30b5\u30a4\u30c8\u3084\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u306b\u3088\u308a\u7570\u306a\u308a\u307e\u3059\uff09\u3002\u300cLagoonizing\u300d\u306b\u306f\u3044\u304f\u3064\u304b\u306e\u624b\u9806\u304c\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u3002\u3053\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u7c21\u5358\u306b\u3059\u308b\u305f\u3081\u306e\u30b9\u30c6\u30c3\u30d7\u30d0\u30a4\u30b9\u30c6\u30c3\u30d7\u306e\u30ac\u30a4\u30c9\u3092\u307e\u3068\u3081\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/lagoonizing/#_1","title":"\u8981\u4ef6","text":"<p>\u3042\u306a\u305f\u306e\u30b7\u30b9\u30c6\u30e0\u304c\u30ed\u30fc\u30ab\u30eb\u3067Lagoon\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306e\u8981\u4ef6\u3092\u6e80\u305f\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/lagoonizing/#_2","title":"\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u74b0\u5883","text":"<p>\u30ed\u30fc\u30ab\u30eb\u3067\u306e\u958b\u767a\u74b0\u5883\u306e\u8a2d\u5b9a\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u3053\u3061\u3089\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002Pygmy\u307e\u305f\u306fLando\u306e\u3044\u305a\u308c\u304b\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/lagoonizing/#git","title":"\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u3068Git","text":"<p>Lagoon\u3068\u306e\u3084\u308a\u53d6\u308a\u306b\u306f\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304c\u5fc5\u8981\u3067\u3059\u3057\u3001Git\u3082\u4f7f\u7528\u3057\u307e\u3059\u306e\u3067\u3001\u3053\u308c\u3089\u304c\u6e96\u5099\u3067\u304d\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/lagoonizing/#_3","title":"\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3","text":"<p>\u30bf\u30b9\u30af\u306e\u5b9f\u884c\u306b\u306f\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u3092\u4f7f\u7528\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002OS\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30c4\u30fc\u30eb\u3092\u542b\u3081\u3001\u4f55\u3092\u4f7f\u7528\u3057\u3066\u3044\u305f\u3060\u3044\u3066\u3082\u69cb\u3044\u307e\u305b\u3093\u3002\u4ee5\u4e0b\u306b\u3044\u304f\u3064\u304b\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u793a\u3057\u307e\u3059:</p> <ul> <li>iTerm2 (Mac)</li> <li>PowerShell (Windows)</li> <li>Fish (Mac, Windows, Linux)</li> <li>Tabby (Mac, Windows, Linux)</li> </ul>"},{"location":"ja/lagoonizing/#git_1","title":"Git\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u307e\u3060Git\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001 \u4f55\u3089\u304b\u306e\u5f62\u3067Git\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u3002\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u3001GUI\u3001\u4f55\u3067\u3082\u69cb\u3044\u307e\u305b\u3093(\u79c1\u305f\u3061\u306e\u4f8b\u3067\u306f\u3001\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u3092\u4f7f\u7528\u3057\u307e\u3059)\u3002\u4ee5\u4e0b\u306b\u3044\u304f\u3064\u304b\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u793a\u3057\u307e\u3059:</p> <ul> <li>Git\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb (Mac\u3001Windows\u3001Linux)</li> <li>SourceTree (Mac\u3001Windows)</li> <li>GitHub Desktop (Mac\u3001Windows)</li> <li>GitKraken (Mac\u3001Windows\u3001Linux - \u516c\u958b\u30ea\u30dd\u30b8\u30c8\u30ea\u306f\u7121\u6599)</li> </ul>"},{"location":"ja/lagoonizing/#lagoon","title":"Lagoon\u7ba1\u7406\u8005\u304c\u5fc5\u8981\u3068\u3059\u308b\u3082\u306e","text":"<p>Lagoon\u3092\u8a2d\u5b9a\u3059\u308bLagoon\u7ba1\u7406\u8005\u306f\u3001\u5404\u7a2e\u60c5\u5831\u304c\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u3002\u8a73\u7d30\u306f\u3053\u3061\u3089\u3002</p>"},{"location":"ja/lagoonizing/#webhooks","title":"Webhooks\u306e\u8a2d\u5b9a","text":"<p>\u6b21\u306b\u3001Git\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u305f\u3081\u306ewebhooks\u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u306e\u624b\u9806\u306f\u3053\u3061\u3089\u304b\u3089\u3054\u78ba\u8a8d\u3044\u305f\u3060\u3051\u307e\u3059\u3002</p>"},{"location":"ja/lagoonizing/#docker-composeyml","title":"<code>docker-compose.yml</code>","text":"<p><code>docker-compose.yml</code>\u30d5\u30a1\u30a4\u30eb\u306f\u3001Lagoon\u306b\u304a\u3044\u3066\u4ee5\u4e0b\u306e\u76ee\u7684\u3067\u4f7f\u7528\u3055\u308c\u307e\u3059:</p> <ul> <li>\u3069\u306e\u30b5\u30fc\u30d3\u30b9/\u30b3\u30f3\u30c6\u30ca\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3079\u304d\u304b\u3092\u5b66\u3076\u3002</li> <li>\u30b3\u30f3\u30c6\u30ca\u306e\u30a4\u30e1\u30fc\u30b8\u304c\u3069\u306e\u3088\u3046\u306b\u30d3\u30eb\u30c9\u3055\u308c\u308b\u304b\u3092\u5b9a\u7fa9\u3059\u308b\u3002</li> <li>\u6c38\u7d9a\u30dc\u30ea\u30e5\u30fc\u30e0\u306a\u3069\u306e\u8ffd\u52a0\u8a2d\u5b9a\u3092\u5b9a\u7fa9\u3059\u308b\u3002</li> </ul> <p>\u3055\u3089\u306b\u8a73\u3057\u3044\u60c5\u5831\u306f<code>docker-compose.yml</code>\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044.</p> <p><code>docker-compose.yml</code>\u30d5\u30a1\u30a4\u30eb\u306f\u3001\u3042\u306a\u305f\u306e\u30b5\u30a4\u30c8\u3092Lagoon\u306b\u5bfe\u5fdc\u3055\u305b\u308b\u305f\u3081\u306b\u4f5c\u6210\u30fb\u8a2d\u5b9a\u3059\u308b2\u3064\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u3046\u3061\u306e1\u3064\u3067\u3059\u3002</p> <p><code>Docker-compose</code>(\u30c4\u30fc\u30eb)\u306f\u3001YAML\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u3092\u53b3\u683c\u306b\u691c\u8a3c\u3059\u308b\u306e\u3067\u3001\u30b5\u30fc\u30d3\u30b9\u5b9a\u7fa9\u306e\u30e9\u30d9\u30eb\u5185\u3067\u306e\u307f\u8a2d\u5b9a\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p>\u8b66\u544a</p> <p>Lagoon\u306f<code>docker-compose.yml</code>\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u30e9\u30d9\u30eb\u3001\u30b5\u30fc\u30d3\u30b9\u540d\u3001\u30a4\u30e1\u30fc\u30b8\u540d\u3001\u30d3\u30eb\u30c9\u5b9a\u7fa9\u306e\u307f\u3092\u8aad\u307f\u8fbc\u307f\u307e\u3059\u3002\u30dd\u30fc\u30c8\u3001\u74b0\u5883\u5909\u6570\u3001\u30dc\u30ea\u30e5\u30fc\u30e0\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3001\u30ea\u30f3\u30af\u3001\u30e6\u30fc\u30b6\u30fc\u306a\u3069\u306e\u5b9a\u7fa9\u306f\u7121\u8996\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u306f\u610f\u56f3\u7684\u306a\u3082\u306e\u3067\u3001<code>docker-compose</code>\u30d5\u30a1\u30a4\u30eb\u306f\u3042\u306a\u305f\u306e\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u8a2d\u5b9a\u3092\u5b9a\u7fa9\u3059\u308b\u305f\u3081\u306e\u3082\u306e\u3067\u3059\u3002Lagoon\u306f<code>lagoon.type</code>\u304b\u3089\u3042\u306a\u305f\u304c\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u3044\u308b\u30b5\u30fc\u30d3\u30b9\u306e\u30bf\u30a4\u30d7\u3092\u5b66\u3073\u3001\u305d\u306e\u7d50\u679c\u3001\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u304c\u5fc5\u8981\u3068\u3059\u308b\u53ef\u80fd\u6027\u306e\u3042\u308b\u30dd\u30fc\u30c8\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3001\u305d\u306e\u4ed6\u306e\u8ffd\u52a0\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u77e5\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p>\u57fa\u672c\u7684\u306a\u30b5\u30fc\u30d3\u30b9\u306e\u8a2d\u5b9a\u65b9\u6cd5\u3092\u3044\u304f\u3064\u304b\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u3053\u306e\u4f8b\u3067\u306f\u3001Drupal\u3001Laravel\u3001\u305d\u306e\u4ed6\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u30b7\u30b9\u30c6\u30e0\u306a\u3069\u3001\u591a\u304f\u306e\u30b7\u30b9\u30c6\u30e0\u306b\u5fc5\u8981\u306aNGINX\u3001PHP\u3001MariaDB\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002</p> <p>\u4ee5\u4e0b\u306f\u3001Drupal\u7528\u306e<code>docker-compose.yml</code>\u30d5\u30a1\u30a4\u30eb\u306e\u4f8b\u3067\u3059:</p> docker-compose.yml<pre><code>version: '2.3'\nx-lagoon-project:\n# Lagoon\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\uff08\u3053\u3053\u3092\u7de8\u96c6\u3059\u308b\u5834\u5408\u306f\u3001&amp;lagoon-project\u3092\u4fdd\u6301\u3057\u3066\u304f\u3060\u3055\u3044\uff09\n&amp;lagoon-project drupal-example\nx-volumes:\n&amp;default-volumes\n# Docker\u30b3\u30f3\u30c6\u30ca\u306b\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u30de\u30a6\u30f3\u30c8\u3057\u305f\u3044\u3059\u3079\u3066\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u5b9a\u7fa9\u3057\u307e\u3059\nvolumes:\n- .:/app:delegated\nx-environment:\n&amp;default-environment\nLAGOON_PROJECT: *lagoon-project\n# \u30ed\u30fc\u30ab\u30eb\u3067\u4f7f\u7528\u3059\u308b\u30eb\u30fc\u30c8\u3002pygmy\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u3053\u306e\u30eb\u30fc\u30c8\u306f *\u5fc5\u305a* .docker.amazee.io\u3067\u7d42\u308f\u308b\u3088\u3046\u306b\u3057\u3066\u304f\u3060\u3055\u3044\nLAGOON_ROUTE: http://drupal-example.docker.amazee.io\n# \u30b7\u30b9\u30c6\u30e0\u3092\u672c\u756a\u74b0\u5883\u306e\u3088\u3046\u306b\u52d5\u4f5c\u3055\u305b\u305f\u3044\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u884c\u306e\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u89e3\u9664\u3057\u3066\u304f\u3060\u3055\u3044\n#LAGOON_ENVIRONMENT_TYPE: production\n# xdebug\u3092\u6709\u52b9\u306b\u3057\u3001`docker-compose up -d`\u3067\u518d\u8d77\u52d5\u3057\u305f\u3044\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u884c\u306e\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u89e3\u9664\u3057\u3066\u304f\u3060\u3055\u3044\n#XDEBUG_ENABLE: \"true\"\nx-user:\n&amp;default-user\n# \u30b3\u30f3\u30c6\u30ca\u304c\u5b9f\u884c\u3059\u308b\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30e6\u30fc\u30b6\u30fc\u3002Linux\u4e0a\u3067id `1000`\u4ee5\u5916\u306e\u30e6\u30fc\u30b6\u30fc\u3068\u3057\u3066\u5b9f\u884c\u3059\u308b\u5834\u5408\u306b\u306f\u3053\u308c\u3092\u5909\u66f4\u3057\u307e\u3059\u3002\nuser: '1000'\nservices:\nnginx:\nbuild:\ncontext: .\ndockerfile: nginx.dockerfile\nlabels:\nlagoon.type: nginx-php-persistent\nlagoon.persistent: /app/web/sites/default/files/\nphp:\nbuild:\ncontext: .\ndockerfile: php.dockerfile\nlabels:\nlagoon.type: nginx-php-persistent\nlagoon.name: nginx\nlagoon.persistent: /app/web/sites/default/files/\nmariadb:\nimage: uselagoon/mariadb-10.11-drupal\nlabels:\nlagoon.type: mariadb\n</code></pre> <p>\u305d\u308c\u305e\u308c\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u4f55\u3092\u610f\u5473\u3059\u308b\u304b\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002</p>"},{"location":"ja/lagoonizing/#_4","title":"\u57fa\u672c\u8a2d\u5b9a","text":"<p><code>x-lagoon-project</code>: \u3053\u308c\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30de\u30b7\u30f3\u540d\u3067\u3059\u3001\u3053\u3053\u3067\u5b9a\u7fa9\u3057\u307e\u3059\u3002\"drupal-example\"\u3068\u3044\u3046\u4f8b\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002</p> <p><code>x-volumes</code>: \u3053\u308c\u306fLagoon\u306b\u30b3\u30f3\u30c6\u30ca\u306b\u30de\u30a6\u30f3\u30c8\u3059\u308b\u3082\u306e\u3092\u6307\u793a\u3057\u307e\u3059\u3002\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f<code>/app</code>\u306b\u5b58\u5728\u3057\u307e\u3059\u304c\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u3053\u308c\u3092\u8ffd\u52a0\u307e\u305f\u306f\u5909\u66f4\u3067\u304d\u307e\u3059\u3002</p> <p><code>x-environment</code>:</p> <ul> <li>\u3053\u3053\u3067\u30ed\u30fc\u30ab\u30eb\u958b\u767aURL\u3092\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002Pygmy\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u3001<code>.docker.amazee.io.</code>\u3067\u7d42\u308f\u3089\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002</li> <li>\u672c\u756a\u74b0\u5883\u3068\u5168\u304f\u540c\u3058\u74b0\u5883\u3092\u518d\u73fe\u3057\u305f\u3044\u5834\u5408\u306f\u3001<code>LAGOON_ENVIRONMENT_TYPE: production</code>\u306e\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u89e3\u9664\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>x-debug\u3092\u6709\u52b9\u306b\u3057\u305f\u3044\u5834\u5408\u306f\u3001<code>DEBUG_ENABLE: \"true\"</code>\u306e\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u89e3\u9664\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul> <p><code>x-user</code>: \u3053\u308c\u3092\u5909\u66f4\u3059\u308b\u5fc5\u8981\u306f\u307b\u3068\u3093\u3069\u3042\u308a\u307e\u305b\u3093\u304c\u3001Linux\u3092\u4f7f\u7528\u3057\u3066\u3044\u30661000\u4ee5\u5916\u306e\u30e6\u30fc\u30b6\u30fc\u3068\u3057\u3066\u5b9f\u884c\u3057\u305f\u3044\u5834\u5408\u306f\u5909\u66f4\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/lagoonizing/#services","title":"<code>services</code>","text":"<p><code>services</code>\u306f\u30c7\u30d7\u30ed\u30a4\u3057\u305f\u3044\u3059\u3079\u3066\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002<code>docker-compose</code>\u306f\u305d\u308c\u3089\u3092\u30b5\u30fc\u30d3\u30b9\u3068\u547c\u3073\u307e\u3059\u304c\u3001\u5b9f\u969b\u306b\u306f\u30b3\u30f3\u30c6\u30ca\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\u4eca\u5f8c\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u5168\u4f53\u3067\u3053\u308c\u3089\u3092\u30b5\u30fc\u30d3\u30b9\u3068\u547c\u3073\u307e\u3059\u3002</p> <p>\u30b5\u30fc\u30d3\u30b9\u306e \u540d\u524d (\u4e0a\u8a18\u306e\u4f8b\u3067\u306f <code>nginx</code>\u3001<code>php</code>\u3001<code>mariadb</code>) \u306f\u3001\u751f\u6210\u3055\u308c\u308b Kubernetes \u30dd\u30c3\u30c9 (\u3053\u308c\u3082\u5225\u306e\u7528\u8a9e\u3067\u3059\u304c\u3001\u3053\u3053\u3067\u306f\u30b5\u30fc\u30d3\u30b9\u3068\u547c\u3073\u307e\u3059) \u306e\u540d\u524d\u3068\u3057\u3066 Lagoon \u306b\u3088\u3063\u3066\u4f7f\u7528\u3055\u308c\u3001\u3055\u3089\u306b\u5b9a\u7fa9\u3055\u308c\u305f <code>lagoon.type</code> \u306b\u57fa\u3065\u3044\u3066\u4f5c\u6210\u3055\u308c\u308b\u8ffd\u52a0\u306e Kubernetes \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u540d\u524d\u3068\u3057\u3066\u3082\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u306b\u306f\u3001\u30b5\u30fc\u30d3\u30b9\u3001\u30eb\u30fc\u30c8\u3001\u6c38\u7d9a\u30b9\u30c8\u30ec\u30fc\u30b8\u306a\u3069\u304c\u542b\u307e\u308c\u307e\u3059\u3002</p>"},{"location":"ja/lagoonizing/#docker-images","title":"Docker \u30a4\u30e1\u30fc\u30b8","text":"<p>\u30c7\u30d7\u30ed\u30a4\u6bce\u306b\u30b5\u30fc\u30d3\u30b9\u7528\u306eDockerfile\u3092Lagoon\u304c\u30d3\u30eb\u30c9\u3059\u308b\u3088\u3046\u8a2d\u5b9a\u3057\u305f\u3044\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5b9a\u7fa9\u3067\u304d\u307e\u3059:</p> <p><code>build</code> - <code>context</code> : Docker \u306e <code>build</code> \u30b3\u30de\u30f3\u30c9\u306b\u6e21\u3059\u3079\u304d\u30d3\u30eb\u30c9\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u306e\u30d1\u30b9\u3002 - <code>dockerfile</code>: \u30d3\u30eb\u30c9\u3059\u308b Dockerfile \u306e\u5834\u6240\u3068\u540d\u524d\u3002</p> <p>\u6ce8\u610f</p> <p>Lagoon \u306f <code>build: &lt;Dockerfile&gt;</code> \u306e\u77ed\u7e2e\u5f62\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u304a\u3089\u305a\u3001\u3053\u306e\u5f62\u5f0f\u306e\u5b9a\u7fa9\u304c\u898b\u3064\u304b\u308b\u3068\u30d3\u30eb\u30c9\u306b\u5931\u6557\u3057\u307e\u3059\u3002</p> <p><code>image</code> - Dockerfile \u3092\u30d3\u30eb\u30c9\u3059\u308b\u5fc5\u8981\u304c\u306a\u304f\u3001\u65e2\u5b58\u306e Dockerfile \u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u306f\u3001<code>image</code> \u3067\u5b9a\u7fa9\u3057\u307e\u3059\u3002</p> <p>\u3053\u306e\u4f8b\u3067\u306f\u3001\u73fe\u5728\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u30d1\u30b9\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002NGINX \u306f <code>nginx.dockerfile</code> \u3092\u30d3\u30eb\u30c9\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3055\u308c\u3001PHP \u306f <code>php.dockerfile</code> \u3092\u30d3\u30eb\u30c9\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002MariaDB \u306f <code>uselagoon/mariadb-10.11-drupal</code> \u306e\u65e2\u5b58\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002Docker \u30a4\u30e1\u30fc\u30b8\u306e\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u3053\u3061\u3089 \u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/lagoonizing/#types","title":"\u30bf\u30a4\u30d7","text":"<p>Lagoon\u306f\u3001\u6b63\u3057\u3044Kubernetes\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8a2d\u5b9a\u3059\u308b\u305f\u3081\u306b\u3001\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u306e\u30bf\u30a4\u30d7\u3092\u77e5\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>\u3053\u308c\u306f <code>lagoon.type</code> \u30e9\u30d9\u30eb\u3092\u4ecb\u3057\u3066\u884c\u308f\u308c\u307e\u3059\u3002\u9078\u629e\u3067\u304d\u308b\u30bf\u30a4\u30d7\u306f\u591a\u5c90\u306b\u308f\u305f\u308a\u307e\u3059\u3002\u3059\u3079\u3066\u306e\u30bf\u30a4\u30d7\u3068\u8ffd\u52a0\u7684\u306a\u8a2d\u5b9a\u53ef\u80fd\u6027\u3092\u898b\u308b\u305f\u3081\u306b\u3001\u516c\u958b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3 Service Types \u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002</p> <p>\u4f8b\u3067\u306f\u3001PHP\u3068NGINX\u306e\u30b5\u30fc\u30d3\u30b9\u306f <code>nginx-php-persistent</code> \u3068\u3057\u3066\u30bf\u30a4\u30d7\u306e\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306f\u30de\u30eb\u30c1\u30b3\u30f3\u30c6\u30ca\u30dd\u30c3\u30c9\u3068\u547c\u3070\u308c\u308b\u3082\u306e\u3067\u3059\u3002</p>"},{"location":"ja/lagoonizing/#_5","title":"\u30de\u30eb\u30c1\u30b3\u30f3\u30c6\u30ca\u30dd\u30c3\u30c9","text":"<p>Kubernetes\u306f\u5358\u72ec\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u305b\u3093\u3002\u4ee3\u308f\u308a\u306b\u3001\u4e00\u3064\u307e\u305f\u306f\u8907\u6570\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u542b\u3080\u30dd\u30c3\u30c9\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002\u901a\u5e38\u3001Lagoon\u306f\u5b9a\u7fa9\u3055\u308c\u305f <code>docker-compose</code> \u30b5\u30fc\u30d3\u30b9\u306b\u5bfe\u3057\u3066\u3001\u4e00\u3064\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u542b\u3080\u5358\u4e00\u306e\u30dd\u30c3\u30c9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u4e00\u90e8\u306e\u30b1\u30fc\u30b9\u3067\u306f\u3001\u4e92\u3044\u306b\u4f9d\u5b58\u5ea6\u304c\u9ad8\u3044\u305f\u3081\u3001\u4e8c\u3064\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u5358\u4e00\u306e\u30dd\u30c3\u30c9\u5185\u306b\u914d\u7f6e\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002Drupal\u306e\u3088\u3046\u306a\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306ePHP\u30b3\u30fc\u30c9\u3092\u542b\u3080PHP\u3068NGINX\u30b3\u30f3\u30c6\u30ca\u304c\u305d\u306e\u4f8b\u3067\u3059\u3002</p> <p>\u3053\u308c\u3089\u306e\u30b1\u30fc\u30b9\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066Lagoon\u306b\u3069\u306e\u30b5\u30fc\u30d3\u30b9\u304c\u4e00\u7dd2\u306b\u914d\u7f6e\u3055\u308c\u308b\u3079\u304d\u304b\u3092\u6307\u793a\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059:</p> <ol> <li>\u4e8c\u3064\u306e\u30b5\u30fc\u30d3\u30b9\u304c\u5fc5\u8981\u306a<code>lagoon.type</code>\u3092\u6307\u5b9a\u3057\u3066\u3001\u305d\u308c\u305e\u308c\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u5b9a\u7fa9\u3057\u307e\u3059\uff08\u3053\u306e\u4f8b\u3067\u306f\u3001NGINX\u3068PHP\u306e\u30b5\u30fc\u30d3\u30b9\u306b<code>nginx-php-persistent</code>\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\uff09\u3002</li> <li>\u4e8c\u756a\u76ee\u306e\u30b5\u30fc\u30d3\u30b9\u306e<code>lagoon.name</code>\u30e9\u30d9\u30eb\u3092\u4e00\u756a\u76ee\u306e\u30b5\u30fc\u30d3\u30b9\u306b\u4e00\u81f4\u3055\u305b\u3066\u30ea\u30f3\u30af\u3057\u307e\u3059\uff08\u4f8b\u3067\u306f<code>lagoon.name: nginx</code>\u306b\u3088\u308a\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\uff09\u3002</li> </ol> <p>\u3053\u308c\u306b\u3088\u308a\u3001Lagoon\u306f <code>nginx</code> \u3068 <code>php</code> \u306e\u30b5\u30fc\u30d3\u30b9\u304c <code>nginx</code> \u3068\u547c\u3070\u308c\u308b\u30dd\u30c3\u30c9\u306b\u7d50\u5408\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u8a8d\u8b58\u3057\u307e\u3059\u3002</p> <p>Lagoon\u306f2\u3064\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u3046\u3061\u3069\u3061\u3089\u304c\u500b\u3005\u306e\u30b5\u30fc\u30d3\u30b9\u30bf\u30a4\u30d7\u3067\u3042\u308b\u304b(\u3053\u306e\u5834\u5408\u306f <code>nginx</code> \u3068 <code>php</code> )\u3092\u7406\u89e3\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u4e00\u81f4\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u30bf\u30a4\u30d7\u306e\u30b5\u30fc\u30d3\u30b9\u540d\u3092\u691c\u7d22\u3059\u308b\u3053\u3068\u3067\u884c\u3044\u307e\u3059\u3002 <code>nginx-php-persistent</code> \u306f\u3001 <code>docker-compose.yml</code> \u306e\u4e2d\u3067 <code>nginx</code> \u3068\u3044\u3046\u540d\u524d\u306e\u30b5\u30fc\u30d3\u30b9\u3068 <code>php</code> \u3068\u3044\u3046\u540d\u524d\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u671f\u5f85\u3057\u3066\u3044\u307e\u3059\u3002</p> <p>\u30b5\u30fc\u30d3\u30b9\u540d\u3092\u5909\u66f4\u3057\u305f\u3044\u5834\u5408\u3084\u3001<code>nginx-php-persistent</code>\u30bf\u30a4\u30d7\u306e\u8907\u6570\u306e\u30dd\u30c3\u30c9\u304c\u5fc5\u8981\u306a\u5834\u5408\u3001<code>lagoon.deployment.servicetype</code>\u3068\u3044\u3046\u8ffd\u52a0\u306e\u30e9\u30d9\u30eb\u3092\u4f7f\u7528\u3057\u3066\u3001\u5b9f\u969b\u306e\u30b5\u30fc\u30d3\u30b9\u30bf\u30a4\u30d7\u3092\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002</p> <p>\u4ee5\u4e0b\u306b\u3001\u30de\u30eb\u30c1\u30b3\u30f3\u30c6\u30ca\u30dd\u30c3\u30c9\u3092\u3088\u308a\u8a73\u7d30\u306b\u8a2d\u5b9a\u3059\u308b\u4f8b\u3092\u793a\u3057\u307e\u3059:</p> docker-compose.yml<pre><code>nginx:\nbuild:\ncontext: .\ndockerfile: nginx.dockerfile\nlabels:\nlagoon.type: nginx-php-persistent\nlagoon.persistent: /app/web/sites/default/files/\nlagoon.name: nginx # \u3053\u308c\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u3001Lagoon\u306f\u30b3\u30f3\u30c6\u30ca\u306e\u540d\u524d\u3001\u3053\u306e\u5834\u5408\u306fnginx\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\nlagoon.deployment.servicetype: nginx\nphp:\nbuild:\ncontext: .\ndockerfile: php.dockerfile\nlabels:\nlagoon.type: nginx-php-persistent\nlagoon.persistent: /app/web/sites/default/files/\nlagoon.name: nginx # \u3053\u306e\u30b5\u30fc\u30d3\u30b9\u3092Lagoon\u306enginx\u30dd\u30c3\u30c9\u306e\u4e00\u90e8\u306b\u3057\u305f\u3044\u3067\u3059\u3002\nlagoon.deployment.servicetype: php\n</code></pre> <p>docker-compose.yml\u3067\u3067\u304d\u308b\u3053\u3068\u306f\u3082\u3063\u3068\u3042\u308a\u307e\u3059\u304c\u3001\u30b5\u30fc\u30d3\u30b9\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u304c\u6700\u3082\u91cd\u8981\u306a\u90e8\u5206\u3067\u3059\u3002<code>docker-compose.yml</code>\u306b\u95a2\u3059\u308b\u6211\u3005\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u3001\u4ed6\u306b\u4f55\u304c\u3067\u304d\u308b\u304b\u3092\u5b66\u3093\u3067\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/lagoonizing/#lagoonyml","title":"<code>.lagoon.yml</code>","text":"<p><code>.lagoon.yml</code> \u30d5\u30a1\u30a4\u30eb\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u8a2d\u5b9a\u306e\u4e2d\u5fc3\u3068\u306a\u308b\u30d5\u30a1\u30a4\u30eb\u3067\u3001\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u542b\u3093\u3067\u3044\u307e\u3059:</p> <ul> <li>\u30b5\u30a4\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u30eb\u30fc\u30c8\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002</li> <li>\u30d7\u30ec\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u30bf\u30b9\u30af\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002</li> <li>\u30dd\u30b9\u30c8\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u30bf\u30b9\u30af\u3092\u5b9a\u7fa9\u3059\u308b\u3002</li> <li>SSL\u8a3c\u660e\u66f8\u3092\u8a2d\u5b9a\u3059\u308b\u3002</li> <li>\u74b0\u5883\u306e\u305f\u3081\u306ecron\u30b8\u30e7\u30d6\u3092\u8ffd\u52a0\u3059\u308b\u3002</li> </ul> <p><code>.lagoon.yml</code>\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3001Git\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30eb\u30fc\u30c8\u306b\u914d\u7f6e\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>\u4ee5\u4e0b\u306f\u3001Drupal\u30b5\u30a4\u30c8\u7528\u306e\u69d8\u3005\u306a\u8a2d\u5b9a\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u793a\u3059<code>.lagoon.yml</code>\u30d5\u30a1\u30a4\u30eb\u306e\u4f8b\u3067\u3059:</p> .lagoon.yml<pre><code>docker-compose-yaml: docker-compose.yml\nenvironment_variables:\ngit_sha: 'true'\ntasks:\npre-rollout:\n- run:\nname: drush sql-dump\ncommand: mkdir -p /app/web/sites/default/files/private/ &amp;&amp; drush sql-dump --ordered-dump --gzip --result-file=/app/web/sites/default/files/private/pre-deploy-dump.sql.gz\nservice: cli\npost-rollout:\n- run:\nname: drush cim\ncommand: drush -y cim\nservice: cli\nshell: bash\n- run:\nname: drush cr\ncommand: drush -y cr\nservice: cli\nroutes:\ninsecure: Redirect\nenvironments:\nmain:\nmonitoring_urls:\n- \"www.example.com\"\n- \"www.example.com/special_page\"\nroutes:\n- nginx:\n- example.com\n- example.net\n- \"www.example.com\":\ntls-acme: 'true'\ninsecure: Redirect\nhsts: max-age=31536000\n- \"example.ch\":\nAnnotations:\nnginx.ingress.kubernetes.io/permanent-redirect: https://www.example.ch$request_uri\n- www.example.ch\ncronjobs:\n- name: drush cron\nschedule: \"H * * * *\" # 1\u6642\u9593\u306b1\u56decron\u3092\u5b9f\u884c\u3057\u307e\u3059\ncommand: drush cron\nservice: cli\nstaging:\ncronjobs:\n- name: drush cron\nschedule: \"H * * * *\" # 1\u6642\u9593\u306b1\u56decron\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\ncommand: drush cron\nservice: cli\n</code></pre>"},{"location":"ja/lagoonizing/#_6","title":"\u4e00\u822c\u8a2d\u5b9a","text":""},{"location":"ja/lagoonizing/#docker-compose-yaml","title":"<code>docker-compose-yaml</code>","text":"<p>\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u3001\u30d3\u30eb\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u3069\u306e<code>docker-compose</code> YAML\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u7528\u3059\u308b\u3079\u304d\u304b\u3092\u6307\u793a\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u3069\u306e\u30b5\u30fc\u30d3\u30b9\u3068\u30b3\u30f3\u30c6\u30ca\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3079\u304d\u304b\u3092\u5224\u65ad\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f<code>docker-compose.yml</code>\u3067\u3059\u304c\u3001\u7279\u5b9a\u306eLagoon <code>docker-compose</code> YAML\u30d5\u30a1\u30a4\u30eb\u304c\u5fc5\u8981\u306a\u5834\u5408\u306b\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/lagoonizing/#environment_variablesgit_sha","title":"<code>environment_variables.git_sha</code>","text":"<p>\u3053\u306e\u8a2d\u5b9a\u306b\u3088\u308a\u3001\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u305f Git SHA \u3092\u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u633f\u5165\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u7121\u52b9\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u5024\u3092 <code>true</code> \u306b\u8a2d\u5b9a\u3059\u308b\u3068\u3001SHA \u304c\u74b0\u5883\u5909\u6570 <code>LAGOON_GIT_SHA</code> \u3068\u3057\u3066\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/lagoonizing/#tasks","title":"\u30bf\u30b9\u30af","text":"<p>\u30d3\u30eb\u30c9\u30d5\u30ed\u30fc\u306e\u4e2d\u3067\u5b9f\u884c\u3055\u308c\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u306b\u3088\u3063\u3066\u3001\u7570\u306a\u308b\u30bf\u30a4\u30d7\u306e\u30bf\u30b9\u30af\u3092\u5b9a\u7fa9\u3067\u304d\u307e\u3059\uff1a</p>"},{"location":"ja/lagoonizing/#pre-rollout-tasks-pre_rolloutirun","title":"\u30d7\u30ec\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u30bf\u30b9\u30af - <code>pre_rollout.[i].run</code>","text":"<p><code>pre_rollout</code> \u30bf\u30b9\u30af\u3068\u3057\u3066\u5b9a\u7fa9\u3055\u308c\u305f\u30bf\u30b9\u30af\u306f\u3001\u65b0\u3057\u3044\u30a4\u30e1\u30fc\u30b8\u304c\u6b63\u5e38\u306b\u30d3\u30eb\u30c9\u3055\u308c\u305f \u5f8c\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u4f55\u3089\u304b\u306e\u5f62\u3067\u5909\u66f4\u3055\u308c\u308b \u524d \u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3057\u3066\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\u3053\u306e\u6a5f\u80fd\u306b\u3088\u308a\u3001\u305f\u3068\u3048\u3070\u3001\u4e0a\u8a18\u306e\u4f8b\u306e\u3088\u3046\u306b\u3001\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u306e\u5b9f\u884c\u524d\u306b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 \u30c0\u30f3\u30d7\u3092\u4f5c\u6210\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u3067\u554f\u984c\u304c\u767a\u751f\u3057\u305f\u5834\u5408\u306b\u30ed\u30fc\u30eb\u30d0\u30c3\u30af\u3057\u3084\u3059\u304f\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"ja/lagoonizing/#post-rollout-tasks-post_rolloutirun","title":"\u30dd\u30b9\u30c8\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u30bf\u30b9\u30af - <code>post_rollout.[i].run</code>","text":"<p>\u3053\u3053\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u6761\u4ef6\u304c\u6e80\u305f\u3055\u308c\u305f\u5f8c\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3057\u3066\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u306e\u3042\u308b\u30bf\u30b9\u30af\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\uff1a</p> <ul> <li>\u3059\u3079\u3066\u306e\u30a4\u30e1\u30fc\u30b8\u304c\u6b63\u5e38\u306b\u30d3\u30eb\u30c9\u3055\u308c\u305f</li> <li>\u3059\u3079\u3066\u306e\u30b3\u30f3\u30c6\u30ca\u304c\u65b0\u3057\u3044\u30a4\u30e1\u30fc\u30b8\u3067\u66f4\u65b0\u3055\u308c\u305f</li> <li>\u5b9f\u884c\u4e2d\u306e\u3059\u3079\u3066\u306e\u30b3\u30f3\u30c6\u30ca\u304c\u6e96\u5099\u72b6\u614b\u30c1\u30a7\u30c3\u30af\u306b\u5408\u683c\u3057\u305f</li> </ul> <p><code>post_rollout</code> \u30bf\u30b9\u30af\u306e\u4e00\u822c\u7684\u306a\u7528\u9014\u306b\u306f\u3001<code>drush updb</code>\u3001<code>drush cim</code> \u306e\u5b9f\u884c\u3001\u307e\u305f\u306f\u3055\u307e\u3056\u307e\u306a\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u30af\u30ea\u30a2\u304c\u542b\u307e\u308c\u307e\u3059\u3002\u4e0a\u8a18\u306e\u4f8b\u3067\u306f\u3001<code>drush cim</code> \u3068 <code>drush cr</code> \u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> <p><code>name</code></p> <ul> <li>name \u306f\u3001\u30ed\u30b0\u3067\u5404\u30bf\u30b9\u30af\u3092\u8b58\u5225\u3057\u3084\u3059\u304f\u3059\u308b\u305f\u3081\u306e\u4efb\u610f\u306e\u30e9\u30d9\u30eb\u3067\u3059\u3002</li> </ul> <p><code>command</code></p> <ul> <li>\u3053\u3053\u3067\u306f\u3001\u5b9f\u884c\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u3053\u308c\u3089\u306f\u3001\u5404\u30b3\u30f3\u30c6\u30ca\u306e <code>WORKDIR</code> \u3067\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002Lagoon \u30a4\u30e1\u30fc\u30b8\u306e\u5834\u5408\u3001\u3053\u308c\u306f <code>/app</code> \u3067\u3059\u3002\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b\u7279\u5b9a\u306e\u5834\u6240\u306b <code>cd</code> \u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u3053\u306e\u70b9\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul> <p><code>service</code></p> <ul> <li>\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u3002\u79c1\u305f\u3061\u306edrupal-example\u306b\u5f93\u3063\u3066\u3044\u308b\u5834\u5408\u3001\u3053\u308c\u306fCLI\u30b3\u30f3\u30c6\u30ca\u306b\u306a\u308a\u307e\u3059\u3002\u306a\u305c\u306a\u3089\u3001\u305d\u308c\u306f\u3042\u306a\u305f\u306e\u30b5\u30a4\u30c8\u306e\u30b3\u30fc\u30c9\u3001\u30d5\u30a1\u30a4\u30eb\u3001\u305d\u3057\u3066\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3078\u306e\u63a5\u7d9a\u3092\u5168\u3066\u6301\u3063\u3066\u3044\u308b\u304b\u3089\u3067\u3059\u3002\u901a\u5e38\u3001\u3053\u308c\u3092\u5909\u66f4\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002</li> </ul> <p><code>shell</code></p> <p>\u30bf\u30b9\u30af\u306e\u5b9f\u884c\u306b\u4f7f\u7528\u3059\u308b\u30b7\u30a7\u30eb\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f <code>sh</code> \u304c\u4f7f\u7528\u3055\u308c\u307e\u3059\u304c\u3001\u30b3\u30f3\u30c6\u30ca\u306b\u4ed6\u306e\u30b7\u30a7\u30eb(bash\u306a\u3069)\u304c\u3042\u308b\u5834\u5408\u3001\u3053\u3053\u3067\u305d\u308c\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u30dd\u30b9\u30c8\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u5185\u3067\u3044\u304f\u3064\u304b\u306e\u5c0f\u3055\u306aif/else bash\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3057\u305f\u3044\u5834\u5408\u306b\u4fbf\u5229\u3067\u3059\u3002(\u4e0a\u8a18\u306e\u4f8b\u3067\u8907\u6570\u884c\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u304f\u65b9\u6cd5\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044)\u3002</p>"},{"location":"ja/lagoonizing/#routes","title":"\u30eb\u30fc\u30c8","text":""},{"location":"ja/lagoonizing/#routesautogenerateenabled","title":"<code>routes.autogenerate.enabled</code>","text":"<p>\u3053\u308c\u306b\u3088\u308a\u3001\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u30eb\u30fc\u30c8\u3092\u5b8c\u5168\u306b\u7121\u52b9\u306b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306f\u74b0\u5883\u3054\u3068\u306e\u30ab\u30b9\u30bf\u30e0\u30eb\u30fc\u30c8\u3092\u7121\u52b9\u306b\u3059\u308b\u3082\u306e\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u8a73\u7d30\u306f\u4e0b\u8a18\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/lagoonizing/#routesautogenerateinsecure","title":"<code>routes.autogenerate.insecure</code>","text":"<p>\u3053\u308c\u306b\u3088\u308a\u3001\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u30eb\u30fc\u30c8\u306e\u52d5\u4f5c\u3092\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306f\u74b0\u5883\u3054\u3068\u306e\u30ab\u30b9\u30bf\u30e0\u30eb\u30fc\u30c8\u3092\u8a2d\u5b9a\u3059\u308b\u3082\u306e\u3067\u306f\u3042\u308a\u307e\u305b\u3093\uff08\u8a73\u7d30\u306f\u5f8c\u8ff0\uff09\u3002\u3053\u308c\u306f\u4e0a\u8a18\u306e\u4f8b\u3067\u4f7f\u7528\u3057\u3066\u3044\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3001<code>insecure: Redirect</code>\u3068\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002</p> <p>\u4ee5\u4e0b\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u8a31\u53ef\u3055\u308c\u3066\u3044\u307e\u3059:</p> <p><code>Allow</code></p> <ul> <li>HTTP\u3068HTTPS\u306e\u4e21\u65b9\u306e\u30eb\u30fc\u30c8\u3092\u8a2d\u5b9a\u3057\u307e\u3059(\u3053\u308c\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u3059)\u3002</li> </ul> <p><code>Redirect</code></p> <ul> <li>\u3059\u3079\u3066\u306eHTTP\u30ea\u30af\u30a8\u30b9\u30c8\u3092HTTPS\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3057\u307e\u3059\u3002</li> </ul> <p><code>None</code></p> <ul> <li>HTTP\u306e\u30eb\u30fc\u30c8\u306f\u4f5c\u6210\u3055\u308c\u305a\u3001\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3082\u3042\u308a\u307e\u305b\u3093\u3002</li> </ul>"},{"location":"ja/lagoonizing/#_7","title":"\u74b0\u5883","text":"<p>\u74b0\u5883\u540d\u306f\u3001\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u305f\u30d6\u30e9\u30f3\u30c1\u307e\u305f\u306f\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u4e00\u81f4\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u5404\u74b0\u5883\u306f\u7570\u306a\u308b\u8a2d\u5b9a\u3092\u6301\u3064\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u4f8b\u3067\u306f\u3001main\u3068staging\u306e\u74b0\u5883\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/lagoonizing/#_8","title":"\u7279\u5b9a\u306e\u30d1\u30b9\u306e\u76e3\u8996","text":"<p>UptimeRobot\u304c\u30af\u30e9\u30b9\u30bf\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001Lagoon\u306f\u5404\u30eb\u30fc\u30c8/\u30a4\u30f3\u30b0\u30ec\u30b9\u306b<code>stakater/IngressControllerMonitor</code>\u3067\u4f7f\u7528\u3059\u308b\u305f\u3081\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u6ce8\u5165\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u52d5\u4f5c\u306f\u30eb\u30fc\u30c8\u306e\u30db\u30fc\u30e0\u30da\u30fc\u30b8\u3092\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u3059\u308b\u3053\u3068\u3067\u3059\u3002\u7279\u5b9a\u306e\u30eb\u30fc\u30c8\u3092\u76e3\u8996\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u5834\u5408\u3001\u30eb\u30fc\u30c8\u306e\u4ed5\u69d8\u306b<code>monitoring-path</code>\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3067\u3053\u308c\u3092\u4e0a\u66f8\u304d\u3067\u304d\u307e\u3059\u3002\u4e00\u822c\u7684\u306a\u4f7f\u7528\u6cd5\u306f\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u30d0\u30a4\u30d1\u30b9\u3059\u308b\u76e3\u8996\u7528\u306e\u30d1\u30b9\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u30b5\u30a4\u30c8\u306e\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u76e3\u8996\u3092\u5b9f\u73fe\u3057\u307e\u3059\u3002</p> .lagoon.yml\u306e\u4f8b<pre><code>     - \"www.example.com\":\nmonitoring-path: \"/bypass-cache\"\n</code></pre>"},{"location":"ja/lagoonizing/#environmentsnameroutes","title":"<code>environments.[name].routes</code>","text":"<p>\u30eb\u30fc\u30c8\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u306f\u3001\u74b0\u5883\u304c\u5fdc\u7b54\u3059\u308b\u30c9\u30e1\u30a4\u30f3\u540d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u901a\u5e38\u3001\u672c\u756a\u74b0\u5883\u7528\u306e\u30eb\u30fc\u30c8\u306e\u307f\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u3059\u3079\u3066\u306e\u74b0\u5883\u306f\u751f\u6210\u3055\u308c\u305f\u30eb\u30fc\u30c8\u3092\u53d7\u3051\u53d6\u308a\u307e\u3059\u304c\u3001\u672c\u756a\u4ee5\u5916\u306e\u74b0\u5883\u304c\u72ec\u81ea\u306e\u30c9\u30e1\u30a4\u30f3\u540d\u3092\u5fc5\u8981\u3068\u3059\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u3053\u3067\u6307\u5b9a\u3057\u3001DNS\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u3067\u305d\u306e\u30c9\u30e1\u30a4\u30f3\u3092\u751f\u6210\u3055\u308c\u305f\u30eb\u30fc\u30c8\u540d\u3078\u306eCNAME\u3068\u3057\u3066\u8ffd\u52a0\u3067\u304d\u307e\u3059\uff08\u3053\u308c\u3089\u306e\u30eb\u30fc\u30c8\u306f\u30c7\u30d7\u30ed\u30a4\u30e1\u30c3\u30bb\u30fc\u30b8\u3067\u516c\u958b\u3055\u308c\u307e\u3059\uff09\u3002</p> <p>\u74b0\u5883\u8a2d\u5b9a\u306e\u5f8c\u306b\u8a18\u8ff0\u3055\u308c\u308b\u6700\u521d\u306e\u8981\u7d20\u306f\u3001\u30bf\u30fc\u30b2\u30c3\u30c8\u30b5\u30fc\u30d3\u30b9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u3053\u306e\u4f8b\u3067\u306fNGINX\u304c\u30bf\u30fc\u30b2\u30c3\u30c8\u30b5\u30fc\u30d3\u30b9\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u53d7\u4fe1\u3057\u305f\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u3069\u306e\u30b5\u30fc\u30d3\u30b9\u306b\u8ee2\u9001\u3059\u308b\u304b\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002</p> <p>\u6700\u3082\u30b7\u30f3\u30d7\u30eb\u306a\u30eb\u30fc\u30c8\u306f\u3001\u4e0a\u8a18\u306e\u30b5\u30f3\u30d7\u30eb<code>.lagoon.yml</code>\u306b\u3042\u308b<code>example.com</code>\u306e\u4f8b\u3067\u3059\u3002\u8ffd\u52a0\u306e\u8a2d\u5b9a\u304c\u306a\u3044\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u30eb\u30fc\u30c8\u306bLet's Encrypt\u8a3c\u660e\u66f8\u304c\u5fc5\u8981\u3067\u3001HTTPS\u304b\u3089HTTP\u3078\u306e\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u304c\u4e0d\u8981\u3067\u3042\u308b\u3053\u3068\u3092\u524d\u63d0\u3068\u3057\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/lagoonizing/#_9","title":"\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3","text":"<p>\u60c5\u5831</p> <p>\u30eb\u30fc\u30c8/\u30a4\u30f3\u30b0\u30ec\u30b9\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306f\u3001<code>nginx-ingress</code>\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u30af\u30e9\u30b9\u30bf\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u306e\u307f\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u6a5f\u80fd\u304c\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u306f\u3001Lagoon\u7ba1\u7406\u8005\u306b\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306f\u3001nginx-ingress\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u304c\u30b5\u30dd\u30fc\u30c8\u3059\u308bYAML\u30de\u30c3\u30d7\u5f62\u5f0f\u3067\u8a18\u8ff0\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306f\u7c21\u5358\u306a\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u306b\u4fbf\u5229\u3067\u3059:</p> <p>\u4f8b\u3048\u3070\u3001<code>example.ch</code>\u3078\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092<code>https://www.example.ch</code>\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3057\u3001\u30d5\u30a9\u30eb\u30c0\u3084\u30af\u30a8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u7dad\u6301\u3057\u305f\u3044\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059:</p> <p><code>(example.com/folder?query -&gt; https://www.example.ch/folder?query)</code></p> .lagoon.yml \u306e\u4f8b<pre><code>        - \"example.ch\":\nannotations:\nnginx.ingress.kubernetes.io/permanent-redirect: https://www.example.ch$request_uri\n- www.example.ch\n</code></pre> <p>\u3082\u3061\u308d\u3093\u3001Lagoon\u3067\u30db\u30b9\u30c8\u3055\u308c\u3066\u3044\u306a\u3044\u4ed6\u306eURL\u3078\u306e\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3082\u53ef\u80fd\u3067\u3059\u3002\u4f8b\u3048\u3070\u3001<code>example.de</code>\u3078\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092<code>https://www.google.com</code>\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b\u5834\u5408:</p> .lagoon.yml \u306e\u4f8b<pre><code>        - \"example.de\":\nannotations:\nnginx.ingress.kubernetes.io/permanent-redirect: https://www.google.com\n</code></pre>"},{"location":"ja/lagoonizing/#ssl-tls-acme","title":"SSL\u8a2d\u5b9a - <code>tls-acme</code>","text":"<p><code>tls-acme : \u2018true\u2019</code></p> <ul> <li>Lagoon\u306b\u305d\u306e\u30eb\u30fc\u30c8\u306b\u5bfe\u3057\u3066Let's Encrypt\u8a3c\u660e\u66f8\u3092\u767a\u884c\u3059\u308b\u3088\u3046\u6307\u793a\u3057\u307e\u3059\u3002\u3053\u308c\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u3059\u3002</li> <li>Let's Encrypt\u304c\u4e0d\u8981\u306a\u5834\u5408\u3001\u3053\u308c\u3092 <code>tls-acme: \u2018false\u2019</code> \u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002</li> </ul> <p><code>insecure</code></p> <ul> <li><code>Allow</code>\uff1aHTTP\u3068HTTPS\u4e21\u65b9\u306e\u30eb\u30fc\u30c8\u3092\u8a2d\u5b9a\u3057\u307e\u3059\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\uff09\u3002</li> <li><code>Redirect</code>\uff1aHTTP\u30ea\u30af\u30a8\u30b9\u30c8\u3092HTTPS\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3057\u307e\u3059\u3002</li> <li><code>None</code>\uff1aHTTP\u30eb\u30fc\u30c8\u306f\u4f5c\u6210\u3055\u308c\u305a\u3001\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3082\u884c\u308f\u308c\u307e\u305b\u3093\u3002</li> </ul> <p><code>None</code></p> <ul> <li>HTTP\u306e\u30eb\u30fc\u30c8\u306f\u4f5c\u6210\u3055\u308c\u305a\u3001\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3082\u884c\u308f\u308c\u307e\u305b\u3093\u3002</li> </ul> <p><code>Hsts</code></p> <ul> <li><code>max-age=31536000;includeSubDomains;preload</code>\u306e\u3088\u3046\u306a\u5024\u3092\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002</li> <li>\u30b9\u30da\u30fc\u30b9\u3084\u4ed6\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u542b\u307e\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</li> <li><code>max-age</code>\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u307f\u304c\u5fc5\u9808\u3067\u3059\u3002\u3053\u308c\u306fHSTS\u30dd\u30ea\u30b7\u30fc\u306e\u6709\u52b9\u671f\u9593\u3092\u79d2\u5358\u4f4d\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002</li> </ul> <p>Info</p> <p>\u8a3c\u660e\u66f8\u8a8d\u8a3c\u5c40(CA)\u306b\u3088\u3063\u3066\u7f72\u540d\u3055\u308c\u305f SSL \u8a3c\u660e\u66f8\u304b\u3089 Let's Encrypt \u8a3c\u660e\u66f8\u306b\u5207\u308a\u66ff\u3048\u308b\u4e88\u5b9a\u304c\u3042\u308b\u5834\u5408\u306f\u3001Lagoon \u306e\u7ba1\u7406\u8005\u306b\u9023\u7d61\u3057\u3066\u79fb\u884c\u3092\u76e3\u7763\u3057\u3066\u3082\u3089\u3046\u306e\u304c\u6700\u5584\u3067\u3059\u3002</p>"},{"location":"ja/lagoonizing/#environmentsnametypes","title":"<code>environments.[name].types</code>","text":"<p>Lagoon \u306e\u30d3\u30eb\u30c9\u30d7\u30ed\u30bb\u30b9\u306f <code>docker-compose.yml</code> \u30d5\u30a1\u30a4\u30eb\u306e <code>lagoon.type</code> \u30e9\u30d9\u30eb\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u3001\u3069\u306e\u30bf\u30a4\u30d7\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3079\u304d\u304b\u3092\u5224\u65ad\u3057\u307e\u3059(docker-compose.yml \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u8a73\u7d30\u3092\u8aad\u3080\u3053\u3068\u304c\u3067\u304d\u307e\u3059)\u3002</p> <p>\u7279\u5b9a\u306e\u74b0\u5883\u3067\u306e\u307f\u30bf\u30a4\u30d7\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u305f\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/lagoonizing/#service-name-service-type","title":"`service-name: service-type","text":"<ul> <li><code>service-name</code>\u306f<code>docker-compose.yml</code>\u304b\u3089\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u305f\u3044\u30b5\u30fc\u30d3\u30b9\u306e\u540d\u524d\u3067\u3059\u3002</li> <li><code>service-type</code> \u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3067\u4f7f\u7528\u3057\u305f\u3044\u30b5\u30fc\u30d3\u30b9\u306e\u30bf\u30a4\u30d7\u3067\u3059\u3002</li> </ul> <p>\u4f8b\u3048\u3070\u3001<code>main</code>\u3068\u3044\u3046\u540d\u524d\u306e\u672c\u756a\u74b0\u5883\u7528\u306bMariaDB-Galera\u306e\u9ad8\u53ef\u7528\u6027\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f7f\u7528\u3057\u305f\u3044\u5834\u5408:</p> .lagoon.yml \u4f8b<pre><code>environments:\nmain:\ntypes:\nmariadb: mariadb-galera\n</code></pre>"},{"location":"ja/lagoonizing/#environmentsnametemplates","title":"<code>environments.[name].templates</code>","text":"<p>Lagoon\u30d3\u30eb\u30c9\u30d7\u30ed\u30bb\u30b9\u306f\u3001<code>docker-compose.yml</code>\u30d5\u30a1\u30a4\u30eb\u306e<code>lagoon.template</code>\u30e9\u30d9\u30eb\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u3001\u30b5\u30fc\u30d3\u30b9\u306b\u30ab\u30b9\u30bf\u30e0\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u304c\u5fc5\u8981\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059(docker-compose.yml\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u8a73\u3057\u304f\u8aad\u3080\u3053\u3068\u304c\u3067\u304d\u307e\u3059)\u3002</p> <p>\u7279\u5b9a\u306e\u74b0\u5883\u3067\u306e\u307f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u305f\u3044\u5834\u5408:</p>"},{"location":"ja/lagoonizing/#service-name-template-file","title":"<code>service-name: template-file</code>","text":"<ul> <li><code>service-name</code>\u306f\u3001<code>docker-compose.yml</code>\u304b\u3089\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u305f\u3044\u30b5\u30fc\u30d3\u30b9\u306e\u540d\u524d\u3067\u3059\u3002</li> <li><code>template-file</code>\u306f\u3001\u3053\u306e\u74b0\u5883\u3067\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u306b\u4f7f\u7528\u3059\u308b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u30d1\u30b9\u3068\u540d\u524d\u3067\u3059\u3002</li> </ul> .lagoon.yml \u4f8b<pre><code>environments:\nmain:\ntemplates:\nmariadb: mariadb.main.deployment.yml\n</code></pre>"},{"location":"ja/lagoonizing/#environmentsnamerollouts","title":"<code>environments.[name].rollouts</code>","text":"<p>Lagoon\u30d3\u30eb\u30c9\u30d7\u30ed\u30bb\u30b9\u306f\u3001<code>docker-compose.yml</code>\u30d5\u30a1\u30a4\u30eb\u306e<code>lagoon.rollout</code>\u30e9\u30d9\u30eb\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u3001\u30b5\u30fc\u30d3\u30b9\u306b\u30ab\u30b9\u30bf\u30e0\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u304c\u5fc5\u8981\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059(docker-compose.yml\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u8a73\u3057\u304f\u8aad\u3080\u3053\u3068\u304c\u3067\u304d\u307e\u3059)\u3002</p> <p>\u3059\u3079\u3066\u306e\u74b0\u5883\u306b\u5bfe\u3057\u3066\u3067\u306f\u306a\u304f\u3001\u3072\u3068\u3064\u306e\u74b0\u5883\u306b\u5bfe\u3057\u3066\u3060\u3051\u30bf\u30a4\u30d7\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u305f\u3044\u5834\u5408\u3082\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/lagoonizing/#service-name-rollout-type","title":"<code>service-name: rollout-type</code>","text":"<ul> <li><code>service-name</code>\u306f\u4e0a\u66f8\u304d\u3057\u305f\u3044<code>docker-compose.yml</code>\u306e\u30b5\u30fc\u30d3\u30b9\u540d\u3067\u3059\u3002</li> <li><code>rollout-type</code>\u306f\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u306e\u30bf\u30a4\u30d7\u3067\u3059\u3002\u53ef\u80fd\u306a\u5024\u306b\u3064\u3044\u3066\u306fdocker-compose.yml\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul> .lagoon.yml \u4f8b<pre><code>environments:\nmain:\nrollouts:\nmariadb: statefulset\n</code></pre>"},{"location":"ja/lagoonizing/#cron-environmentsnamecronjobs","title":"Cron\u30b8\u30e7\u30d6 - <code>environments.[name].cronjobs</code>","text":"<p>\u901a\u5e38\u3001\u5168\u3066\u306e\u74b0\u5883\u3067\u540c\u3058Cron\u30b8\u30e7\u30d6\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u306f\u671b\u307e\u3057\u304f\u3042\u308a\u307e\u305b\u3093\u3002\u305d\u306e\u305f\u3081\u3001\u5404\u74b0\u5883\u3067\u5b9f\u884c\u3057\u305f\u3044\u30b8\u30e7\u30d6\u3092\u660e\u793a\u7684\u306b\u5b9a\u7fa9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u4f8b\u3068\u3057\u3066\u30011\u6642\u9593\u306b1\u56de\u5b9f\u884c\u3059\u308bdrush cron\u30b8\u30e7\u30d6\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <p><code>name</code></p> <ul> <li>Cron\u30b8\u30e7\u30d6\u306e\u76ee\u7684\u3092\u8b58\u5225\u3059\u308b\u305f\u3081\u306e\u308f\u304b\u308a\u3084\u3059\u3044\u540d\u524d\u3002</li> </ul> <p><code>schedule</code></p> <ul> <li>Cron\u30b8\u30e7\u30d6\u306e\u5b9f\u884c\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3067\u3059\u3002\u6a19\u6e96\u7684\u306acron\u8a18\u6cd5\u306b\u5f93\u3044\u307e\u3059\u3002\u69cb\u6587\u304c\u4e0d\u660e\u306a\u5834\u5408\u306f\u3001Crontab Generator\u304c\u5f79\u7acb\u3061\u307e\u3059\u3002</li> <li>\u5206<code>M</code>\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001\u6bce\u6642\u9593\u30e9\u30f3\u30c0\u30e0\u306a\u5206\uff08\u6bce\u6642\u540c\u3058\u5206\uff09\u306b\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002<code>M/15</code>\u3068\u3059\u308b\u306815\u5206\u3054\u3068\u306b\u5b9f\u884c\u3055\u308c\u307e\u3059\u304c\u3001\u6642\u9593\u304b\u3089\u306e\u30aa\u30d5\u30bb\u30c3\u30c8\u306f\u30e9\u30f3\u30c0\u30e0\u3067\u3059\uff08\u4f8b\uff1a6, 21, 36, 51\uff09\u3002</li> <li>\u6642<code>H</code>\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001\u6bce\u65e5\u30e9\u30f3\u30c0\u30e0\u306a\u6642\u9593\uff08\u6bce\u65e5\u540c\u3058\u6642\u9593\uff09\u306b\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002<code>H(2-4)</code>\u3068\u3059\u308b\u3068\u30012\u6642\u304b\u30894\u6642\u306e\u9593\u306b1\u56de\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002</li> </ul> <p><code>command</code></p> <ul> <li>\u5b9f\u884c\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3002\u30bf\u30b9\u30af\u3068\u540c\u69d8\u306b\u3001\u3053\u306e\u30b3\u30de\u30f3\u30c9\u306f\u30b5\u30fc\u30d3\u30b9\u306e <code>WORKDIR</code> \u3067\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002Lagoon\u306e\u30a4\u30e1\u30fc\u30b8\u3067\u306f\u3001\u3053\u308c\u306f <code>/app</code> \u3067\u3059\u3002</li> </ul> <p><code>service</code></p> <ul> <li>\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30b5\u30fc\u30d3\u30b9\u3002\u307b\u3068\u3093\u3069\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u306f\u3001\u3053\u308c\u306fCLI\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002</li> </ul> <p><code>.lagoon.yml</code> \u3067\u3067\u304d\u308b\u3053\u3068\u306f\u307e\u3060\u305f\u304f\u3055\u3093\u3042\u308a\u307e\u3059\u3002\u8a73\u7d30\u306f <code>.lagoon.yml</code> \u306b\u3064\u3044\u3066\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3 \u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/lagoonizing/#drupal","title":"Drupal\u7279\u6709\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<p>Drupal\u30b5\u30a4\u30c8\u3092Lagoon\u306b\u79fb\u884c\u3059\u308b\u5834\u5408\u3001\u5168\u3066\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u305f\u3081\u306b\u3044\u304f\u3064\u304bDrupal\u7279\u6709\u306e\u30bf\u30b9\u30af\u3092\u5b8c\u4e86\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/lagoonizing/#_10","title":"\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb","text":"<p>\u6b21\u306e\u30b9\u30c6\u30c3\u30d7\u306f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u66f4\u65b0\u3067\u3059\u3002Lagoon\u306f\u74b0\u5883\u5909\u6570\u3092\u4f7f\u7528\u3059\u308b\u74b0\u5883\u56fa\u6709\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u6a5f\u5bc6\u60c5\u5831\u304c\u3053\u308c\u3089\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u4fdd\u5b58\u3055\u308c\u308b\u3053\u3068\u306f\u306a\u304f\u3001\u3059\u3079\u3066\u5b89\u5168\u306b\u30b3\u30df\u30c3\u30c8\u3067\u304d\u307e\u3059\u3002\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u69d8\u3005\u306a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f8b\u304c\u3042\u308a\u307e\u3059\u3002\u65b0\u898f\u306b\u59cb\u3081\u308b\u5834\u5408\u306f\u3001\u3053\u308c\u3089\u306e\u4f7f\u7528\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002\u305d\u3046\u3067\u306a\u3044\u5834\u5408\u306f\u3001\u985e\u4f3c\u306e\u3082\u306e\u3092\u9078\u3093\u3067\u95a2\u9023\u3059\u308b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u74b0\u5883\u5909\u6570\u306e\u4f7f\u7528\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u3001\u74b0\u5883\u5909\u6570\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002</p> <p>\u30ea\u30dd\u30b8\u30c8\u30ea\u304b\u3089\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3057\u3001\u30b5\u30a4\u30c8\u3067\u4f7f\u7528\u3057\u3066\u3044\u306a\u3044\u30b5\u30fc\u30d3\u30b9\u306e\u8a2d\u5b9a\u3092\u524a\u9664\u3057\u3066\u304f\u3060\u3055\u3044\uff08\u4f8b\uff1a\u3059\u3079\u3066\u306e\u30b5\u30a4\u30c8\u304cSolr\u3084Redis\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\uff09\u3002\u7279\u5b9a\u306e\u74b0\u5883\u30bf\u30a4\u30d7\uff08\u958b\u767a\u74b0\u5883\u3067\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u7121\u52b9\u5316\u306a\u3069\uff09\u306e\u8a2d\u5b9a\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u5834\u5408\u3001\u8ffd\u52a0\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u8a2d\u5b9a\u3067\u304d\u307e\u3059\uff08\u4f8b\u793a\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u3059\u3067\u306b\u3044\u304f\u3064\u304b\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\uff09\u3002\u30d5\u30a1\u30a4\u30eb\u306f\u4ee5\u4e0b\u306e\u9806\u5e8f\u3067\u8aad\u307f\u8fbc\u307e\u308c\u307e\u3059\uff1a</p> settings.php<pre><code> all.settings.php\n all.services.yml\n production.settings.php\n production.services.yml\n development.settings.php\n development.services.yml\n settings.local.php\n services.local.yml\n</code></pre>"},{"location":"ja/lagoonizing/#gitignore","title":"<code>.gitignore</code>\u306e\u8a2d\u5b9a\u3092\u66f4\u65b0\u3059\u308b","text":"<p><code>.gitignore</code>\u304c\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u30b3\u30df\u30c3\u30c8\u3092\u8a31\u53ef\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002Drupal\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067<code>sites/*/settings*.php</code>\u3068<code>sites/*/services*.yml</code>\u3092<code>.gitignore</code>\u306b\u542b\u3081\u3066\u3044\u307e\u3059\u3002Lagoon\u3067\u306f\u6a5f\u5bc6\u60c5\u5831\u3092Git\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u4fdd\u5b58\u3057\u306a\u3044\u306e\u3067\u3001\u3053\u308c\u3089\u3092\u524a\u9664\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/lagoonizing/#drupalwebroot","title":"Drupal\u306eWebroot\u306b\u3064\u3044\u3066\u306e\u6ce8\u610f\u70b9","text":"<p>\u6b8b\u5ff5\u306a\u304c\u3089\u3001Drupal\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306f\u30a6\u30a7\u30d6\u30eb\u30fc\u30c8\u30d5\u30a9\u30eb\u30c0\u540d\u3092\u6a19\u6e96\u5316\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u3088\u3063\u3066\u306fDrupal\u3092<code>/web</code>\u5185\u306b\u3001\u4ed6\u306f<code>/docroot</code>\u3084\u4ed6\u306e\u5834\u6240\u306b\u914d\u7f6e\u3057\u3066\u3044\u307e\u3059\u3002Lagoon Drupal\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f\u3001Drupal\u304c<code>/web</code>\u5185\u306b\u3042\u308b\u3053\u3068\u3092\u524d\u63d0\u3068\u3057\u3066\u3044\u307e\u3059\u3002\u3082\u3057\u3042\u306a\u305f\u306eDrupal\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u7570\u306a\u308b\u5834\u5408\u306f\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u9069\u5b9c\u8abf\u6574\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/lagoonizing/#_11","title":"\u30a4\u30e1\u30fc\u30b8\u306e\u30d3\u30eb\u30c9\u3059\u308b","text":"<p>\u307e\u305a\u3001\u5b9a\u7fa9\u3055\u308c\u305f\u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059:</p> build your images<pre><code>docker-compose build\n</code></pre> <p>\u3053\u308c\u306b\u306f\u6570\u5206\u304b\u304b\u308b\u5834\u5408\u304c\u3042\u308a\u3001\u9577\u3044\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u8fd4\u3063\u3066\u304d\u307e\u3059\u3002\u3053\u306e\u3088\u3046\u306a\u3082\u306e\u306b\u306a\u308b\u306f\u305a\u3067\u3059\u3002</p> <p>\u3053\u308c\u306b\u3088\u308a\u3001docker-compose\u306f<code>docker-compose.yml</code>\u5185\u3067<code>build:</code>\u5b9a\u7fa9\u304c\u3042\u308b\u3059\u3079\u3066\u306e\u30b3\u30f3\u30c6\u30ca\u306eDocker\u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002\u901a\u5e38\u3001Drupal\u306e\u5834\u5408\u3001\u3053\u308c\u306b\u306f<code>cli</code>\u3001<code>nginx</code>\u3001<code>php</code>\u304c\u542b\u307e\u308c\u307e\u3059\u3002\u7279\u5b9a\u306e\u30d3\u30eb\u30c9\u30b3\u30de\u30f3\u30c9\uff08<code>composer install</code>\u306a\u3069\uff09\u3092\u5b9f\u884c\u3057\u305f\u308a\u3001\u7279\u5b9a\u306e\u74b0\u5883\u5909\u6570\uff08<code>WEBROOT</code>\u306a\u3069\uff09\u3092\u30a4\u30e1\u30fc\u30b8\u306b\u6ce8\u5165\u3057\u305f\u308a\u3059\u308b\u305f\u3081\u306b\u884c\u3044\u307e\u3059\u3002</p> <p>\u901a\u5e38\u3001 Drupal\u306e\u30b3\u30fc\u30c9\u3092\u7de8\u96c6\u3059\u308b\u305f\u3073\u306b\u30d3\u30eb\u30c9\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093(\u30b3\u30fc\u30c9\u306f\u30db\u30b9\u30c8\u304b\u3089\u30b3\u30f3\u30c6\u30ca\u306b\u30de\u30a6\u30f3\u30c8\u3055\u308c\u307e\u3059)\u3001\u3057\u304b\u3057\u518d\u30d3\u30eb\u30c9\u306f\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\u3055\u3089\u306b\u3001Lagoon\u306f\u30c7\u30d7\u30ed\u30a4\u4e2d\u306b\u5168\u304f\u540c\u3058Docker\u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3059\u308b\u306e\u3067\u3001<code>docker-compose build</code> \u3092\u518d\u5ea6\u5b9f\u884c\u3059\u308b\u3060\u3051\u3067\u3001\u30d3\u30eb\u30c9\u304c\u30c7\u30d7\u30ed\u30a4\u4e2d\u306b\u3082\u6a5f\u80fd\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/lagoonizing/#_12","title":"\u30b3\u30f3\u30c6\u30ca\u306e\u8d77\u52d5","text":"<p>\u30a4\u30e1\u30fc\u30b8\u304c\u30d3\u30eb\u30c9\u3055\u308c\u305f\u306e\u3067\u3001\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3067\u304d\u307e\u3059:</p> start the containers<pre><code>docker-compose up -d\n</code></pre> <p>\u6b21\u306e\u3088\u3046\u306a\u5fdc\u7b54\u304c\u8868\u793a\u3055\u308c\u307e\u3059:</p> containers started<pre><code>\u279c  lagoon-test git:(main) docker compose up -d\nRecreating lagoon-test_cli_1   ... done\nStarting lagoon-test_redis_1   ... done\nStarting lagoon-test_solr_1    ... done\nStarting lagoon-test_mariadb_1 ... done\nRecreating lagoon-test_php_1   ... done\nRecreating lagoon-test_nginx_1 ... done\nRecreating lagoon-test_varnish_1 ... done\n</code></pre> <p>\u3053\u308c\u306b\u3088\u308a\u3059\u3079\u3066\u306e\u30b3\u30f3\u30c6\u30ca\u304c\u8d77\u52d5\u3057\u307e\u3059\u3002\u30b3\u30de\u30f3\u30c9\u304c\u5b8c\u4e86\u3057\u305f\u5f8c\u3001<code>docker compose ps</code>\u3067\u78ba\u8a8d\u3057\u3066\u3001\u3059\u3079\u3066\u5b8c\u5168\u306b\u8d77\u52d5\u3057\u3001\u30af\u30e9\u30c3\u30b7\u30e5\u3057\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u305d\u306e\u5fdc\u7b54\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308b\u306f\u305a\u3067\u3059:</p> view running containers<pre><code>\u279c  lagoon-test git:(main) docker compose ps\nName                       Command               State            Ports\n----------------------------------------------------------------------------------------\nlagoon-test_cli_1       /sbin/tini -- /lagoon/entr ...   Up      9000/tcp\nlagoon-test_mariadb_1   /sbin/tini -- /lagoon/entr ...   Up      0.0.0.0:32768-&gt;3306/tcp\nlagoon-test_nginx_1     /sbin/tini -- /lagoon/entr ...   Up      8080/tcp\nlagoon-test_php_1       /sbin/tini -- /lagoon/entr ...   Up      9000/tcp\nlagoon-test_redis_1     /sbin/tini -- /lagoon/entr ...   Up      6379/tcp\nlagoon-test_solr_1      /sbin/tini -- /lagoon/entr ...   Up      0.0.0.0:32769-&gt;8983/tcp\n</code></pre> <p>\u554f\u984c\u304c\u3042\u308b\u5834\u5408\u306f\u3001 <code>docker-compose logs -f [servicename]</code>\u3092\u4f7f\u7528\u3057\u3066\u30ed\u30b0\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</p>"},{"location":"ja/lagoonizing/#composer-installcomposer","title":"<code>composer install</code>\u306e\u518d\u5b9f\u884c\uff08Composer\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u307f\uff09","text":"<p>Drupal 8\u4ee5\u964d\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u5834\u5408\u3001Composer\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u306f\u305a\u3067\u3059\u3002\u5168\u3066\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002cli\u30b3\u30f3\u30c6\u30ca\u306b\u63a5\u7d9a\u3057\u3001<code>composer install</code>\u3092\u5b9f\u884c\u3057\u307e\u3059\uff1a</p> re-run composer install<pre><code>docker-compose exec cli bash\n[drupal-example]cli-drupal:/app$ composer install\n</code></pre> <p>\u3053\u308c\u306f\u5947\u5999\u306b\u805e\u3053\u3048\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u30d3\u30eb\u30c9\u6bb5\u968e\u3067\u3059\u3067\u306b<code>composer install</code>\u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u304b\u3089\u3067\u3059\u3002\u518d\u5ea6\u5b9f\u884c\u3059\u308b\u7406\u7531\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\uff1a</p> <ul> <li>\u30db\u30b9\u30c8\u4e0a\u3067\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u3001\u3059\u3050\u306b\u30b3\u30f3\u30c6\u30ca\u3067\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e<code>docker-composer.yml</code>\u306f\u30d5\u30a9\u30eb\u30c0\u5168\u4f53\u3092\u30b3\u30f3\u30c6\u30ca\u306b\u30de\u30a6\u30f3\u30c8\u3057\u307e\u3059\uff08\u3053\u308c\u306f<code>volumes</code>\u30bb\u30af\u30b7\u30e7\u30f3\u306e.<code>:/app:delegated</code>\u3067\u884c\u308f\u308c\u307e\u3059\uff09\u3002\u3053\u308c\u306f\u3001Docker\u30d3\u30eb\u30c9\u4e2d\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u5168\u3066\u306e\u4f9d\u5b58\u95a2\u4fc2\u304c\u30db\u30b9\u30c8\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u4e0a\u66f8\u304d\u3055\u308c\u308b\u3053\u3068\u3082\u610f\u5473\u3057\u307e\u3059\u3002</li> <li>\u30ed\u30fc\u30ab\u30eb\u3067\u306f\u3001\u304a\u305d\u3089\u304f<code>composer.json</code>\u306e<code>require-dev</code>\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u4f9d\u5b58\u95a2\u4fc2\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3044\u3067\u3057\u3087\u3046\u304c\u3001\u672c\u756a\u30c7\u30d7\u30ed\u30a4\u3067\u306f\u305d\u308c\u3089\u306f\u4e0d\u8981\u306a\u30b9\u30da\u30fc\u30b9\u3092\u4f7f\u7528\u3059\u308b\u3060\u3051\u3067\u3059\u3002\u305d\u306e\u305f\u3081\u3001Dockerfile\u3067\u306f<code>composer install --no-dev</code>\u3092\u5b9f\u884c\u3057\u3001\u624b\u52d5\u3067<code>composer install</code>\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</li> </ul> <p>\u5168\u3066\u304c\u4e0a\u624b\u304f\u3044\u3063\u305f\u5834\u5408\u3001<code>docker-compose.yml</code>\u3067\u5b9a\u7fa9\u3055\u308c\u305f<code>LAGOON_ROUTE</code>\uff08\u4f8b\uff1a<code>http://drupal.docker.amazee.io</code>\uff09\u3092\u958b\u304f\u3068\u3001Drupal\u306e\u30a8\u30e9\u30fc\u304c\u8868\u793a\u3055\u308c\u308b\u306f\u305a\u3067\u3059\u3002\u5fc3\u914d\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044 - \u4eca\u306e\u3068\u3053\u308d\u3053\u308c\u3067\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\u6700\u3082\u91cd\u8981\u306a\u306e\u306f\u3001Drupal\u30b5\u30a4\u30c8\u3092\u8aad\u307f\u8fbc\u3082\u3046\u3068\u3057\u3066\u3044\u308b\u3053\u3068\u3067\u3059\u3002</p> <p>500\u307e\u305f\u306f\u540c\u69d8\u306e\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u5834\u5408\u306f\u3001Composer\u3067\u5168\u3066\u304c\u6b63\u3057\u304f\u8aad\u307f\u8fbc\u307e\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/lagoonizing/#drupal_1","title":"\u30b9\u30c6\u30fc\u30bf\u30b9\u306e\u78ba\u8a8d\u3068Drupal\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u6700\u5f8c\u306bDrupal\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u6642\u304c\u6765\u307e\u3057\u305f\u304c\u3001\u305d\u306e\u524d\u306b\u5168\u3066\u304c\u6b63\u5e38\u306b\u52d5\u4f5c\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002\u305d\u306e\u305f\u3081\u306bDrush\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002<code>drush status</code>\u3092\u5b9f\u884c\u3057\u307e\u3059\uff1a</p> run drush status<pre><code>docker-compose exec cli bash\n[drupal-example]cli-drupal:/app$ drush status\n</code></pre> <p>\u4e0a\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u7d50\u679c\u3092\u8fd4\u3059\u306f\u305a\u3067\u3059:</p> drush status results<pre><code>[drupal-example]cli-drupal:/app$ drush status\n[notice] Missing database table: key_value\nDrupal version       :  8.6.1\nSite URI             :  http://drupal.docker.amazee.io\nDatabase driver      :  mysql\nDatabase hostname    :  mariadb\nDatabase port        :  3306\nDatabase username    :  drupal\nDatabase name        :  drupal\nPHP binary           :  /usr/local/bin/php\nPHP config           :  /usr/local/etc/php/php.ini\nPHP OS               :  Linux\nDrush script         :  /app/vendor/drush/drush/drush\nDrush version        :  9.4.0\nDrush temp           :  /tmp\nDrush configs        :  /home/.drush/drush.yml\n                        /app/vendor/drush/drush/drush.yml\nDrupal root          :  /app/web\nSite path            :  sites/default\n</code></pre> <p>\u60c5\u5831</p> <p>\u6b21\u306e\u30b9\u30c6\u30c3\u30d7\u306b\u9032\u3080\u524d\u306b\u3001\u516c\u958b\u9375\u306b\u3064\u3044\u3066pygmy\u306b\u4f1d\u3048\u308b\u5fc5\u8981\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002<code>Permission denied (publickey)</code>\u3068\u3044\u3046\u30a8\u30e9\u30fc\u304c\u8868\u793a\u3055\u308c\u305f\u5834\u5408\u306f\u3001\u3053\u3061\u3089\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044:pygmy - ssh\u30ad\u30fc\u306e\u8ffd\u52a0\u3002</p> <p>\u3053\u308c\u3067Drupal\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u6642\u304c\u6765\u307e\u3057\u305f\uff08\u4ee3\u308f\u308a\u306b\u65e2\u5b58\u306eSQL\u30d5\u30a1\u30a4\u30eb\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u6b21\u306e\u30b9\u30c6\u30c3\u30d7\u306b\u9032\u3093\u3067\u304f\u3060\u3055\u3044\u3002\u305f\u3060\u3057\u3001\u6700\u521d\u306f\u30af\u30ea\u30fc\u30f3\u306aDrupal\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001\u5168\u3066\u304c\u52d5\u4f5c\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\uff09\u3002</p> <p>drush si\u306e\u5b9f\u884c<pre><code>[drupal-example]cli-drupal:/app$ drush site-install\n</code></pre> \u3053\u308c\u306b\u3088\u308a\u3001\u6b21\u306e\u3088\u3046\u306a\u51fa\u529b\u304c\u8868\u793a\u3055\u308c\u308b\u306f\u305a\u3067\u3059:</p> drush si\u306e\u7d50\u679c<pre><code>[drupal-example]cli-drupal:/app$ drush site-install\nYou are about to DROP all tables in your 'drupal' database. Do you want to continue? (y/n): y\nStarting Drupal installation. This takes a while. Consider using the --notify global option.\nInstallation complete.  User name: admin  User password: arbZJekcqh\nCongratulations, you installed Drupal!\n</code></pre> <p>\u3053\u308c\u3067<code>LAGOON_ROUTE</code>\u3067\u5b9a\u7fa9\u3055\u308c\u305fURL\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\u65b0\u3057\u304f\u30af\u30ea\u30fc\u30f3\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305fDrupal\u304c\u8868\u793a\u3055\u308c\u308b\u306f\u305a\u3067\u3059 - \u304a\u3081\u3067\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01</p>"},{"location":"ja/lagoonizing/#_13","title":"\u65e2\u5b58\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c0\u30f3\u30d7\u306e\u30a4\u30f3\u30dd\u30fc\u30c8","text":"<p>\u65e2\u5b58\u306eDrupal\u30b5\u30a4\u30c8\u304c\u3042\u308b\u5834\u5408\u3001\u305d\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u30ed\u30fc\u30ab\u30eb\u30b5\u30a4\u30c8\u306b\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u305f\u3044\u3067\u3057\u3087\u3046\u3002\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c0\u30f3\u30d7\u3092\u4f5c\u6210\u3059\u308b\u65b9\u6cd5\u306f\u591a\u6570\u3042\u308a\u307e\u3059\u304c\u3001\u73fe\u5728\u306e\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u30d7\u30ed\u30d0\u30a4\u30c0\u306bDrush\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f7f\u7528\u3067\u304d\u307e\u3059\uff1a</p> drush sql-dump<pre><code>[your-existing-site]$ drush sql-dump --result-file=dump.sql\nDatabase dump saved to dump.sql                         [success]\n</code></pre> <p>\u3053\u308c\u3067\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5168\u4f53\u3092\u542b\u3080dump.sql\u30d5\u30a1\u30a4\u30eb\u304c\u3067\u304d\u307e\u3057\u305f\u3002\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u30ed\u30fc\u30ab\u30eb\u306eGit\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u3001CLI\u306b\u63a5\u7d9a\u3059\u308b\u3068\u3001\u305d\u3053\u306b\u30d5\u30a1\u30a4\u30eb\u304c\u8868\u793a\u3055\u308c\u308b\u306f\u305a\u3067\u3059\uff1a</p> <p>dump file<pre><code>[drupal-example] docker compose exec cli bash\n[drupal-example]cli-drupal:/app$ ls -l dump.sql\n-rw-r--r--    1 root     root          5281 Dec 19 12:46 dump.sql\n</code></pre> \u3053\u308c\u3067\u3001\u73fe\u5728\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u524a\u9664\u3057\u305f\u5f8c\u306b\u30c0\u30f3\u30d7\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3067\u304d\u307e\u3059\uff08\u307e\u3060cli\u306b\u63a5\u7d9a\u3057\u305f\u307e\u307e\u3067\u3059\uff09\uff1a</p> dump existing db and import dump file<pre><code>[drupal-example]cli-drupal:/app$ drush sql-drop\nDo you really want to drop all tables in the database drupal? (y/n): y\n[drupal-example]cli-drupal:/app$ drush sql-cli &lt; dump.sql\n</code></pre>"},{"location":"ja/lagoonizing/#drupal_2","title":"Drupal\u30d5\u30a1\u30a4\u30eb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea","text":"<p>Drupal\u30b5\u30a4\u30c8\u306b\u306f\u30d5\u30a1\u30a4\u30eb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3082\u542b\u307e\u308c\u307e\u3059\u3002\u65e2\u5b58\u306e\u30b5\u30a4\u30c8\u304b\u3089\u30d5\u30a1\u30a4\u30eb\u3092\u79fb\u884c\u3059\u308b\u306b\u306f\u3001\u6b63\u3057\u3044\u30d5\u30a9\u30eb\u30c0\uff08\u304a\u305d\u3089\u304f<code>web/sites/default/files</code>\u3001<code>sites/default/files</code>\u3001\u307e\u305f\u306f\u985e\u4f3c\u306e\u3082\u306e\uff09\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3059\u308b\u3060\u3051\u3067\u3059\u3002\u30a6\u30a7\u30d6\u30eb\u30fc\u30c8\u3068\u3057\u3066\u8a2d\u5b9a\u3057\u305f\u3082\u306e\u3092\u899a\u3048\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044 - \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u3088\u3063\u3066\u7570\u306a\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/lagoonizing/#_14","title":"\u30c7\u30d7\u30ed\u30a4","text":"<p>\u3053\u306e\u30ac\u30a4\u30c9\u306e\u5168\u3066\u306e\u624b\u9806\u3092\u5b8c\u4e86\u3057\u3001Lagoon\u7ba1\u7406\u8005\u304c\u5168\u3066\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u308c\u3070\u3001\u30b5\u30a4\u30c8\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u6e96\u5099\u304c\u6574\u3044\u307e\u3057\u305f\uff01</p> <p>Drupal\u30b5\u30a4\u30c8\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u5834\u5408\u306f\u3001\u3053\u306e\u30c7\u30d7\u30ed\u30a4\u30ac\u30a4\u30c9\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u305d\u308c\u4ee5\u5916\u306e\u5168\u3066\u306e\u30c7\u30d7\u30ed\u30a4\u306b\u3064\u3044\u3066\u306f\u3001\u3053\u306e\u30c7\u30d7\u30ed\u30a4\u30ac\u30a4\u30c9\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/logging/kibana-examples/","title":"Kibana\u306e\u4f8b","text":"<p>Kibana\u306e\u5165\u9580\u30d3\u30c7\u30aa\u3092\u898b\u3066\u3001\u30ed\u30b0\u3092\u6271\u3046\u6e96\u5099\u304c\u6574\u3044\u307e\u3057\u305f\u304b\uff1f\u79c1\u305f\u3061\u304c\u30b5\u30dd\u30fc\u30c8\u3057\u307e\u3059\uff01\u3053\u306e\u30da\u30fc\u30b8\u3067\u306f\u3001\u4f7f\u7528\u3067\u304d\u308bKibana\u30af\u30a8\u30ea\u306e\u4f8b\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\u3053\u308c\u306fKibana 101\u306e\u30af\u30e9\u30b9\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001Kibana\u3067\u4f55\u304c\u3067\u304d\u308b\u306e\u304b\u3092\u7406\u89e3\u3059\u308b\u306e\u306b\u5f79\u7acb\u3061\u307e\u3059\u3002</p> <p>\u59cb\u3081\u308b\u6e96\u5099\u306f\u3067\u304d\u307e\u3057\u305f\u304b\uff1f\u3000\u3067\u306f\u59cb\u3081\u307e\u3057\u3087\u3046\uff01</p> <p>\u6ce8\u610f:</p> <p>\u958b\u59cb\u3059\u308b\u524d\u306b\u30c6\u30ca\u30f3\u30c8\u3092\u9078\u629e\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\uff01 \u5de6\u5074\u306e\u30e1\u30cb\u30e5\u30fc\u306b\u3042\u308b <code>Tenant</code> \u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u305d\u308c\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u30c6\u30ca\u30f3\u30c8\u3092\u9078\u629e\u3057\u305f\u3089\u3001\u518d\u5ea6 <code>Discover</code> \u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u59cb\u3081\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/logging/kibana-examples/#_1","title":"\u30eb\u30fc\u30bf\u30fc\u30ed\u30b0","text":"<p>\u4ee5\u4e0b\u306b\u30012\u3064\u306e\u4e00\u822c\u7684\u306a\u30ed\u30b0\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u4f8b\u3092\u793a\u3057\u307e\u3059:</p> <ul> <li>\u3042\u306a\u305f\u306e\u30b5\u30a4\u30c8\u3078\u306e\u30d2\u30c3\u30c8/\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u7dcf\u6570\u3092\u8868\u793a\u3057\u307e\u3059\u3002</li> <li>\u7279\u5b9a\u306eIP\u30a2\u30c9\u30ec\u30b9\u304b\u3089\u306e\u30d2\u30c3\u30c8/\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u6570\u3092\u8868\u793a\u3057\u307e\u3059\u3002</li> </ul>"},{"location":"ja/logging/kibana-examples/#_2","title":"\u30b5\u30a4\u30c8\u3078\u306e\u30d2\u30c3\u30c8/\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u7dcf\u6570","text":"<ul> <li>Kibana\u3092\u8d77\u52d5\u3057\u3001<code>Discovery</code> \u3092\u9078\u629e\u3057\u307e\u3057\u3087\u3046(\u4ee5\u4e0b\u306e\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u306e\uff031)</li> <li>\u6b21\u306b\u3042\u306a\u305f\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30eb\u30fc\u30bf\u30fc\u30ed\u30b0\u3067\u3059(\uff032)\u3002</li> <li>\u305d\u3053\u304b\u3089\u3001\u3053\u306e\u60c5\u5831\u3092\u5c11\u3057\u7d5e\u308a\u8fbc\u307f\u307e\u3059\u3002\u79c1\u305f\u3061\u306e\u4e3b\u306a\u88fd\u54c1\u74b0\u5883\u306b\u7126\u70b9\u3092\u5f53\u3066\u307e\u3057\u3087\u3046\u3002</li> <li> <p>\u691c\u7d22\u30d0\u30fc(\uff033)\u306b\u5165\u529b\u3057\u307e\u3059:</p> <p><code>openshift_project: \"\u672c\u756a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u540d\u524d\"</code></p> </li> </ul> <ul> <li>\u3053\u308c\u306b\u3088\u308a\u3001\u6307\u5b9a\u3055\u308c\u305f\u671f\u9593\u5185\u306e\u672c\u756a\u74b0\u5883\u3078\u306e\u3059\u3079\u3066\u306e\u30d2\u30c3\u30c8\u304c\u8868\u793a\u3055\u308c\u307e\u3059</li> <li>\u53f3\u4e0a\u9685\u306e\u30e1\u30cb\u30e5\u30fc (#4) \u3067\u671f\u9593\u3092\u5909\u66f4\u3067\u304d\u307e\u3059\u3002</li> <li>\u30a8\u30f3\u30c8\u30ea\u306e\u6a2a\u306b\u3042\u308b\u77e2\u5370\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068 (#5)\u3001\u30a8\u30f3\u30c8\u30ea\u304c\u5c55\u958b\u3055\u308c\u3001\u30ad\u30e3\u30d7\u30c1\u30e3\u3055\u308c\u305f\u3059\u3079\u3066\u306e\u60c5\u5831\u304c\u8868\u793a\u3055\u308c\u307e\u3059</li> <li>\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u30ab\u30fc\u30bd\u30eb\u3092\u5408\u308f\u305b\u3066\u5de6\u5074\u306e\u300c\u8ffd\u52a0\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068 (#6)\u3001\u305d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u30a6\u30a3\u30f3\u30c9\u30a6\u306b\u8ffd\u52a0\u3067\u304d\u307e\u3059</li> <li>\u691c\u7d22\u30d0\u30fc\u3092\u4f7f\u7528\u3057\u3066\u3001\u7d50\u679c\u3092\u3055\u3089\u306b\u7d5e\u308a\u8fbc\u3080\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002</li> </ul> <p></p>"},{"location":"ja/logging/kibana-examples/#ip","title":"\u7279\u5b9a\u306eIP\u30a2\u30c9\u30ec\u30b9\u304b\u3089\u306e\u30d2\u30c3\u30c8\u6570/\u30ea\u30af\u30a8\u30b9\u30c8\u6570","text":"<p>\u4e0a\u8a18\u306e\u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u30b5\u30a4\u30c8\u3078\u306e\u3059\u3079\u3066\u306e\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u306e\u6982\u8981\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u304c\u3001\u7279\u5b9a\u306eIP\u30a2\u30c9\u30ec\u30b9\u306b\u7d5e\u308a\u8fbc\u307f\u305f\u3044\u5834\u5408\u306f\u3069\u3046\u3067\u3057\u3087\u3046\u304b\uff1f\u4f8b\u3048\u3070\u3001\u3042\u308bIP\u30a2\u30c9\u30ec\u30b9\u304c\u30b5\u30a4\u30c8\u306b\u4f55\u56de\u30a2\u30af\u30bb\u30b9\u3057\u305f\u304b\u3001\u305d\u306eIP\u30a2\u30c9\u30ec\u30b9\u304c\u3069\u306e\u30da\u30fc\u30b8\u3092\u898b\u3066\u3044\u305f\u304b\u3092\u78ba\u8a8d\u3057\u305f\u3044\u5834\u5408\u3067\u3059\u3002\u3053\u306e\u6b21\u306e\u30af\u30a8\u30ea\u304c\u5f79\u7acb\u3061\u307e\u3059\u3002</p> <p>\u307e\u305a\u3001\u524d\u56de\u3068\u540c\u3058\u30af\u30a8\u30ea\u304b\u3089\u59cb\u3081\u307e\u3059\u304c\u3001\u3044\u304f\u3064\u304b\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> <ul> <li>\u6700\u521d\u306b\u3001\u4ee5\u4e0b\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\uff1a<code>client_ip</code>\u304a\u3088\u3073<code>http_request</code></li> <li>\u3053\u308c\u306b\u3088\u308a\u3001\u3059\u3079\u3066\u306eIP\u30a2\u30c9\u30ec\u30b9\u3068\u305d\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u305f\u30da\u30fc\u30b8\u306e\u30ea\u30b9\u30c8\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u6b21\u306f\u3001Amazee.io\u30da\u30fc\u30b8\u306e\u5834\u5408\u306e\u8868\u793a\u5185\u5bb9\u3067\u3059:</li> </ul> <p>![\u3059\u3079\u3066\u306eIP\u30a2\u30c9\u30ec\u30b9\u3068\u305d\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u305f\u30da\u30fc\u30b8:]( \u8981\u6c42\u3055\u308c\u305f\u3002](../images/kibana_example2.png)</p> <p>\u3053\u308c\u306f\u826f\u3055\u305d\u3046\u3067\u3059\u304c\u3001\u7279\u5b9a\u306eIP\u30a2\u30c9\u30ec\u30b9\u304b\u3089\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3060\u3051\u3092\u8868\u793a\u3057\u305f\u3044\u5834\u5408\u306f\u3069\u3046\u3067\u3057\u3087\u3046\u304b\uff1f\u691c\u7d22\u6761\u4ef6\u306b\u30a2\u30c9\u30ec\u30b9\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3067\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3067\u304d\u307e\u3059\u3002</p> <ul> <li>\u6b21\u306e\u3088\u3046\u306b\u8ffd\u52a0\u3057\u307e\u3059:<code>AND client_ip: \"IP\u30a2\u30c9\u30ec\u30b9\"</code>.</li> <li>\u3053\u308c\u306b\u3088\u308a\u3001\u305d\u306e\u7279\u5b9a\u306eIP\u30a2\u30c9\u30ec\u30b9\u304b\u3089\u306e\u30d2\u30c3\u30c8\u3068\u3001\u305d\u306e\u30a2\u30c9\u30ec\u30b9\u304b\u3089\u30ea\u30af\u30a8\u30b9\u30c8\u3055\u308c\u305f\u30da\u30fc\u30b8\u3060\u3051\u304c\u7d50\u679c\u306b\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u4ee5\u4e0b\u306famazee.io\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u306e\u4f8b\u3067\u3059:</li> </ul> <p></p>"},{"location":"ja/logging/kibana-examples/#_3","title":"\u30b3\u30f3\u30c6\u30ca\u30ed\u30b0","text":"<p>\u30b3\u30f3\u30c6\u30ca\u30ed\u30b0\u306f\u3001\u7279\u5b9a\u306e\u30b3\u30f3\u30c6\u30ca\u3068\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3059\u308b\u3059\u3079\u3066\u306e\u6a19\u6e96\u51fa\u529b\uff08<code>stdout</code>\uff09\u304a\u3088\u3073\u6a19\u6e96\u30a8\u30e9\u30fc\uff08<code>stderr</code>\uff09\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8868\u793a\u3057\u307e\u3059\u3002\u6b21\u306b\u3001\u7279\u5b9a\u306e\u30b3\u30f3\u30c6\u30ca\u304b\u3089\u30ed\u30b0\u3092\u53d6\u5f97\u3057\u3001\u305d\u306e\u30b3\u30f3\u30c6\u30ca\u5185\u306e\u7279\u5b9a\u306e\u30a8\u30e9\u30fc\u756a\u53f7\u3092\u898b\u3064\u3051\u308b\u4f8b\u3092\u793a\u3057\u307e\u3059\u3002</p>"},{"location":"ja/logging/kibana-examples/#_4","title":"\u30b3\u30f3\u30c6\u30ca\u304b\u3089\u306e\u30ed\u30b0","text":"<p>\u7279\u5b9a\u306e\u30b3\u30f3\u30c6\u30ca\uff08php\u3001nginx\u306a\u3069\uff09\u306e\u30ed\u30b0\u3092\u78ba\u8a8d\u3057\u305f\u3044\u3067\u3059\u304b\uff1f\u305d\u306e\u5834\u5408\u306f\u3053\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u304c\u5f79\u7acb\u3061\u307e\u3059\uff01\u3053\u3053\u3067\u306fNGINX\u30ed\u30b0\u3092\u78ba\u8a8d\u3059\u308b\u65b9\u6cd5\u306b\u7126\u70b9\u3092\u5f53\u3066\u307e\u3059\u3002</p> <ul> <li>\u307e\u305a\u3001Kibana\u3092\u958b\u304d\u3001Discover\u3092\u9078\u629e\u3057\u307e\u3059(\u4e0b\u306e\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u306e\uff031)\u3002</li> <li>\u6b21\u306b\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30b3\u30f3\u30c6\u30ca\u30ed\u30b0\u3092\u9078\u629e\u3057\u307e\u3059(\uff032)\u3002</li> <li>\u691c\u7d22\u30d0\u30fc(\uff033)\u306b\u79fb\u52d5\u3057\u3001<code>kubernetes.container_name: \"nginx\"</code>\u3068\u5165\u529b\u3057\u307e\u3059\u3002</li> <li>\u3053\u308c\u306b\u3088\u308a\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u3059\u3079\u3066\u306eNGINX\u30ed\u30b0\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002 \u30a8\u30f3\u30c8\u30ea\u306e\u96a3\u306e\u77e2\u5370\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b(\uff034)\u3068\u3001\u305d\u306e\u30a8\u30f3\u30c8\u30ea\u304c\u5c55\u958b\u3055\u308c\u3001\u53ce\u96c6\u3057\u305f\u3059\u3079\u3066\u306e\u60c5\u5831\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002</li> <li>\u30e1\u30c3\u30bb\u30fc\u30b8\u30d5\u30a3\u30fc\u30eb\u30c9\u3068\u30ec\u30d9\u30eb\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u30d3\u30e5\u30fc\u306b\u8ffd\u52a0\u3057\u307e\u3057\u3087\u3046\u3002\u5de6\u5074\u306e\u300cAdd\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3053\u3068\u3067\u8ffd\u52a0\u3067\u304d\u307e\u3059(\uff035)\u3002</li> <li>\u753b\u9762\u306e\u53f3\u4e0a\u9685(\uff036)\u3067\u6642\u9593\u67a0\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u4f8b\u3067\u306f\u3001\u904e\u53bb4\u6642\u9593\u306e\u30ed\u30b0\u3092\u898b\u3066\u3044\u307e\u3059\u3002</li> </ul> <p></p>"},{"location":"ja/logging/kibana-examples/#_5","title":"\u30ed\u30b0\u306e\u7279\u5b9a\u306e\u30a8\u30e9\u30fc","text":"<p>NGINX\u30b3\u30f3\u30c6\u30ca\u3067\u767a\u751f\u3057\u305f500 Internal Server\u30a8\u30e9\u30fc\u306e\u6570\u3092\u78ba\u8a8d\u3057\u305f\u3044\u3067\u3059\u304b\uff1f\u691c\u7d22\u30af\u30a8\u30ea\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u6b21\u306e\u3088\u3046\u306b\u691c\u7d22\u3057\u307e\u3059:</p> <p><code>kubernetes.container_name: \"nginx\" AND message: \"500\"</code></p> <p>\u3053\u308c\u306b\u3088\u308a\u3001NGINX\u30b3\u30f3\u30c6\u30ca\u5185\u306e500\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u307f\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u4efb\u610f\u306e\u30b3\u30f3\u30c6\u30ca\u5185\u306e\u4efb\u610f\u306e\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u691c\u7d22\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/logging/kibana-examples/#_6","title":"\u53ef\u8996\u5316","text":"<p>Kibana\u3067\u306f\u3001\u53ef\u8996\u5316\u3084\u30b0\u30e9\u30d5\u3092\u4f5c\u6210\u3059\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u3082\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u3053\u3067\u306f\u3001\u4e0a\u8a18\u306e\u30af\u30a8\u30ea\u3092\u4f7f\u7528\u3057\u3066\u3001\u6708\u9593\u306e\u30d2\u30c3\u30c8/\u30ea\u30af\u30a8\u30b9\u30c8\u6570\u3092\u8868\u793a\u3059\u308b\u30c1\u30e3\u30fc\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <ol> <li>Kibana\u306e\u5de6\u5074\u306b\u3042\u308b\u300cVisualize\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059</li> <li>\u9752\u3044\u30d7\u30e9\u30b9\u8a18\u53f7\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059</li> <li>\u3053\u306e\u4f8b\u3067\u306f\u3001\u300cVertical Bar\u300d\u30c1\u30e3\u30fc\u30c8\u3092\u9078\u629e\u3057\u307e\u3059</li> <li>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30eb\u30fc\u30bf\u30fc\u30ed\u30b0\u3092\u9078\u629e\u3057\u307e\u3059</li> <li>\u300cBuckets\u300d\u306e\u4e0b\u306b\u3042\u308b\u300cX-Axis\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u300cDate Histogram\u300d\u3092\u9078\u629e\u3057\u3001\u9593\u9694\u3092\u300cdaily\uff08\u6bce\u65e5\uff09\u300d\u306b\u8a2d\u5b9a\u3057\u307e\u3059</li> <li>\u6210\u529f\u3067\u3059\uff01\u3053\u308c\u3067\u3001\u65e5\u3005\u306e\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u3092\u8868\u793a\u3059\u308b\u30d0\u30fc\u30c1\u30e3\u30fc\u30c8\u304c\u8868\u793a\u3055\u308c\u308b\u306f\u305a\u3067\u3059\u3002</li> </ol> <p>\u6ce8\u610f:</p> <p>\u53f3\u4e0a\u9685\u306e\u30c7\u30fc\u30bf\u306e\u9069\u5207\u306a\u6642\u9593\u67a0\u3092\u9078\u629e\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u4ee5\u4e0b\u306f\u3001\u65e5\u3005\u306e\u30d2\u30c3\u30c8\u6570\u3092\u53ef\u8996\u5316\u3057\u305f\u30c1\u30e3\u30fc\u30c8\u306e\u4f8b\u3067\u3059:</p> <p></p> <p>\u307e\u305f\u3001\u53ef\u8996\u5316\uff08\u304a\u3088\u3073\u691c\u7d22\uff09\u3092\u4fdd\u5b58\u3067\u304d\u308b\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\uff01\u3053\u308c\u306b\u3088\u308a\u3001\u5c06\u6765\u7684\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306e\u304c\u3055\u3089\u306b\u901f\u304f\u306a\u308a\u307e\u3059\u3002\u5404\u30a2\u30ab\u30a6\u30f3\u30c8\u306b\u306f\u72ec\u81ea\u306eKibana\u30c6\u30ca\u30f3\u30c8\u304c\u3042\u308b\u305f\u3081\u3001\u691c\u7d22\u3084\u53ef\u8996\u5316\u304c\u4ed6\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3068\u5171\u6709\u3055\u308c\u308b\u3053\u3068\u306f\u3042\u308a\u307e\u305b\u3093\u3002</p>"},{"location":"ja/logging/kibana-examples/#_7","title":"\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0","text":""},{"location":"ja/logging/logging/","title":"\u30ed\u30ae\u30f3\u30b0","text":"<p>Lagoon\u306fKibana\u3092\u4ecb\u3057\u3066\u4ee5\u4e0b\u306e\u30ed\u30b0\u306b\u30a2\u30af\u30bb\u30b9\u3092\u63d0\u4f9b\u3057\u307e\u3059:</p> <ul> <li>Kubernetes\u30eb\u30fc\u30bf\u30fc\u304b\u3089\u306e\u30ed\u30b0\u306b\u306f\u3001\u3059\u3079\u3066\u306eHTTP\u304a\u3088\u3073HTTPS\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002:<ul> <li>\u30bd\u30fc\u30b9IP</li> <li>URL</li> <li>\u30d1\u30b9</li> <li>HTTP\u52d5\u8a5e</li> <li>Cookies</li> <li>\u30d8\u30c3\u30c0\u30fc</li> <li>\u30e6\u30fc\u30b6\u30fc\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8</li> <li>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8</li> <li>\u30b3\u30f3\u30c6\u30ca\u540d</li> <li>\u5fdc\u7b54\u30b5\u30a4\u30ba</li> <li>\u5fdc\u7b54\u6642\u9593</li> </ul> </li> <li>\u30b3\u30f3\u30c6\u30ca\u306e\u30ed\u30b0:<ul> <li><code>stdout</code>\u3068<code>stderr</code>\u30e1\u30c3\u30bb\u30fc\u30b8</li> <li>\u30b3\u30f3\u30c6\u30ca\u540d</li> <li>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8</li> </ul> </li> <li>Lagoon\u306e\u30ed\u30b0:<ul> <li>Webhooks\u306e\u89e3\u6790</li> <li>\u30d3\u30eb\u30c9\u30ed\u30b0</li> <li>\u30d3\u30eb\u30c9\u30a8\u30e9\u30fc</li> <li>\u305d\u306e\u4ed6\u306eLagoon\u95a2\u9023\u30ed\u30b0</li> </ul> </li> <li>\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30ed\u30b0:<ul> <li>Drupal\u306e\u5834\u5408: Drupal Watchdog\u304b\u3089\u306e\u30ed\u30b0\u3092\u53d7\u3051\u53d6\u308b\u305f\u3081\u306b\u3001Lagoon Logs\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002</li> <li>Laravel\u306e\u5834\u5408: Laravel\u7528Lagoon Logs\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002</li> <li>\u305d\u306e\u4ed6\u306e\u30ef\u30fc\u30af\u30ed\u30fc\u30c9:<ul> <li>\u30ed\u30b0\u3092<code>udp://application-logs.lagoon.svc:5140</code>\u306b\u9001\u4fe1\u3057\u307e\u3059\u3002</li> <li>\u30ed\u30b0\u304cJSON\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u3057\u3066\u69cb\u9020\u5316\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</li> <li><code>type</code>\u30d5\u30a3\u30fc\u30eb\u30c9\u306bKubernetes\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u306e\u540d\u524d\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044(<code>$LAGOON_PROJECT-$LAGOON_ENVIRONMENT</code>)\u3002</li> </ul> </li> </ul> </li> </ul> <p>\u30ed\u30b0\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306b\u306f\u3001Lagoon\u7ba1\u7406\u8005\u306b\u9023\u7d61\u3057\u3066Kibana\u30eb\u30fc\u30c8\u306eURL\u3092\u53d6\u5f97\u3057\u3066\u304f\u3060\u3055\u3044\uff08amazee.io\u306e\u5834\u5408\u306fhttps://logs.amazeeio.cloud/\u3067\u3059)\u3002</p> <p>\u5404Lagoon\u30e6\u30fc\u30b6\u30fc\u30a2\u30ab\u30a6\u30f3\u30c8\u306b\u306f\u500b\u5225\u306e\u30ed\u30b0\u30a4\u30f3\u304c\u3042\u308a\u3001\u30a2\u30af\u30bb\u30b9\u6a29\u306e\u3042\u308b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30ed\u30b0\u306e\u307f\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002</p> <p>\u5404Lagoon\u30e6\u30fc\u30b6\u30fc\u30a2\u30ab\u30a6\u30f3\u30c8\u306f\u307e\u305f\u3001\u72ec\u81ea\u306eKibana Tenant\u3092\u6301\u3063\u3066\u304a\u308a\u3001\u3053\u308c\u306f\u4fdd\u5b58\u3055\u308c\u305f\u691c\u7d22\u3084\u30d3\u30b8\u30e5\u30a2\u30e9\u30a4\u30bc\u30fc\u30b7\u30e7\u30f3\u304c\u4ed6\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3068\u5171\u6709\u3055\u308c\u306a\u3044\u3053\u3068\u3092\u610f\u5473\u3057\u307e\u3059\u3002</p> <p>Kibana\u306e\u4f7f\u7528\u65b9\u6cd5\u306b\u3064\u3044\u3066\u8a73\u3057\u304f\u77e5\u308a\u305f\u3044\u5834\u5408\u306f\u3001\u3053\u3061\u3089\u3092\u3054\u89a7\u304f\u3060\u3055\u3044: https://www.elastic.co/webinars/getting-started-kibana</p>"},{"location":"ja/other-tools/client-libraries/","title":"Lagoon\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30e9\u30a4\u30d6\u30e9\u30ea","text":"<p>Lagoon\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u306e\u30c4\u30fc\u30eb\u958b\u767a\u306b\u8208\u5473\u304c\u3042\u308b\u5834\u5408\u3001\u3044\u304f\u3064\u304b\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u5f79\u7acb\u3064\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002</p>"},{"location":"ja/other-tools/client-libraries/#machinery","title":"Machinery","text":"<p>Machinery\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u3001Lagoon\u306e\u30c4\u30fc\u30eb\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4e2d\u3067\u6700\u3082\u7a4d\u6975\u7684\u306b\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3001\u958b\u767a\u3055\u308c\u3066\u3044\u307e\u3059\u3002 \u3053\u308c\u306f\u3001\u4e3b\u306b(\u3057\u304b\u3057\u6392\u4ed6\u7684\u3067\u306f\u306a\u304f)API\u3068\u306e\u3084\u308a\u53d6\u308a\u306e\u305f\u3081\u306e\u3001\u79c1\u305f\u3061\u306e\u3059\u3079\u3066\u306egolang\u57fa\u76e4\u306e\u30c4\u30fc\u30eb\u30bf\u30a4\u30d7\u306b\u308f\u305f\u308b\u3059\u3079\u3066\u306e\u57fa\u672c\u64cd\u4f5c\u306e\u4e2d\u592e\u30b9\u30c8\u30a2\u3067\u3059\u3002</p> <p>https://github.com/uselagoon/machinery/</p>"},{"location":"ja/other-tools/client-libraries/#php","title":"PHP","text":"<p>PHP\u306e\u7d71\u5408\u3092\u63a2\u3057\u3066\u3044\u308b\u306a\u3089\u3001php-sdk\u304c\u3042\u306a\u305f\u306e\u4ed5\u4e8b\u306e\u51fa\u767a\u70b9\u3068\u3057\u3066\u826f\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002</p> <p>https://github.com/uselagoon/lagoon-php-sdk</p>"},{"location":"ja/other-tools/client-libraries/#_1","title":"\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u30e9\u30a4\u30d6\u30e9\u30ea","text":""},{"location":"ja/other-tools/client-libraries/#ansible","title":"Ansible","text":"<p>Lagoon\u3068\u306e\u3084\u308a\u53d6\u308a\u306e\u305f\u3081\u306e\u983b\u7e41\u306b\u66f4\u65b0\u3055\u308c\u3001\u62e1\u5f35\u3055\u308c\u3066\u3044\u308bAnsible\u30e9\u30a4\u30d6\u30e9\u30ea\u3002</p> <p>https://github.com/salsadigitalauorg/lagoon_ansible_collection</p>"},{"location":"ja/resources/faq/","title":"\u3088\u304f\u3042\u308b\u8cea\u554f","text":""},{"location":"ja/resources/faq/#lagoon","title":"Lagoon\u306e\u7ba1\u7406\u8005\u306b\u3069\u306e\u3088\u3046\u306b\u9023\u7d61\u3059\u308c\u3070\u3088\u3044\u3067\u3059\u304b\uff1f","text":"<p>\u5c02\u7528\u306eSlack\u30c1\u30e3\u30cd\u30eb\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u306f\u305a\u306a\u306e\u3067\u3001\u305d\u308c\u3092\u5229\u7528\u3057\u3066\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u53d6\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059 - \u3082\u3057\u306a\u3044\u5834\u5408\u3084\u3001\u3069\u306e\u3088\u3046\u306b\u9023\u7d61\u3059\u308c\u3070\u3088\u3044\u304b\u5fd8\u308c\u3066\u3057\u307e\u3063\u305f\u5834\u5408\u306f\u3001support@amazee.io\u306b\u9023\u7d61\u3057\u3066\u4e0b\u3055\u3044\u3002</p>"},{"location":"ja/resources/faq/#_2","title":"\u30d0\u30b0\u3092\u898b\u3064\u3051\u307e\u3057\u305f\uff01\ud83d\udc1e","text":"<p>\u30d0\u30b0\u3084\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u554f\u984c\u3092\u898b\u3064\u3051\u305f\u5834\u5408\u306f\u3001\u305d\u306e\u5185\u5bb9\u3092support@amazee.io\u306b\u9001\u3063\u3066\u304f\u3060\u3055\u3044\u3002GitHub\u306e\u554f\u984c\u3068\u3057\u3066\u5831\u544a\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/resources/faq/#amazeeiolagoon","title":"amazee.io\u306eLagoon\u3092\u5229\u7528\u3057\u305f\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u30b5\u30fc\u30d3\u30b9\u306b\u8208\u5473\u304c\u3042\u308a\u307e\u3059","text":"<p>\u305d\u308c\u306f\u7d20\u6674\u3089\u3057\u3044\u30cb\u30e5\u30fc\u30b9\u3067\u3059\uff01sales@amazee.io\u307e\u3067\u30e1\u30fc\u30eb\u3067\u304a\u554f\u3044\u5408\u308f\u305b\u3044\u305f\u3060\u3051\u307e\u3059\u3002</p>"},{"location":"ja/resources/faq/#ssl","title":"\u79c1\u306f\u7121\u52b9\u306aSSL\u8a3c\u660e\u66f8\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u3044\u307e\u3059","text":"<p>\u307e\u305a\u6700\u521d\u306b\u8a66\u3059\u3079\u304d\u3053\u3068\u306f\u3001\u79c1\u305f\u3061\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308bSSL\u306b\u95a2\u3059\u308b\u60c5\u5831\u3092\u53c2\u7167\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u305d\u306e\u624b\u9806\u306b\u5f93\u3063\u3066\u3082\u307e\u3060\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u5834\u5408\u306f\u3001\u30c1\u30b1\u30c3\u30c8\u3092\u9001\u4fe1\u3059\u308b\u304b\u3001\u30c1\u30e3\u30c3\u30c8\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u3063\u3066\u304f\u3060\u3055\u3044\u3002\u79c1\u305f\u3061\u306f\u3042\u306a\u305f\u306e\u554f\u984c\u3092\u89e3\u6c7a\u3059\u308b\u306e\u3092\u304a\u624b\u4f1d\u3044\u3057\u307e\u3059\u3002</p>"},{"location":"ja/resources/faq/#drush-array","title":"Drush\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u304d\u306b \"Array\" \u30a8\u30e9\u30fc\u304c\u51fa\u3066\u3044\u307e\u3059","text":"<p>\u3053\u308c\u306fDrush\u30d0\u30fc\u30b8\u30e7\u30f38.1.16\u30688.1.17\u3067\u591a\u304f\u898b\u3089\u308c\u305f\u30d0\u30b0\u3067\u3001\u30a8\u30e9\u30fc\u306f\u6b21\u306e\u3088\u3046\u306a\u3082\u306e\u3067\u3057\u305f:</p> Bash<pre><code>\u30b3\u30de\u30f3\u30c9\u3092\u6b63\u5e38\u306b\u5b9f\u884c\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f(\u8fd4\u5374:Array [error]\n(\n[default] =&gt; Array\n(\n[default] =&gt; Array\n(\n[driver] =&gt; mysql\n[prefix] =&gt; Array\n(\n[default] =&gt;\n)\n, code: 0)\nError: no database record could be found for source @main [error]\n</code></pre> <p>Drush\u3092\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3059\u308b\u3068\u3001\u3053\u306e\u554f\u984c\u306f\u89e3\u6d88\u3055\u308c\u308b\u306f\u305a\u3067\u3059\u3002\u6211\u3005\u306f\u5f37\u304f\u3001\u30d0\u30fc\u30b8\u30e7\u30f38.3\u307e\u305f\u306f\u305d\u308c\u4ee5\u964d\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002Drush\u3092\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3059\u308c\u3070\u3001\u30b3\u30de\u30f3\u30c9\u306f\u52d5\u4f5c\u3059\u308b\u306f\u305a\u3067\u3059\uff01</p>"},{"location":"ja/resources/faq/#kibanainternal-server-error","title":"Kibana\u30ed\u30b0\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u3001Internal Server Error\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u3059","text":"<ol> <li>Kibana\u306e\u5de6\u5074\u306e\u30e1\u30cb\u30e5\u30fc\u3067\u300c\u30c6\u30ca\u30f3\u30c8\u300d\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002</li> <li>\u81ea\u5206\u306e\u30c6\u30ca\u30f3\u30c8\u540d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</li> <li>\u300c\u30c6\u30ca\u30f3\u30c8\u306e\u5909\u66f4\u300d\u3068\u3042\u306a\u305f\u306e\u30c6\u30ca\u30f3\u30c8\u306e\u540d\u524d\u3068\u3044\u3046\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002</li> <li>\u300c\u30c7\u30a3\u30b9\u30ab\u30d0\u30fc\u300d\u30bf\u30d6\u306b\u623b\u308a\u3001\u30af\u30a8\u30ea\u3092\u518d\u5ea6\u8a66\u307f\u307e\u3059\u3002</li> </ol> <p>\u3053\u308c\u3067\u30ed\u30b0\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u306f\u305a\u3067\u3059\u3002</p>"},{"location":"ja/resources/faq/#ssh","title":"\u4efb\u610f\u306e\u74b0\u5883\u306bSSH\u3067\u63a5\u7d9a\u3067\u304d\u306a\u3044","text":"<p>\u4efb\u610f\u306e\u74b0\u5883\u306bSSH\u3067\u63a5\u7d9a\u3067\u304d\u307e\u305b\u3093\u3002\u6b21\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u307e\u3059: <code>Permission denied (publickey)</code>\u3002<code>drush sa</code>\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u30a8\u30a4\u30ea\u30a2\u30b9\u304c\u8fd4\u3055\u308c\u307e\u305b\u3093\u3002</p> <p>\u3053\u308c\u306f\u901a\u5e38\u3001Pygmy\u306e\u554f\u984c\u3092\u793a\u3057\u3066\u3044\u307e\u3059\u3002Pygmy\u306e\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u3053\u3061\u3089\u3067\u898b\u3064\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059:https://pygmystack.github.io/pygmy/troubleshooting/</p>"},{"location":"ja/resources/faq/#_3","title":"\u30d3\u30eb\u30c9\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u78ba\u8a8d\u3059\u308b\u306b\u306f\u3069\u3046\u3059\u308c\u3070\u3044\u3044\u3067\u3059\u304b\uff1f","text":""},{"location":"ja/resources/faq/#_4","title":"\u3069\u306e\u3088\u3046\u306b\u3057\u3066\u8ffd\u52a0\u3057\u307e\u3059\u304b \u30af\u30ed\u30f3\u30b8\u30e7\u30d6\u3068\u306f\uff1f","text":""},{"location":"ja/resources/faq/#_5","title":"\u65b0\u3057\u3044\u30eb\u30fc\u30c8\u3092\u8ffd\u52a0\u3059\u308b\u306b\u306f\uff1f","text":""},{"location":"ja/resources/faq/#_6","title":"\u30eb\u30fc\u30c8\u3092\u524a\u9664\u3059\u308b\u306b\u306f\uff1f","text":"<p>Lagoon\u306f\u3001<code>.lagoon.yml</code>\u304b\u3089\u30eb\u30fc\u30c8\u304c\u524a\u9664\u3055\u308c\u305f\u3053\u3068\u3092\u30c7\u30d7\u30ed\u30a4\u6642\u306b\u691c\u51fa\u3057\u307e\u3059\u3002\u30c7\u30d7\u30ed\u30a4\u30ed\u30b0\u3092\u78ba\u8a8d\u3057\u3066\u3001\u30eb\u30fc\u30c8\u304c\u81ea\u52d5\u7684\u306b\u524a\u9664\u3055\u308c\u305f\u304b\u3001\u305d\u308c\u3089\u3092\u524a\u9664\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/resources/faq/#pygmy-status","title":"<code>pygmy status</code>\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u30ad\u30fc\u304c\u30ed\u30fc\u30c9\u3055\u308c\u307e\u305b\u3093","text":"<p>SSH\u30ad\u30fc\u3092pygmy\u306b\u30ed\u30fc\u30c9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u65b9\u6cd5\u306f\u3053\u3061\u3089:https://pygmystack.github.io/pygmy/ssh_agent</p>"},{"location":"ja/resources/faq/#drush-sa","title":"<code>drush sa</code>\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u30a8\u30a4\u30ea\u30a2\u30b9\u304c\u8fd4\u3055\u308c\u307e\u305b\u3093","text":"<p>\u3053\u308c\u306f\u901a\u5e38\u3001Pygmy\u306b\u554f\u984c\u304c\u3042\u308b\u3053\u3068\u3092\u793a\u3057\u3066\u3044\u307e\u3059\u3002Pygmy\u306e\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u3053\u3061\u3089\u3067\u898b\u3064\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059:https://pygmystack.github.io/pygmy/troubleshooting</p>"},{"location":"ja/resources/faq/#drush","title":"\u300cdrush\u306f\u3088\u308a\u6a5f\u80fd\u7684\u306a\u74b0\u5883\u304c\u5fc5\u8981\u3067\u3059\u300d\u3068\u3044\u3046\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u3001\u30c7\u30d7\u30ed\u30a4\u304c\u5931\u6557\u3059\u308b","text":"<p>\u3053\u308c\u306f\u901a\u5e38\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u305f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304c\u306a\u3044\u3053\u3068\u3092\u610f\u5473\u3057\u307e\u3059\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u8ffd\u52a0\u3059\u308b\u305f\u3081\u306e\u30b9\u30c6\u30c3\u30d7\u30d0\u30a4\u30b9\u30c6\u30c3\u30d7\u30ac\u30a4\u30c9\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/resources/faq/#pygmy","title":"Pygmy\u3092\u8d77\u52d5\u3059\u308b\u3068\u300c\u30a2\u30c9\u30ec\u30b9\u306f\u3059\u3067\u306b\u4f7f\u7528\u4e2d\u300d\u30a8\u30e9\u30fc\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u304b\uff1f","text":"<p><code>\u30e6\u30fc\u30b6\u30fc\u30e9\u30f3\u30c9\u30d7\u30ed\u30ad\u30b7\u306e\u8d77\u52d5\u30a8\u30e9\u30fc: listen tcp 0.0.0.0:80: bind: address already in use Error: failed to start containers: amazeeio-haproxy</code></p> <p>\u3053\u308c\u306f\u65e2\u77e5\u306e\u30a8\u30e9\u30fc\u3067\u3059\uff01\u307b\u3068\u3093\u3069\u306e\u5834\u5408\u3001\u30dd\u30fc\u30c880\u3067\u3059\u3067\u306b\u4f55\u304b\u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u610f\u5473\u3057\u307e\u3059\u3002\u6b21\u306e\u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u72af\u4eba\u3092\u898b\u3064\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059:</p> <pre><code>netstat -ltnp | grep -w ':80'\n</code></pre> <p>\u3053\u308c\u306b\u3088\u308a\u3001\u30dd\u30fc\u30c880\u3067\u5b9f\u884c\u4e2d\u306e\u3059\u3079\u3066\u3092\u30ea\u30b9\u30c8\u30a2\u30c3\u30d7\u3057\u307e\u3059\u3002\u30dd\u30fc\u30c880\u3067\u52d5\u4f5c\u3057\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u3092\u7d42\u4e86\u3055\u305b\u307e\u3059\u3002\u30dd\u30fc\u30c880\u304c\u89e3\u653e\u3055\u308c\u308b\u3068\u3001Pygmy\u306f\u3053\u308c\u4ee5\u4e0a\u306e\u30a8\u30e9\u30fc\u306a\u304f\u8d77\u52d5\u3059\u308b\u306f\u305a\u3067\u3059\u3002</p>"},{"location":"ja/resources/faq/#pr","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30d6\u30e9\u30f3\u30c1/PR\u74b0\u5883/\u672c\u756a\u74b0\u5883\u3092\u3069\u306e\u3088\u3046\u306b\u5909\u66f4\u3067\u304d\u307e\u3059\u304b\uff1f","text":"<p>\u305d\u306e\u5909\u66f4\u306fLagoon API\u3092\u4f7f\u7528\u3057\u3066\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\uff01\u3053\u306e\u5909\u66f4\u306b\u95a2\u3059\u308b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u306fGraphQL\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u898b\u3064\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059.</p>"},{"location":"ja/resources/faq/#_7","title":"\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3092\u8ffd\u52a0\u3059\u308b\u306b\u306f\u3069\u3046\u3059\u308c\u3070\u3044\u3044\u3067\u3059\u304b\uff1f","text":""},{"location":"ja/resources/faq/#ssh_1","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8/\u30b0\u30eb\u30fc\u30d7\u306b\u65b0\u3057\u3044\u30e6\u30fc\u30b6\u30fc(\u304a\u3088\u3073SSH\u30ad\u30fc)\u3092\u8ffd\u52a0\u3059\u308b\u306b\u306f\u3069\u3046\u3059\u308c\u3070\u3044\u3044\u3067\u3059\u304b\uff1f","text":"<p>\u3053\u308c\u306fLagoon API\u3092\u4ecb\u3057\u3066\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u5909\u66f4\u306e\u30b9\u30c6\u30c3\u30d7\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u306f\u79c1\u305f\u3061\u306eGraphQL\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u898b\u3064\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/resources/faq/#_8","title":"\u74b0\u5883\u306f\u5b8c\u5168\u306b\u524a\u9664\u3057\u3066\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u5927\u304d\u306a\u30b3\u30fc\u30c9\u5909\u66f4\u3092\u5c55\u958b\u3067\u304d\u307e\u3059\u304b\uff1f","text":"<p>\u74b0\u5883\u306f\u5404\u30c7\u30d7\u30ed\u30a4\u3067\u5b8c\u5168\u306b\u30bc\u30ed\u304b\u3089\u69cb\u7bc9\u3055\u308c\u3001\u53e4\u3044\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3068\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3057\u3066\u30b3\u30fc\u30c9\u3092\u30d7\u30c3\u30b7\u30e5\u3059\u308b\u3068\u3001\u65b0\u9bae\u306a\u30af\u30ea\u30fc\u30f3\u306a\u30d3\u30eb\u30c9\u304c\u5f97\u3089\u308c\u307e\u3059\u3002\u518d\u540c\u671f\u3092\u5fd8\u308c\u306a\u3044\u3067\u304f\u3060\u3055\u3044\uff01</p> <p>GraphQL\u3092\u4ecb\u3057\u3066\u74b0\u5883\u3092\u524a\u9664\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\u6307\u793a\u306f\u79c1\u305f\u3061\u306eGraphQL\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u898b\u3064\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/resources/faq/#_9","title":"\u65b0\u3057\u3044\u74b0\u5883\u5909\u6570\u3092\u8868\u793a\u3055\u305b\u308b\u306b\u306f\u3069\u3046\u3059\u308c\u3070\u3044\u3044\u3067\u3059\u304b\uff1f","text":"<p>GraphQL\u3092\u4ecb\u3057\u3066\u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u74b0\u5883\u306b\u30e9\u30f3\u30bf\u30a4\u30e0\u74b0\u5883\u5909\u6570\u3092\u8ffd\u52a0\u3057\u305f\u3089\u3001\u30c7\u30d7\u30ed\u30a4\u3092\u884c\u3046\u3060\u3051\u3067\u65b0\u3057\u3044\u74b0\u5883\u5909\u6570\u3092\u8868\u793a\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u3042\u306a\u305f\u306e\u74b0\u5883\u306b\u5909\u66f4\u304c\u53cd\u6620\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"ja/resources/faq/#lagoonsftp","title":"Lagoon\u74b0\u5883\u306bSFTP\u3067\u30d5\u30a1\u30a4\u30eb\u3092\u9001\u4fe1/\u53d6\u5f97\u3059\u308b\u306b\u306f\u3069\u3046\u3059\u308c\u3070\u3044\u3044\u3067\u3059\u304b\uff1f","text":"<p>\u30af\u30e9\u30a6\u30c9\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u306e\u304a\u5ba2\u69d8\u306f\u3001\u4ee5\u4e0b\u306e\u60c5\u5831\u3092\u4f7f\u7528\u3057\u3066Lagoon\u74b0\u5883\u306bSFTP\u3067\u63a5\u7d9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059:</p> <ul> <li>\u30b5\u30fc\u30d0\u30fc\u30db\u30b9\u30c8\u540d: <code>ssh.lagoon.amazeeio.cloud</code></li> <li>\u30dd\u30fc\u30c8: 32222</li> <li>\u30e6\u30fc\u30b6\u30fc\u540d: &lt;\u30d7\u30ed\u30b8\u30a7\u30af\u30c8-\u74b0\u5883-\u540d&gt;</li> </ul> <p>\u30e6\u30fc\u30b6\u30fc\u540d\u306f\u3001\u63a5\u7d9a\u3059\u308b\u74b0\u5883\u306e\u540d\u524d\u306b\u306a\u308a\u307e\u3059\u3002\u6700\u3082\u4e00\u822c\u7684\u306a\u30d1\u30bf\u30fc\u30f3\u306f_<code>PROJECTNAME-ENVIRONMENT</code>_\u3067\u3059\u3002</p> <p>\u307e\u305f\u3001\u65b0\u3057\u3044Lagoon Sync\u30c4\u30fc\u30eb\u306b\u3064\u3044\u3066\u3082\u30c1\u30a7\u30c3\u30af\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u3053\u3067\u8a73\u7d30\u3092\u8aad\u3080\u3053\u3068\u304c\u3067\u304d\u307e\u3059: https://github.com/uselagoon/lagoon-sync</p> <p>\u8a8d\u8a3c\u306f\u3001SSH\u516c\u958b\u9375\u3068\u79d8\u5bc6\u9375\u306e\u8a8d\u8a3c\u3092\u901a\u3058\u3066\u81ea\u52d5\u7684\u306b\u884c\u308f\u308c\u307e\u3059\u3002</p>"},{"location":"ja/resources/faq/#lets-encryptssl","title":"Let's Encrypt\u3092\u4f7f\u7528\u3057\u305f\u304f\u306a\u3044\u3002\u79c1\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3044SSL\u8a3c\u660e\u66f8\u304c\u3042\u308a\u307e\u3059","text":"<p>\u305d\u308c\u306b\u3064\u3044\u3066\u306f\u78ba\u304b\u306b\u304a\u624b\u4f1d\u3044\u3067\u304d\u307e\u3059\u3002\u81ea\u5206\u306eSSL\u8a3c\u660e\u66f8\u3092\u624b\u306b\u5165\u308c\u305f\u3089\u3001\u9060\u616e\u306a\u304f\u30c1\u30b1\u30c3\u30c8\u3092\u63d0\u51fa\u3059\u308b\u304b\u3001\u30c1\u30e3\u30c3\u30c8\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u3063\u3066\u304f\u3060\u3055\u3044\u3002\u559c\u3093\u3067\u304a\u624b\u4f1d\u3044\u3057\u307e\u3059\uff01\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u9001\u4fe1\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059:</p> <ul> <li>\u8a3c\u660e\u66f8\u30ad\u30fc (.key)</li> <li>\u8a3c\u660e\u66f8\u30d5\u30a1\u30a4\u30eb (.crt)</li> <li>\u4e2d\u9593\u8a3c\u660e\u66f8 (.crt)</li> </ul> <p>\u307e\u305f\u3001<code>.lagoon.yml</code>\u3067<code>tls-acme</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u3092false\u306b\u8a2d\u5b9a\u3059\u308b\u3002</p>"},{"location":"ja/resources/faq/#lagoonefsfusesmbetc","title":"Lagoon\u306b\u5916\u90e8\u30dc\u30ea\u30e5\u30fc\u30e0(EFS/Fuse/SMB/etc)\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\u3053\u3068\u306f\u53ef\u80fd\u3067\u3059\u304b\uff1f","text":"<p>\u5916\u90e8\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u30de\u30a6\u30f3\u30c8\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u5185\u90e8\u3067\u5b8c\u5168\u306b\u51e6\u7406\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u3001Lagoon\u306f\u3053\u306e\u7a2e\u306e\u63a5\u7d9a\u3092\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306e\u4e00\u90e8\u3068\u3057\u3066\u63d0\u4f9b\u3057\u3066\u3044\u307e\u305b\u3093\u3002</p> <p>\u958b\u767a\u8005\u306f\u3001\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30b3\u30f3\u30c6\u30ca\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb(Dockerfile\u7d4c\u7531)\u3057\u3001\u30dc\u30ea\u30e5\u30fc\u30e0\u30de\u30a6\u30f3\u30c8\u304c\u4e8b\u524d\u307e\u305f\u306f\u4e8b\u5f8c\u306e\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u30bf\u30b9\u30af\u7d4c\u7531\u3067\u63a5\u7d9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u3067\u3053\u308c\u3092\u51e6\u7406\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/resources/faq/#lagoon_1","title":"Lagoon\u306e\u30d3\u30eb\u30c9\u3092\u505c\u6b62\u3059\u308b\u65b9\u6cd5\u306f\u3042\u308a\u307e\u3059\u304b\uff1f","text":"<p>\u9577\u6642\u9593\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u30d3\u30eb\u30c9\u3092\u505c\u6b62\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u30b5\u30dd\u30fc\u30c8\u306b\u9023\u7d61\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u73fe\u5728\u3001\u30d3\u30eb\u30c9\u306f\u30af\u30e9\u30b9\u30bf\u3078\u306e\u7ba1\u7406\u8005\u30a2\u30af\u30bb\u30b9\u6a29\u3092\u6301\u3064\u30e6\u30fc\u30b6\u30fc\u306e\u307f\u304c\u505c\u6b62\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/resources/faq/#elasticsearchsolrui92008983","title":"Elasticsearch\\Solr\u30b5\u30fc\u30d3\u30b9\u3092\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3057\u305f\u3002\u30d6\u30e9\u30a6\u30b6\u304b\u3089UI(\u30dd\u30fc\u30c89200/8983)\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u3069\u306e\u3088\u3046\u306b\u53d6\u5f97\u3067\u304d\u307e\u3059\u304b\uff1f","text":"<p>\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u305f\u74b0\u5883\u3067\u30a6\u30a7\u30d6\u30b5\u30fc\u30d3\u30b9(NGINX/Varnish/Node.js)\u306e\u307f\u3092\u516c\u958b\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002\u30ed\u30fc\u30ab\u30eb\u3067\u306f\u3001\u3053\u308c\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u30dd\u30fc\u30c8\u30de\u30c3\u30d4\u30f3\u30b0\u3092<code>docker-compose ps</code>\u3067\u78ba\u8a8d\u3057\u3066\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002 <code>, \u305d\u3057\u3066 [</code>http://localhost<code>](http://localhost/)</code>:` \u3092\u30d6\u30e9\u30a6\u30b6\u3067\u8aad\u307f\u8fbc\u307f\u307e\u3059\u3002"},{"location":"ja/resources/faq/#_10","title":"\u3053\u3053\u3067\u306f\u7b54\u3048\u3089\u308c\u306a\u3044\u8cea\u554f\u304c\u3042\u308a\u307e\u3059","text":"<p>Discord \u307e\u305f\u306f uselagoon@amazee.io \u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3067\u30c1\u30fc\u30e0\u306b\u9023\u7d61\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/resources/glossary/","title":"\u7528\u8a9e\u96c6","text":"\u7528\u8a9e \u5b9a\u7fa9 Access Mode \u6c38\u7d9a\u30dc\u30ea\u30e5\u30fc\u30e0\u306b\u3069\u306e\u3088\u3046\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u304b\u3092\u5236\u5fa1\u3057\u307e\u3059\u3002 Active/Standby Active/Standby deployments\u306f\u3001\u4e00\u822c\u306bblue/green deployments\u3068\u3082\u547c\u3070\u308c\u3001\u672c\u756a\u74b0\u5883\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u30b7\u30fc\u30e0\u30ec\u30b9\u306b\u5207\u308a\u66ff\u3048\u308b\u65b9\u6cd5\u3067\u3059\u3002 Ansible \u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u3092\u30b3\u30fc\u30c9\u5316\u53ef\u80fd\u306b\u3059\u308b\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30c4\u30fc\u30eb\u30b9\u30a4\u30fc\u30c8\u3002 AWS Amazon Web Services Amazon S3 Glacier \u9577\u671f\u4fdd\u5b58\u306e\u305f\u3081\u306e\u5b89\u5168\u304b\u3064\u4f4e\u30b3\u30b9\u30c8\u306aS3\u30b9\u30c8\u30ec\u30fc\u30b8\u3002 BitBucket Atlassian\u304c\u6240\u6709\u3059\u308bGit\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u3067\u3001\u305d\u306e\u30c4\u30fc\u30eb\u3068\u7d71\u5408\u3057\u307e\u3059\u3002 Brew Homebrew\u306fOSX\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u3067\u3059\u3002 CA \u4fe1\u983c\u3067\u304d\u308b\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3067\u3042\u308b\u8a3c\u660e\u66f8\u8a8d\u8a3c\u5c40(Certificate Authority)\u306f\u3001Secure Sockets Layer (SSL)\u8a3c\u660e\u66f8\u3092\u767a\u884c\u3057\u307e\u3059\u3002 CDN \u30b3\u30f3\u30c6\u30f3\u30c4\u914d\u4fe1\u30cd\u30c3\u30c8\u30ef\u30fc\u30af - \u30ad\u30e3\u30c3\u30b7\u30f3\u30b0\u306b\u3088\u308b\u30b3\u30f3\u30c6\u30f3\u30c4\u914d\u4fe1 CI \u7d99\u7d9a\u7684\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3 CIDR \u30af\u30e9\u30b9\u30ec\u30b9\u30fb\u30a4\u30f3\u30bf\u30fc\u30c9\u30e1\u30a4\u30f3\u30fb\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0 - IP\u30a2\u30c9\u30ec\u30b9\u306e\u5272\u308a\u5f53\u3066\u65b9\u6cd5 CLI \u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9 Cluster \u30b5\u30fc\u30d0\u30fc\u3084VM\u306e\u7d71\u4e00\u3055\u308c\u305f\u30b0\u30eb\u30fc\u30d7\u3067\u3001\u4e00\u7dd2\u306b\u5206\u6563\u7ba1\u7406\u3055\u308c\u3001\u9ad8\u3044\u53ef\u7528\u6027\u3092\u78ba\u4fdd\u3059\u308b\u305f\u3081\u306b\u4e00\u3064\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u30b5\u30fc\u30d3\u30b9\u3057\u307e\u3059\u3002 CMS \u30b3\u30f3\u30c6\u30f3\u30c4\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 Cron job cron\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u306f\u3001Unix\u7cfb\u30aa\u30da\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u30b7\u30b9\u30c6\u30e0\u306e\u30b8\u30e7\u30d6\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u3067\u3059\u3002\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u74b0\u5883\u306e\u8a2d\u5b9a\u3068\u7dad\u6301\u3092\u884c\u3046\u30e6\u30fc\u30b6\u30fc\u306f\u3001cron\u3092\u4f7f\u7528\u3057\u3066\u30b8\u30e7\u30d6(cron\u30b8\u30e7\u30d6\u3068\u3082\u547c\u3070\u308c\u308b)\u3092\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3057\u3001\u56fa\u5b9a\u306e\u6642\u9593\u3001\u65e5\u4ed8\u3001\u307e\u305f\u306f\u9593\u9694\u3067\u5b9a\u671f\u7684\u306b\u5b9f\u884c\u3057\u307e\u3059\u3002 Composer \u30d1\u30c3\u30b1\u30fc\u30b8\u30de\u30cd\u30fc\u30b8\u30e3\u30fc DDEV Drupal\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3067\u4eba\u6c17\u306e\u3042\u308bDocker\u30d9\u30fc\u30b9\u306ePHP\u958b\u767a\u74b0\u5883\u3002 DDoS \u5206\u6563\u578b\u30b5\u30fc\u30d3\u30b9\u62d2\u5426 DNS \u30c9\u30e1\u30a4\u30f3\u30cd\u30fc\u30e0\u30b7\u30b9\u30c6\u30e0 Docker Linux\u306e\u6a5f\u80fd\u3092\u4f7f\u7528\u3057\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u3092\u81ea\u52d5\u5316\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u30a8\u30f3\u30b8\u30f3\u3002 Docker Compose YAML\u30d5\u30a1\u30a4\u30eb\u3092\u4ecb\u3057\u3066Docker\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5b9a\u7fa9\u3057\u3001\u5b9f\u884c\u3059\u308b\u30c4\u30fc\u30eb\u3002 Drupal \u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 Drush Drupal\u306e\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30b7\u30a7\u30eb\u3002 EC2 Amazon Elastic Compute Cloud Elasticsearch \u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u691c\u7d22\u30a8\u30f3\u30b8\u30f3\u3002\u5206\u6563\u578b\u3001\u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8\u5bfe\u5fdc\u306e\u5168\u6587\u691c\u7d22\u30a8\u30f3\u30b8\u30f3\u3092\u63d0\u4f9b\u3057\u3001\u30b9\u30ad\u30fc\u30de\u30d5\u30ea\u30fc\u306eJSON\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3068\u30a6\u30a7\u30d6\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002 Galera \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30ca\u30eb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u305f\u3081\u306e\u6c4e\u7528\u7684\u306a\u540c\u671f\u30de\u30eb\u30c1\u30de\u30b9\u30bf\u30fc\u8907\u88fd\u30e9\u30a4\u30d6\u30e9\u30ea\u3002 Git \u7121\u6599\u306e\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u5206\u6563\u578b\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3002 Git Hash /SHA \u5404\u30b3\u30df\u30c3\u30c8\u3092\u8b58\u5225\u3059\u308b\u751f\u6210\u3055\u308c\u305f\u6587\u5b57\u5217\u3002SHA-1\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3092\u4f7f\u7528\u3057\u307e\u3059 GitHub Git\u3092\u4f7f\u7528\u3057\u305f\u72ec\u81ea\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u4f1a\u793e\u3002\u30de\u30a4\u30af\u30ed\u30bd\u30d5\u30c8\u306e\u5b50\u4f1a\u793e\u3067\u3001Git\u306e\u5206\u6563\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u3068\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u7ba1\u7406\u6a5f\u80fd\u3092\u5168\u3066\u63d0\u4f9b\u3057\u3001\u3055\u3089\u306b\u8ffd\u52a0\u6a5f\u80fd\u3082\u63d0\u4f9b\u3057\u307e\u3059\u3002 GitLab CI\u6a5f\u80fd\u3092\u5099\u3048\u305fWeb\u30d9\u30fc\u30b9\u306eGit\u30ea\u30dd\u30b8\u30c8\u30ea\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u3002 Grafana \u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u5206\u6790\u304a\u3088\u3073\u76e3\u8996\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3002 GraphQL API\u306e\u305f\u3081\u306e\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30c7\u30fc\u30bf\u30af\u30a8\u30ea\u3068\u64cd\u4f5c\u8a00\u8a9e\u3001\u304a\u3088\u3073\u65e2\u5b58\u306e\u30c7\u30fc\u30bf\u3067\u30af\u30a8\u30ea\u3092\u6e80\u305f\u3059\u305f\u3081\u306e\u30e9\u30f3\u30bf\u30a4\u30e0\u3002 Harbor \u30ed\u30fc\u30eb\u30d9\u30fc\u30b9\u306e\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u3067\u30a4\u30e1\u30fc\u30b8\u3092\u4fdd\u8b77\u3057\u3001\u30a4\u30e1\u30fc\u30b8\u306e\u8106\u5f31\u6027\u3092\u30b9\u30ad\u30e3\u30f3\u3057\u3001\u4fe1\u983c\u3067\u304d\u308b\u30a4\u30e1\u30fc\u30b8\u3068\u3057\u3066\u7f72\u540d\u3059\u308b\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u30ec\u30b8\u30b9\u30c8\u30ea\u3002 Helm Kubernetes\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u3067\u3001Kubernetes\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u7ba1\u7406\u3059\u308b\u306e\u3092\u52a9\u3051\u307e\u3059\u3002 Helm Charts Helm Charts\u306f\u3001\u6700\u3082\u8907\u96d1\u306aKubernetes\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5b9a\u7fa9\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3001\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3059\u308b\u306e\u3092\u52a9\u3051\u307e\u3059\u3002 HTTP \u30cf\u30a4\u30d1\u30fc\u30c6\u30ad\u30b9\u30c8\u8ee2\u9001\u30d7\u30ed\u30c8\u30b3\u30eb\u3002HTTP\u306fWorld Wide Web\u306b\u3088\u3063\u3066\u4f7f\u7528\u3055\u308c\u308b\u57fa\u790e\u7684\u306a\u30d7\u30ed\u30c8\u30b3\u30eb\u3067\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u3069\u306e\u3088\u3046\u306b\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3055\u308c\u3001\u4f1d\u9001\u3055\u308c\u3001Web\u30b5\u30fc\u30d0\u30fc\u3068\u30d6\u30e9\u30a6\u30b6\u304c\u3055\u307e\u3056\u307e\u306a\u30b3\u30de\u30f3\u30c9\u306b\u5bfe\u3057\u3066\u3069\u306e\u3088\u3046\u306a\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u53d6\u308b\u3079\u304d\u304b\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002 IAM AWS Identity and Access Management(IAM)\u306f\u3001AWS\u30ea\u30bd\u30fc\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u5b89\u5168\u306b\u5236\u5fa1\u3059\u308b\u306e\u306b\u5f79\u7acb\u3064\u30a6\u30a7\u30d6\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002 IDE \u7d71\u5408\u958b\u767a\u74b0\u5883\u306f\u3001\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u306e\u305f\u3081\u306e\u5305\u62ec\u7684\u306a\u65bd\u8a2d\u3092\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30d7\u30ed\u30b0\u30e9\u30de\u30fc\u306b\u63d0\u4f9b\u3059\u308b\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u3059\u3002IDE\u306b\u306f\u901a\u5e38\u3001\u5c11\u306a\u304f\u3068\u3082\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u30a8\u30c7\u30a3\u30bf\u3001\u30d3\u30eb\u30c9\u81ea\u52d5\u5316\u30c4\u30fc\u30eb\u3001\u30c7\u30d0\u30c3\u30ac\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002 Ingress controller Ingress controller\u306f\u3001Kubernetes(\u304a\u3088\u3073\u4ed6\u306e\u30b3\u30f3\u30c6\u30ca\u5316\u3055\u308c\u305f)\u74b0\u5883\u7528\u306e\u7279\u5316\u3057\u305f\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b5\u30fc\u3067\u3059\u3002 IPTables Linux\u30ab\u30fc\u30cd\u30eb\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3092\u8a2d\u5b9a\u3059\u308b\u305f\u3081\u306e\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u3002 Jenkins \u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u81ea\u52d5\u5316\u30b5\u30fc\u30d0\u30fc\u3002 JWT JSON Web Token\u3002 k3s \u9ad8\u53ef\u7528\u6027\u3001\u8a8d\u5b9a\u6e08\u307f\u306eKubernetes\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u3002 k3d k3d\u306f\u3001Docker\u5185\u3067k3s\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306e\u8efd\u91cf\u30e9\u30c3\u30d1\u30fc\u3067\u3059\u3002 k8s Kubernetes\u306e\u6570\u5b57\u8a18\u53f7(K + 8\u6587\u5b57 + s) k8up K8up\u306f\u3001k8s/OpenShift\u30af\u30e9\u30b9\u30bf\u30fc\u4e0a\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u3068\u30a2\u30d7\u30ea\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u51e6\u7406\u3059\u308b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u3067\u3059\u3002 Keycloak \u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30a2\u30a4\u30c7\u30f3\u30c6\u30a3\u30c6\u30a3\u304a\u3088\u3073\u30a2\u30af\u30bb\u30b9\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3002 Kibana Elasticsearch\u7528\u306e\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30c7\u30fc\u30bf\u53ef\u8996\u5316\u30d7\u30e9\u30b0\u30a4\u30f3\u3002Elasticsearch\u30af\u30e9\u30b9\u30bf\u30fc\u306b\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3055\u308c\u305f\u30b3\u30f3\u30c6\u30f3\u30c4\u306e\u4e0a\u3067\u8996\u899a\u5316\u6a5f\u80fd\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002 KinD Docker\u5185\u306eKubernetes - Docker\u30b3\u30f3\u30c6\u30ca\u30fc\u300c\u30ce\u30fc\u30c9\u300d\u3092\u4f7f\u7528\u3057\u3066\u30ed\u30fc\u30ab\u30eb\u306eKubernetes\u30af\u30e9\u30b9\u30bf\u30fc\u3092\u5b9f\u884c\u3059\u308b\u30c4\u30fc\u30eb\u3002Kind\u306f\u4e3b\u306bKubernetes\u81ea\u4f53\u306e\u30c6\u30b9\u30c8\u7528\u306b\u8a2d\u8a08\u3055\u308c\u307e\u3057\u305f\u304c\u3001\u30ed\u30fc\u30b1\u30eb\u958b\u767a\u3084CI\u306b\u3082\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002 kubectl Kubernetes\u30af\u30e9\u30b9\u30bf\u30fc\u306b\u5bfe\u3057\u3066\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306eKubernetes\u306e\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30c4\u30fc\u30eb\u3002 Kubernetes \u30b3\u30f3\u30c6\u30ca\u5316\u3055\u308c\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u3001\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u3001\u304a\u3088\u3073\u7ba1\u7406\u3092\u81ea\u52d5\u5316\u3059\u308b\u305f\u3081\u306e\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u30b7\u30b9\u30c6\u30e0\u3002 Lagoon Kubernetes\u306e\u305f\u3081\u306e\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30c7\u30ea\u30d0\u30ea\u30fc\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3002 Lagoonize \u3042\u306a\u305f\u306e\u30a2\u30d7\u30ea\u3092Lagoon\u3067\u5b9f\u884c\u3059\u308b\u305f\u3081\u306e\u8a2d\u5b9a\u5909\u66f4\u3002 Lando Docker\u3092\u57fa\u76e4\u306b\u3057\u305f\u7121\u6599\u306e\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u3001\u30af\u30ed\u30b9\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3001\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u74b0\u5883\u304a\u3088\u3073DevOps\u30c4\u30fc\u30eb\u3002 Laravel \u30e2\u30c7\u30eb-\u30d3\u30e5\u30fc-\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc(MVC)\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30d1\u30bf\u30fc\u30f3\u306b\u5f93\u3044\u3001Symfony\u3092\u57fa\u306b\u3057\u305f\u7121\u6599\u306e\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9PHP\u30a6\u30a7\u30d6\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3002 Let's Encrypt \u7121\u6599\u306e\u81ea\u52d5\u5316\u3055\u308c\u305f\u30aa\u30fc\u30d7\u30f3\u306a\u8a8d\u8a3c\u5c40(CA)\u3002 MariaDB MySQL\u306e\u95a2\u4fc2\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u958b\u767a\u7248\u3067\u3001\u5546\u696d\u7684\u306b\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u304a\u308a\u3001GNU General Public License\u306e\u4e0b\u3067\u7121\u6599\u3067\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3067\u3042\u308b\u3053\u3068\u3092\u7dad\u6301\u3059\u308b\u3053\u3068\u3092\u76ee\u6307\u3057\u3066\u3044\u307e\u3059\u3002 Master node \u96c6\u5408\u4f53\u306e\u4e2d\u306e\u5358\u4e00\u306e\u30ce\u30fc\u30c9\u3002 \u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9 \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u3088\u308a\u5c02\u9580\u7684\u306a\u90e8\u5206\u306b\u5206\u5272\u3059\u308b\u5b9f\u8df5\u3002\u5404\u90e8\u5206\u306fAPI\u3084HTTP\u306e\u3088\u3046\u306aREST\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u4ecb\u3057\u3066\u4e92\u3044\u306b\u901a\u4fe1\u3057\u307e\u3059\u3002 MongoDB MongoDB\u306f\u30af\u30ed\u30b9\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u6307\u5411\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u3059\u3002NoSQL\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30d7\u30ed\u30b0\u30e9\u30e0\u3068\u3057\u3066\u5206\u985e\u3055\u308c\u3001MongoDB\u306f\u30b9\u30ad\u30fc\u30de\u4ed8\u304d\u306eJSON\u98a8\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002 \u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8 \u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u5358\u4e00\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u30b5\u30fc\u30d0\u30fc\u4e0a\u3067\u52d5\u4f5c\u3057\u3001\u8907\u6570\u306e\u30c6\u30ca\u30f3\u30c8(\u5171\u901a\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u3092\u5171\u6709\u3059\u308b\u30e6\u30fc\u30b6\u30fc\u30b0\u30eb\u30fc\u30d7)\u306b\u30b5\u30fc\u30d3\u30b9\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306f\u5404\u30c6\u30ca\u30f3\u30c8\u306b\u30ea\u30bd\u30fc\u30b9\u306e\u4e00\u90e8\u3092\u63d0\u4f9b\u3059\u308b\u3088\u3046\u306b\u8a2d\u8a08\u3055\u308c\u3066\u3044\u307e\u3059\u3002 MVC \u30e2\u30c7\u30eb-\u30d3\u30e5\u30fc-\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9 - \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30923\u3064\u306e\u4e3b\u8981\u306a\u8ad6\u7406\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8:\u30e2\u30c7\u30eb\u3001\u30d3\u30e5\u30fc\u3001\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306b\u5206\u3051\u308b\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30d1\u30bf\u30fc\u30f3\u3002\u3053\u308c\u3089\u306e\u5404\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u7279\u5b9a\u306e\u958b\u767a\u5074\u9762\u3092\u51e6\u7406\u3059\u308b\u3088\u3046\u306b\u69cb\u7bc9\u3055\u308c\u3066\u3044\u307e\u3059\u3002 MySQL MySQL\u306f\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30ca\u30eb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3067\u3059\u3002 NGINX NGINX\u306f\u3001\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u3001\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b5\u3001\u30e1\u30fc\u30eb\u30d7\u30ed\u30ad\u30b7\u3001HTTP\u30ad\u30e3\u30c3\u30b7\u30e5\u3068\u3057\u3066\u3082\u4f7f\u7528\u3067\u304d\u308b\u30a6\u30a7\u30d6\u30b5\u30fc\u30d0\u30fc\u3067\u3059\u3002 \u30ce\u30fc\u30c9 \u5358\u4e00\u306eEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9( Node.js \u30d6\u30e9\u30a6\u30b6\u30fc\u306e\u5916\u90e8\u3067JavaScript\u30b3\u30fc\u30c9\u3092\u5b9f\u884c\u3059\u308b\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30af\u30ed\u30b9\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306eJavaScript\u30e9\u30f3\u30bf\u30a4\u30e0\u74b0\u5883\u3002 Open source \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304c\u30e9\u30a4\u30bb\u30f3\u30b9\u306e\u4e0b\u306b\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u3001\u8457\u4f5c\u6a29\u8005\u304c\u30e6\u30fc\u30b6\u30fc\u306b\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u7814\u7a76\u3001\u5909\u66f4\u3001\u304a\u3088\u3073\u4efb\u610f\u306e\u76ee\u7684\u3067\u8ab0\u306b\u3067\u3082\u914d\u5e03\u3059\u308b\u6a29\u5229\u3092\u4ed8\u4e0e\u3059\u308b\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u4e00\u7a2e\u3002\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306f\u3001\u5171\u540c\u306e\u516c\u958b\u65b9\u5f0f\u3067\u958b\u767a\u3055\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002 OpenSearch \u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u4e3b\u5c0e\u306e\u3001Apache 2.0\u30e9\u30a4\u30bb\u30f3\u30b9\u306e\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u691c\u7d22\u304a\u3088\u3073\u5206\u6790\u30b9\u30a4\u30fc\u30c8\u3067\u3001\u30c7\u30fc\u30bf\u306e\u53d6\u308a\u8fbc\u307f\u3001\u691c\u7d22\u3001\u8996\u899a\u5316\u3001\u5206\u6790\u3092\u5bb9\u6613\u306b\u3057\u307e\u3059\u3002 OpenShift Docker\u3068Kubernetes\u3092\u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30ba\u306b\u3082\u305f\u3089\u3059\u30b3\u30f3\u30c6\u30ca\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3002 PHP PHP(Personal Home Page)\u306f\u3001Web\u958b\u767a\u306e\u305f\u3081\u306b\u5143\u3005\u8a2d\u8a08\u3055\u308c\u305f\u6c4e\u7528\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u3067\u3059\u3002 PhpStorm PHP\u3068Web\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u305f\u3081\u306e\u958b\u767a\u30c4\u30fc\u30eb(IDE)\u3002 Pod \u540c\u3058\u30db\u30b9\u30c8\u4e0a\u306b\u4e00\u7dd2\u306b\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u30b0\u30eb\u30fc\u30d7\u3002 Kubernetes\u304c\u6271\u3046\u57fa\u672c\u5358\u4f4d\u3002 PostgreSQL \u62e1\u5f35\u6027\u3068\u6280\u8853\u6a19\u6e96\u306e\u6e96\u62e0\u3092\u5f37\u8abf\u3057\u305f\u7121\u6599\u306e\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30ca\u30eb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3002 Public/Private Key \u516c\u958b\u9375/\u79d8\u5bc6\u9375 Puppet \u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u8a2d\u5b9a\u7ba1\u7406\u304a\u3088\u3073\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u30c4\u30fc\u30eb\u3002 PV PersistentVolume - \u7ba1\u7406\u8005\u304c\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3057\u305f\u3001\u307e\u305f\u306fStorage Classes\u3092\u4f7f\u7528\u3057\u3066\u52d5\u7684\u306b\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3055\u308c\u305f\u30af\u30e9\u30b9\u30bf\u5185\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u4e00\u90e8\u3002 PVC Persistent Volume Claim - \u30e6\u30fc\u30b6\u30fc\u306b\u3088\u308b\u30b9\u30c8\u30ec\u30fc\u30b8\u8981\u6c42\u3002 Pygmy amazee.io\u304c\u63d0\u4f9b\u3059\u308b\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u30b7\u30b9\u30c6\u30e0\u3002 Python Python\u306f\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u3067\u3001\u89e3\u91c8\u3055\u308c\u3001\u9ad8\u30ec\u30d9\u30eb\u3067\u3001\u4e00\u822c\u7684\u306a\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u3067\u3059\u3002 RabbitMQ \u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u30d6\u30ed\u30fc\u30ab\u30fc\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3002 RBAC \u30ed\u30fc\u30eb\u30d9\u30fc\u30b9\u306e\u30a2\u30af\u30bb\u30b9\u5236\u5fa1 RDS \u95a2\u4fc2\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30b5\u30fc\u30d3\u30b9 Redis \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u3001\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u30a8\u30f3\u30b8\u30f3\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u30d6\u30ed\u30fc\u30ab\u30fc\u3068\u3057\u3066\u4f7f\u7528\u3055\u308c\u308b\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30a4\u30f3\u30e1\u30e2\u30ea\u30c7\u30fc\u30bf\u30b9\u30c8\u30a2\u3002 Restic \u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30d7\u30ed\u30b0\u30e9\u30e0\u3002 ROX Kubernetes\u306e\u30a2\u30af\u30bb\u30b9\u30e2\u30fc\u30c9ReadOnlyMany - \u30dc\u30ea\u30e5\u30fc\u30e0\u306f\u591a\u304f\u306e\u30ce\u30fc\u30c9\u3067\u8aad\u307f\u53d6\u308a\u5c02\u7528\u3068\u3057\u3066\u30de\u30a6\u30f3\u30c8\u3067\u304d\u307e\u3059\u3002 Ruby \u8907\u6570\u306e\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u30d1\u30e9\u30c0\u30a4\u30e0\u3092\u30b5\u30dd\u30fc\u30c8\u3059\u308b\u89e3\u91c8\u578b\u306e\u9ad8\u30ec\u30d9\u30eb\u6c4e\u7528\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u3002\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306e\u5f37\u8abf\u70b9\u3068\u3057\u3066\u8a2d\u8a08\u3055\u308c\u307e\u3057\u305f\u3002 \u751f\u7523\u6027\u3068\u30b7\u30f3\u30d7\u30eb\u3055\u3002Ruby\u3067\u306f\u3001\u3059\u3079\u3066\u304c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u3042\u308a\u3001\u30d7\u30ea\u30df\u30c6\u30a3\u30d6\u306a\u30c7\u30fc\u30bf\u578b\u3082\u4f8b\u5916\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002 RWO Kubernetes\u306e\u30a2\u30af\u30bb\u30b9\u30e2\u30fc\u30c9ReadWriteOnce - \u30dc\u30ea\u30e5\u30fc\u30e0\u306f\u5358\u4e00\u306e\u30ce\u30fc\u30c9\u306b\u3088\u3063\u3066\u8aad\u307f\u66f8\u304d\u53ef\u80fd\u3068\u3057\u3066\u30de\u30a6\u30f3\u30c8\u3067\u304d\u307e\u3059\u3002ReadWriteOnce\u30a2\u30af\u30bb\u30b9\u30e2\u30fc\u30c9\u3067\u306f\u3001\u540c\u3058\u30ce\u30fc\u30c9\u4e0a\u3067\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u8907\u6570\u306e\u30dd\u30c3\u30c9\u304c\u30dc\u30ea\u30e5\u30fc\u30e0\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002 RWOP Kubernetes\u306e\u30a2\u30af\u30bb\u30b9\u30e2\u30fc\u30c9ReadWriteOncePod - \u30dc\u30ea\u30e5\u30fc\u30e0\u306f\u5358\u4e00\u306ePod\u306b\u3088\u3063\u3066\u8aad\u307f\u66f8\u304d\u53ef\u80fd\u3068\u3057\u3066\u30de\u30a6\u30f3\u30c8\u3067\u304d\u307e\u3059\u3002\u30af\u30e9\u30b9\u30bf\u5168\u4f53\u3067\u305f\u3060\u4e00\u3064\u306e\u30dd\u30c3\u30c9\u306e\u307f\u304c\u305d\u306ePVC\u3092\u8aad\u307f\u66f8\u304d\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u5834\u5408\u306f\u3001ReadWriteOncePod\u30a2\u30af\u30bb\u30b9\u30e2\u30fc\u30c9\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u3053\u308c\u306fCSI\u30dc\u30ea\u30e5\u30fc\u30e0\u3068Kubernetes\u30d0\u30fc\u30b8\u30e7\u30f31.22+\u3067\u306e\u307f\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u3059\u3002 RWX Kubernetes\u306e\u30a2\u30af\u30bb\u30b9\u30e2\u30fc\u30c9ReadWriteMany - \u30dc\u30ea\u30e5\u30fc\u30e0\u306f\u591a\u6570\u306e\u30ce\u30fc\u30c9\u306b\u3088\u3063\u3066\u8aad\u307f\u66f8\u304d\u53ef\u80fd\u3068\u3057\u3066\u30de\u30a6\u30f3\u30c8\u3067\u304d\u307e\u3059\u3002 S3 Amazon Simple Storage Service\u3002 SBOM \u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u90e8\u54c1\u8868\u3002 SHA-1 Secure Hash Algorithm 1\u3001\u5165\u529b\u3092\u53d6\u308a\u3001160\u30d3\u30c3\u30c8\u306e\u30cf\u30c3\u30b7\u30e5\u5024(\u901a\u5e38\u306f40\u6841\u306e16\u9032\u6570\u3067\u8868\u793a)\u3092\u751f\u6210\u3059\u308b\u30cf\u30c3\u30b7\u30e5\u95a2\u6570\u3002\u3053\u308c\u306f\u30a2\u30e1\u30ea\u30ab\u56fd\u5bb6\u5b89\u5168\u4fdd\u969c\u5c40\u306b\u3088\u3063\u3066\u8a2d\u8a08\u3055\u308c\u3001\u7c73\u56fd\u9023\u90a6\u60c5\u5831\u51e6\u7406\u6a19\u6e96\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002 Solr Java\u3067\u66f8\u304b\u308c\u305f\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30ba\u691c\u7d22\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3002 SSH \u30bb\u30ad\u30e5\u30a2 SSL \u30bb\u30ad\u30e5\u30a2\u30bd\u30b1\u30c3\u30c8\u30ec\u30a4\u30e4\u30fc \u30b9\u30c8\u30ec\u30fc\u30b8\u30af\u30e9\u30b9 \u30b9\u30c8\u30ec\u30fc\u30b8\u30af\u30e9\u30b9\u306f\u3001Kubernetes\u306e\u7ba1\u7406\u8005\u304c\u63d0\u4f9b\u3059\u308b\u300c\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u30af\u30e9\u30b9\u300d\u3092\u8a18\u8ff0\u3059\u308b\u65b9\u6cd5\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002\u7570\u306a\u308b\u30af\u30e9\u30b9\u306f\u3001\u30b5\u30fc\u30d3\u30b9\u54c1\u8cea\u30ec\u30d9\u30eb\u3001\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30dd\u30ea\u30b7\u30fc\u3001\u307e\u305f\u306f\u30af\u30e9\u30b9\u30bf\u30fc\u7ba1\u7406\u8005\u306b\u3088\u3063\u3066\u6c7a\u5b9a\u3055\u308c\u308b\u4efb\u610f\u306e\u30dd\u30ea\u30b7\u30fc\u306b\u30de\u30c3\u30d7\u3055\u308c\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093 Symfony Symfony\u306fPHP\u306eWeb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u3042\u308a\u3001\u518d\u5229\u7528\u53ef\u80fd\u306aPHP\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8/\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30bb\u30c3\u30c8\u3067\u3001Drupal 8\u4ee5\u964d\u306fSymfony\u306b\u57fa\u3065\u3044\u3066\u3044\u307e\u3059\u3002 TCP \u30c8\u30e9\u30f3\u30b9\u30df\u30c3\u30b7\u30e7\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d7\u30ed\u30c8\u30b3\u30eb\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30d7\u30ed\u30b0\u30e9\u30e0\u304c\u30c7\u30fc\u30bf\u3092\u4ea4\u63db\u3067\u304d\u308b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u4f1a\u8a71\u3092\u78ba\u7acb\u3057\u7dad\u6301\u3059\u308b\u65b9\u6cd5\u3092\u5b9a\u7fa9\u3059\u308b\u6a19\u6e96\u3002 TLS \u30c8\u30e9\u30f3\u30b9\u30dd\u30fc\u30c8\u5c64\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3 Trivy CI\u306b\u9069\u3057\u305f\u30b7\u30f3\u30d7\u30eb\u3067\u5305\u62ec\u7684\u306a\u30b3\u30f3\u30c6\u30ca\u306e\u8106\u5f31\u6027\u30b9\u30ad\u30e3\u30ca\u3002 TTL Time to live\u307e\u305f\u306fhop limit\u306f\u3001\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u307e\u305f\u306f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5185\u306e\u30c7\u30fc\u30bf\u306e\u5bff\u547d\u307e\u305f\u306f\u751f\u5b58\u671f\u9593\u3092\u5236\u9650\u3059\u308b\u30e1\u30ab\u30cb\u30ba\u30e0\u3067\u3059\u3002 Uptime Robot \u30a2\u30c3\u30d7\u30bf\u30a4\u30e0\u76e3\u8996\u30b5\u30fc\u30d3\u30b9\u3002 Varnish \u5f37\u529b\u306a\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306eHTTP\u30a8\u30f3\u30b8\u30f3/\u30ea\u30d0\u30fc\u30b9HTTP\u30d7\u30ed\u30ad\u30b7\u3067\u3001\u30e6\u30fc\u30b6\u304c\u521d\u3081\u3066Web\u30da\u30fc\u30b8\u306e\u30b3\u30d4\u30fc\u3092\u30ad\u30e3\u30c3\u30b7\u30e5(\u307e\u305f\u306f\u4fdd\u5b58)\u3059\u308b\u3053\u3068\u3067Web\u30b5\u30a4\u30c8\u306e\u901f\u5ea6\u3092\u4e0a\u3052\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 VM \u30d0\u30fc\u30c1\u30e3\u30eb\u30de\u30b7\u30f3 Webhook Webhook\u306f\u3001GitHub\u3001GitLab\u3001Bitbucket\u306a\u3069\u306e\u30a2\u30d7\u30ea\u304c\u4ed6\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u5373\u6642\u30c7\u30fc\u30bf\u3092\u63d0\u4f9b\u3057\u3001\u4f55\u304b(\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u306a\u3069)\u306b\u5bfe\u3057\u3066\u884c\u52d5\u3092\u8d77\u3053\u3059\u65b9\u6cd5\u3067\u3059\u3002 YAML YAML Ain't Markup Language - YAML\u306f\u4eba\u9593\u304c\u8aad\u307f\u3084\u3059\u3044\u30c7\u30fc\u30bf\u30b7\u30ea\u30a2\u30e9\u30a4\u30bc\u30fc\u30b7\u30e7\u30f3\u8a00\u8a9e\u3067\u3059\u3002\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3084\u3001\u30c7\u30fc\u30bf\u304c\u4fdd\u5b58\u307e\u305f\u306f\u9001\u4fe1\u3055\u308c\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u4e00\u822c\u7684\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002"},{"location":"ja/resources/tutorials-and-webinars/","title":"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3001\u30a6\u30a7\u30d3\u30ca\u30fc\u3001\u30d3\u30c7\u30aa","text":""},{"location":"ja/resources/tutorials-and-webinars/#lagoon","title":"Lagoon\u30a6\u30a7\u30d3\u30ca\u30fc\u5165\u9580","text":"<p>[\u30b9\u30e9\u30a4\u30c9]</p>"},{"location":"ja/resources/tutorials-and-webinars/#lagoonlando","title":"Lagoon\u3068\u5171\u306b\u9032\u5316\u3059\u308bLando","text":""},{"location":"ja/resources/tutorials-and-webinars/#-lagoon","title":"\u30a6\u30a7\u30d3\u30ca\u30fc - Lagoon\u30a4\u30f3\u30b5\u30a4\u30c8","text":""},{"location":"ja/resources/tutorials-and-webinars/#lagoon_1","title":"Lagoon\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u30c7\u30e2","text":""},{"location":"ja/resources/tutorials-and-webinars/#lagoondrupal","title":"Lagoon\u3092\u4f7f\u3063\u3066\u8907\u6570\u306eDrupal\u30b5\u30a4\u30c8\u3092\u7ba1\u7406\u3059\u308b\u65b9\u6cd5","text":"<p>[\u30b9\u30e9\u30a4\u30c9]</p>"},{"location":"ja/resources/tutorials-and-webinars/#kubernetes101","title":"Kubernetes\u30a6\u30a7\u30d3\u30ca\u30fc101","text":"<p>[\u30b9\u30e9\u30a4\u30c9]</p>"},{"location":"ja/resources/tutorials-and-webinars/#kubernetes102","title":"Kubernetes\u30a6\u30a7\u30d3\u30ca\u30fc102","text":"<p>[\u30b9\u30e9\u30a4\u30c9]</p>"},{"location":"ja/resources/tutorials-and-webinars/#11000","title":"\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9:\u79c1\u305f\u3061\u304c\u6708\u306b1\u51041000\u4e07\u56de\u30d2\u30c3\u30c8\u3059\u308b\u5206\u96e2\u578b\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u3092\u904b\u55b6\u3059\u308b\u65b9\u6cd5","text":""},{"location":"ja/resources/tutorials-and-webinars/#lagoondrupaldocker","title":"Lagoon:\u30d5\u30ebDrupal\u30b5\u30dd\u30fc\u30c8\u4ed8\u304d\u306e\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9Docker\u30d3\u30eb\u30c9\uff06\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u30b7\u30b9\u30c6\u30e0","text":""},{"location":"ja/resources/tutorials-and-webinars/#kibana","title":"Kibana\u3067\u5185\u90e8\u30b5\u30fc\u30d0\u30fc\u30a8\u30e9\u30fc\u3092\u4fee\u6b63\u3059\u308b\u306b\u306f\u3069\u3046\u3059\u308c\u3070\u3044\u3044\u3067\u3059\u304b\uff1f","text":""},{"location":"ja/resources/tutorials-and-webinars/#_2","title":"\u65b0\u3057\u3044\u30eb\u30fc\u30c8\u3092\u8ffd\u52a0\u3059\u308b\u306b\u306f\u3069\u3046\u3059\u308c\u3070\u3044\u3044\u3067\u3059\u304b\uff1f","text":""},{"location":"ja/resources/tutorials-and-webinars/#_3","title":"\u30d3\u30eb\u30c9\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u306f\u3069\u306e\u3088\u3046\u306b\u78ba\u8a8d\u3057\u307e\u3059\u304b\uff1f","text":""},{"location":"ja/resources/tutorials-and-webinars/#lagoon_2","title":"Lagoon\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3092\u8ffd\u52a0\u3059\u308b\u306b\u306f\u3069\u3046\u3059\u308c\u3070\u3088\u3044\u3067\u3059\u304b\uff1f","text":""},{"location":"ja/resources/tutorials-and-webinars/#_4","title":"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c0\u30f3\u30d7\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u306b\u306f\u3069\u3046\u3059\u308c\u3070\u3088\u3044\u3067\u3059\u304b\uff1f","text":""},{"location":"ja/resources/tutorials-and-webinars/#_5","title":"\u30af\u30ed\u30f3\u30b8\u30e7\u30d6\u3092\u8ffd\u52a0\u3059\u308b\u306b\u306f\u3069\u3046\u3059\u308c\u3070\u3088\u3044\u3067\u3059\u304b\uff1f","text":""},{"location":"ja/resources/tutorials-and-webinars/#kubernetesweb-toby-bellwood-techweek21","title":"Kubernetes\u306bWeb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b - Toby Bellwood | Techweek21\u30c8\u30fc\u30af","text":""},{"location":"ja/resources/tutorials-and-webinars/#covid-19-sean-hamlin-techweek21","title":"Covid-19\u4e2d\u306b\u524d\u4f8b\u306e\u306a\u3044\u898f\u6a21\u3067\u5bfe\u51e6\u3059\u308b - Sean Hamlin| Techweek21\u30c8\u30fc\u30af","text":""},{"location":"ja/resources/tutorials-and-webinars/#silverstripe-on-lagoon-thom-toogood-techweek21","title":"\u30ed\u30fc\u30ab\u30eb\u304b\u3089\u30e9\u30a4\u30d6\u3078\u306eSilverstripe on Lagoon -Thom Toogood | Techweek21\u30c8\u30fc\u30af","text":""},{"location":"ja/using-lagoon-advanced/","title":"Lagoon\u306e\u9ad8\u5ea6\u306a\u4f7f\u3044\u65b9","text":"<p>\u3053\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u306f\u3001Lagoon\u306e\u3088\u308a\u9ad8\u5ea6\u306a\u6a5f\u80fd\u3084\u7279\u5fb4\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002Lagoon\u304c\u521d\u3081\u3066\u306e\u65b9\u306f\u3001\u307e\u305aLagoon\u306e\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9\u304b\u3089\u59cb\u3081\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u30b5\u30dd\u30fc\u30c8\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001Lagoon\u306e\u7ba1\u7406\u8005\u306b\u9023\u7d61\u3059\u308b\u304b\u3001\u79c1\u305f\u3061\u306eDiscord\u3067\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306e\u30e1\u30f3\u30d0\u30fc\u3084\u30e1\u30f3\u30c6\u30ca\u30fc\u306b\u554f\u3044\u5408\u308f\u305b\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/using-lagoon-advanced/active-standby/#_1","title":"\u8a2d\u5b9a","text":"<p>\u65e2\u5b58\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092Active/Standby\u306b\u5bfe\u5fdc\u3055\u305b\u308b\u305f\u3081\u306b\u306f\u3001Lagoon API\u3092\u4f7f\u7528\u3057\u3066\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u8a2d\u5b9a\u3092\u3044\u304f\u3064\u304b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <ul> <li><code>productionEnviromment</code>\u306f\u3001\u73fe\u5728\u30a2\u30af\u30c6\u30a3\u30d6\u306a\u74b0\u5883\u306e\u30d6\u30e9\u30f3\u30c1\u540d\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</li> <li><code>standbyProductionEnvironment</code>\u306f\u3001\u73fe\u5728\u30b9\u30bf\u30f3\u30d0\u30a4\u4e2d\u306e\u74b0\u5883\u306e\u30d6\u30e9\u30f3\u30c1\u540d\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</li> </ul> \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u8a2d\u5b9a\u306e\u66f4\u65b0<pre><code>mutation updateProject {\nupdateProject(input:{\nid:1234\npatch:{\nproductionEnvironment:\"production-brancha\"\nstandbyProductionEnvironment:\"production-branchb\"\n}\n}){\nstandbyProductionEnvironment\nname\nproductionEnvironment\n}\n}\n</code></pre>"},{"location":"ja/using-lagoon-advanced/active-standby/#lagoonyml-production_routes","title":"<code>.lagoon.yml</code> - <code>production_routes</code>","text":"<p><code>.lagoon.yml</code>\u30d5\u30a1\u30a4\u30eb\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092Active/Standby\u306b\u8a2d\u5b9a\u3059\u308b\u305f\u3081\u306b\u306f\u3001<code>active</code>\u74b0\u5883\u306b\u30a2\u30bf\u30c3\u30c1\u3057\u305f\u3044\u30eb\u30fc\u30c8\u3068<code>standby</code>\u74b0\u5883\u306b\u30a2\u30bf\u30c3\u30c1\u3057\u305f\u3044\u30eb\u30fc\u30c8\u3092<code>production_routes</code>\u30bb\u30af\u30b7\u30e7\u30f3\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002Active/Standby\u306e\u5207\u308a\u66ff\u3048\u6642\u306b\u306f\u3001\u3053\u308c\u3089\u306e\u30eb\u30fc\u30c8\u306f2\u3064\u306e\u74b0\u5883\u9593\u3067\u79fb\u884c\u3057\u307e\u3059\u3002</p> <p><code>production-brancha</code>\u3068<code>production-branchb</code>\u306e2\u3064\u306e<code>production</code>\u74b0\u5883\u304c\u3042\u308a\u3001\u73fe\u5728\u30a2\u30af\u30c6\u30a3\u30d6\u306a<code>production</code>\u74b0\u5883\u304c<code>production-brancha</code>\u3067\u3042\u308b\u5834\u5408\uff1a</p> <ul> <li><code>production_routes.active</code>\u914d\u4e0b\u306e\u30eb\u30fc\u30c8\u306f<code>production-brancha</code>\u306b\u5411\u304b\u308f\u305b\u307e\u3059\u3002</li> <li><code>production_routes.standby</code>\u914d\u4e0b\u306e\u30eb\u30fc\u30c8<code>production-branchb</code>\u306b\u5411\u304b\u308f\u305b\u307e\u3059\u3002</li> </ul> <p>Active/Standby\u306e\u5207\u308a\u66ff\u3048\u6642\u306b\u306f\u3001\u30eb\u30fc\u30c8\u304c\u5165\u308c\u66ff\u308f\u308a\u307e\u3059:</p> <ul> <li><code>production_routes.active</code>\u914d\u4e0b\u306e\u30eb\u30fc\u30c8\u306f<code>production-branchb</code>\u306b\u5411\u304b\u308f\u305b\u307e\u3059\u3002</li> <li><code>production_routes.standby</code>\u914d\u4e0b\u306e\u30eb\u30fc\u30c8\u306f<code>production-brancha</code>\u306b\u5411\u304b\u308f\u305b\u307e\u3059\u3002</li> </ul> .lagoon.yml<pre><code>production_routes:\nactive:\nroutes:\n- nginx:\n- example.com:\ntls-acme: 'false'\n- active.example.com:\ntls-acme: 'false'\nstandby:\nroutes:\n- nginx:\n- standby.example.com:\ntls-acme: 'false'\n</code></pre> <p>\u60c5\u5831</p> <p><code>environments..routes</code>\u30bb\u30af\u30b7\u30e7\u30f3\u914d\u4e0b\u306b\u3042\u308b\u30eb\u30fc\u30c8\u306f\u3001Active/Standby\u306e\u4e00\u90e8\u3068\u3057\u3066\u79fb\u52d5\u3055\u308c\u307e\u305b\u3093\u3002\u3053\u308c\u3089\u306e\u30eb\u30fc\u30c8\u306f\u5e38\u306b\u5b9a\u7fa9\u3055\u308c\u305f\u74b0\u5883\u306b\u30a2\u30bf\u30c3\u30c1\u3055\u308c\u307e\u3059\u3002Active/Standby\u306e\u5207\u308a\u66ff\u3048\u4e2d\u306b\u7279\u5b9a\u306e\u30eb\u30fc\u30c8\u3092\u79fb\u884c\u3059\u308b\u5fc5\u7528\u304c\u3042\u308b\u5834\u5408\u3001\u305d\u308c\u3089\u3092\u74b0\u5883\u30bb\u30af\u30b7\u30e7\u30f3\u304b\u3089\u524a\u9664\u3057\u3001Active\u307e\u305f\u306f\u3001Standby\u30eb\u30fc\u30c8\u56fa\u6709\u306e<code>production_routes</code> \u30bb\u30af\u30b7\u30e7\u30f3\u306b\u914d\u7f6e\u3057\u3066\u304f\u3060\u3055\u3044\u3002  <code>.lagoon.yml</code> \u306e\u30eb\u30fc\u30c8\u306b\u3064\u3044\u3066\u8a73\u3057\u304f\u306f\u3053\u3061\u3089\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/using-lagoon-advanced/active-standby/#_2","title":"\u5207\u308a\u66ff\u3048\u30a4\u30d9\u30f3\u30c8\u306e\u30c8\u30ea\u30ac\u30fc","text":""},{"location":"ja/using-lagoon-advanced/active-standby/#ui","title":"UI\u7d4c\u7531","text":"<p>\u74b0\u5883\u30eb\u30fc\u30c8\u306e\u5207\u308a\u66ff\u3048\u3092\u30c8\u30ea\u30ac\u30fc\u3059\u308b\u306b\u306f\u3001Lagoon UI\u3067<code>Standby</code>\u74b0\u5883\u3092\u8a2a\u308c\u3001<code>Switch Active/Standby environments</code>\u3068\u3044\u3046\u30e9\u30d9\u30eb\u306e\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b\u3088\u3046\u306b\u6c42\u3081\u3089\u308c\u307e\u3059\u3002</p> <p>\u78ba\u8a8d\u3059\u308b\u3068\u3001\u30bf\u30b9\u30af\u30da\u30fc\u30b8\u306b\u79fb\u52d5\u3057\u3001\u5207\u308a\u66ff\u3048\u306e\u9032\u6357\u72b6\u6cc1\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/using-lagoon-advanced/active-standby/#api","title":"API\u7d4c\u7531","text":"<p>\u74b0\u5883\u3092\u5207\u308a\u66ff\u3048\u308b\u30a4\u30d9\u30f3\u30c8\u3092\u30c8\u30ea\u30ac\u30fc\u3059\u308b\u306b\u306f\u3001\u6b21\u306eGraphQL mutation\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001Lagoon\u304c\u30d7\u30ed\u30bb\u30b9\u3092\u958b\u59cb\u3057\u307e\u3059\u3002</p> \u30a2\u30af\u30c6\u30a3\u30d6\u30b9\u30bf\u30f3\u30d0\u30a4\u30b9\u30a4\u30c3\u30c1<pre><code>mutation ActiveStandby {\nswitchActiveStandby(\ninput:{\nproject:{\nname:\"drupal-example\"\n}\n}\n){\nid\nremoteId\n}\n}\n</code></pre> <p>\u5207\u308a\u66ff\u3048\u30a4\u30d9\u30f3\u30c8\u304c\u30c8\u30ea\u30ac\u30fc\u3055\u308c\u308b\u3068\u3001\u73fe\u5728\u306e\u30a2\u30af\u30c6\u30a3\u30d6\u74b0\u5883\u306e <code>tasks</code> \u30bf\u30d6\u306b\u30bf\u30b9\u30af\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\u3053\u3053\u3067\u5207\u308a\u66ff\u3048\u306e\u72b6\u614b\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p><code>remoteId</code> \u3092\u4f7f\u7528\u3057\u3066\u3001<code>switchActiveStandby</code> mutation\u304b\u3089\u30bf\u30b9\u30af\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002</p> \u30bf\u30b9\u30af\u30b9\u30c6\u30fc\u30bf\u30b9\u306e\u78ba\u8a8d<pre><code>query getTask {\ntaskByRemoteId(id: \"&lt;remoteId&gt;\") {\nid\nname\ncreated\nstarted\ncompleted\nstatus\nlogs\n}\n}\n</code></pre>"},{"location":"ja/using-lagoon-advanced/active-standby/#drush","title":"<code>drush</code>\u30a8\u30a4\u30ea\u30a2\u30b9","text":"<p>\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306f\u4ee5\u4e0b\u306e\u30a8\u30a4\u30ea\u30a2\u30b9\u304c\u4f5c\u6210\u3055\u308c\u3001Active/Standby\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u5834\u5408\u306b\u5229\u7528\u3067\u304d\u307e\u3059\u3002</p> <ul> <li><code>lagoon-production</code></li> <li><code>lagoon-standby</code></li> </ul> <p><code>lagoon-production</code>\u30a8\u30a4\u30ea\u30a2\u30b9\u306f<code>productionEnvironment</code>\u3068\u3057\u3066\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u30b5\u30a4\u30c8\u3092\u6307\u3057\u3001<code>lagoon-standby</code>\u306f\u5e38\u306b<code>standbyProductionEnvironment</code>\u3068\u3057\u3066\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u30b5\u30a4\u30c8\u3092\u6307\u3057\u307e\u3059\u3002</p> <p>\u3053\u308c\u3089\u306e\u30a8\u30a4\u30ea\u30a2\u30b9\u306f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u66f4\u65b0\u306b\u3088\u3063\u3066\u8a2d\u5b9a\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u305f\u3060\u3057\u3001\u305d\u308c\u3089\u3092\u5909\u66f4\u3059\u308b\u3068\u3001\u305d\u308c\u3089\u306b\u4f9d\u5b58\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f4\u65b0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> Drush\u30a8\u30a4\u30ea\u30a2\u30b9\u306e\u66f4\u65b0<pre><code>mutation updateProject {\nupdateProject(input:{\nid:1234\npatch:{\nproductionAlias:\"custom-lagoon-production-alias\"\nstandbyAlias:\"custom-lagoon-standby-alias\"\n}\n}){\nproductionAlias\nname\nstandbyAlias\n}\n}\n</code></pre>"},{"location":"ja/using-lagoon-advanced/active-standby/#activestandby_1","title":"Active/Standby\u306e\u7121\u52b9\u5316","text":"<p>\u3053\u308c\u30892\u3064\u306e\u30d6\u30e9\u30f3\u30c1\u306e\u3046\u3061\u3001\u3069\u3061\u3089\u3092\u4e3b\u306a\u74b0\u5883\u3068\u3057\u3066\u9032\u3081\u3066\u3044\u304f\u304b\u3092\u6c7a\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u306e\u5f8c\u3001 \u305d\u308c\u304c\u30a2\u30af\u30c6\u30a3\u30d6\u306a\u30d6\u30e9\u30f3\u30c1\u3068\u3057\u3066\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002(\u4f8b:<code>production-branchb</code>)</p> <ol> <li>\u3053\u306e\u73fe\u5728\u30a2\u30af\u30c6\u30a3\u30d6\u306a\u30d6\u30e9\u30f3\u30c1\u306e<code>.lagoon.yml</code>\u30d5\u30a1\u30a4\u30eb\u3067\u3001<code>production_routes.active.routes</code>\u30bb\u30af\u30b7\u30e7\u30f3\u304b\u3089\u30eb\u30fc\u30c8\u3092<code>environments.production-branchb</code>\u30bb\u30af\u30b7\u30e7\u30f3\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u305d\u306e\u30eb\u30fc\u30c8\u304c<code>production-branchb environment</code>\u306b\u306e\u307f\u95a2\u9023\u4ed8\u3051\u3089\u308c\u308b\u3053\u3068\u3092\u610f\u5473\u3057\u307e\u3059\u3002</li> <li>\u3053\u308c\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3001<code>.lagoon.yml</code>\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u5b8c\u5168\u306bproduction_routes\u30bb\u30af\u30b7\u30e7\u30f3\u3092\u524a\u9664\u3057\u3001production-branchb\u74b0\u5883\u3092\u518d\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u307e\u3059\u3002</li> <li>\u3082\u30461\u3064\u306e\u30d6\u30e9\u30f3\u30c1\u3067\u3042\u308b<code>production-brancha</code>\u304c\u5fc5\u8981\u306a\u3044\u5834\u5408\u306f\u524a\u9664\u3057\u3066\u3082\u304b\u307e\u3044\u307e\u305b\u3093\u3002</li> <li>Git\u306b\u30d6\u30e9\u30f3\u30c1\u3092\u4fdd\u6301\u3059\u308b\u5834\u5408\u3001\u6df7\u4e71\u3092\u907f\u3051\u308b\u305f\u3081\u306b\u305d\u306e\u30d6\u30e9\u30f3\u30c1\u306e<code>.lagoon.yml</code>\u304b\u3089\u3082<code>production_routes</code>\u3092\u524a\u9664\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\u3053\u306e\u30d6\u30e9\u30f3\u30c1\u306f\u524a\u9664\u3057\u3066\u518d\u30c7\u30d7\u30ed\u30a4(\u3059\u3079\u3066\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u3068\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306a\u3069\u3092\u6d88\u53bb)\u3059\u308b\u307e\u3067<code>production</code>\u30bf\u30a4\u30d7\u3068\u3057\u3066\u6b8b\u308a\u307e\u3059\u3002</li> <li>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c<code>production-branchb</code>\u306e<code>production</code>\u74b0\u5883\u306e\u307f\u3067\u3001\u4ed6\u306e\u3059\u3079\u3066\u306e\u74b0\u5883\u304c<code>development</code>\u74b0\u5883\u3067\u3042\u308b\u72b6\u614b\u306b\u306a\u3063\u305f\u3089\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u66f4\u65b0\u3057\u3066<code>standbyProductionEnvironment</code>\u3092\u524a\u9664\u3057\u3001\u74b0\u5883\u306eActive/Standby\u30e9\u30d9\u30eb\u3092\u6d88\u53bb\u3057\u307e\u3059\u3002</li> </ol> \u30a2\u30af\u30c6\u30a3\u30d6/\u30b9\u30bf\u30f3\u30d0\u30a4\u3092\u30aa\u30d5\u306b\u3059\u308b<pre><code>mutation updateProject {\nupdateProject(input:{\nid:1234\npatch:{\nproductionEnvironment:\"production-branchb\"\nstandbyProductionEnvironment:\"\"\n}\n}){\nstandbyProductionEnvironment\nname\nproductionEnvironment\n}\n}\n</code></pre>"},{"location":"ja/using-lagoon-advanced/active-standby/#_3","title":"\u30ce\u30fc\u30c8","text":"<p>Active/Standby\u30c8\u30ea\u30ac\u30fc\u304c\u5b9f\u884c\u3055\u308c\u305f\u3068\u304d\u3001<code>productionEnvironment</code>\u3068<code>standbyProductionEnvironments</code>\u306fLagoon API\u5185\u3067\u5207\u308a\u66ff\u308f\u308a\u307e\u3059\u3002\u4e21\u65b9\u306e\u74b0\u5883\u306f\u307e\u3060<code>production</code>\u74b0\u5883\u30bf\u30a4\u30d7\u3068\u3057\u3066\u5206\u985e\u3055\u308c\u3066\u3044\u307e\u3059\u3002<code>productionEnvironment</code>\u306f\u3069\u3061\u3089\u304c<code>active</code>\u3068\u30e9\u30d9\u30eb\u4ed8\u3051\u3055\u308c\u3066\u3044\u308b\u304b\u3092\u6c7a\u5b9a\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3057\u307e\u3059\u3002\u74b0\u5883\u30bf\u30a4\u30d7\u306e\u9055\u3044\u306b\u3064\u3044\u3066\u306e\u8a73\u7d30\u306f\u3001<code>environment types</code>\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002</p> GraphQL\u3092\u4f7f\u3063\u3066\u74b0\u5883\u3092\u53d6\u5f97\u3059\u308b<pre><code>query projectByName {\nprojectByName(name:\"drupal-example\"){\nproductionEnvironment\nstandbyProductionEnvironment\n}\n}\n</code></pre> <p>\u74b0\u5883\u3092\u5207\u308a\u66ff\u3048\u308b\u524d</p> \u74b0\u5883\u30af\u30a8\u30ea\u306e\u7d50\u679c<pre><code>{\n\"data\": {\n\"projectByName\": {\n\"productionEnvironment\": \"production-brancha\",\n\"standbyProductionEnvironment\": \"production-branchb\"\n}\n}\n}\n</code></pre> <p>\u74b0\u5883\u3092\u5207\u308a\u66ff\u3048\u305f\u5f8c</p> \u74b0\u5883\u30af\u30a8\u30ea\u306e\u7d50\u679c<pre><code>{\n\"data\": {\n\"projectByName\": {\n\"productionEnvironment\": \"production-branchb\",\n\"standbyProductionEnvironment\": \"production-brancha\"\n}\n}\n}\n</code></pre>"},{"location":"ja/using-lagoon-advanced/blackfire/","title":"\u30d6\u30e9\u30c3\u30af\u30d5\u30a1\u30a4\u30a2","text":""},{"location":"ja/using-lagoon-advanced/blackfire/#blackfire","title":"Blackfire\u306e\u5909\u6570","text":"<p>Lagoon Base Images\u306b\u306f\u3001PHP Images\u306bBlackfire\u306e\u30b5\u30dd\u30fc\u30c8\u304c\u7d44\u307f\u8fbc\u307e\u308c\u3066\u3044\u307e\u3059\u3002(PHP images\u3092\u53c2\u7167)</p> <p>Lagoon\u3067Blackfire\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u4ee5\u4e0b\u306e3\u3064\u306e\u74b0\u5883\u5909\u6570\u3092\u5b9a\u7fa9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> \u74b0\u5883\u5909\u6570 \u30c7\u30d5\u30a9\u30eb\u30c8 \u8aac\u660e <code>BLACKFIRE_ENABLED</code> (\u8a2d\u5b9a\u306a\u3057) <code>TRUE</code>\u307e\u305f\u306f<code>true</code>\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067<code>blackfire</code>\u62e1\u5f35\u3092\u6709\u52b9\u306b\u3059\u308b\u3002 <code>BLACKFIRE_SERVER_ID</code> (\u8a2d\u5b9a\u306a\u3057) Blackfire.io\u304b\u3089\u63d0\u4f9b\u3055\u308c\u308bBlackfire Server ID\u306b\u8a2d\u5b9a\u3059\u308b\u3002<code>BLACKFIRE_ENABLED</code>\u3092<code>true</code>\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002 <code>BLACKFIRE_SERVER_TOKEN</code> (\u8a2d\u5b9a\u306a\u3057) Blackfire.io\u304b\u3089\u63d0\u4f9b\u3055\u308c\u308bBlackfire Server Token\u306b\u8a2d\u5b9a\u3059\u308b\u3002<code>BLACKFIRE_ENABLED</code>\u3092<code>true</code>\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002"},{"location":"ja/using-lagoon-advanced/blackfire/#blackfire_1","title":"Blackfire\u306e\u30ed\u30fc\u30ab\u30eb\u4f7f\u7528","text":"<p>Lagoon Images\u3067Blackfire\u3092\u30ed\u30fc\u30ab\u30eb\u3067\u4f7f\u7528\u3059\u308b\u5834\u5408\u3001\u4e0a\u8a18\u306e\u74b0\u5883\u5909\u6570\u3092PHP\u30b3\u30f3\u30c6\u30ca\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306fDrupal\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u4f8b\u3067\u3059\u3002</p> docker-compose.yml<pre><code>services:\n[[snip]]\nphp:\n[[snip]]\nenvironment:\n&lt;&lt; : *default-environment # \u5b9a\u7fa9\u3055\u308c\u305f\u74b0\u5883\u5909\u6570\u3092\u4e0a\u304b\u3089\u8aad\u307f\u8fbc\u3080\nBLACKFIRE_ENABLED: TRUE\nBLACKFIRE_SERVER_ID: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\nBLACKFIRE_SERVER_TOKEN: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n</code></pre> <p>\u30b3\u30f3\u30c6\u30ca\u3092\u518d\u8d77\u52d5\u3057\u305f\u5f8c\u3001Blackfire\u30d6\u30e9\u30a6\u30b6\u30d7\u30e9\u30b0\u30a4\u30f3\u307e\u305f\u306fBlackfire CLI\u3092\u901a\u3058\u3066\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u306f\u305a\u3067\u3059\u3002</p>"},{"location":"ja/using-lagoon-advanced/blackfire/#blackfire_2","title":"Blackfire\u306e\u30ea\u30e2\u30fc\u30c8\u4f7f\u7528","text":"<p>\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u305fLagoon\u74b0\u5883\u3067Blackfire\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u540c\u3058\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u306e\u6642\u3001Lagoon\u306b\u74b0\u5883\u5909\u6570\u3092\u8ffd\u52a0\u3059\u308b\u65b9\u6cd5\u3067\u8a2d\u5b9a\u3057\u307e\u3059\u3002</p> <p>\u91cd\u8981</p> <p>\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u7528\u306b<code>docker-compose.yml</code>\u306b\u8a2d\u5b9a\u3055\u308c\u305f\u74b0\u5883\u5909\u6570\u306fLagoon\u306e\u30ea\u30e2\u30fc\u30c8\u74b0\u5883\u3067\u306f\u4f7f\u7528\u3055\u308c\u307e\u305b\u3093\uff01</p>"},{"location":"ja/using-lagoon-advanced/blackfire/#_2","title":"\u30c7\u30d0\u30c3\u30b0","text":"<p>PHP\u30b3\u30f3\u30c6\u30ca\u3067\u52d5\u4f5c\u3057\u3066\u3044\u308bBlackfire\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306f\u3001\u901a\u5e38\u306e\u30b3\u30f3\u30c6\u30ca\u30ed\u30b0\u3068\u3057\u3066\u30ed\u30b0\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\u3053\u308c\u306f<code>docker-compose logs</code>\u307e\u305f\u306f\u30ea\u30e2\u30fc\u30c8\u74b0\u5883\u306e<code>Lagoon Logging Infrastructure</code>\u3092\u901a\u3058\u3066\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p>\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u30ed\u30b0\u306f\u30ec\u30d9\u30eb<code>3</code>(\u60c5\u5831)\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u74b0\u5883\u5909\u6570<code>BLACKFIRE_LOG_LEVEL</code>\u3092\u4f7f\u3063\u3066\u30ec\u30d9\u30eb\u3092<code>4</code>(\u30c7\u30d0\u30c3\u30b0)\u306b\u4e0a\u3052\u308b\u3053\u3068\u3067\u3001\u3088\u308a\u591a\u304f\u306e\u60c5\u5831\u3092\u751f\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/using-lagoon-advanced/custom-tasks/","title":"\u30ab\u30b9\u30bf\u30e0\u30bf\u30b9\u30af","text":"<p>Lagoon\u3067\u306f\u3001\u74b0\u5883\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3001\u30b0\u30eb\u30fc\u30d7\u30ec\u30d9\u30eb\u3067\u30ab\u30b9\u30bf\u30e0\u30bf\u30b9\u30af\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u73fe\u5728\u3001\u3053\u308c\u306fGraphQL API\u3092\u901a\u3058\u3066\u884c\u308f\u308c\u3001UI\u3067\u516c\u958b\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/using-lagoon-advanced/custom-tasks/#_2","title":"\u30ab\u30b9\u30bf\u30e0\u30bf\u30b9\u30af\u306e\u5b9a\u7fa9","text":"<p>\u30bf\u30b9\u30af\u3092\u5b9a\u7fa9\u3059\u308b\u969b\u306b\u306f\u3001\u3044\u304f\u3064\u304b\u306e\u3053\u3068\u3092\u6c7a\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/using-lagoon-advanced/custom-tasks/#_3","title":"\u3069\u306e\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3057\u307e\u3059\u304b\uff1f","text":"<p>\u307b\u3068\u3093\u3069\u306e\u5834\u5408\u3001\u5b9f\u884c\u3059\u308b\u30ab\u30b9\u30bf\u30e0\u30bf\u30b9\u30af\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30b3\u30f3\u30c6\u30ca\u306e\u4e00\u3064\u3067\u30b7\u30a7\u30eb\u304b\u3089\u5b9f\u884c\u3055\u308c\u308b\u3082\u306e\u3067\u3059\u3002</p> <p>\u4f8b\u3048\u3070\u3001Node.js\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u306f\u3001<code>node</code>\u30b3\u30f3\u30c6\u30ca\u3067<code>yarn audit</code>\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u306b\u8208\u5473\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u3053\u306e\u5834\u5408\u30b3\u30de\u30f3\u30c9\u306f\u5358\u7d14\u306b<code>yarn audit</code>\u3068\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"ja/using-lagoon-advanced/custom-tasks/#_4","title":"\u3053\u306e\u30bf\u30b9\u30af\u306f\u3069\u3053\u3067\u5b9f\u884c\u3055\u308c\u307e\u3059\u304b\uff1f","text":"<p>\u3053\u306e\u30bf\u30b9\u30af\u304c\u3069\u3053\u3067\u5b9f\u884c\u3055\u308c\u308b\u304b\u3092\u5b9a\u7fa9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u306f\u4e8c\u3064\u306e\u3053\u3068\u3092\u610f\u5473\u3057\u307e\u3059\u3002\u307e\u305a\u3001\u3069\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u307e\u305f\u306f\u74b0\u5883\u3067\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3059\u308b\u304b\u3001\u305d\u3057\u3066\u3069\u306e\u30b5\u30fc\u30d3\u30b9\u3067\u884c\u3046\u304b\u3067\u3059\u3002</p> <p>\u305f\u3068\u3048\u3070\u3001<code>yarn audit</code>\u30bf\u30b9\u30af\u3092\u7279\u5b9a\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8(\u3053\u306e\u4f8b\u3067\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306eID\u309242\u3068\u3057\u307e\u3057\u3087\u3046)\u306e\u4efb\u610f\u306e\u74b0\u5883\u3067\u5b9f\u884c\u53ef\u80fd\u306b\u3057\u305f\u3044\u3068\u8003\u3048\u3066\u3044\u308b\u3068\u3057\u307e\u3057\u3087\u3046\u3002\u30bf\u30b9\u30af\u5b9a\u7fa9\u3092\u4f5c\u6210\u3059\u308b\u969b\u306b\u306f\u3001\u4e0b\u8a18\u3067\u8aac\u660e\u3059\u308b\u3088\u3046\u306b\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306eID\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</p> <p>2\u3064\u76ee\u306e\u8cea\u554f\u306f\u3001\u3069\u306e\u74b0\u5883\u3092\u30bf\u30b9\u30af\u306e\u5bfe\u8c61\u3068\u3059\u308b\u304b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8a2d\u5b9a\u3059\u308b\u969b\u306b<code>docker-compose.yml</code>\u3067\u3044\u304f\u3064\u304b\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u540d\u3092\u4f7f\u7528\u3057\u3066\u30b3\u30de\u30f3\u30c9\u304c\u5b9f\u969b\u306b\u3069\u3053\u3067\u5b9f\u884c\u3055\u308c\u308b\u304b\u3092\u6c7a\u5b9a\u3057\u307e\u3059\u3002</p>"},{"location":"ja/using-lagoon-advanced/custom-tasks/#_5","title":"\u3053\u306e\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3067\u304d\u308b\u306e\u306f\u8ab0\u3067\u3059\u304b\uff1f","text":"<p>\u30bf\u30b9\u30af\u30b7\u30b9\u30c6\u30e0\u3078\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30ed\u30fc\u30eb\u306b\u5bfe\u5fdc\u3057\u305f3\u3064\u306e\u30ec\u30d9\u30eb\u304c\u3042\u308a\u307e\u3059\u3002\u30b2\u30b9\u30c8\u3001\u30c7\u30d9\u30ed\u30c3\u30d1\u30fc\u3001\u30e1\u30f3\u30c6\u30ca\u30fc\u3067\u3059\u3002\u6700\u3082\u5236\u9650\u7684\u306a\u3082\u306e\u304b\u3089\u6700\u3082\u5236\u9650\u306e\u5c11\u306a\u3044\u3082\u306e\u307e\u3067\u3001\u5404\u30ed\u30fc\u30eb\u306f\u305d\u308c\u3088\u308a\u4e0b\u306e\u30ed\u30fc\u30eb\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u30bf\u30b9\u30af\u3092\u547c\u3073\u51fa\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059(\u30c7\u30d9\u30ed\u30c3\u30d1\u30fc\u306f\u30b2\u30b9\u30c8\u306e\u30bf\u30b9\u30af\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u3001\u30e1\u30f3\u30c6\u30ca\u30fc\u306f\u3059\u3079\u3066\u306e\u30bf\u30b9\u30af\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059)\u3002</p>"},{"location":"ja/using-lagoon-advanced/custom-tasks/#_6","title":"\u30bf\u30b9\u30af\u306e\u5b9a\u7fa9","text":"<p>\u30bf\u30b9\u30af\u306f<code>addAdvancedTaskDefinition</code>\u30df\u30e5\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u547c\u3073\u51fa\u3059\u3053\u3068\u3067\u5b9a\u7fa9\u3055\u308c\u307e\u3059\u3002\u91cd\u8981\u306a\u3053\u3068\u306f\u3001\u3053\u308c\u306f\u5358\u306b\u30bf\u30b9\u30af\u3092\u5b9a\u7fa9\u3059\u308b\u3060\u3051\u3067\u547c\u3073\u51fa\u3059\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u5358\u306b\u305d\u308c\u3092\u74b0\u5883\u3067\u5b9f\u884c\u53ef\u80fd\u306b\u3059\u308b\u3060\u3051\u3067\u3059\u3002</p> <p>\u6982\u5ff5\u7684\u306b\u306f\u547c\u3073\u51fa\u3057\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002</p> \u65b0\u3057\u3044\u30bf\u30b9\u30af\u3092\u5b9a\u7fa9\u3059\u308b<pre><code>mutation addAdvancedTask {\naddAdvancedTaskDefinition(input:{\nname: string,\nconfirmationText: string,\ntype: [COMMAND|IMAGE],\n[project|environment]: int,\ndescription: string,\nservice: string,\ncommand: string,\nadvancedTaskDefinitionArguments: [\n{\nname: \"ENVIROMENT_VARIABLE_NAME\",\ndisplayName: \"Friendly Name For Variable\",\ntype: [STRING | ENVIRONMENT_SOURCE_NAME | ENVIRONMENT_SOURCE_NAME_EXCLUDE_SELF]\n}\n]\n}) {\n... on AdvancedTaskDefinitionImage {\nid\nname\ndescription\nservice\nimage\nconfirmationText\nadvancedTaskDefinitionArguments {\ntype\nrange\nname\ndisplayName\n}\n...\n}\n... on AdvancedTaskDefinitionCommand {\nid\nname\ndescription\nservice\ncommand\nadvancedTaskDefinitionArguments {\ntype\nrange\nname\ndisplayName\n}\n...\n}\n}\n}\n</code></pre> <p>\u30d5\u30a3\u30fc\u30eb\u30c9<code>name</code>\u3068<code>description</code>\u306f\u7c21\u5358\u3067\u3059\u3002\u3053\u308c\u3089\u306f\u4e3b\u306bUI\u3067\u4f7f\u7528\u3055\u308c\u308b\u30bf\u30b9\u30af\u306e\u540d\u524d\u3068\u8aac\u660e\u3067\u3059\u3002</p> <p><code>type</code>\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u3064\u3044\u3066\u306f\u8aac\u660e\u304c\u5fc5\u8981\u3067\u3059\u3002\u73fe\u6642\u70b9\u3067\u306f\u3001\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306e\u7ba1\u7406\u8005\u306e\u307f\u304c<code>IMAGE</code>\u30bf\u30a4\u30d7\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u65e2\u5b58\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u5bfe\u8c61\u306b\u3059\u308b\u306e\u3067\u306f\u306a\u304f\u3001\u7279\u5b9a\u306e\u30bf\u30b9\u30af\u30a4\u30e1\u30fc\u30b8\u3092\u30bf\u30b9\u30af\u3068\u3057\u3066\u5b9f\u884c\u3059\u308b\u3053\u3068\u3092\u53ef\u80fd\u306b\u3057\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u307b\u3068\u3093\u3069\u306e\u30bf\u30b9\u30af\u306f<code>COMMAND</code>\u30bf\u30a4\u30d7\u3067\u3059\u3002</p> <p><code>[project|environment]</code>\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u30bb\u30c3\u30c8\u306f\u3001\u30bf\u30b9\u30af\u3092<code>project</code>\u307e\u305f\u306f<code>environment</code>\u306b\u95a2\u9023\u4ed8\u3051\u308b(\u4f7f\u7528\u3059\u308b\u30ad\u30fc\u306b\u3088\u308a\u307e\u3059)\u3053\u3068\u3067\u3001\u305d\u306e\u5024\u304cid\u306b\u306a\u308a\u307e\u3059\u3002 \u79c1\u305f\u3061\u304c<code>yarn audit</code>\u306e\u305f\u3081\u306b\u8003\u3048\u3066\u3044\u308b\u30b1\u30fc\u30b9\u3067\u306f\u3001ID\u304c<code>42</code>\u306e<code>project</code>\u3092\u5bfe\u8c61\u3068\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u660e\u793a\u3057\u307e\u3059\u3002</p> <p>\u79c1\u305f\u3061\u304c\u30bf\u30b9\u30af\u3067\u30bf\u30fc\u30b2\u30c3\u30c8\u306b\u3057\u305f\u3044\u30b5\u30fc\u30d3\u30b9\u3092<code>service</code>\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u7f6e\u304d\u3001<code>command</code>\u306f\u79c1\u305f\u3061\u304c\u5b9f\u884c\u3057\u305f\u3044\u5b9f\u969b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3059\u3002</p>"},{"location":"ja/using-lagoon-advanced/custom-tasks/#_7","title":"\u30bf\u30b9\u30af\u306b\u6e21\u3055\u308c\u308b\u5f15\u6570","text":"<p>Lagoon UI\u7d4c\u7531\u3067\u30bf\u30b9\u30af\u3092\u547c\u3073\u51fa\u3059\u30e6\u30fc\u30b6\u30fc\u306b\u67d4\u8edf\u6027\u3092\u4e0e\u3048\u308b\u305f\u3081\u306b\u3001\u30bf\u30b9\u30af\u5f15\u6570\u306e\u5b9a\u7fa9\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u5f15\u6570\u306f\u30c6\u30ad\u30b9\u30c8\u30dc\u30c3\u30af\u30b9\u307e\u305f\u306f\u30c9\u30ed\u30c3\u30d7\u30c0\u30a6\u30f3\u3068\u3057\u3066\u8868\u793a\u3055\u308c\u3001\u30bf\u30b9\u30af\u3092\u547c\u3073\u51fa\u3059\u305f\u3081\u306b\u5fc5\u8981\u3067\u3059\u3002</p> <p>\u4ee5\u4e0b\u306f\u30012\u3064\u306e\u5f15\u6570\u3092\u8a2d\u5b9a\u3059\u308b\u65b9\u6cd5\u306e\u4f8b\u3067\u3059\u3002</p> \u30bf\u30b9\u30af\u5f15\u6570\u306e\u5b9a\u7fa9<pre><code>advancedTaskDefinitionArguments: [\n{\nname: \"ENV_VAR_NAME_SOURCE\",\ndisplayName: \"Environment source\",\ntype: ENVIRONMENT_SOURCE_NAME\n},\n{\nname: \"ENV_VAR_NAME_STRING\",\ndisplayName: \"Echo value\",\ntype: STRING\n}\n]\n})\n</code></pre> <p>\u3053\u306e\u30d5\u30e9\u30b0\u30e1\u30f3\u30c8\u306f\u3001\u30b7\u30b9\u30c6\u30e0\u304c\u73fe\u5728\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u4e21\u65b9\u306e\u30bf\u30a4\u30d7\u306e\u5f15\u6570\u3092\u793a\u3057\u3066\u3044\u307e\u3059\u3002 \u6700\u521d\u306e<code>ENV_VAR_NAME_SOURCE</code>\u306f<code>ENVIRONMENT_SOURCE_NAME</code>\u30bf\u30a4\u30d7\u306e\u4f8b\u3067\u3001UI\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5185\u306e\u7570\u306a\u308b\u74b0\u5883\u306e\u30c9\u30ed\u30c3\u30d7\u30c0\u30a6\u30f3\u3092\u63d0\u793a\u3057\u307e\u3059\u3002\u30bf\u30b9\u30af\u304c\u8d77\u52d5\u3057\u305f\u74b0\u5883\u3067\u5b9f\u884c\u3055\u308c\u308b\u306e\u3092\u8a31\u53ef\u3057\u305f\u304f\u306a\u3044\u5834\u5408(\u4f8b\u3048\u3070\u3001\u4ed6\u306e\u74b0\u5883\u304b\u3089\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u305f\u3044\u5834\u5408\u306a\u3069)\u306f<code>ENVIRONMENT_SOURCE_NAME_EXCLUDE_SELF</code>\u3092\u4f7f\u7528\u3057\u3066\u74b0\u5883\u30ea\u30b9\u30c8\u3092\u5236\u9650\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u4e8c\u3064\u76ee\u306e<code>ENV_VAR_NAME_STRING</code>\u306f<code>STRING</code>\u578b\u3067\u3001\u30e6\u30fc\u30b6\u30fc\u306b\u30c6\u30ad\u30b9\u30c8\u30dc\u30c3\u30af\u30b9\u3092\u8a18\u5165\u3059\u308b\u3088\u3046\u306b\u4fc3\u3057\u307e\u3059\u3002</p> <p>\u30e6\u30fc\u30b6\u30fc\u304c\u9078\u629e\u3057\u305f\u5024\u306f\u3001\u30bf\u30b9\u30af\u304c\u5b9f\u884c\u3055\u308c\u305f\u3068\u304d\u306b<code>COMMAND</code>\u578b\u306e\u30bf\u30b9\u30af\u3067\u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u5229\u7528\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002</p> <p></p>"},{"location":"ja/using-lagoon-advanced/custom-tasks/#_8","title":"\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u306e\u30bf\u30b9\u30af","text":"<p>\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u306e\u30bf\u30b9\u30af\u3092\u767b\u9332\u3067\u304d\u308b\u306e\u306fLagoon\u306e\u7ba1\u7406\u8005\u306e\u307f\u3067\u3059\u3002\u3053\u308c\u3089\u306e\u30bf\u30b9\u30af\u306f\u3059\u3079\u3066\u306e\u74b0\u5883\u3067\u8868\u793a\u3055\u308c\u3001\u30e6\u30fc\u30b6\u30fc\u304c\u6301\u3064\u6a29\u9650\u306b\u3088\u3063\u3066\u5236\u9650\u3055\u308c\u307e\u3059\u3002</p> <p>\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u306e\u30bf\u30b9\u30af\u3092\u4f5c\u6210\u3059\u308b\u65b9\u6cd5\u306f\u3001\u4ed6\u306e\u30bf\u30b9\u30af\u30bf\u30a4\u30d7\u3068\u307b\u307c\u540c\u3058\u3067\u3059\u304c\u30012\u3064\u306e\u4f8b\u5916\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>\u307e\u305a\u3001<code>addAdvancedTaskDefinition</code>\u30df\u30e5\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u306e\u4e2d\u3067<code>systemWide: true</code>\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002</p> <p>\u6b21\u306b\u3001<code>groupName</code>\u3001<code>project</code>\u3001<code>environment</code>\u3092\u6307\u5b9a\u3057\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306f\u7279\u5b9a\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u30bf\u30fc\u30b2\u30c3\u30c8\u306b\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u308b\u305f\u3081\u3001\u6307\u5b9a\u3059\u308b\u3068\u76ee\u7684\u3092\u9038\u8131\u3059\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"ja/using-lagoon-advanced/custom-tasks/#_9","title":"\u78ba\u8a8d","text":"<p><code>confirmationText</code>\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u30c6\u30ad\u30b9\u30c8\u304c\u3042\u308b\u3068\u3001\u30e6\u30fc\u30b6\u30fc\u304c\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u524d\u306b\u3001UI\u306b\u78ba\u8a8d\u30e2\u30fc\u30c0\u30eb\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002 </p>"},{"location":"ja/using-lagoon-advanced/custom-tasks/#_10","title":"\u30bf\u30b9\u30af\u306e\u547c\u3073\u51fa\u3057","text":"<p>\u30bf\u30b9\u30af\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3068\u3001\u30bf\u30b9\u30af\u306fLagoon UI\u306e\u30bf\u30b9\u30af\u30c9\u30ed\u30c3\u30d7\u30c0\u30a6\u30f3\u306b\u8868\u793a\u3055\u308c\u308b\u306f\u305a\u3067\u3059\u3002</p> <p>\u307e\u305f\u3001<code>invokeTask</code> \u30df\u30e5\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u3066GraphQL api\u304b\u3089\u3082\u547c\u3073\u51fa\u3059\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002</p> \u30bf\u30b9\u30af\u306e\u547c\u3073\u51fa\u3057<pre><code>mutation invokeTask {\ninvokeRegisteredTask(advancedTaskDefinition: int, environment: int) {\nstatus\n}\n}\n</code></pre> <p><code>invokeTask</code>\u306f\u5e38\u306b\u7279\u5b9a\u306e\u74b0\u5883\u3067\u30bf\u30b9\u30af\u3092\u547c\u3073\u51fa\u3059\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/using-lagoon-advanced/custom-tasks/#_11","title":"\u4f8b","text":"<p>\u3067\u306f\u3001<code>yarn audit</code>\u306e\u4f8b\u3092\u8a2d\u5b9a\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002</p> \u30bf\u30b9\u30af\u5b9a\u7fa9\u30df\u30e5\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3<pre><code>mutation runYarnAudit {\naddAdvancedTaskDefinition(input:{\nname:\"Run yarn audit\",\nproject: 42,\ntype:COMMAND,\npermission:DEVELOPER,\ndescription: \"Runs a 'yarn audit'\",\nservice:\"node\",\ncommand: \"yarn audit\"})\n{\nid\n}\n}\n</code></pre> <p>\u3053\u308c\u306b\u3088\u308a\u3001\u79c1\u305f\u3061\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8(42)\u306e\u30bf\u30b9\u30af\u304c\u5b9a\u7fa9\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u30bf\u30b9\u30af\u5b9a\u7fa9\u306eID\u304c\u8fd4\u3055\u308c\u307e\u3059(\u4f8b\u3048\u3070\u3001<code>9</code>\u3068\u3057\u307e\u3059)</p> <p>\u3053\u306e\u30bf\u30b9\u30af\u306f\u3001<code>DEVELOPER</code>\u307e\u305f\u306f<code>MAINTAINER</code>\u306e\u5f79\u5272\u3092\u6301\u3064\u30e6\u30fc\u30b6\u30fc\u304cUI\u304b\u3089\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002</p> <p></p>"},{"location":"ja/using-lagoon-advanced/deploytarget-configs/","title":"DeployTarget\u8a2d\u5b9a","text":"<p>DeployTarget\u8a2d\u5b9a\u306f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u8907\u6570\u306e\u30af\u30e9\u30b9\u30bf\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u65b9\u6cd5\u3092\u5b9a\u7fa9\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002\u3053\u306e\u6a5f\u80fd\u306f\u3001\u672c\u756a\u30ef\u30fc\u30af\u30ed\u30fc\u30c9\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b\u5c02\u7528\u306e\u30af\u30e9\u30b9\u30bf\u3068\u3001\u958b\u767a\u30ef\u30fc\u30af\u30ed\u30fc\u30c9\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306e\u5225\u306e\u30af\u30e9\u30b9\u30bf\u304c\u3042\u308b\u5834\u5408\u306b\u4fbf\u5229\u3067\u3059\u3002</p> <p>\u3053\u308c\u3089\u306e\u8a2d\u5b9a\u306f\u3001\u5358\u306b\u672c\u756a/\u958b\u767a\u306e\u5206\u5272\u306b\u9650\u5b9a\u3055\u308c\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u305f\u3081\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306f\u7279\u5b9a\u306e\u30af\u30e9\u30b9\u30bf\u3092\u8907\u6570\u30bf\u30fc\u30b2\u30c3\u30c8\u306b\u3067\u304d\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>DeployTarget\u8a2d\u5b9a\u306e\u57fa\u672c\u7684\u306a\u8003\u3048\u65b9\u306f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u8907\u6570\u306e\u30af\u30e9\u30b9\u30bf\u9593\u3067\u3069\u306e\u3088\u3046\u306b\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u308b\u304b\u3092\u7c21\u5358\u306b\u5b9a\u7fa9\u3059\u308b\u65b9\u6cd5\u3067\u3042\u308a\u3001\u74b0\u5883\u304c\u6709\u52b9\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3059\u308b\u65e2\u5b58\u306e\u65b9\u6cd5\u3092\u5229\u7528\u3057\u307e\u3059\u3002</p>"},{"location":"ja/using-lagoon-advanced/deploytarget-configs/#_1","title":"\u91cd\u8981\u306a\u60c5\u5831","text":"<p>DeployTarget\u8a2d\u5b9a\u3092\u5229\u7528\u3057\u3066\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8a2d\u5b9a\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u8aac\u660e\u3059\u308b\u524d\u306b\u3001\u77e5\u3063\u3066\u304a\u304f\u3079\u304d\u3053\u3068\u304c\u3044\u304f\u3064\u304b\u3042\u308a\u307e\u3059\u3002</p> <ol> <li> <p>\u74b0\u5883\u306b\u306f\u3069\u306eDeployTarget(Kubernetes\u307e\u305f\u306fOpenShift)\u3067\u4f5c\u6210\u3055\u308c\u305f\u304b\u3092\u8b58\u5225\u3059\u308b\u305f\u3081\u306e\u65b0\u305f\u306a2\u3064\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u5229\u7528\u53ef\u80fd\u306b\u306a\u308a\u307e\u3057\u305f\u3002</p> <ol> <li><code>kubernetesNamespacePattern</code></li> <li><code>kubernetes</code></li> </ol> </li> <li> <p>\u7279\u5b9a\u306eDeployTarget\u306b\u4e00\u5ea6\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u305f\u74b0\u5883\u306f\u3001DeployTarget\u8a2d\u5b9a\u3084\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u8a2d\u5b9a\u304c\u5909\u66f4\u3055\u308c\u3066\u3082\u3001\u5e38\u306b\u3053\u306e\u30bf\u30fc\u30b2\u30c3\u30c8\u306b\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u307e\u3059\u3002</p> <ol> <li>\u3053\u308c\u306b\u3088\u308aDeployTarget\u306e\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u3066\u3082\u3001\u7570\u306a\u308b\u30af\u30e9\u30b9\u30bf\u3067\u65b0\u3057\u3044\u74b0\u5883\u304c\u4f5c\u6210\u3055\u308c\u308b\u3053\u3068\u304c\u306a\u304f\u306a\u308a\u3001\u65e2\u5b58\u306e\u74b0\u5883\u306b\u5bfe\u3057\u3066\u4e00\u5b9a\u306e\u5b89\u5168\u6027\u3092\u63d0\u4f9b\u3067\u304d\u307e\u3059\u3002</li> <li>\u3053\u308c\u306fLagoon\u306e\u65b0\u6a5f\u80fd\u3067\u3042\u308a\u3001DeployTarget\u8a2d\u5b9a\u306b\u7279\u5316\u3055\u308c\u305f\u3082\u306e\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002</li> </ol> </li> <li> <p>\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306bDeployTarget\u306e\u8a2d\u5b9a\u304c\u95a2\u9023\u4ed8\u3051\u3089\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u3001\u305d\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306f\u65e2\u5b58\u306e\u65b9\u6cd5\u3092\u4f7f\u7528\u3057\u3066\u3069\u306e\u74b0\u5883\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u304b\u3092\u6c7a\u5b9a\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u306f\u4ee5\u4e0b\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002</p> <ol> <li><code>branches</code></li> <li><code>pullrequests</code></li> <li><code>kubernetesNamespacePattern</code></li> <li><code>kubernetes</code></li> </ol> </li> <li> <p>DeployTarget\u306e\u8a2d\u5b9a\u304c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u8ffd\u52a0\u3055\u308c\u308b\u3068\u3001\u4eca\u5f8c\u3059\u3079\u3066\u306e\u30c7\u30d7\u30ed\u30a4\u306f\u3053\u308c\u3089\u306e\u8a2d\u5b9a\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3082\u306e\u306f\u7121\u8996\u3055\u308c\u3001DeployTarget\u306e\u8a2d\u5b9a\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u30e6\u30fc\u30b6\u30fc\u306b\u901a\u77e5\u3059\u308b\u305f\u3081\u306b\u4e0a\u66f8\u304d\u3055\u308c\u307e\u3059\u3002</p> </li> <li> <p>DeployTarget\u306e\u8a2d\u5b9a\u306f\u91cd\u307f\u4ed8\u3051\u3055\u308c\u3066\u304a\u308a\u3001\u3053\u308c\u306f\u5927\u304d\u3044\u91cd\u307f\u306eDeployTarget\u8a2d\u5b9a\u304c\u5c0f\u3055\u3044\u91cd\u307f\u306e\u3082\u306e\u3088\u308a\u512a\u5148\u3055\u308c\u308b\u3053\u3068\u3092\u610f\u5473\u3057\u307e\u3059\u3002</p> <ol> <li>\u30af\u30a8\u30ea\u3067\u8fd4\u3055\u308c\u308b\u9806\u5e8f\u304c\u3001\u74b0\u5883\u304c\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u3079\u304d\u5834\u6240\u3092\u6c7a\u5b9a\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u308b\u9806\u5e8f\u3067\u3059\u3002</li> </ol> </li> <li> <p>Active/Standby\u74b0\u5883\u306f\u3001\u540c\u3058\u30af\u30e9\u30b9\u30bf\u306a\u306e\u3067\u3001DeployTarget\u8a2d\u5b9a\u306f\u305d\u308c\u3089\u306e\u74b0\u5883\u3092\u540c\u3058\u30bf\u30fc\u30b2\u30c3\u30c8\u306b\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> </li> <li> <p>Lagoon\u306e<code>promote</code>\u6a5f\u80fd\u3092\u6d3b\u7528\u3059\u308b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306f\u3001DeployTarget\u8a2d\u5b9a\u304c<code>destination</code>\u74b0\u5883\u3067\u306f\u7121\u8996\u3055\u308c\u308b\u3053\u3068\u306b\u6ce8\u610f\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <ol> <li>\u30c7\u30a3\u30b9\u30c6\u30a3\u30cd\u30fc\u30b7\u30e7\u30f3\u74b0\u5883\u306f\u5e38\u306b<code>source</code>\u74b0\u5883\u304c\u3042\u308b\u540c\u3058\u30bf\u30fc\u30b2\u30c3\u30c8\u306b\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u307e\u3059\u306e\u3067\u3001DeployTarget\u8a2d\u5b9a\u306f\u3053\u306e<code>source</code>\u74b0\u5883\u306b\u5bfe\u3057\u3066\u6b63\u3057\u304f\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</li> <li>\u5b89\u5168\u306e\u305f\u3081\u3001<code>source</code>\u3068<code>destination</code>\u306e\u74b0\u5883\u3092\u540c\u3058DeployTarget\u8a2d\u5b9a\u306e\u30d6\u30e9\u30f3\u30c1\u6b63\u898f\u8868\u73fe\u3067\u5b9a\u7fa9\u3059\u308b\u306e\u304c\u30d9\u30b9\u30c8\u3067\u3059\u3002</li> </ol> </li> </ol>"},{"location":"ja/using-lagoon-advanced/deploytarget-configs/#_2","title":"\u8a2d\u5b9a","text":"<p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067DeployTarget\u8a2d\u5b9a\u3092\u4f7f\u7528\u3059\u308b\u3088\u3046\u69cb\u6210\u3059\u308b\u306b\u306f\u3001\u6700\u521d\u306e\u30b9\u30c6\u30c3\u30d7\u3068\u3057\u3066\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> <p>\u4ee5\u4e0b\u306eGraphQL\u306e\u30df\u30e5\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u7279\u5b9a\u306e\u4f8b\u3067\u306f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8ID 1\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306bDeployTarget\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002 \u3053\u308c\u306b\u3088\u308a\u3001\u540d\u524d\u304c<code>main</code>\u3068\u4e00\u81f4\u3059\u308b\u30d6\u30e9\u30f3\u30c1\u306e\u307f\u304c\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u3001<code>pullrequests</code>\u306f<code>false</code>\u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002 \u3053\u308c\u306f\u3001\u4ed6\u306e\u30d6\u30e9\u30f3\u30c1\u304c\u3053\u306e\u7279\u5b9a\u306e\u30bf\u30fc\u30b2\u30c3\u30c8\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u305a\u3001\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u3082\u3053\u306e\u7279\u5b9a\u306e\u30bf\u30fc\u30b2\u30c3\u30c8\u306b\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u306a\u3044\u3053\u3068\u3092\u610f\u5473\u3057\u307e\u3059\u3002 <code>deployTarget</code>\u306fID 1\u3067\u3001\u3053\u308c\u306fKubernetes\u306b\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002 \u7279\u5b9a\u306e\u5730\u57df\u3084\u7279\u5b9a\u306e\u7a2e\u985e\u306e\u30ef\u30fc\u30af\u30ed\u30fc\u30c9(\u88fd\u54c1\u7248\u307e\u305f\u306f\u958b\u767a\u7248)\u5411\u3051\u306b\u30af\u30e9\u30b9\u30bf\u30fc\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</p> DeployTarget\u306e\u8a2d\u5b9a<pre><code>mutation addDeployTargetConfig{\naddDeployTargetConfig(input:{\nproject: 1\nbranches: \"main\"\npullrequests: \"false\"\ndeployTarget: 1\nweight: 1\n}){\nid\nweight\nbranches\npullrequests\ndeployTargetProjectPattern\ndeployTarget{\nname\nid\n}\nproject{\nname\n}\n}\n}\n</code></pre> <p>\u60c5\u5831</p> <p><code>deployTarget</code>\u306fLagoon API\u5185\u306eKubernetes\u307e\u305f\u306fOpenShift ID\u306e\u30a8\u30a4\u30ea\u30a2\u30b9\u3067\u3059</p> <p>\u307e\u305f\u3001\u8907\u6570\u306eDeployTarget\u8a2d\u5b9a\u3092\u69cb\u6210\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002</p> <p>\u4ee5\u4e0b\u306eGraphQL\u30df\u30e5\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u4f8b\u3067\u306f\u3001\u4e0a\u8a18\u3068\u540c\u3058\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306bDeployTarget\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> <p>\u3053\u308c\u306b\u3088\u308a\u3001<code>^feature/|^(dev|test|develop)$</code> \u3068\u6b63\u898f\u8868\u73fe\u304c\u30de\u30c3\u30c1\u3059\u308b\u30d6\u30e9\u30f3\u30c1\u306e\u307f\u304c\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u307e\u3059\u3002\u305d\u3057\u3066\u3001<code>pullrequests</code> \u306f <code>true</code> \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3059\u3079\u3066\u306e\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u3053\u306e\u30bf\u30fc\u30b2\u30c3\u30c8\u306b\u5230\u9054\u3057\u307e\u3059\u3002</p> <p>\u3053\u306e\u4f8b\u3067\u306f\u3001\u30bf\u30fc\u30b2\u30c3\u30c8\u3068\u306a\u308b\u30af\u30e9\u30b9\u30bf\u306fID2\u3067\u3001<code>main</code>\u30d6\u30e9\u30f3\u30c1\u4e0a\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u3082\u306e\u3068\u306f\u5168\u304f\u7570\u306a\u308bKubernetes\u30af\u30e9\u30b9\u30bf\u3067\u3059\u3002</p> DeployTarget\u306e\u8a2d\u5b9a<pre><code>mutation addDeployTargetConfig{\naddDeployTargetConfig(input:{\nproject: 1\nbranches: \"^feature/|^(dev|test|develop)$\"\npullrequests: \"true\"\ndeployTarget: 2\nweight: 1\n}){\nid\nweight\nbranches\npullrequests\ndeployTargetProjectPattern\ndeployTarget{\nname\nid\n}\nproject{\nname\n}\n}\n}\n</code></pre> <p>\u3053\u308c\u3089\u304c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u8ffd\u52a0\u3055\u308c\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u30af\u30a8\u30ea\u3092\u4f7f\u7528\u3057\u3066\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u3059\u3079\u3066\u306eDeployTarget\u8a2d\u5b9a\u3092\u8fd4\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> \u30c7\u30d7\u30ed\u30a4\u30bf\u30fc\u30b2\u30c3\u30c8\u3092\u53d6\u5f97\u3059\u308b<pre><code>query deployTargetConfigsByProjectId{\ndeployTargetConfigsByProjectId(project:1){\nid\nweight\nbranches\npullrequests\ndeployTargetProjectPattern\ndeployTarget{\nname\nid\n}\nproject{\nname\n}\n}\n}\n# result:\n{\n\"data\": {\n\"deployTargetConfigsByProjectId\": [\n{\n\"id\": 1,\n\"weight\": 1,\n\"branches\": \"main\",\n\"pullrequests\": \"false\",\n\"deployTargetProjectPattern\": null,\n\"deployTarget\": {\n\"name\": \"production-cluster\",\n\"id\": 1\n},\n\"project\": {\n\"name\": \"my-project\"\n}\n},\n{\n\"id\": 2,\n\"weight\": 1,\n\"branches\": \"^feature/|^(dev|test|develop)$\",\n\"pullrequests\": \"true\",\n\"deployTargetProjectPattern\": null,\n\"deployTarget\": {\n\"name\": \"development-cluster\",\n\"id\": 2\n},\n\"project\": {\n\"name\": \"my-project\"\n}\n}\n]\n}\n}\n</code></pre>"},{"location":"ja/using-lagoon-advanced/nodejs/","title":"Node.js\u306e\u30b0\u30ec\u30fc\u30b9\u30d5\u30eb\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3","text":"<p>Node.js\u306b\u306f\u7d71\u5408\u3055\u308c\u305fWeb\u30b5\u30fc\u30d0\u30fc\u306e\u6a5f\u80fd\u304c\u3042\u308a\u307e\u3059\u3002\u3055\u3089\u306bExpress\u3092\u4f7f\u7528\u3059\u308b\u3068\u3001\u3053\u308c\u3089\u306e\u6a5f\u80fd\u3092\u62e1\u5f35\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p>\u6b8b\u5ff5\u306a\u304c\u3089\u3001Node.js\u306f\u81ea\u8eab\u306e\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u3092\u3046\u307e\u304f\u51e6\u7406\u3067\u304d\u307e\u305b\u3093\u3002\u3053\u308c\u306f\u30b3\u30f3\u30c6\u30ca\u5316\u3055\u308c\u305f\u30b7\u30b9\u30c6\u30e0\u3067\u591a\u304f\u306e\u554f\u984c\u3092\u5f15\u304d\u8d77\u3053\u3057\u307e\u3059\u3002\u6700\u5927\u306e\u554f\u984c\u306f\u3001Node.js\u306e\u30b3\u30f3\u30c6\u30ca\u304c\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u3059\u308b\u3088\u3046\u306b\u6307\u793a\u3055\u308c\u308b\u3068\u3001\u3059\u3079\u3066\u306e\u30a2\u30af\u30c6\u30a3\u30d6\u306a\u63a5\u7d9a\u3092\u5373\u5ea7\u306b\u3092\u5f37\u5236\u7d42\u4e86\u3057\u9069\u5207\u306b\u505c\u6b62\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u3053\u3068\u3067\u3059\u3002</p> <p>\u3053\u306e\u30d1\u30fc\u30c8\u3067\u306f\u3001\u30a2\u30af\u30c6\u30a3\u30d6\u306a\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u51e6\u7406\u3057\u7d42\u3048\u3066\u304b\u3089\u3001\u9069\u5207\u306b\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u3059\u308b\u3088\u3046\u306bNode.js\u3092\u8a2d\u5b9a\u3059\u308b\u65b9\u6cd5\u3092\u8aac\u660e\u3057\u307e\u3059\u3002</p> <p>\u4f8b\u3068\u3057\u3066\u3001Express\u3092\u4f7f\u7528\u3057\u305f\u30b7\u30f3\u30d7\u30eb\u306aNode.js\u30b5\u30fc\u30d0\u30fc\u3092\u4f7f\u7528\u3057\u307e\u3059:</p> app.js<pre><code>const express = require('express');\nconst app = express();\n// \u5168\u3066\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306b5\u79d2\u306e\u30c7\u30a3\u30ec\u30a4\u3092\u8ffd\u52a0\u3002\napp.use((req, res, next) =&gt; setTimeout(next, 5000));\napp.get('/', function (req, res) {\nres.send(\"Hello World\");\n})\nconst server = app.listen(3000, function () {\nconsole.log('Example app listening on port 3000!');\n})\n</code></pre> <p>\u3053\u308c\u306f\u3001Web\u30b5\u30fc\u30d0\u30fc\u304c <code>localhost:3000</code> \u306b\u30a2\u30af\u30bb\u30b9\u3055\u308c\u305f\u3068\u304d\u306b \"Hello World\" \u3092\u8868\u793a\u3057\u307e\u3059\u3002\u8a08\u7b97\u51e6\u7406\u306b\u6642\u9593\u304c\u304b\u304b\u308b\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u30b7\u30df\u30e5\u30ec\u30fc\u30c8\u3059\u308b\u305f\u3081\u3001\u30ec\u30b9\u30dd\u30f3\u30b9\u306b5\u79d2\u306e\u9045\u5ef6\u304c\u3042\u308b\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/using-lagoon-advanced/nodejs/#a","title":"\u30d1\u30fc\u30c8A: \u30ea\u30af\u30a8\u30b9\u30c8\u306e\u5b8c\u4e86\u3092\u8a31\u53ef\u3059\u308b","text":"<p>\u4e0a\u8a18\u306e\u4f8b\u3092\u5b9f\u884c\u3057\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u51e6\u7406\u3055\u308c\u3066\u3044\u308b\u9593(5\u79d2\u4ee5\u5185)\u306bNode.js\u30d7\u30ed\u30bb\u30b9\u3092\u505c\u6b62\u3059\u308b\u3068\u3001Node.js\u30b5\u30fc\u30d0\u30fc\u306f\u3059\u3050\u306b\u63a5\u7d9a\u3092\u5207\u65ad\u3057\u3001\u30d6\u30e9\u30a6\u30b6\u306f\u30a8\u30e9\u30fc\u3092\u8868\u793a\u3059\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002</p> <p>Node.js\u30b5\u30fc\u30d0\u30fc\u306b\u3001\u5b9f\u969b\u306b\u81ea\u8eab\u3092\u505c\u6b62\u3059\u308b\u524d\u306b\u3059\u3079\u3066\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u5b8c\u4e86\u3059\u308b\u306e\u3092\u5f85\u3064\u3079\u304d\u3060\u3068\u4f1d\u3048\u308b\u305f\u3081\u306b\u3001\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059:</p> Graceful Shutdown<pre><code>const startGracefulShutdown = () =&gt; {\nconsole.log('Starting shutdown of express...');\nserver.close(function () {\nconsole.log('Express shut down.');\n});\n}\nprocess.on('SIGTERM', startGracefulShutdown);\nprocess.on('SIGINT', startGracefulShutdown);\n</code></pre> <p>\u3053\u308c\u306f\u57fa\u672c\u7684\u306b <code>server.close()</code> \u3092\u547c\u3073\u51fa\u3057\u3001\u3053\u308c\u306b\u3088\u308aNode.js HTTP\u30b5\u30fc\u30d0\u30fc\u306b\u5bfe\u3057\u3066\u4ee5\u4e0b\u306e\u6307\u793a\u304c\u51fa\u3055\u308c\u307e\u3059:</p> <ol> <li>\u3053\u308c\u4ee5\u4e0a\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u53d7\u3051\u4ed8\u3051\u306a\u3044\u3002</li> <li>\u3059\u3079\u3066\u306e\u5b9f\u884c\u4e2d\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u5b8c\u4e86\u3059\u308b\u3002</li> </ol> <p>\u3053\u308c\u306f <code>SIGINT</code> ( <code>CTRL + C</code> \u3092\u62bc\u3057\u305f\u3068\u304d)\u307e\u305f\u306f <code>SIGTERM</code> (\u30d7\u30ed\u30bb\u30b9\u3092\u7d42\u4e86\u3059\u308b\u305f\u3081\u306e\u6a19\u6e96\u4fe1\u53f7)\u3067\u884c\u3044\u307e\u3059\u3002</p> <p>\u3053\u306e\u5c0f\u3055\u306a\u8ffd\u52a0\u306b\u3088\u308a\u3001Node.js\u306f\u3059\u3079\u3066\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u5b8c\u4e86\u3059\u308b\u306e\u3092\u5f85\u3064\u3088\u3046\u306b\u306a\u308a\u3001\u305d\u306e\u5f8c\u81ea\u8eab\u3092\u505c\u6b62\u3057\u307e\u3059\u3002</p> <p>\u3082\u3057\u79c1\u305f\u3061\u304cNode.js\u3092\u30b3\u30f3\u30c6\u30ca\u5316\u3055\u308c\u305f\u74b0\u5883\u3067\u5b9f\u884c\u3057\u3066\u3044\u306a\u3044\u306a\u3089\u3070\u3001\u304a\u305d\u3089\u304f \u6570\u79d2\u5f8c\u306b\u5b9f\u969b\u306bNode.js\u30b5\u30fc\u30d0\u30fc\u3092\u7d42\u4e86\u3059\u308b\u8ffd\u52a0\u306e\u30b3\u30fc\u30c9\u3092\u542b\u3081\u305f\u3044\u3068\u8003\u3048\u3066\u3044\u307e\u3059\u3002\u306a\u305c\u306a\u3089\u3001\u4e00\u90e8\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u975e\u5e38\u306b\u9577\u304f\u304b\u304b\u308b\u304b\u3001\u3042\u308b\u3044\u306f\u5168\u304f\u505c\u6b62\u3057\u306a\u3044\u53ef\u80fd\u6027\u304c\u3042\u308b\u304b\u3089\u3067\u3059\u3002\u3053\u308c\u306f\u30b3\u30f3\u30c6\u30ca\u5316\u3055\u308c\u305f\u30b7\u30b9\u30c6\u30e0\u5185\u3067\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u30b3\u30f3\u30c6\u30ca\u304c\u505c\u6b62\u3057\u306a\u3044\u5834\u5408\u3001Docker\u3068Kubernetes\u306f\u6570\u79d2\u5f8c(\u901a\u5e38\u306f30\u79d2\u5f8c)\u306b<code>SIGKILL</code>\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u30d7\u30ed\u30bb\u30b9\u81ea\u4f53\u3067\u306f\u51e6\u7406\u3067\u304d\u306a\u3044\u305f\u3081\u3001\u79c1\u305f\u3061\u306f\u6c17\u306b\u3059\u308b\u5fc5\u7528\u304c\u3042\u308a\u307e\u305b\u3093\u3002</p>"},{"location":"ja/using-lagoon-advanced/nodejs/#byarnnpm","title":"\u30d1\u30fc\u30c8B:Yarn\u3068NPM\u306e\u5b50\u751f\u6210\u554f\u984c","text":"<p>\u3082\u3057\u79c1\u305f\u3061\u304c\u30d1\u30fc\u30c8A\u3060\u3051\u3092\u5b9f\u88c5\u3057\u305f\u5834\u5408\u3001\u826f\u3044\u7d4c\u9a13\u3092\u5f97\u3089\u308c\u308b\u3067\u3057\u3087\u3046\u3002\u73fe\u5b9f\u306e\u4e16\u754c\u3067\u306f\u3001\u591a\u304f\u306eNode.js\u30b7\u30b9\u30c6\u30e0\u304cYarn\u3084NPM\u3067\u69cb\u7bc9\u3055\u308c\u3066\u304a\u308a\u3001\u3053\u308c\u3089\u306fNode.js\u306b\u30d1\u30c3\u30b1\u30fc\u30b8\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3060\u3051\u3067\u306a\u304f\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u7ba1\u7406\u3082\u63d0\u4f9b\u3057\u307e\u3059\u3002</p> <p>\u3053\u308c\u3089\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u6a5f\u80fd\u3092\u4f7f\u3046\u3068\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u8d77\u52d5\u3092\u7c21\u5358\u306b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u591a\u304f\u306e<code>package.json</code>\u30d5\u30a1\u30a4\u30eb\u304c\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002</p> package.json<pre><code>{\n\"name\": \"node\",\n\"version\": \"1.0.0\",\n\"main\": \"index.js\",\n\"license\": \"MIT\",\n\"dependencies\": {\n\"express\": \"^4.15.3\"\n},\n\"scripts\": {\n\"start\": \"node index.js\"\n}\n}\n</code></pre> <p>\u305d\u3057\u3066\u3001\u5b9a\u7fa9\u3055\u308c\u305f<code>scripts</code>\u30bb\u30af\u30b7\u30e7\u30f3\u3092\u4f7f\u3063\u3066\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8d77\u52d5\u3059\u308b\u3060\u3051\u3067\u6e08\u307f\u307e\u3059:</p> \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u8d77\u52d5<pre><code>yarn start\n</code></pre> <p>\u307e\u305f\u306f</p> \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u8d77\u52d5<pre><code>npm start\n</code></pre> <p>\u3053\u308c\u306f\u4fbf\u5229\u3067\u3001\u958b\u767a\u8005\u3092\u697d\u306b\u3057\u307e\u3059\u3002\u3060\u304b\u3089\u3001\u79c1\u305f\u3061\u306fDockerfiles\u306e\u4e2d\u3067\u3082\u540c\u3058\u3082\u306e\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002</p> .dockerfile<pre><code>CMD [\"yarn\", \"start\"]\n</code></pre> <p>\u3057\u304b\u3057\u3001\u3053\u308c\u306b\u306f\u5927\u304d\u306a\u554f\u984c\u304c\u3042\u308a\u307e\u3059:</p> <p><code>yarn</code> \u3084 <code>npm</code> \u304c <code>SIGINT</code> \u3084 <code>SIGTERM</code> \u30b7\u30b0\u30ca\u30eb\u3092\u53d7\u3051\u53d6\u308b\u3068\u3001\u305d\u308c\u3089\u306f\u6b63\u78ba\u306b\u30b7\u30b0\u30ca\u30eb\u3092\u751f\u6210\u3057\u305f\u5b50\u30d7\u30ed\u30bb\u30b9\u306b\u8ee2\u9001\u3057\u307e\u3059\u3002(\u3053\u306e\u5834\u5408\u306f <code>node index.js</code>)\u3057\u304b\u3057\u3001\u5b50\u30d7\u30ed\u30bb\u30b9\u304c\u505c\u6b62\u3059\u308b\u306e\u3092\u5f85\u3064\u3053\u3068\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u4ee3\u308f\u308a\u306b\u3001<code>yarn</code>/<code>npm</code> \u306f\u5373\u5ea7\u306b\u81ea\u5206\u81ea\u8eab\u3092\u505c\u6b62\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001Docker/Kubernetes\u306b\u5bfe\u3057\u3066\u30b3\u30f3\u30c6\u30ca\u304c\u5b8c\u4e86\u3057\u305f\u3068\u3044\u3046\u30b7\u30b0\u30ca\u30eb\u304c\u9001\u3089\u308c\u3001Docker/Kubernetes\u306f\u3059\u3050\u306b\u3059\u3079\u3066\u306e\u5b50\u30d7\u30ed\u30bb\u30b9\u3092\u5f37\u5236\u7d42\u4e86\u3057\u307e\u3059\u3002Yarn\u3068NPM\u306b\u306f\u30aa\u30fc\u30d7\u30f3\u306a\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u6b8b\u5ff5\u306a\u304c\u3089\u307e\u3060\u89e3\u6c7a\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002</p> <p>\u3053\u306e\u554f\u984c\u306e\u89e3\u6c7a\u7b56\u306f\u3001Yarn\u3084NPM\u3092\u4f7f\u7528\u3057\u3066\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u958b\u59cb\u3059\u308b\u306e\u3067\u306f\u306a\u304f\u3001\u76f4\u63a5 <code>node</code> \u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u3059\u3002</p> .dockerfile<pre><code>CMD [\"node\", \"index.js\"]\n</code></pre> <p>\u3053\u308c\u306b\u3088\u308a\u3001Node.js\u306f\u9069\u5207\u306b\u7d42\u4e86\u3057\u3001Docker/Kubernetes\u306fNode.js\u304c\u7d42\u4e86\u3059\u308b\u306e\u3092\u5f85\u3064\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/using-lagoon-advanced/private-repositories/","title":"\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea","text":"<ol> <li>\u30c7\u30d7\u30ed\u30a4\u30ad\u30fc\u306b\u3001\u3042\u306a\u305f\u306eGitHub/GitLab/BitBucket\u306eGit\u30ea\u30dd\u30b8\u30c8\u30ea\u3078\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u3092\u4e0e\u3048\u307e\u3059\u3002</li> <li><code>dockerfile</code>\u306b<code>ARG LAGOON_SSH_PRIVATE_KEY</code>\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002(SSH\u30ad\u30fc\u304c\u5fc5\u8981\u306a\u30d3\u30eb\u30c9\u30d7\u30ed\u30bb\u30b9\u306e\u30b9\u30c6\u30c3\u30d7\u306e\u524d\u306b)</li> <li><code>dockerfile</code>\u306b<code>RUN /lagoon/entrypoints/05-ssh-key.sh</code>\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002(SSH\u30ad\u30fc\u304c\u5fc5\u8981\u306a\u30d3\u30eb\u30c9\u30d7\u30ed\u30bb\u30b9\u306e\u30b9\u30c6\u30c3\u30d7\u306e\u524d\u306b)</li> </ol> \u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8a2d\u5b9a<pre><code>RUN /lagoon/entrypoints/05-ssh-key.sh &amp;&amp; composer install &amp;&amp; rm /home/.ssh/key\n</code></pre>"},{"location":"ja/using-lagoon-advanced/project-default-users-keys/","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30c7\u30d5\u30a9\u30eb\u30c8\u30e6\u30fc\u30b6\u30fc\u3068SSH\u30ad\u30fc","text":"<p>Lagoon\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u4f5c\u6210\u3055\u308c\u308b\u3068\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u95a2\u9023\u3059\u308bSSH \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30ad\u30fc\"\u304c\u751f\u6210\u3055\u308c\u3001\u305d\u306e\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30ad\u30fc\u304c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306eCLI\u30dd\u30c3\u30c9\u5185\u3067\u5229\u7528\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8<code>default-user@project</code>\u3082\u4f5c\u6210\u3055\u308c\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3078\u306e<code>MAINTAINER</code>\u30a2\u30af\u30bb\u30b9\u304c\u4ed8\u4e0e\u3055\u308c\u307e\u3059\u3002SSH \"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30ad\u30fc\"\u306f\u3001\u305d\u306e<code>default-user@project</code>\u306b\u6dfb\u4ed8\u3055\u308c\u307e\u3059\u3002</p> <p>\u3053\u308c\u306b\u3088\u308a\u3001\u4efb\u610f\u306e\u74b0\u5883\u306eCLI\u30dd\u30c3\u30c9\u5185\u304b\u3089\u540c\u3058\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5185\u306e\u4ed6\u306e\u4efb\u610f\u306e\u74b0\u5883\u306bSSH\u3067\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u306e\u30a2\u30af\u30bb\u30b9\u306f\u3001\u74b0\u5883\u9593\u3067\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u540c\u671f\u5316\u3059\u308b\u306a\u3069\u3001\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002(\u4f8b:drush <code>sql-sync</code>)</p> <p><code>MAINTAINER</code>\u30ed\u30fc\u30eb\u306b\u3064\u3044\u3066\u306e\u8a73\u3057\u3044\u60c5\u5831\u306f\u3001RBAC\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u306b\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/using-lagoon-advanced/project-default-users-keys/#_1","title":"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30ad\u30fc\u306e\u6307\u5b9a","text":"<p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\u969b\u306bSSH\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30ad\u30fc\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u306f\u53ef\u80fd\u3067\u3059\u304c\u3001\u3053\u308c\u306b\u306f\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u306e\u554f\u984c\u304c\u3042\u308b\u305f\u3081\u63a8\u5968\u3055\u308c\u307e\u305b\u3093\u3002</p>"},{"location":"ja/using-lagoon-advanced/setting-up-xdebug-with-lagoon/","title":"Lagoon\u3067\u306eXdebug\u306e\u8a2d\u5b9a","text":""},{"location":"ja/using-lagoon-advanced/setting-up-xdebug-with-lagoon/#xdebug","title":"\u30b3\u30f3\u30c6\u30ca\u3067Xdebug\u62e1\u5f35\u6a5f\u80fd\u3092\u6709\u52b9\u306b\u3059\u308b","text":"<p>Lagoon\u306e\u57fa\u672c\u30a4\u30e1\u30fc\u30b8\u306fXdebug\u304c\u8a2d\u5b9a\u6e08\u307f\u3067\u3059\u304c\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u4e0a\u306e\u7406\u7531\u304b\u3089\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u62e1\u5f35\u6a5f\u80fd\u306f\u30ed\u30fc\u30c9\u3055\u308c\u307e\u305b\u3093\u3002\u62e1\u5f35\u6a5f\u80fd\u3092\u6709\u52b9\u306b\u3059\u308b\u306b\u306f\u3001<code>XDEBUG_ENABLE</code>\u74b0\u5883\u5909\u6570\u3092<code>true</code>\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <ul> <li> <p>\u30ed\u30fc\u30ab\u30eb (Pygmy\u3068Lando)</p> <ol> <li>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304clagoon-examples\u306e<code>docker-compose.yml</code>\u30d5\u30a1\u30a4\u30eb\u3092\u30d9\u30fc\u30b9\u306b\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u74b0\u5883\u5909\u6570\u306f\u3059\u3067\u306b\u5b58\u5728\u3057\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u884c\u3092\u30b3\u30e1\u30f3\u30c8\u89e3\u9664\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u74b0\u5883\u5909\u6570\u3092\u5909\u66f4\u3057\u305f\u5f8c\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u3092\u518d\u69cb\u7bc9\u3057\u3066\u518d\u8d77\u52d5\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002 - \u30ea\u30e2\u30fc\u30c8 (dev/prod)</li> <li>Lagoon API\u3092\u4f7f\u7528\u3057\u3066\u3001\u5b9f\u884c\u4e2d\u306e\u74b0\u5883\u306b\u74b0\u5883\u5909\u6570\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</li> <li>\u74b0\u5883\u5909\u6570\u3092\u5909\u66f4\u3057\u305f\u5f8c\u306f\u3001\u74b0\u5883\u3092\u518d\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ol> </li> </ul>"},{"location":"ja/using-lagoon-advanced/setting-up-xdebug-with-lagoon/#xdebug_1","title":"Xdebug\u62e1\u5f35\u6a5f\u80fd\u306e\u6709\u52b9\u5316","text":"<p>\u30c7\u30d5\u30a9\u30eb\u30c8\u306eXdebug\u8a2d\u5b9a\u3067\u306f\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u958b\u59cb\u3059\u308b\u305f\u3081\u306b\u62e1\u5f35\u6a5f\u80fd\u3092\u6709\u52b9\u5316\u3059\u308b\"\u30c8\u30ea\u30ac\u30fc\"\u304c\u5fc5\u8981\u3067\u3059\u3002\uff08Xdebug\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\uff09 \u30c7\u30d0\u30c3\u30ac\u3092\u6709\u52b9\u5316\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u7c21\u5358\u306a\u624b\u9806\u3092\u53c2\u8003\u306b\u3057\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/using-lagoon-advanced/setting-up-xdebug-with-lagoon/#cli","title":"CLI","text":"<p><code>php-cli</code>\u30a4\u30e1\u30fc\u30b8\u306fXdebug\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u3068\u304d\u306b\u306f\u5e38\u306bXdebug\u3092\u6709\u52b9\u5316\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002 \u3057\u305f\u304c\u3063\u3066\u3001\u4ed6\u306b\u4f55\u3082\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u4efb\u610f\u306ePHP\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3059\u308b\u3068\u30c7\u30d0\u30c3\u30b0\u30bb\u30c3\u30b7\u30e7\u30f3\u304c\u958b\u59cb\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/using-lagoon-advanced/setting-up-xdebug-with-lagoon/#web","title":"Web","text":"<p>Xdebug\u306e\u30d6\u30e9\u30a6\u30b6\u62e1\u5f35\u6a5f\u80fd\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b \u3053\u3068\u3067\u3001\u30a2\u30af\u30c6\u30a3\u30d9\u30fc\u30b7\u30e7\u30f3\u30af\u30c3\u30ad\u30fc\u3092\u8a2d\u5b9a/\u89e3\u9664\u3057\u307e\u3059\u3002</p> <p>\u30c7\u30d0\u30c3\u30b0\u3092\u958b\u59cb\u3057\u305f\u3044\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u306b\u30a2\u30af\u30c6\u30a3\u30d9\u30fc\u30b7\u30e7\u30f3\u30af\u30c3\u30ad\u30fc\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/using-lagoon-advanced/setting-up-xdebug-with-lagoon/#phpstorm","title":"PHPStorm\u306e\u8a2d\u5b9a","text":"<ol> <li>PHPStorm\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u6b63\u3057\u304f\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002</li> <li>\u30c4\u30fc\u30eb\u30d0\u30fc\u306e\u201cStart Listening for PHP Debug Connections\u201d\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</li> <li>\u30a6\u30a7\u30d6\u30da\u30fc\u30b8\u3092\u8aad\u307f\u8fbc\u3080\u304b\u3001Drush\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</li> <li>\u521d\u56de\u5b9f\u884c\u6642\u306b\u306f\u3001PHPStorm\u304c\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u8868\u793a\u3057\u3001\u6b21\u306e\u64cd\u4f5c\u3092\u6c42\u3081\u307e\u3059\u3002<ol> <li>\u30d1\u30b9\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</li> <li>\u30b5\u30fc\u30d0\u30fc\u4e0a\u3067\u30c8\u30ea\u30ac\u30fc\u3055\u308c\u305f\u6b63\u3057\u3044\u30ed\u30fc\u30ab\u30eb\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u3057\u307e\u3059\u3002</li> </ol> </li> </ol>"},{"location":"ja/using-lagoon-advanced/setting-up-xdebug-with-lagoon/#visual-studio-code","title":"Visual Studio Code\u306e\u8a2d\u5b9a","text":"<ol> <li>Felix Becker\u306b\u3088\u308bPHP Debug\u62e1\u5f35\u6a5f\u80fd\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002</li> <li>\u8aac\u660e\u306b\u5f93\u3063\u3066PHP\u7528\u306e\u57fa\u672c\u7684\u306a <code>launch.json</code>\u4f5c\u6210\u3057\u307e\u3059\u3002</li> <li> <p>\u6b63\u3057\u3044\u30d1\u30b9\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\u5178\u578b\u7684\u306aDrupal\u30b5\u30a4\u30c8\u306e\u4f8b\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002</p> launch.json<pre><code>\"pathMappings\": {\n\"/app\": \"${workspaceFolder}\",\n},\n</code></pre> </li> <li> <p>Visual Studio Code\u306eRun\u30bf\u30d6\u3067\u3001    \u201cListen for Xdebug\u201d\u306e\u96a3\u306b\u3042\u308b\u7dd1\u8272\u306e\u77e2\u5370\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> </li> <li>Web\u30da\u30fc\u30b8\u3092\u30ed\u30fc\u30c9\u3059\u308b\u304b\u3001Drush\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</li> </ol>"},{"location":"ja/using-lagoon-advanced/setting-up-xdebug-with-lagoon/#_1","title":"\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0","text":"<ul> <li>Xdebug\u62e1\u5f35\u304c\u30ed\u30fc\u30c9\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002Drupal   \u30b5\u30a4\u30c8\u3067\u3053\u308c\u3092\u884c\u3046\u6700\u5584\u306e\u65b9\u6cd5\u306f\u3001PHP\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30da\u30fc\u30b8\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u3067\u3059\u3002Xdebug\u3068\u305d\u306e\u3059\u3079\u3066\u306e\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u304c\u898b\u3064\u304b\u308b\u306f\u305a\u3067\u3059\u3002</li> </ul> <ul> <li>\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</li> </ul> \u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6 \u30ed\u30fc\u30ab\u30eb\u5024 xdebug.mode debug xdebug.client_host <code>host.docker.internal</code> \u307e\u305f\u306f \u3042\u306a\u305f\u306eIP\u30a2\u30c9\u30ec\u30b9 xdebug.client_port 9003 <ul> <li>\u5b9f\u884c\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u5185\u3067Xdebug\u306e\u30ed\u30b0\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002\u30ed\u30b0\u3092\u6709\u52b9\u306b\u3059\u308b\u306b\u306f<code>XDEBUG_LOG</code>\u3068\u3044\u3046\u540d\u524d\u306e\u74b0\u5883\u5909\u6570\u306b\u4f55\u3089\u304b\u306e\u5024\u3092\u8a2d\u5b9a\u3059\u308b\u3060\u3051\u3067\u3059\u3002   \u30ed\u30b0\u306f<code>/tmp/xdebug.log</code>\u306b\u4fdd\u5b58\u3055\u308c\u307e\u3059\u3002\u3082\u3057lagoon-examples\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u306a\u3089\u3001\u3042\u306a\u305f\u306f \u3044\u304f\u3064\u304b\u306e\u65e2\u5b58\u306e\u884c\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u5916\u3057\u307e\u3059\u3002</li> <li>\u30a2\u30af\u30c6\u30a3\u30d9\u30fc\u30b7\u30e7\u30f3\u30af\u30c3\u30ad\u30fc\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002Chrome\u307e\u305f\u306fFirefox\u306e\u30d6\u30e9\u30a6\u30b6\u30c4\u30fc\u30eb\u3092\u4f7f\u7528\u3057\u3066\u3001<code>XDEBUG_SESSION</code>\u30af\u30c3\u30ad\u30fc\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002</li> <li>Xdebug\u304c\u30a2\u30af\u30c6\u30a3\u30d6\u5316\u3055\u308c\u3001\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30fc\u3068\u306e\u30c7\u30d0\u30c3\u30b0\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u958b\u59cb\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002<code>nc -l 9003</code> \u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30c4\u30fc\u30eb\u3092\u4f7f\u7528\u3057\u3066Xdebug\u30dd\u30fc\u30c8\u3092\u958b\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3059\u3079\u3066\u304cPHP\u3067\u6b63\u3057\u304f\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308c\u3070\u3001\u30a6\u30a7\u30d6\u30da\u30fc\u30b8\u3092\u30ed\u30fc\u30c9\u3059\u308b\u304b\u3001Drush\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068<code>Xdebug init</code>\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u5f97\u3089\u308c\u308b\u306f\u305a\u3067\u3059\u3002</li> <li><code>xdebug.client_host</code>\u304c\u6b63\u3057\u304f\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002Docker for Mac\u3067\u306e\u30ed\u30fc\u30ab\u30eb\u30c7\u30d0\u30c3\u30b0\u306e\u5834\u5408\u3001\u3053\u306e\u5024\u306f<code>host.docker.internal</code>\u3067\u3042\u308b\u3079\u304d\u3067\u3059\u3002\u30ea\u30e2\u30fc\u30c8\u30c7\u30d0\u30c3\u30b0\u306e\u5834\u5408\u3001\u3053\u306e\u5024\u306f\u3042\u306a\u305f\u306eIP\u30a2\u30c9\u30ec\u30b9\u3067\u3042\u308b\u3079\u304d\u3067\u3059\u3002\u3053\u306e\u5024\u304c\u6b63\u3057\u304f\u6c7a\u5b9a\u3055\u308c\u306a\u304b\u3063\u305f\u5834\u5408\u306f\u3001<code>DOCKERHOST</code>\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u4e0a\u66f8\u304d\u3067\u304d\u307e\u3059\u3002</li> <li>Lando\u3092\u30ed\u30fc\u30ab\u30eb\u3067\u4f7f\u7528\u3059\u308b\u5834\u5408\u3001CLI\u304b\u3089\u5b9f\u884c\u3055\u308c\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u30c7\u30d0\u30c3\u30b0\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u307e\u305a<code>lando ssh</code>\u3092\u4ecb\u3057\u3066CLI\u30b3\u30f3\u30c6\u30ca\u306bSSH\u3067\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002<code>lando drush</code>\u307e\u305f\u306f<code>lando php</code>\u3092\u5b9f\u884c\u3057\u3066\u3082\u30c7\u30d0\u30c3\u30b0\u3067\u304d\u306a\u3044\u306e\u3067\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002</li> </ul>"},{"location":"ja/using-lagoon-advanced/setting-up-xdebug-with-lagoon/#mac","title":"Mac\u56fa\u6709\u306e\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0","text":"<ul> <li> <p>Docker for Mac\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30ad\u30f3\u30b0\u304c\u58ca\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 \u30db\u30b9\u30c8\u30de\u30b7\u30f3\u3067   <code>nc -l 9003</code>\u3092\u5b9f\u884c\u3057\u3001\u305d\u306e\u5f8c\u65b0\u3057\u3044\u30bf\u30fc\u30df\u30ca\u30eb\u30a6\u30a3\u30f3\u30c9\u30a6\u3067\u6b21\u306e\u3088\u3046\u306b\u5b9f\u884c\u3057\u307e\u3059\u3002</p> Mac\u306eDocker\u30cd\u30c3\u30c8\u30ef\u30fc\u30ad\u30f3\u30b0\u3092\u78ba\u8a8d<pre><code>docker-compose run cli nc -zv host.docker.internal 9003\n</code></pre> <p>\u6b21\u306e\u3088\u3046\u306a\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002 <code>host.docker.internal (192.168.65.2:9003) open</code></p> </li> </ul>"},{"location":"ja/using-lagoon-advanced/setting-up-xdebug-with-lagoon/#linux","title":"Linux \u7279\u6709\u306e\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0","text":"<ul> <li> <p>\u30db\u30b9\u30c8<code>host.docker.internal</code>\u306b\u63a5\u7d9a\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002<code>docker</code>\u304c(Docker Desktop\u3092\u7d4c\u7531\u305b\u305a\u306b)\u624b\u52d5\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u3053\u306e\u30db\u30b9\u30c8\u306f\u89e3\u6c7a\u3055\u308c\u307e\u305b\u3093\u3002\u3053\u308c\u3092\u5f37\u5236\u7684\u306b\u89e3\u6c7a\u3059\u308b\u305f\u3081\u306b\u306f\u3001<code>docker-compose.yml</code>\u30d5\u30a1\u30a4\u30eb\u306b\u8ffd\u52a0\u306e\u30b9\u30cb\u30da\u30c3\u30c8\u3092\u633f\u5165\u3059\u308b\u3053\u3068\u3067\u3001\u3053\u306e\u30db\u30b9\u30c8\u3092\u5f37\u5236\u7684\u306b\u89e3\u6c7a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002(\u624b\u9806\u306f\u3053\u306e\u30d6\u30ed\u30b0\u6295\u7a3f\u304b\u3089\u5f15\u7528\u3057\u3066\u3044\u307e\u3059)</p> Linux\u5411\u3051\u306edocker-compose.yml\u306e\u4fee\u6b63<pre><code>  services:\ncli:\nextra_hosts:\nhost.docker.internal: host-gateway\nphp:\nextra_hosts:\nhost.docker.internal: host-gateway\n</code></pre> </li> </ul>"},{"location":"ja/using-lagoon-advanced/setting-up-xdebug-with-lagoon/#xdebug-2","title":"Xdebug 2","text":"<p>\u53e4\u3044\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u307e\u3060Xdebug\u30d0\u30fc\u30b8\u30e7\u30f32\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u3053\u306e\u30da\u30fc\u30b8\u306e\u60c5\u5831\u306f\u3059\u3079\u3066\u305d\u306e\u307e\u307e\u9069\u7528\u3055\u308c\u307e\u3059\u304c\u3001\u8a2d\u5b9a\u540d\u3068\u5024\u306e\u4e00\u90e8\u306f\u5909\u66f4\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> v3 v2 xdebug.mode xdebug.remote_enabled On xdebug.client_host xdebug.remote_host <code>host.docker.internal</code> \u307e\u305f\u306f\u3042\u306a\u305f\u306eIP\u30a2\u30c9\u30ec\u30b9 xdebug.client_port xdebug.remote_port 9000"},{"location":"ja/using-lagoon-advanced/simplesaml/#simplesamlphp","title":"SimpleSAMLphp","text":"<p>\u3053\u308c\u306f\u3001SimpleSAMLphp\u3092\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u8ffd\u52a0\u3057\u3001\u305d\u308c\u3092NGINX\u7d4c\u7531\u3067\u63d0\u4f9b\u3059\u308b\u305f\u3081\u306e\u8a2d\u5b9a\u3092\u5909\u66f4\u3059\u308b\u65b9\u6cd5\u306e\u4f8b\u3067\u3059\u3002</p>"},{"location":"ja/using-lagoon-advanced/simplesaml/#_1","title":"\u5fc5\u8981\u6761\u4ef6","text":"<p>SimpleSAMLphp\u3092\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u8ffd\u52a0\u3057\u307e\u3059:</p> Composer\u3092\u4f7f\u7528\u3057\u3066\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306bSimpleSAMLphp\u3092\u8ffd\u52a0\u3059\u308b<pre><code>composer req simplesamlphp/simplesamlphp\n</code></pre>"},{"location":"ja/using-lagoon-advanced/simplesaml/#simplesamlphp_1","title":"SimpleSAMLphp\u306e\u8a2d\u5b9a\u3092\u5909\u66f4\u3059\u308b","text":"<p><code>vendor/simplesamlphp/simplesamlphp/config-templates</code>\u304b\u3089<code>authsources.php</code>\u3068<code>config.php</code>\u3092<code>vendor</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5916\u306e<code>conf/simplesamlphp</code>\u306e\u3088\u3046\u306a\u5834\u6240\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\u307e\u305f\u3001<code>vendor/simplesamlphp/simplesamlphp/metadata-templates</code>\u304b\u3089<code>saml20-idp-remote.php</code>\u3082\u5fc5\u8981\u3067\u3059\u3002</p> <p><code>config.php</code>\u3067Lagoon\u306b\u4ee5\u4e0b\u306e\u5024\u3092\u8a2d\u5b9a\u3057\u307e\u3059:</p> <p>SimpleSAMLphp\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306e\u57fa\u672cURL\u30d1\u30b9:</p> config.php<pre><code>  'baseurlpath' =&gt; 'https://YOUR_DOMAIN.TLD/simplesaml/',\n</code></pre> <p>\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u4fdd\u5b58\u3057\u307e\u3059\u3002</p> config.php<pre><code>  'store.type'                    =&gt; 'sql',\n  'store.sql.dsn'                 =&gt; vsprintf('mysql:host=%s;port=%s;dbname=%s', [\n    getenv('MARIADB_HOST'),\n    getenv('MARIADB_PORT'),\n    getenv('MARIADB_DATABASE'),\n  ]),\n</code></pre> <p>\u4ed6\u306e\u8a2d\u5b9a\u306f\u304a\u597d\u307f\u3067\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <ul> <li>\u30ed\u30b0\u3068\u8a3c\u660e\u66f8\u306e\u30d1\u30b9\u3092\u78ba\u8a8d\u3057\u307e\u3059</li> <li>SimpleSAMLphp\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u4fdd\u8b77\u3057\u307e\u3059</li> <li>\u30ed\u30ae\u30f3\u30b0\u306e\u30ec\u30d9\u30eb\u3092\u8a2d\u5b9a\u3057\u307e\u3059</li> <li><code>technicalcontact</code>\u3068<code>timezone</code>\u3092\u8a2d\u5b9a\u3057\u307e\u3059</li> </ul> <p>\u4f8b\u3092\u53c2\u8003\u306b<code>authsources.php</code>\u306bauthsources(IdPs)\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> authsources.php<pre><code>  'default-sp' =&gt; [\n    'saml:SP',\n    // The entity ID of this SP.\n    'entityID' =&gt; 'https://YOUR_DOMAIN.TLD',\n    // The entity ID of the IdP this should SP should contact.\n    // Can be NULL/unset, in which case the user will be shown a list of available IdPs.\n    'idp' =&gt; 'https://YOUR_IDP_DOMAIN.TLD',\n    // The URL to the discovery service.\n    // Can be NULL/unset, in which case a builtin discovery service will be used.\n    'discoURL' =&gt; null,\n    'NameIDFormat' =&gt; 'urn:oasis:names:tc:SAML:2.0:nameid-format:transient',\n    'certificate' =&gt; '/app/conf/simplesamlphp/certs/saml.crt',\n    'privatekey' =&gt; '/app/conf/simplesamlphp/certs/saml.pem',\n    'redirect.sign' =&gt; TRUE,\n    'redirect.validate' =&gt; TRUE,\n    'authproc' =&gt; [\n      50 =&gt; [\n        'class' =&gt; 'core:AttributeCopy',\n        'urn:oid:1.3.6.1.4.1.5923.1.1.1.6' =&gt; 'eduPersonPrincipalName',\n      ],\n      51 =&gt; [\n        'class' =&gt; 'core:AttributeCopy',\n        'urn:oid:2.5.4.42' =&gt; 'givenName',\n      ],\n      52 =&gt; [\n        'class' =&gt; 'core:AttributeCopy',\n        'urn:oid:2.5.4.4' =&gt; 'sn',\n      ],\n      53 =&gt; [\n        'class' =&gt; 'core:AttributeCopy',\n        'urn:oid:0.9.2342.19200300.100.1.3' =&gt; 'mail',\n      ],\n    ],\n  ],\n</code></pre> <p>\u4f8b\u3092\u53c2\u8003\u306b<code>saml20-idp-remote.php</code>\u306bIdP\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> saml20-idp-remote.php<pre><code>&lt;?php\n/**\n * SAML 2.0 remote IdP metadata for SimpleSAMLphp.\n *\n * Remember to remove the IdPs you don't use from this file.\n *\n * See: https://simplesamlphp.org/docs/stable/simplesamlphp-reference-idp-remote\n */\n/**\n * Some IdP.\n */\n$metadata['https://YOUR_IDP_DOMAIN.TLD'] = [\n'entityid' =&gt; 'https://YOUR_IDP_DOMAIN.TLD',\n'name' =&gt; [\n'en' =&gt; 'Some IdP',\n],\n'description' =&gt; 'Some IdP',\n...\n];\n</code></pre> <p>\u30d3\u30eb\u30c9\u30d7\u30ed\u30bb\u30b9\u3067\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092SimpleSAMLphp\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059</p> <ul> <li><code>vendor/simplesamlphp/simplesamlphp/config/authsources.php</code></li> <li><code>vendor/simplesamlphp/simplesamlphp/config/config.php</code></li> <li><code>vendor/simplesamlphp/simplesamlphp/metadata/saml20-idp-remote.php</code></li> </ul>"},{"location":"ja/using-lagoon-advanced/simplesaml/#simplesamlphpnginx-conf","title":"SimpleSAMLphp\u306e\u305f\u3081\u306eNGINX conf\u3092\u4f5c\u6210\u3057\u307e\u3059","text":"<p><code>lagoon/nginx/location_prepend_simplesamlphp.conf</code>\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059:</p> location_prepend_simplesamlphp.conf<pre><code>location ^~ /simplesaml {\nalias /app/vendor/simplesamlphp/simplesaml php/www;\nlocation ~ ^(?&lt;prefix&gt;/simplesaml)(?&lt;phpfile&gt;.+?\\.php)(?&lt;pathinfo&gt;/.*)?$ {\ninclude          fastcgi_params;\nfastcgi_pass     ${NGINX_FASTCGI_PASS:-php}:9000;\nfastcgi_param    SCRIPT_FILENAME $document_root$phpfile;\n# Must be prepended with the baseurlpath\nfastcgi_param    SCRIPT_NAME /simplesaml$phpfile;\nfastcgi_param    PATH_INFO $pathinfo if_not_empty;\n}\n}\n</code></pre> <p>\u3053\u308c\u306b\u3088\u308a\u3001<code>/simplesaml</code> URL\u304c<code>vendor</code>\u306eSimpleSAMLphp\u306b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/using-lagoon-advanced/simplesaml/#nginxnginx","title":"NGINX\u30a4\u30e1\u30fc\u30b8\u306b\u8ffd\u52a0\u306eNGINX\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3059\u308b","text":"<p><code>nginx.dockerfile</code>\u3092\u4fee\u6b63\u3057\u3001<code>location_prepend_simplesamlphp.conf</code>\u3092\u30a4\u30e1\u30fc\u30b8\u306b\u8ffd\u52a0\u3057\u307e\u3059:</p> nginx.dockerfile<pre><code>ARG CLI_IMAGE\nFROM ${CLI_IMAGE} AS cli\n\nFROM uselagoon/nginx-drupal\n\nCOPY --from=cli /app /app\n\nCOPY lagoon/nginx/location_prepend_simplesamlphp.conf /etc/nginx/conf.d/drupal/location_prepend_simplesamlphp.conf\nRUN fix-permissions /etc/nginx/conf.d/drupal/location_prepend_simplesamlphp.conf\n\n# Define where the Drupal Root is located\nENV WEBROOT=public\n</code></pre>"},{"location":"ja/using-lagoon-advanced/triggering-deployments/","title":"\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u306e\u30c8\u30ea\u30ac\u30fc","text":""},{"location":"ja/using-lagoon-advanced/triggering-deployments/#azure-pipelines","title":"Azure Pipelines\u3092\u4f7f\u7528\u3057\u3066\u65b0\u3057\u3044\u30c7\u30d7\u30ed\u30a4\u3092\u30c8\u30ea\u30ac\u30fc\u3059\u308b","text":"<p>Azure Pipelines\u3092\u4f7f\u7528\u3057\u3066\u65b0\u3057\u3044\u30c7\u30d7\u30ed\u30a4\u3092\u81ea\u52d5\u7684\u306b\u30c8\u30ea\u30ac\u30fc\u3059\u308b\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u624b\u9806\u3092\u884c\u3063\u3066\u304f\u3060\u3055\u3044\u3002</p> <ol> <li>\u30c7\u30d7\u30ed\u30a4\u306eSSH\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ad\u30fc\u3092<code>id_rsa_lagoon</code>\u3068\u3057\u3066Azure\u306e\u30bb\u30ad\u30e5\u30a2\u30d5\u30a1\u30a4\u30eb\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\u30bb\u30ad\u30e5\u30a2\u30d5\u30a1\u30a4\u30eb\u306b\u3064\u3044\u3066\u306e\u8a73\u7d30\u306fAzure\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002</li> <li>\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092<code>azure-pipelines.yml</code>\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002</li> </ol> azure-pipelines.yml<pre><code>pool:\nvmImage: 'ubuntu-latest'\nstages:\n# .. \u4ed6\u306e\u30b9\u30c6\u30fc\u30b8\n- stage: Deploy\ncondition: and(succeeded(), in(variables['Build.SourceBranch'], 'refs/heads/staging', 'refs/heads/develop'))\njobs:\n- job: DeployLagoon\nsteps:\n- task: DownloadSecureFile@1\nname: lagoonSshKey\ndisplayName: 'Download Lagoon SSH key'\ninputs:\nsecureFile: id_rsa_lagoon\n- script: |\ncurl -L \"https://github.com/uselagoon/lagoon-cli/releases/download/v0.21.3/lagoon-cli-v0.21.3-linux-amd64\" -o ./lagoon\nchmod +x ./lagoon\ndisplayName: 'Download lagoon-cli'\n- script: ./lagoon login -i $(lagoonSshKey.secureFilePath)\ndisplayName: 'Log into Lagoon'\n- script: ./lagoon deploy branch -e $(Build.SourceBranchName) -p my-awesome-project -b $(Build.SourceBranchName) --force\ndisplayName: 'Trigger deployment using lagoon-cli'\n</code></pre> <p>\u3053\u308c\u306b\u3088\u308a\u3001<code>develop</code>\u30d6\u30e9\u30f3\u30c1\u307e\u305f\u306f<code>staging</code>\u30d6\u30e9\u30f3\u30c1\u3067\u5909\u66f4\u304c\u884c\u308f\u308c\u308b\u305f\u3073\u306b\u65b0\u3057\u3044\u30c7\u30d7\u30ed\u30a4\u304c\u30c8\u30ea\u30ac\u30fc\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u5024\u3092\u9069\u5207\u306b\u8abf\u6574\u3057\u3066\u3001\u30c7\u30d7\u30ed\u30a4\u6226\u7565\u3068\u8a2d\u5b9a\u306b\u9069\u5408\u3055\u305b\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/using-lagoon-advanced/triggering-deployments/#_2","title":"\u30c7\u30d7\u30ed\u30a4\u305b\u305a\u306b\u30d7\u30c3\u30b7\u30e5","text":"<p>\u30c7\u30d7\u30ed\u30a4\u305b\u305a\u306b\u30d7\u30c3\u30b7\u30e5\u3057\u305f\u3044\u5834\u5408\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u30b3\u30df\u30c3\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u306b \"<code>[skip deploy]</code>\" \u307e\u305f\u306f \"<code>[deploy skip]</code>\" \u3092\u542b\u3093\u3067\u304f\u3060\u3055\u3044\u3002\u305d\u3046\u3059\u308b\u3068\u3001Lagoon\u306f\u305d\u306e\u30b3\u30df\u30c3\u30c8\u304b\u3089\u30c7\u30d7\u30ed\u30a4\u3092\u30c8\u30ea\u30ac\u30fc\u3057\u307e\u305b\u3093\u3002</p>"},{"location":"ja/using-lagoon-advanced/using-harbor/","title":"\u30cf\u30fc\u30d0\u30fc","text":"<p>Harbor\u306f\u3001Kubernetes\u30a4\u30f3\u30d5\u30e9\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u969b\u306eLagoon\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u30ea\u30dd\u30b8\u30c8\u30ea\u3068\u3057\u3066\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002Harbor\u306fDocker\u30ec\u30b8\u30b9\u30c8\u30ea\u3068\u3001Trivy\u306b\u3088\u3063\u3066\u63d0\u4f9b\u3055\u308c\u308b\u30b3\u30f3\u30c6\u30ca\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b9\u30ad\u30e3\u30cb\u30f3\u30b0\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002</p> <p>\u6ce8\u610f:</p> <p>Lagoon\u3092\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3057\u3066\u3044\u308b\u5834\u5408\u3001Harbor\u306e\u8a2d\u5b9a\u306f\u3059\u3079\u3066\u81ea\u52d5\u7684\u306b\u51e6\u7406\u3055\u308c\u307e\u3059\u3002</p> <p>\u3082\u3057Lagoon\u3092\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u305d\u306eUI\u306blocalhost:8084\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\u30e6\u30fc\u30b6\u540d\u306f <code>admin</code>\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u306f <code>admin</code>\u3067\u3059\u3002</p> <p>\u6ce8\u610f:</p> <p>\u30b5\u30a4\u30c8\u3092\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc(amazee.io\u306a\u3069)\u3067\u30db\u30b9\u30c8\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u305d\u308c\u3089\u306e\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u306f\u9867\u5ba2\u304cHarbor UI\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3053\u3068\u3092\u8a31\u53ef\u3057\u306a\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3068\u3001\u6700\u521d\u306e\u753b\u9762\u306b\u306f\u30e6\u30fc\u30b6\u30fc\u304c\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3059\u3079\u3066\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30ea\u30b9\u30c8\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002Harbor\u5185\u306e\u5404\u300c\u30ea\u30dd\u30b8\u30c8\u30ea\u300d\u306fLagoon\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002</p> <p></p> <p>\u5404Harbor\u30ea\u30dd\u30b8\u30c8\u30ea\u5185\u306b\u306f\u30011\u3064\u306eLagoon\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u6301\u3064\u3059\u3079\u3066\u306e\u74b0\u5883\u306e\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u30ea\u30b9\u30c8\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002</p> <p></p> <p>\u3053\u3053\u304b\u3089\u3001\u500b\u3005\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u6df1\u304f\u6398\u308a\u4e0b\u3052\u3066\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b9\u30ad\u30e3\u30f3\u7d50\u679c\u306e\u6982\u8981\u3092\u542b\u3080\u8a73\u7d30\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p></p>"},{"location":"ja/using-lagoon-advanced/using-harbor/security-scanning/","title":"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b9\u30ad\u30e3\u30f3","text":"<p>Harbor\u306b\u306f\u3001Trivy\u30b5\u30fc\u30d3\u30b9\u306b\u3088\u3063\u3066\u63d0\u4f9b\u3055\u308c\u308b\u7d44\u307f\u8fbc\u307f\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b9\u30ad\u30e3\u30f3\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u304c\u642d\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u3001\u6307\u5b9a\u3055\u308c\u305f\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u89e3\u6790\u3057\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u3092\u53ce\u96c6\u3057\u307e\u3059\u3002\u305d\u306e\u5f8c\u3001Trivy\u30b5\u30fc\u30d3\u30b9\u306f\u56fd\u7acb\u8106\u5f31\u6027\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u691c\u7d22\u3057\u3001\u305d\u308c\u3089\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u5f71\u97ff\u3092\u4e0e\u3048\u308bCVE(\u4e00\u822c\u7684\u306a\u8106\u5f31\u6027\u3068\u9732\u51fa)\u3092\u63a2\u3057\u307e\u3059\u3002Trivy\u306f\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u3082\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u305f\u3081\u3001Composer\u30d5\u30a1\u30a4\u30eb\u3084\u305d\u306e\u4ed6\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u30e9\u30a4\u30d6\u30e9\u30ea\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb\u3092\u30b9\u30ad\u30e3\u30f3\u3057\u3001\u305d\u308c\u3089\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u30d0\u30fc\u30b8\u30e7\u30f3\u5185\u306b\u898b\u3064\u304b\u3063\u305f\u8106\u5f31\u6027\u3092\u5831\u544a\u3057\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u8106\u5f31\u6027\u306f\u3001\u500b\u3005\u306e\u30b3\u30f3\u30c6\u30ca\u3054\u3068\u306bHarbor\u5185\u3067\u5831\u544a\u3055\u308c\u307e\u3059\u3002</p> <p>Harbor\u3067\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b9\u30ad\u30e3\u30f3\u306e\u4f8b\u3001\u30b9\u30ad\u30e3\u30f3\u3055\u308c\u305f\u30b3\u30f3\u30c6\u30ca\u306b\u9069\u7528\u53ef\u80fd\u306a\u8106\u5f31\u6027\u3092\u793a\u3057\u3066\u3044\u307e\u3059:</p> <p></p>"},{"location":"ja/using-lagoon-advanced/using-harbor/harbor-settings/","title":"\u30ed\u30fc\u30ab\u30eb\u3067\u306eHarbor\u306e\u5b9f\u884c","text":"<p>Lagoon\u306f\u3001Harbor\u3092\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3059\u308b\u3053\u3068\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u3053\u3067\u306f\u3001AWS S3\u3068\u4e92\u63db\u6027\u306e\u3042\u308b\u30ed\u30fc\u30ab\u30eb\u30b9\u30c8\u30ec\u30fc\u30b8\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3067\u3042\u308bMinIO\u3092\u30b9\u30c8\u30ec\u30fc\u30b8\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3068\u3057\u3066\u5229\u7528\u3057\u307e\u3059\u3002</p>"},{"location":"ja/using-lagoon-advanced/using-harbor/harbor-settings/#_1","title":"\u8a2d\u5b9a","text":"<p>Harbor\u306f\u8907\u6570\u306e\u30b3\u30f3\u30c6\u30ca\u3067\u69cb\u6210\u3055\u308c\u3066\u304a\u308a\u3001\u305d\u308c\u305e\u308c\u304c\u6210\u529f\u88cf\u306b\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b\u306f\u7570\u306a\u308b\u8a2d\u5b9a\u304c\u5fc5\u8981\u3067\u3059\u3002</p>"},{"location":"ja/using-lagoon-advanced/using-harbor/harbor-settings/#environment-variables","title":"\u74b0\u5883\u5909\u6570","text":"<p>Harbor\u304c\u6b63\u3057\u304f\u958b\u59cb\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u74b0\u5883\u5909\u6570\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059:</p> <ul> <li><code>HARBOR_REGISTRY_STORAGE_AMAZON_BUCKET</code><ul> <li>\u3053\u308c\u306f\u3001Harbor\u304c\u30a4\u30e1\u30fc\u30b8\u3092\u4fdd\u5b58\u3059\u308bAWS\u30d0\u30b1\u30c3\u30c8\u306e\u540d\u524d\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</li> <li>Lagoon\u304c\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3055\u308c\u308b\u5834\u5408\u3084CI\u30c6\u30b9\u30c8\u4e2d\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067<code>harbor-images</code>\u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002</li> </ul> </li> <li><code>HARBOR_REGISTRY_STORAGE_AMAZON_REGION</code><ul> <li>\u3053\u308c\u306f\u3001Harbor\u306e\u30d0\u30b1\u30c3\u30c8\u304c\u5b58\u5728\u3059\u308bAWS\u5730\u57df\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</li> <li>Lagoon\u304c\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3055\u308c\u308b\u5834\u5408\u3084CI\u30c6\u30b9\u30c8\u4e2d\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067<code>us-east-1</code>\u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002</li> </ul> </li> <li><code>REGISTRY_STORAGE_S3_ACCESSKEY</code><ul> <li>\u3053\u308c\u306f\u3001Harbor\u304cAWS\u30d0\u30b1\u30c3\u30c8\u306b\u8aad\u307f\u66f8\u304d\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3059\u308bAWS\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</li> <li>Lagoon\u304c\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3055\u308c\u308b\u5834\u5408\u3084CI\u30c6\u30b9\u30c8\u4e2d\u306f\u3001MinIO\u306f\u8a8d\u8a3c\u3092\u5fc5\u8981\u3068\u3057\u306a\u3044\u305f\u3081\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u7a7a\u6587\u5b57\u5217\u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002</li> </ul> </li> <li><code>REGISTRY_STORAGE_S3_SECRETKEY</code><ul> <li>\u3053\u308c\u306f\u3001Harbor\u304cAWS\u30d0\u30b1\u30c3\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3059\u308bAWS\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30ad\u30fc\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 AWS\u30d0\u30b1\u30c3\u30c8\u3078\u306e\u8aad\u307f\u66f8\u304d\u3002</li> <li>Lagoon\u304c\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3055\u308c\u308b\u304bCI\u30c6\u30b9\u30c8\u4e2d\u306e\u5834\u5408\u3001MinIO\u306f\u8a8d\u8a3c\u3092\u5fc5\u8981\u3068\u3057\u306a\u3044\u305f\u3081\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u7a7a\u6587\u5b57\u5217\u306b\u306a\u308a\u307e\u3059\u3002</li> </ul> </li> </ul> <p>\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u6b21\u306e\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3067\u304d\u307e\u3059:</p> <ul> <li><code>HARBOR_REGISTRY_STORAGE_AMAZON_ENDPOINT</code><ul> <li>\u3053\u306e\u5909\u6570\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001Harbor\u30ec\u30b8\u30b9\u30c8\u30ea\u306f\u305d\u306e\u5024\u3092s3\u30a8\u30f3\u30c8\u30ea\u30dd\u30a4\u30f3\u30c8\u306e\u30a2\u30c9\u30ec\u30b9\u3068\u3057\u3066\u4f7f\u7528\u3057\u307e\u3059\u3002</li> <li>\u3053\u306e\u5909\u6570\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306f <code>https://s3.amazonaws.com</code> \u3067\u3059\u3002</li> </ul> </li> </ul>"},{"location":"ja/using-lagoon-advanced/using-harbor/harbor-settings/#_2","title":"\u30b3\u30f3\u30c6\u30ca\u56fa\u6709\u306e\u8a2d\u5b9a","text":"<p>\u6b21\u306e\u30b3\u30f3\u30c6\u30ca\u306f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u7528\u3057\u307e\u3059:</p> <ul> <li>HarborRegistry</li> <li>HarborRegistryCtl</li> <li>Harbor-Core</li> <li>Harbor-Database</li> <li>Harbor-Jobservice</li> <li>Harbor-Trivy</li> </ul> <p>\u6b21\u306e\u30b3\u30f3\u30c6\u30ca\u306f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u5fc5\u8981\u3068\u305b\u305a\u306b\u5b9f\u884c\u3067\u304d\u307e\u3059:</p> <ul> <li>Harbor-Nginx</li> <li>Harbor-Portal</li> <li>Harbor-Redis</li> </ul>"},{"location":"ja/using-lagoon-advanced/using-harbor/harbor-settings/harbor-core/","title":"\u30cf\u30fc\u30d0\u30fc\u30b3\u30a2","text":"<p>Harbor-Core\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u5185\u306e<code>/etc/core/app.conf</code>\u306b\u4f4d\u7f6e\u3059\u308b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u5fc5\u8981\u3067\u3001\u8d77\u52d5\u3057\u307e\u3059\u3002\u3053\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u884c\u308f\u308c\u308b\u4efb\u610f\u306e\u5909\u66f4\u306f\u4e00\u6642\u7684\u306a\u3082\u306e\u3067\u3001\u30dd\u30c3\u30c9\u304c\u518d\u8d77\u52d5\u3055\u308c\u308b\u3068\u6301\u7d9a\u3057\u307e\u305b\u3093\u3002</p> <p>\u3053\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u751f\u6210\u3055\u308c\u308bConfigmap\u306f\u3001<code>services/harbor-core/harbor-core.yml</code>\u30d5\u30a1\u30a4\u30eb\u306e\u4e2d\u306eLagoon\u5185\u306b\u4fdd\u5b58\u3055\u308c\u307e\u3059\u3002\u3053\u306econfigmap\u306b\u884c\u308f\u308c\u308b\u4efb\u610f\u306e\u5909\u66f4\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u306e\u518d\u8d77\u52d5\u3092\u307e\u305f\u3044\u3067\u6301\u7d9a\u3057\u307e\u3059\u3002</p>"},{"location":"ja/using-lagoon-advanced/using-harbor/harbor-settings/harbor-core/#_2","title":"\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9","text":"<ul> <li><code>_REDIS_URL</code><ul> <li>Redis\u30b5\u30fc\u30d0\u30fc\u3078\u306e\u63a5\u7d9a\u60c5\u5831\u3092harbor-core\u3068Chartmuseum\u30b5\u30fc\u30d3\u30b9\u306b\u4f1d\u3048\u307e\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>harbor-redis:6379,100,</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>_REDIS_URL_REG</code><ul> <li>harborregistry\u304cRedis\u30b5\u30fc\u30d0\u30fc\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3059\u308b\u3079\u304dURL\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>redis://harbor-redis:6379/2</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>ADMIRAL_URL</code><ul> <li>admiral\u30b5\u30fc\u30d3\u30b9\u306e\u5834\u6240\u3092harbor-core\u306b\u4f1d\u3048\u307e\u3059\u3002</li> <li>\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u306fLagoon\u306eHarbor\u5b9f\u88c5\u3067\u306f\u4f7f\u7528\u3055\u308c\u307e\u305b\u3093\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>NA</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>CFG_EXPIRATION</code><ul> <li>\u3053\u306e\u5024\u306f\u4f7f\u7528\u3055\u308c\u307e\u305b\u3093\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>5</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>CHART_CACHE_DRIVER</code><ul> <li>harbor-core\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u305f\u30c1\u30e3\u30fc\u30c8\u3092\u3069\u3053\u306b\u4fdd\u5b58\u3059\u308b\u304b\u3092\u4f1d\u3048\u307e\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>redis</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>CLAIR_ADAPTER_URL</code><ul> <li>harbor-core\u304c\u4f7f\u7528\u3059\u3079\u304dURL\u3002 * Harbor-trivy\u30b5\u30fc\u30d3\u30b9\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3057\u307e\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5024\u306f <code>http://harbor-trivy:8080</code> \u3067\u3059\u3002</li> </ul> </li> <li><code>CLAIR_DB</code><ul> <li>harborclair\u304c\u4f7f\u7528\u3059\u3079\u304d\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30bf\u30a4\u30d7\u3002</li> <li>\u3053\u306e\u5024\u306f\u4f7f\u7528\u3055\u308c\u305a\u3001\u53e4\u3044\u30b5\u30dd\u30fc\u30c8\u306e\u305f\u3081\u3060\u3051\u306b\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5024\u306f <code>postgres</code> \u3067\u3059\u3002</li> </ul> </li> <li><code>CLAIR_DB_HOST</code><ul> <li>\u3053\u306e\u5024\u306f\u4f7f\u7528\u3055\u308c\u305a\u3001\u53e4\u3044\u30b5\u30dd\u30fc\u30c8\u306e\u305f\u3081\u3060\u3051\u306b\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002</li> <li>harbor-core\u306bharborclair\u30b5\u30fc\u30d3\u30b9\u306e\u5834\u6240\u3092\u4f1d\u3048\u307e\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5024\u306f <code>harbor-database</code> \u3067\u3059\u3002</li> </ul> </li> <li><code>CLAIR_DB_PASSWORD</code><ul> <li>harborclair\u306epostgres\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3059\u308b\u30d1\u30b9\u30ef\u30fc\u30c9\u3002</li> <li>\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3059\u308b\u304bCI\u30c6\u30b9\u30c8\u4e2d\u306e\u5834\u5408\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5024\u306f <code>test123</code> \u3067\u3059\u3002</li> <li>\u3053\u306e\u5024\u306f\u4f7f\u7528\u3055\u308c\u305a\u3001\u53e4\u3044\u30b5\u30dd\u30fc\u30c8\u306e\u305f\u3081\u3060\u3051\u306b\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002</li> <li>\u3053\u306e\u5024\u306f\u3001Harbor\u304c\u521d\u3081\u3066\u7a3c\u50cd\u3059\u308bLagoon\u4e0a\u3067\u8a2d\u5b9a\u3055\u308c\u305f\u6642\u306b\u4f5c\u6210\u3055\u308c\u305f\u79d8\u5bc6\u304b\u3089\u53d6\u5f97\u3055\u308c\u307e\u3059\u3002</li> </ul> </li> <li><code>CLAIR_DB_PORT</code><ul> <li>harborclair\u304charborclair\u30b5\u30fc\u30d0\u30fc\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3059\u3079\u304d\u30dd\u30fc\u30c8\u3002</li> <li>\u3053\u306e\u5024\u306f\u4f7f\u7528\u3055\u308c\u305a\u3001\u53e4\u3044\u30b5\u30dd\u30fc\u30c8\u306e\u305f\u3081\u3060\u3051\u306b\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5024\u306f <code>5432</code> \u3067\u3059\u3002</li> </ul> </li> <li><code>CLAIR_DB_SSLMODE</code><ul> <li>harborclair\u304cpostgresql\u30b5\u30fc\u30d0\u30fc\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306bSSL\u3092\u4f7f\u7528\u3059\u3079\u304d\u304b\u3069\u3046\u304b\u3002</li> <li>\u3053\u306e\u5024\u306f\u4f7f\u7528\u3055\u308c\u305a\u3001\u53e4\u3044\u30b5\u30dd\u30fc\u30c8\u306e\u305f\u3081\u3060\u3051\u306b\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5024\u306f <code>disable</code> \u3067\u3059\u3002</li> </ul> </li> <li><code>CLAIR_DB *</code>USERNAME`<ul> <li>\u30e6\u30fc\u30b6\u30fc\u540dharborclair\u306f\u3001postgresql\u30b5\u30fc\u30d0\u30fc\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3059\u308b\u3079\u304d\u3067\u3059\u3002</li> <li>\u3053\u306e\u5024\u306f\u4f7f\u7528\u3055\u308c\u305a\u3001\u30ec\u30ac\u30b7\u30fc\u30b5\u30dd\u30fc\u30c8\u306e\u305f\u3081\u3060\u3051\u306b\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>postgres</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>CLAIR_HEALTH_CHECK_SERVER_URL</code><ul> <li>\u3053\u306e\u5024\u306f\u3001harbor-core\u304charbor-trivy\u30b5\u30fc\u30d3\u30b9\u306b\u5bfe\u3057\u3066\u5065\u5eb7\u30c1\u30a7\u30c3\u30af\u3092\u767a\u884c\u3059\u308b\u5834\u6240\u3092\u6307\u793a\u3057\u307e\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>http://harbor-trivy:8080</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>CLAIR_URL</code><ul> <li>harbor-core\u304charbor-trivy\u30b5\u30fc\u30d3\u30b9\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3059\u3079\u304dURL\u3067\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>http://harbor-trivy:6060</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>CONFIG_PATH</code><ul> <li>harbor-core\u304c\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u63a2\u3059\u3079\u304d\u5834\u6240\u3067\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>/etc/core/app.conf</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>CORE_SECRET</code><ul> <li>\u3053\u306e\u5024\u306f\u3001harbor-core\u306b\u63a5\u7d9a\u3059\u308b\u5404\u7a2e\u30b5\u30fc\u30d3\u30b9\u9593\u3067\u4e00\u81f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u4e8b\u524d\u5171\u6709\u30ad\u30fc\u3067\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\u3001Harbor\u304c\u30ed\u30fc\u30ab\u30eb\u3084CI\u30c6\u30b9\u30c8\u4e2d\u306b\u5b9f\u884c\u3055\u308c\u308b\u3068\u304d\u306b<code>secret123</code>\u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002</li> <li>\u3053\u306e\u5024\u306f\u3001Harbor\u304c\u521d\u3081\u3066Lagoon\u3067\u8a2d\u5b9a\u3055\u308c\u305f\u3068\u304d\u306b\u4f5c\u6210\u3055\u308c\u305f\u79d8\u5bc6\u304b\u3089\u53d6\u5f97\u3055\u308c\u307e\u3059\u3002</li> </ul> </li> <li><code>CORE_URL</code><ul> <li>harbor-core\u304c\u4ed6\u306eHarbor\u30b5\u30fc\u30d3\u30b9\u306b\u516c\u958b\u3057\u3001\u305d\u308c\u3089\u304charbor-core\u30b5\u30fc\u30d3\u30b9\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306eURL\u3067\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>http://harbor-core:8080</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>DATABASE_TYPE</code><ul> <li>Harbor\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30bf\u30a4\u30d7 \u4f7f\u7528\u3059\u308b\u3079\u304d\u3067\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f <code>postgresql</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>HARBOR_ADMIN_PASSWORD</code><ul> <li><code>admin</code> \u30e6\u30fc\u30b6\u30fc\u3092\u4f7f\u7528\u3057\u3066harbor\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3059\u308b\u3079\u304d\u30d1\u30b9\u30ef\u30fc\u30c9\u3067\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3059\u308b\u5834\u5408\u3084CI\u30c6\u30b9\u30c8\u4e2d\u306f <code>admin</code>\u3067\u3059\u3002</li> <li>\u3053\u306e\u5024\u306f\u3001Harbor\u304c\u6700\u521d\u306b\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3055\u308c\u305f\u969b\u306b\u4f5c\u6210\u3055\u308c\u305f\u79d8\u5bc6\u304b\u3089\u53d6\u5f97\u3055\u308c\u307e\u3059\u3002</li> </ul> </li> <li><code>HARBOR_NGINX_ENDPOINT</code><ul> <li>\u3053\u306e\u74b0\u5883\u5909\u6570\u306f\u3001harborregistry\u306b\u3001\u305d\u306eNGINX\u30a4\u30f3\u30b0\u30ec\u30b9\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3001harbor-nginx\u304c\u3069\u3053\u3067\u7a3c\u50cd\u3057\u3066\u3044\u308b\u304b\u3092\u901a\u77e5\u3057\u3001UI\u5185\u306e\u9069\u5207\u306a\u30d7\u30c3\u30b7\u30e5\u3068\u30d7\u30eb\u306e\u6307\u793a\u3092\u69cb\u7bc9\u3059\u308b\u305f\u3081\u306a\u3069\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\u3001\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3059\u308b\u5834\u5408\u3084CI\u30c6\u30b9\u30c8\u4e2d\u306f <code>http://harbor-nginx:8080</code>\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002</li> <li>Lagoon\u306f\u3001\u672c\u756a\u74b0\u5883\u3067\u5b9f\u884c\u3055\u308c\u308b\u3068\u304d\u306b\u3053\u306e\u5909\u6570\u3092\u81ea\u52d5\u7684\u306b\u53d6\u5f97\u3057\u8a2d\u5b9a\u3057\u3088\u3046\u3068\u8a66\u307f\u307e\u3059\u3002\u305d\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u5931\u6557\u3059\u308b\u3068\u3001\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u5b9f\u884c\u3067\u304d\u307e\u305b\u3093\u3002</li> </ul> </li> <li><code>HTTP_PROXY</code><ul> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\u7a7a\u306e\u6587\u5b57\u5217\u3067\u3059\u3002</li> </ul> </li> <li><code>HTTPS_PROXY</code><ul> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\u7a7a\u306e\u6587\u5b57\u5217\u3067\u3059\u3002</li> </ul> </li> <li><code>JOBSERVICE_SECRET</code><ul> <li>\u3053\u306e\u5024\u306f\u3001harbor-jobservice\u306b\u63a5\u7d9a\u3059\u308b\u5404\u7a2e\u30b5\u30fc\u30d3\u30b9\u9593\u3067\u4e00\u81f4\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u4e8b\u524d\u5171\u6709\u30ad\u30fc\u3067\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\u3001Harbor\u304c\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3055\u308c\u308b\u304bCI\u30c6\u30b9\u30c8\u4e2d\u306e\u5834\u5408\u3001<code>secret123</code>\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002</li> <li>\u3053\u306e\u5024\u306f\u3001Harbor\u304c\u6700\u521d\u306b\u8a2d\u5b9a\u3055\u308c\u305f\u969b\u306b\u4f5c\u6210\u3055\u308c\u305f\u79d8\u5bc6\u304b\u3089\u53d6\u5f97\u3055\u308c\u307e\u3059\u3002 \u306f\u3001Lagoon\u304c\u52d5\u4f5c\u3057\u3066\u3044\u308b\u72b6\u614b\u3067\u521d\u3081\u3066\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002</li> </ul> </li> <li><code>JOBSERVICE_URL</code><ul> <li>harbor-core\u304charbor-jobservice\u30b5\u30fc\u30d3\u30b9\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3059\u3079\u304dURL\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5024\u306f<code>http://harbor-jobservice:8080</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>LOG_LEVEL</code><ul> <li>harbor-core\u30b5\u30fc\u30d3\u30b9\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30ed\u30b0\u30ec\u30d9\u30eb\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5024\u306f<code>error</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>NO_PROXY</code><ul> <li>\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u30d7\u30ed\u30ad\u30b7\u3055\u308c\u308b\u3079\u304d\u3067\u306f\u306a\u3044\u30db\u30b9\u30c8\u306e\u30ea\u30b9\u30c8\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u306f<code>harbor-core,harbor-jobservice,harbor-database,harbor-trivy,harborregistry,harbor-portal,127.0.0.1,localhost,.local,.internal</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>PORTAL_URL</code><ul> <li>\u3053\u306e\u5024\u306f\u3001\u30b5\u30fc\u30d3\u30b9\u304charbor-portal\u30b5\u30fc\u30d3\u30b9\u306b\u63a5\u7d9a\u3059\u308b\u5834\u6240\u3092\u6307\u793a\u3057\u307e\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5024\u306f<code>http://harbor-portal:8080</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>POSTGRESQL_DATABASE</code><ul> <li>harbor-core\u304cpostgresql\u30b5\u30fc\u30d0\u30fc\u306b\u63a5\u7d9a\u3059\u308b\u969b\u306b\u4f7f\u7528\u3059\u3079\u304dpostgres\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5024\u306f<code>registry</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>POSTGRESQL_HOST</code><ul> <li>harbor-core\u304cpostgresql\u30b5\u30fc\u30d0\u30fc\u306b\u63a5\u7d9a\u3059\u3079\u304d\u5834\u6240\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5024\u306f<code>harbor-database</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>POSTGRESQL_MAX_IDLE_CONNS</code><ul> <li>harbor-core\u304cpostgresql\u30b5\u30fc\u30d0\u30fc\u306b\u5bfe\u3057\u3066\u958b\u653e\u3057\u3066\u304a\u304f\u3079\u304d\u6700\u5927\u306e\u30a2\u30a4\u30c9\u30eb\u63a5\u7d9a\u6570\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5024\u306f<code>50</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>POSTGRESQL_MAX_OPEN_CONNS</code><ul> <li>harbor-core\u304c\u958b\u304f\u3079\u304d\u6700\u5927\u306e\u63a5\u7d9a\u6570\u3002 -\u30b3\u30a2\u306fpostgresql\u30b5\u30fc\u30d0\u30fc\u306b\u63a5\u7d9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>100</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>POSTGRESQL_PASSWORD</code><ul> <li>Harbor\u304cpostgresql\u30b5\u30fc\u30d0\u30fc\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3059\u3079\u304d\u30d1\u30b9\u30ef\u30fc\u30c9\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\u30e9\u30f3\u30c0\u30e0\u306b\u751f\u6210\u3055\u308c\u305f\u5024\u3067\u3059\u3002</li> </ul> </li> <li><code>POSTGRESQL_PORT</code><ul> <li>harbor-core\u304cpostgresql\u30b5\u30fc\u30d0\u30fc\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3059\u3079\u304d\u30dd\u30fc\u30c8\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>5432</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>POSTGRESQL_USERNAME</code><ul> <li>harbor-core\u304cpostgresql\u30b5\u30fc\u30d0\u30fc\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3059\u3079\u304d\u30e6\u30fc\u30b6\u30fc\u540d\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>postgres</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>POSTGRESQL_SSLMODE</code><ul> <li>harbor-core\u304cSSL\u3092\u4f7f\u7528\u3057\u3066postgresql\u30b5\u30fc\u30d0\u30fc\u306b\u63a5\u7d9a\u3059\u3079\u304d\u304b\u3069\u3046\u304b\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>disable</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>REGISTRY_HTTP_SECRET</code><ul> <li>\u3053\u306e\u5024\u306f\u3001harborregistry\u306b\u63a5\u7d9a\u3059\u308b\u5404\u30b5\u30fc\u30d3\u30b9\u9593\u3067\u4e00\u81f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u4e8b\u524d\u5171\u6709\u30ad\u30fc\u3067\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\u3001Harbor\u304c\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3055\u308c\u308b\u304bCI\u30c6\u30b9\u30c8\u4e2d\u306b<code>secret123</code>\u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002</li> <li>\u3053\u306e\u5024\u306f\u3001Harbor\u304c\u521d\u3081\u3066\u7a3c\u50cd\u3057\u3066\u3044\u308bLagoon\u306b\u8a2d\u5b9a\u3055\u308c\u305f\u3068\u304d\u306b\u751f\u6210\u3055\u308c\u308b\u79d8\u5bc6\u304b\u3089\u53d6\u5f97\u3055\u308c\u307e\u3059\u3002</li> </ul> </li> <li><code>REGISTRY_STORAGE_PROVIDER_NAME</code><ul> <li>harborregistry\u304c\u4f7f\u7528\u3059\u3079\u304d\u30b9\u30c8\u30ec\u30fc\u30b8\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>s3</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>REGISTRY_URL</code><ul> <li>harbor-core\u304charborregistry\u30b5\u30fc\u30d3\u30b9\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3059\u3079\u304dURL\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f * \u5024\u306f<code>http://harborregistry:5000</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>REGISTRYCTL_URL</code><ul> <li>\u3053\u306e\u5024\u306f\u3001\u30b5\u30fc\u30d3\u30b9\u304charborregistryctl\u30b5\u30fc\u30d3\u30b9\u306b\u63a5\u7d9a\u3059\u308b\u5834\u6240\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>http://harborregistryctl:8080</code>\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002</li> </ul> </li> <li><code>ROBOT_TOKEN_DURATION</code><ul> <li>\u3053\u306e\u5024\u306f\u3001\u5404\u554f\u984c\u306e\u30ed\u30dc\u30c3\u30c8\u30c8\u30fc\u30af\u30f3\u304c\u6709\u52b9\u3067\u3042\u308b\u3079\u304d\u65e5\u6570\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>999</code>\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002</li> </ul> </li> <li><code>SYNC_REGISTRY</code><ul> <li>\u3053\u306e\u5024\u306f\u4f7f\u7528\u3055\u308c\u307e\u305b\u3093\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>false</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>TOKEN_SERVICE_URL</code><ul> <li>harbor-core\u30b5\u30fc\u30d3\u30b9\u304c\u4ed6\u306e\u30b5\u30fc\u30d3\u30b9\u306b\u516c\u958b\u3059\u308bURL\u3067\u3001\u3053\u308c\u306b\u3088\u308aJWT\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>http://harbor-core:8080/service/token</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>TRIVY_ADAPTER_URL</code><ul> <li>harbor-core\u30b5\u30fc\u30d3\u30b9\u304charbor-trivy\u30b5\u30fc\u30d3\u30b9\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3059\u308bURL\u3067\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>http://harbor-trivy:8080</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>WITH_CHARTMUSEUM</code><ul> <li>Chartmuseum\u30b5\u30fc\u30d3\u30b9\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092harbor-core\u306b\u4f1d\u3048\u307e\u3059\u3002</li> <li>\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u306fLagoon\u306eHarbor\u5b9f\u88c5\u3067\u306f\u4f7f\u7528\u3055\u308c\u307e\u305b\u3093\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>false</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>WITH_CLAIR</code><ul> <li>harborclair\u30b5\u30fc\u30d3\u30b9\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092harbor-core\u306b\u4f1d\u3048\u307e\u3059\u3002</li> <li>Lagoon\u306fHarbor\u306e\u5b9f\u88c5\u3067\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>true</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>WITH_NOTARY</code><ul> <li>harbor-core\u306b - \u30ce\u30fc\u30bf\u30ea\u30fc\u30b5\u30fc\u30d3\u30b9\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306ecore\u3002</li> <li>\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u3001Lagoon\u304c\u5b9f\u88c5\u3057\u305fHarbor\u3067\u306f\u4f7f\u7528\u3055\u308c\u307e\u305b\u3093\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>false</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>WITH_TRIVY</code><ul> <li>Trivy\u30b5\u30fc\u30d3\u30b9\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092harbor-core\u306b\u4f1d\u3048\u307e\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>true</code>\u3067\u3059\u3002</li> </ul> </li> </ul>"},{"location":"ja/using-lagoon-advanced/using-harbor/harbor-settings/harbor-database/","title":"Harbor-\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9","text":"<p>Harbor-\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306f\u8d77\u52d5\u3059\u308b\u305f\u3081\u306b\u7279\u5b9a\u306e\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u3001\u305d\u308c\u3089\u306f<code>services/harbor-database/harbor-core.yml</code>\u30d5\u30a1\u30a4\u30eb\u3067\u8aac\u660e\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u306b\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u5185\u306b\u4fdd\u5b58\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/using-lagoon-advanced/using-harbor/harbor-settings/harbor-database/#_1","title":"\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9","text":"<ul> <li><code>POSTGRES_DB</code><ul> <li>Postgres\u30b5\u30fc\u30d3\u30b9\u3092\u521d\u671f\u5316\u3059\u308b\u969b\u306b\u8a2d\u5b9a\u3055\u308c\u308b\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>postgres</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>POSTGRES_PASSWORD</code><ul> <li>Postgres\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30eb\u30fc\u30c8\u30d1\u30b9\u30ef\u30fc\u30c9\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>test123</code>\u3067\u3059\u3002</li> <li>\u3053\u306e\u5024\u306f\u3001Harbor\u304c\u52d5\u4f5c\u3057\u3066\u3044\u308bLagoon\u4e0a\u3067\u521d\u3081\u3066\u8a2d\u5b9a\u3055\u308c\u305f\u3068\u304d\u306b\u4f5c\u6210\u3055\u308c\u305f\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u304b\u3089\u53d6\u5f97\u3055\u308c\u307e\u3059\u3002</li> </ul> </li> <li><code>POSTGRES_USER</code><ul> <li>Postgres\u30b5\u30fc\u30d3\u30b9\u3092\u521d\u671f\u5316\u3059\u308b\u969b\u306b\u8a2d\u5b9a\u3055\u308c\u308b\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30e6\u30fc\u30b6\u30fc\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>postgres</code>\u3067\u3059\u3002</li> </ul> </li> </ul>"},{"location":"ja/using-lagoon-advanced/using-harbor/harbor-settings/harbor-jobservice/","title":"Harbor-Jobservice","text":"<p>Harbor-Jobservice\u306f\u3001\u8d77\u52d5\u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u5fc5\u8981\u3068\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u30b3\u30f3\u30c6\u30ca\u5185\u306e<code>/etc/jobservice/config.yml</code>\u306b\u4f4d\u7f6e\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3078\u306e\u5909\u66f4\u306f\u4e00\u6642\u7684\u306a\u3082\u306e\u3067\u3001\u30dd\u30c3\u30c9\u304c\u518d\u8d77\u52d5\u3055\u308c\u308b\u3068\u6301\u7d9a\u3057\u307e\u305b\u3093\u3002</p> <p>\u3053\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u751f\u6210\u3055\u308c\u308b\u5143\u3068\u306a\u308bconfigmap\u306f\u3001Lagoon\u5185\u306e<code>services/harbor-jobservice/harbor-jobservice.yml</code>\u30d5\u30a1\u30a4\u30eb\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u306econfigmap\u3078\u306e\u5909\u66f4\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u306e\u518d\u8d77\u52d5\u3092\u8d8a\u3048\u3066\u6301\u7d9a\u3057\u307e\u3059\u3002</p>"},{"location":"ja/using-lagoon-advanced/using-harbor/harbor-settings/harbor-jobservice/#_1","title":"\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9","text":"<ul> <li><code>CORE_URL</code><ul> <li>\u3053\u306e\u5024\u306f<code>harbor-jobservice</code>\u306b<code>harbor-core</code>\u304c\u3069\u3053\u306b\u3042\u308b\u304b\u3092\u4f1d\u3048\u307e\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>http://harbor-core:8080</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>CORE_SECRET</code><ul> <li>\u3053\u306e\u5024\u306f\u3001<code>harbor-core</code>\u306b\u63a5\u7d9a\u3059\u308b\u5404\u7a2e\u30b5\u30fc\u30d3\u30b9\u9593\u3067\u4e00\u81f4\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u4e8b\u524d\u5171\u6709\u30ad\u30fc\u3067\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\u3001Harbor\u304c\u30ed\u30fc\u30ab\u30eb\u307e\u305f\u306fCI\u30c6\u30b9\u30c8\u4e2d\u306b\u5b9f\u884c\u3055\u308c\u308b\u3068\u304d\u306b<code>secret123</code>\u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002</li> <li>\u3053\u306e\u5024\u306f\u3001Harbor\u304c\u5b9f\u884c\u4e2d\u306eLagoon\u4e0a\u3067\u521d\u3081\u3066\u8a2d\u5b9a\u3055\u308c\u305f\u3068\u304d\u306b\u4f5c\u6210\u3055\u308c\u305f\u79d8\u5bc6\u304b\u3089\u53d6\u5f97\u3055\u308c\u307e\u3059\u3002</li> </ul> </li> <li><code>HTTP_PROXY</code><ul> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\u7a7a\u306e\u6587\u5b57\u5217\u3067\u3059\u3002</li> </ul> </li> <li><code>HTTPS_PROXY</code><ul> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\u7a7a\u306e\u6587\u5b57\u5217\u3067\u3059\u3002</li> </ul> </li> <li><code>JOBSERVICE_SECRET</code><ul> <li>\u3053\u306e\u5024\u306f\u3001\u5404\u7a2e\u30b5\u30fc\u30d3\u30b9\u9593\u3067\u4e00\u81f4\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u4e8b\u524d\u5171\u6709\u30ad\u30fc\u3067\u3059\u3002 <code>harbor-jobservice</code>\u306b\u63a5\u7d9a\u3057\u307e\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\u3001Harbor\u304c\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u304b\u3001CI\u30c6\u30b9\u30c8\u4e2d\u306e\u5834\u5408\u306f<code>secret123</code>\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002</li> <li>\u3053\u306e\u5024\u306f\u3001Harbor\u304c\u5b9f\u884c\u4e2d\u306eLagoon\u306b\u521d\u3081\u3066\u8a2d\u5b9a\u3055\u308c\u305f\u3068\u304d\u306b\u4f5c\u6210\u3055\u308c\u305f\u79d8\u5bc6\u304b\u3089\u53d6\u5f97\u3055\u308c\u307e\u3059\u3002</li> </ul> </li> <li><code>LOG_LEVEL</code><ul> <li>\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u304c\u4f7f\u7528\u3059\u308b\u30ed\u30b0\u30ec\u30d9\u30eb\u3067\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>error</code>\u3067\u3059\u3002<ul> <li>\u975e\u5e38\u306b\u8a73\u7d30\u306a\u30ed\u30b0\u3092\u6709\u52b9\u306b\u3059\u308b\u306b\u306f\u3001<code>debug</code>\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002</li> </ul> </li> </ul> </li> <li><code>NO_PROXY</code><ul> <li>\u305d\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u30d7\u30ed\u30ad\u30b7\u5316\u3055\u308c\u308b\u3079\u304d\u3067\u306f\u306a\u3044\u30db\u30b9\u30c8\u306e\u30ea\u30b9\u30c8\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u306f <code>harbor-core,harbor-jobservice,harbor-database,harbor-trivy,harborregistry,harbor-portal,127.0.0.1,localhost,.local,.internal</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>REGISTRY_CONTROLLER_URL</code><ul> <li>\u3053\u306e\u5024\u306f\u3001\u30b5\u30fc\u30d3\u30b9\u304c<code>harborregistryctl</code>\u30b5\u30fc\u30d3\u30b9\u306b\u63a5\u7d9a\u3059\u308b\u5834\u6240\u3092\u6307\u793a\u3057\u307e\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f <code>http://harborregistryctl:8080</code>\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002</li> </ul> </li> <li><code>SCANNER_LOG_LEVEL</code><ul> <li>\u30b9\u30ad\u30e3\u30cb\u30f3\u30b0\u30b5\u30fc\u30d3\u30b9\u304c\u4f7f\u7528\u3059\u308b\u30ed\u30b0\u30ec\u30d9\u30eb\u3067\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>error</code>\u3067\u3059\u3002<ul> <li>\u975e\u5e38\u306b\u8a73\u7d30\u306a\u30ed\u30b0\u3092\u6709\u52b9\u306b\u3059\u308b\u306b\u306f\u3001<code>debug</code>\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002</li> </ul> </li> </ul> </li> <li><code>SCANNER_STORE_REDIS_URL</code><ul> <li>\u3053\u306e\u5024\u306f\u3001<code>harbor-trivy</code>\u304cRedis\u30b9\u30c8\u30a2\u306b\u63a5\u7d9a\u3059\u308b\u65b9\u6cd5\u3092\u6307\u793a\u3057\u307e\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f <code>redis://harbor-redis:6379/4</code>\u3067\u3059\u3002</li> </ul> </li> </ul>"},{"location":"ja/using-lagoon-advanced/using-harbor/harbor-settings/harbor-trivy/","title":"Harbor-Trivy","text":"<p>Harbor-Trivy\u306f\u7279\u5b9a\u306e\u74b0\u5883\u5909\u6570\u3092\u4ecb\u3057\u3066\u8a2d\u5b9a\u3055\u308c\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f\u4f7f\u7528\u3057\u307e\u305b\u3093\u3002</p>"},{"location":"ja/using-lagoon-advanced/using-harbor/harbor-settings/harbor-trivy/#environment-variables","title":"\u74b0\u5883\u5909\u6570","text":"<ul> <li><code>SCANNER_LOG_LEVEL</code><ul> <li>\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u304c\u4f7f\u7528\u3059\u308b\u30ed\u30b0\u30ec\u30d9\u30eb\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>error</code>\u3067\u3059\u3002<ul> <li>\u975e\u5e38\u306b\u8a73\u7d30\u306a\u30ed\u30b0\u3092\u6709\u52b9\u306b\u3059\u308b\u306b\u306f\u3001\u3053\u308c\u3092<code>debug</code>\u306b\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002</li> </ul> </li> </ul> </li> <li><code>SCANNER_STORE_REDIS_URL</code><ul> <li>\u3053\u306e\u5024\u306fharbor-trivy\u306b\u3001\u81ea\u8eab\u306eRedis\u30b9\u30c8\u30a2\u3078\u306e\u63a5\u7d9a\u65b9\u6cd5\u3092\u6307\u793a\u3057\u307e\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>redis://harbor-redis:6379/4</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>SCANNER_JOB_QUEUE_REDIS_URL</code><ul> <li>\u3053\u306e\u5024\u306fharbor-trivy\u306b\u3001\u81ea\u8eab\u306eRedis\u30b9\u30c8\u30a2\u3078\u306e\u63a5\u7d9a\u65b9\u6cd5\u3092\u6307\u793a\u3057\u307e\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>redis://harbor-redis:6379/4</code>\u3067\u3059\u3002</li> </ul> </li> <li><code>SCANNER_TRIVY_VULN_TYPE</code><ul> <li>\u3053\u306e\u5024\u306fharbor-trivy\u306b\u3001\u4f55\u30bf\u30a4\u30d7\u306e\u8106\u5f31\u6027\u3092\u691c\u7d22\u3059\u3079\u304d\u304b\u3092\u6307\u793a\u3057\u307e\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f<code>os,library</code>\u3067\u3059\u3002</li> </ul> </li> </ul>"},{"location":"ja/using-lagoon-advanced/using-harbor/harbor-settings/harborregistry/","title":"HarborRegistry","text":"<p>HarborRegistry\u306f\u3001\u8d77\u52d5\u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u5fc5\u8981\u3068\u3057\u3001\u305d\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f\u30b3\u30f3\u30c6\u30ca\u5185\u306e <code>/etc/registry/config.yml</code> \u306b\u4f4d\u7f6e\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3078\u306e\u5909\u66f4\u306f\u4e00\u6642\u7684\u306a\u3082\u306e\u3067\u3042\u308a\u3001\u30dd\u30c3\u30c9\u304c\u518d\u8d77\u52d5\u3055\u308c\u308b\u3068\u6301\u7d9a\u3057\u307e\u305b\u3093\u3002</p> <p>\u3053\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f <code>services/harborregistry/harborregistry.yml</code> \u30d5\u30a1\u30a4\u30eb\u5185\u306b\u4fdd\u5b58\u3055\u308c\u3001 <code>/etc/registry/pre-config.yml</code> \u3068\u3057\u3066\u30b3\u30f3\u30c6\u30ca\u5185\u306b\u30ed\u30fc\u30c9\u3055\u308c\u307e\u3059\u3002</p> <p>\u30ab\u30b9\u30bf\u30e0\u30b3\u30f3\u30c6\u30ca\u30a8\u30f3\u30c8\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8 <code>services/harborregistry/entrypoint.sh</code> \u306f\u3001\u63d0\u4f9b\u3055\u308c\u305f\u74b0\u5883\u5909\u6570\u3092\u3053\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u8ee2\u9001\u3057\u3001\u7d50\u679c\u3092 <code>/etc/registry/config.yml</code> \u3068\u3057\u3066\u4fdd\u5b58\u3057\u307e\u3059\u3002</p>"},{"location":"ja/using-lagoon-advanced/using-harbor/harbor-settings/harborregistry/#_1","title":"\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9","text":"<ul> <li><code>CORE_SECRET</code><ul> <li>\u3053\u306e\u5024\u306f\u3001<code>harbor-core</code> \u306b\u63a5\u7d9a\u3059\u308b\u69d8\u3005\u306a\u30b5\u30fc\u30d3\u30b9\u9593\u3067\u4e00\u81f4\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u4e8b\u524d\u5171\u6709\u30ad\u30fc\u3067\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5024\u306f\u3001Harbor\u304c\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3055\u308c\u305f\u308aCI\u30c6\u30b9\u30c8\u4e2d\u306b\u8a2d\u5b9a\u3055\u308c\u308b <code>secret123</code> \u3067\u3059\u3002</li> <li>\u3053\u306e\u5024\u306f\u3001Harbor\u304c\u5b9f\u884c\u4e2d\u306eLagoon\u306b\u521d\u3081\u3066\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3055\u308c\u305f\u3068\u304d\u306b\u4f5c\u6210\u3055\u308c\u308b\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u304b\u3089\u53d6\u5f97\u3055\u308c\u307e\u3059\u3002</li> </ul> </li> <li><code>HARBOR_NGINX_ENDPOINT</code><ul> <li>\u3053\u306e\u74b0\u5883\u5909\u6570\u306f\u3001<code>harborregistry</code>\u306b\u3001\u305d\u306eNGINX\u30a4\u30f3\u30b0\u30ec\u30b9\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc <code>harbor-nginx</code>\u304c\u3069\u3053\u3067\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u304b\u3092\u901a\u77e5\u3057\u3001UI\u5185\u3067\u9069\u5207\u306a\u30d7\u30c3\u30b7\u30e5\u3068\u30d7\u30eb\u306e\u6307\u793a\u3092\u69cb\u7bc9\u3059\u308b\u305f\u3081\u3001\u305d\u306e\u4ed6\u306e\u4e8b\u9805\u3092\u901a\u77e5\u3057\u307e\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5024\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059 \u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3057\u305f\u308aCI\u30c6\u30b9\u30c8\u4e2d\u306b\u306f\u3001<code>http://harbor-nginx:8080</code>\u306b\u306a\u308a\u307e\u3059\u3002</li> <li>\u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u74b0\u5883\u3067Lagoon\u304c\u81ea\u52d5\u7684\u306b\u3053\u306e\u5909\u6570\u3092\u53d6\u5f97\u3057\u30bb\u30c3\u30c8\u3057\u3088\u3046\u3068\u3057\u307e\u3059\u3002\u305d\u306e\u30d7\u30ed\u30bb\u30b9\u306b\u5931\u6557\u3059\u308b\u3068\u3001\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u5b9f\u884c\u306b\u5931\u6557\u3057\u307e\u3059\u3002</li> </ul> </li> <li><code>JOBSERVICE_SECRET</code><ul> <li>\u3053\u306e\u5024\u306f\u3001<code>harbor-jobservice</code>\u306b\u63a5\u7d9a\u3059\u308b\u5404\u7a2e\u30b5\u30fc\u30d3\u30b9\u9593\u3067\u4e00\u81f4\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u4e8b\u524d\u5171\u6709\u30ad\u30fc\u3067\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\u3001Harbor\u304c\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3055\u308c\u308b\u304bCI\u30c6\u30b9\u30c8\u4e2d\u306b<code>secret123</code>\u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002</li> <li>\u3053\u306e\u5024\u306f\u3001Harbor\u304c\u6700\u521d\u306b\u7a3c\u50cd\u4e2d\u306eLagoon\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u305f\u3068\u304d\u306b\u4f5c\u6210\u3055\u308c\u305f\u79d8\u5bc6\u304b\u3089\u53d6\u5f97\u3055\u308c\u307e\u3059\u3002</li> </ul> </li> <li><code>REGISTRY_HTTP_SECRET</code><ul> <li>\u3053\u306e\u5024\u306f\u3001<code>harborregistry</code>\u306b\u63a5\u7d9a\u3059\u308b\u5404\u7a2e\u30b5\u30fc\u30d3\u30b9\u9593\u3067\u4e00\u81f4\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u4e8b\u524d\u5171\u6709\u30ad\u30fc\u3067\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\u3001Harbor\u304c\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3055\u308c\u308b\u304bCI\u30c6\u30b9\u30c8\u4e2d\u306b<code>secret123</code>\u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002</li> <li>\u3053\u306e\u5024\u306f\u3001Harbor\u304c\u6700\u521d\u306b\u7a3c\u50cd\u4e2d\u306eLagoon\u4e0a\u306b\u8a2d\u5b9a\u3055\u308c\u305f\u3068\u304d\u306b\u4f5c\u6210\u3055\u308c\u305f\u79d8\u5bc6\u304b\u3089\u53d6\u5f97\u3055\u308c\u307e\u3059\u3002</li> </ul> </li> <li><code>REGISTRY_REDIS_PASSWORD</code><ul> <li>\u3053\u306e\u74b0\u5883\u5909\u6570\u306f\u3001<code>harborregistryctl</code>\u304cRedis\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3059\u3079\u304d\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u6307\u793a\u3057\u307e\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\u7a7a\u306e\u6587\u5b57\u5217\u3067\u3059\u3002</li> </ul> </li> </ul>"},{"location":"ja/using-lagoon-advanced/using-harbor/harbor-settings/harborregistryctl/","title":"HarborRegistryCtl","text":"<p>HarborRegistryCtl\u306f\u8d77\u52d5\u3059\u308b\u305f\u3081\u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u5fc5\u8981\u3068\u3057\u3001\u305d\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f\u30b3\u30f3\u30c6\u30ca\u5185\u306e<code>/etc/registryctl/config.yml</code>\u306b\u4f4d\u7f6e\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3078\u306e\u5909\u66f4\u306f\u4e00\u6642\u7684\u306a\u3082\u306e\u3067\u3042\u308a\u3001\u30dd\u30c3\u30c9\u304c\u518d\u8d77\u52d5\u3055\u308c\u308b\u3068\u6301\u7d9a\u3057\u307e\u305b\u3093\u3002</p> <p>\u3053\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u751f\u6210\u3055\u308c\u308b\u5143\u3068\u306a\u308bconfigmap\u306f\u3001Lagoon\u5185\u306e<code>services/harborregistryctl/harborregistry.yml</code>\u30d5\u30a1\u30a4\u30eb\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u306econfigmap\u3078\u306e\u5909\u66f4\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u304c\u518d\u8d77\u52d5\u3055\u308c\u3066\u3082\u4fdd\u6301\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/using-lagoon-advanced/using-harbor/harbor-settings/harborregistryctl/#_1","title":"\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9","text":"<ul> <li><code>CORE_SECRET</code><ul> <li>\u3053\u306e\u5024\u306f\u3001<code>harbor-core</code>\u306b\u63a5\u7d9a\u3059\u308b\u5404\u7a2e\u30b5\u30fc\u30d3\u30b9\u9593\u3067\u4e00\u81f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u4e8b\u524d\u5171\u6709\u30ad\u30fc\u3067\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\u3001Harbor\u304c\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3055\u308c\u305f\u308aCI\u30c6\u30b9\u30c8\u4e2d\u306b\u8a2d\u5b9a\u3055\u308c\u308b<code>secret123</code>\u3067\u3059\u3002</li> <li>\u3053\u306e\u5024\u306f\u3001Harbor\u304c\u7a3c\u50cd\u4e2d\u306eLagoon\u306b\u521d\u3081\u3066\u8a2d\u5b9a\u3055\u308c\u305f\u969b\u306b\u4f5c\u6210\u3055\u308c\u308b\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u304b\u3089\u53d6\u5f97\u3055\u308c\u307e\u3059\u3002</li> </ul> </li> <li><code>JOBSERVICE_SECRET</code><ul> <li>\u3053\u306e\u5024\u306f\u3001<code>harbor-jobservice</code>\u306b\u63a5\u7d9a\u3059\u308b\u5404\u7a2e\u30b5\u30fc\u30d3\u30b9\u9593\u3067\u4e00\u81f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u4e8b\u524d\u5171\u6709\u30ad\u30fc\u3067\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\u3001Harbor\u304c\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3055\u308c\u305f\u308aCI\u30c6\u30b9\u30c8\u4e2d\u306b\u8a2d\u5b9a\u3055\u308c\u308b<code>secret123</code>\u3067\u3059\u3002</li> <li>\u3053\u306e\u5024\u306f\u3001Harbor\u304c\u7a3c\u50cd\u4e2d\u306eLagoon\u306b\u521d\u3081\u3066\u8a2d\u5b9a\u3055\u308c\u305f\u969b\u306b\u4f5c\u6210\u3055\u308c\u308b\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u304b\u3089\u53d6\u5f97\u3055\u308c\u307e\u3059\u3002</li> </ul> </li> <li><code>REGISTRY_HTTP_SECRET</code><ul> <li>\u3053\u306e\u5024\u306f\u3001 <code>harborregistry</code>\u306b\u63a5\u7d9a\u3059\u308b\u5404\u7a2e\u30b5\u30fc\u30d3\u30b9\u9593\u3067\u4e00\u81f4\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u4e8b\u524d\u5171\u6709\u30ad\u30fc\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\u3001Harbor\u304c\u30ed\u30fc\u30ab\u30eb\u307e\u305f\u306fCI\u30c6\u30b9\u30c8\u4e2d\u306b\u5b9f\u884c\u3055\u308c\u308b\u3068\u304d\u306b<code>secret123</code>\u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002</li> <li>\u3053\u306e\u5024\u306f\u3001Harbor\u304c\u52d5\u4f5c\u4e2d\u306eLagoon\u306b\u521d\u3081\u3066\u8a2d\u5b9a\u3055\u308c\u305f\u3068\u304d\u306b\u4f5c\u6210\u3055\u308c\u305f\u79d8\u5bc6\u304b\u3089\u53d6\u5f97\u3055\u308c\u307e\u3059\u3002</li> </ul> </li> <li><code>REGISTRY_REDIS_PASSWORD</code><ul> <li>\u3053\u306e\u74b0\u5883\u5909\u6570\u306f\u3001<code>harborregistryctl</code>\u306bRedis\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3059\u3079\u304d\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u4f1d\u3048\u307e\u3059\u3002</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\u7a7a\u6587\u5b57\u5217\u3067\u3059\u3002</li> </ul> </li> </ul>"},{"location":"ja/using-lagoon-the-basics/","title":"Lagoon\u306e\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9 - \u6982\u8981","text":"<p>\u3053\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u306f\u3001Lagoon\u306e\u57fa\u672c\u7684\u306a\u7279\u5fb4\u3068\u6a5f\u80fd\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\u3053\u308c\u3089\u306b\u6163\u308c\u3066\u3044\u308b\u65b9\u306f\u3001Lagoon\u306e\u9ad8\u5ea6\u306a\u4f7f\u3044\u65b9\u306b\u9032\u3093\u3067\u304f\u3060\u3055\u3044\u3002</p> <p>\u30d8\u30eb\u30d7\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001Lagoon\u306e\u7ba1\u7406\u8005\u306b\u9023\u7d61\u3059\u308b\u304b\u3001\u79c1\u305f\u3061\u306eDiscord\u3067\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306e\u30e1\u30f3\u30d0\u30fc\u3068\u30e1\u30f3\u30c6\u30ca\u306b\u554f\u3044\u5408\u308f\u305b\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/using-lagoon-the-basics/#_1","title":"\u5fc5\u8981\u6761\u4ef6","text":""},{"location":"ja/using-lagoon-the-basics/#docker","title":"Docker","text":"<p>Lagoon\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u5b9f\u884c\u3059\u308b\u306b\u306f\u3001\u30b7\u30b9\u30c6\u30e0\u304cDocker\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306e\u8981\u4ef6\u3092\u6e80\u305f\u3057\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u30ef\u30fc\u30af\u30b9\u30c6\u30fc\u30b7\u30e7\u30f3\u306b\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306eDocker\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u3092\u304a\u3059\u3059\u3081\u3057\u307e\u3059\u3002Docker\u306f\u3053\u3061\u3089\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u307e\u3059\u3002\u307e\u305f\u3001Docker\u306b\u306f\u6700\u4f4e\u3067\u30824CPUs\u30684GB RAM\u3092\u5272\u308a\u5f53\u3066\u308b\u3053\u3068\u3092\u304a\u3059\u3059\u3081\u3057\u307e\u3059\u3002</p>"},{"location":"ja/using-lagoon-the-basics/#_2","title":"\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u74b0\u5883","text":"<p>pygmy\u3001Lando\u3001DDEV\u304b\u3089\u9078\u3076\u3053\u3068\u304c\u3067\u304d\u307e\u3059 - \u9078\u629e\u306f\u3042\u306a\u305f\u6b21\u7b2c\u3067\u3059\uff01</p> <p>Lagoon\u3068\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u74b0\u5883\u306b\u3064\u3044\u3066\u3082\u3063\u3068\u5b66\u3073\u307e\u3057\u3087\u3046\u3002</p>"},{"location":"ja/using-lagoon-the-basics/#step-by-step-guides","title":"\u30b9\u30c6\u30c3\u30d7\u30d0\u30a4\u30b9\u30c6\u30c3\u30d7\u306e\u30ac\u30a4\u30c9","text":"<ul> <li>\u4e00\u822c: Lagoon\u3067\u65b0\u3057\u3044\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8a2d\u5b9a\u3059\u308b</li> <li>\u4e00\u822c: \u521d\u3081\u3066\u306e\u30c7\u30d7\u30ed\u30a4</li> <li>Drupal: Drupal\u3067\u306e\u521d\u3081\u3066\u306e\u30c7\u30d7\u30ed\u30a4</li> <li>Drupal: Drupal\u30b5\u30a4\u30c8\u3092Lagoon\u5bfe\u5fdc\u306b\u3059\u308b</li> <li>\u3059\u3079\u3066: Lagoon\u306e\u30d3\u30eb\u30c9\u3068\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u30d7\u30ed\u30bb\u30b9</li> </ul>"},{"location":"ja/using-lagoon-the-basics/#lagoon","title":"Lagoon\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u6982\u8981","text":""},{"location":"ja/using-lagoon-the-basics/#lagoonyml","title":"<code>.lagoon.yml</code>","text":"<p>\u3053\u308c\u306fLagoon\u304c\u4f55\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3079\u304d\u304b\u3001\u307e\u305f\u591a\u304f\u306e\u4ed6\u306e\u4e8b\u67c4\u3092\u7406\u89e3\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3059\u308b\u4e3b\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002<code>.lagoon.yml</code>\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/using-lagoon-the-basics/#docker-composeyml","title":"<code>docker-compose.yml</code>","text":"<p>\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f<code>Docker Compose</code>\u306b\u3088\u3063\u3066\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u74b0\u5883\u3092\u958b\u59cb\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002Lagoon\u3082\u3053\u308c\u3092\u4f7f\u7528\u3057\u3066\u3001\u3069\u306e\u30b5\u30fc\u30d3\u30b9\u304c\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u3079\u304d\u304b\u3001\u3069\u306e\u30bf\u30a4\u30d7\u3067\u3001\u3069\u306e\u3088\u3046\u306b\u30d3\u30eb\u30c9\u3059\u308b\u304b\u3092\u7406\u89e3\u3057\u307e\u3059\u3002\u3053\u308c\u306f<code>labels</code>\u3092\u901a\u3058\u3066\u884c\u308f\u308c\u307e\u3059\u3002docker-compose.yml\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/using-lagoon-the-basics/#dockerfiles","title":"Dockerfiles","text":"<p>\u4e00\u90e8\u306eDocker\u30a4\u30e1\u30fc\u30b8\u3068\u30b3\u30f3\u30c6\u30ca\u306f\u3001\u63d0\u4f9b\u3055\u308c\u305f\u30a4\u30e1\u30fc\u30b8\u304b\u3089\u8ffd\u52a0\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u304c\u5fc5\u8981\u3067\u3059\u3002\u3053\u308c\u306b\u306f\u901a\u5e38\u30012\u3064\u306e\u7406\u7531\u304c\u3042\u308a\u307e\u3059:</p> <ol> <li>\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b3\u30fc\u30c9: NGINX\u3001PHP\u3001Node.js\u306a\u3069\u306e\u30b3\u30f3\u30c6\u30ca\u306f\u3001\u305d\u306e\u30a4\u30e1\u30fc\u30b8\u5185\u306b\u5b9f\u969b\u306e\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u30b3\u30fc\u30c9\u304c\u5fc5\u8981\u3067\u3059\u3002\u3053\u308c\u306fDocker\u30d3\u30eb\u30c9\u30b9\u30c6\u30c3\u30d7\u4e2d\u306b\u884c\u308f\u308c\u3001Dockerfile\u3067\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002Lagoon\u306fDocker\u3092\u5b8c\u5168\u306b\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u305f\u3081Dockerfile\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u306b\u3088\u3063\u3066\u51fa\u6765\u4e0a\u304c\u308b\u30a4\u30e1\u30fc\u30b8\u3092\u5b8c\u5168\u306b\u5236\u5fa1\u3067\u304d\u307e\u3059\u3002</li> <li>\u30a4\u30e1\u30fc\u30b8\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba: Lagoon\u3067\u306f\u3001\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u3092\u3042\u306a\u305f\u306e\u30cb\u30fc\u30ba\u306b\u5408\u308f\u305b\u3066\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\u3053\u308c\u306b\u306f\u3001\u8ffd\u52a0\u306e\u74b0\u5883\u5909\u6570\u3092\u633f\u5165\u3057\u305f\u308a\u3001\u30b5\u30fc\u30d3\u30b9\u306e\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u305f\u308a\u3001\u3055\u3089\u306b\u8ffd\u52a0\u306e\u30c4\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u3082\u542b\u307e\u308c\u307e\u3059\u3002Docker\u30a4\u30e1\u30fc\u30b8\u306b\u8ffd\u52a0\u306e\u30c4\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u969b\u306b\u306f\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002\u306a\u305c\u306a\u3089\u3001\u5c06\u6765\u7684\u306b\u4efb\u610f\u306e\u9069\u5fdc\u3092\u7dad\u6301\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u304b\u3089\u3067\u3059\uff01</li> </ol>"},{"location":"ja/using-lagoon-the-basics/#lagoon_1","title":"Lagoon\u306b\u3088\u308b\u30b5\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u3068\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8","text":"\u30bf\u30a4\u30d7 \u30d0\u30fc\u30b8\u30e7\u30f3 Dockerfile MariaDB 10.4, 10.5, 10.6, 10.11 mariadb/Dockerfile PostgreSQL 11, 12, 13, 14, 15 postgres/Dockerfile MongoDB 4 mongo/Dockerfile NGINX openresty/1.25 nginx/Dockerfile Node.js 18, 20, 22 node/Dockerfile PHP FPM 8.1, 8.2, 8.3 php/fpm/Dockerfile PHP CLI 8.1, 8.2, 8.3 php/cli/Dockerfile Python 3.8, 3.9, 3.10, 3.11, 3.12 python/Dockerfile Redis 6, 7 redis/Dockerfile Solr 8, 9 solr/Dockerfile Varnish 6, 7 varnish/Dockerfile Opensearch 2 opensearch/Dockerfiles RabbitMQ 3.10 rabbitmq/Dockerfile Ruby 3.1, 3.2, 3.3 ruby/Dockerfile <p>\u3059\u3079\u3066\u306e\u30a4\u30e1\u30fc\u30b8\u306fhttps://hub.docker.com/u/uselagoon\u306b\u30d7\u30c3\u30b7\u30e5\u3055\u308c\u307e\u3059\u3002\u7279\u6027\u3068\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u89b3\u70b9\u304b\u3089\u5e38\u306b\u6700\u65b0\u306e\u30bf\u30b0(\u4f8b:<code>uselagoon/nginx:latest</code>)\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u304a\u3059\u3059\u3081\u3057\u307e\u3059\u3002</p> <p>\u7279\u5b9a\u306eLagoon\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u30a4\u30e1\u30fc\u30b8\u3001\u4f8b\u3048\u3070<code>uselagoon/nginx:20.10.0</code>\u3084<code>uselagoon/node-10:20.10.0</code>\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u3001\u65b0\u3057\u3044Lagoon\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f\u3089\u3059\u3050\u306b\u30a4\u30e1\u30fc\u30b8\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5404\u81ea\u306e\u8cac\u4efb\u3067\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044\uff01</p>"},{"location":"ja/using-lagoon-the-basics/configure-webhooks/","title":"Webhooks\u306e\u8a2d\u5b9a","text":"<p>Lagoon\u306e\u7ba1\u7406\u8005\u306f\u3001<code>webhook-handler</code>\u3078\u306e\u30eb\u30fc\u30c8\u3082\u3042\u306a\u305f\u306b\u6559\u3048\u3066\u304f\u308c\u308b\u3067\u3057\u3087\u3046\u3002\u3053\u306e\u30eb\u30fc\u30c8\u3092\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30a2\u30a6\u30c8\u30b4\u30fc\u30a4\u30f3\u30b0webhook\u306b\u8ffd\u52a0\u3057\u3001Lagoon\u306b\u9001\u4fe1\u3059\u308b\u30a4\u30d9\u30f3\u30c8\u3092\u9078\u629e\u3057\u307e\u3059\u3002\u901a\u5e38\u306f\u5168\u3066\u306e\u30d7\u30c3\u30b7\u30e5\u3068\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u30a4\u30d9\u30f3\u30c8\u3092\u9001\u4fe1\u3057\u307e\u3059\u3002Lagoon\u3067\u306f\u3069\u306e\u30d6\u30e9\u30f3\u30c1\u3084\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u5b9f\u969b\u306b\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u304b\u3092\u6c7a\u5b9a\u3059\u308b\u305f\u3081\u306e\u6b63\u898f\u8868\u73fe\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u3001Lagoon\u306e\u7ba1\u7406\u8005\u304c\u305d\u308c\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001<code>feature-</code>\u3067\u59cb\u307e\u308b\u5168\u3066\u306e\u30d6\u30e9\u30f3\u30c1\u3092Lagoon\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> amazee.io\u306e\u304a\u5ba2\u69d8\u3078\u306e\u60c5\u5831 <p>amazee.io\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u3067\u5834\u5408\u3001webhook-handler\u3078\u306e\u30eb\u30fc\u30c8\u306f\u6b21\u306e\u3068\u304a\u308a\u3067\u3059\u3002<code>https://hooks.lagoon.amazeeio.cloud</code> </p> <p>\u5371\u967a</p> <p>\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u7ba1\u7406\u3059\u308b\u306b\u306f\u3001\u3053\u308c\u3089\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3078\u306e\u9ad8\u3044\u30ec\u30d9\u30eb\u306e\u30a2\u30af\u30bb\u30b9\u304c\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u3002\u3053\u308c\u306f\u3042\u306a\u305f\u306e\u7d44\u7e54\u306b\u3088\u3063\u3066\u7ba1\u7406\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u8a2d\u5b9a\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\u5834\u5408\u306f\u3001\u30b7\u30b9\u30c6\u30e0\u7ba1\u7406\u8005\u307e\u305f\u306f\u3042\u306a\u305f\u306e\u7d44\u7e54\u5185\u306e\u9069\u5207\u306a\u8cac\u4efb\u8005\u306b\u9023\u7d61\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/using-lagoon-the-basics/configure-webhooks/#github","title":"GitHub","text":"<ol> <li>GitHub\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u8a2d\u5b9a -&gt; Webhooks -&gt; <code>Add webhook</code>\u306b\u9032\u307f\u307e\u3059\u3002 </li> <li><code>Payload URL</code>\u306f\u3001\u3042\u306a\u305f\u306eLagoon\u7ba1\u7406\u8005\u304b\u3089\u63d0\u4f9b\u3055\u308c\u308b\u3001\u3042\u306a\u305f\u306eLagoon\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e<code>webhook-handler</code>\u3078\u306e\u30eb\u30fc\u30c8\u3067\u3059\u3002</li> <li><code>Content type</code>\u3092<code>application/json</code>\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002   </li> <li>\"<code>Let me select individual events</code>\"\u3092\u9078\u629e\u3057\u307e\u3059\u3002</li> <li>\u3069\u306e\u30a4\u30d9\u30f3\u30c8\u304cwebhook\u3092\u30c8\u30ea\u30ac\u30fc\u3059\u308b\u304b\u3092\u9078\u629e\u3057\u307e\u3059\u3002<code>Push</code>\u3068<code>Pull request</code>\u306e\u30a4\u30d9\u30f3\u30c8\u3092\u9001\u4fe1\u3057\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306eLagoon\u8a2d\u5b9a\u3067\u3055\u3089\u306b\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002   </li> <li>webhook\u304c<code>Active</code>\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</li> <li><code>Add webhook</code>\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u8a2d\u5b9a\u3092\u4fdd\u5b58\u3057\u307e\u3059\u3002</li> </ol>"},{"location":"ja/using-lagoon-the-basics/configure-webhooks/#gitlab","title":"GitLab","text":"<ol> <li>GitLab\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u8a2d\u5b9a -&gt; \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002   </li> <li><code>URL</code>\u306f\u3001Lagoon\u306e\u7ba1\u7406\u8005\u304b\u3089\u63d0\u4f9b\u3055\u308c\u308b\u3001Lagoon\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e<code>webhook-handler</code>\u3078\u306e\u30eb\u30fc\u30c8\u3067\u3059\u3002</li> <li>Lagoon\u306b\u901a\u77e5\u3092\u9001\u4fe1\u3059\u308b<code>Trigger</code>\u30a4\u30d9\u30f3\u30c8\u3092\u9078\u629e\u3057\u307e\u3059\u3002<code>Push events</code>\u3068<code>Merge request events</code>\u3092\u9078\u629e\u3057\u3001\u305d\u306e\u5f8cLagoon\u306e\u8a2d\u5b9a\u3067\u3055\u3089\u306b\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002   </li> <li><code>Add webhook</code>\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u8a2d\u5b9a\u3092\u4fdd\u5b58\u3057\u307e\u3059\u3002</li> </ol>"},{"location":"ja/using-lagoon-the-basics/configure-webhooks/#bitbucket","title":"Bitbucket","text":"<ol> <li>\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u8a2d\u5b9a -&gt; \u30a6\u30a7\u30d6\u30d5\u30c3\u30af -&gt; \u65b0\u3057\u3044\u30a6\u30a7\u30d6\u30d5\u30c3\u30af\u3092\u8ffd\u52a0\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002</li> <li><code>Title</code>\u306f\u53c2\u7167\u7528\u3067\u3059\u3002</li> <li><code>URL</code>\u306f\u3042\u306a\u305f\u306eLagoon\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e<code>webhook-handler</code>\u3078\u306e\u30eb\u30fc\u30c8\u3067\u3001Lagoon\u306e\u7ba1\u7406\u8005\u306b\u3088\u3063\u3066\u63d0\u4f9b\u3055\u308c\u307e\u3059\u3002</li> <li> <p><code>Choose from a full list of triggers</code>\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u4ee5\u4e0b\u3092\u9078\u629e\u3057\u307e\u3059:</p> <ul> <li>Repository<ul> <li>PUsh</li> </ul> </li> <li>Pull Request<ul> <li>Created</li> <li>Updated</li> <li>Approved</li> <li>Approval removed</li> <li>Merged</li> <li>Declined</li> </ul> </li> </ul> <p> 5. <code>Save</code>\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066Bitbucket\u306e\u30a6\u30a7\u30d6\u30d5\u30c3\u30af\u8a2d\u5b9a\u3092\u4fdd\u5b58\u3057\u307e\u3059\u3002</p> </li> </ol>"},{"location":"ja/using-lagoon-the-basics/first-deployment/","title":"\u6700\u521d\u306e\u30c7\u30d7\u30ed\u30a4","text":"<p>\u6ce8\u610f:</p> <p>Drupal\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u5834\u5408\u306f\u3001\u3053\u308c\u3092\u30b9\u30ad\u30c3\u30d7\u3057\u3066\u3001Drupal\u306e\u521d\u56de\u30c7\u30d7\u30ed\u30a4\u3092\u304a\u8aad\u307f\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/using-lagoon-the-basics/first-deployment/#1","title":"1. \u6e96\u5099\u304c\u6574\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059","text":"<p>\u6700\u521d\u306e\u30c7\u30d7\u30ed\u30a4\u3092\u6210\u529f\u3055\u305b\u308b\u305f\u3081\u306b\u306f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304cLagoon\u5316\u3055\u308c\u3066\u304a\u308a\u3001Lagoon\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3082\u3057\u305d\u3046\u3067\u306a\u3044\u5834\u5408\u3001\u307e\u305f\u306f\u78ba\u4fe1\u304c\u6301\u3066\u306a\u3044\u5834\u5408\u3001\u307e\u305f\u306f\u99b4\u67d3\u307f\u304c\u306a\u3044\u5834\u5408\u306f\u5fc3\u914d\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002\u30b9\u30c6\u30c3\u30d7\u30d0\u30a4\u30b9\u30c6\u30c3\u30d7\u306e\u30ac\u30a4\u30c9\u306b\u623b\u3063\u3066\u3069\u306e\u3088\u3046\u306b\u52d5\u4f5c\u3059\u308b\u304b\u898b\u3066\u304b\u3089\u3001\u518d\u5ea6\u3053\u306e\u30da\u30fc\u30b8\u306b\u6765\u3066\u304f\u3060\u3055\u3044\uff01</p>"},{"location":"ja/using-lagoon-the-basics/first-deployment/#2","title":"2. \u30d7\u30c3\u30b7\u30e5","text":"<p>Lagoon\u3067\u306f\u3001\u30c7\u30d7\u30ed\u30a4\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u30d6\u30e9\u30f3\u30c1\u306b\u30d7\u30c3\u30b7\u30e5\u3059\u308b\u3053\u3068\u3067\u65b0\u3057\u3044\u30c7\u30d7\u30ed\u30a4\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <p>\u65b0\u3057\u3044\u30b3\u30fc\u30c9\u3092\u30d7\u30c3\u30b7\u30e5\u3059\u308b\u3082\u306e\u304c\u306a\u3044\u5834\u5408\u3067\u3082\u5fc3\u914d\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\uff01\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> Git push<pre><code>git commit --allow-empty -m \"go, go! Lagoon!\"\ngit push\n</code></pre> <p>\u3053\u308c\u306b\u3088\u308a\u30d7\u30c3\u30b7\u30e5\u304c\u30c8\u30ea\u30ac\u30fc\u3055\u308c\u3001Git\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u304c\u8a2d\u5b9a\u3055\u308c\u305fWebhook\u3092\u901a\u3058\u3066Lagoon\u306b\u3053\u306e\u30d7\u30c3\u30b7\u30e5\u3092\u901a\u77e5\u3057\u307e\u3059\u3002</p> <p>\u3059\u3079\u3066\u6b63\u3057\u3051\u308c\u3070\u8a2d\u5b9a\u3055\u308c\u305f\u30c1\u30e3\u30c3\u30c8\u30b7\u30b9\u30c6\u30e0\u306e\u901a\u77e5\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002(\u3053\u308c\u306f\u89aa\u5207\u306aLagoon\u306e\u7ba1\u7406\u8005\u304c\u8a2d\u5b9a\u3057\u305f\u3082\u306e\u3067\u3059)</p> <p></p> <p>\u3053\u308c\u306f\u3001Lagoon\u304c\u3042\u306a\u305f\u306e\u30b3\u30fc\u30c9\u306e\u30c7\u30d7\u30ed\u30a4\u3092\u958b\u59cb\u3057\u305f\u3053\u3068\u3092\u901a\u77e5\u3057\u307e\u3059\u3002\u30b3\u30fc\u30c9\u306e\u5927\u304d\u3055\u3084\u30b3\u30f3\u30c6\u30ca\u306e\u91cf\u306b\u3088\u308a\u307e\u3059\u304c\u3001\u3053\u308c\u306b\u306f\u6570\u79d2\u304b\u304b\u308a\u307e\u3059\u3002\u30ea\u30e9\u30c3\u30af\u30b9\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u4eca\u4f55\u304c\u8d77\u3053\u3063\u3066\u3044\u308b\u306e\u304b\u77e5\u308a\u305f\u3044\u5834\u5408\u306f\u3001Lagoon\u306e\u30d3\u30eb\u30c9\u3068\u30c7\u30d7\u30ed\u30a4\u30d7\u30ed\u30bb\u30b9\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>Lagoon UI \u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u3001\u5c55\u958b\u306e\u9032\u884c\u72b6\u6cc1\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059 (\u3053\u308c\u306b\u3064\u3044\u3066\u306f\u3001Lagoon\u306e\u7ba1\u7406\u8005\u306b\u304a\u554f\u3044\u5408\u308f\u305b\u304f\u3060\u3055\u3044)\u3002</p>"},{"location":"ja/using-lagoon-the-basics/first-deployment/#3","title":"3. \u5b8c\u4e86\u3057\u307e\u3057\u305f","text":"<p>Lagoon\u304c\u30d3\u30eb\u30c9\u3068\u30c7\u30d7\u30ed\u30a4\u3092\u5b8c\u4e86\u3059\u308b\u3068\u3001\u30c1\u30e3\u30c3\u30c8\u30b7\u30b9\u30c6\u30e0\u306b2\u3064\u76ee\u306e\u901a\u77e5\u3092\u9001\u308a\u307e\u3059\u3002\u3053\u3053\u306b\u4f8b\u3092\u793a\u3057\u307e\u3059\u3002</p> <p></p> <p>\u3053\u308c\u306b\u306f\u4ee5\u4e0b\u306e\u60c5\u5831\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059:</p> <ul> <li>\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8</li> <li>\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u305f\u30d6\u30e9\u30f3\u30c1\u3068Git SHA</li> <li>\u30d3\u30eb\u30c9\u3068\u30c7\u30d7\u30ed\u30a4\u306e\u30ed\u30b0\u3078\u306e\u30ea\u30f3\u30af</li> <li>\u74b0\u5883\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3059\u3079\u3066\u306e\u30eb\u30fc\u30c8(URL)\u3078\u306e\u30ea\u30f3\u30af</li> </ul> <p>\u307e\u305f\u3001\u3069\u306e\u3088\u3046\u306a\u901a\u77e5\u306a\u306e\u304b\u3092\u3059\u3050\u306b\u5224\u65ad\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002 \u305d\u308c\u3089\u306f\u7d75\u6587\u5b57\u306b\u3088\u3063\u3066\u59cb\u307e\u308a\u307e\u3059\u3002\u30d3\u30eb\u30c9\u304c\u958b\u59cb\u3057\u305f\u3060\u3051\u306e\u60c5\u5831\u3067\u3042\u308b\u304b\u3001\u6210\u529f\u3067\u3042\u308b\u304b\u3001\u307e\u305f\u306f\u5931\u6557\u3067\u3042\u308b\u304b\u3002</p> <p>\u305d\u308c\u3060\u3051\u3067\u3059\uff01\u3042\u307e\u308a\u96e3\u3057\u304f\u306a\u304b\u3063\u305f\u3053\u3068\u3092\u9858\u3063\u3066\u3044\u307e\u3059\u3002devOps\u3092\u5229\u7528\u53ef\u80fd\u306b\u3059\u308b\u3053\u3068\u304c\u79c1\u305f\u3061\u306e\u76ee\u6a19\u3067\u3059\uff01</p>"},{"location":"ja/using-lagoon-the-basics/first-deployment/#_2","title":"\u4ed6\u306e\u30d6\u30e9\u30f3\u30c1\u3084\u672c\u756a\u74b0\u5883\u306b\u3064\u3044\u3066\u306f\u3069\u3046\u3067\u3057\u3087\u3046\u304b\uff1f","text":"<p>\u3053\u308c\u304cLagoon\u306e\u826f\u3044\u3068\u3053\u308d\u3067\u3059\u3002\u305d\u308c\u3089\u306f\u307e\u3063\u305f\u304f\u540c\u3058\u65b9\u6cd5\u3067\u3059\uff01\u30d6\u30e9\u30f3\u30c1\u306e\u540d\u524d\u3092\u30d7\u30c3\u30b7\u30e5\u3059\u308b\u3060\u3051\u3067\u3001\u305d\u306e\u30d6\u30e9\u30f3\u30c1\u304c\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/using-lagoon-the-basics/first-deployment/#_3","title":"\u5931\u6557\uff1f\u5fc3\u914d\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044","text":"<p>\u30c7\u30d7\u30ed\u30a4\u304c\u5931\u6557\u3057\u307e\u3057\u305f\u304b\uff1f\u79c1\u305f\u3061\u304c\u304a\u624b\u4f1d\u3044\u3057\u307e\u3059\u3002</p> <ol> <li>Drupal\u30b5\u30a4\u30c8\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u305f\u5834\u5408\u3001Drupal\u306e\u521d\u56de\u30c7\u30d7\u30ed\u30a4\u3092\u8aad\u3080\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u308c\u306f\u306a\u305c\u3053\u308c\u304c\u8d77\u3053\u308b\u306e\u304b\u3092\u8aac\u660e\u3057\u307e\u3059\u3002</li> <li>\u30a8\u30e9\u30fc\u901a\u77e5\u306e <code>Logs</code> \u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u30d7\u30ed\u30bb\u30b9\u306e\u3069\u3053\u3067\u5931\u6557\u304c\u767a\u751f\u3057\u305f\u304b\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002</li> <li>\u3082\u3057\u7406\u89e3\u3067\u304d\u306a\u3044\u5834\u5408\u306f\u3001Lagoon\u306e\u30b5\u30dd\u30fc\u30c8\u306b\u5c0b\u306d\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\u79c1\u305f\u3061\u304c\u304a\u624b\u4f1d\u3044\u3057\u307e\u3059\uff01</li> <li>\u30b5\u30dd\u30fc\u30c8\u30c1\u30e3\u30f3\u30cd\u30eb\u307e\u305f\u306fDiscord\u306e\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3067\u79c1\u305f\u3061\u306b\u9023\u7d61\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ol>"},{"location":"ja/using-lagoon-the-basics/going-live/","title":"\u30e9\u30a4\u30d6\u914d\u4fe1\u958b\u59cb","text":"<p>\u304a\u3081\u3067\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3001\u3042\u306a\u305f\u306e\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u304cLagoon\u4e0a\u3067\u30e9\u30a4\u30d6\u914d\u4fe1\u3059\u308b\u4e00\u6b69\u624b\u524d\u306b\u6765\u307e\u3057\u305f\uff01\u3053\u308c\u3092\u3067\u304d\u308b\u3060\u3051\u30b9\u30e0\u30fc\u30ba\u306b\u9032\u3081\u308b\u305f\u3081\u306b\u3001\u6700\u5f8c\u306e\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8\u3092\u3054\u7528\u610f\u3057\u307e\u3057\u305f\u3002\u3053\u308c\u306f\u3001\u30b5\u30a4\u30c8\u3092\u30e9\u30a4\u30d6\u914d\u4fe1\u3059\u308b\u524d\u306b\u6700\u5f8c\u306b\u78ba\u8a8d\u3059\u3079\u304d\u3053\u3068\u3092\u30ac\u30a4\u30c9\u3057\u307e\u3059\u3002</p>"},{"location":"ja/using-lagoon-the-basics/going-live/#lagoonyml","title":"<code>.lagoon.yml</code>\u3092\u78ba\u8a8d\u3059\u308b","text":""},{"location":"ja/using-lagoon-the-basics/going-live/#ssl","title":"\u30eb\u30fc\u30c8 / SSL","text":"<p>\u3042\u306a\u305f\u306e<code>.lagoon.yml</code>\u306b\u3059\u3079\u3066\u306e\u30eb\u30fc\u30c8\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u30c9\u30e1\u30a4\u30f3\u3092Lagoon\u306b\u5411\u3051\u306a\u3044\u5834\u5408\u3001Let's Encrypt(LE)\u306e\u8a3c\u660e\u66f8\u306e\u4f5c\u6210\u3092\u7121\u52b9\u306b\u3059\u3079\u304d\u3067\u3042\u308b\u3053\u3068\u3092\u8a8d\u8b58\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u306e\u307e\u307e\u3067\u306f\u554f\u984c\u3092\u5f15\u304d\u8d77\u3053\u3059\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002Lagoon\u306b\u5411\u3051\u3066\u3044\u306a\u3044\u30c9\u30e1\u30a4\u30f3\u306f\u3001Let's Encrypt\u306e\u5236\u9650\u3092\u8d85\u3048\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u3057\u3070\u3089\u304f\u3059\u308b\u3068\u7121\u52b9\u306b\u306a\u308a\u307e\u3059\u3002</p> <p>\u8a3c\u660e\u6a5f\u95a2(CA)\u306b\u3088\u308b\u7f72\u540d\u4ed8\u304d\u8a3c\u660e\u66f8\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u3001<code>tls-acme</code>\u3092<code>false</code>\u306b\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u304c\u3001<code>insecure</code>\u30d5\u30e9\u30b0\u306f<code>Allow</code>\u307e\u305f\u306f<code>Redirect</code>\u306b\u8a2d\u5b9a\u3057\u305f\u307e\u307e\u306b\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002CA\u8a3c\u660e\u66f8\u306e\u5834\u5408\u3001Lagoon\u306e\u7ba1\u7406\u8005\u306b\u30eb\u30fc\u30c8\u3068\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308bSSL\u8a3c\u660e\u66f8\u3092\u77e5\u3089\u305b\u3066\u304f\u3060\u3055\u3044\u3002</p> .lagoon.yml<pre><code>environments:\nmain:\nroutes:\n- nginx:\n- example.com:\ntls-acme: 'false'\ninsecure: Allow\n- www.example.com:\ntls-acme: 'false'\ninsecure: Allow\n</code></pre> <p>\u6b21\u306b DNS\u30a8\u30f3\u30c8\u30ea\u304c\u3042\u306a\u305f\u306eLagoon\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u6307\u3059\u3088\u3046\u306b\u306a\u308b\u3068\u3001\u30d5\u30e9\u30b0\u3092\u5207\u308a\u66ff\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059:<code>tls-acme</code> \u3092 <code>true</code> \u306b\u3001<code>insecure</code> \u3092 <code>Redirect</code> \u306b\u3057\u307e\u3059\u3002</p> .lagoon.yml<pre><code>environments:\nmain:\nroutes:\n- nginx:\n- example.com:\ntls-acme: 'true'\ninsecure: Redirect\n- www.example.com:\ntls-acme: 'true'\ninsecure: Redirect\n</code></pre> <p>\u6ce8\u610f</p> <p>\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u306e\u3059\u3079\u3066\u306e\u30da\u30fc\u30b8\u3092\u78ba\u8a8d\u3059\u308b\u306e\u306f\u5c11\u3057\u624b\u9593\u304c\u304b\u304b\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u306e\u3067\u3001mixed-content-scan\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u30b5\u30a4\u30c8\u5168\u4f53\u3092\u30af\u30ed\u30fc\u30eb\u3057\u3001\u975eHTTPS\u30b5\u30a4\u30c8\u304b\u3089\u306e\u30a2\u30bb\u30c3\u30c8\u3092\u542b\u3080\u30da\u30fc\u30b8\u3092\u8fd4\u3057\u307e\u3059\u3002</p>"},{"location":"ja/using-lagoon-the-basics/going-live/#_2","title":"\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u306b\u3064\u3044\u3066","text":"<p>\u975ewww\u304b\u3089www\u3078\u306e\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001\u305d\u308c\u3089\u304c <code>redirects-map.conf</code> \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167</p>"},{"location":"ja/using-lagoon-the-basics/going-live/#cron-jobs","title":"Cron jobs","text":"<p>production\u74b0\u5883\u7528\u306eCron jobs\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002<code>.lagoon.yml\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8</code>\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/using-lagoon-the-basics/going-live/#dns","title":"DNS","text":"<p>\u3042\u306a\u305f\u306e\u30b5\u30a4\u30c8\u304camazee.io\u306e\u30b5\u30fc\u30d0\u30fc\u306b\u3067\u304d\u308b\u3060\u3051\u30b9\u30e0\u30fc\u30ba\u306b\u63a5\u7d9a\u3067\u304d\u308b\u3088\u3046\u306b\u3001\u5c02\u7528\u306e\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b5\u30fcDNS\u30ec\u30b3\u30fc\u30c9\u3092\u7528\u610f\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u6280\u8853\u7684\u306aDNS\u30ea\u30bd\u30fc\u30b9\u30ec\u30b3\u30fc\u30c9\u306f\u3001\u3042\u306a\u305f\u306e\u30b5\u30a4\u30c8\u3092amazee.io\u306e\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u306b\u30ea\u30f3\u30af\u3055\u308c\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u4ed6\u306e\u76ee\u7684\u3067\u306f\u4f7f\u7528\u3055\u308c\u307e\u305b\u3093\u3002CNAME\u30ec\u30b3\u30fc\u30c9\u306b\u7591\u554f\u304c\u3042\u308b\u5834\u5408\u306f\u3001Lagoon\u306e\u7ba1\u7406\u8005\u306b\u6b63\u78ba\u306aCNAME\u3092\u8a2d\u5b9a\u3057\u3066\u3082\u3089\u3063\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>amazee.io\u306e\u4f8b: <code>&lt;region-identifier&gt;.amazee.io</code></p> <p>\u30c9\u30e1\u30a4\u30f3\u3092Lagoon\u306b\u5207\u308a\u66ff\u3048\u308b\u524d\u306b\u3001\uff08\u30e9\u30a4\u30d6\u306b\u306a\u308b\u524d\u306b\uff09Time-to-Live (TTL)\u3092\u4e0b\u3052\u3066\u304a\u304f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u53e4\u3044\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u65b0\u3057\u3044\u30b5\u30fc\u30d0\u30fc\u3078\u306e\u5207\u308a\u66ff\u3048\u304c\u8fc5\u901f\u306b\u884c\u308f\u308c\u307e\u3059\u3002\u901a\u5e38\u3001DNS\u306e\u5207\u308a\u66ff\u3048\u524d\u306b\u306fTTL\u3092300-600\u79d2\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002TTL\u306b\u3064\u3044\u3066\u306e\u8a73\u7d30\u60c5\u5831</p> <p>\u60c5\u5831:</p> <p>\u3053\u306e\u60c5\u5831\u306famazee.io\u304c\u30db\u30b9\u30c8\u3057\u3066\u3044\u308b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u306e\u307f\u95a2\u9023\u3057\u3066\u304a\u308a\u3001\u307e\u3082\u306a\u304f\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304b\u3089\u524a\u9664\u3055\u308c\u3001amazee.io\u56fa\u6709\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u8ffd\u52a0\u3055\u308c\u307e\u3059</p>"},{"location":"ja/using-lagoon-the-basics/going-live/#fastly","title":"Fastly\u306e\u63a8\u5968\u8a2d\u5b9a","text":"<p>\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3 (CNAME)</p> <p>\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3(\u4f8b: www.example.com.)\u306eDNS\u30ec\u30b3\u30fc\u30c9\u3092Lagoon\u306b\u5411\u3051\u308b\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306bCNAME\u30ec\u30b3\u30fc\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\uff1a</p> <p><code>CNAME</code>: <code>cdn.amazee.io</code></p> <p>\u30eb\u30fc\u30c8\u30c9\u30e1\u30a4\u30f3(A/AAAA) \u30eb\u30fc\u30c8\u30c9\u30e1\u30a4\u30f3(example.com.\u306a\u3069)\u306e\u8a2d\u5b9a\u306f\u3001DNS\u4ed5\u69d8\u3067\u306f\u30eb\u30fc\u30c8\u30c9\u30e1\u30a4\u30f3\u304cCNAME\u3092\u6307\u3059\u3053\u3068\u3092\u8a31\u53ef\u3057\u3066\u3044\u306a\u3044\u305f\u3081\u3001\u5384\u4ecb\u306a\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002 \u305d\u306e\u305f\u3081\u3001\u4ee5\u4e0b\u306eA\u30ec\u30b3\u30fc\u30c9\u3068AAAA\u30ec\u30b3\u30fc\u30c9\u3092\u4f7f\u7528\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u4e0b\u8a18\u306e\u5404IP\u306b\u500b\u5225\u306e\u30ec\u30b3\u30fc\u30c9\u3092\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\uff1a</p> <ul> <li><code>A</code>: <code>151.101.2.191</code></li> <li><code>A</code>: <code>151.101.66.191</code></li> <li><code>A</code>: <code>151.101.130.191</code></li> <li><code>A</code>: <code>151.101.194.191</code></li> </ul> <ul> <li><code>AAAA</code>: <code>2a04:4e42::703</code></li> <li><code>AAAA</code>: <code>2a04:4e42:200::703</code></li> <li><code>AAAA</code>: <code>2a04:4e42:400::703</code></li> <li><code>AAAA</code>: <code>2a04:4e42:600::703</code></li> </ul> <p>\u6ce8\u610f:</p> <p>\u9759\u7684IP\u306e\u8a2d\u5b9a\u306f\u63a8\u5968\u3057\u307e\u305b\u3093 DNS\u30be\u30fc\u30f3\u5185\u306eIP\u30a2\u30c9\u30ec\u30b9\u3002Lagoon\u306e\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b5\u30a4\u30f3\u30d5\u30e9\u304c\u6642\u9593\u3068\u3068\u3082\u306b\u5909\u5316\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u3001\u9759\u7684IP\u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\u3059\u308b\u3068\u30b5\u30a4\u30c8\u306e\u5229\u7528\u53ef\u80fd\u6027\u306b\u5f71\u97ff\u3092\u53ca\u307c\u3059\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/using-lagoon-the-basics/going-live/#_3","title":"\u30eb\u30fc\u30c8\u30c9\u30e1\u30a4\u30f3","text":"<p>\u30eb\u30fc\u30c8\u30c9\u30e1\u30a4\u30f3(\u4f8b:example.com)\u306e\u8a2d\u5b9a\u306f\u3001DNS\u306e\u4ed5\u69d8\u304c\u30eb\u30fc\u30c8\u30c9\u30e1\u30a4\u30f3\u3092CNAME\u30a8\u30f3\u30c8\u30ea\u306b\u30dd\u30a4\u30f3\u30c8\u3059\u308b\u3053\u3068\u3092\u8a31\u53ef\u3057\u3066\u3044\u306a\u3044\u305f\u3081\u3001\u5c11\u3005\u30c8\u30ea\u30c3\u30ad\u30fc\u306b\u306a\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002DNS\u30d7\u30ed\u30d0\u30a4\u30c0\u306b\u3088\u3063\u3066\u306f\u3001\u30ec\u30b3\u30fc\u30c9\u540d\u304c\u7570\u306a\u308a\u307e\u3059:</p> <ul> <li>ALIAS at DNSimple</li> <li>ANAME at DNS Made Easy</li> <li>ANAME at easyDNS</li> <li>ALIAS at PointDNS</li> <li>CNAME at CloudFlare</li> <li>CNAME at NS1</li> </ul> <p>DNS\u30d7\u30ed\u30d0\u30a4\u30c0\u304c\u30eb\u30fc\u30c8\u30c9\u30e1\u30a4\u30f3\u7528\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u5fc5\u8981\u3068\u3059\u308b\u5834\u5408\u306f\u3001Lagoon\u306e\u7ba1\u7406\u8005\u306b\u9023\u7d61\u3057\u3066\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b5\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u63d0\u4f9b\u3057\u3066\u3082\u3089\u3044\u307e\u3059\u3002</p>"},{"location":"ja/using-lagoon-the-basics/going-live/#_4","title":"\u672c\u756a\u74b0\u5883","text":"<p>Lagoon\u306f\u958b\u767a\u74b0\u5883\u3068\u672c\u756a\u74b0\u5883\u306e\u6982\u5ff5\u3092\u7406\u89e3\u3057\u3066\u3044\u307e\u3059\u3002\u958b\u767a\u74b0\u5883\u306f\u81ea\u52d5\u7684\u306b<code>noindex</code>\u3068<code>nofollow</code>\u306e\u30d8\u30c3\u30c0\u30fc\u3092\u9001\u4fe1\u3057\u3001\u691c\u7d22\u30a8\u30f3\u30b8\u30f3\u306b\u3088\u308b\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u5316\u3092\u7981\u6b62\u3057\u307e\u3059\u3002</p> <p><code>X-Robots-Tag: noindex, nofollow</code></p> <p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\u4e2d\u306b\u3001\u672c\u756a\u74b0\u5883\u306f\u3059\u3067\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u306f\u305a\u3067\u3059\u3002\u3082\u3057\u307e\u3060\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001 \u7701\u7565\u3055\u308c\u305f\u5834\u5408\u3001\u3042\u306a\u305f\u306e\u74b0\u5883\u306f\u958b\u767a\u30e2\u30fc\u30c9\u3067\u52d5\u4f5c\u3057\u307e\u3059\u3002Lagoon\u306e\u30e6\u30fc\u30b6\u30fc\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3067\u74b0\u5883\u304c\u672c\u756a\u74b0\u5883\u3068\u3057\u3066\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u672c\u756a\u74b0\u5883\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001Lagoon\u306e\u7ba1\u7406\u8005\u306b\u77e5\u3089\u305b\u3066\u3001\u30b7\u30b9\u30c6\u30e0\u3092\u9069\u5207\u306b\u8a2d\u5b9a\u3057\u3066\u3082\u3089\u3063\u3066\u304f\u3060\u3055\u3044\u3002</p> <p></p>"},{"location":"ja/using-lagoon-the-basics/lagoon-build-errors-and-warnings/","title":"Lagoon\u30d3\u30eb\u30c9\u306e\u30a8\u30e9\u30fc\u3068\u8b66\u544a","text":"<p>\u65b0\u3057\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306eLagoon\u3067\u306f\u3001\u30d3\u30eb\u30c9\u306b\u6f5c\u5728\u7684\u306a\u554f\u984c\u304c\u3042\u308b\u304b\u3069\u3046\u304b\u3092\u8b58\u5225\u3057\u3001\u5931\u6557\u305b\u305a\u306b\u305d\u308c\u3089\u3092\u8b66\u544a\u3068\u3057\u3066\u30cf\u30a4\u30e9\u30a4\u30c8\u3059\u308b\u6a5f\u80fd\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u306f\u307e\u305fLagoon\u30c1\u30fc\u30e0\u304c\u30e6\u30fc\u30b6\u30fc\u306b\u5bfe\u3057\u3066\u4e88\u5b9a\u3055\u308c\u3066\u3044\u308b\u975e\u63a8\u5968\u4e8b\u9805\u3084\u6a5f\u80fd\u306e\u5909\u66f4\u3092\u901a\u77e5\u3059\u308b\u65b9\u6cd5\u3067\u3082\u3042\u308a\u307e\u3059\u3002</p> <p>\u4f8b\u3048\u3070\u3001Lagoon\u30c1\u30fc\u30e0\u304c <code>.lagoon.yml</code> \u306e\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u3001\u30e6\u30fc\u30b6\u30fc\u304c\u5909\u66f4\u3059\u3079\u304d\u3053\u3068\u304c\u3042\u308b\u5834\u5408\u3001\u8b66\u544a\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u30e6\u30fc\u30b6\u30fc\u306f\u3001\u305d\u308c\u3092\u7834\u58ca\u7684\u306a\u5909\u66f4\u306b\u306a\u308b\u524d\u306b\u4fee\u6b63\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u308c\u306f\u53ef\u80fd\u306a\u9650\u308a\u65e9\u671f\u306b\u89e3\u6c7a\u3059\u308b\u3079\u304d\u3067\u3042\u308a\u3001\u5c06\u6765\u306eLagoon\u306e\u30ea\u30ea\u30fc\u30b9\u3067\u306f\u30a8\u30e9\u30fc\u3092\u51e6\u7406\u3067\u304d\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u30d3\u30eb\u30c9\u3092\u505c\u6b62\u3059\u308b\u3053\u3068\u306f\u3042\u308a\u307e\u305b\u3093\u3002</p> <p>\u3053\u308c\u3089\u306e\u30a8\u30e9\u30fc\u306e\u89e3\u6c7a\u65b9\u6cd5\u304c\u308f\u304b\u3089\u306a\u3044\u5834\u5408\u306f\u3001Lagoon\u306e\u7ba1\u7406\u8005\u306b\u9023\u7d61\u3059\u308b\u304b\u3001Lagoon\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3067\u8cea\u554f\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/using-lagoon-the-basics/lagoon-build-errors-and-warnings/#docker-compose-errors","title":"Docker Compose\u306e\u30a8\u30e9\u30fc","text":"<p>\u3088\u304f\u3042\u308bDocker Compose\u306e\u554f\u984c\u306b\u3064\u3044\u3066\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3082\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u308c\u3089\u306e\u554f\u984c\u306e\u4e00\u90e8\u306f\u305d\u3053\u3067\u30ab\u30d0\u30fc\u3055\u308c\u3066\u3044\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002</p> env_file \u30a8\u30e9\u30fc\u3092\u793a\u3059 Lagoon \u30d3\u30eb\u30c9\u51fa\u529b<pre><code>&gt; an env_file is defined in your docker-compose file, but no matching file found\n</code></pre> <p>Docker Compose \u30d3\u30eb\u30c9\u6642\u306b\u53c2\u7167\u3055\u308c\u308benv\u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3059\u308b\u3053\u3068\u3092\u671f\u5f85\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u305d\u306eenv\u30d5\u30a1\u30a4\u30eb\u306f\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u74b0\u5883\u3067\u306e\u307f\u5b58\u5728\u3059\u308b\u304b\u3001Dockerfile\u304b\u3089\u9664\u5916\u3055\u308c\u3066\u3044\u307e\u3059\u3002Lagoon\u30c1\u30fc\u30e0\u306f\u3001Docker Compose\u304c\u3053\u306e\u30a8\u30e9\u30fc\u3092\u7121\u8996\u3059\u308b\u3053\u3068\u3092\u53ef\u80fd\u306b\u3059\u308b\u305f\u3081\u306e\u4f5c\u696d\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u89e3\u6c7a\u7b56\u304c\u898b\u3064\u304b\u308b\u307e\u3067\u3053\u306e\u8b66\u544a\u306f\u7d9a\u304d\u307e\u3059\u3002</p> \u6587\u5b57\u5217\u30ad\u30fc\u30a8\u30e9\u30fc\u3092\u793a\u3059Lagoon\u30d3\u30eb\u30c9\u51fa\u529b<pre><code>&gt; an invalid string key was detected in your docker-compose file\n</code></pre> <p>\u3042\u306a\u305f\u306eDocker Compose\u30d5\u30a1\u30a4\u30eb\u306b\u30a8\u30e9\u30fc\u304c\u3042\u308a\u307e\u3059\u3001\u304a\u305d\u3089\u304f\u5f62\u5f0f\u304c\u4e0d\u6b63\u307e\u305f\u306f\u30a8\u30a4\u30ea\u30a2\u30b9\u3084\u30a2\u30f3\u30ab\u30fc\u306e\u4e0d\u5099\u306b\u95a2\u9023\u3057\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u898b\u308c\u3070\u305d\u306e\u5834\u6240\u304c\u308f\u304b\u308b\u306f\u305a\u3067\u3059\u3002</p> yaml\u691c\u8a3c\u30a8\u30e9\u30fc\u3092\u793a\u3059Lagoon\u30d3\u30eb\u30c9\u51fa\u529b<pre><code>&gt; There are yaml validation errors in your docker-compose file that should be corrected\n</code></pre> <p>\u3042\u306a\u305f\u306eDocker Compose\u30d5\u30a1\u30a4\u30eb\u306b\u30a8\u30e9\u30fc\u304c\u3042\u308a\u307e\u3059\u3001\u304a\u305d\u3089\u304f\u5f62\u5f0f\u304c\u4e0d\u6b63\u307e\u305f\u306f\u30a8\u30a4\u30ea\u30a2\u30b9\u3084\u30a2\u30f3\u30ab\u30fc\u306e\u4e0d\u5099\u306b\u95a2\u9023\u3057\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u898b\u308c\u3070\u305d\u306e\u5834\u6240\u304c\u308f\u304b\u308b\u306f\u305a\u3067\u3059\u3002</p>"},{"location":"ja/using-lagoon-the-basics/local-development-environments/","title":"\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u74b0\u5883","text":"<p>Lagoon\u306b\u306fDocker\u3068Docker Compose(\u307b\u3068\u3093\u3069\u304cDocker\u3068\u4e00\u7dd2\u306b\u51fa\u8377\u3055\u308c\u3066\u3044\u307e\u3059)\u306b\u3057\u304b\u4f9d\u5b58\u3057\u307e\u305b\u3093\u304c\u3001Docker\u306b\u542b\u307e\u308c\u3066\u3044\u306a\u3044\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u306b\u5f79\u7acb\u3064\u3082\u306e\u304c\u3044\u304f\u3064\u304b\u3042\u308a\u307e\u3059:</p> <ul> <li>\u30ca\u30a4\u30b9\u306aURL\u3068HTTPS\u30aa\u30d5\u30ed\u30fc\u30c7\u30a3\u30f3\u30b0\u306e\u305f\u3081\u306eHTTP\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u3002</li> <li>IP\u30a2\u30c9\u30ec\u30b9\u3092\u899a\u3048\u3066\u304a\u304f\u5fc5\u8981\u304c\u306a\u3044DNS\u30b7\u30b9\u30c6\u30e0\u3002</li> <li>\u30b3\u30f3\u30c6\u30ca\u5185\u3067SSH\u30ad\u30fc\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306eSSH\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3002</li> <li>\u30e1\u30fc\u30eb\u3092\u30ed\u30fc\u30ab\u30eb\u3067\u53d7\u4fe1\u3057\u3066\u8868\u793a\u3059\u308b\u30b7\u30b9\u30c6\u30e0\u3002</li> </ul> Warning <p>\u30ed\u30fc\u30ab\u30eb\u3067Lagoon\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\uff01\u3053\u308c\u306f\u6df7\u4e71\u3059\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002Lagoon\u306f\u3042\u306a\u305f\u306e\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u74b0\u5883\u3092\u672c\u756a\u74b0\u5883\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u30b7\u30b9\u30c6\u30e0\u3067\u3042\u308a\u3001\u74b0\u5883\u305d\u306e\u3082\u306e\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002</p>"},{"location":"ja/using-lagoon-the-basics/local-development-environments/#pygmyddevlando-","title":"pygmy\u3001DDEV\u3001\u307e\u305f\u306fLando - \u9078\u629e\u306f\u3042\u306a\u305f\u6b21\u7b2c\u3067\u3059\u3002","text":""},{"location":"ja/using-lagoon-the-basics/local-development-environments/#pygmy","title":"pygmy","text":"<p>Lagoon\u306f\u4f1d\u7d71\u7684\u306b<code>pygmy</code>\u3068\u6700\u3082\u826f\u597d\u306b\u52d5\u4f5c\u3057\u3066\u304d\u307e\u3057\u305f\u3002\u3053\u308c\u306f\u4e0a\u8a18\u306e\u30c4\u30fc\u30eb\u306eamazee.io\u30d5\u30ec\u30fc\u30d0\u30fc\u30b7\u30b9\u30c6\u30e0\u3067\u3042\u308a\u3001Lagoon\u3068\u305d\u306e\u307e\u307e\u52d5\u4f5c\u3057\u307e\u3059\u3002\u3053\u308c\u306fhttps://github.com/pygmystack/pygmy\u306b\u3042\u308a\u307e\u3059\u3002</p> <p><code>pygmy</code>\u306fGolang\u3067\u66f8\u304b\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u306b\u306f\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059:</p> HomeBrew\u3067\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb<pre><code>brew tap pygmystack/pygmy &amp;&amp; brew install pygmy\n</code></pre> <p>pygmy\u306e\u8a73\u7d30\u306a\u4f7f\u7528\u65b9\u6cd5\u3084\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u60c5\u5831\u306b\u3064\u3044\u3066\u306f\u3001\u305d\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/using-lagoon-the-basics/local-development-environments/#lando","title":"Lando","text":"<p>Lagoon\u306fLando\u3068\u975e\u5e38\u306b\u3088\u304f\u7d44\u307f\u5408\u308f\u3055\u308c\u3066\u3044\u307e\u3059\uff01\u8a73\u7d30\u306a\u60c5\u5831\u306f\u3001https://docs.lando.dev/config/lagoon.html\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u4f7f\u7528\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>Lando\u306eLagoon\u5411\u3051\u306e\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u306fLando\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u3068\u3063\u3066\u306f\u99b4\u67d3\u307f\u6df1\u3044\u3082\u306e\u3067\u3042\u308a\u3001\u307e\u305fLagoon\u306e\u521d\u5fc3\u8005\u304c\u59cb\u3081\u308b\u306e\u306b\u3082\u6700\u3082\u7c21\u5358\u306a\u65b9\u6cd5\u306b\u306a\u308a\u307e\u3059\u3002\u4e00\u65b9\u3001Pygmy\u306fDocker\u3068\u3088\u308a\u5bc6\u63a5\u306b\u7d71\u5408\u3055\u308c\u3066\u304a\u308a\u3001\u3088\u308a\u8907\u96d1\u306a\u30b7\u30ca\u30ea\u30aa\u3084\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306b\u9069\u3057\u3066\u3044\u307e\u3059\u304c\u3088\u308a\u6df1\u3044\u7406\u89e3\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"ja/using-lagoon-the-basics/local-development-environments/#ddev","title":"DDEV","text":"<p>Lagoon\u306fDDEV\u3067\u3082\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u3059\uff01\u59cb\u3081\u308b\u305f\u3081\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002https://ddev.readthedocs.io/en/stable/users/providers/lagoon/\u3002</p> <p>\u4ee5\u524d\u306b\u306f\u3001Docksal\u3084Docker4Drupal\u306a\u3069\u306e\u4ed6\u306e\u30b7\u30b9\u30c6\u30e0\u3078\u306e\u30b5\u30dd\u30fc\u30c8\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3092\u8a55\u4fa1\u3057\u305f\u3053\u3068\u304c\u3042\u308a\u307e\u3057\u305f\u3002\u5c06\u6765\u7684\u306b\u3053\u308c\u3089\u306e\u30b5\u30dd\u30fc\u30c8\u3092\u8ffd\u52a0\u3059\u308b\u53ef\u80fd\u6027\u306f\u3042\u308a\u307e\u3059\u304c\u3001\u73fe\u5728\u306e\u3068\u3053\u308d\u306f\u65e2\u5b58\u306e\u30c4\u30fc\u30eb\u3078\u306e\u30b5\u30dd\u30fc\u30c8\u306b\u7126\u70b9\u3092\u5f53\u3066\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"ja/using-lagoon-the-basics/setup-project/","title":"\u65b0\u3057\u3044\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a","text":"<p>\u6ce8\u610f:</p> <p>\u6211\u3005\u306f\u5168\u3066\u306e\u4eba\u304cLagoon\u3092\u4f7f\u3063\u3066\u81ea\u5206\u81ea\u8eab\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8a2d\u5b9a\u3057\u3001\u69cb\u6210\u3059\u308b\u3053\u3068\u3092\u53ef\u80fd\u306b\u3059\u308b\u305f\u3081\u306eCLI\u3068GraphQL API\u306e\u8a2d\u5b9a\u306b\u71b1\u5fc3\u306b\u53d6\u308a\u7d44\u3093\u3067\u3044\u307e\u3059\u3002\u73fe\u5728\u3053\u308c\u3089\u306e\u6a5f\u80fd\u3092\u30ea\u30ea\u30fc\u30b9\u3067\u304d\u308b\u524d\u306b\u66f4\u306a\u308b\u30c6\u30b9\u30c8\u304c\u5fc5\u8981\u306a\u306e\u3067\u304a\u5f85\u3061\u304f\u3060\u3055\u3044\uff01</p> <p>\u305d\u308c\u307e\u3067\u306f\u65b0\u3057\u3044\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\u306fLagoon\u306e\u7ba1\u7406\u8005\u3068\u8a71\u3057\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u308c\u306b\u3064\u3044\u3066\u306f\u554f\u984c\u306a\u3044\u3067\u3059\u3001\u5f7c\u3089\u306fAPI\u3088\u308a\u3082\u305a\u3063\u3068\u30d5\u30ec\u30f3\u30c9\u30ea\u30fc\u3067\u3059\u3002\ud83d\ude0a</p> <p>\u3042\u306a\u305f\u306eLagoon\u7ba1\u7406\u8005\u306e\u305f\u3081\u306b\u4ee5\u4e0b\u306e\u60c5\u5831\u3092\u6e96\u5099\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044:</p> <ul> <li>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u540d\u524d<ul> <li>\u3053\u306e\u540d\u524d\u306f\u5c0f\u6587\u5b57\u3001\u6570\u5b57\u3001\u30c0\u30c3\u30b7\u30e5\u306e\u307f\u3092\u542b\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059</li> <li>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u5185\u306b\u30c0\u30d6\u30eb\u30c0\u30c3\u30b7\u30e5(<code>--</code>)\u306f\u8a31\u53ef\u3055\u308c\u3066\u3044\u307e\u305b\u3093</li> </ul> </li> <li>\u3053\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u53d6\u308a\u7d44\u3080\u3059\u3079\u3066\u306e\u4eba\u306eSSH\u516c\u958b\u9375\u3001\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3001\u540d\u524d\u3002\u3053\u3053\u306b\u306f\u3001GitHub\u3001GitLab\u3001Bitbucket \u306eSSH\u30ad\u30fc\u306e\u751f\u6210\u3068\u30b3\u30d4\u30fc\u306b\u3064\u3044\u3066\u306e\u6307\u793a\u304c\u3042\u308a\u307e\u3059</li> <li>\u3042\u306a\u305f\u306e\u30b3\u30fc\u30c9\u304c\u30db\u30b9\u30c8\u3055\u308c\u3066\u3044\u308bGit\u30ea\u30dd\u30b8\u30c8\u30ea\u306eURL(<code>git@example.com:test/test.git</code>)</li> <li>\u3042\u306a\u305f\u304c\u4f7f\u7528\u3059\u308bGit\u30d6\u30e9\u30f3\u30c1\u306e\u540d\u524d\u3042\u306a\u305f\u306e\u672c\u756a\u74b0\u5883\u3067\u4f7f\u7528\u3057\u305f\u3044\u74b0\u5883\u306b\u3064\u3044\u3066 (\u74b0\u5883\u306e\u7a2e\u985e \u3067\u74b0\u5883\u306e\u8a73\u7d30\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044)</li> <li>\u8ffd\u52a0\u306e\u74b0\u5883\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u305f\u3044\u30d6\u30e9\u30f3\u30c1\u3068\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u3002Lagoon\u3067\u306f\u3001\u6b63\u898f\u8868\u73fe\u3067\u30d6\u30e9\u30f3\u30c1\u3068\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u540d\u524d\u3092\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3067\u304d\u3001\u3042\u306a\u305f\u306eLagoon\u7ba1\u7406\u8005\u304c\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002</li> </ul> <p>\u7279\u5b9a\u306e\u91cd\u8981\u306a\u30d6\u30e9\u30f3\u30c1(\u4f8b\u3048\u3070<code>develop</code>\u3084<code>main</code>)\u3084\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u6700\u7d42\u7684\u306a\u5224\u65ad\u306f\u3042\u306a\u305f\u6b21\u7b2c\u3067\u3059\uff01(\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u3067\u8a73\u7d30\u60c5\u5831\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044)</p>"},{"location":"ja/using-lagoon-the-basics/setup-project/#1-lagoon","title":"1. \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304cLagoon\u5316\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b","text":"<p>\u3053\u308c\u306f\u3001<code>.lagoon.yml</code>\u30d5\u30a1\u30a4\u30eb\u3068<code>docker-compose.yml</code>\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u306a\u305f\u306eGit\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u5b58\u5728\u3057\u3001\u9069\u5207\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u610f\u5473\u3057\u307e\u3059\u3002</p> <p>\u3082\u3057\u3053\u308c\u304c\u5b9f\u73fe\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001\u5148\u306b\u9032\u3080\u524d\u306b\u30b9\u30c6\u30c3\u30d7\u30d0\u30a4\u30b9\u30c6\u30c3\u30d7\u30ac\u30a4\u30c9\u306e\u30ea\u30b9\u30c8\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/using-lagoon-the-basics/setup-project/#2","title":"2. \u3042\u306a\u305f\u306e\u30b3\u30fc\u30c9\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u63d0\u4f9b\u3059\u308b","text":"<p>\u3042\u306a\u305f\u306e\u30b3\u30fc\u30c9\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u305f\u3081\u306b\u3001Lagoon\u306f\u30b3\u30fc\u30c9\u3078\u30a2\u30af\u30bb\u30b9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u8a2d\u8a08\u4e0a\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u305f\u3081\u306bLagoon\u306f\u3042\u306a\u305f\u306eGit\u30ea\u30dd\u30b8\u30c8\u30ea\u3078\u306e\u8aad\u307f\u53d6\u308a\u30a2\u30af\u30bb\u30b9\u3057\u304b\u5fc5\u8981\u3068\u3057\u307e\u305b\u3093</p> <p>Lagoon\u306e\u7ba1\u7406\u8005\u304b\u3089\u3001\u8aad\u307f\u53d6\u308a\u30a2\u30af\u30bb\u30b9\u3092\u4e0e\u3048\u308b\u3079\u304dSSH\u516c\u958b\u9375\u3084Git\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u6559\u3048\u3066\u3082\u3089\u3046\u5fc5\u7528\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002</p>"},{"location":"ja/using-lagoon-the-basics/setup-project/#3-webhooks","title":"3. Webhooks\u306e\u8a2d\u5b9a","text":"<p>Lagoon\u306f\u3001Git\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u8d77\u3053\u3063\u3066\u3044\u308b\u3044\u304f\u3064\u304b\u306e\u30a4\u30d9\u30f3\u30c8\u3092\u77e5\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u73fe\u5728\u306f\u30d7\u30c3\u30b7\u30e5\u3068\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u3059\u304c\u3001\u5c06\u6765\u7684\u306b\u306f\u3082\u3063\u3068\u8ffd\u52a0\u3055\u308c\u308b\u4e88\u5b9a\u3067\u3059\u3002</p> <p>Lagoon\u306f\u591a\u304f\u306e\u7570\u306a\u308bGit\u30db\u30b9\u30c8\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u3053\u308c\u3089\u306e\u6307\u793a\u3092\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u5206\u5272\u3057\u307e\u3057\u305f:Webhooks\u306e\u8a2d\u5b9a\u3002</p>"},{"location":"ja/using-lagoon-the-basics/setup-project/#4","title":"4. \u6b21\u306b:\u6700\u521d\u306e\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8","text":"<p>\u304a\u3081\u3067\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3001\u3042\u306a\u305f\u306f\u4eca\u6700\u521d\u306e\u30c7\u30d7\u30ed\u30a4\u3092\u5b9f\u884c\u3059\u308b\u6e96\u5099\u304c\u3067\u304d\u307e\u3057\u305f\u3002</p>"}]}