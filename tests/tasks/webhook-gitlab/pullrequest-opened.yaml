- name: "{{ testname }} - POST gitlab pull request open webhook with pr number {{ git_pr_number }}, git base branch {{ git_base_branch }}, pr branch {{ git_pr_branch }}, pr commit hash {{ git_pr_commit_hash }} and repo {{ git_repo_ssh_url }} to {{ webhook_url }}"
  uri:
    url: "{{ webhook_url }}"
    headers:
      X-Gitlab-Event: Merge Request Hook
      content-type: application/json
    method: POST
    follow_redirects: yes
    body_format: json
    body: '{"object_kind":"merge_request","user":{"name":"Michael Schmid","username":"michael.schmid1","avatar_url":"https://secure.gravatar.com/avatar/c4f5bd5f32eec798c2df7afe0040c49f?s=80\u0026d=identicon"},"project":{"id":5796982,"name":"test","description":"","web_url":"https://gitlab.com/michael.schmid1/test","avatar_url":null,"git_ssh_url":"{{ git_repo_ssh_url }}","git_http_url":"https://gitlab.com/michael.schmid1/test.git","namespace":"michael.schmid1","visibility_level":0,"path_with_namespace":"michael.schmid1/test","default_branch":"master","ci_config_path":null,"homepage":"https://gitlab.com/michael.schmid1/test","url":"git@gitlab.com:michael.schmid1/test.git","ssh_url":"git@gitlab.com:michael.schmid1/test.git","http_url":"https://gitlab.com/michael.schmid1/test.git"},"object_attributes":{"assignee_id":null,"author_id":2127130,"created_at":"2018-03-19 00:01:08 UTC","description":"bla bla bbla","head_pipeline_id":null,"id":123456789,"iid":{{ git_pr_number }},"last_edited_at":null,"last_edited_by_id":null,"merge_commit_sha":null,"merge_error":null,"merge_params":{"force_remove_source_branch":"0"},"merge_status":"unchecked","merge_user_id":null,"merge_when_pipeline_succeeds":false,"milestone_id":null,"source_branch":"{{ git_pr_branch }}","source_project_id":5796982,"state":"opened","target_branch":"{{ git_base_branch }}","target_project_id":5796982,"time_estimate":0,"title":"{{ git_pr_title }}","updated_at":"2018-03-19 00:01:08 UTC","updated_by_id":null,"url":"https://gitlab.com/michael.schmid1/test/merge_requests/1","source":{"id":5796982,"name":"test","description":"","web_url":"https://gitlab.com/michael.schmid1/test","avatar_url":null,"git_ssh_url":"git@gitlab.com:michael.schmid1/test.git","git_http_url":"https://gitlab.com/michael.schmid1/test.git","namespace":"michael.schmid1","visibility_level":0,"path_with_namespace":"michael.schmid1/test","default_branch":"master","ci_config_path":null,"homepage":"https://gitlab.com/michael.schmid1/test","url":"git@gitlab.com:michael.schmid1/test.git","ssh_url":"git@gitlab.com:michael.schmid1/test.git","http_url":"https://gitlab.com/michael.schmid1/test.git"},"target":{"id":5796982,"name":"test","description":"","web_url":"https://gitlab.com/michael.schmid1/test","avatar_url":null,"git_ssh_url":"git@gitlab.com:michael.schmid1/test.git","git_http_url":"https://gitlab.com/michael.schmid1/test.git","namespace":"michael.schmid1","visibility_level":0,"path_with_namespace":"michael.schmid1/test","default_branch":"master","ci_config_path":null,"homepage":"https://gitlab.com/michael.schmid1/test","url":"git@gitlab.com:michael.schmid1/test.git","ssh_url":"git@gitlab.com:michael.schmid1/test.git","http_url":"https://gitlab.com/michael.schmid1/test.git"},"last_commit":{"id":"{{ git_pr_commit_hash }}","message":"Add new file","timestamp":"2018-03-19T00:00:48Z","url":"https://gitlab.com/michael.schmid1/test/commit/0a4478d1f34b0e6a3d307f8be06eafdd35652f08","author":{"name":"Michael Schmid","email":"michael.schmid@amazee.com"}},"work_in_progress":false,"total_time_spent":0,"human_total_time_spent":null,"human_time_estimate":null,"action":"open"},"labels":[],"changes":{"total_time_spent":{"previous":null,"current":0}},"repository":{"name":"test","url":"git@gitlab.com:michael.schmid1/test.git","description":"","homepage":"https://gitlab.com/michael.schmid1/test"}}'
